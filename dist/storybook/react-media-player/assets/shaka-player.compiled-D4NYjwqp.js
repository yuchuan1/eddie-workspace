import{c as Vk,g as Hk}from"./iframe-vYpGuEfi.js";function Gk(Xo,Wo){for(var ur=0;ur<Wo.length;ur++){const Pi=Wo[ur];if(typeof Pi!="string"&&!Array.isArray(Pi)){for(const b in Pi)if(b!=="default"&&!(b in Xo)){const Ur=Object.getOwnPropertyDescriptor(Pi,b);Ur&&Object.defineProperty(Xo,b,Ur.get?Ur:{enumerable:!0,get:()=>Pi[b]})}}}return Object.freeze(Object.defineProperty(Xo,Symbol.toStringTag,{value:"Module"}))}var dp={};var Dx;function Kk(){return Dx||(Dx=1,(function(Xo){(function(){var Wo=typeof window<"u"?window:Vk,ur={};(function(b,Ur,Wk){var d,Lx=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},xu=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function Px(e){e=[typeof globalThis=="object"&&globalThis,e,typeof b=="object"&&b,typeof self=="object"&&self,typeof Ur=="object"&&Ur];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var Ni=Px(this);function $e(e,t){if(t)e:{var n=Ni;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&xu(n,e,{configurable:!0,writable:!0,value:t})}}var fc;if(typeof Object.setPrototypeOf=="function")fc=Object.setPrototypeOf;else{var dc;e:{var Nx={a:!0},hp={};try{hp.__proto__=Nx,dc=hp.a;break e}catch{}dc=!1}fc=dc?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var pp=fc;function Qe(e,t){if(e.prototype=Lx(t.prototype),e.prototype.constructor=e,pp)pp(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Em=t.prototype}function gp(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function g(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:gp(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function V(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function Su(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function hc(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}Su.prototype.u=function(e){this.h=e};function pc(e,t){e.i={Zh:t,oi:!0},e.g=e.m||e.j}Su.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}Su.prototype.A=function(e){this.g=e};function G(e){e.g=0}function ue(e,t,n){e.m=t,n!=null&&(e.j=n)}function oi(e,t){e.m=0,e.j=t||0}function de(e,t,n){e.g=t,e.m=n||0}function ae(e,t){return e.m=t||0,t=e.i.Zh,e.i=null,t}function sn(e){e.B=[e.i],e.m=0,e.j=0}function un(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.oi?e.g=e.m||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function jx(e){this.g=new Su,this.h=e}function Ox(e,t){hc(e.g);var n=e.g.l;return n?gc(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),zo(e))}function gc(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var o=r.value}catch(s){return e.g.l=null,pc(e.g,s),zo(e)}return e.g.l=null,i.call(e.g,o),zo(e)}function zo(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,pc(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.oi)throw t.Zh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ux(e){this.next=function(t){return hc(e.g),e.g.l?t=gc(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=zo(e)),t},this.throw=function(t){return hc(e.g),e.g.l?t=gc(e,e.g.l.throw,t,e.g.u):(pc(e.g,t),t=zo(e)),t},this.return=function(t){return Ox(e,t)},this[Symbol.iterator]=function(){return this}}function _x(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function C(e){return _x(new Ux(new jx(e)))}function gt(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}$e("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,xu(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",r=0;return t}),$e("Symbol.iterator",function(e){return e||(e=Symbol("Symbol.iterator"),xu(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return mp(gp(this))}}),e)});function mp(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}$e("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=Ni.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.G),reject:s(this.l)}},t.prototype.G=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.I(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.F(s):this.m(s)}},t.prototype.F=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.J(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.H(),this.B()},t.prototype.H=function(){var s=this;r(function(){if(s.C()){var u=Ni.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var s=Ni.CustomEvent,u=Ni.Event,a=Ni.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=Ni.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.B=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.I=function(s){var u=this.j();s.Re(u.resolve,u.reject)},t.prototype.J=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(h,p){return typeof h=="function"?function(m){try{l(h(m))}catch(v){c(v)}}:p}var l,c,f=new t(function(h,p){l=h,c=p});return this.Re(a(s,l),a(u,c)),f},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Re=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.o=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=g(s),c=l.next();!c.done;c=l.next())i(c.value).Re(u,a)})},t.all=function(s){var u=g(s),a=u.next();return a.done?i([]):new t(function(l,c){function f(m){return function(v){h[m]=v,p--,p==0&&l(h)}}var h=[],p=0;do h.push(void 0),p++,i(a.value).Re(f(h.length-1),c),a=u.next();while(!a.done)})},t});function Vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}$e("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=g(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!Vn(a,s)){var l=new n;xu(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if((function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch{return!1}})())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!Vn(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&Vn(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&Vn(a,s)&&Vn(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&Vn(a,s)&&Vn(a[s],this.g)?delete a[s][this.g]:!1},t}),$e("Map",function(e){function t(){var u={};return u.xc=u.next=u.head=u}function n(u,a){var l=u[1];return mp(function(){if(l){for(;l.head!=u[1];)l=l.xc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u[0][l];if(c&&Vn(u[0],l))for(u=0;u<c.length;u++){var f=c[u];if(a!==a&&f.key!==f.key||a===f.key)return{id:l,list:c,index:u,entry:f}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this[0]={},this[1]=t(),this.size=0,u){u=g(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if((function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(g([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}})())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this[1],xc:this[1].xc,head:this[1],key:u,value:a},l.list.push(l.entry),this[1].xc.next=l.entry,this[1].xc=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this[0][u.id],u.entry.xc.next=u.entry.next,u.entry.next.xc=u.entry.xc,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].xc=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r}),$e("Set",function(e){function t(n){if(this.g=new Map,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(g([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch{return!1}})()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)});function vp(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{ki:r,v:o}}return{ki:-1,v:void 0}}$e("Array.prototype.findIndex",function(e){return e||function(t,n){return vp(this,t,n).ki}});function mc(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}$e("Array.prototype.values",function(e){return e||function(){return mc(this,function(t,n){return n})}}),$e("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),$e("Array.prototype.keys",function(e){return e||function(){return mc(this,function(t){return t})}}),$e("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),$e("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,n<0&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}});function wu(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}$e("String.prototype.includes",function(e){return e||function(t,n){return wu(this,t,"includes").indexOf(t,n||0)!==-1}}),$e("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}}),$e("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return(function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}})()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),$e("Array.prototype.find",function(e){return e||function(t,n){return vp(this,t,n).v}}),$e("String.prototype.startsWith",function(e){return e||function(t,n){var i=wu(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),$e("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)Vn(t,i)&&n.push([i,t[i]]);return n}});var Bx=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("No nullish arg");e=Object(e);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Vn(i,r)&&(e[r]=i[r])}return e};$e("Object.assign",function(e){return e||Bx}),$e("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),$e("Array.prototype.entries",function(e){return e||function(){return mc(this,function(t,n){return[t,n]})}}),$e("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),$e("String.prototype.repeat",function(e){return e||function(t){var n=wu(this,null,"repeat");if(t<0||t>1342177279)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),$e("Number.EPSILON",function(){return 2220446049250313e-31}),$e("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),$e("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),$e("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)Vn(t,i)&&n.push(t[i]);return n}}),$e("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),$e("String.prototype.endsWith",function(e){return e||function(t,n){var i=wu(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;r>0&&n>0;)if(i[--n]!=t[--r])return!1;return r<=0}}),$e("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return t<0?-n:n}});var bx=this||self;function K(e,t){e=e.split(".");var n=bx;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function _r(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}_r.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Au(e){return e.h/(1-Math.pow(e.g,e.i))}function Yo(){this.h=new _r(2),this.j=new _r(5),this.g=0,this.i=128e3,this.l=16e3}Yo.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Yo.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Yo.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Au(this.h),Au(this.j))};function Fx(){}function qn(){}function xe(){}function ji(e){var t=gt.apply(1,arguments);yp.has(e)||(yp.add(e),xe.apply(Fx,V(t)))}function Vx(){}function zk(){}function Yk(){}var yp=new Set;b.console&&(new Map().set(1,function(){return console.error.apply(console,V(gt.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,V(gt.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,V(gt.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,V(gt.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,V(gt.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,V(gt.apply(0,arguments)))}),xe=function(){return console.warn.apply(console,V(gt.apply(0,arguments)))},qn=function(){console.error.apply(console,V(gt.apply(0,arguments)))});function Tp(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Nn(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}function ar(e,t,n){if(n||(n=Tp),e.length!=t.length)return!1;t=t.slice(),e=g(e);for(var i=e.next(),r={};!i.done;r={ri:void 0},i=e.next()){if(r.ri=i.value,i=t.findIndex((function(o){return function(s){return n(o.ri,s)}})(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function Oi(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Tp),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Eu(){this.g=new Map}d=Eu.prototype,d.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},d.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},d.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},d.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},d.size=function(){return this.g.size},d.keys=function(){return Array.from(this.g.keys())};function Me(){this.g=new Eu}d=Me.prototype,d.release=function(){this.Qa(),this.g=null},d.D=function(e,t,n,i){this.g&&(e=new xp(e,t,n,i),this.g.push(t,e))},d.za=function(e,t,n,i){function r(s){o.Ma(e,t,r),n(s)}var o=this;this.D(e,t,r,i)},d.Ma=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ma(),this.g.remove(t,r))}},d.Qa=function(){if(this.g){for(var e=[],t=g(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,V(n.value));for(e=g(e),t=e.next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},K("shaka.util.EventManager",Me),Me.prototype.removeAll=Me.prototype.Qa,Me.prototype.unlisten=Me.prototype.Ma,Me.prototype.listenOnce=Me.prototype.za,Me.prototype.listen=Me.prototype.D,Me.prototype.release=Me.prototype.release;function xp(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=Hx(e,i),this.target.addEventListener(t,n,this.g)}xp.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Hx(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),Gx(e)?t:t.capture||!1}function Gx(e){var t=Sp;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}Sp=t}return t||!1}var Sp=void 0;K("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function We(e){this.h=e,this.g=void 0}We.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function he(){return Kx.value()}var Hn=null,vc=null,Kx=new We(function(){var e=void 0;return Hn&&(e=Hn()),!e&&vc&&(e=vc()),e});function yc(e,t){this.g=e,this.h=t}yc.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ee(e,t){var n=new yc(5,0),i=wp,r=i.g,o=n.h-r.h;((n.g-r.g||o)>0?i.i:i.h)(i.g,n,e,t)}function Xx(e,t,n,i){xe([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Wx(e,t,n,i){qn([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var wp=null;var zx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function nt(e){var t;e instanceof nt?(Iu(this,e.ec),this.hd=e.hd,Cu(this,e.Eb),Tc(this,e.Cd),this.Tb=e.Tb,lr(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(zx))?(Iu(this,t[1]||"",!0),this.hd=Br(t[2]||""),Cu(this,t[3]||"",!0),Tc(this,t[4]),this.Tb=Br(t[5]||"",!0),lr(this,t[6]||"",!0),this.Rc=Br(t[7]||"")):this.g=new br(null)}d=nt.prototype,d.ec="",d.hd="",d.Eb="",d.Cd=null,d.Tb="",d.Rc="",d.toString=function(){var e=[],t=this.ec;if(t&&e.push(qo(t,Ap,!0),":"),t=this.Eb){e.push("//");var n=this.hd;n&&e.push(qo(n,Ap,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Cd,t!=null&&e.push(":",String(t))}return(t=this.Tb)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(qo(t,t.charAt(0)=="/"?Jx:qx,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",qo(t,Qx)),e.join("")},d.resolve=function(e){var t=this.clone();t.ec==="data"&&(t=new nt);var n=!!e.ec;n?Iu(t,e.ec):n=!!e.hd,n?t.hd=e.hd:n=!!e.Eb,n?Cu(t,e.Eb):n=e.Cd!=null;var i=e.Tb;if(n)Tc(t,e.Cd);else if(n=!!e.Tb){if(i.charAt(0)!="/")if(this.Eb&&!this.Tb)i="/"+i;else{var r=t.Tb.lastIndexOf("/");r!=-1&&(i=t.Tb.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((o.length>1||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.Tb=i:n=e.g.toString()!=="",n?lr(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},d.clone=function(){return new nt(this)};function Iu(e,t,n){e.ec=n?Br(t,!0):t,e.ec&&(e.ec=e.ec.replace(/:$/,""))}function Cu(e,t,n){e.Eb=n?Br(t,!0):t}function Tc(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function lr(e,t,n){t instanceof br?e.g=t:(n||(t=qo(t,$x)),e.g=new br(t))}function Br(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function qo(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Yx),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yx(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ap=/[#\/\?@]/g,qx=/[#\?:]/g,Jx=/[#\?]/g,$x=/[#\?@]/g,Qx=/#/g;function br(e){this.g=e||null}function Mu(e){if(!e.fb&&(e.fb=new Map,e.Td=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(i>=0){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o),r=r||"",e.add(o,decodeURIComponent(r))}}d=br.prototype,d.fb=null,d.Td=null;function Ep(e){return Mu(e),e.Td}d.add=function(e,t){Mu(this),this.g=null;var n=this.fb.has(e)?this.fb.get(e):null;return n||this.fb.set(e,n=[]),n.push(t),this.Td++,this},d.set=function(e,t){return Mu(this),this.g=null,this.fb.has(e)?this.fb.set(e,[t]):this.add(e,t),this},d.get=function(e){return Mu(this),this.fb.get(e)||[]},d.toString=function(){if(this.g)return this.g;if(!this.fb||!this.fb.size)return"";for(var e=[],t=g(this.fb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.fb.get(i);for(var r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}}return this.g=e.join("&")},d.clone=function(){var e=new br;if(e.g=this.g,this.fb){for(var t=new Map,n=g(this.fb),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.fb=t,e.Td=this.Td}return e};function Fr(){}function si(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=se(e);t=se(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function yn(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function se(e,t,n){return n=n===void 0?1/0:n,xc(e,t===void 0?0:t,n,Uint8Array)}function Ip(e,t,n){return n=n===void 0?1/0:n,xc(e,t===void 0?0:t,n,Uint16Array)}function Ht(e,t,n){return n=n===void 0?1/0:n,xc(e,t===void 0?0:t,n,DataView)}function xc(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}K("shaka.util.BufferUtils",Fr),Fr.toDataView=Ht,Fr.toUint16=Ip,Fr.toUint8=se,Fr.toArrayBuffer=yn,Fr.equal=si;function M(e,t,n){var i=gt.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}M.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},K("shaka.util.Error",M),M.Severity={RECOVERABLE:1,CRITICAL:2},M.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},M.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function cr(){}function ze(e){if(!e)return"";if(e=se(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),b.TextDecoder&&!he().wh())return e=new TextDecoder().decode(e),e.includes("�")&&qn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if((e[n]&128)==0?i=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),i<=65535)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function Ui(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new M(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ht(e);for(var r=0;r<n;r++)i[r]=e.getUint16(r*2,t);return wc(i)}function Jn(e){function t(i){return n.byteLength<=i||n[i]>=9&&n[i]<=126}if(!e)return"";var n=se(e);if(n[0]==239&&n[1]==187&&n[2]==191)return ze(n);if(n[0]==254&&n[1]==255)return Ui(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ui(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ui(e,!1);if(n[1]==0&&n[3]==0)return Ui(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ze(e);throw new M(2,2,2003)}function jn(e){if(b.TextEncoder&&!he().wh()){var t=new TextEncoder;return yn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return yn(t)}function Sc(e,t){for(var n=new ArrayBuffer(e.length*2),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(r*2,e.charCodeAt(r),t);return n}function wc(e){return Cp.value()(e)}function Ut(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),r>=0&&r<=1114111?String.fromCodePoint(r):""):t[r]||"'"}):e||""}K("shaka.util.StringUtils",cr),cr.resetFromCharCode=function(){Cp.g=void 0},cr.toUTF16=Sc,cr.toUTF8=jn,cr.fromBytesAutoDetect=Jn,cr.fromUTF16=Ui,cr.fromUTF8=ze;var Cp=new We(function(){function e(n){try{var i=new Uint8Array(n);return String.fromCharCode.apply(null,i).length>0}catch{return!1}}for(var t={Pc:65536};t.Pc>0;t={Pc:t.Pc},t.Pc/=2)if(e(t.Pc))return(function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.Pc)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.Pc));return r}})(t);return null});function It(){}function ku(e){return e=wc(se(e)),btoa(e)}function ui(e,t){return t=t??!0,e=ku(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Tn(e){e=b.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function fr(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=b.parseInt(e.substr(i*2,2),16);return n}function ai(e){var t=se(e);e="",t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function rt(){for(var e=gt.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(se(r),n),n+=r.byteLength}return t}K("shaka.util.Uint8ArrayUtils",It),It.concat=rt,It.toHex=ai,It.fromHex=fr,It.fromBase64=Tn,It.toBase64=ui,It.toStandardBase64=ku;function mt(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new nt(e[0]);return t=new nt(t[0]),t=i.resolve(t),n&&lr(t,n),[t.toString()]}t=t.map(function(u){return new nt(u)}),i=[],e=g(e);for(var r=e.next();!r.done;r=e.next()){r=new nt(r.value);for(var o=g(t),s=o.next();!s.done;s=o.next())s=r.resolve(s.value),n&&lr(s,n),i.push(s.toString())}return i}function li(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function Mp(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=ui(fr(u),!1));var l=s;l.length!=22&&(l=ui(fr(s),!1)),s={kty:"oct",kid:a,k:l},n.push(s),i.push(s.kid),r.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:i});return o=[{initData:se(jn(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+b.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(r)}}function Vr(e,t){if(t.length==1)return t[0];if(e=Gt(e,t),e!=null)return e;throw new M(2,4,4025,t)}function Gt(e,t){var n=Dp.get(e);n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==pe?"":null}function Ac(e,t){var n=[];e=Dp.get(e),e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())o=o.value,i.test(o.trim())&&n.push(o.trim())}return n}var pe="text",ut={Aa:"video",ka:"audio",Na:pe,Xf:"image",ll:"application"},kp=1/15,Dp=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function Jo(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&xe("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ee("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{xe("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(xe("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||xe(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Du(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function Rp(e){e.g&&e.i.classList.add("shaka-hidden")}Jo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Lp(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}K("shaka.lcevc.Dec",Jo),Jo.prototype.release=Jo.prototype.release;function $o(){}function dr(e,t){Hr.set(e,t)}function Zx(){var e={};if(he(),ni())for(var t=g(Hr.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=ni()?Hr.has(n):Ir().canPlayType(n)!="";return e}function Pp(e,t){if(t){var n=Hr.get(t.toLowerCase());if(n)return n}throw new M(2,4,4e3,e,t)}K("shaka.media.ManifestParser",$o),$o.unregisterParserByMime=function(e){Hr.delete(e)},$o.registerParserByMime=dr,$o.registerParserByExtension=function(){Ee("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},$o.AccessibilityPurpose={ym:"visually impaired",Jl:"hard of hearing",fm:"spoken subtitles"};var Hr=new Map;function Qo(){}Qo.prototype.extract=function(){},Qo.prototype.decode=function(){return[]},Qo.prototype.clear=function(){},Qo.prototype.getStreams=function(){return[]};function Ec(){}Ec.prototype.init=function(){},Ec.prototype.parse=function(){return[]};function Np(){}d=Np.prototype,d.init=function(){},d.zf=function(){},d.Nd=function(){},d.remove=function(){},d.Yf=function(){},K("shaka.media.IClosedCaptionParser",Np);function Gn(e){this.h=new Map,this.i=0,this.j=new Ec,(e=jp(e.toLowerCase()))&&(this.j=e()),this.g=new Qo,(e=hr)&&(this.g=e(),this.h.set(this.i,this.g))}d=Gn.prototype,d.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=hr)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Nd();this.j.init(e),n!=-1&&(this.i=n)},d.zf=function(e){e=this.j.parse(e),e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=se(t.packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},d.Nd=function(){this.g.clear()},d.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=g(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},d.Yf=function(){return this.g.getStreams()};function Ic(e,t){Cc.set(e,t)}function jp(e){return Cc.get(e)}K("shaka.media.ClosedCaptionParser",Gn),Gn.findDecoder=function(){return hr},Gn.unregisterDecoder=function(){hr=null},Gn.registerDecoder=function(e){hr=e},Gn.findParser=jp,Gn.unregisterParser=function(e){Cc.delete(e)},Gn.registerParser=Ic;var Cc=new Map,hr=null;function pr(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=$t,this.scroll=Op}K("shaka.text.CueRegion",pr);var $t=1;pr.units={PX:0,PERCENTAGE:$t,LINES:2};var Op="";pr.scrollMode={NONE:Op,UP:"up"};function Gr(e){this.h=e||"",this.g=0}function Kr(e){_i(e,/[ \t]+/gm)}function _i(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function gr(e){return e.g==e.h.length?null:(e=_i(e,/[^ \t\n]*/gm))?e[0]:null}function Zo(e){if(e=_i(e,eS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+t*60+(Number(e[1])||0)*3600}function Xr(e){return e?Zo(new Gr(e)):null}var eS=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ru(){}function On(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=Array.isArray(i);if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function Bi(e){var t={},n;for(n in e)t[n]=e[n];return t}function Lu(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=Lu(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=g(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=Lu(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}K("shaka.util.ObjectUtils",Ru),Ru.alphabeticalKeyOrderStringify=Lu,Ru.shallowCloneObject=Bi,Ru.cloneObject=On;function es(e,t){var n=n===void 0?!1:n;return e=Jn(e),mr(e,t,n)}function mr(e,t,n){return e=tS(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function Mc(e){return Dc.has(e)?Dc.get(e):""}function tS(e,t){function n(o,s){s=s===void 0?!1:s;for(var u=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){s=r+2,r=e.indexOf(">",r),s=e.substring(s,r);var a=s.indexOf(o);if(a==-1){var l=o.indexOf(".");l>0&&(a=s.indexOf(o.substring(0,l)))}if(a==-1)throw o=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(o.length-1)+`
Column: `+(o[o.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){a=e.indexOf("]]>",r),a==-1?(u.push(e.substr(r+9)),r=e.length):(u.push(e.substring(r+9,a)),r=a+3);continue}r++;continue}e:{l=s,r++;var c=i(),f={};for(a=[];e.charCodeAt(r)!==62&&e[r];){var h=e.charCodeAt(r);if(h>64&&h<91||h>96&&h<123){h=i();for(var p=e.charCodeAt(r);p&&p!==39&&p!==34&&!(p>64&&p<91||p>96&&p<123)&&p!==62;)r++,p=e.charCodeAt(r);var m=r+1;if(r=e.indexOf(e[r],m),m=e.slice(m,r),p===39||p===34){if(r===-1){if(l={tagName:c,attributes:f,children:a,parent:null},t)for(c=0;c<a.length;c++)typeof a[c]!="string"&&(a[c].parent=l);a=l;break e}}else m=null,r--;if(h.startsWith("xmlns:")){p=m;var v=h.split(":")[1];Dc.set(p,v),Rc.set(v,p)}c==="tt"&&h==="xml:space"&&m==="preserve"&&(l=!0),f[h]=m}r++}for(e.charCodeAt(r-1)!==47?(r++,a=n(c,l)):r++,l={tagName:c,attributes:f,children:a,parent:null},c=a.length,f=0;f<c;f++)h=a[f],typeof h!="string"?t&&(h.parent=l):f==c-1&&h==`
`&&a.pop();a=l}if(u.push(a),typeof a=="string")break;a.tagName[0]==="?"&&a.children&&(u.push.apply(u,V(a.children)),a.children=[])}else a=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),a=e.slice(a,r+1),s?a.length>0&&u.push(a):(u.length&&a.length==1&&a[0]==`
`||a.trim().length>0)&&u.push(a),r++;return u}function i(){for(var o=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(o,r)}var r=0;return n("")}function Pu(e){return typeof e=="string"}function Up(e){var t=[];if(!e.children)return[];e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Pe(e,t){var n=[];if(!e.children)return[];e=g(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function it(e){return typeof e=="string"?Ut(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Ut(e))}function _t(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=it(e))&&(e=e.trim()),e):null}function Kn(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=g(e.children);for(var i=e.next();!i.done;i=e.next())Kn(i.value,t,n)}return n}function Ge(e,t){return e=Pe(e,t),e.length!=1?null:e[0]}function xn(e,t,n){return e=_p(e,t,n),e.length!=1?null:e[0]}function oe(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function ci(e,t,n){return t=Mc(t),e.attributes[t+":"+n]||null}function _p(e,t,n){var i=Mc(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=g(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function $n(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())if(i=ci(e,i.value,n))return i;return null}function fi(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Qn(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Nu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function xt(e){return e=Number(e),e%1===0?e:null}function Zn(e){return e=Number(e),e%1===0&&e>0?e:null}function St(e){return e=Number(e),e%1===0&&e>=0?e:null}function ju(e){return e=Number(e),isNaN(e)?null:e}function Ou(e){return e?e.toLowerCase()==="true":!1}function nS(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Uu(e){var t=[];e=Ut(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),o=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),u=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:u?Number(u[1])-1:null,Dc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Dc=n.slice(1))}return t}function Bp(e,t){var n=Uu(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=bp(e,"t",i.t)),i.n!==null&&(n=bp(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.Dc)&&e[n]?Fp(e[n],r,i,_t(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(V(t.children))))}}function bp(e,t,n){var i=0;e=g(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function Fp(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function Vp(e){var t="",n=e.tagName.split(":");n.length>0&&(t=n[0],t=Rc.has(t)?Rc.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=g(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=Vp(i),t.appendChild(n);return t}function kc(e){if(!e)return null;var t={tagName:e.tagName,attributes:Bi(e.attributes),children:[],parent:null};e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=kc(n),n.parent=t),t.children.push(n);return t}var Dc=new Map,Rc=new Map;function Ve(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new pr,this.position=null,this.positionAlign=bu,this.size=0,this.textAlign=ei,this.direction=is,this.writingMode=vr,this.lineInterpretation=rs,this.line=null,this.lineHeight="",this.lineAlign=yr,this.displayAlign=ns,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Yp,this.fontStyle=Nc,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function Hp(e,t){return e=new Ve(e,t,""),e.lineBreak=!0,e}Ve.prototype.clone=function(){var e=new Ve(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function _u(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Oi(e.nestedCues,t.nestedCues,_u))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Oi(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function Bu(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Gp(t);var i=n;n=[];for(var r=-1,o=0;o<i.length;o++)i[o]==="<"?r=o+1:i[o]===">"&&r>0&&(r=i.substr(r,o-r),r.match(rS)&&n.push(r),r=-1);for(n=g(n),o=n.next();!o.done;o=n.next())o=o.value,i=i.replace("<"+o+">",'<div time="'+o+'">'),i+="</div>";e:{o=i,r=[];var s=-1;n="",i=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){n=o;break e}if((a=o.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===a)n+="/"+a+">";else{if(!l.startsWith("v")){n+=o[u];continue}n+="/"+l+">"}u+=a.length+1}else n+=o[u]}else n+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&s>0&&(r.push(o.substr(s,u-s)),s=-1),n+=o[u];for(o=g(r),r=o.next();!r.done;r=o.next())r=r.value,s=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+s+">"),n=n.replace("</"+r+">","</"+s+">"),i||(n+="</"+s+">")}n=iS(n),e.payload="",i="<span>"+n.replace(/\n/g,"<br />")+"</span>";try{var c=mr(i,"span")}catch{}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=g(c),n=c.next();!n.done;n=c.next())Kp(n.value,e,t);else e.payload=Ut(n);else e.payload=Ut(n)}else e.payload=Ut(n)}function Gp(e){for(var t=g(Object.entries(Wp)),n=t.next();!n.done;n=t.next()){var i=g(n.value);n=i.next().value,i=i.next().value;var r=new Ve(0,0,"");r.color=i,e.set("."+n,r)}for(t=g(Object.entries(zp)),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,r=new Ve(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function iS(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function Kp(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new pr,i.position=null,i.size=0,i.textAlign=ei,e.tagName)for(var r=g(e.tagName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(u=i,s=n.get(s))&&(u.backgroundColor=ts(s.backgroundColor,u.backgroundColor),u.color=ts(s.color,u.color),u.fontFamily=ts(s.fontFamily,u.fontFamily),u.fontSize=ts(s.fontSize,u.fontSize),u.textShadow=ts(s.textShadow,u.textShadow),u.fontWeight=s.fontWeight,u.fontStyle=s.fontStyle,u.opacity=s.opacity,u.rubyTag=s.rubyTag,u.textCombineUpright=s.textCombineUpright,u.wrapLine=s.wrapLine),o){case"br":i=Hp(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=Wr;break;case"i":i.fontStyle=zr;break;case"u":i.textDecoration.push(di);break;case"font":(o=e.attributes.color)&&(i.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Xr(o))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.children,Pu(e)||r.length==1&&Pu(r[0]))for(n=it(e).split(`
`),e=!0,n=g(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=Hp(i.startTime,i.endTime),t.nestedCues.push(e)),r.length>0&&(e=i.clone(),e.payload=Ut(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=g(r),e=t.next();!e.done;e=t.next())Kp(e.value,i,n)}function ts(e,t){return e&&e.length>0?e:t}K("shaka.text.Cue",Ve),Ve.parseCuePayload=Bu,Ve.equal=_u,Ve.prototype.clone=Ve.prototype.clone;var bu="auto";Ve.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:bu};var ei="center",Lc={LEFT:"left",RIGHT:"right",CENTER:ei,START:"start",END:"end"};Ve.textAlign=Lc;var ns="after",Xp={BEFORE:"before",CENTER:"center",AFTER:ns};Ve.displayAlign=Xp;var is="ltr";Ve.direction={HORIZONTAL_LEFT_TO_RIGHT:is,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var vr="horizontal-tb";Ve.writingMode={HORIZONTAL_TOP_TO_BOTTOM:vr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var rs=0;Ve.lineInterpretation={LINE_NUMBER:rs,PERCENTAGE:1};var yr="start",Pc={CENTER:"center",START:yr,END:"end"};Ve.lineAlign=Pc;var Wp={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Ve.defaultTextColor=Wp;var zp={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Ve.defaultTextBackgroundColor=zp;var Yp=400,Wr=700;Ve.fontWeight={NORMAL:Yp,BOLD:Wr};var Nc="normal",zr="italic",qp={NORMAL:Nc,ITALIC:zr,OBLIQUE:"oblique"};Ve.fontStyle=qp;var di="underline";Ve.textDecoration={UNDERLINE:di,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var rS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function bi(){}bi.prototype.destroy=function(){};function hi(e,t,n){jc.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Af:t})}function Yr(e,t){for(var n=e.toLowerCase().split(";")[0],i=g([Jp,Uc,Oc,Fi]),r=i.next();!r.done;r=i.next())if(r=jc.get(n+"-"+r.value)){var o=r.Af(),s=o.isSupported(e,t);if(o.destroy(),s)return r.Af}return null}K("shaka.transmuxer.TransmuxerEngine",bi),bi.findTransmuxer=Yr,bi.unregisterTransmuxer=function(e,t){jc.delete(e.toLowerCase().split(";")[0]+"-"+t)},bi.registerTransmuxer=hi,bi.prototype.destroy=bi.prototype.destroy;var jc=new Map,Fi=1,Oc=2,Uc=3,Jp=4;bi.PluginPriority={FALLBACK:Fi,PREFERRED_SECONDARY:Oc,PREFERRED:Uc,APPLICATION:Jp};function _c(){}function Ze(e,t){var n=e;return t&&!pi.includes(e)&&(n+='; codecs="'+t+'"'),n}function Fu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Bc(e,t,n){var i=Ze(e,t);return t=Fu(e,t),Yr(t)?(e=Yr(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function os(e){return e.split(";")[0].split("/")[1]}function ct(e){var t=$p(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc";case e==="lvc1":return"lcevc"}return e}function Vi(e){var t=[];e=g(e.split(","));for(var n=e.next();!n.done;n=e.next())n=$p(n.value),t.push(n[0]);return t.sort().join(",")}function Qt(e){return e.split(";")[0]}function Kt(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Vu(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function $p(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}K("shaka.util.MimeUtils",_c),_c.getFullTypeWithAllCodecs=Fu,_c.getFullType=Ze,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var pi=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function gi(e){this.i=null,this.l=e,this.C=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.j=new Map}function wt(e,t){as.set(e,t)}function ss(e){return as.get(e)}function us(e){return as.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!hr:!1}gi.prototype.destroy=function(){return this.l=this.i=null,this.j.clear(),Promise.resolve()};function oS(e,t,n,i,r){var o,s,u,a,l,c,f;return C(function(h){if(h.g==1)return T(h,Promise.resolve(),2);if(!e.i||!e.l)return h.return();if(n==null||i==null)return e.i.parseInit(se(t)),h.return();for(o=e.C?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(se(t),s,r,[]),a=g(u),l=a.next();!l.done;l=a.next())c=l.value,e.B(c,r||null,s);f=u.filter(function(p){return p.startTime>=e.m&&p.startTime<e.o}),e.l.append(f),e.g==null&&(e.g=Math.max(n,e.m)),e.h=Math.min(i,e.o),G(h)})}gi.prototype.remove=function(e,t,n){n=n===void 0?!1:n;var i=this;return C(function(r){if(r.g==1)return T(r,Promise.resolve(),2);if(e>=t)return r.return();n&&aS(i,e,t),i.l&&i.l.remove(e,t)&&i.g!=null&&(t<=i.g||e>=i.h||(e<=i.g&&t>=i.h?i.g=i.h=null:e<=i.g&&t<i.h?i.g=t:e>i.g&&t>=i.h&&(i.h=e)),eg(i)),G(r)})};function sS(e,t,n){e.m=t,e.o=n}function Qp(e,t,n){e.F=t,(t=e.j.get(t))&&(t=t.filter(function(i){return i.endTime<=n}),t.length&&e.l.append(t))}function Zp(e,t,n){t.startTime+=n,t.endTime+=n,t=g(t.nestedCues);for(var i=t.next();!i.done;i=t.next())Zp(e,i.value,n)}function uS(e,t,n){var i=new Map;t=g(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value;r=o.stream,o=o.cue,i.has(r)||i.set(r,[]),Zp(e,o,n),o.startTime>=e.m&&o.startTime<e.o&&(i.get(r).push(o),r==e.F&&e.l.append([o]))}for(n=g(i.keys()),t=n.next();!t.done;t=n.next())for(t=t.value,e.j.has(t)||e.j.set(t,[]),r=g(i.get(t)),o=r.next();!o.done;o=r.next())o=o.value,e.j.get(t).push(o);eg(e)}function aS(e,t,n){for(var i=g(e.j.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o=e.j.get(r);o=o.filter(function(s){return s.startTime<t||s.endTime>=n}),e.j.set(r,o)}}function eg(e){for(var t=1/0,n=-1/0,i=g(e.j.values()),r=i.next();!r.done;r=i.next()){r=g(r.value);for(var o=r.next();!o.done;o=r.next())o=o.value,t=Math.min(t,o.startTime),n=Math.max(n,o.endTime)}t!==1/0&&n!==-1/0&&(e.g=e.g==null?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}K("shaka.text.TextEngine",gi),gi.prototype.destroy=gi.prototype.destroy,gi.findParser=ss,gi.unregisterParser=function(e){as.delete(e)},gi.registerParser=wt;var as=new Map;function ls(e){this.h=e,this.g=null}ls.prototype.ia=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){b.clearTimeout(i),n=!1},i=b.setTimeout(function(){n&&t.h()},e*1e3),this},ls.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ge(e){this.h=e,this.g=null}ge.prototype.Kb=function(){return this.stop(),this.h(),this},ge.prototype.ia=function(e){var t=this;return this.stop(),this.g=new ls(function(){t.h()}).ia(e),this},ge.prototype.Ea=function(e){var t=this;return this.stop(),this.g=new ls(function(){t.g.ia(e),t.h()}).ia(e),this},ge.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},K("shaka.util.Timer",ge),ge.prototype.stop=ge.prototype.stop,ge.prototype.tickEvery=ge.prototype.Ea,ge.prototype.tickAfter=ge.prototype.ia,ge.prototype.tickNow=ge.prototype.Kb;function lS(e,t){return e.concat(t)}function cS(){}function Hi(e){return e!=null}function Hu(e,t){return Promise.race([t,new Promise(function(n,i){new ge(i).ia(e)})])}function Un(){}function qr(e,t){return e=ke(e),t=ke(t),e.split("-")[0]==t.split("-")[0]}function cs(e,t){return e=ke(e),t=ke(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function bc(e,t){return e=ke(e),t=ke(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function ke(e){e=g(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=g(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=tg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Tr(e,t){return e=ke(e),t=ke(t),t==e?4:cs(t,e)?3:bc(t,e)?2:cs(e,t)?1:0}function Gu(e){var t=e.indexOf("-");return e=t>=0?e.substring(0,t):e,e=e.toLowerCase(),e=tg.get(e)||e}function Fc(e){return e.language?ke(e.language):e.audio&&e.audio.language?ke(e.audio.language):e.video&&e.video.language?ke(e.video.language):"und"}function Ku(e,t){e=ke(e);var n=new Set;t=g(t);for(var i=t.next();!i.done;i=t.next())n.add(ke(i.value));for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,cs(i,e))return i;for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,bc(i,e))return i;for(n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,cs(e,t))return t;return null}K("shaka.util.LanguageUtils",Un),Un.findClosestLocale=Ku,Un.getLocaleForVariant=Fc,Un.getLocaleForText=function(e){return ke(e.language||"und")},Un.getBase=Gu,Un.relatedness=Tr,Un.areSiblings=function(e,t){var n=Gu(e),i=Gu(t);return e!=n&&t!=i&&n==i},Un.normalize=ke,Un.isSiblingOf=bc,Un.isParentOf=cs,Un.areLanguageCompatible=qr,Un.areLocaleCompatible=function(e,t){return e=ke(e),t=ke(t),e==t};var tg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ng(){}function ig(e,t,n,i,r){function o(S){var x=String(S.width||"")+String(S.height||"")+String(Math.round(S.frameRate||0))+(S.hdr||"")+S.fastSwitching;return S.dependencyStream&&(x+=S.dependencyStream.baseOriginalId||""),S.roles&&(x+=S.roles.sort().join("_")),x}function s(S){var x=S.language+(S.channelsCount||0)+(S.audioSamplingRate||0)+S.roles.join(",")+S.label+S.groupId+S.fastSwitching;return S.dependencyStream&&(x+=S.dependencyStream.baseOriginalId||""),x}if(r.length){var u=e.textStreams;r=g(r);for(var a=r.next(),l={};!a.done;l={Eh:void 0},a=r.next())if(l.Eh=a.value,a=u.filter((function(S){return function(x){return!!(x.codecs.startsWith(S.Eh)||x.mimeType.startsWith(S.Eh))}})(l)),a.length){u=a;break}e.textStreams=u}if(u=e.variants,(t.length||n.length)&&(u=fS(u,t,n)),i.length){for(t=new Eu,n=g(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(S,x){S=0;var A=[];x=g(x);for(var I=x.next(),R={};!I.done;R={Wf:void 0},I=x.next())R.Wf=I.value,I=i.filter((function(E){return function(w){return E.Wf.decodingInfos[0][w]}})(R)).length,I>S?(S=I,A=[R.Wf]):I==S&&A.push(R.Wf);c.push.apply(c,V(A))}),u=c}for(n=new Set,t=new Set,u=g(u),r=u.next();!r.done;r=u.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);u=Array.from(n).sort(function(S,x){return S.bandwidth-x.bandwidth});var f=[];for(n=new Map,u=g(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=s(r),l=n.get(a)||[],l.length){var h=l[l.length-1],p=ct(h.codecs),m=ct(r.codecs);p!=m||r.bandwidth&&h.bandwidth&&!(r.bandwidth>h.bandwidth)||(l.push(r),f.push(r.id))}else l.push(r),f.push(r.id);n.set(a,l)}var v={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};u=Array.from(t).sort(function(S,x){if(!S.bandwidth||!x.bandwidth||S.bandwidth==x.bandwidth){if(S.codecs&&x.codecs&&S.codecs!=x.codecs&&S.width==x.width){var A=ct(S.codecs),I=ct(x.codecs);if(A!=I)return(v[A]||1)-(v[I]||1)}return S.width-x.width}return S.bandwidth-x.bandwidth}),t=he().Bb();var y=[];for(n=new Map,u=g(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=o(r),l=n.get(a)||[],l.length){if(h=l[l.length-1],!t&&(p=ct(h.codecs),m=ct(r.codecs),p!==m))continue;p=ct(h.codecs),m=ct(r.codecs),p!=m||r.bandwidth&&h.bandwidth&&!(r.bandwidth>h.bandwidth)||(l.push(r),y.push(r.id))}else l.push(r),y.push(r.id);n.set(a,l)}e.variants=e.variants.filter(function(S){var x=S.audio;return S=S.video,!(x&&!f.includes(x.id)||S&&!y.includes(S.id))})}function fS(e,t,n){t=g(t);for(var i=t.next(),r={};!i.done;r={videoCodec:void 0},i=t.next())if(r.videoCodec=i.value,i=e.filter((function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.videoCodec)}})(r)),i.length){e=i;break}for(n=g(n),t=n.next(),i={};!t.done;i={audioCodec:void 0},t=n.next())if(i.audioCodec=t.value,t=e.filter((function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.audioCodec)}})(i)),t.length){e=t;break}return e}function dS(e,t,n){e.variants=e.variants.filter(function(i){return Xu(i,t,n)})}function Xu(e,t,n){function i(u,a,l){return u>=a&&u<=l}var r=e.video;if(r&&r.width&&r.height){var o=r.width,s=r.height;if(s>o&&(s=g([s,o]),o=s.next().value,s=s.next().value),!i(o,t.minWidth,Math.min(t.maxWidth,n.width))||!i(s,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function hS(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,C(function(r){return r.g==1?T(r,rg(e,t,t.offlineSessionIds.length>0,n,i),2):(vS(t),T(r,yS(t),0))})}function rg(e,t,n,i,r){var o,s;return C(function(u){if(u.g==1)return he().Xi()&&pS(t.variants),T(u,Vc(t.variants,n,!1,i),2);o=null,e&&(s=e.g)&&(o=s.keySystem),t.variants=t.variants.filter(function(a){var l=gS(a,o,r);if(!l){var c=[];a.audio&&c.push(fg(a.audio)),a.video&&c.push(fg(a.video))}return l}),G(u)})}function pS(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=g(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value,i=g(t);for(var r=i.next();!r.done;r=i.next()){var o=g(r.value);if(r=o.next().value,o=o.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,o);break}}}}function gS(e,t,n){if(!e.decodingInfos.some(function(a){return!(!a.supported||t&&(a=a.keySystemAccess)&&(n[a.keySystem]||a.keySystem)!=t)}))return!1;var i=he(),r=i.Ob()==="Xbox";i=i.Oa()==="MOBILE"&&i.Ha()==="GECKO";var o=e.video,s=o&&o.width||0,u=o&&o.height||0;return r&&o&&(s>1920||u>1080)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3."))||(r=o&&o.dependencyStream)&&!Lp(r)?!1:(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function og(e,t){var n,i,r,o,s,u,a;return C(function(l){if(l.g==1){for(n=function(c,f){if(c){var h=Bi(c);return h.supported=c.supported&&f.supported,h.powerEfficient=c.powerEfficient&&f.powerEfficient,h.smooth=c.smooth&&f.smooth,f.keySystemAccess&&!h.keySystemAccess&&(h.keySystemAccess=f.keySystemAccess),h}return f},i=null,r=[],o=g(t),s=o.next(),u={};!s.done;u={cache:void 0,Qe:void 0},s=o.next())a=s.value,u.Qe=Lu(a),u.cache=qu,u.cache.has(u.Qe)?i=n(i,u.cache.get(u.Qe)):r.push(mS(a).then((function(c){return function(f){var h=null;f=g(f||[]);for(var p=f.next();!p.done;p=f.next())h=n(h,p.value);h&&(c.cache.set(c.Qe,h),i=n(i,h))}})(u)));return T(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),G(l)})}function mS(e){var t=[""];e.video&&(t=Kt(e.video.contentType).split(","));var n=[""];e.audio&&(n=Kt(e.audio.contentType).split(","));var i=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o=g(n),s=o.next(),u={};!s.done;u={Qc:void 0},s=o.next())s=s.value,u.Qc=On(e),e.video&&(u.Qc.video.contentType=Ze(Qt(u.Qc.video.contentType),r)),e.audio&&(u.Qc.audio.contentType=Ze(Qt(u.Qc.audio.contentType),s)),i.push(new Promise((function(a){return function(l,c){(he().Oa()=="MOBILE"?Hu(5,navigator.mediaCapabilities.decodingInfo(a.Qc)):navigator.mediaCapabilities.decodingInfo(a.Qc)).then(function(f){l(f)}).catch(c)}})(u)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Vc(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R;return C(function(E){switch(E.g){case 1:if(e.some(function(w){return w.decodingInfos.length}))return E.return();r=g(i),o=r.next(),s={};case 2:if(o.done){E.A(4);break}s.Gi=o.value,u=!1,a=g(e),l=a.next();case 5:if(l.done){E.A(7);break}c=l.value,f=sg(c,t,n).filter((function(w){return function(k){return k=k[0],(k.keySystemConfiguration&&k.keySystemConfiguration.keySystem)===w.Gi}})(s)),h=g(f),p=h.next();case 8:if(p.done){E.A(10);break}return m=p.value,T(E,og(c,m),9);case 9:p=h.next(),E.A(8);break;case 10:c.decodingInfos.some(function(w){return w.supported})&&(u=!0),l=a.next(),E.A(5);break;case 7:if(u)return E.return();s={Gi:void 0},o=r.next(),E.A(2);break;case 4:v=g(e),y=v.next();case 12:if(y.done){E.A(0);break}S=y.value,x=sg(S,t,n).filter(function(w){return w=w[0],w=w.keySystemConfiguration&&w.keySystemConfiguration.keySystem,!w||!i.includes(w)}),A=g(x),I=A.next();case 15:if(I.done){y=v.next(),E.A(12);break}return R=I.value,T(E,og(S,R),16);case 16:I=A.next(),E.A(15)}})}function sg(e,t,n){var i=e.audio,r=e.video,o=[],s=[];if(r)for(var u=g(r.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var l=Kt(a);if(l.includes(",")&&!i){var c=l.split(","),f=Qt(a);l=Vr("video",c),c=Vr("audio",c),c=fs(c,f),f=Bc(f,c,"audio"),s.push({contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=ug(l),a={contentType:Bc(Qt(a),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||30},r.hdr)switch(r.hdr){case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}r.colorGamut&&(a.colorGamut=r.colorGamut),o.push(a)}if(i)for(u=g(i.fullMimeTypes),a=u.next();!a.done;a=u.next())l=a.value,a=Qt(l),l=fs(Kt(l),a),a=Bc(a,l,"audio"),s.push({contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=g(o),a=o.next();!a.done;a=o.next())for(a=a.value,l=g(s),f=l.next();!f.done;f=l.next())f=f.value,c={type:n?"file":"media-source"},a&&(c.video=a),f&&(c.audio=f),u.push(c);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];for(e=[],n=new Map,s=g(s),o=s.next();!o.done;o=s.next())o=o.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=g(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,f=n.get(a),l=new Map,f=g(f),c=f.next();!c.done;c=f.next()){c=c.value;var h=c.videoRobustness+","+c.audioRobustness;l.get(h)||l.set(h,[]),l.get(h).push(c)}for(l=g(l.values()),f=l.next();!f.done;f=l.next()){f=f.value,c=[],h=g(u);for(var p=h.next();!p.done;p=h.next()){p=Object.assign({},p.value);for(var m={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},v=g(f),y=v.next();!y.done;y=v.next()){if(y=y.value,y.initData&&y.initData.length){for(var S=new Set,x=g(y.initData),A=x.next();!A.done;A=x.next())S.add(A.value.initDataType);m.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(m.distinctiveIdentifier="required"),y.persistentStateRequired&&(m.persistentState="required"),y.sessionType&&(m.sessionTypes=[y.sessionType]),i&&(m.audio?(y.encryptionScheme&&(m.audio.encryptionScheme=m.audio.encryptionScheme||y.encryptionScheme),m.audio.robustness=m.audio.robustness||y.audioRobustness):(m.audio={robustness:y.audioRobustness},y.encryptionScheme&&(m.audio.encryptionScheme=y.encryptionScheme)),m.audio.robustness==""&&delete m.audio.robustness),r&&(m.video?(y.encryptionScheme&&(m.video.encryptionScheme=m.video.encryptionScheme||y.encryptionScheme),m.video.robustness=m.video.robustness||y.videoRobustness):(m.video={robustness:y.videoRobustness},y.encryptionScheme&&(m.video.encryptionScheme=y.encryptionScheme)),m.video.robustness==""&&delete m.video.robustness)}p.keySystemConfiguration=m,c.push(p)}e.push(c)}}return e}function fs(e,t){var n=he();return e.toLowerCase()=="flac"?n.Ha()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ha()!="WEBKIT"?"opus":os(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.qe()?"ec-3":e}function ug(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function vS(e){e.textStreams=e.textStreams.filter(function(t){return t=Ze(t.mimeType,t.codecs),us(t)})}function yS(e){var t,n,i,r,o,s,u;return C(function(a){switch(a.g){case 1:t=[],n=g(e.imageStreams),i=n.next();case 2:if(i.done){a.A(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),Ju.has(o)){a.A(5);break}if(s=wS.get(o),!s){Ju.set(o,!1),a.A(5);break}return T(a,TS(s),7);case 7:u=a.h,Ju.set(o,u);case 5:Ju.get(o)&&t.push(r),i=n.next(),a.A(2);break;case 4:e.imageStreams=t,G(a)}})}function TS(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function xr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=t?t.groupId:null,a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var f=g(t.roles),h=f.next();!h.done;h=f.next())c.add(h.value);if(n)for(f=g(n.roles),h=f.next();!h.done;h=f.next())c.add(h.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec,e.pixelAspectRatio=i.pixelAspectRatio||e.pixelAspectRatio,e.videoBandwidth&&i.bandwidth&&(e.videoBandwidth+=i.bandwidth)),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,r=s.split(",");try{e.videoCodec=Vr("video",r),e.audioCodec=Vr("audio",r)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,r=t.dependencyStream)&&(e.audioCodec=r.codecs||e.audioCodec,e.audioBandwidth&&r.bandwidth&&(e.audioBandwidth+=r.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Sr(e){return{id:e.id,active:!1,type:pe,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Hc(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Xn(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function Wu(e){return e.__shaka_id||(e.__shaka_id=SS++),e.__shaka_id}function ag(e){var t={id:Wu(e),active:e.mode!="disabled",type:pe,bandwidth:0,language:ke(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function zu(e,t){var n=e?e.language:null;if(n={id:Wu(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:ke(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ds(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Yu(e){return e.filter(function(t){return ds(t)})}function Jr(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=Ku(ke(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return ke(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=lg(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(lS,[]),e.length?lg(r,e[0]):r}function lg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function xS(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function cg(e,t){t.length&&(t=t.filter(function(n){return ct(e.codecs)==ct(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function fg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function dg(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=ke(n.preferredTextLanguage);return t=ke(t.language),n.autoShowText==2?qr(t,i):n.autoShowText==3?e?(e=ke(e.language),qr(t,i)&&!qr(e,t)):!1:(xe("Invalid autoShowText setting!"),!1)}function hg(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?Qt(n):"",codecs:n?Kt(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};i.fullMimeTypes.add(Ze(i.mimeType,i.codecs)),n.startsWith("audio/")?(i.type="audio",t.audio=i):t.video=i}return t}K("shaka.util.StreamUtils",ng),ng.meetsRestrictions=Xu;var qu=new Map,SS=0,Ju=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),wS=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function qe(){var e=this;this.H=null,this.G=!1,this.u=new Yo,this.j=new Me,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){e.g.useNetworkInformation&&navigator.onLine&&(e.u=new Yo,e.g&&e.u.configure(e.g.advanced),e.trySuggestStreams())}),this.l=[],this.I=1,this.J=!1,this.h=this.o=this.g=this.B=null,this.m=new ge(function(){if(e.G&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.C=b,"documentPictureInPicture"in b&&this.j.D(b.documentPictureInPicture,"enter",function(){e.C=b.documentPictureInPicture.window,e.m&&e.m.Kb(),e.j.za(e.C,"pagehide",function(){e.C=b,e.m&&e.m.Kb()})}),this.F=this.i=null}d=qe.prototype,d.stop=function(){this.H=null,this.G=!1,this.l=[],this.I=1,this.o=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.m&&this.m.stop(),this.F=this.i=null},d.release=function(){this.stop(),this.j.release(),this.m=null},d.init=function(e){this.H=e},d.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,t=this.C.screen.height*n,n*=this.C.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,r=this.o.clientHeight,o=this.o.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.o&&(r=this.i.height,o=this.i.width),t=Math.min(t,r*i),n=Math.min(n,o*i)}if(r=this.l.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),r.length||(r=this.l),i=r,e&&r.length!=this.l.length&&(i=this.l.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=Gc(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=AS(e),e=g(e),r=e.next();!r.done;r=e.next())if(r=r.value,r.height>=t&&r.width>=n){t=r.height,n=r.width;break}e=Gc(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=Gc(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){r=e[i];var s=isNaN(this.I)?1:Math.abs(this.I);o=s*r.bandwidth/this.g.bandwidthDowngradeTarget;for(var u={bandwidth:1/0},a=i+1;a<e.length;a++)if(r.bandwidth!=e[a].bandwidth){u=e[a];break}s=s*u.bandwidth/this.g.bandwidthUpgradeTarget,n&&r&&t>=o&&t<=s&&(n.bandwidth!=r.bandwidth||n.bandwidth==r.bandwidth&&n.video&&r.video&&(n.video.width<r.video.width||n.video.height<r.video.height))&&(n=r)}return this.B=Date.now(),n},d.enable=function(){this.G=!0,this.l.length&&this.trySuggestStreams()},d.disable=function(){this.G=!1},d.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&i.packetNumber===1&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r>=this.g.cacheLoadThreshold&&this.u.sample(r,t),n&&this.B!=null&&this.G&&pg(this)},d.trySuggestStreams=function(){this.G&&(this.B=Date.now(),pg(this,!0))},d.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.F?this.F.getBandwidthEstimate(e):e)},d.setVariants=function(e){return ar(e,this.l)?!1:(this.l=e,!0)},d.playbackRateChanged=function(e){this.I=e},d.setMediaElement=function(e){function t(){n.m.ia(ES)}var n=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in b&&(this.h=new ResizeObserver(t),this.h.observe(this.o)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ma(n.i,"resize",t),n.i=null})},d.setCmsdManager=function(e){this.F=e},d.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)};function pg(e,t){if(t===void 0||!t){if(!e.J){if(t=e.u,!(t.g>=t.i))return;e.J=!0,e.B-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.B<e.g.switchInterval*1e3)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Gc(e,t,n,i,r){if(e.F){var o=e.F.ei();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return Xu(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function AS(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&(n=n.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}K("shaka.abr.SimpleAbrManager",qe),qe.prototype.configure=qe.prototype.configure,qe.prototype.setCmsdManager=qe.prototype.setCmsdManager,qe.prototype.setMediaElement=qe.prototype.setMediaElement,qe.prototype.playbackRateChanged=qe.prototype.playbackRateChanged,qe.prototype.setVariants=qe.prototype.setVariants,qe.prototype.getBandwidthEstimate=qe.prototype.getBandwidthEstimate,qe.prototype.trySuggestStreams=qe.prototype.trySuggestStreams,qe.prototype.segmentDownloaded=qe.prototype.segmentDownloaded,qe.prototype.disable=qe.prototype.disable,qe.prototype.enable=qe.prototype.enable,qe.prototype.chooseVariant=qe.prototype.chooseVariant,qe.prototype.init=qe.prototype.init,qe.prototype.release=qe.prototype.release,qe.prototype.stop=qe.prototype.stop;var ES=1;function gg(e,t){if(e===t||!e.length||!t.length)return!0;e=g(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Qu(n))return!0;for(var i=g(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||Qu(r))return!0}return!1}function mg(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=g((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(V(i.keyIds),V(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}else Qu(i)?n.push(i):Qu(o)&&n.push(o)}return n}function Kc(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function $u(e){return e?!!e.match(/^com\.apple\.fps/):!1}function Qu(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}var Zu=new We(function(){return yn(new Uint8Array([0]))}),$r=new Map;function vg(e,t){var n=_n();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function yg(e){var t,n;return C(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new M(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(Math.random()*2-1)*e.o),T(i,new Promise(function(r){new ge(r).ia(n/1e3)}),2))}e.h*=e.m,G(i)})}function _n(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function je(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}je.prototype.resolve=function(){},je.prototype.reject=function(){};function et(e,t){this.promise=e,this.i=t,this.g=null}function Gi(e){return new et(Promise.reject(e),function(){return Promise.resolve()})}function Xc(){var e=Promise.reject(new M(2,7,7001));return e.catch(function(){}),new et(e,function(){return Promise.resolve()})}function Qr(e){return new et(Promise.resolve(e),function(){return Promise.resolve()})}function Tg(e){return new et(e,function(){return e.catch(function(){})})}et.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function xg(e){return new et(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}et.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},et.prototype.Xa=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=IS(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new je;o.catch(function(){});var s=new M(2,7,7001);return this.promise.then(n(!0),n(!1)),new et(o,function(){return i()})};function IS(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}Ni.Object.defineProperties(et.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),K("shaka.util.AbortableOperation",et),et.prototype.chain=et.prototype.Xa,et.prototype.finally=et.prototype.finally,et.all=xg,et.prototype.abort=et.prototype.abort,et.notAbortable=Tg,et.completed=Qr,et.aborted=Xc,et.failed=Gi;function Y(e,t){if(t)if(t instanceof Map)for(var n=g(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=b.performance&&b.performance.now?b.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Sg(e){var t=new Y(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Y.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Y.prototype.stopImmediatePropagation=function(){this.g=!0},Y.prototype.stopPropagation=function(){},K("shaka.util.FakeEvent",Y);var ea={ql:"abrstatuschanged",rl:"adaptation",ul:"audiotrackchanged",vl:"audiotrackschanged",wl:"boundarycrossed",xl:"buffering",yl:"canupdatestarttime",zl:"complete",Al:"currentitemchanged",Bl:"downloadcompleted",Cl:"downloadfailed",Dl:"downloadheadersreceived",El:"drmsessionupdate",Fl:"emsg",Ll:"itemsinserted",Ml:"itemsremoved",am:"prft",Error:"error",Gl:"expirationupdated",Hl:"firstquartile",Il:"gapjumped",Nl:"keystatuschanged",Ql:"loaded",Rl:"loading",Tl:"manifestparsed",Ul:"manifestupdated",Vl:"mediaqualitychanged",Wl:"mediasourcerecovered",Xl:"metadataadded",Metadata:"metadata",Yl:"midpoint",Zl:"nospatialvideoinfo",$l:"onstatechange",bm:"ratechange",gm:"segmentappended",hm:"sessiondata",im:"spatialvideoinfo",jm:"stalldetected",lm:"started",nm:"statechanged",om:"streaming",pm:"textchanged",qm:"texttrackvisibility",rm:"thirdquartile",sm:"timelineregionadded",tm:"timelineregionenter",um:"timelineregionexit",vm:"trackschanged",xm:"unloading",zm:"variantchanged"};function Ne(){this.ab=new Eu,this.He=this}Ne.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Ne.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Ne.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),t=g(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.He,e.currentTarget=this.He;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Ne.prototype.release=function(){this.ab=null};function Zr(){this.g=[]}function wr(e,t){e.g.push(t.finally(function(){Nn(e.g,t)}))}Zr.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Ke(e,t,n,i,r,o,s){Ne.call(this),this.i=null,this.j=!1,this.u=new Zr,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=i||null,this.F=r||null,this.H=o||null,this.G=s||null,this.l=new Map}Qe(Ke,Ne),d=Ke.prototype,d.configure=function(e){this.i=e};function mi(e,t,n,i){i=i===void 0?!1:i,n=n||Cg;var r=na.get(e);(!r||n>=r.priority)&&na.set(e,{priority:n,Af:t,Ek:i})}function wg(e,t){for(var n=g(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=g(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}d.Hk=function(e){this.g.add(e)},d.fl=function(e){this.g.delete(e)},d.rj=function(){this.g.clear()},d.Ik=function(e){this.h.add(e)},d.hl=function(e){this.h.delete(e)},d.sj=function(){this.h.clear()},d.Th=function(){this.l.clear()};function ot(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}d.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Ne.prototype.release.call(this),this.u.destroy()},d.request=function(e,t,n){var i=this,r=new Ig;if(this.j){var o=Promise.reject(new M(2,7,7001));return o.catch(function(){}),new ta(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?On(t.retryParameters):_n(),t.uris=On(t.uris),o=CS(this,e,t,n);var s=o.Xa(function(){return Ag(i,e,t,n,new vg(t.retryParameters,!1),0,null,r)}),u=s.Xa(function(h){return MS(i,e,h,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var f=u.Xa(function(h){var p=Date.now()-c,m=h.response;return m.timeMs+=l,m.timeMs+=p,h.fk||!i.o||m.fromCache||t.method=="HEAD"||e!=Sn||i.o(m.timeMs,m.data.byteLength,Eg(n),t,n),i.G&&i.G(e,m,n),m},function(h){throw h&&(h.severity=2),h});return o=new ta(f.promise,function(){return f.abort()},r),wr(this.u,o),o};function CS(e,t,n,i){function r(u){o=o.Xa(function(){return n.body&&(n.body=yn(n.body)),u(t,n,i)})}var o=Qr(void 0);e.F&&r(e.F),e=g(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Xa(void 0,function(u){throw u instanceof M&&u.code==7001?u:new M(2,1,1006,u)})}function Ag(e,t,n,i,r,o,s,u){e.i.forceHTTP&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[o]=n.uris[o].replace("http://","https://")),o>0&&e.H&&e.H(t,i,n.uris[o],n.uris[o-1]);var a=new nt(n.uris[o]),l=a.ec,c=!1;l||(l=location.protocol,l=l.slice(0,-1),Iu(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var f=(l=na.get(l))?l.Af:null;if(!f)return Gi(new M(2,1,1e3,a));var h=l.Ek;(a=e.l.get(a.Eb))&&(n.headers["common-access-token"]=a);var p=null,m=null,v=!1,y=!1,S;return Tg(yg(r)).Xa(function(){if(e.j)return Xc();S=Date.now();var x=0;n.requestStartTime=Date.now();var A=f(n.uris[o],n,t,function(E,w,k){p&&p.stop(),m&&m.ia(R/1e3),e.o&&t==Sn&&(x++,n.packetNumber=x,e.o(E,w,Eg(i),n,i),c=!0,u.g=k)},function(E){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(E,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!h)return A;var I=n.retryParameters.connectionTimeout;I&&(p=new ge(function(){v=!0,A.abort()}),p.ia(I/1e3));var R=n.retryParameters.stallTimeout;return R&&(m=new ge(function(){v=!0,A.abort()})),A}).Xa(function(x){p&&p.stop(),m&&m.stop(),x.timeMs==null&&(x.timeMs=Date.now()-S);var A=x.headers["common-access-token"];if(A){var I=new nt(x.uri);e.l.set(I.Eb,A)}return A={response:x,fk:c},!y&&e.m&&e.m(x.headers,n,t),e.B&&e.B(n,x),A},function(x){if(p&&p.stop(),m&&m.stop(),e.C){var A=null,I=0;x instanceof M&&(A=x,x.code==1001&&(I=x.data[1])),e.C(n,A,I,v)}if(e.j)return Xc();if(v&&(x=new M(1,1,1003,n.uris[o],t)),x instanceof M){if(x.code==7001)throw x;if(x.code==1010)throw s;if(x.severity==1){if(A=new Map().set("error",x),A=new Y("retry",A),A.cancelable=!0,e.dispatchEvent(A),A.defaultPrevented)throw x;return o=(o+1)%n.uris.length,Ag(e,t,n,i,r,o,x,u)}}throw x})}function MS(e,t,n,i){var r=Qr(void 0);e=g(e.h);for(var o=e.next(),s={};!o.done;s={Mi:void 0},o=e.next())s.Mi=o.value,r=r.Xa((function(u){return function(){var a=n.response;return a.data&&(a.data=yn(a.data)),(0,u.Mi)(t,a,i)}})(s));return r.Xa(function(){return n},function(u){var a=2;if(u instanceof M){if(u.code==7001)throw u;a=u.severity}throw new M(a,1,1007,u)})}function Eg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}K("shaka.net.NetworkingEngine",Ke),Ke.prototype.request=Ke.prototype.request,Ke.prototype.destroy=Ke.prototype.destroy,Ke.makeRequest=ot,Ke.defaultRetryParameters=function(){return _n()},Ke.prototype.clearCommonAccessTokenMap=Ke.prototype.Th,Ke.prototype.clearAllResponseFilters=Ke.prototype.sj,Ke.prototype.unregisterResponseFilter=Ke.prototype.hl,Ke.prototype.registerResponseFilter=Ke.prototype.Ik,Ke.prototype.clearAllRequestFilters=Ke.prototype.rj,Ke.prototype.unregisterRequestFilter=Ke.prototype.fl,Ke.prototype.registerRequestFilter=Ke.prototype.Hk,Ke.unregisterScheme=function(e){na.delete(e)},Ke.registerScheme=mi,Ke.prototype.configure=Ke.prototype.configure;function Ig(){this.g=0}Ke.NumBytesRemainingClass=Ig;function ta(e,t,n){et.call(this,e,t),this.h=n}Qe(ta,et),Ke.PendingRequest=ta;var Sn=1;Ke.RequestType={MANIFEST:0,SEGMENT:Sn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},Ke.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Cg=3;Ke.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Cg};var na=new Map;function eo(e){this.g=!1,this.h=new je,this.i=e}eo.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function be(e,t){if(e.g)throw t instanceof M&&t.code==7003?t:new M(2,7,7003,t)}function Wc(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function kS(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function to(e){for(var t=new Map,n=g(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function zc(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function He(e,t){this.h=Ht(e),this.i=t==Mg,this.g=0}d=He.prototype,d.Ia=function(){return this.g<this.h.byteLength},d.Pa=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw vi()}},d.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw vi()}},d.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw vi()}},d.bh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw vi()}},d.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw vi()}if(t>2097151)throw new M(2,3,3001);return this.g+=8,t*4294967296+e},d.Ub=function(e,t){if(this.g+e>this.h.byteLength)throw vi();var n=se(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},d.skip=function(e){if(this.g+e>this.h.byteLength)throw vi();this.g+=e},d.Ni=function(e){if(this.g<e)throw vi();this.g-=e},d.seek=function(e){if(e<0||e>this.h.byteLength)throw vi();this.g=e},d.Yc=function(){for(var e=this.g;this.Ia()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=se(this.h,e,this.g-e),this.g+=1,ze(e)};function vi(){return new M(2,3,3e3)}K("shaka.util.DataViewReader",He),He.prototype.readTerminatedString=He.prototype.Yc,He.prototype.seek=He.prototype.seek,He.prototype.rewind=He.prototype.Ni,He.prototype.skip=He.prototype.skip,He.prototype.readBytes=He.prototype.Ub,He.prototype.readUint64=He.prototype.Dd,He.prototype.readInt32=He.prototype.bh,He.prototype.readUint32=He.prototype.U,He.prototype.readUint16=He.prototype.Ca,He.prototype.readUint8=He.prototype.Y,He.prototype.getLength=He.prototype.getLength,He.prototype.getPosition=He.prototype.Pa,He.prototype.hasMoreData=He.prototype.Ia;var Mg=1;He.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Mg};function Oe(){this.i=new Map,this.h=new Map,this.g=!1}d=Oe.prototype,d.box=function(e,t){return e=kg(e),this.i.set(e,DS),this.h.set(e,t),this},d.S=function(e,t){return e=kg(e),this.i.set(e,Dg),this.h.set(e,t),this},d.stop=function(){this.g=!0},d.parse=function(e,t,n){for(e=new He(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},d.zd=function(e,t,n,i){var r=t.Pa();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.U(),s=t.U(),u=ra(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.Pa()+8>t.getLength()){this.g=!0;return}o=t.Dd(),a=!0}var l=this.h.get(s);if(l){var c=null,f=null;if(this.i.get(s)==Dg){if(i&&t.Pa()+4>t.getLength()){this.g=!0;return}f=t.U(),c=f>>>24,f&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(s-=t.Pa(),t=s>0?t.Ub(s,!1):new Uint8Array(0),t=new He(t,0),l({name:u,parser:this,partialOkay:n||!1,stopOnPartial:i||!1,version:c,flags:f,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.Pa(),t.getLength()-t.Pa()))}};function fe(e){for(var t=Ki(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function yi(e){for(var t=Ki(e),n=e.reader.U(),i=0;i<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);i++);}function Zt(e){var t=Ki(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ia(e){var t=Ki(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function no(e,t){return function(n){e(n.reader.Ub(n.reader.getLength()-n.reader.Pa(),t))}}function kg(e){var t=0;e=g(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ra(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Ki(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}K("shaka.util.Mp4Parser",Oe),Oe.headerSize=Ki,Oe.typeToString=ra,Oe.allData=no,Oe.audioSampleEntry=ia,Oe.visualSampleEntry=Zt,Oe.sampleDescription=yi,Oe.children=fe,Oe.prototype.parseNext=Oe.prototype.zd,Oe.prototype.parse=Oe.prototype.parse,Oe.prototype.stop=Oe.prototype.stop,Oe.prototype.fullBox=Oe.prototype.S,Oe.prototype.box=Oe.prototype.box;var DS=0,Dg=1;function Yc(e){var t=this;this.g=[],this.h=[],this.data=[],new Oe().box("moov",fe).box("moof",fe).S("pssh",function(n){if(!(n.version>1)){var i=se(n.reader.h,-12,n.size);if(t.data.push(i),i=n.reader.Ub(16,!1),t.g.push(ai(i)),n.version>0){i=n.reader.U();for(var r=0;r<i;r++){var o=n.reader.Ub(16,!1);o=ai(o),t.h.push(o)}}}}).parse(e)}function oa(e,t,n,i){var r=e.length,o=12+t.length+4+r;i>0&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ht(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,i<1?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,i>0)for(u.setUint32(a,n.size),a+=4,t=g(n),n=t.next();!n.done;n=t.next())n=fr(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function sa(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.T=!1,this.J=0,this.g=null,this.o=new Me,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new je,this.h=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.aa=new Map,this.ma=new Map,this.M=new ge(function(){return FS(t)}),this.R=!1,this.N=[],this.$=!1,this.G=new ge(function(){HS(t)}),this.m.catch(function(){}),this.l=new eo(function(){return RS(t)}),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}d=sa.prototype,d.destroy=function(){return this.l.destroy()};function RS(e){return C(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,T(t,ps(e),2);case 2:if(!e.j){t.A(3);break}return ue(t,4),T(t,e.j.setMediaKeys(null),6);case 6:de(t,5);break;case 4:ae(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,G(t)}})}d.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.T&&this.g&&this.G.Ea(this.h.updateExpirationTime)};function LS(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,Lg(e,t,!1)}function Rg(e,t,n,i){i=i===void 0?!0:i,e.C=new Map,n=g(n);for(var r=n.next();!r.done;r=n.next())e.C.set(r.value,{initData:null,initDataType:null});for(n=g(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.C.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=e.C.size>0,Lg(e,t,i)}function PS(e,t,n,i,r,o){var s,u,a,l,c;return C(function(f){return f.g==1?(s=[],o.length&&s.push(o[0].contentType),r.length&&s.push(r[0].contentType),u=function(h){return h=li(t,h,null),h.licenseServerUri=n,h.serverCertificate=i,h.persistentStateRequired=!0,h.sessionType="persistent-license",h},a=hg(s),a.video&&(l=u(o[0].encryptionScheme||""),a.video.drmInfos.push(l)),a.audio&&(c=u(r[0].encryptionScheme||""),a.audio.drmInfos.push(c)),T(f,Vc([a],!0,e.O,[]),2)):(be(e.l),f.return(Og(e,[a])))})}function Lg(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I;return C(function(R){if(R.g==1){for(Vg(e.h.clearKeys,t),i=t.some(function(E){return!!(E.video&&E.video.drmInfos.length||E.audio&&E.audio.drmInfos.length)}),r=to(e.h.servers),o=to(e.h.advanced||{}),!i&&n&&KS(t,r),s=new WeakSet,u=g(t),a=u.next();!a.done;a=u.next())for(l=a.value,c=Fg(l),f=g(c),h=f.next();!h.done;h=f.next())p=h.value,s.has(p)||(s.add(p),WS(p,r,o,e.h.keySystemsMapping));for(m=function(E,w){var k=[];E=g(E);for(var L=E.next();!L.done;L=E.next()){L=L.value;var D=L[w]||o.has(L.keySystem)&&o.get(L.keySystem)[w]||"",P;if((P=D=="")&&(P=(P=L.keySystem)?!!P.match(/^com\.widevine\.alpha/):!1),P&&(w=="audioRobustness"?D=[e.h.defaultAudioRobustnessForWidevine]:w=="videoRobustness"&&(D=[e.h.defaultVideoRobustnessForWidevine])),typeof D=="string")k.push(L);else if(Array.isArray(D))for(D.length===0&&(D=[""]),D=g(D),P=D.next();!P.done;P=D.next()){var N={};k.push(Object.assign({},L,(N[w]=P.value,N)))}}return k},v=new WeakSet,y=g(t),S=y.next();!S.done;S=y.next())x=S.value,x.video&&!v.has(x.video)&&(x.video.drmInfos=m(x.video.drmInfos,"videoRobustness"),x.video.drmInfos=m(x.video.drmInfos,"audioRobustness"),v.add(x.video)),x.audio&&!v.has(x.audio)&&(x.audio.drmInfos=m(x.audio.drmInfos,"videoRobustness"),x.audio.drmInfos=m(x.audio.drmInfos,"audioRobustness"),v.add(x.audio));return T(R,Vc(t,e.R,e.O,e.h.preferredKeySystems),2)}return be(e.l),A=i||r.size>0,A?(I=Og(e,t),R.return(i?I:I.catch(function(){}))):(e.T=!0,R.return(Promise.resolve()))})}function Pg(e){var t;return C(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.I){n.A(2);break}return T(n,e.I,3);case 3:return be(e.l),n.return();case 2:return ue(n,4),e.I=e.j.setMediaKeys(e.B),T(n,e.I,6);case 6:de(n,5);break;case 4:t=ae(n),e.u(new M(2,6,6003,t.message));case 5:be(e.l),G(n)}})}function NS(e,t){return C(function(n){if(n.g==1)return T(n,Pg(e),2);hs(e,t.initDataType,se(t.initData)),G(n)})}d.Vb=function(e){var t=this,n,i;return C(function(r){if(r.g==1)return t.j===e?r.return():t.B?(t.j=e,t.h.delayLicenseRequestUntilPlayed&&t.o.za(t.j,"play",function(){for(var o=g(t.N),s=o.next();!s.done;s=o.next())Jc(t,s.value);t.$=!0,t.N=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return ps(t)}),t.o.D(t.j.remote,"connecting",function(){return ps(t)}),t.o.D(t.j.remote,"disconnect",function(){return ps(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return ps(t)}),t.H=t.g&&t.g.initData.find(function(o){return o.initData.length>0})||null,n=t.g.keySystem,(i=he().Ug(n))||!t.H&&t.g.keySystem==="com.apple.fps"&&!t.C.size?r.A(2):T(r,Pg(t),2)):(t.o.za(e,"encrypted",function(){t.u(new M(2,6,6010))}),r.return());Ng(t).catch(function(){}),!i&&(t.H||t.C.size||t.h.parseInbandPsshEnabled)||t.o.D(t.j,"encrypted",function(o){return NS(t,o)}),G(r)})};function jS(e){var t,n,i,r,o;return C(function(s){switch(s.g){case 1:if(!e.B||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.A(2);break}return t=ot([e.g.serverCertificateUri],e.h.retryParameters),ue(s,3),n=e.F.vc.request(5,t,{isPreload:e.V()}),T(s,n.promise,5);case 5:i=s.h,e.g.serverCertificate=se(i.data),de(s,4);break;case 3:throw r=ae(s),new M(2,6,6017,r);case 4:if(e.l.g)return s.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?s.return():(ue(s,6),T(s,e.B.setServerCertificate(e.g.serverCertificate),8));case 8:de(s,0);break;case 6:throw o=ae(s),new M(2,6,6004,o.message)}})}function OS(e,t){var n,i,r;return C(function(o){if(o.g==1)return T(o,_g(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.Lb=new je,i.push(r.Lb)),i.push(n.remove()),T(o,Promise.all(i),3)):o.return();e.i.delete(n),G(o)})}function Ng(e){var t,n,i,r,o;return C(function(s){if(s.g==1)return e.C.size?(e.C.forEach(function(u,a){_g(e,a,u)}),T(s,e.m,3)):s.A(2);if(s.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),t.size>0&&GS(e))return s.return(e.m);e.K=!1,e.m=new je,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=g(n),r=i.next();!r.done;r=i.next())o=r.value,hs(e,o.initDataType,o.initData);return gs(e)&&e.m.resolve(),s.return(e.m)})}function hs(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var i=e.i.values();i=g(i);for(var r=i.next();!r.done;r=i.next())if(si(n,r.value.initData))return;var o=!1;if(e.C.forEach(function(s){!o&&si(n,s.initData)&&(o=!0)}),o)return}e.K=!0,e.i.size>0&&gs(e)&&(e.m.resolve(),e.K=!1,e.m=new je,e.m.catch(function(){})),BS(e,t,n,e.g.sessionType)}}function jg(e){return e=e.i.keys(),e=Wc(e,function(t){return t.sessionId}),Array.from(e)}d.Jg=function(){var e=this,t=this.i.keys();return t=Wc(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},d.Xd=function(){var e=1/0,t=this.i.keys();t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function US(e){return e.J?e.J:NaN}d.Ye=function(){return zc(this.ma)};function Og(e,t){var n,i,r,o,s,u,a;return C(function(l){switch(l.g){case 1:if(n=new Map,i=_S(e,t,n),!i)throw navigator.requestMediaKeySystemAccess?new M(2,6,6001):new M(2,6,6020);be(e.l),ue(l,2),i.getConfiguration();var c=r=e.h.keySystemsMapping[i.keySystem]||i.keySystem,f=n.get(r),h=[],p=[],m=[],v=[],y=[],S=new Set,x=new Set;XS(f,h,p,v,m,y,S,x);var A=e.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:h[0],licenseServerUri:p[0],distinctiveIdentifierRequired:f[0].distinctiveIdentifierRequired,persistentStateRequired:f[0].persistentStateRequired,sessionType:f[0].sessionType||A,audioRobustness:f[0].audioRobustness||"",videoRobustness:f[0].videoRobustness||"",serverCertificate:v[0],serverCertificateUri:m[0],initData:y,keyIds:S},x.size>0&&(c.keySystemUris=x),f=g(f),x=f.next();!x.done;x=f.next())x=x.value,x.distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(c.persistentStateRequired=x.persistentStateRequired);if(e.g=c,!e.g.licenseServerUri)throw new M(2,6,6012,e.g.keySystem);return T(l,i.createMediaKeys(),4);case 4:if(o=l.h,be(e.l),e.B=o,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.B)){l.A(5);break}return ue(l,6),T(l,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(s=l.h,s!="usable")throw new M(2,6,6018);be(e.l),de(l,5,2);break;case 6:throw u=ae(l,2),u instanceof M?u:new M(2,6,6019,u.message);case 5:return e.T=!0,e.G.Ea(e.h.updateExpirationTime),T(l,jS(e),9);case 9:be(e.l),de(l,0);break;case 2:throw a=ae(l),be(e.l,a),e.g=null,a instanceof M?a:new M(2,6,6002,a.message)}})}function _S(e,t,n){for(var i=g(t),r=i.next();!r.done;r=i.next()){r=g(Fg(r.value));for(var o=r.next();!o.done;o=r.next())o=o.value,n.has(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o)}if(n.size==1&&n.has(""))throw new M(2,6,6e3);i=e.h.preferredKeySystems,i.length||(r=to(e.h.servers),r.size==1&&(i=Array.from(r.keys()))),r=g(i);var s=r.next();for(o={};!s.done;o={Hi:void 0},s=r.next()){o.Hi=s.value,s=g(t);for(var u=s.next();!u.done;u=s.next())if(u=u.value.decodingInfos.find((function(f){return function(h){return h.supported&&h.keySystemAccess!=null&&h.keySystemAccess.keySystem==f.Hi}})(o)))return u.keySystemAccess}for(r=g([!0,!1]),o=r.next();!o.done;o=r.next())for(o=o.value,s=g(t),u=s.next();!u.done;u=s.next()){u=g(u.value.decodingInfos);for(var a=u.next();!a.done;a=u.next())if(a=a.value,a.supported&&a.keySystemAccess){var l=a.keySystemAccess.keySystem;if(!i.includes(l)){var c=n.get(l);for(!c&&e.h.keySystemsMapping[l]&&(c=n.get(e.h.keySystemsMapping[l])),l=g(c),c=l.next();!c.done;c=l.next())if(!!c.value.licenseServerUri==o)return a.keySystemAccess}}}return null}function qc(e){gs(e)&&e.m.resolve()}function Ug(e,t){new ge(function(){t.loaded=!0,qc(e)}).ia(YS)}function _g(e,t,n){var i,r,o,s,u,a,l;return C(function(c){switch(c.g){case 1:try{i=e.B.createSession("persistent-license")}catch(f){return r=new M(2,6,6005,f.message),e.u(r),c.return(Promise.reject(r))}return e.o.D(i,"message",function(f){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(f):Jc(e,f)}),e.o.D(i,"keystatuseschange",function(f){return Bg(e,f)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Xg:1/0,Lb:null,type:"persistent-license"},e.i.set(i,o),ue(c,2),T(c,i.load(t),4);case 4:return s=c.h,be(e.l),s||(e.i.delete(i),u=e.h.persistentSessionOnlinePlayback?1:2,e.u(new M(u,6,6013)),o.loaded=!0),Ug(e,o),qc(e),c.return(i);case 2:a=ae(c),be(e.l,a),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new M(l,6,6005,a.message)),o.loaded=!0,qc(e);case 3:return c.return(Promise.resolve())}})}function BS(e,t,n,i){try{var r=e.B.createSession(i)}catch(o){e.u(new M(2,6,6005,o.message));return}e.o.D(r,"message",function(o){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(o):Jc(e,o)}),e.o.D(r,"keystatuseschange",function(o){return Bg(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Xg:1/0,Lb:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(o){t=o,o instanceof M||(t=new M(2,6,6016,o)),e.u(t);return}e.h.logLicenseExchange&&ui(n),r.generateRequest(t,n).catch(function(o){if(!e.l.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;u<0&&(u+=4294967296),u="0x"+u.toString(16)}e.u(new M(2,6,6006,o.message,o,u))}})}function bS(e){return C(function(t){return t.g==1?e.K?T(t,e.m,3):t.A(0):T(t,Promise.all(e.X.map(function(n){return n.promise})),0)})}function Jc(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S;C(function(x){switch(x.g){case 1:if(n=t.target,e.h.logLicenseExchange&&ui(t.message),i=e.i.get(n),r=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=ot([r],e.h.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(e.g.keySystem==="org.w3.clearkey"){var A=s,I=e.g;try{var R=Jn(A.body);if(R){var E=JSON.parse(R);E.type||(E.type=I.sessionType,A.body=jn(JSON.stringify(E)))}}catch{}}if(Kc(e.g.keySystem))if(A=Ui(s.body,!0,!0),A.includes("PlayReadyKeyMessage")){for(A=mr(A,"PlayReadyKeyMessage"),I=Kn(A,"HttpHeader"),I=g(I),R=I.next();!R.done;R=I.next())E=R.value,R=Kn(E,"name")[0],E=Kn(E,"value")[0],s.headers[it(R)]=it(E);A=Kn(A,"Challenge")[0],s.body=Tn(it(A))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return a=Date.now(),ue(x,2),c=e.F.vc.request(2,s,{isPreload:e.V()}),e.X.push(c),T(x,c.promise,4);case 4:l=x.h,Nn(e.X,c),de(x,3);break;case 2:return f=ae(x),e.l.g||(h={sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType},p=new M(2,6,6007,f,h),e.i.size==1?(e.u(p),i&&i.Lb&&i.Lb.reject(p)):(i&&i.Lb&&i.Lb.reject(p),e.i.delete(n),gs(e)&&(e.m.resolve(),e.M.ia(.1)))),x.return();case 3:return e.l.g?x.return():(e.J+=(Date.now()-a)/1e3,e.h.logLicenseExchange&&ui(l.data),ue(x,5),T(x,n.update(l.data),7));case 7:de(x,6);break;case 5:return v=(m=ae(x))&&m.message||String(m),y=new M(2,6,6008,v),e.u(y),i&&i.Lb&&i.Lb.reject(y),x.return();case 6:if(e.l.g)return x.return();S=new Y("drmsessionupdate"),e.F.onEvent(S),i&&(i.Lb&&i.Lb.resolve(),Ug(e,i)),G(x)}})}function Bg(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(u=he(),Kc(e.g.keySystem)&&s.byteLength==16&&u.Ef()){u=Ht(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=ai(s).slice(0,32),e.aa.set(s,o)});var r=t.expiration-Date.now();(r<0||i&&r<1e3)&&n&&!n.Lb&&(e.i.delete(t),bg(t)),gs(e)&&(e.m.resolve(),e.M.ia(qS))}function FS(e){var t=e.aa,n=e.ma;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.u(new M(2,6,6014)),e.F.xf(zc(n))}function VS(){var e,t,n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N;return C(function(_){if(_.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(b.MediaKeys&&b.navigator&&b.navigator.requestMediaKeySystemAccess&&b.MediaKeySystemAccess&&b.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=g(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return _.return(t)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],u=["150","2000","3000"],a={"com.widevine.alpha":s,"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":u},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:l,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs"],p=new Map,m=he(),v=function(B,j,O){var F,H,Q,z,Ae,ce,Le,me,le,Be,Ie,Te,ve;return C(function(we){switch(we.g){case 1:return ue(we,2),T(we,j.createMediaKeys(),5);case 5:F=we.h;case 4:de(we,3);break;case 2:return ae(we),we.return();case 3:if(Q=(H=j.getConfiguration().sessionTypes)?H.includes("persistent-license"):!1,m.zi()&&(Q=!1),z=j.getConfiguration().videoCapabilities,Ae=j.getConfiguration().audioCapabilities,ce={persistentState:Q,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},p.get(B)?ce=p.get(B):p.set(B,ce),(Le=z[0].encryptionScheme)&&!ce.encryptionSchemes.includes(Le)&&ce.encryptionSchemes.push(Le),(me=z[0].robustness)&&!ce.videoRobustnessLevels.includes(me)&&ce.videoRobustnessLevels.push(me),(le=Ae[0].robustness)&&!ce.audioRobustnessLevels.includes(le)&&ce.audioRobustnessLevels.push(le),!(O&&"getStatusForPolicy"in F)){we.A(0);break}Be=g(o),Ie=Be.next();case 7:if(Ie.done){we.A(0);break}if(Te=Ie.value,ce.minHdcpVersions.includes(Te)){we.A(8);break}return T(we,F.getStatusForPolicy({minHdcpVersion:Te}),10);case 10:if(ve=we.h,ve=="usable")ce.minHdcpVersions.includes(Te)||ce.minHdcpVersions.push(Te);else{we.A(0);break}case 8:Ie=Be.next(),we.A(7)}})},y=function(B,j,O,F,H){H=H===void 0?!1:H;var Q,z,Ae,ce,Le,me,le,Be,Ie,Te,ve;return C(function(we){switch(we.g){case 1:for(ue(we,2),Q=On(f),z=g(Q.videoCapabilities),Ae=z.next();!Ae.done;Ae=z.next())ce=Ae.value,ce.encryptionScheme=j,ce.robustness=O;for(Le=g(Q.audioCapabilities),me=Le.next();!me.done;me=Le.next())le=me.value,le.encryptionScheme=j,le.robustness=F;return Be=On(Q),Be.persistentState="required",Be.sessionTypes=["persistent-license"],Ie=[Be,Q],ve=he(),ve.Oa()=="MOBILE"?T(we,Hu(5,navigator.requestMediaKeySystemAccess(B,Ie)),7):T(we,navigator.requestMediaKeySystemAccess(B,Ie),6);case 6:Te=we.h,we.A(5);break;case 7:Te=we.h;case 5:return T(we,v(B,Te,H),8);case 8:de(we,0);break;case 2:ae(we),G(we)}})},S=function(B){return!(he().Ha()==="WEBKIT"&&B==="org.w3.clearkey")},x=[],A=g(e),I=A.next();!I.done;I=A.next())if(R=I.value,p.set(R,null),S(R)){for(E=!0,w=g(h),k=w.next();!k.done;k=w.next())L=k.value,x.push(y(R,L,"","",E)),E=!1;for(D=g(a[R]||[]),P=D.next();!P.done;P=D.next())N=P.value,x.push(y(R,null,N,"")),x.push(y(R,null,"",N))}return T(_,Promise.all(x),2)}return _.return(zc(p))})}function bg(e){return C(function(t){if(t.g==1)return ue(t,2),T(t,Hu(zS,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return de(t,0);ae(t),G(t)})}function ps(e){var t;return C(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=g(i);var r=i.next().value,o=i.next().value;return C(function(s){if(s.g==1)return ue(s,2),e.oa||e.C.has(r.sessionId)||o.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?T(s,bg(r),5):T(s,r.remove(),5);if(s.g!=2)return de(s,0);ae(s),G(s)})})),0)})}function Fg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function HS(e){e.i.forEach(function(t,n){var i=t.Xg,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.F.onExpirationUpdated(n.sessionId,r),t.Xg=r)})}function gs(e){return e=e.i.values(),kS(e,function(t){return t.loaded})}function GS(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function KS(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function XS(e,t,n,i,r,o,s,u){var a=[];e=g(e);for(var l=e.next(),c={};!l.done;c={Ka:void 0},l=e.next()){if(c.Ka=l.value,t.includes(c.Ka.encryptionScheme)||t.push(c.Ka.encryptionScheme),c.Ka.keySystem=="org.w3.clearkey"&&c.Ka.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(c.Ka.licenseServerUri)||a.push(c.Ka.licenseServerUri):n.includes(c.Ka.licenseServerUri)||n.push(c.Ka.licenseServerUri),r.includes(c.Ka.serverCertificateUri)||r.push(c.Ka.serverCertificateUri),c.Ka.serverCertificate&&(i.some((function(p){return function(m){return si(m,p.Ka.serverCertificate)}})(c))||i.push(c.Ka.serverCertificate)),c.Ka.initData){l=g(c.Ka.initData);for(var f=l.next(),h={};!f.done;h={Og:void 0},f=l.next())h.Og=f.value,o.some((function(p){return function(m){var v=p.Og;return m.keyId&&m.keyId==v.keyId?!0:m.initDataType==v.initDataType&&si(m.initData,v.initData)}})(h))||o.push(h.Og)}if(c.Ka.keyIds)for(l=g(c.Ka.keyIds),f=l.next();!f.done;f=l.next())s.add(f.value);if(c.Ka.keySystemUris&&u)for(c=g(c.Ka.keySystemUris),l=c.next();!l.done;l=c.next())u.add(l.value)}if(a.length==1)n.push(a[0]);else if(a.length>0){for(t=[],a=g(a),i=a.next();!i.done;i=a.next())i=b.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,V(i.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+b.btoa(a))}}function WS(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),b.cast&&b.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Vg(e,t){if(e=to(e),e.size!=0){e=Mp(e),t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var zS=1,YS=5,qS=.5;function JS(){this.g=io,this.i=new Map().set(io,2).set(Ar,1),this.h=0}function $c(e,t){var n=e.g!==t;return e.g=t,n&&t===io&&(e.h=Date.now()),n}var Ar=0,io=1;function Qc(e,t,n){this.g=e,this.i=t,this.h=n}function Hg(e,t){return C(function(n){if(n.g==1)return T(n,hS(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||ig(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(ds))throw new M(2,4,4032);return n.return(Kg(e,t))})}function Gg(e,t){var n=e.g.restrictions;e=e.i;var i=!1;t=g(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=Xu(r,n,e),o!=r.allowedByApplication&&(i=!0)}return i}function Kg(e,t){var n=Gg(e,t);if(t){var i=e.h?e.h.g:null;if(i&&e.h.B){for(var r=new Set,o=g(t.variants),s=o.next();!s.done;s=o.next())s=s.value,s.audio&&r.add(s.audio),s.video&&r.add(s.video);for(r=g(r),o=r.next();!o.done;o=r.next())Xg(e,i.keySystem,o.value)}Wg(e,t)}return n}function Xg(e,t,n){n=g(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=g(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,hs(e.h,r.initDataType,r.initData)}}function Wg(e,t){function n(l){if(l&&!u.has(l)&&(u.add(l),l.keyIds.size)){l=g(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var f=i[r?"00":c];f?zg.includes(f)&&s.add(f):o.add(c)}}}var i=e.h?e.h.Ye():{};e=Object.keys(i);var r=e.length&&e[0]=="00";e=!1;var o=new Set,s=new Set,u=new WeakSet;t=g(t.variants);for(var a=t.next();!a.done;a=t.next()){if(a=a.value,!a.allowedByApplication)e=!0;else if(a.allowedByKeySystem)return;n(a.audio),n(a.video)}throw e={hasAppRestrictions:e,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new M(2,4,4012,e)}var zg=["output-restricted","internal-error"];K("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Pt(e){if(Zc.has(e))return Zc.get(e);var t=b.ManagedMediaSource||b.MediaSource;return t?(t=t.isTypeSupported(e),Zc.set(e,t),t):!1}function Yg(){var e=b.ManagedMediaSource||b.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Zc=new Map;function ua(e,t){var n=null,i=null,r=null,o=null,s=e.U();return t&1&&(r=e.Dd()),t&2&&(o=e.U()),t&8&&(n=e.U()),t&16&&(i=e.U()),{trackId:s,Ud:n,Vd:i,nj:r,Oi:o}}function aa(e,t){return t==1?(t=e.U(),e=e.U(),{baseMediaDecodeTime:t*4294967296+e}):{baseMediaDecodeTime:e.U()}}function la(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function ca(e,t,n){var i=e.U(),r=[],o=null;n&1&&(o=e.bh()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={mh:null,sampleSize:null,Ff:null};n&256&&(u.mh=e.U()),n&512&&(u.sampleSize=e.U()),n&1024&&e.skip(4),n&2048&&(u.Ff=t==0?e.U():e.bh()),r.push(u)}return{Dm:i,kh:r,pg:o}}function qg(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),e=e.Ca()+e.Ca()/65536,{channelCount:t,sampleRate:e}}function ef(e){return e=e.U(),{codec:ra(e)}}function $S(e){var t=null,n=null,i=e.Ub(4,!1),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Ca(),e.Ca(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xe:n}}function ms(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function en(e){return(e<10?"0":"")+e}function ro(e){this.g=e}function oo(e){for(var t=[],n=g(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=Se;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var c=s.duration*s.timescale,f=Math.floor(c/(Xi+1));switch(c=Math.floor(c%(Xi+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(V(Ye(u,4)),[0,0,0,0],V(Ye(f,4)),V(Ye(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],V(Ye(a,2)),[0,0],V(Ye(l,2)),[0,0])),u=Se("tkhd",u),a=Se,f=s.duration*s.timescale,l=Math.floor(f/(Xi+1)),f=Math.floor(f%(Xi+1)),c=s.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(V(Ye(s.timescale,4)),V(Ye(l,4)),V(Ye(f,4)),V(Ye(c,2)),[0,0])),l=Se("mdhd",l),f=s,c=new Uint8Array([]),f.type){case"video":c=ZS.value();break;case"audio":c=ew.value()}f=Se("hdlr",c);e:{switch(s.type){case"video":s=Se("minf",Se("vmhd",ow.value()),tm.value(),Jg(s));break e;case"audio":s=Se("minf",Se("smhd",sw.value()),tm.value(),Jg(s));break e}s=new Uint8Array([])}s=a("mdia",l,f,s),i=i("trak",u,s),o.call(r,i)}for(t=rt.apply(It,V(t)),o=e.g[0],n=Se,i=o.duration*o.timescale,r=Math.floor(i/(Xi+1)),i=Math.floor(i%(Xi+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(V(Ye(o.timescale,4)),V(Ye(r,4)),V(Ye(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=Se("mvhd",r),i=[],e=g(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(V(Ye(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Se("trex",a),u.call(s,a);if(e=rt.apply(It,V(i)),e=Se("mvex",e),i=[],o.encrypted){for(o=g(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=g(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=rt.apply(It,V(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=aw.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function Jg(e){var t=Se,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=he().qe()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,e.Sa.byteLength>0)var r=Se("avcC",e.Sa);else{r=Se;for(var o=7,s=[],u=[],a=0,l=0,c=0,f=0;f<e.Cb.length;f++){var h=Qg(e.Cb[f]);switch(h[0]&31){case 7:s.push(h),o+=h.length+2;break;case 8:u.push(h),o+=h.length+2}}for(s.length>0&&(a=s[0][1],c=s[0][2],l=s[0][3]),o=new Uint8Array(o),f=0,o[f++]=1,o[f++]=a,o[f++]=c,o[f++]=l,o[f++]=255,o[f++]=224|s.length,a=0;a<s.length;a++)o[f++]=(s[a].length&65280)>>8,o[f++]=s[a].length&255,o.set(s[a],f),f+=s[a].length;for(o[f++]=u.length,s=0;s<u.length;s++)o[f++]=(u[s].length&65280)>>8,o[f++]=u[s].length&255,o.set(u[s],f),f+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(V(Ye(n,2)),V(Ye(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=$g(e),s=new Uint8Array([]),e.encrypted&&(s=Er(e.stream,e.codecs),i="encv"),i=Se(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),e.Sa.byteLength>0&&(n=Se("hvcC",e.Sa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(V(Ye(i,2)),V(Ye(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=$g(e),s=new Uint8Array([]),e.encrypted&&(s=Er(e.stream,e.codecs),r="encv"),i=Se(r,i,n,u,s));break;case"audio":n=="mp3"?e=Se(".mp3",vs(e)):n=="ac-3"?(n=Se("dac3",e.Ga),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Er(e.stream,e.codecs),i="enca"),e=Se(i,vs(e),n,r)):n=="ec-3"?(n=Se("dec3",e.Ga),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Er(e.stream,e.codecs),i="enca"),e=Se(i,vs(e),n,r)):n=="opus"?(n=Se("dOps",e.Ga),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=Er(e.stream,e.codecs),i="enca"),e=Se(i,vs(e),n,r)):(e.Ga.byteLength>0?n=Se("esds",e.Ga):(n=Se,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=Vr("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[s*2]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(V(Ye(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=Er(e.stream,e.codecs),i="enca"),e=Se(i,vs(e),n,r)),i=e}return e=Se("stsd",uw.value(),i),t("stbl",e,Se("stts",tw.value()),Se("stsc",nw.value()),Se("stsz",rw.value()),Se("stco",iw.value()))}function $g(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return e=new Uint8Array([].concat(V(Ye(e.Za,4)),V(Ye(t,4)))),Se("pasp",e)}function vs(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(V(Ye(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Er(e,t){var n=Se;t=new Uint8Array([].concat(V(Ye(Zg(t.split(".")[0]),4)))),t=Se("frma",t);var i="cenc",r=e.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(V(Ye(Zg(i),4)),[0,1,0,0])),i=Se("schm",i),r=Se;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=g(e.drmInfos);for(var s=e.next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=g(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=Qg(u.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=Se("tenc",e,o),n("sinf",t,i,r("schi",o))}function ys(e){var t=[];e=g(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=Se,s=new Uint8Array([0,0,0,0].concat(V(Ye(n.data?n.data.sequenceNumber:0,4))));s=Se("mfhd",s);var u,a=n.data?n.data.zb:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var c=a[u].flags;l[u+4]=c.ib<<4|c.mb<<2|c.jb}a=Se("sdtp",l);var f=a.length+32+20+8+16+8+8;l=Se,u=new Uint8Array([0,0,0,58].concat(V(Ye(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=Se("tfhd",u),c=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(c%(Xi+1));c=new Uint8Array([1,0,0,0].concat(V(Ye(Math.floor(c/(Xi+1)),4)),V(Ye(h,4)))),c=Se("tfdt",c);var p=f;f=n.data?n.data.zb:[],h=f.length;var m=12+16*h,v=new Uint8Array(m);for(p+=8+m,v.set([n.type==="video"?1:0,0,15,1].concat(V(Ye(h,4)),V(Ye(p,4))),0),p=0;p<h;p++){var y=f[p];m=Ye(y.duration,4);var S=Ye(y.size,4),x=y.flags;y=Ye(y.sb,4),v.set([].concat(V(m),V(S),[x.xb<<2|x.ib,x.mb<<6|x.jb<<4|x.yb,x.hb&61440,x.hb&15],V(y)),12+16*p)}f=Se("trun",v),a=l("traf",u,c,f,a),o=o("moof",s,a),r.call(i,t,[o,QS(n)])}return rt.apply(It,V(t))}function QS(e){return e=(e.data?e.data.zb:[]).map(function(t){return t.data}),e=rt.apply(It,V(e)),Se("mdat",e)}function Ye(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function Qg(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[n*2]+e[n*2+1]),16);return t}function Zg(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<(e.length-n-1)*8;return t}function Se(e){var t=gt.apply(1,arguments),n=em.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],em.set(e,n));for(var i=8,r=t.length-1;r>=0;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Xi=4294967295,em=new Map,ZS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),ew=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),tw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),nw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),iw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),rw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),ow=new We(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),sw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),uw=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),aw=new We(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return Se("ftyp",e,n,e,t)}),tm=new We(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=Se("dref",e),Se("dinf",e)});function lw(e){e=se(e);var t=null;return new Oe().box("moov",fe).box("trak",fe).box("mdia",fe).box("minf",fe).box("stbl",fe).S("stsd",yi).box("enca",function(n){return t=n.reader.h,ia(n)}).box("sinf",fe).box("frma",function(n){n.parser.stop(),ef(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function cw(e,t,n){function i(p){f.push({box:p,Bi:1701733217})}function r(p){f.push({box:p,Bi:1701733238})}function o(p){a=!0,p.parser.stop()}function s(p){c.push(p),fe(p)}var u=t=se(t),a=!1,l,c=[],f=[];if(new Oe().box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).S("stsd",function(p){l=p,c.push(p),yi(p)}).S("encv",o).S("enca",o).S("dvav",r).S("dva1",r).S("dvh1",r).S("dvhe",r).S("dvc1",r).S("dvi1",r).S("hev1",r).S("hvc1",r).S("avc1",r).S("avc3",r).S("ac-3",i).S("ec-3",i).S("ac-4",i).S("Opus",i).S("fLaC",i).S("mp4a",i).parse(t),a)return t;if(f.length==0||!l)throw ai(t),new M(2,3,3019,n);f.reverse(),n=g(f);for(var h=n.next();!h.done;h=n.next())h=h.value,u=hw(e,u,l,h.box,c,h.Bi);return he().hh()?(e=new Uint8Array(t.byteLength+u.byteLength),e.set(u),e.set(t,u.byteLength),e):u}function fw(e){e=se(e);var t=[];new Oe().box("mdat",function(s){t.push(s)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],o=t[i];n.push(dw(e.subarray(r?r.start+r.size:0,o.start+o.size)))}return rt.apply(It,V(n))}function dw(e){function t(f){s.push(f),fe(f)}var n,i,r,o,s=[];if(new Oe().box("moof",t).box("traf",t).S("tfhd",function(f){n=f,r=ua(f.reader,f.flags)}).S("trun",function(f){i=f,o=ca(f.reader,f.version,f.flags)}).parse(e),r&&r.Oi!==2){var u=n.start+Ki(n)+4+(r.nj!==null?8:0),a=Ht(e);if(r.Oi!==null)a.setUint32(u,2);else{fa(e,n.start,n.size+4);var l=a.getUint32(n.start+8);a.setUint32(n.start+8,l|2),o&&o.pg!==null&&a.setInt32(i.start+Ki(i)+4,o.pg+4),l=e.subarray(0,u),a=e.subarray(u),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var c=3;c>=0;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),u),e.set(a,u+4),u=g(s),a=u.next();!a.done;a=u.next())a=a.value,fa(e,a.start,a.size+4)}}return e}function hw(e,t,n,i,r,o){var s=Er(e,i.name),u=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+s.byteLength),e.set(u,0),Ht(e).setUint32(4,o),e.set(s,i.size),fa(e,0,e.byteLength),o=new Uint8Array(t.byteLength+e.byteLength),i=he().gf()?i.start:i.start+i.size,s=t.subarray(i),o.set(t.subarray(0,i)),o.set(e,i),o.set(s,i+e.byteLength),t=g(r),r=t.next();!r.done;r=t.next())r=r.value,fa(o,r.start,r.size+e.byteLength);return e=Ht(o,n.start),n=Ki(n),t=e.getUint32(n),e.setUint32(n,t+1),o}function fa(e,t,n){e=Ht(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function pw(e){function t(r){i.push({start:r.start,size:r.size}),fe(r)}var n=se(e),i=[];return new Oe().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var o=Ht(n,r.start),s=0;s<r.size-3;s++){var u=o.getUint32(s);u==1633889587?o.setUint32(s,1700998451):u==1684103987&&o.setUint32(s,1684366131)}}).parse(n),n}function Xt(e,t,n,i,r,o,s,u){this.P=e,this.startByte=t,this.endByte=n,this.xd=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=u===void 0?!1:u}Xt.prototype.Jc=function(){return this.startByte},Xt.prototype.Hc=function(){return this.endByte},Xt.prototype.re=function(e){this.h=e},Xt.prototype.$b=function(){return this.h};function Ts(e,t){return e===t?!0:e&&t?e.Jc()==t.Jc()&&e.Hc()==t.Hc()&&Oi(e.P().sort(),t.P().sort())&&si(e.$b(),t.$b()):e==t}K("shaka.media.InitSegmentReference",Xt),Xt.prototype.getEndByte=Xt.prototype.Hc,Xt.prototype.getStartByte=Xt.prototype.Jc;function Z(e,t,n,i,r,o,s,u,a,l,c,f,h,p,m,v){for(l=l===void 0?[]:l,p=p===void 0?Ti:p,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=i,this.endByte=r,this.ba=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=c===void 0?"":c,this.B=f===void 0?null:f,this.h=h===void 0?null:h,this.status=p,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=m===void 0?null:m,this.thumbnailSprite=null,this.i=-1,this.m=v===void 0?!1:v,this.ge=this.Xc=!1,e=g(this.g),t=e.next();!t.done;t=e.next())t.value.wi();this.m&&this.g.length&&this.g[this.g.length-1].ui(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}d=Z.prototype,d.P=function(){return this.C()},d.getStartTime=function(){return this.startTime},d.Gj=function(){return this.endTime},d.Jc=function(){return this.startByte},d.Hc=function(){return this.endByte};function tf(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=g(e.g),e=e.next();!e.done;e=e.next()){tf(e.value);break}return null}d.$j=function(){return this.tilesLayout},d.Zj=function(){return this.B},d.Kc=function(){return this.status},d.wk=function(){this.status=im},d.Tg=function(){this.preload=!0},d.isPreload=function(){return this.preload},d.wd=function(){this.l=!1},d.kk=function(){return this.l},d.wi=function(){this.Xc=!0},d.nk=function(){return this.Xc},d.ui=function(){this.ge=!0},d.lk=function(){return this.ge},d.ti=function(){this.o=!0},d.gk=function(){return this.o},d.Lf=function(e){this.thumbnailSprite=e},d.Xj=function(){return this.thumbnailSprite},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},d.Ch=function(e){this.h==null?qn("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},d.re=function(e,t){this.u=e,this.F=t===void 0?!1:t},d.$b=function(e){var t=this.u;return(e===void 0||e)&&this.F&&(this.u=null),t};function nm(e,t){e.ba=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())nm(n.value,t)}K("shaka.media.SegmentReference",Z),Z.prototype.getSegmentData=Z.prototype.$b,Z.prototype.setSegmentData=Z.prototype.re,Z.prototype.syncAgainst=Z.prototype.Ch,Z.prototype.offset=Z.prototype.offset,Z.prototype.getThumbnailSprite=Z.prototype.Xj,Z.prototype.setThumbnailSprite=Z.prototype.Lf,Z.prototype.hasByterangeOptimization=Z.prototype.gk,Z.prototype.markAsByterangeOptimization=Z.prototype.ti,Z.prototype.isLastPartial=Z.prototype.lk,Z.prototype.markAsLastPartial=Z.prototype.ui,Z.prototype.isPartial=Z.prototype.nk,Z.prototype.markAsPartial=Z.prototype.wi,Z.prototype.isIndependent=Z.prototype.kk,Z.prototype.markAsNonIndependent=Z.prototype.wd,Z.prototype.isPreload=Z.prototype.isPreload,Z.prototype.markAsPreload=Z.prototype.Tg,Z.prototype.markAsUnavailable=Z.prototype.wk,Z.prototype.getStatus=Z.prototype.Kc,Z.prototype.getTileDuration=Z.prototype.Zj,Z.prototype.getTilesLayout=Z.prototype.$j,Z.prototype.getEndByte=Z.prototype.Hc,Z.prototype.getStartByte=Z.prototype.Jc,Z.prototype.getEndTime=Z.prototype.Gj,Z.prototype.getStartTime=Z.prototype.getStartTime,Z.prototype.getUris=Z.prototype.P;var Ti=0,im=1;Z.Status={ol:Ti,wm:im,Sl:2};function xs(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function rm(e){return!e||xs(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function da(e){return!e||xs(e)?null:e.length?e.end(e.length-1):null}function nf(e,t){return!e||!e.length||xs(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function om(e,t){if(!e||!e.length||xs(e))return 0;var n=0;e=g(xi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function gw(e,t,n){return!e||!e.length||xs(e)?null:(e=xi(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),e>=0?e:null)}function xi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function rf(){}function sm(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function ha(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;i>=0;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function Ss(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ir(){return so||(of||(of=new ge(function(){so=null})),(so=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(so=document.createElement("video")),of.ia(1),so)}function mw(e,t){var n,i,r,o,s;return C(function(u){if(u.g==1)return"fonts"in document&&"FontFace"in b?T(u,document.fonts.ready,2):u.return();if(!("entries"in document.fonts))return u.return();for(n=function(a){a=a.entries();for(var l=[],c=a.next();c.done===!1;)l.push(c.value),c=a.next();return l},i=g(n(document.fonts)),r=i.next();!r.done;r=i.next())if(o=r.value,o.family===e&&o.display==="swap")return u.return();s=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(s),G(u)})}K("shaka.util.Dom",rf),rf.removeAllChildren=Ss,rf.clearSourceFromVideo=ha;var of=null,so=null;function sf(){}function um(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function am(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function uf(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function vw(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=ze(se(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=ze(se(e.data,3+n,o)),u;return i==="-->"?u=ze(se(e.data,4+n+o)):u=yn(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(se(e.data,1,i)),e=ze(se(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(se(e.data,1,i)),e=ze(se(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?e.size<2||(n=e.data.indexOf(0),n===-1)?null:(n=ze(se(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=yn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=ze(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=ze(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=yn(e.data),t):null}function Cr(e){for(var t=0,n=[];um(e,t);){var i=uf(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=uf(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=vw(r))&&n.push(o),t+=r.size+10}am(e,t)&&(t+=10)}return n}function uo(e,t){for(var n=t=t===void 0?0:t,i=0;um(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=uf(e,t+6),am(e,t+10)&&(i+=10),t+=i;return i>0?e.subarray(n,n+i):new Uint8Array([])}K("shaka.util.Id3Utils",sf),sf.getID3Data=uo,sf.getID3Frames=Cr;function lm(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Si(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)i>=2&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=se(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function af(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new He(n,0).U(),e.g=i*8,e.i-=i)}function tn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=n*8,e.g-=n,af(e)}e.h<<=t,e.g-=t}function ye(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&af(e),n=t-n,n>0?i<<n|ye(e,n):i}function lf(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return af(e),t+lf(e)}function At(e){tn(e,1+lf(e))}function W(e){var t=lf(e);return ye(e,t+1)-1}function ao(e){return e=W(e),1&e?1+e>>>1:-1*(e>>>1)}function J(e){return ye(e,1)===1}function De(e){return ye(e,8)}function pa(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=ao(e),i=(n+i+256)%256),n=i===0?n:i}function yw(e){return De(e),W(e),W(e)}K("shaka.util.ExpGolomb",Si);function Fe(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}d=Fe.prototype,d.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},d.Jf=function(e){this.B!=null&&this.B!=e&&(this.o=this.u=null),this.B=e},d.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,ff(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if((e[r+3]&48)>>4>1){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.I=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.I:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,df:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],c=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(c>0)for(var f=u+5,h=c;h>2;){var p=o[f+1]+2;switch(o[f]){case 5:var m=wc(o.subarray(f+2,f+p));s.audio==-1&&m==="Opus"?(s.audio=l,s.audioCodec="opus"):s.video==-1&&m==="AV01"&&(s.video=l,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=l,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(m=null,o[f+2]===128&&(m=o[f+3]),m!=null&&(this.H={channelCount:(m&15)===0?2:m&15,qj:m,sampleRate:48e3}))}f+=p,h-=p}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=l,s.audioCodec="aac-loas");break;case 21:s.df==-1&&(s.df=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}o=s,o.video!=-1&&(this.K=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.F=o.audio,this.C=o.audioCodec),o.df!=-1&&(this.G=o.df),i&&!this.J&&(i=!1,r=t-188),this.J=!0;break;case this.K:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.F:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.G:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function cf(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=fm(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=n.pts!=r?fm(i,e.o):i),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}d.Dk=function(e){return Ee("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Zg(e,{je:null,state:null})},d.Zg=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var o=t.state||0,s=o,u=0,a=[],l=-1,c=0;for(o==-1&&(l=0,c=this.m=="hvc"?e[0]>>1&63:e[0]&31,o=0,u=1);u<i;){var f=e[u++];o?o===1?o=f?0:2:f?f==1?(f=u-o-1,l>=0?a.push({data:e.subarray(l+r,f),fullData:e.subarray(l,f),type:c,time:n,state:null}):(o=a.length?a[a.length-1]:t.je)&&(s&&u<=4-s&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-s),o.fullData=o.fullData.subarray(0,o.fullData.byteLength-s)),f>0&&(f=e.subarray(0,f),o.data=rt(o.data,f),o.fullData=rt(o.fullData,f),o.state=0)),u<i?(c=this.m=="hvc"?e[u]>>1&63:e[u]&31,l=u,o=0):o=-1):o=0:o=3:o=f?0:1}return l>=0&&o>=0&&a.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:c,time:n,state:o}),!a.length&&t.je&&(n=a.length?a[a.length-1]:t.je)&&(n.data=rt(n.data,e),n.fullData=rt(n.fullData,e)),t.state=o,a},d.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())n=rt.apply(It,V(n.value)),(n=cf(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Cr(n.data),dts:n.dts,pts:n.pts});return e},d.ub=function(){if(this.i.length&&!this.h.length)for(var e=g(this.i),t=e.next();!t.done;t=e.next()){var n=rt.apply(It,V(t.value)),i=cf(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&(t=this.h.pop(),t.data=rt(t.data,n),this.h.push(t))}return this.h},d.ud=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=g(this.j),n=t.next();!n.done;n=t.next()){var i=rt.apply(It,V(n.value)),r=cf(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&(n=this.g.pop(),n.data=rt(n.data,i),this.g.push(n))}if(e){for(t={je:null,state:null},n=[],i=g(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.nalus=this.Zg(r,t),r.nalus.length&&(n.push(r),t.je=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},d.getStartTime=function(e){if(e=="audio"){e=null;var t=this.ub();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.ud(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},d.Wd=function(){return{audio:this.C,video:this.m}},d.cf=function(){for(var e=[],t=g(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,V(n.value.nalus));return e},d.dk=function(){Ee("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Mg();return{height:e.height,width:e.width}},d.Mg=function(){return this.m=="hvc"?xw(this):Tw(this)};function cm(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(Math.abs(1/(t-e)*9e4)):null}function Tw(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.cf();if(!n.length||(n=n.find(function(p){return p.type==7}),!n))return t;n=new Si(n.data);var i=De(n),r=De(n),o=De(n);if(At(n),Sw.includes(i)){var s=W(n);if(s===3&&tn(n,1),At(n),At(n),tn(n,1),J(n)){s=s!==3?8:12;for(var u=0;u<s;u++)J(n)&&(u<6?pa(n,16):pa(n,64))}}if(At(n),s=W(n),s===0)W(n);else if(s===1)for(tn(n,1),At(n),At(n),s=W(n),u=0;u<s;u++)At(n);At(n),tn(n,1),s=W(n),u=W(n);var a=ye(n,1);a===0&&tn(n,1),tn(n,1);var l=0,c=0,f=0,h=0;return J(n)&&(l=W(n),c=W(n),f=W(n),h=W(n)),t.height=String((2-a)*(u+1)*16-f*2-h*2),t.width=String((s+1)*16-l*2-c*2),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t.frameRate=cm(e),t}function xw(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.cf();if(!n.length||(n=n.find(function(R){return R.type==33}),!n))return t;var i=new Si(n.fullData,!0);De(i),De(i),ye(i,4);var r=ye(i,3);J(i);var o=ye(i,2),s=ye(i,1),u=ye(i,5),a=ye(i,32);n=De(i);for(var l=De(i),c=De(i),f=De(i),h=De(i),p=De(i),m=De(i),v=[],y=[],S=0;S<r;S++)v.push(J(i)),y.push(J(i));if(r>0)for(S=r;S<8;S++)ye(i,2);for(S=0;S<r;S++)v[S]&&ye(i,88),y[S]&&De(i);W(i),r=W(i),r==3&&ye(i,1),v=W(i),y=W(i);var x=S=0,A=0,I=0;return J(i)&&(S+=W(i),x+=W(i),A+=W(i),I+=W(i)),t.width=String(v-(S+x)*(r===1||r===2?2:1)),t.height=String(y-(A+I)*(r===1?2:1)),i=(function(R){for(var E=0,w=0;w<32;w++)E|=(R>>w&1)<<31-w;return E>>>0})(a),s=s==1?"H":"L",o="hvc1"+("."+["","A","B","C"][o]+u),o+="."+i.toString(16).toUpperCase(),o+="."+s+m,p&&(o+="."+p.toString(16).toUpperCase()),h&&(o+="."+h.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),c&&(o+="."+c.toString(16).toUpperCase()),l&&(o+="."+l.toString(16).toUpperCase()),n&&(o+="."+n.toString(16).toUpperCase()),t.codec=o,t.frameRate=cm(e),t}function fm(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=n*8589934592;return e}function lo(e){return!(ff(e)<0)}function ff(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}K("shaka.util.TsParser",Fe),Fe.syncOffset=ff,Fe.probe=lo,Fe.prototype.getVideoInfo=Fe.prototype.Mg,Fe.prototype.getVideoResolution=Fe.prototype.dk,Fe.prototype.getVideoNalus=Fe.prototype.cf,Fe.prototype.getCodecs=Fe.prototype.Wd,Fe.prototype.getStartTime=Fe.prototype.getStartTime,Fe.prototype.getVideoData=Fe.prototype.ud,Fe.prototype.getAudioData=Fe.prototype.ub,Fe.prototype.getMetadata=Fe.prototype.getMetadata,Fe.prototype.parseNalus=Fe.prototype.Zg,Fe.prototype.parseAvcNalus=Fe.prototype.Dk,Fe.prototype.parse=Fe.prototype.parse,Fe.prototype.setDiscontinuitySequence=Fe.prototype.Jf,Fe.prototype.clearData=Fe.prototype.clearData,Fe.Timescale=9e4;var Sw=[100,110,122,244,44,83,86,118,128,138,139,134];function dm(e,t,n,i,r){var o=this;this.g=e,this.O=n,this.B=i,this.aa=t,this.l=new Map,this.G=new Map,this.Ta=new Map,this.h=null,this.Fa=!1,this.C=r||null,this.o=new Map,this.u=new Me,this.j=new Map,this.K=null,this.M=new je,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.F=this.R=null,this.i=df(this,this.M),this.Ua=this.H=!1,this.I=new eo(function(){return Ew(o)}),this.J=!1,this.X="UNKNOWN",this.eb=this.kb=!1,this.ab=new je,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.T=this.va=this.V=null,this.ma=new je,this.g.remote&&(this.N=this.g.remote.state!="disconnected",this.u.D(this.g.remote,"connect",function(){o.N=o.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"connecting",function(){o.N=o.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"disconnect",function(){o.N=o.g.remote.state!="disconnected"}))}function df(e,t){if(e.ya=!0,b.ManagedMediaSource){e.F||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.u.D(n,"startstreaming",function(){e.ya=!0}),e.u.D(n,"endstreaming",function(){e.ya=!1})}else n=new MediaSource;return e.u.za(n,"sourceopen",function(){URL.revokeObjectURL(e.Da),t.resolve()}),e.u.za(e.g,"playing",function(){e.ob=!0}),e.Da=mf(n),e.B.useSourceElements?(e.g.removeAttribute("src"),e.R&&e.g.removeChild(e.R),e.F&&e.g.removeChild(e.F),e.R=sm(e.Da),e.g.appendChild(e.R),e.F&&e.g.appendChild(e.F),e.g.load()):e.g.src=e.Da,n}function ww(e,t,n){e.g&&b.ManagedMediaSource&&e.i&&e.B.useSourceElements&&(e.F&&e.g.removeChild(e.F),e.F=sm(t,n),e.g.appendChild(e.F),e.g.disableRemotePlayback=!1)}function Aw(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(V(pi)),t={};he(),e=g(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,us(n))t[n]=!0;else if(ni()){var i=Qt(n),r=fs(Kt(n),i);i=Ze(i,r),t[n]=Pt(i)||!!Yr(i)}else t[n]=Ir().canPlayType(n)!="";i=n.split(";")[0],t[i]=t[i]||t[n]}return t}d=dm.prototype,d.destroy=function(){return this.I.destroy()};function Ew(e){var t,n,i,r,o,s,u,a,l,c,f,h,p,m,v;return C(function(y){if(y.g==1){for(t=[],n=g(e.o),i=n.next();!i.done;i=n.next())for(r=i.value,o=g(r),s=o.next().value,u=o.next().value,a=u[0],l=s,e.o.set(l,u.slice(0,1)),a&&t.push(a.p.catch(cS)),c=g(u.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new M(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),T(y,Promise.all(t),2)}for(p=g(e.j.values()),m=p.next();!m.done;m=p.next())v=m.value,v.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.F=null,e.B=null,e.i=null,e.h=null,e.aa=null,e.l.clear(),e.Ta.clear(),e.j.clear(),e.K=null,e.o.clear(),e.C=null,e.$.clear(),e.O=null,G(y)})}d.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l,c;return C(function(f){if(f.g==1)return o=ut,T(f,r.M,2);if(f.g!=3)return!Mr(r)&&!kr(r)?f.A(3):(qn("Expected MediaSource to be open during init(); reopening the media source."),r.M=new je,r.i=df(r,r.M),T(f,r.M,3));for(r.J=t,r.X=n,r.kb=i,r.eb=!r.J&&r.X=="HLS"&&!r.kb,r.$.clear(),r.V=null,r.va=null,r.T=null,r.oa=null,r.ma=new je,s=g(e.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=e.get(a),ga(r,a,l,l.codecs),r.m?(r.o.set(o.ka,[]),r.o.set(o.Aa,[])):r.o.set(a,[]);(c=e.get(o.ka))&&c.isAudioMuxedInVideo&&(r.m=!0),G(f)})};function ga(e,t,n,i){t=="audio"&&i&&(i=fs(i,n.mimeType));var r=Ze(n.mimeType,i);if(t==pe)ma(e,r,e.J,n.external);else{var o=e.B.forceTransmux;(!Pt(r)||!e.J&&pi.includes(r))&&(o=!0);var s=Fu(n.mimeType,i);if(o){if(o=Gt("audio",(i||"").split(",")),i=Gt("video",(i||"").split(",")),o&&i){e.m=!0,ga(e,"audio",n,o),ga(e,"video",n,i);return}(i=Yr(s))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,s))}s=r+e.B.addExtraFeaturesToSourceBuffer(r),be(e.I);try{var u=e.i.addSourceBuffer(s)}catch(a){throw new M(2,3,3015,a,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.J&&(u.mode=_w),e.u.D(u,"error",function(){var a=e.o.get(t)[0];a.p.reject(new M(2,3,3014,e.g.error?e.g.error.code:0,a.uri))}),e.u.D(u,"updateend",function(){return Wi(e,t)}),e.l.set(t,u),e.G.set(t,r),e.Ta.set(t,!!n.drmInfos.length)}}d.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)};function hm(e){return e.ya&&!e.N&&!e.H}function ma(e,t,n,i){e.h||(e.h=new gi(e.aa),e.h&&(e.h.B=e.B.modifyCueCallback));var r=e.h;i=i||e.Fa,e=e.X,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=as.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Ee("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Ee("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.C=i)}function Mr(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function kr(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function hf(e,t){return e.l.size?t==pe?e.h.g:rm(co(e,t)):null}function Dr(e,t){return e.l.size?t==pe?e.h.h:da(co(e,t)):null}function Iw(e,t,n){return t==pe?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=co(e,t),om(e,n))}d.Gc=function(){var e={total:this.H?[]:xi(this.g.buffered),audio:xi(co(this,"audio")),video:xi(co(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function co(e,t){if(e.H||e.N)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function Cw(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=null,a=[],l=se(n);if(pi.includes(o))n=Cr(l),n.length&&i&&((s=n.find(function(m){return m.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof s.data=="number"&&(u=Math.round(s.data)/1e3),e.O.onMetadata([{cueTime:i.startTime,data:l,frames:n,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(o.includes("/mp4")&&i&&i.ba){l=new Oe;var c=r.emsgSchemeIdUris!=null&&r.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;c&&l.S("emsg",function(m){var v=r.emsgSchemeIdUris;if(m.version===0)var y=m.reader.Yc(),S=m.reader.Yc(),x=m.reader.U(),A=m.reader.U(),I=m.reader.U(),R=m.reader.U(),E=i.startTime+A/x;else x=m.reader.U(),E=m.reader.Dd()/x+i.timestampOffset,A=E-i.startTime,I=m.reader.U(),R=m.reader.U(),y=m.reader.Yc(),S=m.reader.Yc();m=m.reader.Ub(m.reader.getLength()-m.reader.Pa(),!0),(v&&v.includes(y)||e.B.dispatchAllEmsgBoxes)&&(y=="urn:mpeg:dash:event:2012"?e.O.Ck():(v=E+I/x,e.O.Ak({startTime:E,endTime:v,schemeIdUri:y,value:S,timescale:x,presentationTimeDelta:A,eventDuration:I,id:R,messageData:m}),(y=="https://aomedia.org/emsg/ID3"||y=="https://developer.apple.com/streaming/emsg-id3")&&(x=Cr(m),x.length&&e.O.onMetadata([{cueTime:E,data:m,frames:x,dts:E,pts:E}],0,v))))});var f=i.ba.timescale;t=f&&!isNaN(f);var h=0,p=!1;t&&l.S("prft",function(m){var v=m.reader,y=m.version;v.U(),m=v.U();var S=v.U();m=m*1e3+S/4294967296*1e3,y===0?v=v.U():(y=v.U(),v=v.U(),v=y*4294967296+v),m=lm(m),v=new Map().set("detail",{wallClockTime:m,programStartDate:new Date(m-v/f*1e3)}),v=new Y("prft",v),e.O.onEvent(v)}).box("moof",fe).box("traf",fe).S("tfdt",function(m){p||(h=aa(m.reader,m.version).baseMediaDecodeTime/f,p=!0,c||m.parser.stop())}),(c||t)&&l.parse(n,!1,s),p&&i.timestampOffset==0&&(u=h)}else o.includes("/mp4")||o.includes("/webm")||!lo(l)||(e.$.has(t)||e.$.set(t,new Fe),a=e.$.get(t),a.clearData(),a.Jf(i.i),a.parse(l),l=a.getStartTime(t),l!=null&&(u=l),a=a.getMetadata());return{timestamp:u,metadata:a}}function va(e,t,n,i,r,o,s,u,a,l,c){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B;return C(function(j){switch(j.g){case 1:if(f=ut,t!=f.Na){j.A(2);break}if(e.X!="HLS"){j.A(3);break}return T(j,e.ab,4);case 4:h=j.h,e.h.u=h;case 3:return T(j,oS(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.P()[0]:null),5);case 5:return j.return();case 2:if(l||!e.m){j.A(6);break}return T(j,va(e,f.ka,n,i,r,o,s,u,a,!0),7);case 7:return T(j,va(e,f.Aa,n,i,r,o,s,u,a,!0),8);case 8:return j.return();case 6:if(!e.l.has(t))return j.return();if(p=e.l.get(t).timestampOffset,m=e.G.get(t),e.j.has(t)&&(m=e.j.get(t).getOriginalMimeType()),i&&(v=Cw(e,t,n,i,r,m,a),y=v.timestamp,S=v.metadata,y!=null&&(e.V==null&&t==f.Aa&&(e.V=y,e.va=i.startTime,e.T!=null&&(x=0,e.va==e.oa&&(x=e.V-e.T),e.ma.resolve(x))),e.T==null&&t==f.ka&&(e.T=y,e.oa=i.startTime,e.V!=null&&(A=0,e.va==e.oa&&(A=e.V-e.T),e.ma.resolve(A))),I=y,R=pi,!e.J&&R.includes(e.G.get(t))&&(I=0),E=i.startTime-I,w=Math.abs(p-E),(w>=.001||s||u)&&(!a||E>0||!p)&&(p=E,e.eb&&(ft(e,t,function(){return fo(e,t)},null),ft(e,t,function(){return ho(e,t,p)},null))),(t==f.Aa||!e.l.has(f.Aa))&&e.ab.resolve(p)),S.length)&&e.O.onMetadata(S,p,i?i.endTime:null),o&&t==f.Aa&&(e.h||ma(e,"application/cea-608",e.J,!1),e.K||(k=m.split(";",1)[0],e.K=new Gn(k)),i?(L=e.K.zf(n),L.length&&uS(e.h,L,p)):e.K.init(n,u,c)),!e.j.has(t)){j.A(9);break}return T(j,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:D=j.h,ArrayBuffer.isView(D)?n=D:(P=D,P.init!=null&&(N=P.init,ft(e,t,function(){e.C&&Du(e.C,N,p,r),e.l.get(t).appendBuffer(N)},i?i.P()[0]:null)),n=P.data);case 9:if(n=Pw(e,r,n,i,t),!i||!e.J||t==f.Na){j.A(11);break}if(!s&&!u){j.A(11);break}if(_=i.startTime,e.X!="HLS"||e.m||t!=f.ka||!e.l.has(f.Aa)){j.A(13);break}return T(j,e.ma,14);case 14:B=j.h,Math.abs(B)>.15&&(_-=B);case 13:ft(e,t,function(){return fo(e,t)},null),ft(e,t,function(){return ho(e,t,_)},null);case 11:return T(j,ft(e,t,function(){var O=n;e.C&&Du(e.C,O,p,r),e.l.get(t).appendBuffer(O)},i?i.P()[0]:null),15);case 15:G(j)}})}function Mw(e,t){var n=Dr(e,"video")||0;Qp(e.h,t,n)}function kw(e){e.h&&Qp(e.h,"",0)}d.remove=function(e,t,n,i){var r=this,o,s;return C(function(u){return u.g==1?(o=ut,e==o.Aa&&r.K&&(r.K.remove(i),s=r.h.g||0,r.h.remove(s,n,!0)),e==o.Na?T(u,r.h.remove(t,n),0):n>t?T(u,ft(r,e,function(){return ya(r,e,t,n)},null),5):u.A(0)):r.m?T(u,ft(r,o.ka,function(){return ya(r,o.ka,t,n)},null),0):u.A(0)})};function pm(e,t){var n;return C(function(i){return i.g==1?(n=ut,t==n.Na?e.h?T(i,e.h.remove(0,1/0),0):i.return():t===n.Aa&&e.K&&e.h?T(i,e.h.remove(0,1/0,!0),4):i.A(4)):i.g!=6?T(i,ft(e,t,function(){return ya(e,t,0,e.i.duration)},null),6):e.m?T(i,ft(e,n.ka,function(){return ya(e,n.ka,0,e.i.duration)},null),0):i.A(0)})}d.flush=function(e){var t=this,n;return C(function(i){return i.g==1?(n=ut,e==n.Na?i.return():T(i,ft(t,e,function(){t.g.currentTime-=.001,Wi(t,e)},null),2)):t.m?T(i,ft(t,n.ka,function(){var r=n.ka;t.g.currentTime-=.001,Wi(t,r)},null),0):i.A(0)})};function gm(e,t,n,i,r,o,s,u,a){var l,c,f;return C(function(h){return h.g==1?(l=ut,t==l.Na?(o||(e.h.u=n),sS(e.h,i,r),h.return()):(c=[],T(h,Ow(e,t,s,u,a),2))):(f=h.h,f||(c.push(ft(e,t,function(){return fo(e,t)},null)),e.m&&c.push(ft(e,l.ka,function(){return fo(e,l.ka)},null))),o||(c.push(ft(e,t,function(){return ho(e,t,n)},null)),e.m&&c.push(ft(e,l.ka,function(){return ho(e,l.ka,n)},null))),(i!=0||r!=1/0)&&(c.push(ft(e,t,function(){return mm(e,t,i,r)},null)),e.m&&c.push(ft(e,l.ka,function(){return mm(e,l.ka,i,r)},null))),c.length?T(h,Promise.all(c),0):h.A(0))})}function Dw(e,t,n){var i,r;return C(function(o){return o.g==1?(i=ut,t==i.Na||(t==i.Aa&&(e.ab=new je),!e.J||(r=Dr(e,t))&&Math.abs(r-n)<.15)?o.return():(ft(e,t,function(){return fo(e,t)},null),e.m&&ft(e,i.ka,function(){return fo(e,i.ka)},null),T(o,ft(e,t,function(){return ho(e,t,n)},null),2))):e.m?T(o,ft(e,i.ka,function(){return ho(e,i.ka,n)},null),0):o.A(0)})}d.endOfStream=function(e){var t=this;return C(function(n){return T(n,ws(t,function(){Mr(t)||kr(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},d.Ab=function(e){var t=this;return C(function(n){return T(n,ws(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var i=g(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o={start:function(){},p:new je,uri:null};t.o.get(r).unshift(o)}t.i.duration=e,t.xa=e}),0)})},d.getDuration=function(){return this.i.duration};function Rw(e,t,n){C(function(i){return e.I.g||e.g.error||e.N||e.H||Mr(e)||kr(e)?i.return():T(i,ws(e,function(){Mr(e)||kr(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function pf(e){C(function(t){return e.I.g||e.g.error||e.N||e.H||Mr(e)||kr(e)?t.return():T(t,ws(e,function(){Mr(e)||kr(e)||e.i.clearLiveSeekableRange()}),0)})}function ya(e,t,n,i){if(i<=n)Wi(e,t);else{if(e.C){var r=e.C;t==="video"&&r.g&&r.g.flushBuffer(n,i)}e.l.get(t).remove(n,i)}}function fo(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,Wi(e,t)}function ho(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Wi(e,t)}function mm(e,t,n,i){var r=e.l.get(t);(r.appendWindowEnd!==i||r.appendWindowStart!==n)&&(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),Wi(e,t)}function Wi(e,t){if(e.H||e.I.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),gf(e,t))}function ft(e,t,n,i){return be(e.I),n={start:n,p:new je,uri:i},e.o.get(t).push(n),e.o.get(t).length==1&&vm(e,t),n.p}function ws(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m;return C(function(v){switch(v.g){case 1:for(be(e.I),n=[],i=Array.from(e.l.keys()),r=g(i),o=r.next(),s={};!o.done;s={ready:void 0},o=r.next())u=o.value,s.ready=new je,a={start:(function(y){return function(){return y.ready.resolve()}})(s),p:s.ready,uri:null},l=e.o.get(u),l.push(a),n.push(s.ready),l.length==1&&a.start();return ue(v,2),T(v,Promise.all(n),4);case 4:de(v,3);break;case 2:throw c=ae(v),c;case 3:return ue(v,5,6),T(v,t(),6);case 6:for(sn(v),f=g(i),h=f.next();!h.done;h=f.next())p=h.value,gf(e,p);un(v,0);break;case 5:throw m=ae(v),new M(2,3,3015,m,e.g.error||"No error in the media element",null)}})}function gf(e,t){e.o.get(t).shift(),vm(e,t)}function vm(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new M(2,3,3017,t)):hm(e)?n.p.reject(new M(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new M(2,3,3024,t)),gf(e,t)}}function Lw(e,t){e.aa=t,e.h&&(e.h.l=t)}function Pw(e,t,n,i,r){if(os(e.G.get(r))!="mp4")return n;var o=i===null,s=e.Ta.get(r),u=e.O.Lj(),a=!1;i&&i.ba&&(a=i.ba.encrypted),i=i?i.P()[0]:null;var l=he();return e.B.correctEc3Enca&&o&&r==="audio"&&(n=lw(n)),e.B.insertFakeEncryptionInInit&&s&&l.Ed(u,r)&&(o?n=cw(t,n,i):!a&&l.Ki(r)&&(n=fw(n))),o&&l.qe()&&(n=pw(n)),n}function Nw(e,t,n,i){return ft(e,t,function(){if(t!==pe){if(e.G.get(t),he().Bb()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.G.set(t,n)}Wi(e,t)}},null)}function jw(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R;return C(function(E){if(E.g==1){if(e.H||e.N)return E.return();for(n=ut,e.H=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.Ua=!0),e.ob&&(e.g.autoplay=!1),oi(E,2),e.u.Qa(),o=g(e.j.values()),s=o.next();!s.done;s=o.next())u=s.value,u.destroy();for(a=g(e.l.values()),l=a.next();!l.done;l=a.next()){c=l.value;try{e.i.removeSourceBuffer(c)}catch{}}return e.j.clear(),e.l.clear(),f=e.i.duration,e.M=new je,e.i=df(e,e.M),T(E,e.M,4)}if(E.g!=2){for(!isNaN(f)&&f?e.i.duration=f:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),h=new je,p=e.i.sourceBuffers,m=t.size,v=0,y=function(){v++,v===m&&(h.resolve(),e.u.Ma(p,"addsourcebuffer",y))},e.u.D(p,"addsourcebuffer",y),S=g(t.keys()),x=S.next();!x.done;x=S.next())A=x.value,I=t.get(A),ga(e,A,I,I.codecs);return(R=t.get(n.ka))&&R.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ka)&&e.o.set(n.ka,[]),T(E,h,2)}return sn(E),e.H=!1,be(e.I),e.u.za(e.g,"loadedmetadata",function(){e.I.g||(e.g.currentTime=i)}),e.u.za(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=r,e.Ua&&(e.Ua=!1,e.g.play()))}),un(E,0)})}function ym(e,t){return ws(e,function(){return jw(e,t)})}function Tm(e,t,n,i){var r=!1,o=Gt("audio",(i||"").split(",")),s=Gt("video",(i||"").split(",")),u=s;t=="audio"&&(u=o),u||(u=i),i=Ze(n,u);var a=Qt(e.G.get(t)),l=e.B.forceTransmux;if(!Pt(i)||!e.J&&pi.includes(i)?l=!0:l||n==a||(l=!he().Mf()&&pi.includes(n)),l&&(e=Fu(n,u),n=Yr(e))){var c=n();o&&s&&(r=!0),i=c.convertCodecs(t,e)}return t=ct(Kt(i)),{hc:c,cl:r,Qh:Qt(i),codec:t,mimeType:i}}function xm(e,t,n,i,r){if(t==pe)return{type:vf,uf:n,hc:null};var o=ct(Kt(e.G.get(t))),s=Qt(e.G.get(t)),u=Tm(e,t,n,i),a=u.hc,l=u.cl,c=u.Qh,f=u.codec;u=u.mimeType;var h=!0;return l&&e.G.has("audio")&&(n=Tm(e,"audio",n,i),i=ct(Kt(e.G.get("audio"))),h=Qt(e.G.get("audio")),h=i==n.codec&&h==n.Qh,n.hc&&n.hc.destroy()),o===f&&s===c&&h?{type:vf,uf:u,hc:a}:(o=!0,(e.m&&!r.has("audio")||l&&a&&!e.j.has(t))&&(o=!1),t=he(),o&&e.B.codecSwitchingStrategy==="smooth"&&t.Bb()?{type:Sm,uf:u,hc:a}:(a&&a.destroy(),{type:yf,uf:u,hc:null}))}function Ow(e,t,n,i,r){var o,s,u,a,l,c;return C(function(f){return f.g==1?(o=ut,s=xm(e,t,n,i,r),u=s.type,a=s.hc,l=s.uf,(c=r.get(o.ka))&&(e.m=c.isAudioMuxedInVideo),u==vf?(e.j.has(t)&&!a?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&a?e.j.set(t,a):a&&(e.j.has(t)&&e.j.get(t).transmux!==a.transmux?(e.j.get(t).destroy(),e.j.set(t,a)):a.destroy()),f.return(!1)):u==Sm?T(f,Nw(e,t,l,a),3):u!=yf?f.A(3):(a&&a.destroy(),T(f,ym(e,r),3))):f.return(!0)})}function Uw(e,t,n,i,r){return e=xm(e,t,n,i,r),e.hc&&e.hc.destroy(),e.type==yf}var mf=b.URL.createObjectURL,_w="sequence",vf="none",yf="reset",Sm="changeType";function re(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=n===void 0?!0:n,this.H=0,this.o=!1,this.m=e}d=re.prototype,d.getDuration=function(){return this.l},d.Nj=function(){return this.h},d.Ti=function(e){this.i=e},d.Ab=function(e){this.l=e},d.Sj=function(){return this.i},d.Si=function(e){this.B=e},d.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},d.Kf=function(e){this.u=e},d.bf=function(){return this.u},d.qh=function(e){this.F=e},d.Fj=function(){return this.F},d.Ei=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.vf(e[0].start+t),this.h=e.reduce(function(r,o){return Math.max(r,o.end-o.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},d.ke=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.B)/1e3;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.vf(t),this.g=Math.max(this.g,n),this.i!=null&&this.G&&!this.o&&(this.i=i-this.g-this.h)}},d.Di=function(e,t){this.vf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},d.Oj=function(){return this.g},d.nf=function(){this.o=!0},d.pk=function(){return this.o},d.rh=function(e){this.m=e},d.Kj=function(){return this.m},d.vf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},d.Vg=function(e){this.h=Math.max(this.h,e)},d.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},d.W=function(){return this.l==1/0&&!this.C},d.Vc=function(){return this.l!=1/0&&!this.C},d.Ib=function(){return Math.max(this.I,this.Ic()-this.u)},d.Vi=function(e){this.I=e},d.Ic=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},d.Zd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(t*1e3)/1e3:Math.max(t,Math.min(this.Ic()-this.u+e,this.Hb()))},d.Zb=function(){return this.Zd(0)},d.Hb=function(){return Math.max(0,this.Ic()-(this.W()||this.Vc()?this.F:0))},d.hj=function(){return!(this.i==null||this.g!=null&&this.G)},d.Ri=function(e){this.H=e},d.Aj=function(){return this.H},K("shaka.media.PresentationTimeline",re),re.prototype.getAvailabilityTimeOffset=re.prototype.Aj,re.prototype.setAvailabilityTimeOffset=re.prototype.Ri,re.prototype.usingPresentationStartTime=re.prototype.hj,re.prototype.getSeekRangeEnd=re.prototype.Hb,re.prototype.getSeekRangeStart=re.prototype.Zb,re.prototype.getSafeSeekRangeStart=re.prototype.Zd,re.prototype.getSegmentAvailabilityEnd=re.prototype.Ic,re.prototype.setUserSeekStart=re.prototype.Vi,re.prototype.getSegmentAvailabilityStart=re.prototype.Ib,re.prototype.isInProgress=re.prototype.Vc,re.prototype.isLive=re.prototype.W,re.prototype.offset=re.prototype.offset,re.prototype.notifyMaxSegmentDuration=re.prototype.Vg,re.prototype.notifyMinSegmentStartTime=re.prototype.vf,re.prototype.getInitialProgramDateTime=re.prototype.Kj,re.prototype.setInitialProgramDateTime=re.prototype.rh,re.prototype.isStartTimeLocked=re.prototype.pk,re.prototype.lockStartTime=re.prototype.nf,re.prototype.getMaxSegmentEndTime=re.prototype.Oj,re.prototype.notifyPeriodDuration=re.prototype.Di,re.prototype.notifySegments=re.prototype.ke,re.prototype.notifyTimeRange=re.prototype.Ei,re.prototype.getDelay=re.prototype.Fj,re.prototype.setDelay=re.prototype.qh,re.prototype.getSegmentAvailabilityDuration=re.prototype.bf,re.prototype.setSegmentAvailabilityDuration=re.prototype.Kf,re.prototype.setStatic=re.prototype.cd,re.prototype.setClockOffset=re.prototype.Si,re.prototype.getPresentationStartTime=re.prototype.Sj,re.prototype.setDuration=re.prototype.Ab,re.prototype.setPresentationStartTime=re.prototype.Ti,re.prototype.getMaxSegmentDuration=re.prototype.Nj,re.prototype.getDuration=re.prototype.getDuration;function Tf(e,t,n,i){var r=this;this.u=i,this.g=e,this.F=t,this.h=n,this.j=new Me,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=bw(this),this.B=!1,this.j.D(e,"waiting",function(){return As(r)}),this.i=new ge(function(){As(r)}).Ea(this.h.gapJumpTimerTime)}Tf.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},Tf.prototype.yf=function(){this.B=!0,this.i&&this.i.Ea(this.h.gapJumpTimerTime),As(this)};function As(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){t=e.o;var n=t.h,i=Em(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=o,t.g=r,t.m=i,t.i=!1),r=o-t.l,(i=r>=t.o&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=gw(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.B||(r=n.start(i),(o=e.h.gapPadding)&&(r=Math.ceil((r+o)*100)/100),r>=e.F.Hb()||r-t<.001||(i!=0&&n.end(i-1),Bw(e,r),t==e.l&&(e.l=r),e.G++,e.u(new Y("gapjumped")))))}}}function Bw(e,t){e.C=!0,e.j.za(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}function bw(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new wm(new Am(e.g),t,function(){var i;return C(function(r){if(r.g==1)return i=xi(e.g.buffered),i.length?n?(e.g.currentTime+=n,r.A(2)):T(r,e.g.play(),3):r.return();if(r.g!=2){if(!e.g)return r.return();e.g.pause(),e.g.play()}e.H++,e.u(new Y("stalldetected")),G(r)})})}function wm(e,t,n){this.h=e,this.m=Em(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}wm.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function Am(e){var t=this;this.g=e,this.h=new Me,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Em(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=g(xi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}Am.prototype.release=function(){this.h&&this.h.release(),this.h=null};function po(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Fw.value().get(t),n.za(e,t,i))}var Fw=new We(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Im(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new Me,this.i=new Dm(e),po(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Mm(r,r.j())})}Im.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function xf(e){return e.o?e.g.currentTime:e.j()}function Cm(e,t){e.g.readyState>0?Rm(e.i,t):po(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Mm(e,e.j())})}function Mm(e,t){Math.abs(e.g.currentTime-t)<.001?km(e):(e.h.za(e.g,"seeking",function(){km(e)}),Rm(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function km(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Dm(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ge(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}Dm.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function Rm(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ea(.1)}function Lm(e){this.g=e,this.i=!1,this.h=null,this.j=new Me}d=Lm.prototype,d.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,i=null;if(typeof t.h=="number")i=t.h;else if(t.h instanceof Date){var r=Pm(t);r!==null&&(i=t.h.getTime()/1e3-r,i=Nm(t,i))}i==null?t.i=!0:(i<0&&(i=Math.max(0,n+i)),n!=i?(t.j.za(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=i):t.i=!0)}}var t=this;po(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},d.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},d.Zf=function(e){this.h=this.i?this.h:e},d.Od=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(Pm(this)||0),e=Nm(this,e)),e||0},d.Lh=function(){return 0},d.Jh=function(){return 0},d.Kh=function(){return!1},d.Ci=function(){},d.ni=function(){var e=da(this.g.buffered);return e!=null&&e>=this.g.duration-1};function Pm(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Nm(e,t){return e=e.g.seekable,e.length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function jm(e,t,n,i,r,o){var s=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.o=null,this.i=new Tf(e,t.presentationTimeline,n,o),this.j=new Im(e,function(){e:{var u=s.i;u.m=!0,u.B=!1,u.i&&u.i.Ea(u.h.gapJumpTimerTime),As(u);var a=xf(s.j);if(u=_m(s,a),!Yg()&&Math.abs(u-a)>.001){a=!1;var l=he().Pi();if(l){var c=Date.now()/1e3;(!s.o||s.o<c-l)&&(s.o=c,a=!0)}else a=!0;if(a){Cm(s.j,u),u=void 0;break e}}s.u(),u=void 0}return u},function(u){var a=s.i;a.g.seeking&&!a.m&&(a.m=!0,a.l=u),a.i&&a.i.Ea(a.h.gapJumpTimerTime),As(a)},function(){return Om(s,i)}),this.m=new ge(function(){if(s.h.readyState!=0&&!s.h.paused){var u=xf(s.j),a=s.g.Zb(),l=s.g.Hb();l-a<3&&(a=l-3),u<a&&(u=_m(s,u),s.h.currentTime=u)}})}d=jm.prototype,d.ready=function(){this.m.Ea(.25)},d.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},d.Zf=function(e){Cm(this.j,Om(this,e))},d.Od=function(){var e=xf(this.j);return this.h.readyState>0&&!this.h.paused?Bm(this,e):e},d.Lh=function(){return this.i.H},d.Jh=function(){return this.i.G},d.Kh=function(){return this.i.C};function Om(e,t){return t==null?t=e.g.getDuration()<1/0?e.g.Zb():e.g.Hb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Hb()+t),Um(e,Bm(e,t))}d.Ci=function(){this.i.yf()},d.ni=function(){if(this.g.W()){var e=this.g.Ic(),t=da(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function Um(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function _m(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.Zb(),o=e.g.Hb(),s=e.g.getDuration();o-r<3&&(r=o-3);var u=e.g.Zd(n),a=e.g.Zd(i);return n=e.g.Zd(n+i),t>=s?Um(e,t):t>o?o-e.l.safeSeekEndOffset:t<r?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?o-e.l.safeSeekEndOffset:nf(e.h.buffered,a)?a:n:t>=u||nf(e.h.buffered,t)?t:n}function Bm(e,t){var n=e.g.Zb();return t<n?n:(e=e.g.Hb(),t>e?e:t)}function Ce(e){this.g=e,this.m=null,this.i=0,this.o=!1}d=Ce.prototype,d.getNumReferences=function(){return this.g.length},d.getNumEvicted=function(){return this.i},d.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},d.xk=function(){this.o=!0},d.Gb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function Xn(e){return e.g[0]||null}d.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},d.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},d.qf=function(e){if(!this.o&&e.length){var t=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(n){return Math.round(n.startTime*1e3)/1e3<t}),this.g.push.apply(this.g,V(e))}},d.ie=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.qf(e),this.Ya(t)},d.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},d.pd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Z(e.startTime,t,e.C,e.startByte,e.endByte,e.ba,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},d.Qf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ge(function(){var i=t();i?n.g.push.apply(n.g,V(i)):(n.m.stop(),n.m=null)}),this.m.Ea(e))},Ce.prototype[Symbol.iterator]=function(){return this.Xb(0)},Ce.prototype.Xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var o=-1;if(r&&r.g.length>0)for(var s=r.g.length-1;s>=0;--s){var u=r.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=r.g[s];if(!u.l)return qn("No independent partial segment found!"),null}n?i--:i++,o=s-1;break}}return new wn(this,i,o,n)},Ce.prototype.Ue=function(){return-1};function Ta(e,t,n){return e=new Z(e,e+t,function(){return n},0,null,null,e,e,e+t),new Ce([e])}K("shaka.media.SegmentIndex",Ce),Ce.forSingleSegment=Ta,Ce.prototype.getIteratorForTime=Ce.prototype.Xb,Ce.prototype.updateEvery=Ce.prototype.Qf,Ce.prototype.fit=Ce.prototype.pd,Ce.prototype.evict=Ce.prototype.Ya,Ce.prototype.mergeAndEvict=Ce.prototype.ie,Ce.prototype.offset=Ce.prototype.offset,Ce.prototype.get=Ce.prototype.get,Ce.prototype.find=Ce.prototype.find,Ce.prototype.markImmutable=Ce.prototype.xk,Ce.prototype.release=Ce.prototype.release,Ce.prototype.getNumEvicted=Ce.prototype.getNumEvicted,Ce.prototype.getNumReferences=Ce.prototype.getNumReferences;function wn(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}d=wn.prototype,d.Id=function(e){this.reverse=e},d.vj=function(){return this.h},d.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},d.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},d.ih=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},K("shaka.media.SegmentIterator",wn),wn.prototype.resetToLastIndependent=wn.prototype.ih,wn.prototype.next=wn.prototype.next,wn.prototype.current=wn.prototype.current,wn.prototype.currentPosition=wn.prototype.vj,wn.prototype.setReverse=wn.prototype.Id;function Je(){Ce.call(this,[]),this.h=[]}Qe(Je,Ce),d=Je.prototype,d.clone=function(){var e=new Je;return e.h=this.h.slice(),e.i=this.i,e},d.release=function(){this.h=[]},d.Gb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)};function Vw(e,t){e=g(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}d.find=function(e){for(var t=this.i,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null};function Hw(e,t){e=g(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.Ue();return-1}d.get=function(e){for(var t=this.i,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},d.offset=function(){},d.qf=function(){},d.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),t.getNumReferences()==0&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},d.ie=function(){},d.pd=function(){},d.Qf=function(){},K("shaka.media.MetaSegmentIndex",Je),Je.prototype.updateEvery=Je.prototype.Qf,Je.prototype.fit=Je.prototype.pd,Je.prototype.mergeAndEvict=Je.prototype.ie,Je.prototype.evict=Je.prototype.Ya,Je.prototype.merge=Je.prototype.qf,Je.prototype.offset=Je.prototype.offset,Je.prototype.get=Je.prototype.get,Je.prototype.find=Je.prototype.find,Je.prototype.forEachTopLevelReference=Je.prototype.Gb,Je.prototype.release=Je.prototype.release;function Es(e){var t=this;this.g=e,this.j=!1,this.i=this.g.$e(),this.h=new ge(function(){t.g.Ai(t.i*.25)})}Es.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Es.prototype.set=function(e){this.i=e,Sf(this)},Es.prototype.Tc=function(){return this.g.Tc()};function Sf(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{e.g.$e()!=t&&e.g.sh(t);return}catch{}e.h.Ea(.25),e.g.$e()!=0&&e.g.sh(0)}function wf(e){var t=this;this.j=e,this.h=new Me,this.g=new Set,this.i=new ge(function(){bm(t,!1)}).Kb(),e.paused||this.i.Ea(.25),this.h.D(e,"playing",function(){t.i.Kb().Ea(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}wf.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function bm(e,t){var n=e.j.currentTime;e=g(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function xa(e){Ne.call(this),this.g=new Map,this.h=e}Qe(xa,Ne),xa.prototype.release=function(){this.g.clear(),Ne.prototype.release.call(this)};function Gw(e,t){var n=e.g.get(t);return n||(n={pe:[],og:null,contentType:t},e.g.set(t,n)),n}function Kw(e,t,n){var i=Gw(e,t.contentType);Xw(e,i),e={xd:t,position:n},i=i.pe,t=i.findIndex(function(r){return r.position>=n}),t>=0?i.splice(t,i[t].position==n?1:0,e):i.push(e)}xa.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.og;e:{for(var r=n.pe,o=r.length-1;o>=0;o--){var s=r[o];if(s.position<=e){r=s.xd;break e}}r=null}o=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),s=r&&i&&r.label&&i.label&&i.label!==r.label;var u=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!Oi(i.roles,r.roles),(s||u||i)&&Fm(this,e,r.contentType)&&(n.og=r,i=new Y("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),o&&Fm(this,e,r.contentType)&&(n.og=r,JSON.stringify(r),n=new Y("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function Fm(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Xw(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,i=e[e.length-1].end,r=t.pe;t.pe=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.pe=[]}function Sa(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Is(e){Ne.call(this),this.h=new Map,this.i=e,this.g=null}Qe(Is,Ne),Is.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Ne.prototype.release.call(this)};function Af(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new Y("regionadd",new Map([["region",t]])),e.dispatchEvent(t),Ww(e))}function Ww(e){e.g||(e.g=new ge(function(){for(var t=e.i(),n=g(e.h),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new Y("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Ea(2))}function wa(e,t,n,i,r){function o(s,u){return!(u.fastSwitching&&s.Xc&&s.ge)}this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=i,this.u=r||o}function zw(e,t){e.l=t,e=g(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Cs(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.h||(e.h=e.i.segmentIndex.Xb(t,!0,e.o)),!e.h))return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value,!!n);){var i=!0;if(n.isPreload()&&n.endByte!=null&&(i=!1),n.Kc()==2&&(i=!1),n.$b(!1)&&(i=!1),i&&n.ba&&t.push(Vm(e,n.ba)),i&&!e.g.has(n)&&(i=new If(e.l),t.push(Km(i,n,e.i)),e.g.set(n,i)),!e.u(n,e.i))break}return Ef(e),Promise.all(t)}function Vm(e,t){if(!e.i.segmentIndex||t.$b()||Array.from(e.j.keys()).some(function(r){return Ts(r,t)}))return Promise.resolve();var n=new If(e.l),i=Km(n,t,e.i);return e.j.set(t,n),i}function Hm(e,t){t=g(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ms(e,n)}function Wn(e){Hm(e,e.g),Hm(e,e.j),e.h=null}wa.prototype.Ya=function(e,t){t=t===void 0?!1:t;for(var n=g(this.g.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&Ms(this,i);t&&Ef(this)},wa.prototype.Id=function(e){this.o=e,this.h&&this.h.Id(e)};function Ef(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=g(e.j.keys()),i=n.next(),r={};!i.done;r={Pg:void 0},i=n.next())r.Pg=i.value,t.some((function(o){return function(s){return Ts(s.ba,o.Pg)}})(r))||Ms(e,r.Pg)}function Gm(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var i=n.pop();i&&Ms(e,i)}Ef(e)}function Yw(e,t){t&&t!==e.i&&(Wn(e),e.i=t)}function Ms(e,t){var n=e.g;t instanceof Xt&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function If(e){this.g=e,this.le=this.Ah=null}function Km(e,t,n){var i=new Uint8Array(0);return e.le=e.g(t,n,function(r){return C(function(o){if(o.g==1)return i.byteLength>0?i=rt(i,r):i=r,e.Ah?T(o,e.Ah(i),3):o.A(0);i=new Uint8Array(0),G(o)})}),e.le.promise.catch(function(r){return r instanceof M&&r.code==7001?Promise.resolve():Promise.reject(r)})}If.prototype.abort=function(){this.le&&this.le.abort()},K("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function Cf(e){var t=Qt(e),n=t.split("/")[0];return e=Kt(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xe:null,colorGamut:null,frameRate:null}}function qw(e,t,n){function i(w){S=w.name;var k=w.reader;k.skip(24);var L=k.Ca(),D=k.Ca();k.skip(50),h=String(L),f=String(D),w.reader.Ia()&&fe(w)}function r(w){var k=qg(w.reader);p=k.channelCount,m=k.sampleRate,o(w.name)}function o(w){switch(w=w.toLowerCase(),w){case"avc1":case"avc3":u.push(w+".42E01E"),l=!0;break;case"hev1":case"hvc1":u.push(w+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":u.push(w+".05.04"),l=!0;break;case"vp09":u.push(w+".00.10.08"),l=!0;break;case"av01":u.push(w+".0.01M.08"),l=!0;break;case"mp4a":s.push("mp4a.40.2"),a=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(w),a=!0;break;case"apac":s.push("apac.31.00"),a=!0}}var s=[],u=[],a=!1,l=!1,c=null,f=null,h=null,p=null,m=null,v=null,y=null,S;if(new Oe().box("moov",fe).box("trak",fe).box("mdia",fe).S("mdhd",function(w){c=la(w.reader,w.version).language}).box("minf",fe).box("stbl",fe).S("stsd",yi).box("mp4a",function(w){var k=qg(w.reader);p=k.channelCount,m=k.sampleRate,w.reader.Ia()?fe(w):o(w.name)}).box("esds",function(w){w=w.reader;for(var k="mp4a",L,D;w.Ia();){L=w.Y();for(var P=w.Y();P&128;)P=w.Y();if(L==3)w.Ca(),P=w.Y(),P&128&&w.Ca(),P&64&&w.skip(w.Y()),P&32&&w.Ca();else if(L==4)D=w.Y(),w.skip(12);else if(L==5)break}D&&(k+="."+ms(D),L==5&&w.Ia()&&(L=w.Y(),D=(L&248)>>3,D===31&&w.Ia()&&(D=32+((L&7)<<3)+((w.Y()&224)>>5)),k+="."+D)),s.push(k),a=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("apac",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(w){var k=S||"";switch(S){case"dvav":k="avc3";break;case"dva1":k="avc1"}w=w.reader,w.skip(1),w=k+"."+ms(w.Y())+ms(w.Y())+ms(w.Y()),u.push(w),l=!0}).box("hvcC",function(w){var k=S||"";switch(S){case"dvh1":k="hvc1";break;case"dvhe":k="hev1"}var L=w.reader;L.skip(1),w=L.Y();var D=["","A","B","C"][w>>6],P=w&31,N=L.U(),_=(w&32)>>5?"H":"L";w=[L.Y(),L.Y(),L.Y(),L.Y(),L.Y(),L.Y()],L=L.Y();for(var B=0,j=0;j<32&&(B|=N&1,j!=31);j++)B<<=1,N>>=1;for(k=k+("."+D+P)+("."+ms(B,!0)),k+="."+_+L,D="",P=w.length;P--;)((_=w[P])||D)&&(D="."+_.toString(16).toUpperCase()+D);k+=D,u.push(k),l=!0}).box("dvcC",function(w){var k=S||"";switch(S){case"hvc1":k="dvh1";break;case"hev1":k="dvhe";break;case"avc1":k="dva1";break;case"avc3":k="dvav";break;case"av01":k="dav1"}var L=w.reader;L.skip(2),w=L.Y(),L=L.Y(),u.push(k+"."+en(w>>1&127)+"."+en(w<<5&32|L>>3&31)),l=!0}).box("dvvC",function(w){var k=S||"";switch(S){case"hvc1":k="dvh1";break;case"hev1":k="dvhe";break;case"avc1":k="dva1";break;case"avc3":k="dvav";break;case"av01":k="dav1"}var L=w.reader;L.skip(2),w=L.Y(),L=L.Y(),u.push(k+"."+en(w>>1&127)+"."+en(w<<5&32|L>>3&31)),l=!0}).S("vpcC",function(w){var k=S||"",L=w.reader;w=L.Y();var D=L.Y();L=L.Y()>>4&15,u.push(k+"."+en(w)+"."+en(D)+"."+en(L)),l=!0}).box("av1C",function(w){var k=S||"";switch(S){case"dav1":k="av01"}var L=w.reader;L.skip(1),w=L.Y(),L=L.Y();var D=w>>>5,P=(L&64)>>6;u.push(k+"."+D+"."+en(w&31)+(L>>>7?"H":"M")+"."+en(D===2&&P?(L&32)>>5?12:10:P?10:8)+"."+((L&16)>>4)+"."+((L&8)>>3)+((L&4)>>2)+(L&3)+"."+en(1)+"."+en(1)+"."+en(1)+".0"),l=!0}).box("enca",ia).box("encv",Zt).box("sinf",fe).box("frma",function(w){w=ef(w.reader).codec,o(w)}).box("colr",function(w){u=u.map(function(D){if(D.startsWith("av01.")){var P=w.reader,N=P.Pa(),_=P.Ub(4,!1),B=String.fromCharCode(_[0]);if(B+=String.fromCharCode(_[1]),B+=String.fromCharCode(_[2]),B+=String.fromCharCode(_[3]),B==="nclx"){_=P.Ca(),B=P.Ca();var j=P.Ca(),O=P.Y()>>7,F=D.split(".");F.length==10&&(F[6]=en(_),F[7]=en(B),F[8]=en(j),F[9]=String(O),D=F.join("."))}P.seek(N)}return D});var k=$S(w.reader),L=k.colorGamut;v=k.xe,y=L}).parse(e||t,!0,!0),!s.length&&!u.length)return null;var x=a&&!l,A=new Map;if(l&&!n){n=new Gn("video/mp4"),e&&n.init(e);try{n.zf(t);for(var I=g(n.Yf()),R=I.next();!R.done;R=I.next()){var E=R.value;A.set(E,E)}}catch{}n.Nd()}return{type:x?"audio":"video",mimeType:x?"audio/mp4":"video/mp4",codecs:Mf(s.concat(u)).join(", "),language:c,height:f,width:h,channelCount:p,sampleRate:m,closedCaptions:A,xe:v,colorGamut:y,frameRate:null}}function Mf(e){var t=new Set,n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Vi(i);t.has(r)||(n.push(i),t.add(r))}return t=Ac("audio",n),i=Ac("video",n),e=Ac(pe,n),i=Jw(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function Jw(e){if(e.length<=1)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Pt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function $w(e){var t=null;return new Oe().box("moov",fe).box("trak",fe).box("mdia",fe).box("minf",fe).box("stbl",fe).S("stsd",yi).box("encv",Zt).box("enca",ia).box("sinf",fe).box("schi",fe).S("tenc",function(n){n=n.reader,n.Y(),n.Y(),n.Y(),n.Y(),n=n.Ub(16,!1),t=ai(n)}).parse(e,!0),t}function kf(e,t,n){var i,r,o,s,u;return C(function(a){if(a.g==1)return i=t,i.cryptoKey?a.A(2):T(a,i.fetchKey(),3);if(r=i.iv,!r)for(r=se(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;s>=0;s--)r[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:r}:u={name:"AES-CTR",counter:r,length:64},a.return(b.crypto.subtle.decrypt(u,i.cryptoKey,e))})}function go(e,t,n){var i,r,o,s,u,a,l;return C(function(c){switch(c.g){case 1:return i=mo(e),(r=Qw.get(i))?c.return(r):(o=0,s=ot([e],n),ue(c,2),s.method="HEAD",T(c,t.request(o,s).promise,4));case 4:u=c.h,r=u.headers["content-type"],de(c,3);break;case 2:if(a=ae(c),!a||a.code!=1002&&a.code!=1001){c.A(3);break}return s.method="GET",T(c,t.request(o,s).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}function mo(e){return e=new nt(e).Tb.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}function ks(e,t,n,i,r){return e=ot(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}var Qw=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function Xm(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.M=new Map,this.C=1,this.B=this.o=null,this.V=0,this.h=new Map,this.N=!1,this.X=null,this.F=!1,this.l=new eo(function(){return Zw(n)}),this.R=Date.now()/1e3,this.m=new Map,this.T={projection:null,hfov:null},this.aa=0,this.$=1/0,this.H=null,this.O=[],this.u=new ge(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var i=n.j.presentationTimeline.Zb(),r=n.j.presentationTimeline.Hb();r-i>1?Rw(n.g.Z,i,r):pf(n.g.Z)}else pf(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new ge(function(){var i=n.g.video;!i.ended&&n.I&&(n.J=!0,i.currentTime=n.I,n.I=null)}),this.G=new Me}d=Xm.prototype,d.destroy=function(){return this.l.destroy()};function Zw(e){var t,n,i,r,o,s,u;return C(function(a){if(a.g==1){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=g(e.h.values()),i=n.next();!i.done;i=n.next())r=i.value,wi(r),t.push(Ma(r)),r.ha&&(Wn(r.ha),r.ha=null);for(o=g(e.m.values()),s=o.next();!s.done;s=o.next())u=s.value,Wn(u);return T(a,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,G(a)})}d.configure=function(e){if(this.i=e,this.X=new vg({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ha&&(Wn(t.ha),t.ha=null),t=g(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Wn(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(pe))&&t.ha&&(Wn(t.ha),t.ha=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ha&&(Wn(t.ha),t.ha=null),t=g(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ha?(Gm(n.ha,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Wn(n.ha),n.ha=null)):e.segmentPrefetchLimit>0&&(n.ha=Rf(this,n.stream));e.disableAudioPrefetch||sA(this)};function eA(e,t,n){e.j.presentationTimeline.W()||(e.aa=t,e.$=n)}d.start=function(e){var t=this;return C(function(n){if(n.g==1)return T(n,oA(t,e||new Map),2);be(t.l),t.N=!0,G(n)})};function tA(e,t){var n,i,r,o,s,u;C(function(a){switch(a.g){case 1:return n=ut,e.V++,i=e.V,ue(a,2),T(a,pm(e.g.Z,n.Na),4);case 4:de(a,3);break;case 2:r=ae(a),e.g&&e.g.onError(r);case 3:o=Ze(t.mimeType,t.codecs),ma(e.g.Z,o,e.j.sequenceMode,t.external),s=e.g.Z.aa,(s.isTextVisible()||e.i.alwaysStreamText)&&e.V==i&&(u=Ea(e,t),e.h.set(n.Na,u),Nt(e,u,0)),G(a)}})}function nA(e){var t=e.h.get(pe);t&&(wi(t),Ma(t).catch(function(){}),e.H=e.h.get(pe),e.h.delete(pe),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}function Wm(e,t){for(var n=e.g.Pb()<0,i=g(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.ua&&r.ua.Id(n),r.ha&&r.ha.Id(n);for(i=g(e.m.values()),r=i.next();!r.done;r=i.next())r.value.Id(n);(n=e.h.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Nc&&(vo(e,t,!1,0,!1),n.Nc=i):(t=n.Nc)&&(n.Nc=null,vo(e,t,!0,0,!1)))}function zm(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.o=t,e.N&&(t.video&&vo(e,t.video,n,i,r,o),t.audio&&vo(e,t.audio,n,i,r,o))}function Aa(e,t){C(function(n){if(n.g==1)return e.H=null,e.B=t,e.N?t.segmentIndex?n.A(2):T(n,t.createSegmentIndex(),2):n.return();vo(e,t,!0,0,!1),G(n)})}function iA(e){var t=e.h.get(pe);t&&vo(e,t.stream,!0,0,!0)}function rA(e,t){for(var n=g(e.M.entries()),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.M.delete(i))}}function vo(e,t,n,i,r,o){var s=e.h.get(t.type);s||t.type!=pe?s&&(s.Nc&&(t.trickModeVideo?(s.Nc=t,t=t.trickModeVideo):s.Nc=null),s.stream!=t||r)&&(e.m.has(t)?s.ha=e.m.get(t):s.ha&&Yw(s.ha,t),t.type==pe&&s.stream!=t&&(r=Ze(t.mimeType,t.codecs),ma(e.g.Z,r,e.j.sequenceMode,t.external)),!e.m.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Ja?(r="("+s.type+":"+s.stream.id+")",e.M.has(r)||e.M.set(r,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),r=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.ua=null,s.fg=!!o,t.dependencyStream?s.Fc=Ea(e,t.dependencyStream):s.Fc=null,Qm(e),r&&(s.pb=null,s.tc=null,s.sc=null,t.isAudioMuxedInVideo&&(t=null,s.type==="video"?t=e.h.get("audio"):s.type==="audio"&&(t=e.h.get("video")),t&&(Ma(t).catch(function(){}),t.pb=null,t.tc=null,t.sc=null,Df(e,t),Ym(e,t).catch(function(u){e.g&&e.g.onError(u)})))),n?s.Wb?s.Kd=!0:s.Ja?(s.jc=!0,s.ld=i,s.Kd=!0):(wi(s),Nf(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)})):s.Ja||s.qb||Nt(e,s,0),Ym(e,s).catch(function(u){e.g&&e.g.onError(u)})):tA(e,t)}function Ym(e,t){var n,i,r;return C(function(o){if(o.g==1)return t.Va?(n=t.stream,i=t.Va,n.segmentIndex?o.A(2):T(o,n.createSegmentIndex(),2)):o.return();if(o.g!=4)return r=n.dependencyStream,!r||r.segmentIndex?o.A(4):T(o,r.createSegmentIndex(),4);if(t.Va!=i||t.stream!=n)return o.return();var s=e.g.nc(),u=Dr(e.g.Z,t.type),a=t.stream.segmentIndex.find(t.La?t.La.endTime:s),l=a==null?null:t.stream.segmentIndex.get(a);a=l?tf(l):null,l&&!a&&(a=(l.endTime-l.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),a?((l=l.ba)&&(a+=(l.endByte?l.endByte+1-l.startByte:null)||0),l=e.g.getBandwidthEstimate(),s=a*8/l<(u||0)-s-e.i.rebufferingGoal||t.Va.h.g>a):s=!0,s&&t.Va.abort(),G(o)})}d.bd=function(){if(this.g){for(var e=this.g.nc(),t=g(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r;if((r=!this.J)&&(r=this.g.Z,i==pe?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=co(r,i),r=nf(r,e)),r=!r),r){if(this.R=0,n.ha&&(n.ha.h=null),n.type==="audio"){r=g(this.m.values());for(var o=r.next();!o.done;o=r.next())o.value.h=null}n.ua=null,(Dr(this.g.Z,i)!=null||n.Ja)&&Df(this,n),n.Va&&(n.Va.abort(),n.Va=null),i===pe&&(i=this.g.Z,i.K&&i.K.Nd()),n.bd=!0}!this.J||n.Wb||n.Ja||n.qb||Nt(this,n,0)}Rs(this)&&Uf(this)}};function Df(e,t){t.Wb||t.jc||(t.Ja?(t.jc=!0,t.ld=0):hf(e.g.Z,t.type)==null?t.qb==null&&Nt(e,t,0):(wi(t),Nf(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function oA(e,t){var n,i,r,o,s,u,a,l;return C(function(c){if(c.g==1){if(!e.o)throw new M(2,5,5006);return n=Da(e,!0),i=e.g.Z,T(c,i.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(be(e.l),e.updateDuration(),r=g(n.keys()),o=r.next();!o.done;o=r.next())s=o.value,u=n.get(s),e.h.has(s)||(a=Ea(e,u),t.has(u.id)&&(l=t.get(u.id),zw(l,function(f,h,p){return Ca(f,h,p||null,e.i.retryParameters,e.g.vc)}),a.ha=l),e.h.set(s,a),Nt(e,a,0));Qm(e),G(c)})}function Ea(e,t){var n={stream:t,type:t.type,ua:null,ha:Rf(e,t),La:null,pb:null,mf:null,tc:null,sc:null,kf:null,lf:null,Nc:null,endOfStream:!1,Ja:!1,qb:null,jc:!1,ld:0,Kd:!1,Wb:!1,bd:!0,fg:!1,eh:!1,ae:!1,Va:null,Fc:null};return t.dependencyStream&&(n.Fc=Ea(e,t.dependencyStream)),n}function Rf(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===pe&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===pe&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ha)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new wa(e.i.segmentPrefetchLimit,t,function(i,r,o){return Ca(i,r,o||null,e.i.retryParameters,e.g.vc)},e.g.Pb()<0,e.g.$k):null}function sA(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,i=g(e.j.variants),r=i.next(),o={};!r.done;o={Nb:void 0},r=i.next())if(o.Nb=r.value,o.Nb.audio)if(e.m.has(o.Nb.audio)){if(r=e.m.get(o.Nb.audio),Gm(r,t),!(t>0&&n.some((function(u){return function(a){return qr(u.Nb.audio.language,a)}})(o)))){var s=e.h.get(o.Nb.audio.type);r!==(s&&s.ha)&&Wn(r),e.m.delete(o.Nb.audio)}}else t<=0||!n.some((function(u){return function(a){return qr(u.Nb.audio.language,a)}})(o))||!(r=Rf(e,o.Nb.audio))||(o.Nb.audio.segmentIndex||o.Nb.audio.createSegmentIndex(),e.m.set(o.Nb.audio,r))}d.updateDuration=function(){var e=Yg(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),pf(this.g.Z)),this.g.Z.Ab(t)):e?(this.u&&this.u.Ea(.5),this.g.Z.Ab(1/0)):this.g.Z.Ab(4294967296)};function uA(e,t){var n,i,r,o,s,u,a,l,c;return C(function(f){switch(f.g){case 1:if(be(e.l),n=ut,t.Ja||t.qb==null||t.Wb)return f.return();if(t.qb=null,!t.jc){f.A(2);break}return T(f,Nf(e,t,t.Kd,t.ld),3);case 3:return f.return();case 2:if(rA(e,t),t.stream.segmentIndex){f.A(4);break}return i=t.stream,ue(f,5),T(f,t.stream.createSegmentIndex(),7);case 7:de(f,6);break;case 5:return r=ae(f),T(f,jf(e,t,r),8);case 8:return f.return();case 6:if(i!=t.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),t.Ja||t.qb||Nt(e,t,0),f.return();case 4:if(!t.Fc){f.A(9);break}if(t.Fc.stream.segmentIndex){f.A(9);break}return ue(f,11),T(f,t.Fc.stream.createSegmentIndex(),13);case 13:de(f,9);break;case 11:ae(f);case 9:ue(f,14),o=aA(e,t),o!=null&&(Nt(e,t,o),t.ae=!1),de(f,15);break;case 14:return s=ae(f),T(f,jf(e,t,s),16);case 16:return f.return();case 15:if(t.type===n.Na)return f.return();if(u=[],t.stream&&!t.stream.isAudioMuxedInVideo&&u.push(t),a=t.type===n.ka?n.Aa:n.ka,(l=e.h.get(a))&&l.stream&&!l.stream.isAudioMuxedInVideo&&u.push(l),!e.N||!u.every(function(h){return h.endOfStream})){f.A(0);break}return T(f,e.g.Z.endOfStream(),18);case 18:be(e.l),c=e.g.Z.getDuration(),c!=0&&c<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.Ab(c),G(f)}})}function aA(e,t){if(Pf(t))return Mw(e.g.Z,t.stream.originalId||""),null;if(t.type==pe&&kw(e.g.Z),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;if(t.type!=pe&&kr(e.g.Z))return ka(e,!0),null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Pb()));if(!hm(e.g.Z)&&t.type!=pe)return n/2;var i=e.g.nc();if(t.type==="audio")for(var r=g(e.m.keys()),o=r.next();!o.done;o=r.next())o=e.m.get(o.value),o.Ya(i,!0),Cs(o,i);r=t.La?t.La.endTime:i;var s=Iw(e.g.Z,t.type,i);o=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.C);var u=e.j.presentationTimeline.getDuration()-r,a=Dr(e.g.Z,t.type);if(u<1e-6&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.h.get(pe))&&Pf(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,s>=o)return n/2;if(u=!t.ua,a=qm(e,t,i,a),!a)return n;s=t.pb;var l=a.ba;s&&l&&Ts(l,s)&&(s.g=l.g),s=!1,u&&t.fg&&(s=!0,t.fg=!1),u=1/0,l=Array.from(e.h.values()),l=g(l);for(var c=l.next();!c.done;c=l.next())c=c.value,Pf(c)||c.ua&&!c.ua.current()||(u=Math.min(u,c.La?c.La.endTime:i));return r>=u+e.j.presentationTimeline.h?n:(t.ha&&t.ua&&!e.m.has(t.stream)&&(t.ha.Ya(a.startTime+.001),Cs(t.ha,a.startTime).catch(function(){})),Rs(e)&&hA(e,t,a)||(lA(e,t,i,a,s).catch(function(){}),t.Fc&&Jm(e,t.Fc,i,o)),null)}function qm(e,t,n,i){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||i)return n=t.La?t.La.endTime:i,e=e.g.Pb()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Xb(n,!1,e)),t.ua&&t.ua.next().value;i=e.j.sequenceMode||Rs(e)?0:e.i.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=e.g.Pb()<0;var o=null;return i&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Xb(r,!1,e)),o=t.ua&&t.ua.next().value),o||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Xb(n,!1,e)),o=t.ua&&t.ua.next().value),o}function lA(e,t,n,i,r){var o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R;return C(function(E){switch(E.g){case 1:if(o=ut,s=t.stream,u=t.ua,t.Ja=!0,ue(E,2),i.Kc()==2)throw new M(1,1,1011);return T(E,fA(e,t,i,r),4);case 4:return be(e.l),e.F?E.return():(a=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",l=b.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&l&&a&&(e.j.type!="HLS"||i.o)?(h=new Uint8Array(0),m=p=!1,y=function(w){var k,L,D;return C(function(P){switch(P.g){case 1:if(p||(m=!0,be(e.l),e.F))return P.return();if(ue(P,2),h=rt(h,w),k=!1,L=0,new Oe().box("mdat",function(N){L=N.size+N.start,k=!0}).parse(h,!1,!0),!k){P.A(4);break}return D=h.subarray(0,L),h=h.subarray(L),T(P,Lf(e,t,n,s,i,D,!0,r),5);case 5:t.ha&&t.ua&&Cs(t.ha,i.startTime,!0);case 4:de(P,0);break;case 2:v=ae(P),G(P)}})},T(E,Ds(e,t,i,y),9)):(c=Ds(e,t,i),T(E,c,7)));case 7:return f=E.h,be(e.l),e.F?E.return():(be(e.l),t.jc?(t.Ja=!1,Nt(e,t,0),E.return()):T(E,Lf(e,t,n,s,i,f,!1,r),6));case 9:if(S=E.h,v)throw v;if(m){E.A(10);break}return p=!0,be(e.l),e.F?E.return():t.jc?(t.Ja=!1,Nt(e,t,0),E.return()):T(E,Lf(e,t,n,s,i,S,!1,r),10);case 10:t.ha&&t.ua&&Cs(t.ha,i.startTime,!0);case 6:if(be(e.l),e.F)return E.return();t.La=i,u.next(),t.Ja=!1,t.eh=!1,x=e.g.Z.Gc(),A=x[t.type],JSON.stringify(A),t.jc||(I=null,t.type===o.Aa?I=e.h.get(o.ka):t.type===o.ka&&(I=e.h.get(o.Aa)),I&&I.type==o.ka?e.g.yf(i,t.stream,I.stream.isAudioMuxedInVideo):e.g.yf(i,t.stream,t.stream.codecs.includes(","))),wi(t),Nt(e,t,0),de(E,0);break;case 2:if(R=ae(E),be(e.l,R),e.F)return E.return();if(t.Ja=!1,R.code==7001)t.Ja=!1,wi(t),Nt(e,t,0),E.A(0);else if(t.type==o.Na&&e.i.ignoreTextStreamFailures)e.h.delete(o.Na),E.A(0);else return R.code==3017?T(E,cA(e,t,R),0):(t.ae=!0,R.category==1&&t.ha&&Ms(t.ha,i),R.severity=2,T(E,jf(e,t,R),0))}})}function Jm(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m;return C(function(v){switch(v.g){case 1:for(r=t.stream,u=(s=(o=r.segmentIndex)&&o.Xb(n))&&s.next().value;u&&e.O.includes(u.startTime);)u=s&&s.next().value;if(!u){v.A(0);break}if(a=u.ba,!a||Ts(a,t.pb)){v.A(3);break}return t.pb=a,ue(v,4),T(v,Ds(e,t,a),6);case 6:l=v.h;var y=e.g.Z;y.C&&Du(y.C,l,0,r),e.O=[],de(v,3);break;case 4:throw c=ae(v),t.pb=null,c;case 3:if(t.La&&t.La==u){v.A(0);break}return t.La=u,ue(v,8),T(v,Ds(e,t,u),10);case 10:f=v.h,y=e.g.Z,y.C&&Du(y.C,f,0,r),e.O.push(u.startTime),de(v,9);break;case 8:throw h=ae(v),t.La=null,h;case 9:if(p=Math.max.apply(Math,[0].concat(V(e.O))),m=e.g.nc(),m+i>p)return T(v,Jm(e,t,u.startTime,i),0);v.A(0)}})}function cA(e,t,n){var i,r,o,s,u,a,l;return C(function(c){switch(c.g){case 1:if(i=Array.from(e.h.values()),i.some(function(f){return f!=t&&f.eh})){c.A(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return r=Of(e,n),e.g.disableStream(t.stream,r)||Nt(e,t,4),c.return();if(o=Math.round(100*e.C),o>20){e.C-=.2,c.A(3);break}if(o>4){e.C-=.04,c.A(3);break}if(s=Of(e,n),u=e.g.disableStream(t.stream,s),!u){t.ae=!0,e.F=!0,e.g.onError(n),c.A(5);break}return e.C=1,a=e.g.nc(),T(c,Ia(e,t,a),5);case 5:return c.return();case 3:return t.eh=!0,l=e.g.nc(),T(c,Ia(e,t,l),2);case 2:Nt(e,t,4),G(c)}})}function fA(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A;return C(function(I){switch(I.g){case 1:if(r=ut,o=t.La==null,s=[],u=Math.max(0,Math.max(n.appendWindowStart,e.aa)-.1),a=Math.min(n.appendWindowEnd,e.$)+.1,l=n.codecs||t.stream.codecs,c=Vi(l),f=Qt(n.mimeType||t.stream.mimeType),h=n.timestampOffset,h==t.mf&&u==t.tc&&a==t.sc&&c==t.kf&&f==t.lf){I.A(2);break}if(p=t.kf&&t.lf&&Uw(e.g.Z,t.type,f,l,Da(e)),!p){I.A(3);break}if(m=null,t.type===r.Aa?m=e.h.get(r.ka):t.type===r.ka&&(m=e.h.get(r.Aa)),!m){I.A(3);break}return T(I,Ma(m).catch(function(){}),5);case 5:m.pb=null,m.tc=null,m.sc=null,Df(e,m);case 3:return T(I,$m(e,t,h,u,a,n,c,f),2);case 2:return Ts(n.ba,t.pb)||(t.pb=n.ba,n.l&&n.ba&&(v=Ds(e,t,n.ba),y=function(){var R,E,w,k,L,D,P,N,_,B,j;return C(function(O){switch(O.g){case 1:return ue(O,2),T(O,v,4);case 4:return R=O.h,be(e.l),E=null,w=new Map,k={projection:null,hfov:null},t.stream&&(L=t.stream.videoLayout)&&(D=L.split("/"),D.includes("PROJ-RECT")?k.projection="rect":D.includes("PROJ-EQUI")?k.projection="equi":D.includes("PROJ-HEQU")?k.projection="hequ":D.includes("PROJ-PRIM")?k.projection="prim":D.includes("PROJ-AIV")&&(k.projection="hequ")),P=new Oe,P.box("moov",fe).box("trak",fe).box("mdia",fe).S("mdhd",function(F){E=la(F.reader,F.version).timescale}).box("hdlr",function(F){switch(F=F.reader,F.skip(8),F.Yc()){case"soun":w.set(r.ka,E);break;case"vide":w.set(r.Aa,E)}E=null}),t.type!==r.Aa||k.projection||P.box("minf",fe).box("stbl",fe).S("stsd",yi).box("encv",Zt).box("avc1",Zt).box("avc3",Zt).box("hev1",Zt).box("hvc1",Zt).box("dvav",Zt).box("dva1",Zt).box("dvh1",Zt).box("dvhe",Zt).box("dvc1",Zt).box("dvi1",Zt).box("vexu",fe).box("proj",fe).S("prji",function(F){F=F.reader.Yc(),k.projection=F}).box("hfov",function(F){F=F.reader.U()/1e3,k.hfov=F}),P.parse(R,!0,!0),t.type===r.Aa&&dA(e,k),w.has(t.type)?n.ba.timescale=w.get(t.type):E!=null&&(n.ba.timescale=E),N=t.stream.segmentIndex,N instanceof Je&&(_=Hw(N,n.startTime)),B=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,T(O,e.g.Rh(t.type,R),5);case 5:return T(O,va(e.g.Z,t.type,R,null,t.stream,B,t.bd,i,!1,!1,_),6);case 6:de(O,0);break;case 2:throw j=ae(O),t.pb=null,j}})},S=n.startTime,o&&(x=Dr(e.g.Z,t.type),x!=null&&(S=x)),e.g.Bk(S,n.ba),s.push(y()))),A=t.La?t.La.i:-1,n.i!=A&&s.push(Dw(e.g.Z,t.type,n.startTime)),T(I,Promise.all(s),0)}})}function $m(e,t,n,i,r,o,s,u){var a,l,c,f,h;return C(function(p){switch(p.g){case 1:if(a=ut,l=Da(e),ue(p,2),t.tc=i,t.sc=r,s&&(t.kf=s),u&&(t.lf=u),t.mf=n,c=e.j.sequenceMode||e.j.type=="HLS",f=null,t.type===a.Aa?f=e.h.get(a.ka):t.type===a.ka&&(f=e.h.get(a.Aa)),!(f&&f.stream&&f.stream.isAudioMuxedInVideo)){p.A(4);break}return T(p,gm(e.g.Z,f.type,n,i,r,c,f.stream.mimeType,f.stream.codecs,l),4);case 4:return T(p,gm(e.g.Z,t.type,n,i,r,c,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,l),6);case 6:de(p,0);break;case 2:throw h=ae(p),t.tc=null,t.sc=null,t.kf=null,t.lf=null,t.mf=null,h}})}function Lf(e,t,n,i,r,o,s,u){s=s===void 0?!1:s,u=u===void 0?!1:u;var a,l,c,f;return C(function(h){switch(h.g){case 1:return a=i.closedCaptions&&i.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(l=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",c=null,r.ba&&(c=r.ba.timescale),l&&c&&i.type==="video"&&e.j.type=="DASH"&&new Oe().box("moof",fe).box("traf",fe).S("tfdt",function(p){var m,v,y,S,x,A;return C(function(I){return m=aa(p.reader,p.version),v=m.baseMediaDecodeTime,v?(y=-v/c,S=Number(t.mf)||0,S<y?(x=t.tc,A=t.sc,T(I,$m(e,t,y,x,A,r),0)):I.A(0)):I.return()})}).parse(o,!1,s)),T(h,Ia(e,t,n),2);case 2:return be(e.l),f=t.bd,t.bd=!1,T(h,e.g.Rh(t.type,o),3);case 3:return T(h,va(e.g.Z,t.type,o,r,i,a,f,u,s),4);case 4:be(e.l),G(h)}})}function Ia(e,t,n){var i,r,o,s,u,a,l,c,f;return C(function(h){if(h.g==1)return e.H==t&&(e.H=null),i=t.stream.segmentIndex,i instanceof Je&&(i.Ya(e.j.presentationTimeline.Ib()),r=[],Vw(i,function(p){r.push(p.Ue())})),o=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),s=hf(e.g.Z,t.type),s==null?h.return():(u=n-s,a=e.i.evictionGoal,l=e.j.presentationTimeline.Zb(),c=e.j.presentationTimeline.Hb(),f=u-o,c-l>a&&(f=Math.max(u-o,l-a-s)),f<=a?h.return():T(h,e.g.Z.remove(t.type,s,s+f,r),2));if(h.g!=4)return be(e.l),e.H?T(h,Ia(e,e.H,n),4):h.A(0);be(e.l),G(h)})}function Pf(e){return e&&e.type==pe&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Ds(e,t,n,i){var r,o,s,u,a;return C(function(l){switch(l.g){case 1:if(r=n.$b())return l.return(r);if(o=null,t.ha){var c=t.ha,f=c.g;n instanceof Xt&&(f=c.j),f.has(n)?(c=f.get(n),i&&(c.Ah=i),o=c.le):o=null}return o||(o=Ca(n,t.stream,i||null,e.i.retryParameters,e.g.vc)),s=0,t.ua&&(s=t.ua.h),t.Va=o,T(l,o.promise,2);case 2:if(u=l.h,t.Va=null,a=u.data,!n.aesKey){l.A(3);break}return T(l,kf(a,n.aesKey,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function Ca(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e instanceof Z?e:void 0,u=s?1:0;return e=ks(e.P(),e.startByte,e.endByte,i,n),e.contentType=t.type,r.request(Sn,e,{type:u,stream:t,segment:s,isPreload:o})}function Nf(e,t,n,i){var r,o;return C(function(s){if(s.g==1)return t.jc=!1,t.Kd=!1,t.ld=0,t.Wb=!0,t.La=null,t.ua=null,t.ha&&!e.m.has(t.stream)&&Wn(t.ha),i?(r=e.g.nc(),o=e.g.Z.getDuration(),T(s,e.g.Z.remove(t.type,r+i,o),3)):T(s,pm(e.g.Z,t.type),4);if(s.g!=3)return be(e.l),n?T(s,e.g.Z.flush(t.type),3):s.A(3);be(e.l),t.Wb=!1,t.endOfStream=!1,t.Ja||t.qb||Nt(e,t,0),G(s)})}function Nt(e,t,n){var i=t.type;(i!=pe||e.h.has(i))&&(t.qb=new ls(function(){var r;return C(function(o){if(o.g==1)return ue(o,2),T(o,uA(e,t),4);if(o.g!=2)return de(o,0);r=ae(o),e.g&&e.g.onError(r),G(o)})}).ia(n))}function wi(e){e.qb!=null&&(e.qb.stop(),e.qb=null)}function Ma(e){return C(function(t){return e.Va?T(t,e.Va.abort(),0):t.A(0)})}function jf(e,t,n){var i;return C(function(r){if(r.g==1)return n.code==3024?(t.Ja=!1,wi(t),Nt(e,t,0),r.return()):T(r,yg(e.X),2);if(be(e.l),n.category===1&&n.code!=1003){if(t.Nc)return Wm(e,!1),r.return();i=Of(e,n),n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),G(r)})}function Of(e,t){return e.i.maxDisabledTime===0&&t.code==1011?1:e.i.maxDisabledTime}function ka(e,t){t=t===void 0?!1:t;var n,i,r,o,s,u;return C(function(a){if(a.g==1){if(n=Date.now()/1e3,i=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<i)return a.return(!1);e.R=n}return r=ut,(o=e.h.get(r.ka))&&(wi(o),o.Va&&(o.Va.abort(),o.Va=null),o.pb=null,o.tc=null,o.sc=null,o.Ja=!1,o.jc=!1,o.ld=0,o.Kd=!1,o.Wb=!1,o.ua&&o.ua.ih()),(s=e.h.get(r.Aa))&&(wi(s),s.Va&&(s.Va.abort(),s.Va=null),s.pb=null,s.tc=null,s.sc=null,s.Ja=!1,s.jc=!1,s.ld=0,s.Kd=!1,s.Wb=!1,s.ua&&s.ua.ih()),u=e.g.video.paused,T(a,ym(e.g.Z,Da(e)),2)}return!s||s.Wb||s.Ja||s.qb||Nt(e,s,0),!o||o.Wb||o.Ja||o.qb||Nt(e,o,0),u||e.g.video.play(),a.return(!0)})}function dA(e,t){if(e.T.projection!=t.projection||e.T.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Y("spatialvideoinfo",n)}else n=new Y("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.T=t}}function Rs(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var t=he();if(t.Bb()){if(!t.Mf()){for(t=g(e.h.keys()),n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==ut.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,t=g(n.fullMimeTypes),n=t.next();!n.done;n=t.next())e.add(os(n.value));return e.size>1}}}else{t=g(e.h.keys());for(var n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==ut.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0}return!1}function Qm(e){e.G.Qa(),Rs(e)&&(e.G.D(e.g.video,"waiting",function(){return Uf(e)}),e.G.D(e.g.video,"timeupdate",function(){return Uf(e)}))}function Uf(e){if(Rs(e)){e.K.stop();var t=e.g.nc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&n.g!==null&&(t=n.g-t,t<0||t>1||(e.I=n.g+.1,e.K.ia(t)))}}function hA(e,t,n){if(t.type===pe)return!1;var i=t.pb;if(!i)return!1;var r=n.ba;if(n=i.g!==r.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==r.encrypted&&(n=!1),e.i.crossBoundaryStrategy==="keep"&&i.mimeType&&r.mimeType){var o=ct(Kt(i.mimeType)),s=ct(Kt(i.mimeType));i.mimeType==r.mimeType&&o==s&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,ka(e,!0).then(function(){var u=new Map().set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new Y("boundarycrossed",u))})),n}function Da(e,t){function n(o){if(o.fullMimeTypes&&o.fullMimeTypes.size>1&&e.h.has(o.type)){var s=e.h.get(o.type),u=Dr(e.g.Z,s.type),a=e.g.nc();(s=qm(e,s,a,u))&&s.codecs&&s.mimeType&&(o.codecs=s.codecs,o.mimeType=s.mimeType)}}t=t===void 0?!1:t;var i=new Map,r=e.o.audio;return r&&(n(r),i.set("audio",r)),(r=e.o.video)&&(n(r),i.set("video",r)),t&&e.B&&i.set(pe,e.B),i}function Ra(){}function _f(e,t,n,i,r){var o=r in i,s=o?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,l;for(l in t){var c=r+"."+l,f=o?i[r]:n[l];u||l in n?t[l]===void 0?f===void 0||u?delete e[l]:e[l]=On(f):s?e[l]=t[l]:f.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=On(f)),c=_f(e[l],t[l],f,i,c),a=a&&c):typeof t[l]!=typeof f||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=f.constructor?(qn("Invalid config, wrong type for "+c),a=!1):typeof n[l]=="function"&&n[l].length!=t[l].length?(xe("Unexpected number of arguments for "+c),e[l]=t[l]):e[l]=Array.isArray(e[l])?t[l].slice():t[l]:(qn("Invalid config, unrecognized key "+c),a=!1)}return a}function La(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(r<0);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function yo(e,t){return e&&t}function Zm(e,t){function n(o){for(var s=g(Object.keys(o)),u=s.next();!u.done;u=s.next())if(u=u.value,!(o[u]instanceof HTMLElement))if(r(o[u])&&Object.keys(o[u]).length===0)delete o[u];else{var a=o[u];Array.isArray(a)&&a.length===0||typeof o[u]=="function"?delete o[u]:r(o[u])&&(n(o[u]),Object.keys(o[u]).length===0&&delete o[u])}}function i(o,s){return Object.keys(o).reduce(function(u,a){var l=o[a];return s.hasOwnProperty(a)?l instanceof HTMLElement&&s[a]instanceof HTMLElement?l.isEqualNode(s[a])||(u[a]=l):r(l)&&r(s[a])?(l=i(l,s[a]),(Object.keys(l).length>0||!r(l))&&(u[a]=l)):Array.isArray(l)&&Array.isArray(s[a])?ar(l,s[a])||(u[a]=l):Number.isNaN(l)&&Number.isNaN(s[a])||l!==s[a]&&(u[a]=l):u[a]=l,u},{})}function r(o){return o&&typeof o=="object"&&!Array.isArray(o)}return e=i(e,t),n(e),e}K("shaka.util.ConfigUtils",Ra),Ra.getDifferenceFromConfigObjects=Zm,Ra.convertToConfigObject=La,Ra.mergeConfigObjects=_f,K("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function Wt(){}function ev(e){return e=Jn(e),new nt(e).Eb}function Ls(e,t,n){function i(u){Ht(o).setUint32(s,u.byteLength,!0),s+=4,o.set(se(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new M(2,6,6015);var r;typeof t=="string"?r=Sc(t,!0):r=t,e=Jn(e),e=Sc(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function Bf(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Jn(e).split("skd://").pop(),Ls(e,n,t))}function Pa(e,t){e===2&&(e=t.drmInfo)&&$u(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}K("shaka.drm.FairPlay",Wt),Wt.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&$u(e.keySystem)){try{var n=ze(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=yn(Tn(n)))}},Wt.muxFairPlayRequest=function(e,t){Pa(e,t)},Wt.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&$u(n.keySystem)&&Pa(e,t)}},Wt.conaxFairPlayRequest=function(e,t){Pa(e,t)},Wt.ezdrmFairPlayRequest=function(e,t){Pa(e,t)},Wt.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&$u(e.keySystem)&&(e=se(t.body),e=ui(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=jn("spc="+e))},Wt.muxInitDataTransform=function(e,t,n){return Bf(e,t,n)},Wt.expressplayInitDataTransform=function(e,t,n){return Bf(e,t,n)},Wt.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Jn(e).split("skd://").pop().split("?").shift(),n=b.atob(n);var i=new ArrayBuffer(n.length*2);i=Ip(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return Ls(e,i,t)},Wt.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Jn(e).split(";").pop(),Ls(e,n,t))},Wt.verimatrixInitDataTransform=function(e,t,n){return Bf(e,t,n)},Wt.initDataTransform=Ls,Wt.defaultGetContentId=ev,Wt.isFairPlaySupported=function(){var e;return C(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ue(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ae(t),t.return(!1))})};function Na(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=g(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Na.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||i.channelsCount>2||r.channelsCount>2)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!tv(i,r))&&ar(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||tv(n,i))&&ar(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},Na.prototype.values=function(){return this.g.values()};function tv(e,t){return e.mimeType!=t.mimeType?!1:(e=e.codecs.split(",").map(function(n){return Vi(n)}),t=t.codecs.split(",").map(function(n){return Vi(n)}),ar(e,t))}K("shaka.media.AdaptationSet",Na);function Ps(){this.h=this.g=null}Ps.prototype.configure=function(e){this.g=e},Ps.prototype.getConfiguration=function(){return this.g},Ps.prototype.create=function(e){var t;if(this.g.language){var n=pA(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(o){return o.primary}),t=t.length?t:e),e=gA(t,this.g.role),e.length&&(t=e),e=mA(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=SA(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=xA(t,this.g.hdrLevel),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=i.filter(function(o,s){return o&&i.indexOf(o)===s}),e.length){for(e=g(e),n=e.next();!n.done;n=e.next())if(n=TA(t,n.value),n.length){t=n;break}}this.g.audioLabel&&(e=vA(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=yA(t,this.g.videoLabel),e.length&&(t=e)),e=wA(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.activeAudioCodec].concat(V(this.g.preferredAudioCodecs));if(e=r.filter(function(o,s){return o&&r.indexOf(o)===s}),e.length){for(e=g(e),n=e.next();!n.done;n=e.next())if(n=AA(t,n.value),n.length){t=n;break}}return e=he(),e=this.g.codecSwitchingStrategy=="smooth"&&e.Bb(),this.h=new Na(t[0],t,!e)},Ps.prototype.getLastAdaptationSet=function(){return this.h};function pA(e,t){t=ke(t);var n=Ku(t,e.map(function(i){return Fc(i)}));return n?e.filter(function(i){return n==Fc(i)}):[]}function gA(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function mA(e,t){return e.filter(function(n){return n.video?t?n.video.roles.includes(t):n.video.roles.length==0:!1})}function vA(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function yA(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function TA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function xA(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=he().sd(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function SA(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function wA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function AA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function ja(){}function To(){var e=1/0,t=he();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:_n(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(u,a,l){return b.shakaMediaKeysPolyfill==="apple"&&a=="skd"&&(a=l.serverCertificate,l=ev(u),u=Ls(u,l,a)),u},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";t.Bb()&&(i="smooth");var r={retryParameters:_n(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Oa,manifestPreprocessorTXml:Ua,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Oa,manifestPreprocessorTXml:Ua,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},o={trackSelectionCallback:function(u){return C(function(a){return a.return(u)})},downloadSizeCallback:function(u){var a;return C(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?T(l,navigator.storage.estimate(),3):l.return(!0):(a=l.h,l.return(a.usage+u<a.quota*.95))})},progressCallback:function(u,a){return yo([u,a])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:n,manifest:r,streaming:{retryParameters:_n(),failureCallback:function(u){return yo([u])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(u){return yo([u],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(u,a,l){return yo([u,a,l])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:o,abrFactory:function(){return new qe},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Ps,[null].concat(V(gt.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return o.trackSelectionCallback=function(u){return C(function(a){return a.return(EA(u,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},t.Wa(s)}function nv(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Ai(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return _f(e,t,n||To(),i,"")}function EA(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(u){return!!(u.hdr&&u.hdr=="HLG")}),i=he().sd(n));var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=Ku(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return ke(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&u.height<=480});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=g(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=pe&&n.type!="image"||t.push(n);return t}function Oa(e){return yo([e],e)}function Ua(e){return yo([e],e)}K("shaka.util.PlayerConfiguration",ja),ja.mergeConfigObjects=Ai,ja.createDefaultForLL=nv,ja.createDefault=To;function IA(){this.g=null,this.h=[]}function bf(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=g(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function CA(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=g(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function MA(){this.i=this.h=null,this.g=[]}function Ff(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function _a(){this.C=this.X=NaN,this.l="",this.j=this.si=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.T=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new IA,this.h=new MA}function kA(e,t,n){e.R=t,e.O=n}function iv(e,t,n){e.X=t,e.C=n}function DA(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function rv(e,t){e.j=isNaN(e.j)?t:e.j+t}function RA(e){var t=e.X,n=e.C,i=e.l,r=e.B,o=e.O,s=e.R,u=e.N,a=e.V,l=e.T,c=e.u,f=e.i,h=e.G,p=e.J,m=e.m,v=bf(e.g,"playing"),y=bf(e.g,"paused"),S=bf(e.g,"buffering"),x=e.o,A=e.F,I=e.K,R=e.si,E=e.j,w=e.M,k=e.I,L=e.H,D=CA(e.g),P=[];e=g(e.h.g);for(var N=e.next();!N.done;N=e.next())N=N.value,P.push({timestamp:N.timestamp,id:N.id,type:N.type,fromAdaptation:N.fromAdaptation,bandwidth:N.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:o,droppedFrames:s,corruptedFrames:u,stallsDetected:a,gapsJumped:l,estimatedBandwidth:c,completionPercent:f,loadLatency:h,manifestTimeSeconds:p,drmTimeSeconds:m,playTime:v,pauseTime:y,bufferingTime:S,licenseTime:x,liveLatency:A,maxSegmentDuration:I,manifestSizeBytes:R,bytesDownloaded:E,nonFatalErrorCount:w,manifestPeriodCount:k,manifestGapCount:L,stateHistory:D,switchHistory:P}}function An(e,t,n,i){Ne.call(this),this.N=e,this.V=t,this.Da=i.networkingEngine,this.o=n,this.C=null,this.ya=0,this.Ta=i.md,this.G=i.tk,this.Ua=i.vk,this.g=i.config,this.m=this.H=this.h=null,this.oa=!1,this.I=i.Gk,this.va=!1,this.j=null,this.aa=!1,this.u=null,this.M=new Map,this.xa=!1,this.Fa=i.Fk,this.X=new _a,this.ma=new je,this.B=new je,this.O=null,this.l=!1,this.$=i.lj,this.T=this.i=null,this.R=!1,this.K=[],this.J=[],this.F=!0}Qe(An,Ne);function Ns(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function LA(e){if(e.J)for(var t=g(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function ov(e,t){if(e.O=t,e.R=!0,e.K){t=g(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}d=An.prototype,d.getStartTime=function(){return this.o},d.rd=function(){return this.N},d.Kg=function(){return this.h};function PA(e){return e.va=!0,e.I}d.getStats=function(){return this.X};function NA(e){return e.aa=!0,e.j}d.Rj=function(){return this.i?xr(this.i):null},d.Qj=function(){return this.T?Sr(this.T):null};function jA(e){return e.xa=!0,e.M}d.start=function(){var e=this;(function(){var t;return C(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return ue(n,3),T(n,OA(e),5);case 5:if(zi(e),b.shakaMediaKeysPolyfill==="webkit"){n.A(6);break}return T(n,sv(e),7);case 7:zi(e);case 6:return T(n,_A(e),8);case 8:if(zi(e),!e.$){n.A(9);break}return T(n,BA(e),10);case 10:zi(e);case 9:if(!e.$||!e.j){n.A(11);break}return T(n,bS(e.j),12);case 12:zi(e);case 11:e.B.resolve(),de(n,0);break;case 3:t=ae(n),t instanceof M&&(t.code==7001||t.code==7003)||e.B.reject(t),G(n)}})})()},d.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Ne.prototype.dispatchEvent.call(this,e)},d.onError=function(e){e.severity===2&&(this.B.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Y("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function zi(e){if(e.l)throw new M(2,7,7003)}function Vf(e,t){e.dispatchEvent(new Y("onstatechange",new Map().set("state",t)))}function OA(e){var t,n,i,r,o,s;return C(function(u){switch(u.g){case 1:if(Vf(e,"manifest-parser"),e.m||(e.H=Pp(e.N,e.V),e.m=e.H(),e.m.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,Vf(e,"manifest"),e.h){u.A(2);break}return T(u,e.m.start(e.N,e.Ua),3);case 3:return e.h=u.h,av(e.h),T(u,UA(e),2);case 2:return e.ma.resolve(),n=new Y("manifestparsed",void 0),T(u,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new M(2,4,4036);if(av(e.h),i=Gg(e.G,e.h),!i){u.A(6);break}return r=new Y("trackschanged",void 0),T(u,Promise.resolve(),7);case 7:zi(e),e.dispatchEvent(r);case 6:o=Date.now()/1e3,s=o-t,e.X.J=s,G(u)}})}function sv(e,t){var n,i,r,o;return C(function(s){switch(s.g){case 1:return!e.h||e.j?s.return():(Vf(e,"drm-engine"),e.ya=Date.now()/1e3,e.j=e.Ta(),e.G.h=e.j,e.j.configure(e.g.drm,function(){return e.F}),n=Yu(e.h.variants),i=!0,e.h&&e.h.presentationTimeline&&(i=e.h.presentationTimeline.W()),T(s,Rg(e.j,n,e.h.offlineSessionIds,i),2));case 2:if(zi(e),!t){s.A(3);break}return T(s,e.j.Vb(t),4);case 4:zi(e);case 3:return T(s,Hg(e.G,e.h),5);case 5:if(r=s.h,!r){s.A(0);break}return o=new Y("trackschanged",void 0),T(s,Promise.resolve(),7);case 7:e.dispatchEvent(o),G(s)}})}d.configure=function(e,t){e=La(e,t),Ai(this.g,e)},d.getConfiguration=function(){return On(this.g)};function UA(e){return C(function(t){return e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.i||!e.h.variants.length||e.h.variants.length!=1&&e.h.type!="HLS"?t.A(0):(e.i=Hf(e),e.i?T(t,uv(e.i),0):t.A(0))})}function _A(e){return C(function(t){return t.g==1?!e.i||e.h.variants.includes(e.i)?t.A(0):T(t,bA(e.i),3):(e.i=Hf(e),e.i?T(t,uv(e.i),0):t.A(0))})}function BA(e){var t,n,i,r,o;return C(function(s){return!e.i&&(t=Hf(e))&&(e.i=t),e.i?(n=e.h.presentationTimeline.W(),i=[],r=e.i,r.video&&i.push(Gf(e,r.video,n)),r.audio&&i.push(Gf(e,r.audio,n)),(o=Jr(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&dg(r.audio,o,e.g)&&(i.push(Gf(e,o,n)),e.T=o),T(s,Promise.all(i),0)):s.A(0)})}function Hf(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=Yu(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function Gf(e,t,n){var i,r,o,s,u;return C(function(a){return a.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new wa(i,t,function(l,c,f){return Ca(l,c,f||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,r),t.segmentIndex?a.A(2):T(a,t.createSegmentIndex(),2)):(o=typeof e.o=="number"?e.o:0,s=t.segmentIndex.Xb(o),u=null,s&&(u=s.current(),u||(u=s.next().value)),u||(u=Xn(t.segmentIndex)),u?n?u.ba?T(a,Vm(r,u.ba),0):a.A(0):T(a,Cs(r,u.startTime),0):a.A(0))})}function uv(e){var t,n,i,r;return C(function(o){for(t=[],n=g([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&!r.segmentIndex&&t.push(r.createSegmentIndex());return t.length>0?T(o,Promise.all(t),0):o.A(0)})}function bA(e){var t,n,i,r;return C(function(o){for(t=[],n=g([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&r.segmentIndex&&r.closeSegmentIndex&&t.push(r.closeSegmentIndex());return t.length>0?T(o,Promise.all(t),0):o.A(0)})}d.kl=function(){return this.B},d.destroy=function(){var e=this,t,n,i;return C(function(r){if(r.g==1)return e.l=!0,!e.m||e.oa?r.A(2):T(r,e.m.stop(),2);if(r.g!=4)return e.u&&e.u.release(),e.I&&!e.va&&e.I.release(),!e.j||e.aa?r.A(4):T(r,e.j.destroy(),4);if(e.M.size>0&&!e.xa)for(t=g(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,Wn(i);G(r)})};function av(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}K("shaka.media.PreloadManager",An),An.prototype.destroy=An.prototype.destroy,An.prototype.waitForFinish=An.prototype.kl,An.prototype.getPrefetchedTextTrack=An.prototype.Qj,An.prototype.getPrefetchedVariantTrack=An.prototype.Rj;function Rr(e,t){Ne.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:xo,Uc:function(i,r){return Ei(n,"enter",i,r)}},{kd:js,jd:xo,Uc:function(i,r){return Ei(n,"enter",i,r)}},{kd:Os,jd:xo,Uc:function(i,r){return Ei(n,"enter",i,r)}},{kd:xo,jd:js,Uc:function(i,r){return Ei(n,"exit",i,r)}},{kd:xo,jd:Os,Uc:function(i,r){return Ei(n,"exit",i,r)}},{kd:js,jd:Os,Uc:function(i,r){r?Ei(n,"skip",i,r):(Ei(n,"enter",i,r),Ei(n,"exit",i,r))}},{kd:Os,jd:js,Uc:function(i,r){return Ei(n,"skip",i,r)}}],this.h=new Me,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}Qe(Rr,Ne),Rr.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Ne.prototype.release.call(this)},Rr.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=g(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?js:e>i.endTime?Os:xo;this.g.set(i,o);for(var s=g(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.kd==r&&u.jd==o&&u.Uc(i,t)}}};function Ei(e,t,n,i){t=new Y(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var js=1,xo=2,Os=3;for(var Yi={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},lv=g(Object.keys(Yi)),Kf=lv.next();!Kf.done;Kf=lv.next()){var cv=Kf.value;Yi[cv.toLowerCase()]=Yi[cv]}function fv(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return fv(s,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=Wr,r=e.fontStyle==zr,o=e.textDecoration.includes(di);return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=dv(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=dv(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=g(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function dv(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Xf(e,t){var n=[];e=g(hv(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,V(Xf(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=fv(i,t),n.push(r)}return n}function hv(e){var t=[];e=g(e);for(var n=e.next(),i={};!n.done;i={lg:void 0},n=e.next())i.lg=n.value,t.some((function(r){return function(o){return _u(r.lg,o)}})(i))||t.push(i.lg);return t}function FA(e){function t(i){for(var r=5381,o=i.length;o;)r=r*33^i.charCodeAt(--o);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function pv(e,t){var n=Xf(t),i=[];t=e.cues?Array.from(e.cues):[],n=g(n);for(var r=n.next(),o={};!r.done;o={vd:void 0},r=n.next())o.vd=r.value,!t.some((function(s){return function(u){return u.startTime==s.vd.startTime&&u.endTime==s.vd.endTime&&u.text==s.vd.payload}})(o))&&o.vd.payload&&(r=FA(o.vd))&&i.push(r);for(t=i.slice().sort(function(s,u){return s.startTime!=u.startTime?s.startTime-u.startTime:s.endTime!=u.endTime?s.endTime-u.startTime:"line"in VTTCue.prototype?i.indexOf(u)-i.indexOf(s):i.indexOf(s)-i.indexOf(u)}),t=g(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function Wf(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function dt(e){var t=this;this.i=e,this.l=new Me,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var n=g(t.h.values()),i=n.next();!i.done;i=n.next())i.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,i=t.i.Lc();i=g(i);for(var r=i.next();!r.done;r=i.next()){if(r=r.value,t.h.has(r.id)){var o=t.h.get(r.id);r.active||o.track.mode==="disabled"||(o.track.mode="disabled"),t.h.delete(r.id)}else{o=t.j.ownerDocument.createElement("track"),o.kind=VA(r);var s=o,u=void 0;if(r.label)u=r.label;else if(r.language)if(r.language in Yi)u=Yi[r.language];else{var a=Gu(r.language);a in Yi&&(u=Yi[a]+" ("+r.language+")")}u||(u=r.originalTextId,r.language&&r.language!==r.originalTextId&&(u+=" ("+r.language+")")),s.label=u,r.language in Yi&&(o.srclang=r.language),o.src="data:,WEBVTT",o.track.mode="disabled",t.j.appendChild(o)}n.set(r.id,o),r.active&&(t.g=r.id)}for(i=g(t.h.values()),r=i.next();!r.done;r=i.next())r.value.remove();t.g>-1&&(n.has(t.g)?(i=n.get(t.g).track,i.mode==="disabled"&&(i.mode=t.u?"showing":"hidden")):t.g=-1),t.h=n},this.B=function(){if(!t.o){var n=t.j;t.o=new ge(function(){if(t.o=null,t.j===n){var i=-1,r=!1;if(t.h.has(t.g)){var o=t.h.get(t.g);o.track.mode==="showing"?(i=t.g,r=!0):o.track.mode==="hidden"&&(i=t.g)}if(!r)for(r=g(t.h),o=r.next();!o.done;o=r.next()){var s=g(o.value);if(o=s.next().value,s=s.next().value,s.track.mode==="showing"){i=o;break}else i<0&&s.track.mode==="hidden"&&(i=o)}for(r=g(t.h),o=r.next();!o.done;o=r.next())s=g(o.value),o=s.next().value,s=s.next().value,o!==i&&s.track.mode!=="disabled"&&(s.track.mode="disabled");t.g!==i&&(t.g=i,i>-1&&t.i.oh({id:i})),t.i.uh(i>-1&&t.h.get(i).track.mode==="showing")}}).ia(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}d=dt.prototype,d.configure=function(){},d.remove=function(e,t){if(this.i)this.h.has(this.g)&&Wf(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},d.append=function(e){this.h.has(this.g)&&pv(this.h.get(this.g).track,e)},d.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},d.isTextVisible=function(){return this.u},d.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.Yd()===3)if(t=Array.from(this.i.Ze().textTracks).filter(function(i){return["captions","subtitles","forced"].includes(i.kind)}),e){e=null,t=g(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=g(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){!this.j&&this.i&&this.i.Yd()===2&&(this.j=this.i.Ze(),this.l.za(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())};function VA(e){var t=he();return e.forced&&t.Ha()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}K("shaka.text.NativeTextDisplayer",dt),dt.prototype.enableTextDisplayer=dt.prototype.enableTextDisplayer,dt.prototype.setTextLanguage=dt.prototype.setTextLanguage,dt.prototype.setTextVisibility=dt.prototype.setTextVisibility,dt.prototype.isTextVisible=dt.prototype.isTextVisible,dt.prototype.destroy=dt.prototype.destroy,dt.prototype.append=dt.prototype.append,dt.prototype.remove=dt.prototype.remove,dt.prototype.configure=dt.prototype.configure;function Ct(e,t){for(Ee("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=g(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}d=Ct.prototype,d.configure=function(){},d.remove=function(e,t){return this.g?(Wf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},d.append=function(e){this.g&&pv(this.g,e)},d.destroy=function(){return this.g&&(Wf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},d.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},d.setTextVisibility=function(e){e&&!this.g&&gv(this),this.g&&(this.g.mode=e?"showing":"hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){gv(this)};function gv(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}K("shaka.text.SimpleTextDisplayer",Ct),Ct.prototype.enableTextDisplayer=Ct.prototype.enableTextDisplayer,Ct.prototype.setTextLanguage=Ct.prototype.setTextLanguage,Ct.prototype.setTextVisibility=Ct.prototype.setTextVisibility,Ct.prototype.isTextVisible=Ct.prototype.isTextVisible,Ct.prototype.destroy=Ct.prototype.destroy,Ct.prototype.append=Ct.prototype.append,Ct.prototype.remove=Ct.prototype.remove,Ct.prototype.configure=Ct.prototype.configure;function Mt(){}d=Mt.prototype,d.configure=function(){},d.remove=function(){},d.append=function(){},d.destroy=function(){},d.isTextVisible=function(){return!1},d.setTextVisibility=function(){},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){},K("shaka.text.StubTextDisplayer",Mt),Mt.prototype.enableTextDisplayer=Mt.prototype.enableTextDisplayer,Mt.prototype.setTextLanguage=Mt.prototype.setTextLanguage,Mt.prototype.setTextVisibility=Mt.prototype.setTextVisibility,Mt.prototype.isTextVisible=Mt.prototype.isTextVisible,Mt.prototype.destroy=Mt.prototype.destroy,Mt.prototype.append=Mt.prototype.append,Mt.prototype.remove=Mt.prototype.remove,Mt.prototype.configure=Mt.prototype.configure;function kt(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new ge(function(){n.j.paused||qi(n)}),Us(this),this.l=new Map,this.i=new Me,this.i.D(document,"fullscreenchange",function(){qi(n,!0)}),this.i.D(this.j,"seeking",function(){qi(n,!0)}),this.i.D(this.j,"ratechange",function(){Us(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.u=r/i:n.u=null}),this.F=null,"ResizeObserver"in b&&(this.F=new ResizeObserver(function(){qi(n,!0)}),this.F.observe(this.g)),this.G=new Map}d=kt.prototype,d.configure=function(e){this.C=e,Us(this),qi(this,!0)},d.append=function(e){var t=[].concat(V(this.h));e=g(hv(e));for(var n=e.next(),i={};!n.done;i={mg:void 0},n=e.next())i.mg=n.value,t.some((function(r){return function(o){return _u(o,r.mg)}})(i))||this.h.push(i.mg);this.h.length&&Us(this),qi(this)},d.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},d.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),qi(this,n>this.h.length),this.h.length||Us(this),!0},d.isTextVisible=function(){return this.m},d.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),qi(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},d.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},d.enableTextDisplayer=function(){};function Us(e){e.B&&(e.h.length?e.B.Ea((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function HA(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function mv(e,t,n,i,r){var o=!1,s=[],u=[];t=g(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.l.get(a),c=a.startTime<=i&&a.endTime>i,f=l?l.jj:null;l&&(s.push(l.ng),l.$c&&s.push(l.$c),c||(o=!0,e.l.delete(a),l=null)),c&&(u.push(a),l?HA(e,f)||(o=!0):(GA(e,a,r),l=e.l.get(a),f=l.jj,o=!0)),a.nestedCues.length>0&&f&&mv(e,a.nestedCues,f,i,r),r.pop()}if(o){for(i=g(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(h,p){return h.startTime!=p.startTime?h.startTime-p.startTime:h.endTime-p.endTime}),u=g(u),i=u.next();!i.done;i=u.next())i=e.l.get(i.value),i.$c?(i.$c.contains(n)&&i.$c.removeChild(n),n.appendChild(i.$c),i.$c.appendChild(i.ng)):n.appendChild(i.ng)}}function qi(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=g(e.G.values());for(var i=t.next();!i.done;i=t.next())Ss(i.value);Ss(e.g),e.l.clear(),e.G.clear()}e.m&&mv(e,e.h,e.g,n,[])}}function GA(e,t,n){var i=n.length>1,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&t.nestedCues.length>0;var o=document.createElement(r);if(r!="br"&&XA(e,o,t,n,i),n=null,t.region&&t.region.id){var s=t.region,u=e.u===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==$t?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==$t?"%":"px"),e.G.has(n))n=e.G.get(n);else{r=document.createElement("span");var a=s.heightUnits==$t?"%":"px",l=s.widthUnits==$t?"%":"px",c=s.viewportAnchorUnits==$t?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var f=s.height,h=s.width;s.heightUnits===2&&(f=s.height*5.33,a="%"),s.widthUnits===2&&(h=s.width*u,l="%"),r.style.height=f+a,r.style.width=h+l,s.viewportAnchorUnits===2?(u=s.viewportAnchorY/75*100,a=s.viewportAnchorX/(e.u===4/3?160:210)*100,u-=s.regionAnchorY*f/100,a-=s.regionAnchorX*h/100,r.style.top=u+"%",r.style.left=a+"%"):(r.style.top=s.viewportAnchorY-s.regionAnchorY*f/100+c,r.style.left=s.viewportAnchorX-s.regionAnchorX*h/100+c),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=s+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.G.set(n,r),n=r}}r=o,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.l.set(t,{ng:o,jj:r,$c:n})}function KA(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==bu?n:e==="left"||e==="start"&&t===is||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===is?"line-right":"center"}function XA(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=i.length>1;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return" ".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=zf(n.linePadding,n,e.o),o.paddingRight=zf(n.linePadding,n,e.o),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=WA(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.setAttribute("translate","no"),l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(o.width="100%",o.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(o.width="100%",o.alignItems="end"),o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,i=e.C?e.C.fontScaleFactor:1,(i!==1||n.fontSize)&&(o.fontSize=zf(n.fontSize||"1em",n,e.o,i)),i=n.line,i!=null&&(s=n.lineInterpretation,s==rs&&(s=1,u=16,e.u&&e.u<1&&(u=32),i=i<0?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==vr?(o.width="100%",n.lineAlign==yr?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==yr?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==yr?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,e=KA(n),e=="line-left"?(o.cssFloat="left",n.position!==null&&(o.position="absolute",n.writingMode==vr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%")):e=="line-right"?(o.cssFloat="right",n.position!==null&&(o.position="absolute",n.writingMode==vr?(o.right=100-n.position+"%",o.width="auto"):o.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(o.position="absolute",n.writingMode==vr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%",n.size&&(o.transform="translateX(-50%)")),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==vr?o.width=n.size+"%":o.height=n.size+"%")}function zf(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function WA(e,t){for(var n=e.length-1;n>=0;n--){var i=t(e[n]);if(i||i===0)return i}return null}K("shaka.text.UITextDisplayer",kt),kt.prototype.enableTextDisplayer=kt.prototype.enableTextDisplayer,kt.prototype.setTextLanguage=kt.prototype.setTextLanguage,kt.prototype.setTextVisibility=kt.prototype.setTextVisibility,kt.prototype.isTextVisible=kt.prototype.isTextVisible,kt.prototype.remove=kt.prototype.remove,kt.prototype.destroy=kt.prototype.destroy,kt.prototype.append=kt.prototype.append,kt.prototype.configure=kt.prototype.configure;function zA(e,t){function n(o){for(var s=o,u=g(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(s*1e3%1e3),(o<10?"0":"")+o+":"+(u<10?"0":"")+u+":"+(a<10?"0":"")+a+"."+(s<100?s<10?"00":"0":"")+s}var i=Xf(e);e=`WEBVTT

`,i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+(function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case ei:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""})(r)+`
`,e+=r.payload+`

`;return e}K("shaka.text.WebVttGenerator",function(){});function Yf(e,t){this.g=t,this.j=e,this.m=new Map,this.l=void 0,this.F=!1,this.J=!0,this.u=this.I=!1,this.C=this.B=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.o={},this.i=new Me,this.G=[],this.h=null}Yf.prototype.setMediaElement=function(e){this.h=e,QA(this)},Yf.prototype.configure=function(e){this.g=e,ZA(this)};function YA(e){e.m.clear(),e.F=!1,e.J=!0,e.I=!1,e.u=!1,e.B=0,e.C=0,e.H=0,e.K={request:!1,response:!1,event:!1},vv(e),e.o={},e.h=null,e.i.Qa()}function qA(e,t){e.u=t,e.u?e.l==Ga?e.l=Ka:e.l==Xa&&(e.l=Wa):e.l==Ka?e.l=Ga:e.l==Wa&&(e.l=Xa)}function JA(e,t){if(e.g&&e.g.enabled&&(Dt(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}function $A(e,t,n){try{if(!e.g.enabled)return t;var i=Jf(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=ba;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Va;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=Ev;break e}r=void 0}i.ot=r,i.su=!0;var o=_s(i);return Ba(t,o)}catch(s){return ji("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function QA(e){e.i.D(e.h,"playing",function(){e.C||(e.C=Date.now()),Dt(e,"ps",{dd:"p"})}),e.i.D(e.h,"volumechange",function(){Dt(e,e.h.muted?"m":"um")}),e.i.D(e.h,"play",function(){e.B||(e.B=Date.now(),Dt(e,"ps",{dd:"s"}))}),e.i.D(e.h,"pause",function(){Dt(e,"ps",{dd:"a"})}),e.i.D(e.j,"buffering",function(){Dt(e,"ps",{dd:"w"})}),e.i.D(e.h,"seeking",function(){return Dt(e,"ps",{dd:"k"})}),e.i.D(document,"fullscreenchange",function(){Dt(e,document.fullscreenElement?"pe":"pc")});var t=e.h;(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.i.D(t,"webkitpresentationmodechanged",function(){t.webkitPresentationMode?Dt(e,t.webkitPresentationMode!=="inline"?"pe":"pc"):t.webkitSupportsFullscreen&&Dt(e,t.webkitDisplayingFullscreen?"pe":"pc")}),e.i.D(e.h,"enterpictureinpicture",function(){Dt(e,"pe")}),e.i.D(e.h,"leavepictureinpicture",function(){Dt(e,"pc")}),"documentPictureInPicture"in b&&e.i.D(b.documentPictureInPicture,"enter",function(n){Dt(e,"pe"),e.i.za(n.window,"pagehide",function(){Dt(e,"pc")})}),e.i.D(document,"visibilitychange",function(){document.hidden?Dt(e,"b",{bg:!0}):Dt(e,"b")}),e.i.D(e.j,"complete",function(){Dt(e,"ps",{dd:"e"})})}function ZA(e){vv(e);var t=yv(e);t=g(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value.timeInterval,n===void 0&&(n=dE),n>=1){var i=new ge(function(){return Dt(e,hE)});i.Ea(n),e.G.push(i)}}function vv(e){if(e.G)for(var t=g(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function yv(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Dv&&t.enabled}):[]}function qf(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===kv&&t.enabled===!0}):[]}function Jf(e){return e.g.sessionId||(e.g.sessionId=b.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Dt(e,t,n){if(n=n===void 0?{}:n,t=Object.assign({e:t,ts:Date.now()},n),t=Zf(e,t,Dv),n=e.g.targets,!(e.g.version<td)&&n){var i=yv(e);n=Array.from(new Set([].concat(V(nd),V(lE)))),i=g(i);for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=$f(r.includeKeys||[],n);o.includes(Cv)||o.push(Cv),o=Qf(t,o);var s=r.events||[],u=o.e,a=o.sta;u&&(!cE.includes(u)||!(u!=="ps"||a&&fE.includes(a))||s&&s.length>0&&!s.includes(u))||Tv(e,o,r)}}}function So(e,t,n){if(e.g.enabled){n=Zf(e,n,Mv);var i=xv({mode:Mv,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.o[i]||(e.o[i]={request:1,response:1}),n.sn=e.o[i].request++,i=e.g.includeKeys||[];var r=e.g.version==td?Array.from(new Set([].concat(V(nd),V(uE)))):Iv;i=$f(i,r),n=Qf(n,i),eE(e,n,t,e.g.useHeaders)}}function Tv(e,t,n,i){var r=_n(),o=n.url;if(n.useHeaders){if(t=Av(t),!Object.keys(t).length)return;i&&Object.assign(i.headers,t),i=ot([o],r),Object.assign(i.headers,t)}else{if(t=_s(t),!t)return;o=Ba(o,t),i&&(i.uri=o),i=ot([o],r)}e.j.Yb().request(9,i)}function eE(e,t,n,i){if(i){if(t=Av(t),!Object.keys(t).length)return;Object.assign(n.headers,t)}else{var r=_s(t);if(!r)return;n.uris=n.uris.map(function(o){return Ba(o,r)})}qf(e).length>0||!e.m.has(n)||e.m.delete(n)}function $f(e,t){if(!e||e.length===0)return t;for(var n=g(e),i=n.next();!i.done;i=n.next())t.includes(i.value);return e=e.filter(function(r){return t.includes(r)})}function Qf(e,t){return Object.keys(e).reduce(function(n,i){return t.includes(i)&&(n[i]=e[i]),n},{})}function tE(e){if(e.type===0)return rE;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Va:Fa;if(t=="audio")return ba;if(t=="text")return e.mimeType==="application/mp4"?Ha:ed}}function xv(e){var t=Object.keys(e).sort().reduce(function(n,i){return i!=="enabled"&&(n[i]=e[i]),n},{});return JSON.stringify(t)}function nE(e,t){if(t=e.j.Gc()[t],!t.length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:NaN}function Sv(e,t){if(t=e.j.Gc()[t],!t.length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:0}function iE(e,t){var n=e.j.qc();if(!n.length)return NaN;e=n[0],n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Fa:return e.videoBandwidth||NaN;case ba:return e.audioBandwidth||NaN;default:return e.bandwidth}}function wv(e,t,n){var i=t.segment,r=0;i&&(r=i.endTime-i.startTime),r={d:r*1e3,st:e.j.W()?sE:oE},r.ot=tE(t);var o=r.ot===Fa||r.ot===ba||r.ot===Va||r.ot===Ha;if(t=t.stream){var s=e.j.Pb();if(o&&(r.bl=nE(e,t.type),r.ot!==Ha)){var u=Sv(e,t.type);r.dl=s?u/Math.abs(s):u}if(t.bandwidth&&(r.br=t.bandwidth/1e3),t.segmentIndex&&i){if((s=t.segmentIndex.Xb(i.endTime,!0,s<0))&&(s=s.next().value)&&s!=i){if(n&&!Oi(i.P(),s.P())){var a=s.P()[0];u=new URL(a);var l=new URL(n);if(u.origin!==l.origin)n=a;else{n=u.pathname.split("/").slice(1),a=l.pathname.split("/").slice(1,-1),l=Math.min(n.length,a.length);for(var c=0;c<l&&n[c]===a[c];c++)n.shift(),a.shift();for(;a.length;)a.shift(),n.unshift("..");n=n.join("/")+u.search+u.hash}r.nor=n}!s.startByte&&!s.endByte||i.startByte==s.startByte&&i.endByte==s.endByte||(n=s.startByte+"-",s.endByte&&(n+=s.endByte),r.nrr=n)}s=e.j.Pb()||1,n=Sv(e,t.type)||500,i=(t=t.bandwidth)?t*(i.endTime-i.startTime)/1e3/(n/s/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(i)||(r.rtp=i)}}return o&&r.ot!==Ha&&(r.tb=iE(e,r.ot)/1e3),r}function Zf(e,t,n){Object.assign(t,Jf(e)),t.pr=e.j.Pb();var i=t.ot===Fa||t.ot===Va;return e.I&&i&&(t.bs=!0,t.su=!0,e.I=!1),t.su==null&&(t.su=e.J),e.j.W()&&(i=$v(e.j),t.ltc=i||void 0),document.hidden&&(t.bg=!0),i=e.C&&e.B?e.C-(e.H||e.B):void 0,i==null||e.K[n]||(t.msd=i,e.K[n]=!0),t}function _s(e){function t(f){return n(f/100)*100}function n(f){return Math.round(f)}function i(f){return!Number.isNaN(f)&&f!=null&&f!==""&&f!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(f){return encodeURIComponent(f)},rtp:t,tb:n,ttfb:n,ttlb:n},s=Object.keys(e||{}).sort();s=g(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function Av(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=_s(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function Ba(e,t){return!t||e.includes("offline:")?e:(e=new nt(e),e.g.set("CMCD",t),e.toString())}var Ev="m",ba="a",Fa="v",Va="av",rE="i",ed="c",Ha="tt",td=2,oE="v",sE="l",Ga="d",Ka="ld",Xa="h",Wa="lh";K("shaka.util.CmcdManager.StreamingFormat",{DASH:Ga,Ol:Ka,HLS:Xa,Pl:Wa,dm:"s",OTHER:"o"});var Iv="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),nd="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),uE="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),aE="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),lE=["e","sta"],cE="ps e t c b m um pe pc".split(" "),fE="spawkrfeqd".split(""),dE=10,Cv="ts",hE="t",Mv="request",kv="response",Dv="event";function En(e){this.h=e,this.g=null}d=En.prototype,d.configure=function(e){this.h=e},d.ei=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Pv)?this.g.get(Pv)*1e3:null},d.ci=function(){return this.h.enabled&&this.g&&this.g.has(Lv)?this.g.get(Lv)*1e3:null},d.Tj=function(){return this.h.enabled&&this.g&&this.g.has(Nv)?this.g.get(Nv):null},d.Uj=function(){return this.h.enabled&&this.g&&this.g.has(jv)?this.g.get(jv):null},d.getBandwidthEstimate=function(e){var t=this.ci();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e};function Rv(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}K("shaka.util.CmsdManager",En),En.prototype.getBandwidthEstimate=En.prototype.getBandwidthEstimate,En.prototype.getRoundTripTime=En.prototype.Uj,En.prototype.getResponseDelay=En.prototype.Tj,En.prototype.getEstimatedThroughput=En.prototype.ci,En.prototype.getMaxBitrate=En.prototype.ei;var Lv="etp",Pv="mb",Nv="rd",jv="rtt";function Ov(){this.g=null,this.h=[]}function id(e,t){return C(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.A(2);e.g=t,G(n)})}Ov.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function Uv(e,t,n){return n=n===void 0?Number.EPSILON:n,e===t?!0:(e=Math.abs(e-t),e<=n?!0:n!==Number.EPSILON?Math.abs(e-n)<=Number.EPSILON:!1)}function U(e,t,n){t=t===void 0?null:t,Ne.call(this);var i=this;this.m=Za,this.h=null,this.ze=t,this.$=!1,this.Je=new Me,this.Ae=new Me,this.j=new Me,this.dc=new Me,this.Fd=new Me,this.G=this.H=this.F=this.N=null,this.Ke=0,this.aa=new Ov,this.O=this.Fa=this.X=this.i=this.zc=this.I=this.l=this.we=this.T=this.Nh=this.va=this.K=this.kb=this.ya=this.ye=this.R=this.Ta=this.M=this.ac=null,this.Ua=!1,this.Ee=this.o=null,this.De=1e9,this.Ie=[],this.yc=new Map,this.ob=[],this.$f=-1,this.g=zn(this),this.cg=nv(),this.V=null,this.Le=-1,this.cc=null,this.xa={width:1/0,height:1/0},this.Ce=new Qc(this.g,this.xa,null),this.Ge=[],this.B=null,this.J=this.g.adaptationSetCriteriaFactory(),this.J.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Jd=this.g.preferredTextLanguage,this.Md=this.g.preferredTextRole,this.Ld=this.g.preferForcedSubs,this.Be=[],n&&n(this),this.K=new Yf(this,this.g.cmcd),this.va=new En(this.g.cmsd),this.N=Gv(this),this.ma=this.oa=this.Da=this.C=null,this.eg=!1,this.ag=[],this.dg=new ge(function(){return C(function(r){if(r.g==1)return i.oa?T(r,i.Vb(i.ma,!0),3):r.A(0);if(r.g!=4)return T(r,i.load(i.oa),4);i.eg?i.ma.pause():i.ma.play(),i.oa=null,i.eg=!1,G(r)})}),el&&(this.C=el(),this.C.configure(this.g.ads),this.Fd.D(this.C,"ad-content-pause-requested",function(r){var o,s;return C(function(u){if(u.g==1)return i.dg.stop(),i.oa?u.A(0):(i.ma=i.h,i.eg=i.ee(),o=r.saveLivePosition||!1,s=!0,i.W()&&(s=o),T(u,i.Xh(!0,s),3));i.oa=u.h,G(u)})}),this.Fd.D(this.C,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.oa){var o=i.oa;o.o&&r&&(typeof o.o=="number"?o.o+=r:o.o.setTime(o.o.getTime()+r*1e3))}i.dg.ia(.1)}),this.Fd.D(this.C,"ad-content-attach-requested",function(){return C(function(r){if(r.g==1)return i.h||!i.ma?r.A(0):T(r,i.Vb(i.ma,!0),3);i.ma=null,G(r)})})),tl&&(this.Da=tl(this),this.Da.configure(this.g.queue)),this.Je.D(b,"online",function(){cd(i),i.jh()}),this.Fe=new ge(function(){for(var r=Date.now()/1e3,o=!1,s=!0,u=g(i.i.variants),a=u.next();!a.done;a=u.next())a=a.value,a.disabledUntilTime>0&&a.disabledUntilTime<=r&&(a.disabledUntilTime=0,o=!0),a.disabledUntilTime>0&&(s=!1);s&&i.Fe.stop(),o&&$i(i,!1,void 0,!1,!1)}),this.eb=null,e&&(Ee("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vb(e,!0)),this.u=null}Qe(U,Ne);function za(e){e.T!=null&&(Rp(e.T),e.T.release(),e.T=null)}function pE(e,t,n){n||t.lcevc.enabled?(za(e),e.T==null&&(e.T=new Jo(e.h,e.Nh,t.lcevc,n),e.H&&(e.H.C=e.T))):za(e)}function _e(e,t){return new Y(e,t)}d=U.prototype,d.destroy=function(){var e=this,t;return C(function(n){switch(n.g){case 1:return e.m==Bn?n.return():(za(e),t=e.detach(),e.m=Bn,T(n,t,2));case 2:return T(n,e.qg(),3);case 3:if(e.Je&&(e.Je.release(),e.Je=null),e.Ae&&(e.Ae.release(),e.Ae=null),e.j&&(e.j.release(),e.j=null),e.dc&&(e.dc.release(),e.dc=null),e.Fd&&(e.Fd.release(),e.Fd=null),e.Ee=null,e.g=null,e.B=null,e.ze=null,e.K=null,e.va=null,!e.N){n.A(4);break}return T(n,e.N.destroy(),5);case 5:e.N=null;case 4:e.o&&(e.o.release(),e.o=null),e.Da&&(e.Da.destroy(),e.Da=null),Ne.prototype.release.call(e),G(n)}})};function _v(e,t){dy.set(e,t)}function wo(e,t){e.dispatchEvent(_e("onstatechange",new Map().set("state",t)))}d.Vb=function(e,t){t=t===void 0?!0:t;var n=this,i,r,o;return C(function(s){switch(s.g){case 1:if(n.m==Bn)throw new M(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){s.A(2);break}return T(s,n.detach(),2);case 2:return T(s,rd(n,"attach"),4);case 4:if(s.h)return s.return();if(ue(s,5,6),i||(wo(n,"attach"),r=function(){var u=fd(n,!1);u&&Ao(n,u)},n.Ae.D(e,"error",r),n.h=e,n.K&&n.K.setMediaElement(e)),he(),!t||!ni()||n.H){s.A(6);break}return T(s,od(n),6);case 6:sn(s),n.aa.release(),un(s,0);break;case 5:return o=ae(s),T(s,n.detach(),10);case 10:throw o}})},d.mj=function(e){this.Nh=e},d.detach=function(e){e=e===void 0?!1:e;var t=this;return C(function(n){if(n.g==1){if(t.m==Bn)throw new M(2,7,7e3);return T(n,t.Cc(!1,e),2)}if(n.g!=3)return T(n,rd(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Ae.Qa(),t.h=null),wo(t,"detach"),t.C&&!e&&t.C.release()}finally{t.aa.release()}G(n)})};function rd(e,t){var n;return C(function(i){return i.g==1?(n=++e.Ke,T(i,id(e.aa,t),2)):n!=e.Ke?(e.aa.release(),i.return(!0)):i.return(!1)})}d.Cc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x;return C(function(A){switch(A.g){case 1:return n.m!=Bn&&(n.m=Za),T(A,rd(n,"unload"),2);case 2:return A.h?A.return():(oi(A,3),n.Ua=!1,wo(n,"unload"),za(n),i=n.Be.map(function(I){return I()}),n.Be=[],T(A,Promise.all(i),5));case 5:if(n.dispatchEvent(_e("unloading")),n.ye&&(n.ye.release(),n.ye=null),n.ya&&(n.ya.release(),n.ya=null),n.kb&&(n.kb.release(),n.kb=null),n.h&&(n.j.Qa(),n.dc.Qa()),n.Fe.stop(),n.ac&&(n.ac.release(),n.ac=null),n.Ta&&(n.Ta.stop(),n.Ta=null),!n.I){A.A(6);break}return T(A,n.I.stop(),7);case 7:n.I=null,n.zc=null;case 6:if(n.o&&n.o.stop(),!n.l){A.A(8);break}return T(A,n.l.destroy(),9);case 9:n.l=null;case 8:if(n.M&&(n.M.release(),n.M=null),n.G&&(n.G.release(),n.G=null),b.shakaMediaKeysPolyfill!=="webkit"||!n.F){A.A(10);break}return T(A,n.F.destroy(),11);case 11:n.F=null;case 10:if(!n.H){A.A(12);break}return T(A,n.H.destroy(),13);case 13:n.H=null;case 12:if(n.C&&!t&&n.C.onAssetUnload(),n.oa&&!t&&(n.oa.destroy(),n.oa=null),t||n.dg.stop(),n.K&&YA(n.K),n.va&&(n.va.g=null),!n.u){A.A(14);break}return T(A,n.u.destroy(),15);case 15:n.u=null;case 14:if(n.$=!1,n.h){for(r=g(n.ag),o=r.next();!o.done;o=r.next())s=o.value,s.src.startsWith("blob:")&&URL.revokeObjectURL(s.src),s.remove();n.ag=[],ha(n.h)&&n.h.load()}if(!n.F){A.A(16);break}return T(A,n.F.destroy(),17);case 17:n.F=null;case 16:if(n.eb&&n.X!=n.eb.rd()&&(n.eb.l||n.eb.destroy(),n.eb=null),n.X=null,n.Fa=null,n.R=null,n.i){for(u=g(n.i.variants),a=u.next();!a.done;a=u.next())for(l=a.value,c=g([l.audio,l.video]),f=c.next();!f.done;f=c.next())(h=f.value)&&h.segmentIndex&&h.segmentIndex.release();for(p=g(n.i.textStreams),m=p.next();!m.done;m=p.next())v=m.value,v.segmentIndex&&v.segmentIndex.release()}for(n.g&&n.g.streaming.clearDecodingCache&&(qu.clear(),$r.clear()),n.i=null,n.B=new _a,n.Mh=null,n.cc=null,n.V=null,n.Le=-1,n.Ie=[],y=g(n.yc.values()),S=y.next();!S.done;S=y.next())x=S.value,x.stop();n.yc.clear(),n.ob=[],n.$f=-1,n.N&&n.N.Th(),Bs(n);case 3:sn(A),n.aa.release(),un(A,4);break;case 4:if(he(),e&&ni()&&!n.H&&n.h)return T(A,od(n),0);A.A(0)}})},d.jl=function(e){this.O=e},d.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a,l,c,f,h,p,m,v,y,S;return C(function(x){switch(x.g){case 1:if(i.m==Bn)throw new M(2,7,7e3);if(i.h||!i.ma){x.A(2);break}return T(x,i.Vb(i.ma,!0),3);case 3:i.ma=null;case 2:if(r=null,o="",e instanceof An){if(e.l)throw new M(2,7,7006);r=e,o=r.rd()||""}else o=e||"";return T(x,id(i.aa,"load"),4);case 4:if(i.aa.release(),!i.h)throw new M(2,7,7002);if(!i.X){x.A(5);break}return i.X=o,T(x,i.Cc(!1),5);case 5:if(s=++i.Ke,u=function(){return C(function(A){if(A.g==1)return i.Ke==s?A.A(0):r?T(A,r.destroy(),3):A.A(3);throw new M(2,7,7e3)})},a=function(A,I){return C(function(R){switch(R.g){case 1:return oi(R,2),T(R,id(i.aa,I),4);case 4:return T(R,u(),5);case 5:return T(R,A(),6);case 6:return T(R,u(),7);case 7:r&&i.g&&(r.g=i.g);case 2:sn(R),i.aa.release(),un(R,0)}})},ue(x,7,8),t==null&&r&&(t=r.getStartTime()),i.O=t,i.Ua=!1,i.dispatchEvent(_e("loading")),r){n=r.V,x.A(10);break}if(n){x.A(10);break}return T(x,a(function(){return C(function(A){if(A.g==1)return T(A,Vv(i,o),2);n=A.h,G(A)})},"guessMimeType_"),10);case 10:if(l=!!r,r){ov(r,i),i.B=r.getStats(),x.A(13);break}return T(x,bv(i,o,t,n,!0,i.g),14);case 14:(r=x.h)?(r.F=!1,ov(r,i),i.B=r.getStats(),r.start(),r.B.catch(function(){})):i.B=new _a;case 13:return c=!r,f=Date.now()/1e3,i.B=r?r.getStats():new _a,i.X=o,i.Fa=n||null,Bs(i),h=function(){var A=i.h?i.h.buffered:null;return{start:rm(A)||0,end:da(A)||0}},i.ya=new Is(h),i.ya.addEventListener("regionadd",function(A){sd(i,A.region,"metadataadded")}),c?T(x,a(function(){return C(function(A){return T(A,yE(i,n),0)})},"initializeSrcEqualsDrmInner_"),25):(i.kb=new Is(h),T(x,a(function(){return C(function(A){if(A.g==1)return T(A,Promise.race([r.ma,r.B]),2);i.zc=r.H;var I=r;I.oa=!0,i.I=I.m,i.i=r.Kg(),G(A)})},"waitForFinish"),17));case 17:if(i.H){x.A(18);break}return T(x,a(function(){return C(function(A){return T(A,od(i),0)})},"initializeMediaSourceEngineInner_"),18);case 18:return i.i&&i.i.textStreams.length&&(i.u.enableTextDisplayer?i.u.enableTextDisplayer():Ee("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),T(x,a(function(){return C(function(A){return T(A,r.B,0)})},"waitForFinish"),20);case 20:if(i.g=r.getConfiguration(),i.Ce=r.G,i.I&&i.I.setMediaElement&&i.h&&i.I.setMediaElement(i.h),i.ye=PA(r),i.we=r.Fa,(p=r.C)&&(i.J=p),l&&i.h&&i.h.nodeName==="AUDIO"&&(gE(i),i.configure("manifest.disableVideo",!0)),r.j){x.A(21);break}return T(x,a(function(){return C(function(A){return T(A,sv(r,i.h),0)})},"drmEngine_.init"),21);case 21:return i.F=NA(r),T(x,a(function(){return C(function(A){return T(A,i.F.Vb(i.h),0)})},"drmEngine_.attach"),23);case 23:return m=i.g.abrFactory,i.o&&i.Ee==m||(i.Ee=m,i.o&&i.o.release(),i.o=m(),typeof i.o.setMediaElement!="function"&&(Ee("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(Ee("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(Ee("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){}),i.o.configure(i.g.abr)),v=jA(r),y=r.i,T(x,a(function(){return C(function(A){return T(A,vE(i,f,y,v),0)})},"loadInner_"),24);case 24:LA(r),i.Fa&&he().dj()&&Vu(i.Fa)&&ww(i.H,i.X,i.Fa),x.A(16);break;case 25:return T(x,a(function(){return C(function(A){return T(A,TE(i,f,n),0)})},"srcEqualsInner_"),16);case 16:i.dispatchEvent(_e("loaded"));case 8:if(sn(x),!r){x.A(27);break}return T(x,r.destroy(),27);case 27:i.eb=null,un(x,0);break;case 7:if(S=ae(x),!S||S.code==7e3){x.A(29);break}return T(x,i.Cc(!1),29);case 29:throw S}})};function gE(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}d.gj=function(e,t,n){e=e===void 0?!0:e,t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this,r;return C(function(o){return o.g==1?T(o,Bv(i,n),2):o.g!=3?(r=o.h,T(o,i.Cc(e,t),3)):o.return(r)})},d.Xh=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return C(function(r){return r.g==1?T(r,Bv(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function Bv(e,t){t=t===void 0?!1:t;var n,i,r;return C(function(o){if(o.g==1)return n=null,e.i&&e.I&&e.zc&&e.X&&e.g?(i=e.h.currentTime,t||(i=null),T(o,Fv(e,e.X,i,e.Fa,e.g,!0,!1),3)):o.A(2);if(o.g!=2){n=o.h,e.Ge.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(r=e.l?e.l.o:null)&&(n.i=r);var s=n,u=e.I,a=e.zc;s.h=e.i,s.m=u,s.H=a,n.C=e.J,n.start(),e.i=null,e.I=null,e.zc=null,e.o=null,e.Ee=null}return o.return(n)})}d.preload=function(e,t,n,i){t=t===void 0?null:t;var r=this,o,s;return C(function(u){return u.g==1?(o=zn(r),Ai(o,i||r.g,zn(r)),T(u,bv(r,e,t,n,!1,o),2)):((s=u.h)?s.start():Ao(r,new M(2,7,7005)),u.return(s))})},d.qg=function(){var e=this,t,n,i,r;return C(function(o){for(t=[],n=g(e.Ge),i=n.next();!i.done;i=n.next())r=i.value,r.l||t.push(r.destroy());return e.Ge=[],T(o,Promise.all(t),0)})};function bv(e,t,n,i,r,o){r=r===void 0?!1:r;var s,u,a;return C(function(l){return l.g==1?i?l.A(2):T(l,Vv(e,t),3):(l.g!=2&&(i=l.h),mE(e,i)?l.return(null):(s=o||e.g,u=!1,r&&e.h&&e.h.nodeName==="AUDIO"&&(u=!0),a=Fv(e,t,n,i||null,s,!r,u),a=r?a.then(function(c){return c.F=!1,c}):a.then(function(c){return e.Ge.push(c),c}),l.return(a)))})}function Fv(e,t,n,i,r,o,s){o=o===void 0?!0:o,s=s===void 0?!1:s;var u,a,l,c,f,h,p,m,v,y,S,x,A,I,R;return C(function(E){return E.g==1?(u=null,a=On(r),s&&(a.manifest.disableVideo=!0),l=function(){return u.R&&u.l?null:u},c=function(){return l()?l().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?E.A(2):(f=he(),T(E,f.lc(),3))):(E.g!=2&&(h=E.h,e.xa.width=h.width,e.xa.height=h.height),p=new Qc(a,e.xa,null),m={networkingEngine:e.N,filter:function(w){var k,L;return C(function(D){if(D.g==1)return T(D,Hg(p,w),2);if(D.g!=4)return k=D.h,k?(L=_e("trackschanged"),T(D,Promise.resolve(),4)):D.A(0);u.dispatchEvent(L),G(D)})},makeTextStreamsForClosedCaptions:function(w){return PE(e,w)},onTimelineRegionAdded:function(w){Af(u.I,w)},onEvent:function(w){return u.dispatchEvent(w)},onError:function(w){return u.onError(w)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&u.R&&e.l.updateDuration()},newDrmInfo:function(w){var k=u.j,L=k?k.g:null;L&&k.B&&Xg(p,L.keySystem,w)},onManifestUpdated:function(){var w=new Map().set("isLive",e.W());u.dispatchEvent(_e("manifestupdated",w)),Ns(u,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(w,k,L,D){var P=w;(w=="com.apple.hls.interstitial"||w=="com.apple.hls.overlay")&&(P="com.apple.quicktime.HLS",w={startTime:k,endTime:L,values:D},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,w)),D=g(D),w=D.next();for(var N={};!w.done;N={ah:void 0},w=D.next())N.ah=w.value,N.ah.name!="ID"&&Ns(u,!1,(function(_){return function(){ud(e,k,L,P,_.ah)}})(N))},disableStream:function(w){return e.disableStream(w,e.g.streaming.maxDisabledTime)},addFont:function(w,k){return e.addFont(w,k)}},v=new Is(function(){return e.Ra()}),v.addEventListener("regionadd",function(w){var k=w.region;Vs(e,"timelineregionadded",k,u),Ns(u,!1,function(){e.C&&(e.C.onDashTimedMetadata(k),e.C.onDASHInterstitialMetadata(e,e.h,k))})}),y=null,a.streaming.observeQualityChanges&&(y=new xa(function(){return e.Gc()}),y.addEventListener("qualitychange",function(w){ay(e,w.quality,w.position)}),y.addEventListener("audiotrackchange",function(w){ay(e,w.quality,w.position,!0)})),S=!0,x={vc:e.N,onError:function(w){return u.onError(w)},xf:function(w){Ns(u,!0,function(){e.F&&jE(e,w)})},onExpirationUpdated:function(w,k){var L=_e("expirationupdated");u.dispatchEvent(L),(L=u.m)&&L.onExpirationUpdated&&L.onExpirationUpdated(w,k)},onEvent:function(w){u.dispatchEvent(w),w.type=="drmsessionupdate"&&S&&(S=!1,w=Date.now()/1e3-u.ya,(e.B||u.getStats()).m=w,e.T&&Rp(e.T))}},A=Gv(e,l),wg(e.N,A),I=function(){return e.md(x)},R={config:a,vk:m,Gk:v,Fk:y,md:I,tk:p,networkingEngine:A,lj:o},u=new An(t,i,n,R),E.return(u))})}function Vv(e,t){var n,i,r,o;return C(function(s){return s.g==1?(n=e.g.manifest.retryParameters,T(s,go(t,e.N,n),2)):(i=s.h,i=="application/x-mpegurl"&&(r=he(),r.Ha()==="WEBKIT"&&(i="application/vnd.apple.mpegurl")),i=="video/quicktime"&&(o=he(),o.Ha()==="CHROMIUM"&&(i="video/mp4")),s.return(i))})}function mE(e,t){if(!ni(he()))return!0;if(t){if((e.h||Ir()).canPlayType(t)=="")return!1;if(!ni(he())||!Hr.has(t))return!0;if(Vu(t))return he().Ha()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function Ya(e,t){var n=e.g.textDisplayFactory;e.Mh!==n||t!==void 0&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):Ee("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Ee("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&Lw(e.H,e.u),e.Mh=n,e.l&&iA(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function od(e){var t,n,i;return C(function(r){if(r.g==1)return he(),wo(e,"media-source"),e.g.mediaSource.useSourceElements&&ha(e.h),Ya(e),t=ME(e.h,e.u,{Lj:function(){return e.keySystem()},onMetadata:function(o,s,u){o=g(o);for(var a=o.next();!a.done;a=o.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+s,c=u;c&&l>c&&(c=l);for(var f=g(a.frames),h=f.next();!h.done;h=f.next())ud(e,l,c,"org.id3",h.value);e.C&&e.C.onHlsTimedMetadata(a,l)}},Ak:function(o){e.kb&&Af(e.kb,{schemeIdUri:o.schemeIdUri,startTime:o.startTime,endTime:o.endTime,id:String(o.id),emsg:o})},onEvent:function(o){return e.dispatchEvent(o)},Ck:function(){e.I&&e.I.update&&e.I.update()}},e.T,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Fa=i,T(r,t.M,2);e.H=t,G(r)})}function Hv(e,t,n){function i(){return ad(e)}if(e.j.D(t,"playing",i),e.j.D(t,"pause",i),e.j.D(t,"ended",i),e.j.D(t,"ratechange",function(){var o=e.h.playbackRate;o!=0&&(e.M&&(e.M.set(o),e.m==Et&&e.o.playbackRateChanged(o),Zv(e,o)),o=_e("ratechange"),e.dispatchEvent(o))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Ii(e),Bt(e)}),e.j.D(t.remote,"connecting",function(){return Bt(e)}),e.j.D(t.remote,"disconnect",function(){return C(function(o){if(o.g==1)return e.l&&t.remote.state=="disconnected"?T(o,ka(e.l),3):o.A(2);o.g!=2&&Ii(e),Bt(e),G(o)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Bt(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Bt(e)}),e.j.D(t.audioTracks,"change",function(){return Bt(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Bt(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Bt(e)}),e.j.D(t.videoTracks,"change",function(){return Bt(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.ze&&Ya(e,!0)}),t.textTracks){var r=function(){e.m===nn&&e.u instanceof dt&&Ii(e),Bt(e)};e.j.D(t.textTracks,"addtrack",function(o){if(o.track)switch(o=o.track,o.kind){case"metadata":wE(e,o);break;case"chapters":AE(e,o);break;default:r()}}),e.j.D(t.textTracks,"removetrack",r),e.j.D(t.textTracks,"change",r)}t.preload!="none"&&e.j.za(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function vE(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j;return C(function(O){switch(O.g){case 1:for(wo(e,"load"),r=e.h,e.M=new Es({$e:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},sh:function(F){r.playbackRate=F},Ai:function(F){r.currentTime+=F}}),Hv(e,r,t),("onchange"in b.screen)&&e.j.D(b.screen,"change",function(){if(e.J.getConfiguration){var F=e.J.getConfiguration();F.hdrLevel=="AUTO"?Ji(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(F.hdrLevel="AUTO",e.J.configure(F),Ji(e))}}),o=!1,s=g(e.i.variants),u=s.next();!u.done;u=s.next())a=u.value,(l=a.video&&a.video.dependencyStream)&&(o=Lp(l));pE(e,e.g,o),e.Jd=e.g.preferredTextLanguage,e.Md=e.g.preferredTextRole,e.Ld=e.g.preferForcedSubs,dd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(F,H,Q){e.i&&e.l&&F!=e.l.o&&bs(e,F,!0,H===void 0?!1:H,Q===void 0?0:Q)}),e.o.setMediaElement(r),e.o.setCmsdManager(e.va),e.l=kE(e),e.l.configure(e.g.streaming),e.m=Et,e.dispatchEvent(_e("streaming")),c=n;case 2:for((h=e.l.o)||c||(c=ty(e,!0)),p=[],f=h||c,m=g([f.video,f.audio]),v=m.next();!v.done;v=m.next())(y=v.value)&&!y.segmentIndex&&(p.push(y.createSegmentIndex()),y.dependencyStream&&p.push(y.dependencyStream.createSegmentIndex()));if(!(p.length>0)){O.A(4);break}return T(O,Promise.all(p),4);case 4:if(!f||f.disabledUntilTime!=0){O.A(2);break}if(Ji(e),e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(f),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.cg):xe("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(qA(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),JA(e.K,t*1e3)),dd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),eA(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Ua=!0,e.dispatchEvent(_e("canupdatestarttime")),S=function(F){e.G=EE(e,F),e.ac=IE(e,F),Kv(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(x=e.O,x==null&&e.i.startTime&&(x=e.i.startTime),S(x)),h){O.A(7);break}if(!e.g.streaming.startAtSegmentBoundary){O.A(8);break}return A=e.i.presentationTimeline,e.O instanceof Date&&(R=A.m||A.i,E=e.O.getTime()/1e3-R,E!=null&&(I=E)),I==null&&(I=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(I=e.i.startTime),w=A.Zb(),k=A.Hb(),I<w?I=w:I>k&&(I=k),T(O,NE(c,I),9);case 9:L=O.h,S(L);case 8:bs(e,c,!0,!1,0);case 7:return e.G.ready(),D=e.Lc().find(function(F){return F.active}),D||((P=Jr(e.i.textStreams,e.Jd,e.Md,e.Ld)[0]||null)&&Ff(e.B.h,P,!0),c&&(P?(dg(c.audio,P,e.g)&&(e.$=!0),e.$&&e.u.setTextVisibility(!0)):(e.$=!1,e.u.setTextVisibility(!1)),sy(e)),P&&(e.g.streaming.alwaysStreamText||e.Rg())&&(Aa(e.l,P),Fs(e))),T(O,e.l.start(i),10);case 10:e.g.abr.enabled&&(e.o.enable(),uy(e)),Bt(e),e.i.variants.some(function(F){return F.primary}),((N=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(_=function(){return ey(e)},e.j.D(r,"timeupdate",_)),N||(B=function(){return Qa(e)},e.j.D(r,"timeupdate",B),Qa(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(j=function(){var F;return C(function(H){if(H.g==1)return F=e.Ra().end-e.h.currentTime,isNaN(F)||!(F<=e.g.streaming.preloadNextUrlWindow)?H.A(0):(e.j.Ma(r,"timeupdate",j),T(H,e.preload(e.i.nextUrl),4));e.eb=H.h,G(H)})},e.j.D(r,"timeupdate",j)),e.j.D(r,"ended",function(){e.load(e.eb||e.i.nextUrl)}))),e.C&&e.C.onManifestUpdated(N),G(O)}})}function yE(e,t){var n,i,r;return C(function(o){return o.g==1?(n=Date.now()/1e3,i=!0,e.F=e.md({vc:e.N,onError:function(s){Ao(e,s)},xf:function(){},onExpirationUpdated:function(){var s=_e("expirationupdated");e.dispatchEvent(s)},onEvent:function(s){e.dispatchEvent(s),s.type=="drmsessionupdate"&&i&&(i=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),r=hg([t]),e.F.O=!0,T(o,Rg(e.F,[r],[]),2)):T(o,e.F.Vb(e.h),0)})}function TE(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m;return C(function(v){switch(v.g){case 1:if(wo(e,"src-equals"),i=e.h,e.G=new Lm(i),r=!1,e.Be.push(function(){r=!0}),e.dispatchEvent(_e("canupdatestarttime")),e.O!=null&&e.G.Zf(e.O),e.ac=CE(e,e.O||0),e.M=new Es({$e:function(){return i.playbackRate},Tc:function(){return i.defaultPlaybackRate},sh:function(y){i.playbackRate=y},Ai:function(y){i.currentTime+=y}}),Kv(e,i,!0),i.textTracks&&(Ya(e),o=function(y){if(!(e.u instanceof dt)){var S=qa(e).find(function(x){return x.mode!=="disabled"});S&&(S.mode=y?"showing":"hidden"),e.u instanceof Ct&&(S=DE(e))&&(S.mode=!y&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(i,"enterpictureinpicture",function(){return o(!0)}),e.j.D(i,"leavepictureinpicture",function(){return o(!1)}),i.remote?(e.j.D(i.remote,"connect",function(){return o(!1)}),e.j.D(i.remote,"connecting",function(){return o(!1)}),e.j.D(i.remote,"disconnect",function(){return o(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return o(!1)}),s=i,(s.webkitPresentationMode||s.webkitSupportsFullscreen)&&e.j.D(s,"webkitpresentationmodechanged",function(){s.webkitPresentationMode?o(s.webkitPresentationMode!=="inline"):s.webkitSupportsFullscreen&&o(s.webkitDisplayingFullscreen)})),Hv(e,i,t),u=$A(e.K,e.X,n),!u.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(u+="#t=",e.g.playRangeStart>0&&(u+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(u+=","+e.g.playRangeEnd)),!e.H){v.A(2);break}return T(v,e.H.destroy(),3);case 3:e.H=null;case 2:return ha(i),i.src=u,a=he(),a.Oa()=="TV"&&i.load(),i.preload!="none"&&!i.autoplay&&Vu(n)&&a.Ha()==="WEBKIT"&&i.load(),e.m=nn,e.dispatchEvent(_e("streaming")),l=function(){return new Promise(function(y){var S=new ge(y);e.j.D(i.textTracks,"change",function(){return S.ia(.5)}),S.ia(.5)})},c=new je,po(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){return C(function(y){if(y.g==1)return e.G.ready(),e.Fa&&Vu(e.Fa)?T(y,l(),3):(c.resolve(),y.A(0));c.resolve(),G(y)})}),po(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var y,S,x,A,I;return C(function(R){if(R.g==1)return T(R,l(),2);if(r)return R.return();if(xE(e),y=qa(e),y.some(function(E){return E.mode==="showing"})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof dt))for(y.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Ee("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),S=!1,x=g(y),A=x.next();!A.done;A=x.next())I=A.value,I.mode!=="disabled"&&(S?(I.mode="disabled",xe("Found more than one enabled text track, disabling it",I)):(Jv(e,I),S=!0));SE(e),G(R)})}),i.error?c.reject(fd(e)):i.preload=="none"&&(xe('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.j.za(i,"error",function(){c.reject(fd(e))}),T(v,Hu(e.g.streaming.loadTimeout,c),4);case 4:((f=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return ey(e)},e.j.D(i,"timeupdate",h)),f||(p=function(){return Qa(e)},e.j.D(i,"timeupdate",p),Qa(e)),e.C&&(e.C.onManifestUpdated(f),f&&(m=e.Ra().end,e.j.D(i,"progress",function(){var y=e.Ra().end;m!=y&&(e.C.onManifestUpdated(e.W()),m=y)}))),e.Ua=!0,G(v)}})}function xE(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Qi(t,e.g.preferredAudioRole)}function SE(e){var t=e.g.preferredTextLanguage;t!=""&&e.nh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function wE(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var i=g(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,ud(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){i=[],r=g(t.cues);for(var o=r.next(),s={};!o.done;s={Ec:void 0},o=r.next())s.Ec=o.value,s.Ec.type=="com.apple.quicktime.HLS"&&s.Ec.startTime!=null&&(o=i.find((function(u){return function(a){return a.startTime==u.Ec.startTime&&a.endTime==u.Ec.endTime}})(s)),o||(o={startTime:s.Ec.startTime,endTime:s.Ec.endTime,values:[]},i.push(o)),o.values.push(s.Ec.value));for(i=g(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.C&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}});var n=new ge(function(){var i=RE(e);i=g(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Kb().ia(.5);e.Be.push(function(){n.stop()})}}function sd(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(_e(n,t))}function ud(e,t,n,i,r){e.ya&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),Af(e.ya,t))}function AE(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ge(function(){t.mode="hidden"}).Kb().ia(.5);e.Be.push(function(){n.stop()})}}d.Kk=function(){for(var e=this.aa;e.g;)e.release()},d.md=function(e){return new sa(e)};function Gv(e,t){function n(o){t()?t().dispatchEvent(o):e.dispatchEvent(o)}function i(o){t()?Ns(t(),!0,o):o()}t||(t=function(){return null});var r=new Ke(function(o,s,u,a,l){i(function(){e.o&&e.o.segmentDownloaded(o,s,u,a,l)})},function(o,s,u){s=new Map().set("headers",o).set("request",s).set("requestType",u),n(_e("downloadheadersreceived",s)),i(function(){if(e.va){var a=e.va;if(a.h.enabled){var l=o["cmsd-static"];if(l)try{var c=new Map,f=l.split(",");for(l=0;l<f.length;l++){var h=f[l].split("=");c.set(h[0],Rv(h[1]))}}catch{}if(c=o["cmsd-dynamic"]){e:{try{var p=new Map,m=c.split(";");for(c=1;c<m.length;c++){var v=m[c].split("=");p.set(v[0],Rv(v[1]))}var y=p;break e}catch{y=null;break e}y=void 0}y&&(a.g=y)}}}})},function(o,s){o=new Map().set("request",o).set("response",s),n(_e("downloadcompleted",o))},function(o,s,u,a){o=new Map().set("request",o).set("error",s).set("httpResponseCode",u).set("aborted",a),n(_e("downloadfailed",o))},function(o,s,u){i(function(){if(e.K){var a=e.K,l=u;if(l=l===void 0?{}:l,a.g.enabled)if(s.method==="HEAD")So(a,s,{});else switch(o){case 0:try{if(a.g.enabled){if(l.type){e:{switch(l.type){case 4:var c=a.u?Ka:Ga;break e;case 3:case 2:c=a.u?Wa:Xa;break e;case 5:c="s";break e}c=void 0}a.l=c}So(a,s,{ot:Ev,su:!a.F})}}catch(h){ji("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",h)}break;case Sn:try{if(a.g.enabled){var f=wv(a,l,s.uris[0]);f.ts=Date.now(),a.m.has(s)&&a.m.delete(s),a.m.set(s,f.ts),So(a,s,f)}}catch(h){ji("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",h)}break;case 2:case 5:case 6:So(a,s,{ot:"k"});break;case 4:So(a,s,{ot:"o"})}}})},function(o,s,u,a){(o=t()?t().m:e.I)&&o.banLocation&&o.banLocation(a)},function(o,s,u){if(s.data){var a=s.data.byteLength,l=t()?t().getStats():e.B;if(l&&(rv(l,a),o===0&&(l.si=a)),a=e.K,u=u===void 0?{}:u,qf(a).length!==0)switch(o){case Sn:try{var c=wv(a,u,s.uri);s.originalRequest&&s.originalRequest.timeToFirstByte!=null&&(c.ttfb=s.originalRequest.timeToFirstByte),s.timeMs!=null&&(c.ttlb=s.timeMs);var f=s.originalUri||s.uri;if(f.includes("CMCD="))try{var h=new URL(f);h.searchParams.delete("CMCD");var p=h.toString()}catch{p=f}else p=f;c.url=p,a.m.has(s.originalRequest)?(c.ts=a.m.get(s.originalRequest),a.m.delete(s.originalRequest)):c.ts||(c.ts=Date.now());var m=qf(a);if(m.length!==0){var v=a.g.version==td?Array.from(new Set([].concat(V(nd),V(aE)))):Iv;c.rc=s.status||0;var y=Zf(a,c,kv);s.headers&&s.headers["CMSD-Static"]&&(y.cmsds=btoa(s.headers["CMSD-Static"])),s.headers&&s.headers["CMSD-Dynamic"]&&(y.cmsdd=btoa(s.headers["CMSD-Dynamic"]));for(var S=g(m),x=S.next();!x.done;x=S.next()){var A=x.value,I=$f(A.includeKeys||[],v),R=xv(A);a.o[R]||(a.o[R]={request:1,response:1}),y.sn=a.o[R].response++;var E=Qf(y,I);Tv(a,E,A,s)}}}catch(w){ji("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",w)}}}});return r.configure(e.g.networking),r}function EE(e,t){return new jm(e.h,e.i,e.g.streaming,t,function(){e.ac&&bm(e.ac,!e.G.Kh()),e.l&&e.l.bd(),e.R&&ti(e,"seeking")},function(n){return e.dispatchEvent(n)})}function IE(e,t){var n=e.W()||typeof t=="number"&&t>0;t=new Rr(e.ye,n),t.addEventListener("enter",function(o){Vs(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Vs(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var s=o.region;o.seeking||(Vs(e,"timelineregionenter",s),Vs(e,"timelineregionexit",s))});var i=new Rr(e.ya,n);i.addEventListener("enter",function(o){sd(e,o.region,"metadata")}),n=new Rr(e.kb,n),n.addEventListener("enter",function(o){o=new Map().set("detail",o.region.emsg),e.dispatchEvent(_e("emsg",o))});var r=new wf(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.we&&r.g.add(e.we),r}function CE(e,t){t=new Rr(e.ya,t instanceof Date||t>0),t.addEventListener("enter",function(i){sd(e,i.region,"metadata")});var n=new wf(e.h);return n.g.add(t),n}function Kv(e,t,n){e.R=new JS,$c(e.R,Ar),Xv(e),Bs(e),e.Ta=new ge(function(){ti(e)}),e.g.streaming.rebufferingGoal&&e.Ta.Ea(.25),e.j.D(t,"waiting",function(){return ti(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return ti(e,"canplaythrough")}),e.j.D(t,"playing",function(){return ti(e,"playing")}),e.j.D(t,"seeked",function(){return ti(e,"seeked")}),n&&(e.j.D(t,"stalled",function(){return ti(e,"stalled")}),e.j.D(t,"progress",function(){return ti(e,"progress")}),e.j.D(t,"timeupdate",function(){return ti(e,"timeupdate")}))}function Xv(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(io,Math.min(.5,t/2)).set(Ar,t)}function ti(e,t){if(e.g.streaming.rebufferingGoal){t=e.H?Mr(e.H):!1,t=e.ee()||t||e.G.ni();var n=om(e.h.buffered,e.h.currentTime),i=e.R,r=i.i.get(i.g);$c(i,t||n>=r&&n>0?io:Ar)&&Bs(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=Ar;break;case"canplaythrough":case"playing":case"seeked":n=io}n!==void 0&&$c(e.R,n)&&Bs(e)}}function ME(e,t,n,i,r){return new dm(e,t,n,r,i)}function kE(e){return new Xm(e.i,{nc:function(){return e.G?e.G.Od():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Pb:function(){return e.Pb()},video:e.h,Z:e.H,vc:e.N,onError:function(t){return Ao(e,t)},onEvent:function(t){return e.dispatchEvent(t)},yf:function(t,n,i){var r=t.startTime,o=t.endTime,s=n.type;if(s!=pe){if(e.G){e.G.Ci();var u=hf(e.H,s);!e.W()&&e.h.paused&&!e.h.seeking&&u!=null&&u>0&&e.G.Od()<u&&!Uv(e.G.Od(),u,.001)&&e.G.Zf(u)}ti(e)}i=new Map().set("start",r).set("end",o).set("contentType",s).set("isMuxed",i),e.dispatchEvent(_e("segmentappended",i)),e.o&&n.fastSwitching&&t.Xc&&t.ge&&e.o.trySuggestStreams()},Bk:function(t,n){(n=n.xd)&&e.we&&Kw(e.we,n,t)},Rh:function(t,n){var i=e.F;if(i.h.parseInbandPsshEnabled&&!i.H&&["audio","video"].includes(t)){t=new Yc(se(n)),n=0;for(var r=g(t.data),o=r.next();!o.done;o=r.next())n+=o.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=g(t.data),o=t.next();!o.done;o=t.next())o=o.value,n.set(o,r),r+=o.length;hs(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)},$k:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ge)}})}d.configure=function(e,t){var n=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=La(e,t)),"preferredVariantRole"in e&&(Ee("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ee("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ee("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Ee("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var i=he();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&i.Ha()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Ee("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),i=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=i),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){i=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-i)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=i+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ee("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ee("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ee("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ee("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ee("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ee("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ee("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ee("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ee("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var o=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return o},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Ee("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Ee("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Ee("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Ee("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Ee("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Ee("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Ee("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Ee("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Ee("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Ee("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){i=!1;for(var s in e.drm.advanced){var u=e.drm.advanced[s];r=u.videoRobustness,u=u.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[r],i=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[u],i=!0)}i&&Ee("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Ee("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Ee("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Ee("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),s=Ai(this.g,e,zn(this)),Wv(this,n),s},d.uj=function(e){this.cg=e};function Wv(e,t){if(e.Ce=new Qc(e.g,e.xa,e.F),e.I){var n=On(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Bn&&Kg(e.Ce,e.i)&&Bt(e)}catch(r){Ao(e,r)}e.o&&Ji(e),n=e.l.o,!n||n.allowedByApplication&&n.allowedByKeySystem||$i(e)}if(e.N&&e.N.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Fa=e.g.manifest.segmentRelativeVttTiming),e.u&&Ya(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),uy(e)),e.R&&Xv(e),e.Ta&&(e.g.streaming.rebufferingGoal?e.Ta.Ea(.25):e.Ta.stop()),e.i&&dd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.va&&e.va.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==Et&&e.J.getConfiguration){n=e.J.getConfiguration();var i=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,i=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,i=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,i=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,i=!0),i&&(e.J.configure(n),$i(e))}}d.getConfiguration=function(){var e=zn(this);return Ai(e,this.g,zn(this)),e},d.Ej=function(){return this.cg},d.gi=function(){var e=zn(this);return Ai(e,this.g,zn(this)),Zm(this.g,zn(this))},d.bi=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ra().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},d.Li=function(){var e=this.getConfiguration(),t;for(t in this.g)delete this.g[t];Ai(this.g,zn(this),zn(this)),Wv(this,e)},d.Yd=function(){return this.m},d.di=function(){return this.i?this.i.type:null},d.Ze=function(){return this.h},d.Yb=function(){return this.N},d.rd=function(){return this.X},d.ai=function(){return this.C?this.C:null},d.ji=function(){return this.Da?this.Da:null},d.W=function(){return this.i&&!this.wa()?this.i.presentationTimeline.W():this.h&&(this.h.src||this.wa())?this.h.duration==1/0:!1},d.Vc=function(){return this.i?this.i.presentationTimeline.Vc():!1},d.hk=function(){if(this.i&&!this.wa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.wa())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},d.pi=function(){if(this.i&&!this.wa()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.wa())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},d.Ra=function(){if(this.i&&!this.wa()){if(!this.Ua&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Zb(),end:e.Hb()}}if(this.h&&(this.h.src||this.wa())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},d.ek=function(){this.W()&&(this.h.currentTime=this.Ra().end)},d.ik=function(){return this.Ua},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.F?this.F.g:null},d.Xd=function(){return this.F?this.F.Xd():1/0},d.Jg=function(){return this.F?this.F.Jg():[]},d.Ye=function(){return this.F?this.F.Ye():{}},d.Qg=function(){return this.R?this.R.g==Ar:!!this.X},d.Pb=function(){return this.h?this.M?this.M.i:1:0},d.Ih=function(e){this.m==Et&&this.l&&Wm(this.l,e)},d.ve=function(e,t){t=t===void 0?!0:t,e==0?xe("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==Et&&(this.o.playbackRateChanged(e),this.Ih(t&&e!=1)),Zv(this,e))},d.Qd=function(){var e=this.M.Tc();this.m==nn&&this.M.set(e),this.m==Et&&(this.M.set(e),this.o.playbackRateChanged(e),this.Ih(!1)),this.dc.Qa()},d.qc=function(){if(this.i&&!this.wa()){for(var e=this.l?this.l.o:null,t=[],n=0,i=g(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ds(r)){var o=xr(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}if(this.h&&this.h.audioTracks){var s=ny(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(u){return zu(u,s)}):s?[zu(null,s)]:[]}return[]},d.Lc=function(){if(this.i){if(this.wa())return[];for(var e=this.l?this.l.B:null,t=[],n=g(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=Sr(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?qa(this).map(function(o){return ag(o)}):[]},d.Jj=function(){var e=this.Ie;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Hc(t)})},d.xj=function(e){var t=this,n,i;return C(function(r){return r.g==1?T(r,Yv(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.Gb(function(o){var s=zv(o.tilesLayout||n.tilesLayout);if(s)for(var u=s.rows*s.columns,a=o.j-o.startTime,l=0;l<u;l++){var c=qv(o,n,o.startTime+a*l/u,s);i.push(c)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function zv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}d.Yj=function(e,t){var n=this,i,r,o,s,u,a;return C(function(l){return l.g==1?T(l,Yv(n,e),2):(i=l.h,!i||(i.closeSegmentIndex&&(n.yc.has(i)||(r=new ge(function(){i.closeSegmentIndex(),n.yc.delete(i)}),n.yc.set(i,r)),o=n.yc.get(i),o.ia(5)),s=i.segmentIndex.find(t),s==null)?l.return(null):(u=i.segmentIndex.get(s),(a=zv(u.tilesLayout||i.tilesLayout))?l.return(qv(u,i,t,a)):l.return(null)))})};function Yv(e,t){var n,i;return C(function(r){return r.g==1?e.m!=Et&&e.m!=nn||(n=e.Ie,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(o){return o.id==t})),i?i.segmentIndex?r.A(2):T(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function qv(e,t,n,i){var r=t.width||0,o=t.height||0,s=r/i.columns,u=o/i.rows,a=i.columns*i.rows,l=e.j-e.startTime;l=e.B||l/a;var c=e.startTime,f=0,h=0;return a>1&&(h=Math.floor((n-e.startTime)/l),c=e.startTime+h*l,f=h%i.columns*s,h=Math.floor(h/i.columns)*u),i=!1,(n=e.thumbnailSprite)&&(i=!0,u=n.height,f=n.positionX,h=n.positionY,s=n.width),{segment:e,imageHeight:o,imageWidth:r,height:u,positionX:f,positionY:h,startTime:c,duration:l,uris:e.P(),startByte:e.Jc(),endByte:e.Hc(),width:s,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}d.oh=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.l.B&&(Ff(n.B.h,i,!1),Aa(n.l,i),Ii(n),Fs(n),n.Jd=i.language)}var n=this;this.i&&this.G&&(t(),!this.wa())||(function(){if(n.h&&n.h.textTracks){var i=qa(n),r=i.find(function(u){return Wu(u)===e.id});if(r){if(n.u instanceof dt){i=g(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=o===r?n.$?"showing":"hidden":"disabled";o.mode!==s&&(o.mode=s)}}else i=i.find(function(u){return u.mode!=="disabled"}),i!==r&&(i&&(i.mode="disabled",n.j.Ma(i,"cuechange"),n.u.remove(0,1/0)),r&&Jv(n,r));Ii(n),Fs(n)}}})()};function Jv(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=g(r);for(var o=r.next();!o.done;o=r.next()){if(o=o.value,o.endTime===1/0||o.endTime<o.startTime)o=null;else{var s=new Ve(o.startTime,o.endTime,o.text);s.line=typeof o.line=="number"?o.line:null,o.lineAlign&&(s.lineAlign=o.lineAlign),s.lineInterpretation=o.snapToLines?rs:1,s.position=typeof o.position=="number"?o.position:null,o.positionAlign&&(s.positionAlign=o.positionAlign),s.size=o.size,s.textAlign=o.align,o.vertical==="lr"?s.writingMode="vertical-lr":o.vertical==="rl"&&(s.writingMode="vertical-rl"),o.region&&(s.region.id=o.region.id,s.region.height=o.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=o.region.regionAnchorX,s.region.regionAnchorY=o.region.regionAnchorY,s.region.scroll=o.region.scroll,s.region.viewportAnchorX=o.region.viewportAnchorX,s.region.viewportAnchorY=o.region.viewportAnchorY,s.region.viewportAnchorUnits=$t,s.region.width=o.region.width,s.region.widthUnits=$t),Bu(s),o=s}o&&((s=e.g.mediaSource.modifyCueCallback)&&s(o,null,n),i.push(o))}e.u.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}d.If=function(e,t,n){function i(){var o=r.i.variants.find(function(u){return u.id==e.id});if(o&&ds(o)){var s=r.l.o;r.g.abr.enabled&&(s.video!=o.video||s.audio&&o.audio&&s.audio.language==o.audio.language&&s.audio.channelsCount==o.audio.channelsCount&&s.audio.label==o.audio.label)&&xe("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.wa()?bs(r,o,!1,!1,0):bs(r,o,!1,t||!1,n||0),r.J.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",videoRole:o.video&&o.video.roles&&o.video.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,hdrLevel:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:o.audio&&o.audio.spatialAudio?o.audio.spatialAudio:!1,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",audioLabel:o.audio&&o.audio.label?o.audio.label:"",videoLabel:o.video&&o.video.label?o.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",activeAudioCodec:s.audio&&s.audio.codecs?s.audio.codecs:"",activeAudioChannelCount:s.audio&&s.audio.channelsCount?s.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Ji(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.wa()))&&(function(){if(e.originalAudioId&&r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks);o=g(o);for(var s=o.next();!s.done;s=o.next())if(s=s.value,Wu(s)==e.id){ld(r,s);break}}})()},d.Sk=function(e,t){function n(){var r=i.J.getConfiguration();r.audioCodec=e.codecs||"",r.audioLabel=e.label||"",r.channelCount=e.channelsCount||0,r.language=e.language,r.role=e.roles[0]||"",r.spatialAudio=e.spatialAudio,i.J.configure(r),$i(i,!0,t,!1,!1)}var i=this;t=t===void 0?0:t,!(this.i&&this.G&&(n(),!this.wa()))&&(function(){if(i.h&&i.h.audioTracks){var r=ke(e.language),o=Array.from(i.h.audioTracks),s=null;o=g(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=u.language||"und";if(u.label==e.label&&ke(a)==r&&u.kind==e.roles[0]){s=u;break}}s&&ld(i,s)}})()},d.getAudioTracks=function(){if(this.i&&!this.wa()){var e=this.qc();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.m!=Et||this.wa()||(n=e.filter(function(o){return o.originalVideoId===t.originalVideoId&&(o.audioCodec||pi.includes(o.audioMimeType||""))})),!n.length)return[];e=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),!r&&i.codecs.includes(",")&&i.audioCodec&&(r="muxed-in-video"),r&&(r+=[i.language,i.label,i.channelsCount,i.spatialAudio,i.audioCodec||""].join("_"),e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(o){var s=o.language;return s={active:o.enabled,language:ke(s||"und"),label:o.label,mimeType:null,codecs:null,primary:o.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:s},o.kind&&(o.kind=="description"&&(s.accessibilityPurpose="visually impaired"),s.roles.push(o.kind)),o.configuration&&(o.configuration.codec&&(s.codecs=o.configuration.codec),o.configuration.sampleRate&&(s.audioSamplingRate=o.configuration.sampleRate),o.configuration.numberOfChannels&&(s.channelsCount=o.configuration.numberOfChannels)),s}):[]},d.Uk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var i=this.qc();if(i.length){var r=i.find(function(s){return s.active});if(r){i=i.filter(function(s){return(s.videoBandwidth||s.bandwidth)==e.bandwidth&&s.width==e.width&&s.height==e.height&&s.frameRate==e.frameRate&&s.pixelAspectRatio==e.pixelAspectRatio&&s.hdr==e.hdr&&s.colorGamut==e.colorGamut&&s.videoLayout==e.videoLayout&&s.videoMimeType==e.mimeType&&s.videoCodec==e.codecs&&Oi(s.videoRoles,e.roles)&&s.videoLabel==e.label});var o;i.length==1?o=i[0]:o=i.find(function(s){return s.audioId===r.audioId}),o||(o=i.find(function(s){return s.language==r.language&&s.label===r.label&&s.channelsCount===r.channelsCount&&s.spatialAudio===r.spatialAudio&&s.audioMimeType===r.audioMimeType&&ct(s.audioCodec||"")===ct(r.audioCodec||"")&&Oi(s.audioRoles,r.audioRoles)})),o&&!o.active&&this.If(o,t,n)}}},d.getVideoTracks=function(){if(this.m==nn||this.wa())return[];var e=this.qc();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.pi()||(n=e.filter(function(o){return o.videoCodec&&o.audioGroupId===t.audioGroupId&&o.originalAudioId===t.originalAudioId?o.audioId===t.audioId?!0:o.language===t.language&&o.label===t.label&&o.channelsCount===t.channelsCount&&o.spatialAudio===t.spatialAudio&&o.audioMimeType===t.audioMimeType&&ct(o.audioCodec||"")===ct(t.audioCodec||"")&&Oi(o.audioRoles,t.audioRoles):!1})),!n.length)return[];e=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalVideoId;r||i.videoId==null||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec,roles:i.videoRoles||[],label:i.videoLabel})}return Array.from(e.values())},d.zj=function(){return cy(this.qc())},d.Wj=function(){return cy(this.Lc())},d.yj=function(){return Array.from(ly(this.qc()))},d.Vj=function(){return Array.from(ly(this.Lc()))},d.Qi=function(e,t,n,i,r,o,s){function u(){function l(m,v){return m.video||v.video?m.video&&v.video?Math.abs((m.video.height||0)-(v.video.height||0))+Math.abs((m.video.width||0)-(v.video.width||0)):1/0:0}var c=a.l.o;a.J=a.g.adaptationSetCriteriaFactory(),a.J.configure({language:e,role:t||"",videoRole:c.video&&c.video.roles&&c.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:o||!1,videoLayout:"",audioLabel:s||"",videoLabel:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",activeAudioCodec:c.audio&&c.audio.codecs?c.audio.codecs:"",activeAudioChannelCount:c.audio&&c.audio.channelsCount?c.audio.channelsCount:0,preferredAudioCodecs:a.g.preferredAudioCodecs,preferredAudioChannelCount:a.g.preferredAudioChannelCount});var f=a.J.create(a.i.variants),h=null;f=g(f.values());for(var p=f.next();!p.done;p=f.next())p=p.value,ds(p)&&(!h||l(h,c)>l(p,c))&&(h=p);h!=c&&(h?(c=xr(h),a.If(c,!0,i||0)):$i(a))}var a=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,o=o===void 0?!1:o,s=s===void 0?"":s,!(this.i&&this.G&&(u(),!this.wa()))&&(function(){if(a.h&&a.h.audioTracks){var l=Jr(a.qc(),e,t||"",!1)[0];l&&a.If(l)}})()},d.nh=function(e,t,n){function i(){r.Jd=e,r.Md=t||"",r.Ld=n||!1;var o=Jr(r.i.textStreams,r.Jd,r.Md,r.Ld)[0]||null;o&&o!=r.l.B&&(Ff(r.B.h,o,!1),r.g.streaming.alwaysStreamText||r.Rg())&&(Aa(r.l,o),Ii(r),Fs(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.G&&(i(),!this.wa()))&&(function(){var o=Jr(r.Lc(),e,t||"",n||!1)[0];o&&r.oh(o)})()},d.Tk=function(e,t,n){function i(){for(var o=null,s=g(r.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(r.J=r.g.adaptationSetCriteriaFactory(),r.J.configure({language:o.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),$i(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.wa()))&&(function(){if(r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks),s=null;o=g(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.label==e&&(s=u);s&&ld(r,s)}})()},d.Rg=function(){var e=this.$;return this.u?this.u.isTextVisible():e},d.Dj=function(){return this.ob.map(function(e){return Sr(e)})},d.Bj=function(e){if(Ee("getChapters","Please use an getChaptersAsync."),!this.ob.length)return[];var t=ke(e);if(e=this.ob.filter(function(o){return ke(o.language)==t}),!e.length)return[];var n=[],i=new Set;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.Gb(function(o){var s=o.P()[0],u=o.startTime+"-"+o.endTime+"-"+s;o={id:u,title:s,startTime:o.startTime,endTime:o.endTime},i.has(u)||(n.push(o),i.add(u))});return n},d.Cj=function(e){var t=this,n,i,r,o,s,u,a;return C(function(l){switch(l.g){case 1:if(!t.ob.length)return l.return([]);if(n=ke(e),i=t.ob.filter(function(c){return ke(c.language)==n}),!i.length)return l.return([]);r=[],o=new Set,s=g(i),u=s.next();case 2:if(u.done){l.A(4);break}if(a=u.value,a.segmentIndex){l.A(5);break}return T(l,a.createSegmentIndex(),5);case 5:a.segmentIndex.Gb(function(c){var f=c.P()[0],h=c.startTime+"-"+c.endTime+"-"+f;c={id:h,title:f,startTime:c.startTime,endTime:c.endTime},o.has(h)||(r.push(c),o.add(h))}),u=s.next(),l.A(2);break;case 4:return l.return(r)}})};function qa(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function DE(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function RE(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}d.uh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==Et?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=Jr(this.i.textStreams,this.Jd,this.Md,this.Ld),e.length>0&&(Aa(this.l,e[0]),Ii(this),Fs(this))):nA(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),sy(this))},d.Pj=function(){if(this.G)var e=this.G.Od();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.wa()){var t=this.i.presentationTimeline;return new Date(((t.m||t.i)+e)*1e3)}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+e*1e3)):null},d.ii=function(){if(this.i&&!this.wa()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},d.bf=function(){return this.W()&&this.i?this.i.presentationTimeline.bf():null},d.Gc=function(){if(this.m==Et)return this.H.Gc();var e={total:[],audio:[],video:[],text:[]};return this.m==nn&&(e.total=xi(this.h.buffered)),e};function $v(e){if(!e.h||!e.h.currentTime)return null;var t=e.ii();return t?Math.floor(Date.now()-(t.getTime()+e.h.currentTime*1e3)):null}d.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},d.getStats=function(){if(this.m!=Et&&this.m!=nn)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};ad(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||DA(this.B,Math.round(100*t)),this.G&&(this.B.T=this.G.Jh(),this.B.V=this.G.Lh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),kA(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?US(this.F):NaN,iv(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&(e=$v(this),e!=null&&(this.B.F=e/1e3)),t=this.qc().find(function(r){return r.active}),e=this.Lc().find(function(r){return r.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.B.B=i}t.width&&t.height&&iv(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=Et||this.wa()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==nn&&rv(this.B,NaN),RA(this.B)},d.Pd=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,c,f,h,p,m,v,y,S,x,A;return C(function(I){switch(I.g){case 1:if(u.m!=Et&&u.m!=nn)throw new M(1,7,7004);if(n!="subtitles"&&n!="captions"&&xe("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){I.A(2);break}return T(I,Ja(u,e),3);case 3:i=I.h;case 2:if(a=[],u.C&&(a=u.C.getCuePoints()),u.m!=nn){I.A(4);break}return l=he(),s&&l.Ha()==="WEBKIT"&&(n="forced"),T(I,LE(u,e,t,n,i,o||"",a),5);case 5:if(c=I.h,c.track)return Bt(u),Ii(u),I.return(ag(c.track));throw new M(1,2,2012);case 4:if(f=ut,h=u.Ra(),p=h.end-h.start,u.i&&(p=u.i.presentationTimeline.getDuration()),p==1/0)throw new M(1,4,4033);if(!a.length){I.A(6);break}return T(I,$a(u,e),7);case 7:m=I.h,v=Qv(u,m,i,a),y=new Blob([v],{type:"text/vtt"}),e=mf(y),i="text/vtt";case 6:if(S={id:u.De++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ta(0,p,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ze(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},x=Ze(S.mimeType,S.codecs),A=us(x),!A)throw new M(2,2,2014,i);return u.i.textStreams.push(S),Bt(u),Ii(u),I.return(Sr(S))}})},d.Ne=function(e,t){var n=this,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I;return C(function(R){switch(R.g){case 1:if(n.m!=Et&&n.m!=nn)throw new M(1,7,7004);if(t){R.A(2);break}return T(R,Ja(n,e),3);case 3:t=R.h;case 2:if(t!="text/vtt")throw new M(1,2,2017,e);if(i=ut,r=n.Ra(),o=r.end-r.start,n.i&&(o=n.i.presentationTimeline.getDuration()),o==1/0)throw new M(1,4,4045);return T(R,$a(n,e),4);case 4:if(s=R.h,u=ss(t),!u)throw new M(2,2,2014,t);for(a=u(),l={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},c=se(s),f=a.parseMedia(c,l,e,[]),h=[],p=g(f),m=p.next(),v={};!m.done;v={Vf:void 0,nd:void 0},m=p.next())v.nd=m.value,v.Vf=null,y=(function(E){return function(){return E.Vf==null&&(E.Vf=mt([e],[E.nd.payload])),E.Vf||[]}})(v),S=new Z(v.nd.startTime,v.nd.endTime,y,0,null,null,0,0,1/0),v.nd.payload.includes("#xywh")&&(x=v.nd.payload.split("#xywh=")[1].split(","),x.length===4&&S.Lf({height:parseInt(x[3],10),positionX:parseInt(x[0],10),positionY:parseInt(x[1],10),width:parseInt(x[2],10)})),h.push(S);if(A=t,!h.length){R.A(5);break}return T(R,Ja(n,h[0].P()[0]),6);case 6:A=R.h;case 5:return I={id:n.De++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ce(h),mimeType:A||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Xf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ze(A||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==nn?n.Ie.push(I):n.i.imageStreams.push(I),Bt(n),R.return(Hc(I))}})},d.Me=function(e,t,n){var i=this,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x;return C(function(A){switch(A.g){case 1:if(i.m!=Et&&i.m!=nn)throw new M(1,7,7004);if(n){A.A(2);break}return T(A,Ja(i,e),3);case 3:n=A.h;case 2:if(r=ut,o=i.Ra(),s=o.end-o.start,i.i&&(s=i.i.presentationTimeline.getDuration()),s==1/0)throw new M(1,4,4055);if(u=ss(n),!u)throw new M(2,2,2014,n);return T(A,$a(i,e),4);case 4:for(a=A.h,l=u(),c={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},f=se(a),h=l.parseMedia(f,c,e,[]),p=[],m=g(h),v=m.next(),y={};!v.done;y={Ve:void 0},v=m.next())y.Ve=v.value,S=new Z(y.Ve.startTime,y.Ve.endTime,(function(I){return function(){return[I.Ve.payload]}})(y),0,null,null,0,0,1/0),p.push(S);return x={id:i.De++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ce(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ze("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.ob.push(x),Bt(i),A.return(Sr(x))}})};function Ja(e,t){var n;return C(function(i){switch(i.g){case 1:return ue(i,2),T(i,go(t,e.N,e.g.streaming.retryParameters),4);case 4:n=i.h,de(i,3);break;case 2:ae(i);case 3:if(n)return i.return(n);throw new M(1,2,2011,t)}})}function LE(e,t,n,i,r,o,s){var u,a,l,c;return C(function(f){if(f.g==1)return r!="text/vtt"||s.length?T(f,$a(e,t),3):f.A(2);f.g!=2&&(u=f.h,a=Qv(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=mf(l),r="text/vtt"),c=document.createElement("track");e:{var h=e.K,p=t;try{if(!h.g.enabled){var m=p;break e}var v=Jf(h);v.ot=ed,v.su=!0;var y=_s(v);m=Ba(p,y);break e}catch(S){ji("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",S),m=p;break e}m=void 0}return c.src=m,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.ag.push(c),f.return(c)})}function $a(e,t){var n,i,r,o;return C(function(s){if(s.g==1){n=Sn,i=e.g.streaming.retryParameters,r=ot([t],i),r.method="GET";var u=e.K;try{u.g.enabled&&So(u,r,{ot:ed,su:!0})}catch(a){ji("CMCD_TEXT_ERROR","Could not generate text CMCD data.",a)}return T(s,e.N.request(n,r).promise,2)}return o=s.h,s.return(o.data)})}function Qv(e,t,n,i){var r=ss(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=se(t),t=n.parseMedia(t,e,null,[]),zA(t,i);throw new M(2,2,2014,n)}d.Zk=function(e,t){this.xa.width=e,this.xa.height=t},d.jh=function(e){if(this.m==Et){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.F)t=!1;else{for(var n=g(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.ae||i.Ja||i.qb||(i.ae=!1,Nt(t,i,e));t=!0}}else t=!1;return t},d.Kg=function(){return xe("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.Mj=function(){return this.zc},d.Hj=function(){var e={video:null,audio:null,text:null};if(this.m!=Et)return e;var t=this.l.o,n=this.h.currentTime;t=g([t.video,t.audio,this.l.B]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==pe&&(e.text=r)}return e};function zn(e){var t=To();return t.streaming.failureCallback=function(n){if(e.W()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.jh(i))}},t.textDisplayFactory=function(){if(e.ze){var n=e.h;n=!(n.webkitDisplayingFullscreen||n.webkitPresentationMode&&n.webkitPresentationMode!="inline")}else n=!1;return n?new kt(e.h,e.ze):"track"in document.createElement("track")?new dt(e):new Mt},t}d.Wi=function(e){this.ze=e};function PE(e,t){for(var n=new Set,i=g(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=g(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=g(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new Je,l=r.closedCaptions.get(s);u={id:e.De++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:pe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ze(u,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(u),n.add(s)}}}function NE(e,t){var n,i,r,o,s;return C(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var c,f,h;return C(function(p){return p.g==1?a?a.segmentIndex?p.A(2):T(p,a.createSegmentIndex(),2):p.return(null):(f=(c=a.segmentIndex.Xb(l))?c.next().value:null,f?(h=f.startTime,p.return(h)):p.return(null))})},T(u,r(n,t),2)):u.g!=3?(o=u.h,T(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function Bs(e){var t=e.Qg();if(e.B&&e.R&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.M;n.j=!1,Sf(n)}else n=e.M,n.j=t,Sf(n);if(e.K&&(n=e.K,t||n.F||(n.F=!0),n.F&&t&&(n.I=!0,Dt(n,"ps",{dd:"r"})),n.J=t),ad(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Le<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Le*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(_e("buffering",t))}function Zv(e,t){e.dc.Qa(),e.dc.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Ra(),r=e.W(),o=r?e.g.streaming.safeSeekOffset:0;t>0?r&&t>1&&Math.floor(n)>=Math.floor(i.end)&&e.Qd():Math.floor(n)<=Math.floor(i.start+o)&&e.Qd()})}function ad(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Ar?n="buffering":e.ee()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(_e("statechanged",n)))}}function ey(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.bi();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.ve(i,!1):r==1&&t!==e.M.Tc()&&e.Qd()}if(n&&(n=e.Ra(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+i,a=Math.max(0,s-i),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||typeof s!="number"||(e.V=s);var f=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.cc&&e.V!==null&&typeof s=="number"&&e.Le<f&&Date.now()-e.cc>o*1e3&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(s-o)/2,o+i),e.cc=Date.now()),r&&e.V!==null&&(u=e.V+i,a=e.V-i),s=n.end-e.h.currentTime,i=0,e.m==nn&&(r=e.h.buffered,r.length>0&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=e.g.streaming.liveSync.panicThreshold*1e3,o=Date.now()-e.R.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&o<=r?t!=c&&e.ve(c,!1):u!=null&&l&&s-i>u?(t!=l&&e.ve(l,!1),e.cc=null):a!=null&&c&&s-i<a?(t!=c&&e.ve(c,!1),e.cc=null):t!==e.M.Tc()&&(e.Qd(),e.cc=Date.now())}}function Qa(e){if(e.h){var t=function(r,o){return(Uv(r,o,.01)||o>r)&&e.$f<r?(e.$f=r,!0):!1},n=e.Ra();if(n=n.end-n.start,n=n>0?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=_e("started");else t(25,n)?i=_e("firstquartile"):t(50,n)?i=_e("midpoint"):t(75,n)?i=_e("thirdquartile"):((t(100,n)||n>100)&&(i=_e("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ee()&&e.h.pause());i&&e.dispatchEvent(i)}}}function Ji(e){try{Wg(e.Ce,e.i)}catch(n){return Ao(e,n),!1}var t=Yu(e.i.variants);return t=e.J.create(t),e=e.o.setVariants(Array.from(t.values())),typeof e=="boolean"?e:!0}function ty(e,t){if(t=t===void 0?!1:t,Ji(e)){if(!e.g.abr.enabled){var n=e.J;if(typeof n.getLastAdaptationSet!="function"&&(Ee("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),n.getLastAdaptationSet=function(){return null}),(n=n.getLastAdaptationSet())&&(n=Array.from(n.values()),n.length)){var i=e.l.o;if(i&&i.video&&(n=n.find(function(r){return r.video==i.video})))return n}}return e.o.chooseVariant(t)}return null}function $i(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o=ty(e);o&&bs(e,o,r,t,n,i)}function bs(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.l.o;if(t==s)i&&zm(e.l,t,i,r,!0);else{var u=e.B.h;if(u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),zm(e.l,t,i,r,o,n),i=null,s&&(i=xr(s)),s=xr(t),s.active=!0,e.T&&(r=e.T,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),o=0,u=-1,t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(e.di()){case"DASH":u=1;break;case"HLS":u=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(o),r.j||r.g.setStreamingFormat(u))}n?(n=new Map().set("oldTrack",i).set("newTrack",s),n=_e("adaptation",n),Lr(e,n)):iy(e,i,s),ry(e,i,s)}}function ld(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=ny(e);n=zu(n,i),t=zu(t,i),iy(e,n,t),ry(e,n,t)}}function ny(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function Bt(e){var t=_e("trackschanged");Lr(e,t),oy(e)}function iy(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=_e("variantchanged",t),Lr(e,t)}function ry(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&oy(e)}function oy(e){var t=_e("audiotrackschanged");Lr(e,t)}function Ii(e){var t=_e("textchanged");Lr(e,t)}function sy(e){var t=_e("texttrackvisibility");Lr(e,t)}function uy(e){e.g.abr.enabled||cd(e);var t=new Map().set("newStatus",e.g.abr.enabled);Lr(e,_e("abrstatuschanged",t))}function Fs(e){var t=e.Lc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function cd(e,t){if(t=t===void 0?!0:t,e.m==Et){e.Fe.stop();for(var n=g(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&Ji(e)}}d.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Bn||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(u){var a=u[e.type];return a&&a.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===a.language:!0:!1})){for(var n=!1,i=!1,r=g(this.i.variants),o=r.next();!o.done;o=r.next()){o=o.value;var s=o[e.type];s&&(s.id===e.id?(o.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.Fe.Ea(1),t=this.Gc().video.reduce(function(u,a){return u+a.end-a.start},0),$i(this,!1,t,!0,!1),!0)}return!1};function Ao(e,t){var n,i,r,o,s;return C(function(u){switch(u.g){case 1:if(e.m==Bn)return u.return();if(t.severity===1&&e.B.M++,n=!0,!(e.Ua&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){u.A(2);break}return i=he(),i.Ha()==="WEBKIT"&&t.code==3016?u.return():(ue(u,3),T(u,ka(e.l),5));case 5:r=u.h,n=!r,r&&(o=_e("mediasourcerecovered"),e.dispatchEvent(o)),de(u,2);break;case 3:ae(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&cd(e,!1),s=_e("error",new Map().set("detail",t)),e.dispatchEvent(s),s.defaultPrevented&&(t.handled=!0),G(u)}})}d.addFont=function(e,t){return mw(e,t)};function Vs(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(_e(t,e))}function ay(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(_e(i?"audiotrackchanged":"mediaqualitychanged",t))}function fd(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new M(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new M(2,3,3016,n,t,e.h.error.message))}function jE(e,t){var n=_e("keystatuschanged");e.dispatchEvent(n);var i=Object.keys(t);i.length==1&&i[0]==""&&(i=["00"],t={"00":t[""]});var r=i.length==1&&i[0]=="00";if(n=!1,i.length){i=e.keySystem();for(var o=to(e.g.drm.clearKeys),s=function(m,v){m.allowedByKeySystem=!0,v=g(v);for(var y=v.next();!y.done;y=v.next())y=y.value,((y=t[r?"00":y])||e.F.H)&&(m.allowedByKeySystem=m.allowedByKeySystem&&!!y&&!zg.includes(y))},u=g(e.i.variants),a=u.next();!a.done;a=u.next()){a=a.value;var l=xS(a);l=g(l);for(var c=l.next();!c.done;c=l.next()){c=c.value;var f=a.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!o.size&&e.i.type=="HLS")for(var h=g(c.drmInfos),p=h.next();!p.done;p=h.next())p=p.value,p.keySystem==i&&(p.keyIds.size?s(a,p.keyIds):s(a,c.keyIds));else s(a,c.keyIds);f!=a.allowedByKeySystem&&(n=!0)}}}n&&(Bt(e),!Ji(e))||(n=e.l.o)&&!n.allowedByKeySystem&&$i(e)}function dd(e,t,n){t>0&&(e.W()||e.Vi(t)),t=e.getDuration(),n<t&&(e.W()||e.Ab(n))}function Lr(e,t){C(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.m!=Bn&&e.dispatchEvent(t),G(n)})}function ly(e){var t=new Set;e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(ke(n.language)):t.add("und");return t}function cy(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],o="und",s=[];r.language&&(o=ke(r.language)),r.type=="variant"?s=r.audioRoles:s=r.roles,s&&s.length||(s=[""]),t.has(o)||t.set(o,new Set),s=g(s);for(var u=s.next();!u.done;u=s.next())u=u.value,t.get(o).add(u),r.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(u,r.label))}var a=[];return t.forEach(function(l,c){l=g(l);for(var f=l.next();!f.done;f=l.next()){f=f.value;var h=null;n.has(c)&&n.get(c).has(f)&&(h=n.get(c).get(f)),a.push({language:c,role:f,label:h})}}),a}d.wa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},d.ee=function(){return!this.h||this.h.ended?!0:this.Ua&&!this.W()&&this.h.currentTime>=this.Ra().end},K("shaka.Player",U),U.prototype.isEnded=U.prototype.ee,U.prototype.isRemotePlayback=U.prototype.wa,U.prototype.addFont=U.prototype.addFont,U.prototype.setVideoContainer=U.prototype.Wi,U.prototype.getFetchedPlaybackInfo=U.prototype.Hj,U.prototype.getManifestParserFactory=U.prototype.Mj,U.prototype.getManifest=U.prototype.Kg,U.prototype.retryStreaming=U.prototype.jh,U.prototype.setMaxHardwareResolution=U.prototype.Zk,U.prototype.addChaptersTrack=U.prototype.Me,U.prototype.addThumbnailsTrack=U.prototype.Ne,U.prototype.addTextTrackAsync=U.prototype.Pd,U.prototype.getStats=U.prototype.getStats,U.prototype.getBufferedInfo=U.prototype.Gc,U.prototype.getSegmentAvailabilityDuration=U.prototype.bf,U.prototype.getPresentationStartTimeAsDate=U.prototype.ii,U.prototype.getPlayheadTimeAsDate=U.prototype.Pj,U.prototype.setTextTrackVisibility=U.prototype.uh,U.prototype.getChaptersAsync=U.prototype.Cj,U.prototype.getChapters=U.prototype.Bj,U.prototype.getChaptersTracks=U.prototype.Dj,U.prototype.isTextTrackVisible=U.prototype.Rg,U.prototype.selectVariantsByLabel=U.prototype.Tk,U.prototype.selectTextLanguage=U.prototype.nh,U.prototype.selectAudioLanguage=U.prototype.Qi,U.prototype.getTextLanguages=U.prototype.Vj,U.prototype.getAudioLanguages=U.prototype.yj,U.prototype.getTextLanguagesAndRoles=U.prototype.Wj,U.prototype.getAudioLanguagesAndRoles=U.prototype.zj,U.prototype.getVideoTracks=U.prototype.getVideoTracks,U.prototype.selectVideoTrack=U.prototype.Uk,U.prototype.getAudioTracks=U.prototype.getAudioTracks,U.prototype.selectAudioTrack=U.prototype.Sk,U.prototype.selectVariantTrack=U.prototype.If,U.prototype.selectTextTrack=U.prototype.oh,U.prototype.getThumbnails=U.prototype.Yj,U.prototype.getAllThumbnails=U.prototype.xj,U.prototype.getImageTracks=U.prototype.Jj,U.prototype.getTextTracks=U.prototype.Lc,U.prototype.getVariantTracks=U.prototype.qc,U.prototype.cancelTrickPlay=U.prototype.Qd,U.prototype.trickPlay=U.prototype.ve,U.prototype.useTrickPlayTrackIfAvailable=U.prototype.Ih,U.prototype.getPlaybackRate=U.prototype.Pb,U.prototype.isBuffering=U.prototype.Qg,U.prototype.getKeyStatuses=U.prototype.Ye,U.prototype.getActiveSessionsMetadata=U.prototype.Jg,U.prototype.getExpiration=U.prototype.Xd,U.prototype.drmInfo=U.prototype.drmInfo,U.prototype.keySystem=U.prototype.keySystem,U.prototype.isFullyLoaded=U.prototype.ik,U.prototype.goToLive=U.prototype.ek,U.prototype.seekRange=U.prototype.Ra,U.prototype.isVideoOnly=U.prototype.pi,U.prototype.isAudioOnly=U.prototype.hk,U.prototype.isInProgress=U.prototype.Vc,U.prototype.isLive=U.prototype.W,U.prototype.getQueueManager=U.prototype.ji,U.prototype.getAdManager=U.prototype.ai,U.prototype.getAssetUri=U.prototype.rd,U.prototype.getNetworkingEngine=U.prototype.Yb,U.prototype.getMediaElement=U.prototype.Ze,U.prototype.getManifestType=U.prototype.di,U.prototype.getLoadMode=U.prototype.Yd,U.prototype.resetConfiguration=U.prototype.Li,U.prototype.getBufferFullness=U.prototype.bi,U.prototype.getNonDefaultConfiguration=U.prototype.gi,U.prototype.getConfigurationForLowLatency=U.prototype.Ej,U.prototype.getConfiguration=U.prototype.getConfiguration,U.prototype.configurationForLowLatency=U.prototype.uj,U.prototype.configure=U.prototype.configure,U.prototype.releaseAllMutexes=U.prototype.Kk,U.prototype.destroyAllPreloads=U.prototype.qg,U.prototype.preload=U.prototype.preload,U.prototype.detachAndSavePreload=U.prototype.Xh,U.prototype.unloadAndSavePreload=U.prototype.gj,U.prototype.load=U.prototype.load,U.prototype.updateStartTime=U.prototype.jl,U.prototype.unload=U.prototype.Cc,U.prototype.detach=U.prototype.detach,U.prototype.attachCanvas=U.prototype.mj,U.prototype.attach=U.prototype.Vb,U.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s,u;return C(function(a){switch(a.g){case 1:if(t={},!e){a.A(2);break}return T(a,VS(),3);case 3:t=a.h;case 2:return n=Zx(),i=Aw(),r=he(),T(a,r.lc(),4);case 4:return o=a.h,s={manifest:n,media:i,drm:t,hardwareResolution:o},u=dy,u.forEach(function(l,c){s[c]=l()}),a.return(s)}})},U.isBrowserSupported=function(){return b.Promise||xe("A Promise implementation or polyfill is required"),!(b.Promise&&b.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(he(),ni()?!0:Ir().canPlayType("application/x-mpegurl")!="")},U.setQueueManagerFactory=function(e){tl=e},U.setAdManagerFactory=function(e){el=e},U.registerSupportPlugin=_v,U.prototype.destroy=U.prototype.destroy;var Bn=0,Za=1,Et=2,nn=3;U.LoadMode={DESTROYED:Bn,NOT_LOADED:Za,MEDIA_SOURCE:Et,SRC_EQUALS:nn},U.version="v4.16.9";var fy=["4","16"];wp=new function(e){this.g=e,this.i=Xx,this.h=Wx}(new yc(Number(fy[0]),Number(fy[1])));var dy=new Map,el=null,tl=null;function hy(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function OE(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function ee(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Me,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}d=ee.prototype,d.needsSkipUI=function(){return!1},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!0},d.getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},d.isMuted=function(){return this.h.getVolume()==0},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,t){this.h.resize(e,t)},d.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},K("shaka.ads.ClientSideAd",ee),ee.prototype.release=ee.prototype.release,ee.prototype.getPodIndex=ee.prototype.getPodIndex,ee.prototype.getTimeOffset=ee.prototype.getTimeOffset,ee.prototype.getMediaUrl=ee.prototype.getMediaUrl,ee.prototype.getAdvertiserName=ee.prototype.getAdvertiserName,ee.prototype.getCreativeAdId=ee.prototype.getCreativeAdId,ee.prototype.getAdId=ee.prototype.getAdId,ee.prototype.getVastAdId=ee.prototype.getVastAdId,ee.prototype.getVastMediaWidth=ee.prototype.getVastMediaWidth,ee.prototype.getVastMediaHeight=ee.prototype.getVastMediaHeight,ee.prototype.getVastMediaBitrate=ee.prototype.getVastMediaBitrate,ee.prototype.getDescription=ee.prototype.getDescription,ee.prototype.getTitle=ee.prototype.getTitle,ee.prototype.getPositionInSequence=ee.prototype.getPositionInSequence,ee.prototype.getSequenceLength=ee.prototype.getSequenceLength,ee.prototype.setMuted=ee.prototype.setMuted,ee.prototype.resize=ee.prototype.resize,ee.prototype.isLinear=ee.prototype.isLinear,ee.prototype.isMuted=ee.prototype.isMuted,ee.prototype.setVolume=ee.prototype.setVolume,ee.prototype.getVolume=ee.prototype.getVolume,ee.prototype.play=ee.prototype.play,ee.prototype.pause=ee.prototype.pause,ee.prototype.skip=ee.prototype.skip,ee.prototype.canSkipNow=ee.prototype.canSkipNow,ee.prototype.getTimeUntilSkippable=ee.prototype.getTimeUntilSkippable,ee.prototype.isSkippable=ee.prototype.isSkippable,ee.prototype.isPaused=ee.prototype.isPaused,ee.prototype.getRemainingTime=ee.prototype.getRemainingTime,ee.prototype.getMinSuggestedDuration=ee.prototype.getMinSuggestedDuration,ee.prototype.getDuration=ee.prototype.getDuration,ee.prototype.isUsingAnotherMediaElement=ee.prototype.isUsingAnotherMediaElement,ee.prototype.hasCustomClick=ee.prototype.hasCustomClick,ee.prototype.isClientRendering=ee.prototype.isClientRendering,ee.prototype.needsSkipUI=ee.prototype.needsSkipUI;function Xe(){}function py(e,t){var n=[];e=g(Pe(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=Ge(i.value,"InLine"))&&(i=Ge(i,"Creatives"))){i=g(Pe(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=Ge(r,"Linear");if(o&&UE(n,t,o),r=Ge(r,"NonLinearAds")){r=Pe(r,"NonLinear"),r=g(r);for(var s=r.next();!s.done;s=r.next())e:{o=n;var u=t,a=s.value,l=Ge(a,"StaticResource");if(l)s=l.attributes.creativeType;else{if(l=Ge(a,"HTMLResource"),!l)break e;s="text/html"}if(l=_t(l)){s==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=oe(a,"width",xt)||oe(a,"expandedWidth",xt),f=oe(a,"height",xt)||oe(a,"expandedHeight",xt);if(c||f){var h=null,p=Ge(a,"NonLinearClickThrough");p&&(p=_t(p))&&(h=p),p=null,(a=a.attributes.minSuggestedDuration)&&(p=Xr(a)),a=0,u!=null&&(a=u),o.push({id:null,groupId:null,startTime:a,endTime:null,uri:l,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:u==null,post:u==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:f||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:h})}}}}}}return n}function UE(e,t,n){var i=0;t!=null&&(i=t);var r=null;n.attributes.skipoffset&&(r=Xr(n.attributes.skipoffset),isNaN(r)&&(r=null));var o=Ge(n,"MediaFiles");if(o){var s=null;for((n=Ge(n,"VideoClicks"))&&(n=Ge(n,"ClickThrough"))&&(n=_t(n))&&(s=n),o=n=Pe(o,"MediaFile"),n=n.filter(function(a){return a.attributes.delivery=="streaming"}),n.length&&(o=n),o=o.sort(function(a,l){return(parseInt(l.attributes.height,10)||0)-(parseInt(a.attributes.height,10)||0)}),o=g(o),n=o.next();!n.done;n=o.next())if(n=n.value,!n.attributes.apiFramework){var u=_t(n);if(u){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:u,mimeType:n.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:s});break}}}}function _E(e){var t=[];e=g(Pe(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var i=n.value,r=i.attributes.timeOffset;r&&(n=null,r=="start"?n=null:r=="end"?n=1/0:n=Xr(r),(i=Ge(i,"vmap:AdSource"))&&(i=Ge(i,"vmap:AdTagURI"))&&(i=it(i))&&t.push({time:n,uri:i}))}return t}K("shaka.ads.Utils",Xe),Xe.ADS_LOADED="ads-loaded",Xe.AD_STARTED="ad-started",Xe.AD_FIRST_QUARTILE="ad-first-quartile",Xe.AD_MIDPOINT="ad-midpoint",Xe.AD_THIRD_QUARTILE="ad-third-quartile",Xe.AD_COMPLETE="ad-complete",Xe.AD_STOPPED="ad-stopped",Xe.AD_SKIPPED="ad-skipped",Xe.AD_VOLUME_CHANGED="ad-volume-changed",Xe.AD_MUTED="ad-muted",Xe.AD_PAUSED="ad-paused",Xe.AD_RESUMED="ad-resumed",Xe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Xe.CUEPOINTS_CHANGED="ad-cue-points-changed",Xe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Xe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Xe.AD_CLICKED="ad-clicked",Xe.AD_PROGRESS="ad-progress",Xe.AD_BUFFERING="ad-buffering",Xe.AD_IMPRESSION="ad-impression",Xe.AD_DURATION_CHANGED="ad-duration-changed",Xe.AD_CLOSED="ad-closed",Xe.AD_LOADED="ad-loaded",Xe.ALL_ADS_COMPLETED="all-ads-completed",Xe.AD_LINEAR_CHANGED="ad-linear-changed",Xe.AD_METADATA="ad-metadata",Xe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Xe.AD_ERROR="ad-error",Xe.AD_BREAK_READY="ad-break-ready",Xe.AD_INTERACTION="ad-interaction",Xe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Xe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Xe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function nl(e,t,n,i,r){var o=this;this.u=e,this.i=t,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=r,this.j=null,this.h=new Me,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.9"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){BE(o,s)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){gy(o,s)}),this.h.D(this.i,"ended",function(){o.m.contentComplete()}),this.h.za(this.i,"play",function(){o.G=!0})}nl.prototype.configure=function(e){this.o=e},nl.prototype.stop=function(){this.g&&this.g.stop(),this.u&&Ss(this.u)},nl.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function gy(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Y("ad-error",t)),il(e,null),e.l(new Y("ad-cue-points-changed",new Map().set("cuepoints",[])))}function BE(e,t){if(e.l(new Y("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new Y("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=g(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new Y("ad-cue-points-changed",new Map().set("cuepoints",t)))}bE(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in b?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.B.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.o.skipPlayDetection?e.g.start():e.h.za(e.i,"play",function(){e.G=!0,e.g.start()})}catch{il(e,null)}}function bE(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new Y(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){gy(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){my(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){my(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){il(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed"),il(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function my(e,t){var n=t.getAd();n?(e.j=new ee(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Y("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Y("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):xe("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function il(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Y("ad-content-resume-requested")),e.l(new Y("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function te(e,t,n,i,r,o){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=i,this.m=r,this.u=o,this.C=t.overlay}d=te.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.h.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return this.u},d.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},d.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},d.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},d.skip=function(){this.canSkipNow()&&this.B()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.C==null},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.o},d.getPositionInSequence=function(){return this.m},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.h.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.h.uri},d.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},d.getPodIndex=function(){return 0},d.release=function(){this.g=null},K("shaka.ads.InterstitialAd",te),te.prototype.release=te.prototype.release,te.prototype.getPodIndex=te.prototype.getPodIndex,te.prototype.getTimeOffset=te.prototype.getTimeOffset,te.prototype.getMediaUrl=te.prototype.getMediaUrl,te.prototype.getAdvertiserName=te.prototype.getAdvertiserName,te.prototype.getCreativeAdId=te.prototype.getCreativeAdId,te.prototype.getAdId=te.prototype.getAdId,te.prototype.getVastAdId=te.prototype.getVastAdId,te.prototype.getVastMediaWidth=te.prototype.getVastMediaWidth,te.prototype.getVastMediaHeight=te.prototype.getVastMediaHeight,te.prototype.getVastMediaBitrate=te.prototype.getVastMediaBitrate,te.prototype.getDescription=te.prototype.getDescription,te.prototype.getTitle=te.prototype.getTitle,te.prototype.getPositionInSequence=te.prototype.getPositionInSequence,te.prototype.getSequenceLength=te.prototype.getSequenceLength,te.prototype.setMuted=te.prototype.setMuted,te.prototype.resize=te.prototype.resize,te.prototype.isLinear=te.prototype.isLinear,te.prototype.isMuted=te.prototype.isMuted,te.prototype.setVolume=te.prototype.setVolume,te.prototype.getVolume=te.prototype.getVolume,te.prototype.play=te.prototype.play,te.prototype.pause=te.prototype.pause,te.prototype.skip=te.prototype.skip,te.prototype.canSkipNow=te.prototype.canSkipNow,te.prototype.getTimeUntilSkippable=te.prototype.getTimeUntilSkippable,te.prototype.isSkippable=te.prototype.isSkippable,te.prototype.isPaused=te.prototype.isPaused,te.prototype.getRemainingTime=te.prototype.getRemainingTime,te.prototype.getMinSuggestedDuration=te.prototype.getMinSuggestedDuration,te.prototype.getDuration=te.prototype.getDuration,te.prototype.isUsingAnotherMediaElement=te.prototype.isUsingAnotherMediaElement,te.prototype.hasCustomClick=te.prototype.hasCustomClick,te.prototype.isClientRendering=te.prototype.isClientRendering,te.prototype.needsSkipUI=te.prototype.needsSkipUI;function ne(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}d=ne.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.g.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return-1},d.isPaused=function(){return!1},d.isSkippable=function(){return!1},d.getTimeUntilSkippable=function(){return 0},d.canSkipNow=function(){return!1},d.skip=function(){},d.pause=function(){},d.play=function(){},d.getVolume=function(){return 1},d.setVolume=function(){},d.isMuted=function(){return!1},d.isLinear=function(){return this.i},d.resize=function(){},d.setMuted=function(){},d.getSequenceLength=function(){return this.j},d.getPositionInSequence=function(){return this.h},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.g.uri},d.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},d.getPodIndex=function(){return 0},d.release=function(){},K("shaka.ads.InterstitialStaticAd",ne),ne.prototype.release=ne.prototype.release,ne.prototype.getPodIndex=ne.prototype.getPodIndex,ne.prototype.getTimeOffset=ne.prototype.getTimeOffset,ne.prototype.getMediaUrl=ne.prototype.getMediaUrl,ne.prototype.getAdvertiserName=ne.prototype.getAdvertiserName,ne.prototype.getCreativeAdId=ne.prototype.getCreativeAdId,ne.prototype.getAdId=ne.prototype.getAdId,ne.prototype.getVastAdId=ne.prototype.getVastAdId,ne.prototype.getVastMediaWidth=ne.prototype.getVastMediaWidth,ne.prototype.getVastMediaHeight=ne.prototype.getVastMediaHeight,ne.prototype.getVastMediaBitrate=ne.prototype.getVastMediaBitrate,ne.prototype.getDescription=ne.prototype.getDescription,ne.prototype.getTitle=ne.prototype.getTitle,ne.prototype.getPositionInSequence=ne.prototype.getPositionInSequence,ne.prototype.getSequenceLength=ne.prototype.getSequenceLength,ne.prototype.setMuted=ne.prototype.setMuted,ne.prototype.resize=ne.prototype.resize,ne.prototype.isLinear=ne.prototype.isLinear,ne.prototype.isMuted=ne.prototype.isMuted,ne.prototype.setVolume=ne.prototype.setVolume,ne.prototype.getVolume=ne.prototype.getVolume,ne.prototype.play=ne.prototype.play,ne.prototype.pause=ne.prototype.pause,ne.prototype.skip=ne.prototype.skip,ne.prototype.canSkipNow=ne.prototype.canSkipNow,ne.prototype.getTimeUntilSkippable=ne.prototype.getTimeUntilSkippable,ne.prototype.isSkippable=ne.prototype.isSkippable,ne.prototype.isPaused=ne.prototype.isPaused,ne.prototype.getRemainingTime=ne.prototype.getRemainingTime,ne.prototype.getMinSuggestedDuration=ne.prototype.getMinSuggestedDuration,ne.prototype.getDuration=ne.prototype.getDuration,ne.prototype.isUsingAnotherMediaElement=ne.prototype.isUsingAnotherMediaElement,ne.prototype.hasCustomClick=ne.prototype.hasCustomClick,ne.prototype.isClientRendering=ne.prototype.isClientRendering,ne.prototype.needsSkipUI=ne.prototype.needsSkipUI;function vy(e,t,n,i){var r=this;this.M=null,this.m=e,this.C=t,this.g=n,this.G=null,this.u=!0,this.h=this.g,this.va=i,this.ma=new Set,this.T=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new U,md(this),this.I=new Me,this.j=new Me,this.J=!1,this.$=this.o=this.B=this.l=null,this.aa=!1,this.O=-1,this.X=function(){if(!r.J&&r.l&&!r.C.wa()){r.l=r.g.currentTime;var o=Eo(r);o&&o&&(o.overlay||!r.g.paused)&&rl(r,o,1,1,Date.now())}},this.V=function(){if(!(r.J||r.l||r.C.wa())){r.g.paused||(r.l=r.g.currentTime);var o=Eo(r,!0);o||(o=Eo(r)),o&&o&&(o.overlay||!r.g.paused)&&rl(r,o,1,1,Date.now())}},this.oa=function(){if(!r.J&&r.l&&!r.C.wa()){var o=r.g.currentTime;r.B&&!r.B.pre&&!r.B.post&&o<(r.B.endTime||r.B.startTime)&&(r.B=null)}},this.R=new ge(this.X),this.N=new ge(function(){var o,s,u,a,l,c,f,h,p,m,v;return C(function(y){switch(y.g){case 1:if(!r.H.size||r.l==null){y.A(0);break}if(o=r.C.Yd(),o==Bn||o==Za)return y.return();s=!1,u=Array.from(r.H),a=r.C.Ra(),l=g(u),c=l.next();case 3:if(c.done){y.A(5);break}if(f=c.value,f==r.B){y.A(4);break}if(h=f.endTime||f.startTime,!(a.start-h>=1)){p=f.startTime-r.l,p>0&&p<=10&&(!r.F.has(f)&&Ty(f)&&r.F.set(f,r.i.preload(f.uri,null,f.mimeType||void 0)),Sy(r,f)),y.A(4);break}if(!r.F.has(f)){y.A(7);break}return T(y,r.F.get(f),8);case 8:(m=y.h)&&m.destroy(),r.F.delete(f);case 7:wy(r,f),v=f.id||JSON.stringify(f),r.T.has(v)&&r.T.delete(v),r.H.delete(f),hd(r),f.overlay||(s=!0);case 4:c=l.next(),y.A(3);break;case 5:s&&ol(r),G(y)}})}),this.configure(this.C.getConfiguration().ads)}d=vy.prototype,d.configure=function(e){this.M=e,pd(this)};function FE(e){if(!e.aa&&e.H.size){if(e.I.D(e.g,"playing",e.V),e.I.D(e.g,"timeupdate",e.V),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.X),"requestVideoFrameCallback"in e.g&&!xy()){var t=e.g,n=function(){e.O!=-1&&(e.X(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.R.Ea(.025);e.N&&e.N.Ea(1),e.aa=!0}}function hd(e){e.aa&&!e.H.size&&(e.I.Ma(e.g,"playing",e.V),e.I.Ma(e.g,"timeupdate",e.V),e.I.Ma(e.g,"seeked",e.oa),e.I.Ma(e.g,"ended",e.X),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.R&&e.R.stop(),e.N&&e.N.stop(),e.aa=!1)}function pd(e){if(e.m&&e.M){var t=e.M.supportsMultipleMediaElements,n=e.g;(n.controls||n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"||n.webkitDisplayingFullscreen)&&(t=!1),e.u==t&&(e.u=!t,e.u?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.u=!0}d.stop=function(){if(this.j&&this.j.Qa(),this.ma.clear(),this.T.clear(),this.H.clear(),this.i.qg(),this.F.size){var e=Array.from(this.F.values());e=g(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=g(e),t=e.next();!t.done;t=e.next())wy(this,t.value);this.K.clear(),this.i.detach(),this.J=!1,this.B=this.l=null,this.u=!0,this.h=this.g,this.G=null,gd(this),hd(this),this.m&&Ss(this.m),this.o&&(this.o.stop(),this.o=null)},d.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.R&&(this.R.stop(),this.R=null),this.N&&(this.N.stop(),this.N=null),this.i.destroy()},d.td=function(){return this.i};function VE(e,t){var n,i,r;C(function(o){if(o.g==1){if(n=null,(i=t.values.find(function(s){return s.key=="ID"}))&&(n=i.data),n){if(e.ma.has(n))return o.return();e.ma.add(n)}return md(e),r=[],t&&t.values.find(function(s){return s.key=="X-OVERLAY-ID"})?(r=WE(t),o.A(2)):T(o,XE(e,t),3)}o.g!=2&&(r=o.h),r.length?Hs(e,r):xe("Unsupported HLS interstitial",t),G(o)})}function HE(e,t){var n=Ge(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,o=n.attributes.loop=="true",s=oe(n,"z",xt);if(i&&s!=0){var u=null,a=Ge(n,"Background");if(a){var l=a.attributes.uri;l?u="center / contain no-repeat url('"+l+"')":u=_t(a)}a=1920,l=1080;var c=Ge(n,"Viewport");if(c&&(a=oe(c,"x",xt),a==null||(l=oe(c,"y",xt),l==null)))return;var f={viewport:{x:a,y:l},topLeft:{x:0,y:0},size:{x:a,y:l}},h=Ge(n,"Overlay");if(c&&h){var p=Ge(h,"TopLeft"),m=Ge(h,"Size");if(p&&m){if(h=oe(p,"x",xt),h==null||(p=oe(p,"y",xt),p==null))return;var v=oe(m,"x",xt);if(v==null||(m=oe(m,"y",xt),m==null))return;f.topLeft.x=h,f.topLeft.y=p,f.size.x=v,f.size.y=m}}if(h=null,n=Ge(n,"Squeeze"),c&&n&&(m=Ge(n,"TopLeft"),n=Ge(n,"Size"),m&&n)){if(c=oe(m,"x",xt),c==null||(h=oe(m,"y",xt),h==null)||(m=oe(n,"x",xt),m==null)||(n=oe(n,"y",xt),n==null))return;h={viewport:{x:a,y:l},topLeft:{x:c,y:h},size:{x:m,y:n}}}Hs(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:o,overlay:f,displayOnBackground:s==-1,currentVideo:h,background:u,clickThroughUrl:null}])}}d.addAdUrlInterstitial=function(e){var t=this,n,i,r,o,s,u,a,l,c;return C(function(f){if(f.g==1)return n={type:12},T(f,vd(t,e,n),2);if(f.g!=3){if(i=f.h,r=es(i,"VAST,vmap:VMAP"),!r)throw new M(2,10,10007);if(o=[],r.tagName=="VAST")return o=py(r,t.l),f.A(3);if(r.tagName!="vmap:VMAP")return f.A(3);for(s=function(h){var p,m;return C(function(v){if(v.g==1)return T(v,vd(t,h.uri,n),2);if(p=v.h,m=es(p,"VAST"),!m)throw new M(2,10,10007);o.push.apply(o,V(py(m,h.time))),G(v)})},u=[],a=g(_E(r)),l=a.next();!l.done;l=a.next())c=l.value,u.push(s(c));return u.length?T(f,Promise.all(u),3):f.A(3)}Hs(t,o),G(f)})};function Hs(e,t){var n,i,r,o,s,u,a,l;C(function(c){switch(c.g){case 1:n=!1,i=g(t),r=i.next();case 2:if(r.done){c.A(4);break}if(o=r.value,!o.uri){xe("Missing URL in interstitial",o),c.A(3);break}if(o.mimeType){c.A(5);break}return ue(c,6),s=e.i.Yb(),T(c,go(o.uri,s,e.C.getConfiguration().streaming.retryParameters),8);case 8:o.mimeType=c.h,de(c,5);break;case 6:ae(c);case 5:if(u=o.id||JSON.stringify(o),e.T.has(u)){c.A(3);break}o.loop&&!o.overlay&&xe("Loop is only supported in overlay interstitials",o),o.overlay||(n=!0),e.T.add(u),e.H.add(o),a=!1,o.pre&&e.l==null?a=!0:o.startTime!=0||o.canJump?e.l!=null&&(l=o.startTime-e.l,l>0&&l<=10&&(a=!0)):a=!0,a&&(!e.F.has(o)&&Ty(o)&&e.F.set(o,e.i.preload(o.uri,null,o.mimeType||void 0)),Sy(e,o));case 3:r=i.next(),c.A(2);break;case 4:n&&ol(e),FE(e),G(c)}})}function Eo(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.H.size&&e.l!=null){var o=e.g.ended,s=Array.from(e.H).sort(function(f,h){return h.startTime-f.startTime}),u=s;for(u=t?s.filter(function(f){return f.pre}):o?s.filter(function(f){return f.post}):s.filter(function(f){return!f.pre&&!f.post}),s=g(u),u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t)a=u.pre;else if(o)a=u.post;else if(!u.pre&&!u.post){var l=e.l-Math.round(u.startTime*1e3)/1e3,c=1;e.M.allowStartInMiddleOfInterstitial&&u.endTime&&u.endTime!=1/0&&(c=u.endTime-u.startTime),(l>0||l==0&&e.l==0)&&(l<=c||!u.canJump)&&(a=!(n==null&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=u.startTime))}a&&(!e.B||u.startTime>=e.B.startTime)&&(i==(n||0)?r=u:r&&!u.canJump&&Math.round(u.startTime*1e3)/1e3-Math.round(r.startTime*1e3)/1e3>.001&&(r=u,i=0),i++)}}return r}function rl(e,t,n,i,r,o){o=o===void 0?0:o,e.B=t,pd(e),e.u||!e.m||e.h.parentElement||e.m.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.H).filter(function(s){return t.pre?s.pre==t.pre:t.post?s.post==t.post:Math.abs(s.startTime-t.startTime)<.001}).length),t.once&&(o++,e.H.delete(t),hd(e),t.overlay||ol(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?GE(e,t,n,i,o):xe("Unsupported interstitial",t):e.u&&t.overlay?xe("Unsupported interstitial",t):KE(e,t,n,i,r,o)}function GE(e,t,n,i,r){function o(){e.o&&(e.o.stop(),e.o=null),e.m.removeChild(a),gd(e,t),tt(e,"ad-stopped"),e.j.Qa();var h=Eo(e,t.pre,i-r);h?rl(e,h,n,++i,Date.now(),r):e.J=!1}e.J=!0;var s=t.overlay,u=t.mimeType=="text/html"?"iframe":"img",a=document.createElement(u);a.style.objectFit="contain",a.style.position="absolute",a.style.border="none",yy(e,t);var l=new ne(t,n,i);tt(e,"ad-impression"),tt(e,"ad-started",new Map().set("ad",l)),u=="iframe"?a.src=t.uri:(a.src=t.uri,a.onerror=function(h){tt(e,"ad-error",new Map().set("originalEvent",h)),o()}),l=s.viewport;var c=s.topLeft;s=s.size,l.x==0&&l.y==0?(a.width=t.overlay.size.x,a.height=t.overlay.size.y,a.style.bottom="10%",a.style.left="0",a.style.right="0",a.style.width="100%",t.overlay.size.y||u!="iframe"||(a.style.height="auto")):(a.style.height=s.y/l.y*100+"%",a.style.left=c.x/l.x*100+"%",a.style.top=c.y/l.y*100+"%",a.style.width=s.x/l.x*100+"%"),e.m.appendChild(a);var f=Date.now();e.o&&e.o.stop(),e.o=new ge(function(){t.playoutLimit&&(Date.now()-f)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(tt(e,"ad-complete"),o()):e.g.currentTime<t.startTime&&(tt(e,"ad-skipped"),o())}),t.playoutLimit&&!t.endTime?e.o.ia(t.playoutLimit):t.endTime&&e.o.Ea(.025),e.j.D(e.g,"seeked",function(){var h=e.g.currentTime;(h<t.startTime||t.endTime&&h>t.endTime)&&(e.o&&e.o.stop(),tt(e,"ad-skipped"),o())}),t.clickThroughUrl&&e.j.D(a,"click",function(){t.clickThroughUrl&&b.open(t.clickThroughUrl,"_blank")})}function KE(e,t,n,i,r,o){var s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D;C(function(P){switch(P.g){case 1:if(s=Date.now(),e.J=!0,u=!1,a=function(){if(!e.u&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var N=Date.now();e.g.currentTime+=(N-r)/1e3,r=N}},l=function(N){var _,B;return C(function(j){if(j.g==1){if(a(),_=Eo(e,t.pre,i-o),N&&t.groupId)for(;_&&_.groupId==t.groupId;)i++,_=Eo(e,t.pre,i-o);return e.o&&(!t.groupId||_&&_.groupId!=t.groupId)&&(e.o.stop(),e.o=null),gd(e,t),_&&!_.overlay?j.A(2):(t.post&&(e.l=null,e.B=null),e.u?T(j,e.i.detach(),4):T(j,e.i.Cc(),4))}j.g!=2&&(e.u&&(B=t.resumeOffset,B==null&&(B=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-r)/1e3),tt(e,"ad-content-resume-requested",new Map().set("offset",B))),tt(e,"ad-stopped"),e.j.Qa(),e.J=!1,e.u?ol(e):(e.h.style.display="none",a(),e.g.ended||e.g.play())),pd(e),_&&(tt(e,"ad-stopped"),e.j.Qa(),rl(e,_,n,++i,r,o)),G(j)})},c=function(N){return C(function(_){return u?_.return():(u=!0,tt(e,"ad-error",new Map().set("originalEvent",N)),T(_,l(!1),0))})},f=function(){return C(function(N){if(N.g==1)return u?N.return():(u=!0,T(N,l(!1),2));tt(e,"ad-complete"),G(N)})},e.$=function(){return C(function(N){return u?N.return():(u=!0,tt(e,"ad-skipped"),T(N,l(!0),0))})},h=new te(e.h,t,e.$,n,i,!e.u),e.u||(h.setMuted(e.g.muted),h.setVolume(e.g.volume)),tt(e,"ad-started",new Map().set("ad",h)),(p=h.canSkipNow())&&tt(e,"ad-skip-state-changed"),e.j.za(e.i,"error",c),e.j.D(e.h,"timeupdate",function(){if(e.h.duration){var N=h.canSkipNow();p!=N&&h.getRemainingTime()>0&&h.getDuration()>0&&tt(e,"ad-skip-state-changed"),p=N,!e.u&&!t.overlay&&t.resumeOffset==null&&t.timelineRange&&t.endTime&&t.endTime!=1/0&&e.g.currentTime!=t.endTime&&e.C.Ra().end>=t.endTime&&(e.g.currentTime=t.endTime)}}),e.j.za(e.i,"firstquartile",function(){a(),tt(e,"ad-first-quartile")}),e.j.za(e.i,"midpoint",function(){a(),tt(e,"ad-midpoint")}),e.j.za(e.i,"thirdquartile",function(){a(),tt(e,"ad-third-quartile")}),e.j.za(e.i,"complete",f),e.j.D(e.h,"play",function(){tt(e,"ad-resumed")}),e.j.D(e.h,"pause",function(){var N=e.i.getConfiguration();e.h.currentTime>=N.playRangeEnd?f():tt(e,"ad-paused")}),e.j.D(e.h,"volumechange",function(){e.h.muted?tt(e,"ad-muted"):tt(e,"ad-volume-changed")}),t.clickThroughUrl&&(m=e.m||e.h,e.j.D(m,"click",function(){t.clickThroughUrl&&(h.isPaused()||h.pause(),b.open(t.clickThroughUrl,"_blank"))})),!e.u||i!=1){P.A(2);break}return tt(e,"ad-content-pause-requested",new Map().set("saveLivePosition",!0)),v=new je,y=function(N){return C(function(_){if(_.g==1)return N.state!="detach"?_.A(0):xy()?T(_,new Promise(function(B){return new ge(B).ia(.1)}),3):_.A(3);v.resolve(),e.j.Ma(e.C,"onstatechange",y),G(_)})},e.j.D(e.C,"onstatechange",y),T(P,v,2);case 2:return yy(e,t),e.u||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,S=t.overlay.viewport,x=t.overlay.topLeft,A=t.overlay.size,e.h.style.height=A.y/S.y*100+"%",e.h.style.left=x.x/S.x*100+"%",e.h.style.top=x.y/S.y*100+"%",e.h.style.width=A.x/S.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),ue(P,4),md(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(I=t.endTime-t.startTime,I>0&&e.i.configure("playRangeEnd",I)),t.playoutLimit&&!e.o&&(e.o=new ge(function(){e.$()}).ia(t.playoutLimit),e.i.configure("playRangeEnd",t.playoutLimit)),T(P,e.i.Vb(e.h),6);case 6:return R=null,e.M.allowStartInMiddleOfInterstitial&&e.l!=null&&(E=e.l-t.startTime,Math.abs(E)>.25&&(R=E)),e.F.has(t)?T(P,e.F.get(t),10):T(P,e.i.load(t.uri,R,t.mimeType||void 0),8);case 10:return w=P.h,e.F.delete(t),w?T(P,e.i.load(w),8):T(P,e.i.load(t.uri,R,t.mimeType||void 0),8);case 8:t.overlay&&e.g.paused?e.h.pause():e.h.play(),k=(Date.now()-s)/1e3,tt(e,"ads-loaded",new Map().set("loadTime",k)),e.u&&e.g.play(),t.overlay&&(t.pre||t.post||e.C.W()&&!(t.startTime>0)||(L=function(){var N=e.g.currentTime-t.startTime;Math.abs(N-e.h.currentTime)>.1&&(e.h.currentTime=N)},e.j.za(e.h,"playing",L),e.j.D(e.g,"seeking",L)),e.j.D(e.g,"seeked",function(){var N=e.g.currentTime;(N<t.startTime||t.endTime&&N>t.endTime)&&e.$()})),de(P,0);break;case 4:if(D=ae(P),!e.J)return P.return();c(D),G(P)}})}function yy(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],o=n.topLeft.x/n.viewport.x*100;o>0&&o<=100&&(r.push("translateX("+o+"%)"),i=!1),o=n.topLeft.y/n.viewport.y*100,o>0&&o<=100&&(r.push("translateY("+o+"%)"),i=!1),o=n.size.x/n.viewport.x,o<1&&r.push("scaleX("+o+")"),n=n.size.y/n.viewport.y,o<1&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.m&&(t.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",t.background&&(e.m.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function gd(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!t||t.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function XE(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me,le,Be,Ie;return C(function(Te){switch(Te.g){case 1:if(n=[],!t||(i=t.values.find(function(ve){return ve.key=="X-ASSET-URI"}),r=t.values.find(function(ve){return ve.key=="X-ASSET-LIST"}),!i&&!r))return Te.return(n);if(o=null,(s=t.values.find(function(ve){return ve.key=="ID"}))&&(o=s.data),u=o==null?Math.floor(t.startTime*10)/10:t.startTime,(a=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(a=o==null?Math.floor(t.endTime*10)/10:t.endTime),l=t.values.find(function(ve){return ve.key=="X-RESTRICT"}),f=c=!0,l&&l.data&&(h=l.data,c=!h.includes("SKIP"),f=!h.includes("JUMP")),p=c?0:null,(m=t.values.find(function(ve){return ve.key=="X-ENABLE-SKIP-AFTER"}))&&(v=m.data,p=parseFloat(v),isNaN(p)&&(p=c?0:null)),y=null,(S=t.values.find(function(ve){return ve.key=="X-ENABLE-SKIP-FOR"}))&&(x=S.data,y=parseFloat(x),isNaN(p)&&(y=null)),A=null,(I=t.values.find(function(ve){return ve.key=="X-RESUME-OFFSET"}))&&(R=I.data,A=parseFloat(R),isNaN(A)&&(A=null)),E=null,(w=t.values.find(function(ve){return ve.key=="X-PLAYOUT-LIMIT"}))&&(k=w.data,E=parseFloat(k),isNaN(E)&&(E=null)),P=D=L=!1,(N=t.values.find(function(ve){return ve.key=="CUE"}))&&(_=N.data,L=_.includes("ONCE"),D=_.includes("PRE"),P=_.includes("POST")),B=!1,(j=t.values.find(function(ve){return ve.key=="X-TIMELINE-OCCUPIES"}))?(O=j.data,B=O.includes("RANGE")):!I&&e.C.W()&&(B=!D&&!P),i){if(F=i.data,!F)return Te.return(n);n.push({id:o,groupId:null,startTime:u,endTime:a,uri:F,mimeType:null,isSkippable:c,skipOffset:p,skipFor:y,canJump:f,resumeOffset:A,playoutLimit:E,once:L,pre:D,post:P,timelineRange:B,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),Te.A(2);break}if(!r){Te.A(2);break}return H=r.data,H?(ue(Te,4),Q={type:11},T(Te,vd(e,H,Q),6)):Te.return(n);case 6:for(z=Te.h,Ae=ze(z),ce=JSON.parse(Ae),(Le=ce["SKIP-CONTROL"])&&(me=Le["ENABLE-SKIP-AFTER"],typeof me=="number"&&(p=parseFloat(me),isNaN(me)&&(p=c?0:null)),le=Le["ENABLE-SKIP-FOR"],typeof le=="number"&&(y=parseFloat(le),isNaN(le)&&(y=null))),Be=0;Be<ce.ASSETS.length;Be++)Ie=ce.ASSETS[Be],Ie.URI&&n.push({id:o+"_shaka_asset_"+Be,groupId:o,startTime:u,endTime:a,uri:Ie.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:y,canJump:f,resumeOffset:A,playoutLimit:E,once:L,pre:D,post:P,timelineRange:B,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});de(Te,2);break;case 4:ae(Te);case 2:return Te.return(n)}})}function WE(e){var t=[];if(!e)return t;var n=e.values.find(function(y){return y.key=="X-ASSET-URI"});if(!n||(n=n.data,!n))return t;var i=null,r=e.values.find(function(y){return y.key=="X-OVERLAY-ID"});r&&(i=r.data),r=i==null?Math.floor(e.startTime*10)/10:e.startTime;var o=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(o=i==null?Math.floor(e.endTime*10)/10:e.endTime);var s=!1,u=!1,a=!1,l=e.values.find(function(y){return y.key=="CUE"});l&&(a=l.data,s=a.includes("ONCE"),u=a.includes("PRE"),a=a.includes("POST")),l=null;var c=e.values.find(function(y){return y.key=="X-ASSET-MIMETYPE"});c&&(l=c.data),c=!1;var f=e.values.find(function(y){return y.key=="X-LOOP"});f&&(c=f.data=="YES"),f=1;var h=e.values.find(function(y){return y.key=="X-DEPTH"});h&&(f=parseFloat(h.data),isNaN(f)&&(f=1)),h=null;var p=e.values.find(function(y){return y.key=="X-BACKGROUND"});p&&(h=p.data),p=1920;var m=1080,v=e.values.find(function(y){return y.key=="X-VIEWPORT"});if(v){if(m=v.data.split("x"),m.length!=2)return t;p=parseFloat(m[0]),m=parseFloat(m[1])}if(p={viewport:{x:p,y:m},topLeft:{x:0,y:0},size:{x:p,y:m}},m=e.values.find(function(y){return y.key=="X-OVERLAY-POSITION"})){if(m=m.data.split("x"),m.length!=2)return t;p.topLeft.x=parseFloat(m[0]),p.topLeft.y=parseFloat(m[1])}if(m=e.values.find(function(y){return y.key=="X-OVERLAY-SIZE"})){if(m=m.data.split("x"),m.length!=2)return t;p.size.x=parseFloat(m[0]),p.size.y=parseFloat(m[1])}if(m=null,(v=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT"}))&&(m=parseFloat(v.data),isNaN(m)&&(m=1),m={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*m,y:1080*m}},e=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return t;m.topLeft.x=parseFloat(e[0]),m.topLeft.y=parseFloat(e[1])}return t.push({id:i,groupId:null,startTime:r,endTime:o,uri:n,mimeType:l,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:s,pre:u,post:a,timelineRange:!0,loop:c,overlay:p,displayOnBackground:f==-1,currentVideo:m,background:h,clickThroughUrl:null}),t}function ol(e){for(var t=[],n=g(e.H),i=n.next(),r={};!i.done;r={Bc:void 0},i=n.next())i=i.value,i.overlay||(r.Bc={start:i.startTime,end:null},i.pre?(r.Bc.start=0,r.Bc.end=null):i.post?(r.Bc.start=-1,r.Bc.end=null):i.timelineRange&&(r.Bc.end=i.endTime),t.find((function(o){return function(s){return o.Bc.start==s.start&&o.Bc.end==s.end}})(r))||t.push(r.Bc));tt(e,"ad-cue-points-changed",new Map().set("cuepoints",t))}function md(e){e.i.configure(e.C.gi()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),wg(e.C.Yb(),e.i.Yb())}function vd(e,t,n){var i,r,o;return C(function(s){return s.g==1?(i=ot([t],_n()),r=e.C.Yb().request(7,i,n),T(s,r.promise,2)):(o=s.h,s.return(o.data))})}function Ty(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function xy(){var e=he().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function Sy(e,t){if(!(e.K.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(o){var s=document.createElement("link");return s.rel="preload",s.href=o,s.as="image",document.head.appendChild(s),s},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.K.set(t,i)}}function wy(e,t){if(e.K.has(t)){var n=e.K.get(t);n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.K.delete(t)}}function tt(e,t,n){e.va(new Y(t,n))}function $(e,t,n,i,r){this.h=e,this.j=Xr(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}d=$.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return typeof this.j=="number"},d.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.o},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.l?this.l:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return this.h.vastAdId||""},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.l=this.i=this.g=this.h=null},K("shaka.ads.MediaTailorAd",$),$.prototype.release=$.prototype.release,$.prototype.getPodIndex=$.prototype.getPodIndex,$.prototype.getTimeOffset=$.prototype.getTimeOffset,$.prototype.getMediaUrl=$.prototype.getMediaUrl,$.prototype.getAdvertiserName=$.prototype.getAdvertiserName,$.prototype.getCreativeAdId=$.prototype.getCreativeAdId,$.prototype.getAdId=$.prototype.getAdId,$.prototype.getVastAdId=$.prototype.getVastAdId,$.prototype.getVastMediaWidth=$.prototype.getVastMediaWidth,$.prototype.getVastMediaHeight=$.prototype.getVastMediaHeight,$.prototype.getVastMediaBitrate=$.prototype.getVastMediaBitrate,$.prototype.getDescription=$.prototype.getDescription,$.prototype.getTitle=$.prototype.getTitle,$.prototype.getPositionInSequence=$.prototype.getPositionInSequence,$.prototype.getSequenceLength=$.prototype.getSequenceLength,$.prototype.setMuted=$.prototype.setMuted,$.prototype.resize=$.prototype.resize,$.prototype.isLinear=$.prototype.isLinear,$.prototype.isMuted=$.prototype.isMuted,$.prototype.setVolume=$.prototype.setVolume,$.prototype.getVolume=$.prototype.getVolume,$.prototype.play=$.prototype.play,$.prototype.pause=$.prototype.pause,$.prototype.skip=$.prototype.skip,$.prototype.canSkipNow=$.prototype.canSkipNow,$.prototype.getTimeUntilSkippable=$.prototype.getTimeUntilSkippable,$.prototype.isSkippable=$.prototype.isSkippable,$.prototype.isPaused=$.prototype.isPaused,$.prototype.getRemainingTime=$.prototype.getRemainingTime,$.prototype.getMinSuggestedDuration=$.prototype.getMinSuggestedDuration,$.prototype.getDuration=$.prototype.getDuration,$.prototype.isUsingAnotherMediaElement=$.prototype.isUsingAnotherMediaElement,$.prototype.hasCustomClick=$.prototype.hasCustomClick,$.prototype.isClientRendering=$.prototype.isClientRendering,$.prototype.needsSkipUI=$.prototype.needsSkipUI;function Gs(e,t,n,i){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=i,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new Me}Gs.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);Io(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Gs.prototype.release=function(){this.stop(),this.o&&this.o.release()},Gs.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(YE(this,this.H,this.O),this.O=!1)},Gs.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next()){n=g(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function zE(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m;C(function(v){if(v.g==1)return i={type:7},r=ot([t],_n()),r.method="POST",n&&(o=JSON.stringify(n),r.body=jn(o)),s=e.K.request(7,r,i),ue(v,2),T(v,s.promise,4);if(v.g!=2){if(u=v.h,a=ze(u.data),l=JSON.parse(a),l.manifestUrl&&l.trackingUrl)c=new nt(t),f=new nt(l.trackingUrl),e.H=c.resolve(f).toString(),h=Date.now()/1e3,p=h-e.R,e.i(new Y("ads-loaded",new Map().set("loadTime",p))),m=new nt(l.manifestUrl),e.l.resolve(c.resolve(m).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return de(v,0)}if(ae(v),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,v.return();e.l.resolve(e.I),e.l=null,G(v)})}function YE(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x;C(function(A){if(A.g==1)return i={type:8},r=ot([t],_n()),o=e.K.request(7,r,i),ue(A,2),T(A,o.promise,4);if(A.g!=2){if(s=A.h,u=[],a=ze(s.data),l=JSON.parse(a),l.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=g(e.j),f=c.next();!f.done;f=c.next())for(h=f.value,p=g(h.nonLinearAdsList),m=p.next();!m.done;m=p.next())for(v=m.value,y=g(v.nonLinearAdList),S=y.next();!S.done;S=y.next())x=S.value,qE(e,x);u=e.getCuePoints(),e.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",u))),Io(e),e.j=[];return n&&(e.J||u.length>0)&&JE(e),de(A,0)}ae(A),G(A)})}function qE(e,t){var n,i,r,o,s,u,a,l;C(function(c){if(c.g==1)return!t.staticResource||(n=Ay(t),e.G.get(n))?c.return():(i={type:9},r=ot([t.staticResource],_n()),o=e.K.request(7,r,i),ue(c,2),e.G.set(n,[]),T(c,o.promise,4));if(c.g!=2)return s=c.h,u=ze(s.data),a=JSON.parse(u),l=a.apps,e.G.set(n,l),de(c,0);ae(c),e.G.delete(n),G(c)})}function Ay(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function JE(e){Iy(e),e.J||(Ey(e),e.o.D(e.h,"seeked",function(){Ey(e)}),e.o.D(e.h,"ended",function(){Io(e)})),e.o.D(e.h,"timeupdate",function(){Iy(e)})}function Ey(e){var t=e.h.currentTime;if(t!=0&&e.B==null){for(var n,i,r=g(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=g(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.N.includes(i.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function Iy(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.F,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),bt(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),bt(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),bt(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&i>0&&r>0&&bt(e,"skipStateChanged"),r>0&&(i<=0||i>r)&&Io(e)}if(!e.g||!e.g.isLinear()){e:for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}Io(e),e.M=r,e.g=new $(s,o+1,r.ads.length,!0,e.h),e.F=s,o===0&&bt(e,"breakStart"),Cy(e);break}}if(!e.g){for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.G.get(Ay(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){Io(e),u=e,a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.C.appendChild(c)}e.M=r,e.g=new $(s,o+1,r.ads.length,!1,e.h),e.F=s,o===0&&bt(e,"breakStart"),Cy(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function Io(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;t!==void 0&&t?bt(e,"skip"):bt(e,"complete"),t=g(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&bt(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Cy(e){var t=!1;e.h.paused?t=!0:(bt(e,"impression"),bt(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&bt(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||bt(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(bt(e,"impression"),bt(e,"start"),t=!1):bt(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){bt(e,"pause")}});for(var n=g(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function bt(e,t){var n=e.F.trackingEvents.find(function(o){return o.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(o){return o.eventType==t})),n){var i={type:10};n=g(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=ot([r],_n()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new Y("ad-impression"));break;case"start":e.i(new Y("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Y("ad-muted"));break;case"unmute":e.i(new Y("ad-volume-changed"));break;case"resume":e.i(new Y("ad-resumed"));break;case"pause":e.i(new Y("ad-paused"));break;case"firstQuartile":e.i(new Y("ad-first-quartile"));break;case"midpoint":e.i(new Y("ad-midpoint"));break;case"thirdQuartile":e.i(new Y("ad-third-quartile"));break;case"complete":e.i(new Y("ad-complete")),e.i(new Y("ad-stopped"));break;case"skip":e.i(new Y("ad-skipped")),e.i(new Y("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Y("ad-skip-state-changed"))}}function ie(e,t){this.g=e,this.i=null,this.h=t}d=ie.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},K("shaka.ads.ServerSideAd",ie),ie.prototype.release=ie.prototype.release,ie.prototype.getPodIndex=ie.prototype.getPodIndex,ie.prototype.getTimeOffset=ie.prototype.getTimeOffset,ie.prototype.getMediaUrl=ie.prototype.getMediaUrl,ie.prototype.getAdvertiserName=ie.prototype.getAdvertiserName,ie.prototype.getCreativeAdId=ie.prototype.getCreativeAdId,ie.prototype.getAdId=ie.prototype.getAdId,ie.prototype.getVastAdId=ie.prototype.getVastAdId,ie.prototype.getVastMediaWidth=ie.prototype.getVastMediaWidth,ie.prototype.getVastMediaHeight=ie.prototype.getVastMediaHeight,ie.prototype.getVastMediaBitrate=ie.prototype.getVastMediaBitrate,ie.prototype.getDescription=ie.prototype.getDescription,ie.prototype.getTitle=ie.prototype.getTitle,ie.prototype.getPositionInSequence=ie.prototype.getPositionInSequence,ie.prototype.getSequenceLength=ie.prototype.getSequenceLength,ie.prototype.setMuted=ie.prototype.setMuted,ie.prototype.resize=ie.prototype.resize,ie.prototype.isLinear=ie.prototype.isLinear,ie.prototype.isMuted=ie.prototype.isMuted,ie.prototype.setVolume=ie.prototype.setVolume,ie.prototype.getVolume=ie.prototype.getVolume,ie.prototype.play=ie.prototype.play,ie.prototype.pause=ie.prototype.pause,ie.prototype.skip=ie.prototype.skip,ie.prototype.canSkipNow=ie.prototype.canSkipNow,ie.prototype.getTimeUntilSkippable=ie.prototype.getTimeUntilSkippable,ie.prototype.isSkippable=ie.prototype.isSkippable,ie.prototype.isPaused=ie.prototype.isPaused,ie.prototype.getRemainingTime=ie.prototype.getRemainingTime,ie.prototype.getMinSuggestedDuration=ie.prototype.getMinSuggestedDuration,ie.prototype.getDuration=ie.prototype.getDuration,ie.prototype.isUsingAnotherMediaElement=ie.prototype.isUsingAnotherMediaElement,ie.prototype.hasCustomClick=ie.prototype.hasCustomClick,ie.prototype.isClientRendering=ie.prototype.isClientRendering,ie.prototype.needsSkipUI=ie.prototype.needsSkipUI;function My(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new Me,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Y("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){$E(r,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new ie(o,r.l),r.B&&(r.m.i=r.B),r.i(new Y("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var o=r.l.currentTime;r.o&&r.o>o&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.B=o.getStreamData().adProgressData,r.m&&(r.m.i=r.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new Y("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new Y("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new Y("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new Y("ad-complete")),r.i(new Y("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new Y("ad-skipped")),r.i(new Y("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=g(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.F=o,r.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",o)))})}d=My.prototype,d.configure=function(){},d.stop=function(){this.C="",this.o=null,this.F=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},d.getCuePoints=function(){return this.F};function $E(e,t){e.i(new Y("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function X(){Ne.call(this),this.h=this.i=this.j=this.g=null,this.m=new hy,this.o=navigator.language,this.l=null}Qe(X,Ne),d=X.prototype,d.setLocale=function(e){this.o=e},d.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},d.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new vy(e,t,n,function(r){return sl(i,r)}),this.g.configure(this.l)},d.initClientSide=function(e,t,n){var i=this;if(!b.google||!google.ima||!google.ima.AdsLoader)throw new M(2,10,1e4);this.j&&this.j.release(),this.j=new nl(e,t,this.o,n,function(r){return sl(i,r)}),this.j.configure(this.l)},d.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Ne.prototype.release.call(this)},d.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Y("ad-stopped")),this.dispatchEvent(new Y("ad-content-attach-requested")),this.m=new hy},d.requestClientSideAds=function(e){if(!this.j)throw new M(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new M(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},d.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Gs(e,t,n,function(r){return sl(i,r)})},d.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new M(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new M(1,10,10004)):(i.l=new je,zE(i,e,t),i.I=n||"",i.R=Date.now()/1e3,e=i.l),e},d.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new M(1,10,10005);var t=this.i;t.H=e,t.i(new Y("ads-loaded",new Map().set("loadTime",0)))},d.initServerSide=function(e,t){var n=this;if(!b.google||!google.ima||!google.ima.dai)throw new M(2,10,10002);this.h&&this.h.release(),this.h=new My(e,t,this.o,function(i){return sl(n,i)}),this.h.configure(this.l)},d.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new M(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&xe('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.9",n=this.h,n.j?e=Promise.reject(new M(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new je,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new M(1,10,10003);(e.mpt||e.mpv)&&xe('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.9",this.h.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Ee("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:OE(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},d.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},d.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},d.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&VE(this.g,n))},d.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,o=n.endTime,s=null,u=0,a,l=g(n.eventNode.children),c=l.next();!c.done;c=l.next())if(c=c.value,c.tagName=="AlternativeMPD"){if(c=c.attributes.uri){a=c;break}}else if(c.tagName=="InsertPresentation"||c.tagName=="ReplacePresentation"){var f=c.attributes.url;if(f){a=Ut(f),(l=oe(c,"maxDuration",xt))&&(s=l/n.timescale),(l=oe(c,"returnOffset",xt))&&(u=l/n.timescale),t&&u&&(o=r+u);break}}a&&Hs(e,[{id:n.id,groupId:null,startTime:r,endTime:o,uri:a,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&Ge(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&HE(this.g,n))}},d.addCustomInterstitial=function(e){if(!this.g)throw new M(1,10,10006);Hs(this.g,[e])},d.addAdUrlInterstitial=function(e){if(!this.g)throw new M(1,10,10006);return this.g.addAdUrlInterstitial(e)},d.getInterstitialPlayer=function(){if(!this.g)throw new M(1,10,10006);return this.g.td()};function sl(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}K("shaka.ads.AdManager",X),X.prototype.getInterstitialPlayer=X.prototype.getInterstitialPlayer,X.prototype.addAdUrlInterstitial=X.prototype.addAdUrlInterstitial,X.prototype.addCustomInterstitial=X.prototype.addCustomInterstitial,X.prototype.onDASHInterstitialMetadata=X.prototype.onDASHInterstitialMetadata,X.prototype.onHLSInterstitialMetadata=X.prototype.onHLSInterstitialMetadata,X.prototype.onCueMetadataChange=X.prototype.onCueMetadataChange,X.prototype.onHlsTimedMetadata=X.prototype.onHlsTimedMetadata,X.prototype.onDashTimedMetadata=X.prototype.onDashTimedMetadata,X.prototype.onManifestUpdated=X.prototype.onManifestUpdated,X.prototype.getStats=X.prototype.getStats,X.prototype.getCuePoints=X.prototype.getCuePoints,X.prototype.getServerSideCuePoints=X.prototype.getServerSideCuePoints,X.prototype.replaceServerSideAdTagParameters=X.prototype.replaceServerSideAdTagParameters,X.prototype.requestServerSideStream=X.prototype.requestServerSideStream,X.prototype.initServerSide=X.prototype.initServerSide,X.prototype.addMediaTailorTrackingUrl=X.prototype.addMediaTailorTrackingUrl,X.prototype.requestMediaTailorStream=X.prototype.requestMediaTailorStream,X.prototype.initMediaTailor=X.prototype.initMediaTailor,X.prototype.updateClientSideAdsRenderingSettings=X.prototype.updateClientSideAdsRenderingSettings,X.prototype.requestClientSideAds=X.prototype.requestClientSideAds,X.prototype.onAssetUnload=X.prototype.onAssetUnload,X.prototype.release=X.prototype.release,X.prototype.initClientSide=X.prototype.initClientSide,X.prototype.initInterstitial=X.prototype.initInterstitial,X.prototype.configure=X.prototype.configure,X.prototype.setLocale=X.prototype.setLocale,X.ADS_LOADED="ads-loaded",X.AD_STARTED="ad-started",X.AD_FIRST_QUARTILE="ad-first-quartile",X.AD_MIDPOINT="ad-midpoint",X.AD_THIRD_QUARTILE="ad-third-quartile",X.AD_COMPLETE="ad-complete",X.AD_STOPPED="ad-stopped",X.AD_SKIPPED="ad-skipped",X.AD_VOLUME_CHANGED="ad-volume-changed",X.AD_MUTED="ad-muted",X.AD_PAUSED="ad-paused",X.AD_RESUMED="ad-resumed",X.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",X.CUEPOINTS_CHANGED="ad-cue-points-changed",X.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",X.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",X.AD_CLICKED="ad-clicked",X.AD_PROGRESS="ad-progress",X.AD_BUFFERING="ad-buffering",X.AD_IMPRESSION="ad-impression",X.AD_DURATION_CHANGED="ad-duration-changed",X.AD_CLOSED="ad-closed",X.AD_LOADED="ad-loaded",X.ALL_ADS_COMPLETED="all-ads-completed",X.AD_LINEAR_CHANGED="ad-linear-changed",X.AD_METADATA="ad-metadata",X.AD_RECOVERABLE_ERROR="ad-recoverable-error",X.AD_ERROR="ad-error",X.AD_BREAK_READY="ad-break-ready",X.AD_INTERACTION="ad-interaction",X.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",X.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",X.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",el=function(){return new X};function yd(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(t=n instanceof Y,n instanceof Event||t){var i={};for(o in n){var r=n[o];r&&typeof r=="object"?o=="detail"?i[o]=r:r instanceof Event||r instanceof Y?i[o]={__type__:"Event",event:yd(r)}:t&&Array.isArray(r)&&(i[o]=r):o in Event||(i[o]=r)}return i}if(n instanceof Error){var o=new Set(["name","message","stack"]);for(i in n)o.add(i);for(t=g(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())o.add(i.value);for(t={},o=g(o),i=o.next();!i.done;i=o.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(o={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=g(xi(n)),t=n.next();!t.done;t=n.next())t=t.value,i=t.end,o.start.push(t.start),o.end.push(i);n=o}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n;return n}})}function ul(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=QE(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n&&typeof n=="object"&&n.__type__=="Event"?ul(n.event):n;return i})}function QE(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var ky="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ZE="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Td=["loop","playbackRate"],e2=["pause","play"],xd=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1).set("isRemotePlayback",1),Sd=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Dy=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),Ry=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Ly=[["isTextTrackVisible","setTextTrackVisibility"]],t2="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),n2="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function wd(e,t,n,i,r,o,s){var u=this;this.H=e,this.K=s,this.l=new ge(t),this.M=n,this.u=!1,this.B=i,this.G=r,this.N=o,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return Ad(u)},this.F=function(a,l){switch(a=ul(l),a.type){case"event":var c=a.targetName,f=Sg(a.event);u.B(c,f);break;case"update":c=a.update;for(f in c){a=u.g[f]||{};for(var h in c[f])a[h]=c[f][h]}u.u&&(u.M(),u.u=!1);break;case"asyncComplete":if(h=a.id,f=a.error,l=a.res,a=u.h.get(h),u.h.delete(h),a)if(f){h=new M(f.severity,f.category,f.code);for(c in f)h[c]=f[c];a.reject(h)}else a.resolve(l)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,Xs.add(this)}d=wd.prototype,d.destroy=function(){return Xs.delete(this),Ed(this),bn&&Ny(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},d.wb=function(){return this.i},d.dh=function(){return this.J},d.init=function(){if(this.H.length)if(b.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Kb();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=g(Xs),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new je,i.u=!0,al(i,r)}},function(t){for(var n=g(Xs),i=n.next();!i.done;i=n.next())i=i.value,ll=t=="available",i.l.Kb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),ll&&this.l.ia(r2),(e=bn)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new je,this.u=!0,al(this,e)):bn=null}else b.__onGCastApiAvailable!==jy&&(cl=b.__onGCastApiAvailable||null,b.__onGCastApiAvailable=jy)},d.ph=function(e){this.o=e,this.i&&Ks(this,{type:"appData",appData:this.o})},d.cast=function(){var e=this;return C(function(t){if(!e.m)throw new M(1,8,8e3);if(!ll)throw new M(1,8,8001);if(e.i)throw new M(1,8,8002);return e.j=new je,chrome.cast.requestSession(function(n){return al(e,n)},function(n){return Py(e,n)}),T(t,e.j,0)})};function i2(e){e.i&&chrome.cast.requestSession(function(t){return al(e,t)},function(t){return Py(e,t)})}d.qd=function(){if(this.i){if(Ed(this),bn){Ny(this);try{bn.stop(function(){},function(){})}catch{}bn=null}Ad(this)}},d.get=function(e,t){var n=this;if(e=="video"){if(e2.includes(t))return function(){return n.Ji.apply(n,[e,t].concat(V(gt.apply(0,arguments))))}}else if(e=="player"){if(Dy.has(t)&&!this.get("player","isLive")())return function(){};if(t2.includes(t))return function(){return n.Ji.apply(n,[e,t].concat(V(gt.apply(0,arguments))))};if(n2.includes(t))return function(){return n.Lk.apply(n,[e,t].concat(V(gt.apply(0,arguments))))};if(xd.has(t)||Sd.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},d.set=function(e,t,n){this.g[e][t]=n,Ks(this,{type:"set",targetName:e,property:t,value:n})};function al(e,t){var n=e.N();bn=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),Ad(e),Ks(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Py(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new M(2,8,n,t))}d.Ji=function(e,t){Ks(this,{type:"call",targetName:e,methodName:t,args:gt.apply(2,arguments)})},d.Lk=function(e,t){var n=gt.apply(2,arguments),i=new je,r=this.I.toString();this.I++,this.h.set(r,i);try{Ks(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function Ny(e){var t=bn;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function Ad(e){var t=bn?bn.status=="connected":!1;if(e.i&&!t){e.G();for(var n in e.g)e.g[n]={};Ed(e)}e.i=t,e.J=t?bn.receiver.friendlyName:"",e.l.Kb()}function Ed(e){if(e.h)for(var t=g(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new M(1,7,7e3))}}function Ks(e,t){t=yd(t);var n=bn;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Vx)}catch(i){throw t=new M(2,8,8005,i),n=new Y("error",new Map().set("detail",t)),e.B("player",n),e.qd(),t}}var r2=.02,ll=!1,bn=null,cl=null,Xs=new Set;function jy(e){if(cl?b.__onGCastApiAvailable=cl:delete b.__onGCastApiAvailable,cl=null,e)for(var t=g(Xs),n=t.next();!n.done;n=t.next())n.value.init();typeof b.__onGCastApiAvailable=="function"&&b.__onGCastApiAvailable(e)}function st(e,t,n,i){i=i===void 0?!1:i,Ne.call(this);var r=this;this.i=e,this.h=t,this.l=this.o=this.m=this.u=this.j=null,this.I=n,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,b.chrome&&he().Oa()!="CAST"?(this.g=new wd(n,function(){return _y(r)},function(){return By(r)},function(o,s){return Fy(r,o,s)},function(){return by(r)},function(){return Uy(r)},i),o2(this)):(this.j=this.i,this.u=this.h)}Qe(st,Ne),d=st.prototype,d.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Ne.prototype.release.call(this),Promise.all(e)},d.ck=function(){return this.j},d.td=function(){return this.u},d.oj=function(){return this.g?this.g.m&&ll:!1},d.wb=function(){return this.g?this.g.wb():!1},d.dh=function(){return this.g?this.g.dh():""},d.cast=function(){var e=this;return C(function(t){return t.g==1?e.g?T(t,e.g.cast(),2):t.return():e.h?T(t,e.h.Cc(),0):t.return()})},d.ph=function(e){this.g&&this.g.ph(e)},d.al=function(){this.g&&i2(this.g)},d.qd=function(){this.g&&this.g.qd()},d.pj=function(e,t){t=t===void 0?!1:t;var n=this;return C(function(i){if(i.g==1)return e==n.I&&t==n.H||(n.I=e,n.H=t,!n.g)?i.return():(n.g.qd(),T(i,n.g.destroy(),2));n.g=null,n.g=new wd(e,function(){return _y(n)},function(){return By(n)},function(r,o){return Fy(n,r,o)},function(){return by(n)},function(){return Uy(n)},t),n.g.init(),G(i)})};function o2(e){e.g.init(),e.l=new Me;for(var t=g(ky),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(o){e.g.wb()||(o=Sg(o),e.m.dispatchEvent(o))});for(var i in ea)e.l.D(e.h,ea[i],function(o){e.g.wb()||e.o.dispatchEvent(o)});e.j={},t={};for(var r in e.i)t={fe:t.fe},t.fe=r,Object.defineProperty(e.j,t.fe,{configurable:!1,enumerable:!0,get:(function(o){return function(){return u2(e,o.fe)}})(t),set:(function(o){return function(s){var u=o.fe;e.g.wb()?e.g.set("video",u,s):e.i[u]=s}})(t)});e.u={},Oy(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return fl(e,o)}})}),s2(e),e.m=new Ne,e.m.He=e.j,e.o=new Ne,e.o.He=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.wb()||Id(e)})}function s2(e){var t=new Map;Oy(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.G.set(n,i):e.G.set(i,n)):t.set(i,n)})}function Oy(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=g(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function Uy(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=g(Td),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=g(Ry),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=g(Ly),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function _y(e){var t=new Y("caststatuschanged");e.dispatchEvent(t)}function By(e){var t=new Y(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function by(e){for(var t=g(Ry),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.F,o=e.C,s=e.B;Id(e);var u=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var l;(i=e.g.get("player","getTextTracks")())&&i.length&&(l=i.find(function(h){return h.active}));var c=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var f={};for(n=g(Td),i=n.next();!i.done;i=n.next())i=i.value,f[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var h=g(r),p=h.next();!p.done;p=h.next()){p=p.value;var m;(m=e.td()).Ne.apply(m,V(p))}for(h=g(o),m=h.next();!m.done;m=h.next()){m=m.value;var v;(v=e.td()).Pd.apply(v,V(m))}for(v=g(s),h=v.next();!h.done;h=v.next()){h=h.value;var y;(y=e.td()).Me.apply(y,V(h))}for(y=g(Td),v=y.next();!v.done;v=y.next())v=v.value,e.i[v]=f[v];for(y=g(Ly),v=y.next();!v.done;v=y.next())h=v.value,v=h[1],h=e.g.get("player",h[0])(),e.h[v](h);e.h.uh(c),l&&e.h.nh(l.language,l.roles,l.forced),e.i.autoplay=a,u&&e.i.play()}},function(h){h=new Map().set("detail",h),h=new Y("error",h),e.h.dispatchEvent(h)})}function u2(e,t){if(t=="addEventListener")return function(i,r,o){return e.m.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.m.removeEventListener(i,r,o)};if(e.g.wb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.wb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function fl(e,t,n){if(n=n===void 0?!1:n,e.G.has(t)&&(t=e.G.get(t)),t=="addEventListener")return function(i,r,o){return e.o.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.o.removeEventListener(i,r,o)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Yb()};if(t=="getDrmEngine")return function(){return e.h.F};if(t=="getAdManager")return function(){return e.h.ai()};if(t=="getQueueManager")return function(){return e.h.ji()};if(t=="setVideoContainer")return function(i){return e.h.Wi(i)};if(!n){if(t=="addThumbnailsTrack")return function(){var i=gt.apply(0,arguments);return e.F.push(i),fl(e,t,!0).apply(null,V(i))};if(t=="addTextTrackAsync")return function(){var i=gt.apply(0,arguments);return e.C.push(i),fl(e,t,!0).apply(null,V(i))};if(t=="addChaptersTrack")return function(){var i=gt.apply(0,arguments);return e.B.push(i),fl(e,t,!0).apply(null,V(i))}}if(e.g.wb()){if(t=="getManifest"||t=="drmInfo")return function(){return xe(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return xe(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return xe(t+"() does not work while casting!"),[]}}return e.g.wb()&&Object.keys(e.g.g.video).length==0&&(xd.has(t)||Sd.has(t))||!e.g.wb()?e.h[t].bind(e.h):e.g.get("player",t)}function Fy(e,t,n){e.g.wb()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&Id(e),e.o.dispatchEvent(n)))}function Id(e){e.F=[],e.C=[],e.B=[]}K("shaka.cast.CastProxy",st),st.prototype.changeReceiverId=st.prototype.pj,st.prototype.forceDisconnect=st.prototype.qd,st.prototype.suggestDisconnect=st.prototype.al,st.prototype.setAppData=st.prototype.ph,st.prototype.cast=st.prototype.cast,st.prototype.receiverName=st.prototype.dh,st.prototype.isCasting=st.prototype.wb,st.prototype.canCast=st.prototype.oj,st.prototype.getPlayer=st.prototype.td,st.prototype.getVideo=st.prototype.ck,st.prototype.destroy=st.prototype.destroy;function Rt(e,t,n,i){Ne.call(this);var r=this;this.h=e,this.g=t,this.j=new Me,this.I={video:e,player:t},this.G=n||function(){},this.J=i||function(o){return o},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new ge(function(){Cd(r)}),a2(this)}Qe(Rt,Ne),d=Rt.prototype,d.isConnected=function(){return this.H},d.jk=function(){return this.o},d.Xk=function(e){this.i=e},d.tj=function(){this.i=null},d.Yk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.Wk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.Vk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var e=this,t,n;return C(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.o=!0,e.l=null,e.u=null,Ne.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),G(i)})};function a2(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Vy(e)},t.onSenderDisconnected=function(){return Vy(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&Ci(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),Ci(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return f2(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return c2(e,r)},t.start(),t=g(ky);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(r){return Hy(e,"video",r)});for(var i in ea)e.j.D(e.g,ea[i],function(r){return Hy(e,"player",r)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Co(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Co(e)}),e.j.D(e.h,"pause",function(){Co(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Co(e)}),e.j.D(e.h,"ended",function(){new ge(function(){e.h&&e.h.ended&&(e.o=!0,Co(e))}).ia(h2)})}function Vy(e){e.m=0,e.B=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Co(e)}function Co(e){var t;C(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.g)return n.return();t=new Y("caststatuschanged"),e.dispatchEvent(t),Gy(e)||Mi(e),G(n)})}function l2(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R;C(function(E){switch(E.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.G(n),o=e.h.autoplay,t.manifest?(e.h.autoplay=!1,ue(E,5),T(E,e.g.load(t.manifest,t.startTime),7)):T(E,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(s=g(t.addThumbnailsTrackCalls),u=s.next();!u.done;u=s.next())a=u.value,e.g.Ne.apply(e.g,V(a));if(t.addTextTrackAsyncCalls)for(l=g(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())f=c.value,e.g.Pd.apply(e.g,V(f));if(t.addChaptersTrackCalls)for(h=g(t.addChaptersTrackCalls),p=h.next();!p.done;p=h.next())m=p.value,e.g.Me.apply(e.g,V(m));de(E,3);break;case 5:return v=ae(E),y=new Map().set("detail",v),S=new Y("error",y),e.g&&e.g.dispatchEvent(S),E.return();case 3:if(!e.g)return E.return();for(x in t.video)A=t.video[x],e.h[x]=A;for(I in t.playerAfterLoad)R=t.playerAfterLoad[I],e.g[I](R);e.h.autoplay=o,t.manifest&&(e.h.play(),Mi(e)),G(E)}})}function Hy(e,t,n){e.g&&(Cd(e),Ci(e,{type:"event",targetName:t,event:n},e.l))}function Cd(e){e.F.ia(d2);for(var t={video:{},player:{}},n=g(ZE),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.W()&&Dy.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),xd.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Ci(e,{type:"update",update:t},e.l),Sd.forEach(function(r,o){e.m%r==0&&(r={player:{}},r.player[o]=e.g[o](),Ci(e,{type:"update",update:r},e.l))}),e.C&&(e.m+=1),Gy(e)}function Gy(e){return e.B&&(e.h.duration||e.g.W())?(Md(e),e.B=!1,!0):!1}function Md(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Mi(e,t===void 0?0:t,n)}function c2(e,t){var n=ul(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,l2(e,n.initState,n.appData),Cd(e);break;case"appData":e.G(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.I[i][r]=n;break;case"call":i=e.I[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.C=!1);var o=n.id,s=t.senderId;t=e.I[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.B=!0})),n.then(function(u){return Ky(e,s,o,null,u)},function(u){return Ky(e,s,o,u,null)})}}function f2(e,t){var n=ul(t.data);switch(n.type){case"PLAY":e.h.play(),Mi(e);break;case"PAUSE":e.h.pause(),Mi(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.h.play(),Mi(e)):i&&i=="PLAYBACK_PAUSE"&&(e.h.pause(),Mi(e));break;case"STOP":e.g.Cc().then(function(){e.g&&Mi(e)});break;case"GET_STATUS":Md(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.h.volume,o=e.h.muted;t!=null&&(e.h.volume=Number(t)),i!=null&&(e.h.muted=i),r==e.h.volume&&o==e.h.muted||Mi(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),o=n.autoplay||!0,e.G(t.customData),o&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&Md(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),Ci(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:Ci(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function Ky(e,t,n,i,r){e.g&&Ci(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function Ci(e,t,n,i){e.H&&(e=yd(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Mi(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?p2:e.g.Qg()?m2:e.h.paused?v2:g2,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),Ci(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}K("shaka.cast.CastReceiver",Rt),Rt.prototype.destroy=Rt.prototype.destroy,Rt.prototype.setContentArtist=Rt.prototype.Vk,Rt.prototype.setContentImage=Rt.prototype.Wk,Rt.prototype.setContentTitle=Rt.prototype.Yk,Rt.prototype.clearContentMetadata=Rt.prototype.tj,Rt.prototype.setContentMetadata=Rt.prototype.Xk,Rt.prototype.isIdle=Rt.prototype.jk,Rt.prototype.isConnected=Rt.prototype.isConnected;var d2=.5,h2=5,p2="IDLE",g2="PLAYING",m2="BUFFERING",v2="PAUSED";function Xy(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(I){return I!=null&&I.g.trim()!=""})){o=u;break}for(u=n.length-1;u>=0;u--)if(n[u].some(function(I){return I!=null&&I.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",f=kd(i,r,u,a,l,c);o<=s;o++){for(var h=n[o],p=-1,m=-1,v=0;v<h.length;v++)if(h[v]!=null&&h[v].g.trim()!==""){p=v;break}for(v=h.length-1;v>=0;v--)if(h[v]!=null&&h[v].g.trim()!==""){m=v;break}if(p===-1||m===-1)h=Wy(i,r),e.nestedCues.push(h);else{for(;p<=m;p++)if(v=h[p]){var y=v.l,S=v.i,x=v.j,A=v.h;(y!=u||S!=a||x!=l||A!=c)&&(f.payload&&e.nestedCues.push(f),f=kd(i,r,y,S,x,A),u=y,a=S,l=x,c=A),f.payload+=v.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==s&&(f=Wy(i,r),e.nestedCues.push(f)),f=kd(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function kd(e,t,n,i,r,o){return e=new Ve(e,t,""),n&&e.textDecoration.push(di),i&&(e.fontStyle=zr),e.color=r,e.backgroundColor=o,e}function Wy(e,t){return e=new Ve(e,t,""),e.lineBreak=!0,e}function zy(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Dd(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Ws(this)}function dl(e,t,n){var i="CC"+((e.F<<1|e.C)+1),r=new Ve(t,n,"");r.lineInterpretation=1;var o=Jy.get(e.g);return o&&(r.line=o),e.u!=null&&e.B!=null&&(r.position=10+Math.min(70,e.u*10)+e.B*2.5),(t=Xy(r,i,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(o=Jy.get(e.g+3-t.cue.nestedCues.length))&&(r.line=o),t}function Ws(e){ki(e,0,15),e.g=1}function Mo(e,t,n){if(!(n<32||n>127)){var i="";switch(t){case 0:i=qy.has(n)?qy.get(n):String.fromCharCode(n);break;case 1:i=y2.get(n);break;case 2:e.i[e.g].pop(),i=T2.get(n);break;case 3:e.i[e.g].pop(),i=x2.get(n)}i&&e.i[e.g].push(new zy(i,e.m,e.j,e.o,e.l))}}function Yy(e,t,n,i){if(!(n<0||t<0))if(t>=n)for(--i;i>=0;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function ki(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var qy=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),y2=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),T2=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),x2=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Jy=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function hl(e,t){this.h=0,this.o=new Dd(e,t),this.i=new Dd(e,t),this.g=this.j=new Dd(e,t),this.l=0,this.m=null}function Rd(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=dl(i,e.l,n),n=e.i,n.g=n.h>0?n.h:0,ki(n,0,15),n=e.j,n.g=n.h>0?n.h:0,ki(n,0,15),i.g=15),e.h=3,i.h=t,r}function $y(e){e.h=1,e.g=e.j,e.g.h=0}function Qy(e){ji("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var S2="black green blue cyan red yellow magenta black".split(" "),Zy="white green blue cyan red yellow magenta white_italics".split(" ");function Ld(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",Pd(this)}function Pd(e){e.i=[];for(var t=0;t<16;t++)e.i.push(Nd())}function Nd(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function Qi(e,t){e0(e)&&(e.i[e.h][e.g]=new zy(t,e.F,e.B,e.u,e.C),e.g++)}function e0(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}Ld.prototype.isVisible=function(){return this.l};function w2(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=Nd()}function Pr(e,t,n){var i=new Ve(e.j,t,"");i.textAlign=e.G===0?"left":e.G===1?"right":ei;var r=i.region;switch(e.J&&(r.id+="svc"+e.J),r.id+="win"+e.N,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.I,r.viewportAnchorY=e.M,r.viewportAnchorUnits=e.K?$t:2,e.H){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=Xy(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Ld.prototype.display=function(){this.l=!0};function A2(){this.i=[],this.h=null,this.g=0}function E2(e,t){t.type===3?(e.g=(t.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new zs(e.h)),e.h=null,e.g=0))}function zs(e){this.g=0,this.h=e}zs.prototype.Ia=function(){return this.g<this.h.length},zs.prototype.Pa=function(){return this.g};function ht(e){if(!e.Ia())throw new M(2,2,3e3);return e.h[e.g++]}zs.prototype.skip=function(e){if(this.g+e>this.h.length)throw new M(2,2,3e3);this.g+=e},zs.prototype.Ni=function(e){if(this.g-e<0)throw new M(2,2,3e3);this.g-=e};function I2(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function C2(e,t,n,i){if(!e.g)return[];if(n==24)return n=ht(t).value,i=ht(t).value,n=(function(o){return o.map(function(s){return("0"+(s&255).toString(16)).slice(-2)}).join("")})([n,i]),Qi(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!e0(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=Pr(t,i,e.i)),t.h+1>=t.o?w2(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=Pr(t,i,e.i)),t.i[t.h]=Nd(),t.g=0;break;case 12:t.isVisible()&&(r=Pr(t,i,e.i)),Pd(t),t.h=0,t.g=0}return r?[r]:[]}function M2(e,t,n,i){if(n>=128&&n<=135)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=ht(t).value,t=[],n=g(Ys(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var o=Pr(r,i,e.i);o&&t.push(o)}Pd(r)}return t}if(n===137)for(t=ht(t).value,t=g(Ys(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=ht(t).value,t=null,n=g(Ys(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Pr(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=ht(t).value,t=null,n=g(Ys(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=Pr(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=ht(t).value,t0(e,t,i);if(n===143)return i=t0(e,255,i),n0(e),i;if(n===144)t.skip(1),i=ht(t).value,e.g&&(e.g.B=(i&128)>0,e.g.F=(i&64)>0);else if(n===145)i=ht(t).value,n=ht(t).value,t.skip(1),e.g&&(t=i0((n&48)>>4,(n&12)>>2,n&3),e.g.C=i0((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=ht(t).value,t=ht(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=ht(t).value,t.skip(1),e.g&&(e.g.G=i&3);else if(n>=152&&n<=159){n=(n&15)-8,r=e.h[n]!==null,r||(o=new Ld(n,e.i),o.j=i,e.h[n]=o),i=ht(t).value,o=ht(t).value;var s=ht(t).value,u=ht(t).value,a=ht(t).value;t=ht(t).value,r&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=(i&32)>0,t.M=o&127,t.I=s,t.H=(u&240)>>4,t.K=(o&128)>0,t.o=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return[]}function Ys(e,t){for(var n=[],i=0;i<8;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function t0(e,t,n){var i=[];t=g(Ys(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(o=Pr(o,n,e.i))&&i.push(o),e.h[r]=null}return i}function n0(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function i0(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],k2[e<<2|t<<1|n]}var r0=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),k2="black blue green cyan red magenta yellow white".split(" ");function ko(){this.h=[],this.g=[],this.i=new A2,this.l=0,this.m=new Map([["CC1",new hl(0,0)],["CC2",new hl(0,1)],["CC3",new hl(1,0)],["CC4",new hl(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,jd(this)}ko.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,jd(this),e=g(this.j.values());for(var t=e.next();!t.done;t=e.next())n0(t.value)};function jd(e){e.o=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ws(n.i),Ws(n.j),Ws(n.o);e.C=!0}ko.prototype.extract=function(e,t){if(this.C){for(var n=g(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.C=!1}if(e=new He(e,0),!(e.getLength()<8)&&e.Y()===181&&e.Ca()===49&&e.U()===1195456820&&e.Y()===3&&(n=e.Y(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.Y(),o=(r&4)>>2,s=e.Y(),u=e.Y();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,Db:s,kc:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},ko.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),i=n.next();!i.done;i=n.next())(i=D2(this,i.value))&&t.push(i);for(n=g(this.g),i=n.next();!i.done;i=n.next())E2(this.i,i.value);for(n=g(this.i.i),i=n.next();!i.done;i=n.next())i=R2(this,i.value),t.push.apply(t,V(i));return this.i.i=[],this.h=[],this.g=[],t};function D2(e,t){var n=t.type;if((t.Db&112)===16){var i=t.Db>>3&1;n===0?e.o=i:e.u=i}if(i="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(i),t.Db===255&&t.kc===255||!t.Db&&!t.kc||!o0(t.Db)||!o0(t.kc))return++e.l>=45&&jd(e),null;e.l=0,t.Db&=127,t.kc&=127;var r=t.Db;if(r>=1&&r<=15||!t.Db&&!t.kc)return null;if(r=null,(t.Db&112)===16)e:{if(e.B.add(i),i=t.Db,e=t.kc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var o=null,s=e>95?e-96:e-64;s<=13?i=Zy[Math.floor(s/2)]:s<=15?r=!0:o=Math.floor((s-16)/2),e=(e&1)===1,n.h!==4&&(s=n.g,n.h===3&&t!==s.g&&(n=1+t-s.h,Yy(s,n,1+s.g-s.h,s.h),ki(s,0,n-1),ki(s,t+1,15-t)),s.g=t,s.m=e,s.j=r,s.l=i,s.u=o,s.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Mo(n.g,0,32),i=!1,t=Zy[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",(i&7)===0&&(t=S2[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)Mo(n.g,1,e);else if((i&246)===18&&(e&224)===32)Mo(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.kc){case 32:$y(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=Rd(n,2,e);break;case 38:i=Rd(n,3,e);break;case 39:i=Rd(n,4,e);break;case 40:Mo(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ws(n.o),Qy(n);break;case 43:Qy(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=dl(t,n.l,e)),ki(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=dl(t,n.l,e),r=t.g-t.h+1,Yy(t,r-1,r,t.h),ki(t,0,r-1),ki(t,t.g,15-t.g),n.l=e);break;case 46:ki(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=dl(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,$y(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&e>=33&&e<=35&&(n.g.B=e-32)}r=null}else e=t.kc,Mo(n.g,0,t.Db),Mo(n.g,0,e);return r}function R2(e,t){var n=[];try{for(;t.Ia();){var i=ht(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=ht(t).value&63),r!=0){e.B.add("svc"+r),e.j.has(r)||e.j.set(r,new I2(r));for(var s=e.j.get(r),u=t.Pa();t.Pa()-u<o;){r=s;var a=t,l=ht(a),c=l.value,f=l.pts;if(c===16){var h=ht(a);c=c<<16|h.value}if(c>=0&&c<=31)var p=C2(r,a,c,f);else if(c>=128&&c<=159)p=M2(r,a,c,f);else{if(c>=4096&&c<=4127)r=a,a=c&255,a>=8&&a<=15?r.skip(1):a>=16&&a<=23?r.skip(2):a>=24&&a<=31&&r.skip(3);else if(c>=4224&&c<=4255)r=a,a=c&255,a>=128&&a<=135?r.skip(4):a>=136&&a<=143&&r.skip(5);else if(c>=32&&c<=127)a=c,r.g&&(a===127?Qi(r.g,"♪"):Qi(r.g,String.fromCharCode(a)));else if(c>=160&&c<=255)r.g&&Qi(r.g,String.fromCharCode(c));else if(c>=4128&&c<=4223){if(a=c&255,r.g)if(r0.has(a)){var m=r0.get(a);Qi(r.g,m)}else Qi(r.g,"_")}else c>=4256&&c<=4351&&r.g&&((c&255)!=160?Qi(r.g,"_"):Qi(r.g,"[CC]"));p=[]}n.push.apply(n,V(p))}}}}catch(v){if(v instanceof M&&v.code===3e3)ji("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw v}return n}function o0(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}ko.prototype.getStreams=function(){return Array.from(this.B)},K("shaka.cea.CeaDecoder",ko),hr=function(){return new ko};function s0(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(V(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function pl(){this.j=new Map,this.i=this.h=0,this.g=Od}pl.prototype.init=function(e){function t(o){o=o.name,gl.has(o)&&(n.g=gl.get(o))}var n=this,i=[],r=[];if(new Oe().box("moov",fe).box("mvex",fe).S("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.U(),s=s.U(),n.h=o,n.i=s}).box("trak",fe).S("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.U();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.Ca(),s.Ca(),s.Ca(),s.Ca(),i.push(u)}).box("mdia",fe).S("mdhd",function(o){o=la(o.reader,o.version),r.push(o.timescale)}).box("minf",fe).box("stbl",fe).S("stsd",yi).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Zt).box("sinf",fe).box("frma",function(o){o=ef(o.reader).codec,gl.has(o)&&(n.g=gl.get(o))}).parse(e,!0,!0),!i.length||!r.length||i.length!=r.length)throw new M(2,2,2010);this.g==Od&&xe("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},pl.prototype.parse=function(e){var t=this;if(this.g==Od)return[];var n=[],i=0,r=[];return new Oe().box("moof",function(o){i=o.start,r=[],fe(o)}).box("traf",function(o){r.push({baseMediaDecodeTime:null,Ud:t.h,Vd:t.i,Fi:[],timescale:9e4}),fe(o)}).S("trun",function(o){var s=r[r.length-1];o=ca(o.reader,o.version,o.flags),s.Fi.push(o)}).S("tfhd",function(o){var s=r[r.length-1];o=ua(o.reader,o.flags),s.Ud=o.Ud||t.h,s.Vd=o.Vd||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).S("tfdt",function(o){var s=r[r.length-1];o=aa(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=i-o.start-8,u=o.reader.Pa(),a=g(r),l=a.next();!l.done;l=a.next())l=l.value,l.baseMediaDecodeTime===null?xe("Unable to find base media decode time for CEA captions!"):(o.reader.seek(u),L2(t,o.reader,l.baseMediaDecodeTime,l.timescale,l.Ud,l.Vd,s,l.Fi,n))}).parse(e,!1,!0),n};function L2(e,t,n,i,r,o,s,u,a){var l=0,c=o,f=u.map(function(m){return m.kh});for(f=[].concat.apply([],V(f)),f.length&&(c=f[0].sampleSize||o),t.skip(s+u[0].pg);t.Ia();){s=t.U();var h=t.Y(),p=null;switch(p=!1,u=1,e.g){case qs:p=h&31,p=p==6;break;case Js:u=2,t.skip(1),p=h>>1&63,p=p==39||p==40;break;case $s:u=2,t.skip(1),p=h>>1&63,p=p==23||p==24;break;default:return}if(p)for(h=0,l<f.length&&(h=f[l].Ff||0),h=(n+h)/i,u=t.Ub(s-u,!1),u=g(s0(u)),p=u.next();!p.done;p=u.next())a.push({packet:p.value,pts:h});else try{t.skip(s-u)}catch{break}c-=s+4,c==0&&(n=l<f.length?n+(f[l].mh||r):n+r,l++,l<f.length?c=f[l].sampleSize||o:c=o)}}K("shaka.cea.Mp4CeaParser",pl);var Od=0,qs=1,Js=2,$s=3,gl=new Map().set("avc1",qs).set("avc3",qs).set("dvav",qs).set("dva1",qs).set("hev1",Js).set("hvc1",Js).set("dvh1",Js).set("dvhe",Js).set("vvc1",$s).set("vvi1",$s).set("dvc1",$s).set("dvi1",$s);Ic("video/mp4",function(){return new pl});function ml(){this.g=null}ml.prototype.init=function(){},ml.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Fe;var t=[];if(e=se(e),!lo(e))return t;e=this.g.parse(e);var n=e.Wd(),i=e.cf();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=g(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=g(s0(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},K("shaka.cea.TsCeaParser",ml),Ic("video/mp2t",function(){return new ml});function P2(e){var t=0,n=Ht(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,(r&1)!=0||r+e>n.byteLength){n=[];break e}var o=se(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function u0(e){return e=Tn(it(e)),e=P2(e).filter(function(t){return t.type===N2})[0],e?(e=Ui(e.value,!0),(e=mr(e,"WRMHEADER"))?e:null):null}function vl(e){try{var t=u0(e);if(t)e:{for(var n=g(Kn(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var o=g(r.children),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.tagName=="LA_URL"){var a=it(u);break e}}}a=""}else a="";return a}catch{return""}}var N2=1;function a0(){this.g=new Map}a0.prototype.release=function(){this.g.clear()};function l0(e,t,n,i){var r=U2(e,t),o=null;e=[];var s=[];t=null;var u=new Set(r.map(function(l){return l.keyId}));u.delete(null);var a="cenc";if(u.size>1)throw new M(2,4,4010);if(!n){if(s=r.filter(function(l){return l.Gd=="urn:mpeg:dash:sea:2012"}),s.length>1)throw new M(2,4,4050);s.length&&(t=B2(s[0])),(s=r.find(function(l){return l.Gd=="urn:mpeg:dash:mp4protection:2011"}))&&s.encryptionScheme&&(a=s.encryptionScheme),s=r.filter(function(l){return l.Gd=="urn:mpeg:dash:mp4protection:2011"?(o=l.init||o,!1):l.Gd!="urn:mpeg:dash:sea:2012"}),s.length&&(e=O2(o,a,s,i,u),e.length==0&&(e=[li("",a,o)]))}if(r.length&&!t&&(n||!s.length))for(e=[],n=g(Object.values(i)),i=n.next();!i.done;i=n.next())i=i.value,i!="org.w3.clearkey"&&e.push(li(i,a,o));if(u=Array.from(u)[0]||null)for(a=g(e),n=a.next();!n.done;n=a.next())for(n=g(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=u;return{Vh:u,Am:o,drmInfos:e,gg:t,$h:!0}}function j2(e,t,n,i,r){var o=l0(e,t,i,r);if(n.$h)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,t=o.drmInfos.length==0,(n.drmInfos.length==0||e&&!t)&&(n.drmInfos=o.drmInfos),n.$h=!1;else if(o.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(s){return o.drmInfos.some(function(u){return u.keySystem==s.keySystem})}),n.drmInfos.length==0))throw new M(2,4,4008);return o.Vh||n.Vh}function yl(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=it(t)))return t;if((t=xn(e.node,"urn:microsoft:playready","pro"))&&it(t))return vl(t);if((e=xn(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=it(e))){t=Tn(e),e=8,t=Ht(t);var n=t.getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),e=se(t,e+4),e=ku(e),e=mr("<pro>"+e+"</pro>"),vl(e)}return""}function O2(e,t,n,i,r){var o=[];n=g(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=i[s.Gd];if(u){var a;if((a=xn(s.node,"urn:microsoft:playready","pro"))&&it(a)){a=it(a),a=Tn(a);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:oa(a,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(l=null,s.Gd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=s;var c=r;if(c.size==0)l=null;else{var f=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),h=new Uint8Array([]);l=[{initData:oa(h,f,c,1),initDataType:"cenc",keyId:l.keyId}]}}a=li(u,t,s.init||e||a||l),(u=b2.get(u))&&(a.licenseServerUri=u(s));e:{if((s=xn(s.node,"https://dashif.org/CPS","Certurl"))&&(s=it(s)))break e;s=""}a.serverCertificateUri=s,o.push(a)}}return o}function U2(e,t){var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next())(i=_2(e,i.value))&&n.push(i);return n}function _2(e,t){var n=t.attributes.schemeIdUri,i=ci(t,"urn:mpeg:cenc:2013","default_KID"),r=_p(t,"urn:mpeg:cenc:2013","pssh").map(_t),o=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),i.includes(" ")))throw new M(2,4,4009);var s=[];try{s=r.map(function(u){if(!e.g.has(u)){var a=Tn(u);e.g.set(u,a)}return{initDataType:"cenc",initData:e.g.get(u),keyId:null}})}catch{throw new M(2,4,4007)}return{node:t,Gd:n,keyId:i,init:s.length>0?s:null,encryptionScheme:o}}function B2(e){if(!b.crypto||!b.crypto.subtle)throw xe("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var t=xn(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new M(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new M(2,4,4051);if(t=xn(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new M(2,4,4051);if(e=t.attributes.IV,t=Ut(t.attributes.keyUriTemplate),!e||!t)throw new M(2,4,4051);if(e=fr(e.substr(2)),e.byteLength!=16)throw new M(2,4,4048);return{qk:t,iv:e}}var b2=new Map().set("com.apple.fps",function(e){if(b.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4054);return(e=xn(e.node,"https://dashif.org/CPS","Laurl"))&&(e=it(e))?e:""}).set("com.widevine.alpha",function(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=it(t))?t:(e=xn(e.node,"urn:microsoft","laurl"))&&Ut(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",yl).set("com.microsoft.playready.recommendation",yl).set("com.microsoft.playready.software",yl).set("com.microsoft.playready.hardware",yl).set("org.w3.clearkey",function(e){var t=xn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=it(t))?t:(e=xn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=it(e))?e:""});function Qs(e,t,n,i,r,o){var s=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",o);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,c){if(u=="$$")return"$";var f=s.get(a);if(f==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof f!="bigint"&&(Math.abs(f-Math.round(f))>=.2&&xe("Calculated $Time$ values must be close to integers"),f=Math.round(f)),c){case void 0:case"d":case"i":case"u":u=f.toString();break;case"o":u=f.toString(8);break;case"x":u=f.toString(16);break;case"X":u=f.toString(16).toUpperCase();break;default:u=f.toString()}return l=b.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function c0(e,t){var n=Fn(e,t,"timescale"),i=1;n&&(i=Zn(n)||1),n=Fn(e,t,"duration");var r=(n=Zn(n||""))?n/i:null,o=Fn(e,t,"startNumber"),s=Number(Fn(e,t,"presentationTimeOffset"))||0,u=St(o||"");if((o==null||u==null)&&(u=1),o=null,t=Do(e,t,"SegmentTimeline")){t=Pe(t,"S"),o=i,e=e.na.duration||1/0;for(var a=u,l=[],c=-s,f=0;f<t.length;++f){var h=t[f],p=t[f+1],m=oe(h,"t",St),v=oe(h,"d",St),y=oe(h,"r",xt);if(h=oe(h,"k",xt)||0,m!=null&&(m-=s),v){if(m=m??c,y=y||0,y<0)if(p){if(p=oe(p,"t",St),p==null)break;if(m>=p)break;y=Math.ceil((p-m)/v)-1}else{if(e==1/0)break;if(m/o>=e)break;y=Math.ceil((e*o-m)/v)-1}for(l.length>0&&m!=c&&(l[l.length-1].end=m/o),p=0;p<=y;++p)c=m+v,l.push({start:m/o,end:c/o,Hh:m,wc:h,Rk:l.length+a}),m=c}}o=l}return{timescale:i,Pf:n,gb:r,se:u,Jb:s/i||0,gd:s,timeline:o}}function f0(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(Hi)}function Fn(e,t,n){t=f0(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Do(e,t,n){t=f0(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=Ge(i.value,n));i=t.next());return e}function F2(e,t,n,i,r,o){for(var s=ci(e,"http://www.w3.org/1999/xlink","href"),u=ci(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=g(Object.keys(e.attributes)),l=a.next();!l.done;l=a.next()){l=l.value;var c=l.split(":"),f=Mc("http://www.w3.org/1999/xlink");c[0]==f&&delete e.attributes[l]}if(o>=5)return Gi(new M(2,4,4028));if(u!="onLoad")return Gi(new M(2,4,4027));var h=mt([i],[s]);return r.request(0,ot(h,t)).Xa(function(p){if(p=es(p.data,e.tagName),!p)return Gi(new M(2,4,4001,s));for(e.children=[];p.children.length;){var m=p.children.shift();e.children.push(m)}m=g(Object.keys(p.attributes));for(var v=m.next();!v.done;v=m.next())v=v.value,e.attributes[v]=p.attributes[v];return Tl(e,t,n,h[0],r,o+1)})}function Tl(e,t,n,i,r,o){if(o=o===void 0?0:o,ci(e,"http://www.w3.org/1999/xlink","href")){var s=F2(e,t,n,i,r,o);return n&&(s=s.Xa(void 0,function(){return Tl(e,t,n,i,r,o)})),s}s=[];for(var u=g(Up(e)),a=u.next(),l={};!a.done;l={Rd:void 0},a=u.next())l.Rd=a.value,ci(l.Rd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter((function(c){return function(f){return f!==c.Rd}})(l)):l.Rd.tagName!="SegmentTimeline"&&s.push(Tl(l.Rd,t,n,i,r,o));return xg(s).Xa(function(){return e})}function V2(e,t,n,i,r,o,s){var u,a=new Oe().S("sidx",function(l){u=H2(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new M(2,3,3004)}function H2(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.U();if(a==0)throw new M(2,3,3005);if(s.version==0)var l=s.reader.U(),c=s.reader.U();else l=s.reader.Dd(),c=s.reader.Dd();s.reader.skip(2);var f=s.reader.Ca();for(e=e+s.size+c,c=0;c<f;c++){var h=s.reader.U(),p=(h&2147483648)>>>31;h&=2147483647;var m=s.reader.U();if(s.reader.skip(4),p==1)throw new M(2,3,3006);u.push(new Z(l/a+n,(l+m)/a+n,function(){return o},e,e+h-1,t,n,i,r)),l+=m,e+=h}return s.parser.stop(),u}function Zi(e){this.h=Ht(e),this.g=new He(this.h,0)}Zi.prototype.Ia=function(){return this.g.Ia()};function Di(e){var t=d0(e);if(t.length>7)throw new M(2,3,3002);var n=0;t=g(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=d0(e);e:{i=g(G2);for(var r=i.next();!r.done;r=i.next())if(si(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Pa();else{if(t.length==8&&t[1]&224)throw new M(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),i=Ht(e.h,e.g.Pa(),t),e.g.skip(t),new K2(n,i)}function d0(e){var t=e.g.Pa(),n=e.g.Y();if(n==0)throw new M(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),se(e.h,t,n)}var G2=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function K2(e,t){this.id=e,this.g=t}function Ud(e){if(e.g.byteLength>8)throw new M(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new M(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function X2(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new Zi(e.g);for(var f=null,h=null;e.Ia();){var p=Di(e);if(p.id==187){var m=W2(p);m&&(p=n*m.il,m=t+m.Jk,f!=null&&c.push(new Z(f+s,p+s,l,h,m-1,o,s,u,a)),f=p,h=m)}}return f!=null&&c.push(new Z(f+s,i+s,l,h,null,o,s,u,a)),c}function W2(e){var t=new Zi(e.g);if(e=Di(t),e.id!=179)throw new M(2,3,3013);if(e=Ud(e),t=Di(t),t.id!=183)throw new M(2,3,3012);t=new Zi(t.g);for(var n=0;t.Ia();){var i=Di(t);if(i.id==241){n=Ud(i);break}}return{il:e,Jk:n}}function h0(e,t,n){if(t=Do(e,t,"Initialization"),!t)return null;var i=e.L.cb(),r=t.attributes.sourceURL;r&&(i=mt(i,[Ut(r)],e.Mb())),r=0;var o=null;return(t=oe(t,"range",Nu))&&(r=t.start,o=t.end),n=new Xt(function(){return i},r,o,v0(e),null,null,n,e.qa.encrypted),n.codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.hf&&(n.g=e.na.start+e.na.duration),n}function z2(e,t,n){var i=Number(Fn(e,Ro,"presentationTimeOffset"))||0,r=Fn(e,Ro,"timescale"),o=1;r&&(o=Zn(r)||1);var s=i/o||0,u=h0(e,Ro,n);Y2(e,u);var a=Bi(e);return{endTime:-1,timeline:-1,Sc:function(){var l=Do(a,Ro,"RepresentationIndex"),c=a.L.cb();return l&&(l=Ut(l.attributes.sourceURL))&&(c=mt(c,[l],a.Mb())),l=g0(a),p0(a,t,u,c,l.start,l.end,s)},timescale:o}}function p0(e,t,n,i,r,o,s){var u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k;return C(function(L){if(L.g==1)return u=e.presentationTimeline,a=!e.Fb||!e.na.hf,l=e.na.start,c=e.na.duration,f=e.L.mimeType.split("/")[1],h=t,p=null,m=[h(i,r,o,!1),f=="webm"?h(n.P(),n.startByte,n.endByte,!0):null],h=null,T(L,Promise.all(m),2);if(v=L.h,y=v[0],S=v[1]||null,x=null,A=l-s,I=l,R=c?l+c:1/0,f=="mp4")var D=V2(y,r,i,n,A,I,R);else{D=y;var P=new Zi(S);if(Di(P).id!=440786851)throw new M(2,3,3008);var N=Di(P);if(N.id!=408125543)throw new M(2,3,3009);P=N.g.byteOffset,N=new Zi(N.g);for(var _=null;N.Ia();){var B=Di(N);if(B.id==357149030){_=B;break}}if(!_)throw new M(2,3,3010);for(_=new Zi(_.g),B=1e6,N=null;_.Ia();){var j=Di(_);if(j.id==2807729)B=Ud(j);else if(j.id==17545)if(j.g.byteLength==4)N=j.g.getFloat32(0);else if(j.g.byteLength==8)N=j.g.getFloat64(0);else throw new M(2,3,3003)}if(N==null)throw new M(2,3,3011);if(_=B/1e9,N*=_,D=Di(new Zi(D)),D.id!=475249515)throw new M(2,3,3007);D=X2(D,P,_,N,i,n,A,I,R)}for(x=D,E=g(x),w=E.next();!w.done;w=E.next())k=w.value,k.codecs=e.L.codecs,k.mimeType=e.L.mimeType,k.bandwidth=e.bandwidth;return u.ke(x),p=new Ce(x),a&&p.pd(I,R,!0),L.return(p)})}function Ro(e){return e.Hd}function g0(e){var t=Do(e,Ro,"RepresentationIndex");return e=Fn(e,Ro,"indexRange"),e=Nu(e||""),t&&(e=oe(t,"range",Nu,e)),e}function Y2(e,t){if(m0(e,t),!g0(e))throw new M(2,4,4002)}function m0(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=pe&&n!="mp4"&&n!="webm")throw new M(2,4,4006);if(n=="webm"&&!t)throw new M(2,4,4005)}function v0(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.wf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function q2(e,t,n){var i=h0(e,y0,n),r=J2(e);if(!r.gb&&!r.timeline&&r.yd.length>1)throw new M(2,4,4002);if(!r.gb&&!e.na.duration&&!r.timeline&&r.yd.length==1)throw new M(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new M(2,4,4002);var o=null,s=null;e.sa.id&&e.L.id&&(s=t.get(e.sa.id+","+e.L.id))&&(o=s.segmentIndex);var u=$2(e.na.start,e.na.duration,e.L.cb,r,i,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Mb);return t=!o,o?o.ie(u,e.presentationTimeline.Ib()):o=new Ce(u),e.presentationTimeline.ke(u),e.Fb&&e.na.hf||o.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),s&&(s.segmentIndex=o),{endTime:-1,timeline:-1,Sc:function(){return o&&o.getNumReferences()!=0||o.qf(u),Promise.resolve(o)},timescale:r.timescale}}function y0(e){return e.Ac}function J2(e){var t=Q2(e);e=c0(e,y0);var n=e.se;n==0&&(n=1);var i=0;return e.gb?i=e.gb*(n-1):e.timeline&&e.timeline.length>0&&(i=e.timeline[0].start),{gb:e.gb,startTime:i,se:n,Jb:e.Jb,timescale:e.timescale,timeline:e.timeline,yd:t}}function $2(e,t,n,i,r,o,s,u,a,l){var c=i.yd.length;i.timeline&&i.timeline.length!=i.yd.length&&(c=Math.min(i.timeline.length,i.yd.length));for(var f=e-i.Jb,h=t?e+t:1/0,p=[],m=i.startTime,v={},y=0;y<c;v={Rf:void 0,Gf:void 0},y++){v.Gf=i.yd[y];var S=m;m=void 0,m=i.gb!=null?S+i.gb:i.timeline?i.timeline[y].end:S+t,v.Rf=null,v=new Z(e+S,e+m,(function(x){return function(){return x.Rf==null&&(x.Rf=mt(n(),[x.Gf.yk],l())),x.Rf}})(v),v.Gf.start,v.Gf.end,r,f,e,h,[],"",null,null,Ti,o),v.codecs=u,v.mimeType=s,v.bandwidth=a,p.push(v)}return p}function Q2(e){return[e.L.Ac,e.qa.Ac,e.sa.Ac].filter(Hi).map(function(t){return Pe(t,"SegmentURL")}).reduce(function(t,n){return t.length>0?t:n}).map(function(t){t.attributes.indexRange&&!e.Ng&&(e.Ng=!0);var n=Ut(t.attributes.media);return t=oe(t,"mediaRange",Nu,{start:0,end:null}),{yk:n,start:t.start,end:t.end}})}function T0(e,t,n,i,r,o,s,u,a,l){a||e.L.ef||(e.L.ef=Fn(e,er,"initialization"));var c=e.L.ef?nI(e,s):null,f=Z2(e);eI(f);var h=Bi(e);if(f.ce)return m0(e,c),{endTime:-1,timeline:-1,Sc:function(){var S=Qs(f.ce,h.L.originalId,null,null,h.bandwidth||null,null);return S=mt(h.L.cb(),[S]),p0(h,t,c,S,0,null,f.Jb)},timescale:f.timescale};if(f.gb)return i||e.qa.contentType==="image"||e.qa.contentType==="text"||(i=e.na.start,l=e.sa.id,n=e.na.duration,l=(l=l!=null&&o.get(l)||n)?i+l:1/0,e.presentationTimeline.Vg(f.gb),e.presentationTimeline.Di(i,l)),{endTime:-1,timeline:-1,Sc:function(){return tI(h,f,r,c,o,s,u,e.L.Hf)},timescale:f.timescale};var p=null;i=i=null,e.sa.id&&e.L.id&&(i=e.sa.id+","+e.L.id,i=n.get(i))&&(p=i.segmentIndex);var m=e.na.start,v=e.na.duration?m+e.na.duration:1/0;if(p)l=p,x0(l,f,m,v,c,e.Fb),l.Ya(e.presentationTimeline.Ib());else{if(n=0,a=-1,e.sa.id!=null&&e.L.id!=null){var y=l.get(e.sa.id);if(y)a=y.timeline;else for(l=g(l.values()),y=l.next();!y.done;y=l.next())if(y=y.value,Math.abs(f.Jb-y.endTime)<=kp&&y.fh.includes(e.L.id)){a=y.timeline;break}else y.timeline>=n&&(n=y.timeline+1)}a==-1&&(a=n),p=new Zs(e.Fb,f,e.L.originalId,e.bandwidth,e.L.cb,e.Mb,m,v,c,s,e.L.Hf,a)}return f.timeline&&e.qa.contentType!=="image"&&e.qa.contentType!=="text"&&e.presentationTimeline.Ei(p.h?p.h.timeline:[],m),i&&e.Fb&&(i.segmentIndex=p),i=(i=(i=f.timeline)&&i[i.length-1])?i.end+f.Jb:-1,l=-1,p instanceof Zs&&(l=p.Ue()),{endTime:i,timeline:l,Sc:function(){return p instanceof Zs&&p.getNumReferences()==0&&x0(p,f,m,v,c,e.Fb),Promise.resolve(p)},timescale:f.timescale}}function er(e){return e.Oc}function Z2(e){var t=c0(e,er),n=Fn(e,er,"media"),i=Fn(e,er,"index"),r=Fn(e,er,"k"),o=0;return r&&(o=parseInt(r,10)),{Pf:t.Pf,gb:t.gb,timescale:t.timescale,se:t.se,Jb:t.Jb,gd:t.gd,timeline:t.timeline,bc:n&&Ut(n),ce:i,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,zk:o}}function eI(e){var t=e.ce?1:0;if(t+=e.timeline?1:0,t+=e.gb?1:0,t==0)throw new M(2,4,4002);if(t!=1&&(e.ce&&(e.timeline=null),e.Pf=null,e.gb=null),!e.ce&&!e.bc)throw new M(2,4,4002)}function tI(e,t,n,i,r,o,s,u){function a(N){var _=N-y,B=_*v,j=t.Pf,O=_*j;"BigInt"in b&&O>Number.MAX_SAFE_INTEGER&&(O=BigInt(_)*BigInt(j)),B+=h,_=B+v,j=Math.min(_,c());var F=[],H=t.zk;if(H)for(var Q=(j-B)/H,z={},Ae=0;Ae<H;z={Zi:void 0},Ae++){var ce=B+Q*Ae,Le=ce+Q;z.Zi=Ae,z=new Z(ce,Le,(function(me){return function(){var le=Qs(S,A,N,me.Zi,x,O);return mt(I(),[le],R())}})(z),0,null,i,E,h,c(),[],"",null,null,Ti,o),z.codecs=e.L.codecs,z.mimeType=e.L.mimeType,u==0?Ae>0&&z.wd():Ae%u!=0&&z.wd(),F.push(z)}return B=new Z(B,j,function(){if(H)return[];var me=Qs(S,A,N,null,x,O);return mt(I(),[me],R())},0,null,i,E,h,c(),F,"",null,null,Ti,o,F.length>0),B.codecs=e.L.codecs,B.mimeType=e.L.mimeType,B.bandwidth=e.bandwidth,B.j=_,B}function l(){var N=[Math.max(f.Ib(),h),Math.min(f.Ic(),c())].map(function(_){return _-h});return N=[Math.ceil(N[0]/v),Math.ceil(N[1]/v)-1],e.L.rb&&N[1]++,N.map(function(_){return _+y})}function c(){var N=p!=null&&r.get(p)||m;return N?h+N:1/0}var f=e.presentationTimeline,h=e.na.start,p=e.sa.id,m=e.na.duration,v=t.gb,y=t.se,S=t.bc,x=e.bandwidth||null,A=e.L.originalId,I=e.L.cb,R=e.Mb,E=h-t.Jb,w=l();n=e.Fb?Math.max(w[0],w[1]-n+1):w[0],s=s||w[1],w=[];for(var k=n;k<=s;++k){var L=a(k);w.push(L)}var D=new Ce(w);if(w=f.Ic()<c(),k=f.W(),w||k){var P=Math.max(n,s+1);n=v,e.L.rb&&(n=.1),D.Qf(n,function(){var N=f.Ib();D.Ya(N);var _=g(l());_.next(),_=_.next().value;for(var B=[];P<=_;){var j=a(P);B.push(j),P++}return N>c()&&!B.length?null:B})}return Promise.resolve(D)}function nI(e,t){var n=e.L.ef;if(n||(n=Fn(e,er,"initialization")),!n)return null;n=Ut(n);var i=e.L.originalId,r=e.bandwidth||null,o=e.L.cb,s=e.Mb;return t=new Xt(function(){var u=Qs(n,i,null,null,r,null);return mt(o(),[u],s())},0,null,v0(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.hf&&(t.g=e.na.start+e.na.duration),t}function Zs(e,t,n,i,r,o,s,u,a,l,c,f){Ce.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=i,this.G=r,this.J=o,this.j=s,this.l=u,this.u=a,this.B=l,this.I=c,this.K=f,_d(this)}Qe(Zs,Ce),d=Zs.prototype,d.getNumReferences=function(){return this.h?this.h.timeline.length:0},d.release=function(){Ce.prototype.release.call(this),this.h=null},d.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function x0(e,t,n,i,r,o){if(iI(e,r),e.F=o,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Jb=t.Jb),e.h.bc!==t.bc&&(e.h.bc=t.bc),n=e.h.timeline,n.length){var s=n[n.length-1];t=t.timeline.filter(function(u){return u.end>s.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,V(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;_d(e)}function iI(e,t){if(e.u!==t){e.u=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&nm(n,t)}}function _d(e){if(e.h&&!e.o){for(var t=[],n=g(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||i.end<=0||t.push(i);e.h.timeline=t,e.Ya(e.j)}}d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=o&&e<r)return i+this.i}return null},d.get=function(e){var t=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var i=n.Rk,r=n.Hh+this.h.gd,o=this.j-this.h.Jb,s=this.j+n.end,u=s;e===this.getNumReferences()-1&&this.l!==1/0&&(u=this.F&&Math.abs(u-this.l)>.1?Math.min(u,this.l):this.l);var a=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,f=[],h=!1;if(n.wc&&this.h&&this.h.bc&&(h=this.h.bc.includes("$SubNumber$")),h){h=(n.end-n.start)/n.wc;for(var p={},m=0;m<n.wc;p={Sf:void 0,$i:void 0},m++){var v=n.start+h*m,y=v+h;p.$i=m,p.Sf=null,p=new Z(this.j+v,this.j+y,(function(S){return function(){return t.h?(S.Sf==null&&(S.Sf=S0(t.h.bc,t.H,i,t.C,r,S.$i,t.G,t.J)),S.Sf):[]}})(p),0,null,this.u,o,this.j,this.l,[],"",null,null,Ti,this.B),p.codecs=a,p.mimeType=l,p.bandwidth=c,this.I==0?m>0&&p.wd():m%this.I!=0&&p.wd(),f.push(p)}}n=new Z(this.j+n.start,u,function(){return f.length>0||!t.h?[]:S0(t.h.bc,t.H,i,t.C,r,null,t.G,t.J)},0,null,this.u,o,this.j,this.l,f,"",null,null,Ti,this.B,f.length>0),n.codecs=a,n.mimeType=l,n.j=s,n.bandwidth=c,this.g[e]=n}return n},d.Gb=function(e){_d(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function S0(e,t,n,i,r,o,s,u){return e=Qs(e,t,n,o,i||null,r),mt(s(),[e],u()).map(function(a){return a.toString()})}d.Ue=function(){return this.K};function Lo(e){this.o=null,this.B=e,this.H=new Zr,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Lo.prototype.configure=function(e){this.o=e},Lo.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},Lo.prototype.setManifestType=function(e){this.u=e};function eu(e,t){var n,i,r,o,s,u,a;return C(function(l){if(l.g==1)return n=mt(e.i,[rI(e,t)]),i=ot(n,e.o.retryParameters),r=e.B.networkingEngine.request(8,i),wr(e.H,r),ue(l,2),T(l,r.promise,4);if(l.g!=2)return o=l.h,s=ze(o.data),u=JSON.parse(s),u.VERSION==1&&oI(e,u,o.uri),de(l,0);if((a=ae(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ge(function(){eu(e,t)}),e.g.ia(e.F),G(l)})}function rI(e,t){if(!e.m.length)return t;t=new nt(t);var n=e.C||e.m[0],i=Math.round(e.B.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Ep(r)&&lr(t,r),t.toString()}function oI(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new ge(function(){eu(e,i)}),(n=t.TTL)&&(e.F=n),e.g.ia(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}function Po(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}Lo.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function tu(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=g(e.m),o=r.next(),s={};!o.done;s={Bd:void 0},o=r.next())if(s.Bd=o.value,o=t.get(s.Bd))i.push({$g:s.Bd,location:o});else if(o=e.G.find((function(a){return function(l){return l.Kl==a.Bd}})(s))){var u=t.get(o["BASE-ID"]);u&&(o["URI-REPLACEMENT"].kj?(u=new nt(u),Cu(u,o["URI-REPLACEMENT"].kj),i.push({$g:s.Bd,location:u.toString()})):i.push({$g:s.Bd,location:u}))}for(r=Date.now(),s=g(e.j.keys()),o=s.next();!o.done;o=s.next())o=o.value,u=e.j.get(o),r>u&&e.j.delete(o);if(i=i.filter(function(a){for(var l=g(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new nt(a.location).Eb))return!1;return!0}),i.length&&(e.C=i[0].$g),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=g(e.h.split(",")),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&(e.C=e.h,i.push(s));if(!i.length)for(t=g(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:mt(e.i,i)}function zt(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}d=zt.prototype,d.release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},d.bk=function(){return this.l},d.Lg=function(){return this.j.slice()},d.Ij=function(){return this.i},d.Wh=function(e,t){if(e){if(e.type=="audio")for(var n=g(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=g(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==pe)for(n=g(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=g(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function w0(e,t){var n=[],i=[],r=[],o=[];e=g(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(f){return[Vd(f),f]}));var a=new Map(u.videoStreams.map(function(f){return[Fd(f),f]})),l=new Map(u.textStreams.map(function(f){return[iu(f),f]}));if(u=new Map(u.imageStreams.map(function(f){return[ru(f),f]})),t){var c=D0(pe);l.set(iu(c),c),c=D0("image"),u.set(ru(c),c)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Ph:n,ij:i,ej:r,mi:o}}d.kg=function(e,t,n){n=n===void 0?!1:n;var i=this,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q;return C(function(z){if(z.g==1){if(r=ut,!t&&e.length==1)return o=w0(e,!1),s=o.Ph,u=o.ij,a=o.ej,l=o.mi,i.h=Array.from(s[0].values()),i.g=Array.from(u[0].values()),i.j=Array.from(a[0].values()),i.i=Array.from(l[0].values()),z.A(2);for(c=n?i.m.size:0,f=-1,h=0;h<e.length;h++)p=e[h],i.m.has(p.id)||(i.m.add(p.id),f==-1&&(f=h));return f==-1?z.return():(m=w0(e,!0),v=m.Ph,y=m.ij,S=m.ej,x=m.mi,T(z,Promise.all([tr(i,i.h,v,f,No,nr,c),tr(i,i.g,y,f,No,nr,c),tr(i,i.j,S,f,No,nr,c),tr(i,i.i,x,f,No,nr,c)]),2))}if(A=0,I=[],i.g.length&&i.h.length)for(P=g(i.h),N=P.next();!N.done;N=P.next())for(_=N.value,B=g(i.g),j=B.next();!j.done;j=B.next())O=j.value,F=mg(_.drmInfos,O.drmInfos),_.drmInfos.length&&O.drmInfos.length&&!F.length||(H=(_.bandwidth||0)+(O.bandwidth||0),_.dependencyStream&&(H+=_.dependencyStream.bandwidth||0),O.dependencyStream&&(H+=O.dependencyStream.bandwidth||0),Q=A++,I.push({id:Q,language:_.language,disabledUntilTime:0,primary:_.primary,audio:_,video:O,bandwidth:H,drmInfos:F,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(R=i.g.length?i.g:i.h,E=g(R),w=E.next();!w.done;w=E.next())k=w.value,L=A++,D=k.bandwidth||0,k.dependencyStream&&(D+=k.dependencyStream.bandwidth||0),I.push({id:L,language:k.language,disabledUntilTime:0,primary:k.primary,audio:k.type==r.ka?k:null,video:k.type==r.Aa?k:null,bandwidth:D,drmInfos:k.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=I,G(z)})};function A0(e){var t,n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B;return C(function(j){switch(j.g){case 1:if(t=ut,e.length==1)return j.return(e[0]);for(n=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.ka}).map(function(F){return[Vd(F),F]}))}),i=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.Aa}).map(function(F){return[Fd(F),F]}))}),r=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.Na}).map(function(F){return[iu(F),F]}))}),o=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.Xf}).map(function(F){return[ru(F),F]}))}),s=g(r),u=s.next();!u.done;u=s.next())a=u.value,l=k0(t.Na),a.set(iu(l),l);for(c=g(o),f=c.next();!f.done;f=c.next())h=f.value,p=k0(t.Xf),h.set(ru(p),p);return m=new zt,T(j,tr(m,[],n,0,xl,Sl,0),2);case 2:return v=j.h,T(j,tr(m,[],i,0,xl,Sl,0),3);case 3:return y=j.h,T(j,tr(m,[],r,0,xl,Sl,0),4);case 4:return S=j.h,T(j,tr(m,[],o,0,xl,Sl,0),5);case 5:if(x=j.h,A=0,y.length&&v.length)for(k=g(v),L=k.next();!L.done;L=k.next())for(D=L.value,P=g(y),N=P.next();!N.done;N=P.next())_=N.value,B=A++,_.variantIds.push(B),D.variantIds.push(B);else for(I=y.concat(v),R=g(I),E=R.next();!E.done;E=R.next())w=E.value,w.variantIds=[A++];return j.return(y.concat(v).concat(S).concat(x))}})}function tr(e,t,n,i,r,o,s){var u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L;return C(function(D){switch(D.g){case 1:for(u=[],a=0;a<n.length;a++)a>=i?u.push(new Set(n[a].values())):u.push(new Set);l=g(t),c=l.next();case 2:if(c.done){D.A(4);break}return f=c.value,T(D,sI(e,f,n,i,o,u,s),5);case 5:if(h=D.h,!h)throw new M(2,4,4037);c=l.next(),D.A(2);break;case 4:for(p=g(u),m=p.next();!m.done;m=p.next())for(v=m.value,y=g(v),S=y.next();!S.done;S=y.next())x=S.value,(A=uI(e,t,x,n,r,o,u))&&t.push(A);for(I=g(u),R=I.next();!R.done;R=I.next())for(E=R.value,w=g(E),k=w.next(),L={};!k.done;L={xh:void 0},k=w.next())if(L.xh=k.value,!bd(L.xh)&&t.some((function(P){return function(N){return Bd(P.xh,N)}})(L)))throw new M(2,4,4037);return D.return(t)}})}function sI(e,t,n,i,r,o,s){return C(function(u){return u.g==1?(C0(e,n,t,s>0),t.matchedStreams?t.segmentIndex?T(u,E0(t,i+s),2):u.A(2):u.return(!1)):(I0(t,i,r,o,s),u.return(!0))})}function E0(e,t){var n,i,r,o,s,u;return C(function(a){if(a.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)o=i[r],n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex()),o.dependencyStream&&!o.dependencyStream.segmentIndex&&n.push(o.dependencyStream.createSegmentIndex());return T(a,Promise.all(n),2)}if(e.segmentIndex instanceof Je)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);G(a)})}function uI(e,t,n,i,r,o,s){if(bd(n))return null;var u=r(n);return C0(e,i,u),u.createSegmentIndex&&(u.createSegmentIndex=function(){return C(function(a){return u.segmentIndex?a.A(0):(u.segmentIndex=new Je,T(a,E0(u,0),0))})},u.closeSegmentIndex=function(){if(u.segmentIndex&&(u.segmentIndex.release(),u.segmentIndex=null),u.matchedStreams)for(var a=g(u.matchedStreams),l=a.next();!l.done;l=a.next()){l=l.value;var c;if(c=l.segmentIndex){e:{c=g(t);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f!==u&&f.segmentIndex&&f.matchedStreams&&f.matchedStreams.includes(l)){c=!0;break e}c=!1}c=!c}c&&(l.segmentIndex.release(),l.segmentIndex=null)}}),!u.matchedStreams||!u.matchedStreams.length?null:(I0(u,0,o,s,0),u)}function I0(e,t,n,i,r){var o=e.matchedStreams;for(t+=r;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&Tr(e.language,s.language)==0&&(u=!1),u&&((u=i[t-r])&&u.delete(s),s.fullMimeTypes))for(s=g(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function No(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function xl(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function nr(e,t){function n(s,u){s||(s=[]),u=g(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=g(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=mg(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new M(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=g(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=No(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var s=new Je,u=g(e.trickModeVideo.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.trickModeVideo.segmentIndex=s,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),nr(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),nr(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=No(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var s=new Je,u=g(e.dependencyStream.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.dependencyStream.segmentIndex=s,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),nr(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),nr(e.dependencyStream,t))}function Sl(e,t){var n=e.roles;n||(n=[]);for(var i=g(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=g(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,V(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=g(t.closedCaptions),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function C0(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=g(t);for(var r=t.next();!r.done;r=t.next()){if(r=aI(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function aI(e,t,n){var i={audio:Vd,video:Fd,text:iu,image:ru}[n.type],r=null,o=i(n);if(t.has(o))r=t.get(o);else{o={audio:function(l,c){return Bd(l,c)},video:function(l,c){return Bd(l,c)},text:lI,image:cI}[n.type];for(var s={audio:fI,video:dI,text:hI,image:pI}[n.type],u=g(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||r&&!s(n,r,a)||(r=a)}return e.o&&!bd(r)&&t.delete(i(r)),r}function M0(e,t){return e.mimeType!=t.mimeType?!1:P0(e.codecs)===P0(t.codecs)}d.Ui=function(e){this.o=e};function Bd(e,t){return!(e.drmInfos&&!gg(e.drmInfos,t.drmInfos))}function lI(e,t){return t.language?!(e.forced!==t.forced||Tr(e.language,t.language)==0||t.kind!=e.kind):!0}function cI(){return!0}function fI(e,t,n){var i=R0(e,t,n);if(i===rn)return!0;if(i===In)return!1;i=Tr(e.language,t.language);var r=Tr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=nu(e.channelsCount,t.channelsCount,n.channelsCount),i==rn?!0:i==In?!1:(i=nu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==rn?!0:i==In?!1:!!(e.bandwidth&&L0(e.bandwidth,t.bandwidth,n.bandwidth)==rn)))}function dI(e,t,n){var i=R0(e,t,n);if(i===rn)return!0;if(i===In)return!1;if(i=nu(e.width*e.height,t.width*t.height,n.width*n.height),i==rn)return!0;if(i==In)return!1;if(e.frameRate){if(i=nu(e.frameRate,t.frameRate,n.frameRate),i==rn)return!0;if(i==In)return!1}return!!(e.bandwidth&&L0(e.bandwidth,t.bandwidth,n.bandwidth)==rn)}function hI(e,t,n){var i=Tr(e.language,t.language),r=Tr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function pI(e,t,n){return nu(e.width*e.height,t.width*t.height,n.width*n.height)==rn}function k0(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function D0(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ce([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function nu(e,t,n){if(t==e&&e!=n)return In;if(n==e&&e!=t)return rn;if(t>e){if(n<=e||n-e<t-e)return rn;if(n-e>t-e)return In}else{if(n>e)return In;if(e-n<e-t)return rn;if(e-n>e-t)return In}return Hd}function R0(e,t,n){var i=e.mimeType===t.mimeType&&e.codecs===t.codecs,r=e.mimeType===n.mimeType&&e.codecs===n.codecs;return i&&!r?In:!i&&r?rn:(t=M0(e,t),e=M0(e,n),t&&!e?In:!t&&e?rn:Hd)}function L0(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?rn:t<e?In:Hd}function bd(e){switch(e.type){case pe:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Fd(e){return wl([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Vd(e){return wl([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function iu(e){return wl([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function ru(e){return wl([e.width,e.codecs,e.mimeType])}function wl(e){return JSON.stringify(e)}function P0(e){if(!Gd.has(e)){var t=ct(e);Gd.set(e,t)}return Gd.get(e)}K("shaka.util.PeriodCombiner",zt),zt.prototype.setUseStreamOnce=zt.prototype.Ui,zt.prototype.combinePeriods=zt.prototype.kg,zt.prototype.deleteStream=zt.prototype.Wh,zt.prototype.getImageStreams=zt.prototype.Ij,zt.prototype.getTextStreams=zt.prototype.Lg,zt.prototype.getVariants=zt.prototype.bk;var rn=1,Hd=0,In=-1,Gd=new Map;function gI(e,t){var n=new DOMParser,i=mI.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function N0(e,t){try{var n=Jn(e);return gI(n,t)}catch{return null}}var mI=new We(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Al(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Fa=1,this.H=[],this.l={tf:"",type:"",profiles:[],uc:null,rb:0,cb:null,oe:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new zt,this.K=0,this.Da=new _r(5),this.M=new ge(function(){if(e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)){e.I.za(e.J,"timeupdate",function(){return F0(e)});return}F0(e)}),this.R=new Zr,this.O=null,this.G=[],this.aa=1/0,this.va=!1,this.i=null,this.N=0,this.T=!1,this.I=new Me,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new a0}d=Al.prototype,d.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Kb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ui(this.g.dash.useStreamOnceInPeriodFlattening)},d.start=function(e,t){var n=this,i;return C(function(r){if(r.g==1)return n.va=t.isLowLatencyMode(),n.B=[e],n.j=t,T(r,Kd(n),2);if(i=r.h,n.j&&Xd(n,i),!n.j)throw new M(2,7,7001);return r.return(n.h)})},d.stop=function(){for(var e=g(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={tf:"",type:"",profiles:[],uc:null,rb:0,cb:null,oe:0},this.m=null,this.M!=null&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},d.update=function(){var e=this,t;return C(function(n){if(n.g==1)return ue(n,2),T(n,Kd(e),4);if(n.g!=2)return de(n,0);if(t=ae(n),!e.j||!t)return n.return();e.j.onError(t),G(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Ic();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,Xd(this,0))}}},d.banLocation=function(e){this.i&&this.i.banLocation(e)},d.setMediaElement=function(e){this.J=e};function Kd(e){var t,n,i,r,o,s,u,a,l,c,f;return C(function(h){return h.g==1?(t=4,n="MPD",i=jI(e),r=e.B,i.length?(r=i,n="Patch",t=6):e.B.length>1&&e.i&&(o=tu(e.i,"Location",!0),o.length&&(r=o)),s=ot(r,e.g.retryParameters),u=Date.now(),T(h,zd(e,s,0,{type:t}),2)):h.g!=3?(a=h.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.B.includes(a.uri)&&e.B.unshift(a.uri),l=new nt(a.uri),e.$=l.g.toString(),T(h,vI(e,a.data,a.uri,n),3)):h.return(0)):(c=Date.now(),f=(c-u)/1e3,e.Da.sample(1,f),e.ma.clear(),h.return(f))})}function vI(e,t,n,i){var r,o,s,u,a,l,c,f,h,p;return C(function(m){if(m.g==1){if(r=t,o=e.g.dash.manifestPreprocessor,s=Oa,o!=s){if(Ee("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=N0(r,i),!u)throw new M(2,4,4001,n);o(u),r=jn(u.outerHTML)}if(a=es(r,i),!a)throw new M(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=Ua,l!=c&&l(a),i==="Patch"?m.return(yI(e,a)):e.g.dash.disableXlinkProcessing?m.return(j0(e,a,n)):(f=e.g.dash.xlinkFailGracefully,h=Tl(a,e.g.retryParameters,f,n,e.j.networkingEngine),wr(e.R,h),T(m,h.promise,2))}return p=m.h,m.return(j0(e,p,n))})}function j0(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me,le,Be,Ie,Te,ve,we,at,lt,vn,Jt,Ot,mu,Pn,rr,bo,Fo;return C(function(Yn){switch(Yn.g){case 1:for(e.i&&e.i.l.clear(),i=[n],r=[],o=new Map,s=Pe(t,"Location"),u=g(s),a=u.next();!a.done;a=u.next())l=a.value,c=l.attributes.serviceLocation,(f=_t(l))&&(h=mt(i,[f])[0],c&&(e.i?Po(e.i,"Location",c,h):o.set(c,h)),r.push(h));if(e.i?(p=tu(e.i,"Location",!0),p.length>0&&(i=e.B=p)):r.length&&(i=e.B=r),e.l.tf=t.attributes.id||"",e.l.oe=oe(t,"publishTime",fi)||0,e.H=Pe(t,"PatchLocation"),m=Promise.resolve(),(v=Ge(t,"ContentSteering"))&&e.j)for(y=v.attributes.defaultServiceLocation,e.i?(e.i.i=i,e.i.h=y):(e.i=new Lo(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=i,e.i.h=y,(S=_t(v))&&(oe(v,"queryBeforeStart",Ou,!1)?m=eu(e.i,S):eu(e.i,S))),x=g(o.keys()),A=x.next();!A.done;A=x.next())I=A.value,R=o.get(I),Po(e.i,"Location",I,R);if(E=Pe(t,"BaseURL"),w=!1,e.i)for(k=g(E),L=k.next();!L.done;L=k.next())D=L.value,P=D.attributes.serviceLocation,N=_t(D),P&&N&&(Po(e.i,"BaseURL",P,N),w=!0);if(e.X.splice(0),w&&e.i||(_=E.map(_t),e.X.push.apply(e.X,V(mt(i,_)))),B=e.i,j=e.X,O=function(){return B&&w?tu(B,"BaseURL"):j.slice()},e.l.cb=O,F=0,E&&E.length&&(F=oe(E[0],"availabilityTimeOffset",ju)||0),e.l.rb=F,e.K=oe(t,"minimumUpdatePeriod",Qn,-1),H=oe(t,"availabilityStartTime",fi),Q=oe(t,"timeShiftBufferDepth",Qn),z=e.g.dash.ignoreSuggestedPresentationDelay,Ae=null,z||(Ae=oe(t,"suggestedPresentationDelay",Qn)),ce=e.g.dash.ignoreMaxSegmentDuration,Le=null,ce||(Le=oe(t,"maxSegmentDuration",Qn)),me=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&me=="static"),e.l.type=me,e.h)for(le=e.h.presentationTimeline,Be=le.Ib(),Ie=g(e.o.values()),Te=Ie.next();!Te.done;Te=Ie.next())ve=Te.value,ve.segmentIndex&&ve.segmentIndex.Ya(Be);else we=e.g.dash.ignoreMinBufferTime,at=0,we||(at=oe(t,"minBufferTime",Qn)||0),lt=0,lt=Ae!=null?Math.min(Ae,Q||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(at*1.5,Q||1/0),le=new re(H,lt,e.g.dash.autoCorrectDrift);return le.cd(me=="static"),le.W()&&!isNaN(e.g.availabilityWindowOverride)&&(Q=e.g.availabilityWindowOverride),Q==null&&(Q=1/0),le.Kf(Q),vn=t.attributes.profiles||"",e.l.profiles=vn.split(","),Jt={Fb:me!="static",presentationTimeline:le,sa:null,na:null,qa:null,L:null,bandwidth:0,Ng:!1,rb:F,uc:null,profiles:vn.split(","),roles:null,Mb:function(){return""}},T(Yn,m,2);case 2:return e.N=0,Ot=B0(e,Jt,O,t,!1),mu=Ot.duration,Pn=Ot.periods,(me!="static"||e.V)&&Ot.Yh||le.Ab(mu||1/0),e.T&&e.va&&le.Ri(e.aa),le.Vg(Le||1),e.T&&e.va&&(rr=Ae??e.g.defaultPresentationDelay,le.qh(rr)),e.h?(e.h.periodCount=Pn.length,e.h.gapCount=e.N,T(Yn,O0(e,Pn,!1),4)):T(Yn,e.m.kg(Pn,Jt.Fb),6);case 6:if(e.h={presentationTimeline:le,variants:e.m.l,textStreams:e.m.Lg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:SI(t),nextUrl:wI(t),periodCount:Pn.length,gapCount:e.N,isLowLatency:e.T,startTime:null},!le.hj()){Yn.A(7);break}return bo=Pe(t,"UTCTiming"),T(Yn,PI(e,O,bo),8);case 8:if(Fo=Yn.h,!e.j)return Yn.return();le.Si(Fo);case 7:le.nf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),AI(e),EI(e,Pn),G(Yn)}})}function O0(e,t,n){var i;return C(function(r){if(r.g==1)return T(r,e.m.kg(t,!0,n),2);e.h.variants=e.m.l,i=e.m.Lg(),i.length>0&&(e.h.textStreams=i),e.h.imageStreams=e.m.i,e.j.filter(e.h),G(r)})}function yI(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N;return C(function(_){if(_.g==1){if(n=t.attributes.mpdId,i=oe(t,"originalPublishTime",fi),!n||n!==e.l.tf||i!==e.l.oe)throw e.H=[],new M(1,4,4052);for(r=[],o=[],s=new Set,u=g(Up(t)),a=u.next();!a.done;a=u.next())if(l=a.value,c=Uu(l.attributes.sel||""),f=c[c.length-1],h=_t(l)||"",f.name==="MPD")if(f.Dc==="mediaPresentationDuration"){p=_t(l)||"";var B=Qn(p);if(B!=null){e.l.uc=B;for(var j=g(e.u.values()),O=j.next();!O.done;O=j.next())O.value.uc=B}}else if(f.Dc==="type"){for(e.h.presentationTimeline.cd(h=="static"),e.l.type=h,B=g(e.u.values()),j=B.next();!j.done;j=B.next())j.value.Fb=h=="dynamic";h=="static"&&(e.K=-1)}else f.Dc==="publishTime"?e.l.oe=fi(h)||0:f.Dc===null&&l.tagName==="add"&&o.push(l);else if(f.name==="PatchLocation")Bp(e.H,l);else if(f.name==="Period")l.tagName==="add"?o.push(l):l.tagName==="remove"&&f.id&&xI(e,f.id);else if(f.name==="SegmentTemplate"){if(j=Uu(l.attributes.sel||""),B=j[j.length-1],B.Dc){j=U0(e,j),O=_t(l)||"";for(var F=g(j),H=F.next();!H.done;H=F.next())H=e.u.get(H.value),Fp(H.L.Oc,l.tagName,B.Dc,O);B=j}else B=[];for(m=B,v=g(m),y=v.next();!y.done;y=v.next())S=y.value,s.add(S)}else if(f.name==="SegmentTimeline"||f.name==="S"){for(B=Uu(l.attributes.sel||""),B=U0(e,B),j=g(B),O=j.next();!O.done;O=j.next())O=e.u.get(O.value),O=Do(O,er,"SegmentTimeline"),F=Pe(O,"S"),Bp(F,l),O.children=F;for(x=B,A=g(x),I=A.next();!I.done;I=A.next())R=I.value,s.add(R)}for(E=g(s),w=E.next();!w.done;w=E.next())k=w.value,_0(e,k);for(L=g(o),D=L.next();!D.done;D=L.next())P=D.value,r.push.apply(r,V(TI(e,P)));return r.length?(e.h.periodCount+=r.length,e.h.gapCount=e.N,T(_,O0(e,r,!0),2)):_.A(2)}e.l.type=="static"&&(N=e.l.uc,e.h.presentationTimeline.Ab(N||1/0)),G(_)})}function TI(e,t){return B0(e,{Fb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Ng:!1,rb:e.l.rb,profiles:e.l.profiles,uc:e.l.uc,roles:null,Mb:function(){return""}},e.l.cb,t,!0).periods}function xI(e,t){e.h.periodCount--;for(var n=g(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);Do(r,er,"SegmentTimeline").children=[],_0(e,i),e.u.delete(i)}e.G=e.G.filter(function(o){return o!==t})}function U0(e,t){var n="",i="",r=-1,o="";t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.name==="Period"?n=s.id:s.name==="AdaptationSet"?(i=s.id,s.position!==null&&(r=s.position)):s.name==="Representation"&&(o=s.id);if(t=[],o)t.push(n+","+o);else if(i)for(r=g(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.sa.id===n&&e.qa.id===i&&e.L.id&&t.push(n+","+e.L.id);else if(r>-1)for(i=g(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.sa.id===n&&e.qa.position===r&&e.L.id&&t.push(n+","+e.L.id);return t}function _0(e,t){var n=e.u.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.Ya(e.h.presentationTimeline.Ib());try{var r=T0(n,function(o,s,u,a){return H0(e,o,s,u,a)},e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);i.createSegmentIndex=function(){return C(function(o){if(o.g==1)return i.segmentIndex?o.A(0):T(o,r.Sc(),3);i.segmentIndex=o.h,G(o)})}}catch(o){if(t=n.L.contentType,t!=pe&&t!="application"&&t!="image"||o.code!=4002)throw o}}function SI(e){var t=Ge(e,"ServiceDescription");if(!t||(e=Ge(t,"Latency"),t=Ge(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function wI(e){if(e=Pe(e,"SupplementalProperty"),!e.length)return null;e=g(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function B0(e,t,n,i,r){var o=t.uc;o||(o=oe(i,"mediaPresentationDuration",Qn),e.l.uc=o);var s=0;e.h&&e.h.presentationTimeline&&e.V&&(s=e.h.presentationTimeline.Zb());var u=[],a=s;i=Pe(i,"Period");for(var l=0;l<i.length;l++){var c=i[l],f=i[l+1],h=oe(c,"start",Qn,a),p=c.attributes.id,m=oe(c,"duration",Qn);h=l==0&&h==0&&e.V?s:h;var v=null;if(f){var y=oe(f,"start",Qn);y!=null&&(v=y-h+s)}else o!=null&&(v=o-h+s);if(y=kp,v&&m&&Math.abs(v-m)>y&&v>m&&e.N++,v==null&&(v=m),!(e.O!==null&&p!==null&&h!==null&&h<e.O)||e.G.includes(p)||l+1==i.length){if(h!==null&&(e.O===null||h>e.O)&&(e.O=h),a=II(e,t,n,{start:h,duration:v,node:c,hf:v==null||!f}),u.push(a),t.sa.id&&v&&e.ya.set(t.sa.id,v),v==null){a=null;break}a=h+v}}if(r)for(t=g(u),n=t.next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=u.map(function(S){return S.id});return o!=null?{periods:u,duration:o+s,Yh:!1}:{periods:u,duration:a,Yh:!0}}function AI(e){var t=Array.from(e.F.keys()).filter(function(u){return!e.G.includes(u)});t=g(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=g(e.F.get(n)),o=r.next();!o.done;o=r.next()){o=o.value;var s=e.o.get(o);s&&(s.segmentIndex&&s.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.Wh(s,n),e.o.delete(o)))}i&&e.F.delete(n)}}function EI(e,t){t=new Set(t.map(function(r){return r.id}));for(var n=g(e.C.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.C.delete(i)}function II(e,t,n,i){t.sa=Wd(e,i.node,null,n),t.na=i,t.sa.rb=t.rb,t.sa.id||(t.sa.id="__shaka_period_"+i.start);var r=Pe(i.node,"EventStream");n=t.presentationTimeline.Ib(),r=g(r);for(var o=r.next();!o.done;o=r.next())NI(e,i.start,i.duration,o.value,n);for(n=Pe(i.node,"SupplementalProperty"),n=g(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=ou(e,r))&&(t.Mb=r);if(n=Pe(i.node,"AdaptationSet").map(function(p,m){return b0(e,t,m,p)}).filter(Hi),t.Fb){r=[],o=g(n);for(var s=o.next();!s.done;s=o.next()){s=g(s.value.Nk);for(var u=s.next();!u.done;u=s.next())r.push(u.value)}if(r.length!=new Set(r).size)throw new M(2,4,4018)}for(r=new Map,o=g(n),s=o.next();!s.done;s=o.next())for(s=g(s.value.wj),u=s.next();!u.done;u=s.next()){var a=g(u.value);u=a.next().value,a=a.next().value,r.set(u,a)}if(r.size)for(o=null,s=g(n),u=s.next();!u.done;u=s.next()){u=u.value,a=[];for(var l=g(u.streams),c=l.next(),f={};!c.done;f={yh:void 0},c=l.next())if(f.yh=c.value,r.has(f.yh.originalId)){o||(o=Pe(i.node,"AdaptationSet").map(function(p,m){return b0(e,t,m,p)}).filter(Hi)),c=g(o);for(var h=c.next();!h.done;h=c.next())(h=h.value.streams.find((function(p){return function(m){return m.originalId==p.yh.originalId}})(f)))&&(h.dependencyStream=r.get(h.originalId),h.originalId+=h.dependencyStream.originalId,a.push(h))}a.length&&u.streams.push.apply(u.streams,V(a))}if(i=n.filter(function(p){return!p.Gh}),n=n.filter(function(p){return p.Gh}),!e.g.disableIFrames){for(n=g(n),r=n.next();!r.done;r=n.next())for(r=r.value,o=r.Gh.split(" "),s=g(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.includes(u.id))for(u=g(u.streams),a=u.next();!a.done;a=u.next())cg(a.value,r.streams)}if(n=El(e.g.disableAudio,i,"audio"),r=El(e.g.disableVideo,i,"video"),o=El(e.g.disableText,i,pe),i=El(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new M(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function El(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,V(r.streams)),i},[])}function b0(e,t,n,i){function r(N){var _=N.attributes["dvb:fontFamily"];N=N.attributes["dvb:url"],_&&N&&(N=mt(t.qa.cb(),[N],t.Mb()),e.j.addFont(_,N[0]))}function o(N){switch(N){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(N){switch(N){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.qa=Wd(e,i,t.sa,null),t.qa.position=n;var u=!1;n=Pe(i,"Role");var a=n.map(function(N){return N.attributes.value}).filter(Hi),l=void 0,c=t.qa.contentType==pe;c&&(l="subtitle"),n=g(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=f.attributes.schemeIdUri;if(h==null||h=="urn:mpeg:dash:role:2011")switch(f=f.attributes.value,f){case"main":u=!0;break;case"caption":case"subtitle":l=f}}var p=Pe(i,"EssentialProperty");n=null;var m=!1;f=null,h=!1,p=g(p);for(var v=p.next();!v.done;v=p.next()){v=v.value;var y=v.attributes.schemeIdUri;if(y=="http://dashif.org/guidelines/trickmode")n=v.attributes.value;else if(y=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var S=s(parseInt(v.attributes.value,10));else if(y=="urn:mpeg:mpegB:cicp:ColourPrimaries")var x=o(parseInt(v.attributes.value,10));else y!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(y=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?m=!0:y=="urn:dvb:dash:fontdownload:2014"?r(v):y=="urn:mpeg:dash:urlparam:2014"&&(f=ou(e,v))||(h=!0))}if(h)return null;var A=null;for(h=Pe(i,"SupplementalProperty"),h=g(h),p=h.next();!p.done;p=h.next())p=p.value,v=p.attributes.schemeIdUri,v=="http://dashif.org/guidelines/last-segment-number"?A=parseInt(p.attributes.value,10)-1:v=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?S=s(parseInt(p.attributes.value,10)):v=="urn:mpeg:mpegB:cicp:ColourPrimaries"?x=o(parseInt(p.attributes.value,10)):v=="urn:dvb:dash:fontdownload:2014"?r(p):v=="urn:mpeg:dash:urlparam:2014"&&(f=ou(e,p));f&&(t.Mb=f),f=Pe(i,"Accessibility");var I=new Map,R;for(f=g(f),h=f.next();!h.done;h=f.next())if(p=h.value,h=p.attributes.schemeIdUri,p=p.attributes.value,h!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(h!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)h=="urn:mpeg:dash:role:2011"?p!=null&&(a.push(p),p=="captions"&&(l="caption")):h=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(p=="1"?R="visually impaired":p=="2"?R="hard of hearing":p=="9"&&(R="spoken subtitles"));else if(h=1,p!=null)for(p=g(p.split(";")),v=p.next();!v.done;v=p.next()){y=v.value;var E=v=void 0;y.includes("=")?(y=y.split("="),v="svc"+y[0],E=y[1].split(",")[0].split(":").pop()):(v="svc"+h,h++,E=y),I.set(v,ke(E))}else I.set("svc1","und");else if(h=1,p!=null)for(p=p.split(";"),v=g(p),y=v.next();!y.done;y=v.next()){E=y.value;var w=y=void 0;E.includes("=")?(E=E.split("="),y=E[0].startsWith("CC")?E[0]:"CC"+E[0],w=E[1]||"und"):(y="CC"+h,p.length==2?h+=2:h++,w=E),I.set(y,ke(w))}else I.set("CC1","und");f=Pe(i,"ContentProtection");var k=l0(e.xa,f,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.qa.encrypted=f.length>0;var L=ke(t.qa.language||"und"),D=t.qa.label,P=new Map;if(i=Pe(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(f=[],h=g(i),p=h.next();!p.done;p=h.next())v=p.value,(p=ci(v,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(v=On(v),v.attributes.codecs=p.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),f.push(v));i.push.apply(i,V(f))}if(f=i.map(function(N){var _=CI(e,t,k,l,L,D,u,a,I,N,R,A);return _&&(_.hdr=_.hdr||S,_.colorGamut=_.colorGamut||x,_.fastSwitching=m,N=N.attributes.dependencyId)?(_.baseOriginalId=N,P.set(N,_),null):_}).filter(function(N){return!!N}),f.length==0&&P.size==0){if(n=t.qa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new M(2,4,4003)}if(!t.qa.contentType||t.qa.contentType=="application")for(t.qa.contentType=G0(f[0].mimeType,f[0].codecs),c=g(f),h=c.next();!h.done;h=c.next())h.value.type=t.qa.contentType;for(c=t.qa.id||"__fake__"+e.Fa++,h=g(f),p=h.next();!p.done;p=h.next()){for(p=p.value,v=g(k.drmInfos),y=v.next();!y.done;y=v.next())y=y.value,y.keyIds=y.keyIds&&p.keyIds?new Set([].concat(V(y.keyIds),V(p.keyIds))):y.keyIds||p.keyIds;e.g.enableAudioGroups&&(p.groupId=c)}return i=i.map(function(N){return N.attributes.supplementalId||N.attributes.id}).filter(Hi),{id:c,contentType:t.qa.contentType,language:L,Bm:u,streams:f,drmInfos:k.drmInfos,Gh:n,Nk:i,wj:P}}function ou(e,t){if((t=xn(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&oe(t,"useMPDUrlQuery",Ou,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.$:n.split("&").map(function(i){if(i=="$querypart$")return e.$;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var o=new br(e.$).get(r);if(o.length)return r+"="+o[0]}return i}).join("&")}}return null}function CI(e,t,n,i,r,o,s,u,a,l,c,f){t.L=Wd(e,l,t.qa,null);var h=t.L.id;if(e.aa=Math.min(e.aa,t.L.rb),e.T=e.aa>0,!LI(t.L))return null;var p=t.na.start;t.bandwidth=oe(l,"bandwidth",Zn)||0,t.roles=u;var m=Pe(l,"SupplementalProperty"),v=Pe(l,"EssentialProperty"),y=Pe(l,"ContentProtection");l=null;var S=v.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(S||(S=m.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=ou(e,S)),l&&(t.Mb=l),S=t.L.contentType,l=S==pe||S=="application",S=S=="image",y.length&&(t.qa.encrypted=!0);try{var x=void 0;if(n.gg){var A=t.L.cb,I=t.Mb,R=mt(A(),[n.gg.qk],I()),E=ot(R,e.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:n.gg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var j,O,F;return C(function(H){if(H.g==1)return T(H,zd(e,E,6),2);if(H.g!=3){if(j=H.h,!j.data||j.data.byteLength!=16)throw new M(2,4,4049);return O={name:"AES-CBC"},F=x,T(H,b.crypto.subtle.importKey("raw",j.data,O,!0,["decrypt"]),3)}F.cryptoKey=H.h,x.fetchKey=void 0,G(H)})}}}if(t.L.aesKey=x,A=function(j,O,F,H){return H0(e,j,O,F,H)},t.L.Hd)var w=z2(t,A,x);else if(t.L.Ac)w=q2(t,e.o,x);else if(t.L.Oc)w=T0(t,A,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.ya,x,f,!1,e.C);else{var k=t.na.duration||0,L=t.L.cb,D=t.L.mimeType,P=t.L.codecs;w={endTime:-1,timeline:-1,Sc:function(){var j=Ta(p,k,L());return j.Gb(function(O){O.mimeType=D,O.codecs=P}),Promise.resolve(j)},timescale:1}}}catch(j){if((l||S)&&j.code==4002)return null;throw j}f=j2(e.xa,y,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]),y=!1,m.some(function(j){return j.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&j.attributes.value=="JOC"})&&(y=!0),m=!1,l&&(m=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var N;if(S&&((v=v.find(function(j){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(j.attributes.schemeIdUri)}))&&(N=v.attributes.value),!N))return null;var _;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(_="PQ"),v=t.L.id?t.sa.id+","+t.L.id:"",e.H.length&&h&&e.u.set(t.sa.id+","+h,kI(t)),t.L.Bf&&MI(e,t.L.Bf,w,t.presentationTimeline),w.endTime!=-1&&t.sa.id!=null&&t.L.id!=null&&((h=e.C.get(t.sa.id))?(h.endTime=w.endTime,h.fh.includes(t.L.id)||h.fh.push(t.L.id),e.C.set(t.sa.id,h)):e.C.set(t.sa.id,{endTime:w.endTime,timeline:w.timeline,fh:[t.L.id]}));var B=v&&e.o.has(v)?e.o.get(v):{id:e.Fa++,originalId:t.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){B.segmentIndex&&(B.segmentIndex.release(),B.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:l,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:i,encrypted:n.drmInfos.length>0,drmInfos:n.drmInfos,keyIds:f,language:r,originalLanguage:t.qa.language,label:o,type:t.qa.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:u,forced:m,channelsCount:t.L.wf,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:y,closedCaptions:a,hdr:_,colorGamut:void 0,videoLayout:void 0,tilesLayout:N,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ze(t.L.mimeType,t.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return B.createSegmentIndex=function(){var j;return C(function(O){if(O.g==1)return B.segmentIndex?O.A(0):(j=B,T(O,w.Sc(),3));j.segmentIndex=O.h,G(O)})},v&&t.Fb&&!e.o.has(v)&&(t=t.sa.id||"",e.F.has(t)||e.F.set(t,[]),e.o.set(v,B),e.F.get(t).push(v)),B}function MI(e,t,n,i){if(!e.ma.has(t)){e.ma.add(t);var r=oe(t,"presentationTime",St)||0,o=Ge(t,"UTCTiming"),s;(s=o&&o.attributes.schemeIdUri)&&(o=o.attributes.schemeIdUri,s=!(o==="urn:mpeg:dash:utc:http-ntp:2014"||o==="urn:mpeg:dash:utc:ntp:2014"||o==="urn:mpeg:dash:utc:sntp:2014")),s?t=(oe(t,"wallClockTime",fi)||0)*1e3:(t=oe(t,"wallClockTime",St)||0,t=lm(t)),n=new Date(t-r/n.timescale*1e3),r=n.getTime()/1e3,isNaN(r)||(i.o||i.rh(r),i=new Map().set("detail",{wallClockTime:t,programStartDate:n}),i=new Y("prft",i),e.j.onEvent(i))}}function kI(e){function t(n){return n?(n=Bi(n),n.Hd=null,n.Ac=null,n.Oc=kc(n.Oc),n.Bf=null,n):null}return e=Bi(e),e.sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Bi(e.na),e.na.node=null),e}function F0(e){var t,n;return C(function(i){switch(i.g){case 1:return t=0,ue(i,2),T(i,Kd(e),4);case 4:t=i.h,de(i,3);break;case 2:if(n=ae(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),Xd(e,t),G(i)}})}function Xd(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ia(Math.max(n-t,Au(e.Da)))}}function Wd(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,wf:null,audioSamplingRate:null,rb:0,Hf:1,encrypted:!1},i=i||n.cb;var r=t.attributes.id,o=t.attributes.supplementalId,s=Pe(t,"BaseURL"),u,a=!1;if(e.i)for(var l=g(s),c=l.next();!c.done;c=l.next()){var f=c.value;c=f.attributes.serviceLocation,f=_t(f),c&&f&&(Po(e.i,r,c,f),a=!0)}a&&e.i||(u=s.map(_t));var h=e.i;e=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=Mf([t.attributes.codecs||n.codecs]).join(","),f=oe(t,"frameRate",nS)||n.frameRate;var p=t.attributes.sar||n.pixelAspectRatio,m=DI(Pe(t,"InbandEventStream"),n.emsgSchemeIdUris),v=Pe(t,"AudioChannelConfiguration");v=RI(v)||n.wf;var y=oe(t,"audioSamplingRate",St)||n.audioSamplingRate;e||(e=G0(l,c));var S=Ge(t,"SegmentBase"),x=Ge(t,"SegmentTemplate"),A=S&&oe(S,"availabilityTimeOffset",ju)||0,I=x&&oe(x,"availabilityTimeOffset",ju)||0,R=s&&s.length&&oe(s[0],"availabilityTimeOffset",ju)||0;A=n.rb+R+A+I,I=null,(R=Ge(t,"SegmentSequenceProperties"))&&(R=oe(R,"cadence",Zn))&&(I=R),R=t.attributes.label;var E=Pe(t,"Label");return E&&E.length&&(E=E[0],it(E)&&(R=it(E))),{cb:function(){return mt(i(),s.length?h&&a?tu(h,r):u||[]:[])},Hd:S||n.Hd,Ac:Ge(t,"SegmentList")||n.Ac,Oc:x||n.Oc,Bf:Ge(t,"ProducerReferenceTime")||n.Bf,width:oe(t,"width",St)||n.width,height:oe(t,"height",St)||n.height,contentType:e,mimeType:l,codecs:c,frameRate:f,pixelAspectRatio:p,emsgSchemeIdUris:m,id:o||r,originalId:r,language:t.attributes.lang,wf:v,audioSamplingRate:y,rb:A,ef:null,Hf:I||n.Hf,label:R||null,encrypted:!1}}function DI(e,t){t=t.slice(),e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function RI(e){e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}function LI(e){var t=e.Hd?1:0;return t+=e.Ac?1:0,t+=e.Oc?1:0,t==0?e.contentType==pe||e.contentType=="application":(t!=1&&(e.Hd&&(e.Ac=null),e.Oc=null),!0)}function V0(e,t,n,i){var r,o,s,u,a,l,c;return C(function(f){if(f.g==1)return r=[Ut(n)],o=mt(t(),r),s=ot(o,e.g.retryParameters),s.method=i,u=e.j.networkingEngine.request(4,s,{isPreload:e.oa()}),wr(e.R,u),T(f,u.promise,2);if(a=f.h,i=="HEAD"){if(!a.headers||!a.headers.date)return f.return(0);l=a.headers.date}else l=ze(a.data);return c=Date.parse(l),isNaN(c)?f.return(0):f.return(c-Date.now())})}function PI(e,t,n){var i,r,o,s,u,a,l,c;return C(function(f){switch(f.g){case 1:i=n.map(function(h){return{scheme:h.attributes.schemeIdUri,value:h.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=g(i),s=o.next();case 2:if(s.done){f.A(4);break}switch(u=s.value,ue(f,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":xe("NTP UTCTiming scheme is not supported");break;default:xe("Unrecognized scheme in UTCTiming element",a)}f.A(9);break;case 7:return T(f,V0(e,t,l,"HEAD"),10);case 10:return f.return(f.h);case 8:return T(f,V0(e,t,l,"GET"),11);case 11:return f.return(f.h);case 9:de(f,3);break;case 5:ae(f);case 3:s=o.next(),f.A(2);break;case 4:return xe("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}function NI(e,t,n,i,r){var o=i.attributes.schemeIdUri||"",s=i.attributes.value||"",u=oe(i,"timescale",St)||1,a=oe(i,"presentationTimeOffset",St)||0;i=g(Pe(i,"Event"));for(var l=i.next();!l.done;l=i.next()){l=l.value;var c=oe(l,"presentationTime",St)||0,f=oe(l,"duration",St)||0;c=Math.max((c-a)/u+t,t),f=c+f/u,n!=null&&(c=Math.min(c,t+n),f=Math.min(f,t+n)),f<r||(l={schemeIdUri:o,value:s,startTime:c,endTime:f,id:l.attributes.id||"",timescale:u,eventElement:Vp(l),eventNode:kc(l)},e.j.onTimelineRegionAdded(l))}}function H0(e,t,n,i,r){var o,s,u,a;return C(function(l){return l.g==1?(o=Sn,s=r?0:1,u=ks(t,n,i,e.g.retryParameters),T(l,zd(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function G0(e,t){return t=Ze(e,t),us(t)?pe:e.split("/")[0]}function zd(e,t,n,i){return i||(i={}),i.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,i),wr(e.R,t),t.promise}function jI(e){var t=e.l.oe;if(!e.l.tf||!t||!e.H.length)return[];var n=Date.now()/1e3,i=e.H.filter(function(r){return r=St(r.attributes.ttl),!r||t+r>n}).map(_t).filter(Hi);return i.length?mt(e.B,i):[]}K("shaka.dash.DashParser",Al),dr("application/dash+xml",function(){return new Al}),dr("video/vnd.mpeg.dash.mpd",function(){return new Al});function Il(){}K("shaka.dependencies",Il),Il.has=function(e){return Yd.has(e)},Il.add=function(e,t){if(!X0[e])throw Error(e+" is not supported");e==K0?Ee("mux.js","mux.js is no longer used in Shaka Player."):Yd.set(e,function(){return t})};var K0="muxjs",X0={Cm:K0,ISOBoxer:"ISOBoxer"};Il.Allowed=X0;var Yd=new Map([["ISOBoxer",function(){return b.ISOBoxer}]]);function Re(){this.j=new We(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new We(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function ni(){var e=b.ManagedMediaSource||b.MediaSource;return!!(e&&e.isTypeSupported)}d=Re.prototype,d.fc=function(){return!!navigator.mediaCapabilities},d.Oa=function(){return this.j.value()},d.Ha=function(){return this.l.value()},d.Ed=function(){return!1},d.hh=function(){return!1},d.gf=function(){return!1},d.Ki=function(){return!1},d.qe=function(){return!1},d.fd=function(){return!0},d.Bb=function(){var e=b.ManagedSourceBuffer||b.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType},d.ue=function(){return!0},d.Pi=function(){return 0},d.lc=function(){return Promise.resolve({width:1/0,height:1/0})},d.Xi=function(){return!1},d.wh=function(){return!1},d.Wa=function(e){var t=this.Oa();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},d.Bh=function(){return!!b.indexedDB},d.Ii=function(){return[]},d.sd=function(e){return b.matchMedia!==void 0&&b.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},d.dj=function(){return!1},d.xi=function(){return!1},d.Ef=function(){return!1},d.Nf=function(){return!0},d.zi=function(){return!1},d.cj=function(){return!0},d.ed=function(){return!1},d.Ug=function(e){return e==="com.apple.fps"},d.Mf=function(){return!0},d.toString=function(){return"Device: "+this.Ob()+" v"+this.Ba()+"; Type: "+this.Oa()};function qd(){Re.call(this),this.g=new We(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new We(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}Qe(qd,Re),d=qd.prototype,d.Ba=function(){return this.g.value()},d.Ob=function(){return"Apple Browser"},d.Oa=function(){return this.h.value()},d.Ha=function(){return"WEBKIT"},d.fc=function(){return!1},d.Ed=function(e,t){return t==="audio"},d.gf=function(){return!0},d.Ki=function(e){return e==="audio"},d.Wa=function(e){return Re.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},d.dj=function(){return!0},d.Mf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(Hn=function(){return new qd});function Jd(){if(!W0())throw Error("Not a Chromecast device!");Re.call(this),this.h=new We(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new We(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?z0:e.includes("fuchsia")?Y0:$d})}Qe(Jd,Re),d=Jd.prototype,d.Ba=function(){return this.h.value()},d.Ob=function(){return"Chromecast with "+this.g.value()},d.Oa=function(){return"CAST"},d.Ha=function(){return"CHROMIUM"},d.fc=function(){return Re.prototype.fc.call(this)&&this.g.value()!==$d},d.Bb=function(){return Re.prototype.Bb.call(this)&&this.g.value()!==$d},d.Pi=function(){switch(this.g.value()){case z0:return 0;case Y0:return 3;default:return 1}},d.lc=function(){var e,t,n,i,r;return C(function(o){switch(o.g){case 1:if(e=b.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},ue(o,2),!(n=e)){o.A(4);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=o.h;case 4:if(n){t.width=3840,t.height=2160,o.A(6);break}if(!(i=e)){o.A(7);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=o.h;case 7:i&&(t.width=1920,t.height=1080);case 6:de(o,3);break;case 2:r=ae(o),qn("Failed to check canDisplayType:",r);case 3:return o.return(t)}})},d.Wa=function(e){return Re.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},d.Bh=function(){return!1},d.ed=function(){return!0};function W0(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var z0="Android",Y0="Fuchsia",$d="Linux";W0()&&(Hn=function(){return new Jd});function Qd(){Re.call(this);var e=this;this.i=new We(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new We(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new We(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.u=new We(function(){return Re.prototype.Bb.call(e)?navigator.userAgent.match(/Edge?\//)?!e.h.value():!0:!1}),this.o=new We(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new We(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}Qe(Qd,Re),d=Qd.prototype,d.Ba=function(){return this.i.value()},d.Ob=function(){return this.g.value()},d.Ed=function(e){return Kc(e)?this.g.value()==="Edge"&&this.h.value():!1},d.hh=function(){return this.g.value()==="Edge"&&this.h.value()},d.gf=function(){return this.g.value()==="Edge"&&this.h.value()},d.Bb=function(){return this.u.value()},d.Wa=function(e){if(Re.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},d.Ef=function(){return this.g.value()==="Edge"||this.o.value()},d.ed=function(){if(this.Ha()==="GECKO"){var e=this.Ba();return e!==null?e>=100:Re.prototype.ed.call(this)}return Re.prototype.ed.call(this)},d.Ug=function(e){return this.Ha()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):Re.prototype.Ug.call(this,e)},vc=function(){return new Qd};function Zd(){Re.apply(this,arguments)}Qe(Zd,Re),d=Zd.prototype,d.Ba=function(){return null},d.Ob=function(){return"Hisense"},d.Oa=function(){return"TV"},d.fc=function(){return!1},d.lc=function(){var e={width:1920,height:1080},t=null;if(b.Hisense_Get4KSupportState)try{t=b.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},d.Wa=function(e){return Re.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(Hn=function(){return new Zd});function eh(){Re.call(this),this.g=new We(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}Qe(eh,Re),d=eh.prototype,d.Ob=function(){return"PlayStation"},d.Oa=function(){return"CONSOLE"},d.Ha=function(){return"WEBKIT"},d.Ba=function(){return this.g.value()},d.fc=function(){return!1},d.fd=function(){return!1},d.Bb=function(){return!1},d.wh=function(){return this.Ba()===4},d.lc=function(){var e,t,n,i,r;return C(function(o){switch(o.g){case 1:return e={width:1920,height:1080},t=!1,ue(o,2),T(o,b.msdk.device.getDisplayInfo(),4);case 4:n=o.h,t=n.resolution==="4K",de(o,3);break;case 2:return ae(o),ue(o,5),T(o,b.msdk.device.getDisplayInfoImmediate(),7);case 7:i=o.h,t=i.resolution==="4K",de(o,3);break;case 5:r=ae(o),xe("PlayStation: Failed to get the display info:",r);case 3:return t&&(e.width=3840,e.height=2160),o.return(e)}})},d.Wa=function(e){return Re.prototype.Wa.call(this,e),this.Ba()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},d.Ef=function(){return this.Ba()===4},d.Nf=function(){return this.Ba()!==4},navigator.userAgent.includes("PlayStation")&&(Hn=function(){return new eh});function th(){Re.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}Qe(th,Re),d=th.prototype,d.Ba=function(){return this.g},d.Ob=function(){return"Tizen"},d.Ha=function(){return"CHROMIUM"},d.Oa=function(){return"TV"},d.Ed=function(){return!0},d.qe=function(){return this.Ba()===3},d.fc=function(){return!1},d.fd=function(){var e=this.Ba();return e!==null?e>=4:Re.prototype.fd.call(this)},d.Bb=function(){return!1},d.ue=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:Re.prototype.ue.call(this)},d.lc=function(){var e=b.devicePixelRatio;e={width:b.screen.width*e>1920?3840:1920,height:b.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{xe("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return Re.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=this.Ba()!==2,this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},d.Ii=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},d.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return Re.prototype.sd.call(this,e)}return"SDR"},d.xi=function(){return!0},d.zi=function(){return this.Ba()===3},navigator.userAgent.includes("Tizen")&&(Hn=function(){return new th});function jo(){Re.apply(this,arguments)}Qe(jo,Re),jo.prototype.Ba=function(){return null},jo.prototype.Ob=function(){return"Vizio"},jo.prototype.Oa=function(){return"TV"},jo.prototype.fc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(Hn=function(){return new jo});function nh(){Re.call(this),this.i=new We(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new We(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new We(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}Qe(nh,Re),d=nh.prototype,d.Ba=function(){return this.g.value()},d.Ob=function(){return"WebKit STB"},d.Oa=function(){return"TV"},d.Ha=function(){return"WEBKIT"},d.fc=function(){return!1},d.fd=function(){var e=this.g.value();return e!==null?e>=15:!0},d.Ed=function(){return this.h.value()},d.lc=function(){return Promise.resolve({width:b.screen.width*b.devicePixelRatio,height:b.screen.height*b.devicePixelRatio})},d.Nf=function(){return!this.i.value()},d.Mf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(Hn=function(){return new nh});function ih(){Re.call(this);var e=this;this.h=OI(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(n){n=JSON.parse(n),e.g=n.configs["tv.model.supportHDR"]||n.configs["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({configNames:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){xe("WebOS: getConfigs call failed",n)}}Qe(ih,Re),d=ih.prototype,d.Ba=function(){return this.h},d.Ob=function(){return"WebOS"},d.Oa=function(){return"TV"},d.Ha=function(){return"CHROMIUM"},d.fc=function(){return!1},d.fd=function(){var e=this.Ba();return e!==null?e>3:Re.prototype.fd.call(this)},d.Bb=function(){return!1},d.ue=function(){var e=this.Ba();return e!==null?e>3:Re.prototype.ue.call(this)},d.lc=function(){var e={width:1920,height:1080};try{var t=JSON.parse(b.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{xe("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return Re.prototype.Wa.call(this,e),this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},d.sd=function(e){return this.g==null?(xe("WebOS: getConfigs call haven't finished"),Re.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function OI(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(d.cj=function(){return!1},d.ed=function(){var e=this.Ba();return e!==null?e>=6:Re.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var UI=new ih;Hn=function(){return UI}}function rh(){Re.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}Qe(rh,Re),d=rh.prototype,d.Ba=function(){return this.h},d.Ob=function(){return"Xbox"},d.Oa=function(){return"CONSOLE"},d.Ha=function(){return this.g?"EDGE":"CHROMIUM"},d.Ed=function(){return!0},d.hh=function(){return!0},d.gf=function(){return!0},d.Xi=function(){return this.g},d.lc=function(){var e={width:1920,height:1080},t=q0();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch{xe("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return Re.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},d.Ef=function(){return!0},d.Bh=function(){return!1};function q0(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||q0()!==null)&&(Hn=function(){return new rh});function J0(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function Cl(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}Cl.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),i.length>0&&(n+=":"+i.join(",")),n};function $0(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Oo(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function q(e,t,n){return(e=Oo(e,t))?e.value:n||null}function Ue(e,t){if(e=Oo(e,t),!e)throw new M(2,4,4023,t);return e.value}function Q0(e,t,n){n=n===void 0?[]:n,this.ea=t,this.g=e,this.wc=n}function Ml(e,t){this.name=e,this.value=t}function Cn(e,t){return e.filter(function(n){return n.name==t})}function Z0(e,t){return e.filter(function(n){return Ue(n,"TYPE")==t})}function vt(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Uo(e,t,n){return n=n===void 0?0:n,(e=vt(e,t))?Number(e.value):n}function ir(e,t,n){return t?e1(e,[t],n):[]}function e1(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return t1(r,n)})),mt(e,i)}function t1(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),o=t.get(r);if(o)e=e.replace(i,o);else throw new M(2,4,4039,r)}}return e}function _I(){this.g=0}function oh(e,t){t=ze(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!bI.test(n[0]))throw new M(2,4,4015);t=0;for(var i=!1,r=[],o=!0,s=0;s<n.length;s++){var u=n[s],a=n[s+1];if(u.startsWith("#")&&!u.startsWith("#EXT")||o)o=!1;else{if(u=n1(e,u),i||(r1.has(u.name)?(t=1,i=!0):u.name=="EXT-X-STREAM-INF"||u.name=="EXT-X-MEDIA"?i=!0:o1.has(u.name)&&(t=1,i=!0)),o1.has(u.name)){if(t!=1)throw new M(2,4,4017);o=e,e=Array(Math.max(100,Math.floor((n.length-s)/2))),i=0,u=[];var l=[];for(a=null;s<n.length;s++){var c=n[s];c.startsWith("#EXT")?(c=n1(o,c),r1.has(c.name)?r.push(c):c.name=="EXT-X-MAP"?a=c:c.name=="EXT-X-PART"?l.push(c):c.name=="EXT-X-PRELOAD-HINT"?q(c,"TYPE")=="PART"?l.push(c):q(c,"TYPE")=="MAP"&&(c.name="EXT-X-MAP",a=c):u.push(c)):(!c.startsWith("#")||c.startsWith("#EXT"))&&(c=c.trim(),a&&u.push(a),u=new Q0(c,u,l),i<e.length?e[i++]=u:(e.push(u),i++),u=[],l=[])}return l.length&&(a&&u.push(a),n=new Q0("",u,l),i<e.length?e[i++]=n:(e.push(n),i++)),new J0(t,r,i<e.length?e.slice(0,i):e)}r.push(u),u.name=="EXT-X-STREAM-INF"&&(u.attributes.push(new Ml("URI",a)),o=!0)}}return new J0(t,r)}function n1(e,t){e=e.g++;var n=t.match(BI);if(!n)throw new M(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Gr(i);var o;for(i1.lastIndex=0,(o=_i(i,i1))&&(r=o[1]),sh.lastIndex=0,o=_i(i,sh);o;)n.push(new Ml(o[1],o[2]||o[3])),Kr(i),o=_i(i,sh)}return new Cl(e,t,n,r)}var BI=/^#(EXT[^:]*)(?::(.*))?$/,bI=/^#EXTM3U($|[ \t\n])/m,i1=/^([^,=]+)(?:,|$)/g,sh=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,r1=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),o1=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function s1(){}function u1(e,t){try{var n=kl(e);return Qr({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return Gi(i)}}function kl(e){var t=e.split(":");if(t.length<2||t[0]!="data")throw new M(2,1,1004,e);if(t=t.slice(1).join(":").split(","),t.length<2)throw new M(2,1,1004,e);var n=t[0];e=b.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;t.length>1&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=Tn(e):r=jn(e),{data:r,contentType:n}}K("shaka.net.DataUriPlugin",s1),s1.parse=u1,mi("data",u1);function Dl(){var e=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(pe,new Map),this.C.set("image",new Map),this.dc=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return hC(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=Ue(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs");var r=Ue(t,"URI");n=kl(r.split("?")[0]),r=r.split("?")[0],e.I.has(r)||(n=se(n.data),e.I.set(r,n)),i=li("com.widevine.alpha",i,[{initDataType:"cenc",initData:e.I.get(r)}]),(t=q(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=Ue(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=Ue(t,"URI"),t=kl(t.split("?")[0]),t=se(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=oa(t,n,new Set,0),i=li("com.microsoft.playready",i,[{initDataType:"cenc",initData:n}]),(t=mr(["<PLAYREADY>",ui(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=vl(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=Ue(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs");var r=Ue(t,"URI");n=kl(r.split("?")[0]),r=r.split("?")[0],e.I.has(r)||(n=se(n.data),e.I.set(r,n)),i=li("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:e.I.get(r)}]),(t=q(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.ab=new _I,this.N=-1,this.ma=1/0,this.aa=this.zc=this.kb=!1,this.F=new ge(function(){if(e.X&&!e.g.continueLoadingWhenPaused&&(e.V.Ma(e.X,"timeupdate"),e.X.paused)){e.V.za(e.X,"timeupdate",function(){return k1(e)});return}k1(e)}),this.Fa=Ul,this.m=null,this.eb=0,this.o=1/0,this.Ua=this.Ta=this.T=0,this.$=new Zr,this.J=new Map,this.K=new Map,this.Da=new Map,this.va=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.yc=this.oa=!1,this.ac=new _r(5),this.j=null,this.R=!0,this.V=new Me,this.u=this.X=null,this.cc=function(){return!1},this.I=new Map}d=Dl.prototype,d.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.cc=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Kb()},d.start=function(e,t){var n=this,i;return C(function(r){return r.g==1?(n.h=t,n.oa=t.isLowLatencyMode(),T(r,hh(n,[e]).promise,2)):r.g!=3?(i=r.h,n.H=i.uri,T(r,HI(n,i.data),3)):r.return(n.m)})},d.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.va.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},d.update=function(){var e=this,t,n,i,r,o,s,u,a,l,c;return C(function(f){if(f.g==1){if(!jt(e))return f.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,i=n.filter(function(h){return!h.stream.isAudioMuxedInVideo&&h.stream.segmentIndex}),r=g(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(FI(e,s));return T(f,Promise.all(t),2)}for(g1(e,i.map(function(h){return h.stream})),u=i.some(function(h){return h.$d==0}),i.length&&!u&&(Nl(e,Ul),Rl(e)),u&&Rl(e),a=g(i),l=a.next();!l.done;l=a.next())c=l.value,c.stream.isAudioMuxedInVideo||!c.stream.segmentIndex||Xn(c.stream.segmentIndex)||e.h.disableStream(c.stream);G(f)})};function uh(e,t){return jt(e)?e.C.get(t.type):t.pf}function FI(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae;return C(function(ce){switch(ce.g){case 1:if(t.stream.isAudioMuxedInVideo)return ce.return();for(n=[],i=g(t.P()),r=i.next();!r.done;r=i.next())o=r.value,s=new nt(o),u=s.g,t.Se&&(t.Rb>=0&&u.add("_HLS_msn",String(t.Rb)),t.Sb>=0&&u.add("_HLS_part",String(t.Sb))),t.Te&&u.add("_HLS_skip","YES"),Ep(u)&&lr(s,Br(u.toString())),n.push(s.toString());return ue(ce,2),T(ce,hh(e,n,!0).promise,4);case 4:a=ce.h,de(ce,3);break;case 2:throw l=ae(ce),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return ce.return();if(c=oh(e.ab,a.data),c.type!=1)throw new M(2,4,4017);return f=a.uri,f==a.originalUri||t.P().includes(f)||t.Cf.push(f),h=Cn(c.ea,"EXT-X-DEFINE"),p=ah(e,h,f),m=t.stream,v=uh(e,t),T(ce,T1(e,c,m.mimeType,t.P,p),5);case 5:for(y=ce.h,S=y.keyIds,x=y.drmInfos,A=y.encrypted,I=y.Oh,m.encrypted||!A||I||(m.encrypted=!0),R=function(Le,me){return Le.size===me.size&&[].concat(V(Le)).every(function(le){return me.has(le)})},R(m.keyIds,S)||(m.keyIds=S,m.drmInfos=x,e.h.newDrmInfo(m)),E=I1(e,c,v,p,t.P,t.type),w=E.segments,(k=E.bandwidth)&&(m.bandwidth=k),L=Sa(m),D=g(w),P=D.next();!P.done;P=D.next())N=P.value,N.ba&&(N.ba.xd=L);m.segmentIndex.ie(w,e.l.Ib()),w.length&&(_=Uo(c.ea,"EXT-X-MEDIA-SEQUENCE",0),j=(B=vt(c.ea,"EXT-X-SKIP"))?Number(q(B,"SKIPPED-SEGMENTS")):0,O=v1(_,w),F=O.Rb,H=O.Sb,t.Rb=F+j,t.Sb=H,Q=v.get(_),m.segmentIndex.Ya(Q)),(z=Xn(m.segmentIndex))&&(t.Wc=z.startTime,Ae=w[w.length-1],t.Mc=Ae.endTime),vt(c.ea,"EXT-X-ENDLIST")&&(t.$d=!0),ch(e,c),fh(e,c.ea,m.type,p,t.P),G(ce)}})}d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(e){this.j&&this.j.banLocation(e)},d.setMediaElement=function(e){this.X=e};function a1(e,t,n){n=n===void 0?!1:n;for(var i=e.N==-1,r=g(t),o=r.next();!o.done;o=r.next()){o=o.value;var s=o.stream.segmentIndex,u=uh(e,o);if(s=Xn(s)){u=g(u);for(var a=u.next();!a.done;a=u.next()){a=g(a.value);var l=a.next().value;if(a.next().value==s.startTime){i&&(e.N=Math.max(e.N,l)),o.rg=l;break}}}}if(!(e.N<0))for(t=g(t),i=t.next();!i.done;i=t.next())i=i.value,(su(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(o=e.N-i.rg,o>0&&(r.g.splice(0,o),r=Xn(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),l1(e,i,r)))}function VI(e,t){if(e.ma==1/0){t=g(t);for(var n=t.next();!n.done;n=t.next())n=Xn(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ma=Math.min(e.ma,n.h))}if(t=e.ma,t!=1/0){n=g(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!su(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var o=Xn(r);if(o)if(o.h==null)qn("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.P(),"Expect AV sync issues!");else for(l1(e,i,o.h-t-o.startTime),i=g(r),r=i.next();!r.done;r=i.next())r.value.Ch(t)}}}}function l1(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Mc+=n,e=uh(e,t);for(var i=g(e),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.P()}}function HI(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me,le,Be,Ie,Te;return C(function(ve){switch(ve.g){case 1:return n=ut,i=oh(e.ab,t),r=Cn(i.ea,"EXT-X-DEFINE"),o=[],s=[],u=[],e.l=new re(null,0),e.l.cd(!0),a=function(){return[e.H]},l=null,c=new Map,i.type==1?(e.R=!1,F=Cn(i.ea,"EXT-X-DEFINE"),c=ah(e,F,e.H),l=n.Aa,H="",Q=new Map,T(ve,m1(e,e.G++,c,i,a,"",l,H,!0,"Media Playlist",null,Q,null,!1,null,!1),7)):(KI(e,r),f=Cn(i.ea,"EXT-X-MEDIA"),h=Cn(i.ea,"EXT-X-STREAM-INF"),p=Cn(i.ea,"EXT-X-IMAGE-STREAM-INF"),m=Cn(i.ea,"EXT-X-I-FRAME-STREAM-INF"),v=Cn(i.ea,"EXT-X-SESSION-KEY"),y=Cn(i.ea,"EXT-X-SESSION-DATA"),S=Cn(i.ea,"EXT-X-CONTENT-STEERING"),WI(e,y),T(ve,zI(e,S),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(x=[],A=g(h),I=A.next(),R={};!I.done;R={aj:void 0},I=A.next())E=I.value,(w=q(E,"SUPPLEMENTAL-CODECS"))&&(R.aj=w.split(/\s*,\s*/).map(function(we){return we.split("/")[0]}),k=E.attributes.map((function(we){return function(at){var lt=at.name,vn=at.value;return lt=="CODECS"&&(vn=we.aj.join(","),at=at.value.split(","),at.length>1&&(at=Gt("audio",at))&&(vn+=","+at)),new Ml(lt,vn)}})(R)),x.push(new Cl(E.id,E.name,k,null)));for(h.push.apply(h,V(x)),L=[],D=g(m),P=D.next(),N={};!P.done;N={bj:void 0},P=D.next())_=P.value,(B=q(_,"SUPPLEMENTAL-CODECS"))&&(N.bj=B.split(/\s*,\s*/).map(function(we){return we.split("/")[0]}),j=_.attributes.map((function(we){return function(at){var lt=at.name;return at=at.value,lt=="CODECS"&&(at=we.bj.join(",")),new Ml(lt,at)}})(N)),L.push(new Cl(_.id,_.name,j,null)));m.push.apply(m,V(L))}return XI(e,h),oC(e,f),O=$I(e,m),T(ve,QI(e,h,v,f,a,e.B,O),5);case 5:return o=ve.h,s=YI(e,f),T(ve,qI(e,p,m),6);case 6:u=ve.h,ve.A(3);break;case 7:z=ve.h,e.i.set(e.H,z),z.stream&&(Ae=Sa(z.stream),z.stream.segmentIndex.Gb(function(we){we.ba&&(we.ba.xd=Ae)})),l=z.stream.type,ce=!0,(e.g.disableAudio&&z.type=="audio"||e.g.disableVideo&&z.type=="video"&&!z.stream.codecs.includes(","))&&(ce=!1),ce&&o.push({id:0,language:ke(H||"und"),disabledUntilTime:0,primary:!0,audio:z.type=="audio"?z.stream:null,video:z.type=="video"?z.stream:null,bandwidth:z.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new M(2,7,7001);if(S1(e,i),i.type==1&&(jt(e)&&(w1(e,i),Le=e.o,e.F.ia(Le)),me=Array.from(e.i.values()),lh(e,me),Rl(e),fh(e,i.ea,l,c,a)),e.m={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.aa||!e.g.hls.disableCodecGuessing){ve.A(8);break}for(le=[],Be=g(e.m.variants),Ie=Be.next();!Ie.done;Ie=Be.next())Te=Ie.value,Te.audio&&Te.audio.codecs===""&&le.push(Te.audio.createSegmentIndex()),Te.video&&Te.video.codecs===""&&le.push(Te.video.createSegmentIndex());return T(ve,Promise.all(le),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),G(ve)}})}function GI(e,t){var n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S;return C(function(x){if(x.g==1)return n=Cf(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=C1(e,t),r=i.segment,o=i.segmentIndex,s=r.P(),(u=mo(s[0]))&&(a=ph.get(u))?x.return(Cf(a)):T(x,Promise.all([c1(e,r.ba,0),c1(e,r,o)]),2)):x.return(n);if(l=x.h,c=l[1].mimeType,f=l[0].data,h=l[1].data,p="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),m=["audio/mp4","video/mp4","video/iso.segment"],v=r.ba||m.includes(c),!v&&lo(se(h))){var A=h,I=e.g.disableAudio,R=e.g.disableVideo,E=e.g.disableText,w=se(A),k=new Fe().parse(w),L=k.Wd();w=k.Mg();var D=[],P=!1,N=!1;if(!I)switch(L.audio){case"aac":case"aac-loas":k.ub().length&&(D.push("mp4a.40.2"),P=!0);break;case"mp3":k.ub().length&&(D.push("mp4a.40.34"),P=!0);break;case"ac3":k.ub().length&&(D.push("ac-3"),P=!0);break;case"ec3":k.ub().length&&(D.push("ec-3"),P=!0);break;case"opus":k.ub().length&&(D.push("opus"),P=!0)}if(!R)switch(L.video){case"avc":w.codec?D.push(w.codec):D.push("avc1.42E01E"),N=!0;break;case"hvc":w.codec?D.push(w.codec):D.push("hvc1.1.6.L93.90"),N=!0;break;case"av1":D.push("av01.0.01M.08"),N=!0}if(D.length){if(I=P&&!N,R=new Map,N&&!E){for(E=new Gn("video/mp2t"),E.zf(A),A=g(E.Yf()),N=A.next();!N.done;N=A.next())N=N.value,R.set(N,N);E.Nd()}w={type:I?"audio":"video",mimeType:"video/mp2t",codecs:D.join(", "),language:null,height:w.height,width:w.width,channelCount:null,sampleRate:null,closedCaptions:R,xe:null,colorGamut:null,frameRate:w.frameRate}}else w=null;if(y=w)return x.return(y)}else if((v||p.includes(u))&&(S=qw(f,h,e.g.disableText)))return x.return(S);return c?x.return(Cf(c)):x.return(n)})}function c1(e,t,n){var i,r,o,s,u,a;return C(function(l){switch(l.g){case 1:return t?(i=Sn,r=ks(t.P(),t.Jc(),t.Hc(),e.g.retryParameters),o=t instanceof Z?1:0,T(l,Ri(e,r,i,{type:o}).promise,2)):l.return({mimeType:null,data:null});case 2:if(s=l.h,u=s.data,!t.aesKey){l.A(3);break}return T(l,kf(u,t.aesKey,n),4);case 4:u=l.h;case 3:return t instanceof Z?t.re(u,!0):t.re(u),(a=s.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),l.return({mimeType:a,data:u})}})}function Rl(e){if(jt(e)){if(e.Fa==gh){for(var t=1/0,n=1/0,i=g(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.Mc),n=Math.min(n,r.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Kf(t)}}else e.l.Ab(p1(e));if(!e.l.o)for(t=g(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=Xn(n.stream.segmentIndex))&&n.h&&e.l.rh(n.h);e.l.nf()}function KI(e,t){var n=new nt(e.H).g;t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=q(r,"NAME");var o=q(r,"VALUE");r=q(r,"QUERYPARAM"),i&&o&&(e.B.has(i)||e.B.set(i,o)),r&&(i=n.get(r)[0])&&!e.B.has(i)&&e.B.set(r,i)}}function ah(e,t,n){n=new nt(n).g;var i=new Map;t=g(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=q(o,"NAME"),u=q(o,"VALUE");r=q(o,"QUERYPARAM"),o=q(o,"IMPORT"),s&&u&&(i.has(s)||i.set(s,u)),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.B.get(o))&&i.set(o,r)}return i}function XI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=q(i,"AUDIO");n=q(i,"VIDEO");var o=q(i,"SUBTITLES");if(i=f1(e,i),o){var s=Gt(pe,i);e.K.set(o,s),Nn(i,s)}r&&(o=Gt("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.K.set(r,o)),n&&(r=Gt("video",i),r||(r=e.g.hls.defaultVideoCodec),e.K.set(n,r))}}function WI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=q(i,"DATA-ID");n=q(i,"URI");var o=q(i,"LANGUAGE");i=q(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",ir([e.H],n,e.B)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new Y("sessiondata",r),e.h&&e.h.onEvent(n)}}function zI(e,t){var n,i,r,o,s,u;return C(function(a){if(!e.h||!e.g)return a.return();for(i=g(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=q(o,"PATHWAY-ID"),u=q(o,"SERVER-URI"),s&&u){e.j=new Lo(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=s,n=eu(e.j,u);break}return T(a,n,0)})}function YI(e,t){var n=Z0(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return d1(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=g(n);for(var i=n.next();!i.done;i=n.next()){var r=Ue(i.value,"GROUP-ID");if((i=e.K.get(r))&&(r=e.M.get(r))){r=g(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o.stream.codecs=i,o.stream.mimeType=dh(pe,i)||Pl(pe),_o(o.stream)}}return t.filter(function(s){return s})}function _o(e){var t=new Set([Ze(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(Ze(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function qI(e,t,n){var i,r;return C(function(o){return o.g==1?(i=t.map(function(s){var u,a;return C(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(ue(l,2),T(l,sC(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=ae(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=h1(e,s);return u.stream.type!=="image"?null:u.stream}catch(a){if(e.g.hls.ignoreImageStreamFailures)return null;throw a}})),T(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function JI(e,t,n){t=t.filter(function(u){var a=q(u,"URI")||"";return u=q(u,"TYPE"),u!="SUBTITLES"&&(a!=""||u=="AUDIO")});var i={};t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=$0(r,!e.j);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)d1(e,i[s],n,!1)}function $I(e,t){return t.map(function(n){return n=h1(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function QI(e,t,n,i,r,o,s){var u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me,le,Be;return C(function(Ie){switch(Ie.g){case 1:if(u=[],a=new Set,e.g.ignoreDrmInfo||!(n.length>0)){Ie.A(2);break}l=g(n),c=l.next();case 3:if(c.done){Ie.A(2);break}if(f=c.value,h=Ue(f,"METHOD"),p=q(f,"KEYFORMAT")||"identity",m=null,h=="NONE"){Ie.A(4);break}if(jl(h)){v=ir(r(),Ue(f,"URI"),o),y=v.sort().join(""),e.O.has(y)||(S=ot(v,e.g.retryParameters),x=Ri(e,S,6).promise,e.O.set(y,x)),Ie.A(4);break}if(p=="identity")return T(Ie,D1(e,f,"",r,null,o),12);if(A=e.dc.get(p),!A){I=null,Ie.A(10);break}return T(Ie,A(f,"",null),11);case 11:I=Ie.h;case 10:m=I,Ie.A(6);break;case 12:m=Ie.h;case 6:if(m){if(m.keyIds)for(R=g(m.keyIds),E=R.next();!E.done;E=R.next())w=E.value,a.add(w);u.push(m)}case 4:c=l.next(),Ie.A(3);break;case 2:for(k={},L=g(t),D=L.next();!D.done;D=L.next())P=D.value,N=$0(P,!e.j),k[N]?k[N].push(P):k[N]=[P];_=[];for(B in k)j=k[B],O=j[0],F=q(O,"FRAME-RATE"),H=Number(Ue(O,"BANDWIDTH"))||Number(q(O,"AVERAGE-BANDWIDTH")),Q=q(O,"RESOLUTION"),z=g(Q?Q.split("x"):[null,null]),Ae=z.next().value,ce=z.next().value,Le=q(O,"VIDEO-RANGE"),(me=q(O,"REQ-VIDEO-LAYOUT"))&&me.includes(",")&&(le=me.split(",").filter(function(Te){return Te=="CH-STEREO"||Te=="CH-MONO"}),me=le[0]),me=me||"CH-MONO",Be=ZI(e,j,i),_.push.apply(_,V(rC(e,Be.audio,Be.video,H,Ae,ce,F,Le,me,u,a,s)));return Ie.return(_.filter(function(Te){return Te!=null}))}})}function ZI(e,t,n){for(var i={audio:[],video:[]},r=new Map,o=[],s=!1,u=!1,a=g(t),l=a.next();!l.done;l=a.next()){var c=l.value;l=q(c,"AUDIO");var f=q(c,"VIDEO"),h=l||f;h&&(o.includes(h)||o.push(h),(c=q(c,"PATHWAY-ID"))&&r.set(h,c),l?s=!0:f&&(u=!0))}o.length&&n.length&&(n=n.filter(function(m){return o.includes(Ue(m,"GROUP-ID"))}),JI(e,n,r)),n=(r=o.sort().join(","))&&e.M.has(r)?e.M.get(r):[],s?i.audio.push.apply(i.audio,V(n)):u&&i.video.push.apply(i.video,V(n)),u=!1;var p=t.map(function(m){return Ue(m,"URI")});return s=i.audio.find(function(m){return m&&m.P().find(function(v){return p.includes(v)})}),n=f1(e,t[0]),a=Gt("video",n),(l=Gt("audio",n))&&!a?(s="audio",u=i.audio.length>0&&!i.audio.some(function(m){return m.stream.isAudioMuxedInVideo})):!i.audio.length&&!i.video.length&&l&&a?(s="video",n=[[a,l].join()]):i.audio.length&&s?(s="audio",u=!0):s=i.video.length&&!i.audio.length?"audio":"video",u||(t=uC(e,t,n,s),r&&e.g.enableAudioGroups&&(t.stream.groupId=r),t.stream.type=="audio"&&s==="audio"&&i.audio.some(function(m){return m.stream.isAudioMuxedInVideo})&&(e=i.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),i[t.stream.type]=[t]),i}function f1(e,t){return t=q(t,"CODECS")||"",e.aa=t.length>0,e.aa||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Mf(t.split(/\s*,\s*/))}function eC(e){return(e=q(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function tC(e){return(e=q(e,"SAMPLE-RATE"))?parseInt(e,10):null}function nC(e){return e=q(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function iC(e){return e=Ue(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=pe),e}function rC(e,t,n,i,r,o,s,u,a,l,c,f){for(var h=g(n),p=h.next();!p.done;p=h.next())M1(p.value.stream,r,o,s,u,a,null);for(r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r&&(t=t.filter(function(S){return!S.stream.isAudioMuxedInVideo})),r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=[],t=g(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=g(n),u=s.next();!u.done;u=s.next()){var m=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=c),(a=m?m.stream:null)&&(a.drmInfos=l,a.keyIds=c,e.g.disableIFrames||cg(a,f)),a&&!u&&(a.bandwidth=i),!a&&u&&(u.bandwidth=i),h=o?o.stream.drmInfos:null,p=m?m.stream.drmInfos:null,m=m?m.P().sort().join(","):"";var v=o?o.P().sort().join(","):"",y=[];u&&u.codecs&&y.push(u.codecs),a&&a.codecs&&y.push(a.codecs),m=[m,v,y.sort()].join("-"),u&&a&&!gg(h,p)||e.ob.has(m)||(u={id:e.G++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.ob.add(m))}return r}function oC(e,t){t=Z0(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=q(i,"LANGUAGE");n=ke(r||"und"),r||(r=q(i,"NAME"))&&(n=r),r=Ue(i,"GROUP-ID"),i=Ue(i,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(r)||e.J.set(r,new Map),e.J.get(r).set(i,n)}}function d1(e,t,n,i){i=i===void 0?!0:i;for(var r=[],o=[],s=new Map,u=g(t),a=u.next(),l={};!a.done;l={li:void 0},a=u.next())a=a.value,l.li=++e.G,l=(function(v){return function(){return"shaka://hls-muxed"+v.li}})(l),l=i?Ue(a,"URI"):q(a,"URI")||l(),a=Ue(a,"GROUP-ID"),r.push(l),o.push(a),s.set(a,l);if(i=o.sort().join(","),a=t[0],t="",u=iC(a),u==pe)t=q(a,"CODECS")||"";else for(o=g(o),l=o.next();!l.done;l=o.next())if(l=l.value,e.K.has(l)){t=e.K.get(l);break}if(o=r.sort().join(","),u=="audio"&&i&&(o+=i),e.i.has(o))return e.i.get(o);if(l=e.G++,e.j){s=g(s);for(var c=s.next();!c.done;c=s.next()){var f=g(c.value);c=f.next().value,f=f.next().value,(c=n.get(c))&&Po(e.j,l,c,f)}}n=q(a,"LANGUAGE"),s=q(a,"NAME"),c=q(a,"DEFAULT")=="YES",f=u=="audio"?eC(a):null;var h=u=="audio"?nC(a):!1,p=q(a,"CHARACTERISTICS"),m=q(a,"FORCED")=="YES";return a=u=="audio"?tC(a):null,r=Ll(e,l,r,t,u,n,c,s,f,null,p,m,a,h),r.stream&&e.g.enableAudioGroups&&(r.stream.groupId=i),e.M.has(i)?e.M.get(i).push(r):e.M.set(i,[r]),e.i.set(o,r),r}function sC(e,t){var n,i,r,o,s,u,a,l,c,f;return C(function(h){return h.g==1?(n=Ue(t,"URI"),i=q(t,"CODECS","jpeg")||"",e.i.has(n)?h.return(e.i.get(n)):(r=q(t,"LANGUAGE"),o=q(t,"NAME"),s=q(t,"CHARACTERISTICS"),u=Ll(e,e.G++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=q(t,"RESOLUTION"))?T(h,u.stream.createSegmentIndex(),3):h.A(2))):(h.g!=2&&(l=Xn(u.stream.segmentIndex),(c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),u.stream.closeSegmentIndex()),(f=q(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(f)),e.i.set(n,u),h.return(u))})}function h1(e,t){var n="video",i=Ue(t,"URI"),r=q(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var o=q(t,"LANGUAGE"),s=q(t,"NAME"),u=q(t,"CHARACTERISTICS");return n=Ll(e,e.G++,[i],r,n,o,!1,s,null,null,u,!1,null,!1),r=q(t,"RESOLUTION"),o=g(r?r.split("x"):[null,null]),r=o.next().value,o=o.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(o)||void 0,(t=q(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function uC(e,t,n,i){for(var r=e.G++,o=[],s=g(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=Ue(a,"URI"),a=q(a,"PATHWAY-ID"),e.j&&a&&Po(e.j,r,a,u),o.push(u)}if(s=o.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);u=o.join(",");e:{if(t=q(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=g(e.J.keys()),t=t.next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=Vr(i,n),i=Ll(e,r,o,n,i,null,!1,u,null,t,null,!1,null,!1),e.i.set(s,i),i}function Ll(e,t,n,i,r,o,s,u,a,l,c,f,h,p){function m(I){var R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me;return C(function(le){switch(le.g){case 1:return R=ut,ue(le,2),T(le,I.promise,4);case 4:if(E=le.h,I.aborted)return le.return();if(w=E.uri,w!=E.originalUri&&(k=S.P(),k.includes(w)||S.Cf.push(w)),L=oh(e.ab,E.data),L.type!=1)throw new M(2,4,4017);return D=Cn(L.ea,"EXT-X-DEFINE"),P=ah(e,D,w),N=!1,(!e.aa&&e.g.hls.disableCodecGuessing||e.R&&r==R.Aa&&!e.g.hls.disableClosedCaptionsDetection)&&L.segments.length>0&&(e.R=!1,N=!0),_=!e.aa&&e.g.hls.disableCodecGuessing,B=jt(e),T(le,m1(e,0,P,L,v,i,r,o,s,u,a,l,c,f,h,p,void 0,N,_),5);case 5:if(j=le.h,I.aborted)return le.return();O=j.stream,S1(e,L),jt(e)&&!B&&w1(e,L),S.Wc=j.Wc,S.Mc=j.Mc,S.Te=j.Te,S.Se=j.Se,S.$d=j.$d,S.pf=j.pf,S.Rb=j.Rb,S.Sb=j.Sb,y.segmentIndex=O.segmentIndex,y.encrypted=O.encrypted,y.drmInfos=O.drmInfos,y.keyIds=O.keyIds,y.mimeType=O.mimeType,y.bandwidth=y.bandwidth||O.bandwidth,y.codecs=y.codecs||O.codecs,y.closedCaptions=y.closedCaptions||O.closedCaptions,y.width=y.width||O.width,y.height=y.height||O.height,y.hdr=y.hdr||O.hdr,y.colorGamut=y.colorGamut||O.colorGamut,y.frameRate=y.frameRate||O.frameRate,y.language=="und"&&O.language!="und"&&(y.language=O.language),y.language=y.language||O.language,y.channelsCount=y.channelsCount||O.channelsCount,y.audioSamplingRate=y.audioSamplingRate||O.audioSamplingRate,_o(y),y.drmInfos.length&&e.h.newDrmInfo(y),F=!1,(!l&&y.closedCaptions||l&&y.closedCaptions&&l.size!=y.closedCaptions.size)&&(F=!0),e.m&&F&&e.h.makeTextStreamsForClosedCaptions(e.m),r==R.Na&&(H=Xn(O.segmentIndex))&&H.ba&&(y.mimeType="application/mp4",_o(y)),Q=Sa(y),y.segmentIndex.Gb(function(Be){Be.ba&&(Be.ba.xd=Q)}),aC(e)&&(e.zc?lh(e,[S]):(e.zc=!0,z=Array.from(e.i.values()),Ae=z.filter(function(Be){return Be.stream.segmentIndex}),lh(e,Ae),Rl(e),ce=e.o,ce>0&&e.F.ia(ce))),fh(e,L.ea,y.type,P,v),e.m&&(e.m.startTime=e.u),de(le,0);break;case 2:if(Le=ae(le),y.closeSegmentIndex(),Le.code===7001)return le.return();if(me=e.h.disableStream(y),!me)throw Le;G(le)}})}function v(){return e.j&&n.length>1?tu(e.j,t):S.Cf.concat(e1([e.H],n,e.B))}var y=y1(e,i,r,o,s,u,a,l,c,f,h,p);n.some(function(I){return I.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",_o(y));var S={stream:y,type:r,Cf:[],Wc:0,Mc:0,pf:new Map,Te:!1,Se:!1,$d:!1,rg:-1,Rb:-1,Sb:-1,P:v},x=null,A;return y.createSegmentIndex=function(){return x||(y.isAudioMuxedInVideo?(y.segmentIndex=new Ce([]),Promise.resolve()):(A=hh(e,S.P(),!0),x=new Promise(function(I){I(m(A))})))},y.closeSegmentIndex=function(){x&&!y.segmentIndex&&A.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),x=null},S}function p1(e){var t=1/0;e=g(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Mc));return t}function g1(e,t){var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Gb(function(r){n.push(r)});e.l.ke(n)}function lh(e,t){if(!jt(e))for(var n=p1(e),i=g(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.pd(0,n);g1(e,t.map(function(o){return o.stream})),i=Array.from(e.i.values()).filter(function(o){return o.stream.segmentIndex}),n=i.some(function(o){return o.stream.type=="audio"}),r=i.some(function(o){return o.stream.type=="video"}),i=jt(e)&&!e.kb,n=!jt(e)&&e.kb&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?a1(e,t,i):(VI(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&a1(e,t))}function su(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function aC(e){if(!e.m)return!1;var t=[],n=[];e=g(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(t.length>0&&!t.some(function(r){return r.segmentIndex})||n.length>0&&!n.some(function(r){return r.segmentIndex}))}function m1(e,t,n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x){S=S===void 0?!0:S,x=x===void 0?!0:x;var A,I,R,E,w,k,L,D,P,N,_,B,j,O,F,H,Q,z,Ae,ce,Le,me,le,Be,Ie,Te,ve,we,at;return C(function(lt){switch(lt.g){case 1:if(A=i.segments||[],I=A.every(function(vn){return!!vt(vn.ea,"EXT-X-GAP")}),!A.length||I)throw new M(2,4,4053);if(lC(e,i),jt(e)&&ch(e,i),R=jt(e)?e.C.get(s):new Map,E=I1(e,i,R,n,r,s),w=E.segments,k=E.bandwidth,_=N=P=D=L=null,!(w.length>0&&S)){lt.A(2);break}return T(lt,GI(e,w),3);case 3:B=lt.h,s!=B.type&&jt(e)&&(e.C.set(B.type,e.C.get(s)),e.C.set(s,new Map)),s=B.type,u=B.language,c=B.channelCount,m=B.sampleRate,e.g.disableText||(f=B.closedCaptions),D=B.height,L=B.width,P=B.xe,N=B.colorGamut,_=B.frameRate,x&&(y=B.mimeType,o=B.codecs);case 2:if(y){lt.A(4);break}return T(lt,dC(e,s,o,w),5);case 5:y=lt.h,s!=pe||o||y!="application/mp4"||!w[0]||w[0].ba||(y="text/vtt");case 4:return T(lt,T1(e,i,y,r,n),6);case 6:if(j=lt.h,O=j.drmInfos,F=j.keyIds,H=j.encrypted,Q=j.Oh,H&&!O.length&&!Q)throw new M(2,4,4026);return z=y1(e,o,s,u,a,l,c,f,h,p,m,v),z.encrypted=H&&!Q,z.drmInfos=O,z.keyIds=F,z.mimeType=y,k&&(z.bandwidth=k),_o(z),s=="video"&&(L||D||P||N)&&M1(z,L,D,_,P,null,N),jt(e)&&ch(e,i),Ae=w[0].startTime,ce=w[w.length-1],Le=ce.endTime,me=new Ce(w),z.segmentIndex=me,Be=(le=vt(i.ea,"EXT-X-SERVER-CONTROL"))?Oo(le,"CAN-SKIP-UNTIL")!=null:!1,Ie=le?Oo(le,"CAN-BLOCK-RELOAD")!=null:!1,Te=Uo(i.ea,"EXT-X-MEDIA-SEQUENCE",0),ve=v1(Te,w),we=ve.Rb,at=ve.Sb,lt.return({stream:z,type:s,Cf:[],P:r,Wc:Ae,Mc:Le,Te:Be,Se:Ie,$d:!1,rg:-1,Rb:we,Sb:at,pf:R})}})}function v1(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Rb:e,Sb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Rb:e,Sb:n}):(e++,t.o&&(n=0),{Rb:e,Sb:n})}function y1(e,t,n,i,r,o,s,u,a,l,c,f){var h=dh(n,t)||Pl(n),p=[];if(a){a=g(a.split(","));for(var m=a.next();!m.done;m=a.next())p.push(m.value)}return m=void 0,a=null,n==pe?m=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(a="visually impaired"),p.length||m!=="subtitle"||p.push("subtitle"),m=null,n!="video"&&(m=o),e={id:e.G++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==pe?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:ke(i||"und"),originalLanguage:i,label:m,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:f,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:a,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},_o(e),e}function T1(e,t,n,i,r){var o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F;return C(function(H){switch(H.g){case 1:if(o=new Map,!e.g.ignoreDrmInfo&&t.segments){for(s=g(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,l=Cn(a.ea,"EXT-X-KEY"),c=null,l.length)for(c=A1(e,t,a.ea,i,r),f=g(l),h=f.next();!h.done;h=f.next())p=h.value,o.set(p,c)}v=m=!1,y=[],S=new Set,x=g(o),A=x.next();case 2:if(A.done){H.A(4);break}if(I=A.value,R=g(I),E=R.next().value,w=R.next().value,k=E,L=w,D=Ue(k,"METHOD"),D=="NONE"){H.A(3);break}if(m=!0,P=q(k,"KEYFORMAT")||"identity",N=null,jl(D)){v=!0,H.A(3);break}if(P=="identity")return T(H,D1(e,k,n,i,L,r),11);if(_=e.dc.get(P),!_){B=null,H.A(9);break}return T(H,_(k,n,L),10);case 10:B=H.h;case 9:N=B,H.A(6);break;case 11:N=H.h;case 6:if(N){if(N.keyIds)for(j=g(N.keyIds),O=j.next();!O.done;O=j.next())F=O.value,S.add(F);y.push(N)}case 3:A=x.next(),H.A(2);break;case 4:return H.return({drmInfos:y,keyIds:S,encrypted:m,Oh:v})}})}function x1(e,t,n,i,r){if(!b.crypto||!b.crypto.subtle)throw xe("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var o=0,s=q(t,"IV","");if(s){var u=fr(s.substr(2));if(u.byteLength!=16)throw new M(2,4,4048)}else o=Uo(n.ea,"EXT-X-MEDIA-SEQUENCE",0);var a=ir(i(),Ue(t,"URI"),r),l=a.sort().join("");if(n=t.toString()+"-"+o+"-"+l,!e.va.has(n)){var c={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(Ue(t,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var f,h,p,m;return C(function(v){if(v.g==1)return e.O.has(l)||(f=ot(a,e.g.retryParameters),h=Ri(e,f,6).promise,e.O.set(l,h)),T(v,e.O.get(l),2);if(v.g!=3){if(p=v.h,!p.data||p.data.byteLength!=c.bitsKey/8)throw new M(2,4,4049);return m={name:c.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:c.bitsKey},T(v,b.crypto.subtle.importKey("raw",p.data,m,!0,["decrypt"]),3)}c.cryptoKey=v.h,c.fetchKey=void 0,G(v)})},e.va.set(n,c)}return e.va.get(n)}function S1(e,t){e.u==null&&(t=vt(t.ea,"EXT-X-START"))&&(e.u=Number(Ue(t,"TIME-OFFSET")))}function lC(e,t){var n=vt(t.ea,"EXT-X-PLAYLIST-TYPE");t=vt(t.ea,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?Nl(e,Ul):n?Nl(e,gh):Nl(e,yC)}function ch(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;r>=0;){var o=vt(i[r].ea,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=vt(t.ea,"EXT-X-TARGETDURATION"),!i)throw new M(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=vt(t.ea,"EXT-X-PART-INF"))&&(e.T=Number(Ue(r,"PART-TARGET"))),t=vt(t.ea,"EXT-X-SERVER-CONTROL"),e.oa&&e.T?(e.o=e.yc?e.T*5<=n?Math.min(e.T,e.o):Math.min(n,e.o):Math.min(e.T,e.o),e.Ua=t?Number(Ue(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Oo(t,"HOLD-BACK"):null,e.Ta=n?Number(n.value):0),e.eb=Math.max(i,e.eb)}function w1(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Ua)n=e.Ua;else if(e.Ta)n=e.Ta;else for(var i=t.segments.length,r=i-Math.min(i,e.g.hls.liveSegmentsDelay);r<i;r++){var o=vt(t.segments[r].ea,"EXTINF");n=o?n+Number(o.value.split(",")[0]):n+e.eb}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Ti(0),e.l.qh(n),e.l.cd(!1)}function A1(e,t,n,i,r){var o=vt(n,"EXT-X-MAP");if(!o)return null;var s=Ue(o,"URI"),u=ir(i(),s,r);if(s=[u.toString(),q(o,"BYTERANGE","")].join("-"),!e.Da.has(s)){var a=void 0,l=null,c=!1;n=g(n);for(var f=n.next();!f.done;f=n.next())f=f.value,f.name=="EXT-X-KEY"?(c=Ue(f,"METHOD"),jl(c)&&f.id<o.id?(c=!1,a=x1(e,f,t,i,r)):c=c!="NONE"):f.name=="EXT-X-BYTERANGE"&&f.id<o.id&&(l=f);t=cC(u,o,l,a,c),e.Da.set(s,t)}return e.Da.get(s)}function cC(e,t,n,i,r){var o=0,s=null;return t=q(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(o=t.split("@"),s=Number(o[0]),o=Number(o[1]),s=o+s-1,i&&(n=s+1-o,n%16&&(s+=16-n%16))),new Xt(function(){return e},o,s,null,null,null,i,r)}function fC(e,t,n,i,r,o,s,u,a,l){var c=i.ea,f=vt(c,"EXTINF"),h=0,p=0,m=null;i.wc.length&&(e.m.isLowLatency=!0);var v=null;if(n&&n.h)v=n.h+n.endTime-n.startTime;else if(!e.g.hls.ignoreManifestProgramDateTime){var y=vt(c,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=fi(y.value),e.kb=!0)}var S=Ti;if(vt(c,"EXT-X-GAP")&&(e.m.gapCount++,S=2),!f){if(i.wc.length==0)throw new M(2,4,4024,"EXTINF");if(!e.oa)return null}var x=[];y=!1;var A=null,I=!1,R=!1;if(e.oa&&i.wc.length){h=t&&b.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var E=v,w={},k=0;k<i.wc.length;w={Tf:void 0,me:void 0},k++){var L=i.wc[k],D=k==0?n:x[x.length-1],P=k==0?r:D.endTime,N=Number(q(L,"DURATION"))||e.T;if(N){var _=P+N,B=0,j=null;if(L.name=="EXT-X-PRELOAD-HINT"?(B=(B=q(L,"BYTERANGE-START"))?Number(B):0,(D=q(L,"BYTERANGE-LENGTH"))?j=B+Number(D)-1:B&&(j=Number.MAX_SAFE_INTEGER)):(B=q(L,"BYTERANGE"),j=g(E1(D,B)),B=j.next().value,j=j.next().value),w.me=q(L,"URI"),w.me){D=Ti,q(L,"GAP")=="YES"&&(e.m.gapCount++,D=2,I=!0),w.Tf=null;var O=(function(H){return function(){return H.Tf==null&&(H.Tf=ir(u(),H.me,o)),H.Tf}})(w);h&&B>=0&&j!=null&&(A=O,y=!0),P=new Z(P,_,O,B,j,t,0,0,1/0,[],"",null,E,D,l),L.name=="EXT-X-PRELOAD-HINT"&&(P.Tg(),R=!0),q(L,"INDEPENDENT")!="YES"&&k>0&&P.wd(),L=a,L||(x.length&&x[0].mimeType?L=x[0].mimeType:w.me&&(w=mo(w.me),L=Ol.get(s).get(w)||null)),L&&(P.mimeType=L,L1.has(L)&&(P.ba=null)),x.push(P),E&&(E+=N)}}}}if(f){if(f=Number(f.value.split(",")[0]),f==0)return null;h=r+f}else if(x.length)h=x[x.length-1].endTime;else return null;y&&(I||x[0].startByte!=0?(y=!1,A=null):x=[]),(f=vt(c,"EXT-X-BYTERANGE"))?(m=g(E1(n,f.value)),p=m.next().value,m=m.next().value):x.length&&(p=x[0].startByte,m=x[x.length-1].endByte),n="",f=null,s=="image"&&(n="1x1",s=vt(c,"EXT-X-TILES"))&&(n=Ue(s,"LAYOUT"),(s=q(s,"DURATION"))&&(f=Number(s)));var F=null;return t=new Z(r,h,function(){return A?A():(F==null&&(F=ir(u(),i.g,o)),F||[])},p,m,t,0,0,1/0,x,n,f,v,S,l,x.length>0&&!!i.g),a&&(t.mimeType=a,L1.has(a)&&(t.ba=null)),y&&(e.yc=!0,t.ti(),R&&t.Tg()),t}function E1(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,i=n+t-1),[n,i]}function fh(e,t,n,i,r){if(n=="video"||n=="audio"){var o=e.l.m;if(o&&!su(e,n))for(t=Cn(t,"EXT-X-DATERANGE"),t=t.filter(function(D){return Oo(D,"START-DATE")!=null}).sort(function(D,P){return D=Ue(D,"START-DATE"),P=Ue(P,"START-DATE"),D<P?-1:D>P?1:0}),n=0;n<t.length;n++){var s=t[n];try{var u=Ue(s,"START-DATE"),a=fi(u);if(!isNaN(a)){var l=Math.max(0,a-o),c=null,f=q(s,"END-DATE");if(f){var h=fi(f);if(!isNaN(h)&&(c=h-o,c<0))continue}if(c==null){var p=q(s,"DURATION")||q(s,"PLANNED-DURATION");if(p){var m=parseFloat(p);if(isNaN(m)||(c=l+m),a-o+m<0)continue}}var v=q(s,"CLASS")||"com.apple.quicktime.HLS",y=q(s,"END-ON-NEXT")=="YES";if(c==null&&y){for(var S=n+1;S<t.length;S++){var x=q(t[S],"CLASS")||"com.apple.quicktime.HLS";if(v==x){var A=Ue(t[S],"START-DATE"),I=fi(A);if(!isNaN(I)&&I&&I>a){c=Math.max(0,I-o);break}}}if(c==null)continue}S=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var R=[],E=g(s.attributes),w=E.next();!w.done;w=E.next()){var k=w.value;if(!S.includes(k.name)){var L=t1(k.value,i);(k.name=="X-ASSET-URI"||k.name=="X-ASSET-LIST")&&(L=ir(r(),k.value,i)[0]),R.push({key:k.name,description:"",data:L,mimeType:null,pictureType:null})}}R.length>1&&e.h.onMetadata(v,l,c,R)}}catch{}}}}function I1(e,t,n,i,r,o){function s(D){if(D=mo(D),!D)return null;var P=Ol.get(o).get(D);return P||(P=ph.get(D)),P}var u=t.segments,a=null,l=null,c=null,f=null,h=void 0,p=Uo(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),m=Uo(t.ea,"EXT-X-MEDIA-SEQUENCE",0),v=vt(t.ea,"EXT-X-SKIP"),y=v?Number(q(v,"SKIPPED-SEGMENTS")):0,S=m+y,x=0;jt(e)&&n.has(S)&&(x=n.get(S)),x===0&&e.Fa==gh&&n.size>0&&!n.has(S)&&e.l.i!=null&&(x=e.l.Ib());var A=[],I=null;v=[];for(var R=0;R<u.length;R++){var E=u[R];(S=vt(E.ea,"EXT-X-MAP"))&&S.id!==l&&(a=A1(e,t,E.ea,r,i),l=S.id),S=E.g;var w="";S&&(w=mo(S)),w!==f&&(c=s(S),f=w),w=R==0?x:I.endTime,S=m+y+R,vt(E.ea,"EXT-X-DISCONTINUITY")&&(p++,I&&I.ba&&(I.ba.g=w));for(var k=g(E.ea),L=k.next();!L.done;L=k.next())L=L.value,L.name=="EXT-X-KEY"&&(jl(Ue(L,"METHOD"))?h=x1(e,L,t,r,i):h=void 0);if(n.set(S,w),w=fC(e,a,I,E,w,i,o,r,c,h)){if((I=Uo(E.ea,"EXT-X-BITRATE"))?(v.push({bitrate:I,duration:w.endTime-w.startTime}),w.bandwidth=I):w.endByte?(E=tf(w))&&(I=w.endTime-w.startTime,E=E*8/I/1e3,v.push({bitrate:E,duration:I}),w.bandwidth=E):v.length&&(I=v.pop(),I.duration+=w.endTime-w.startTime,v.push(I),w.bandwidth=I.bitrate),w.bandwidth)for(I=g(w.g),E=I.next();!E.done;E=I.next())E.value.bandwidth=w.bandwidth;I=w,w.i=p,su(e,o)&&e.N!=null&&S<e.N||A.push(w)}}if(t=void 0,v.length&&(t=v.reduce(function(D,P){return D+P.duration},0),t=Math.round(v.reduce(function(D,P){return D+P.bitrate*P.duration},0)/t*1e3)),v=A.some(function(D){return D.h!=null})){for(n={},i=0;i<A.length;n={Xe:void 0,We:void 0,Pe:void 0,Zc:void 0,Oe:void 0},i++)if(n.Zc=A[i],n.Zc.h==null)for(n.We=0,n.Xe=i,r=(function(D){return function(){var P=A[D.Xe];if(P){if(P.h!=null)return P.h+D.We;D.We-=P.endTime-P.startTime,D.Xe+=1}return null}})(n),n.Oe=0,n.Pe=i,u=(function(D){return function(){var P=A[D.Pe];if(P){if(P!=D.Zc&&(D.Oe+=P.endTime-P.startTime),P.h!=null)return P.h+D.Oe;--D.Pe}return null}})(n);n.Zc.h==null;)n.Zc.h=u(),n.Zc.h==null&&(n.Zc.h=r())}if(v)for(n=g(A),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=g(r.g),u=r.next();!u.done;u=r.next())u=u.value,u.h=i,i+=u.endTime-u.startTime;if(n=e.ma,v&&n!=1/0&&!su(e,o))for(e=g(A),v=e.next();!v.done;v=e.next())v.value.Ch(n);return{segments:A,bandwidth:t}}function dh(e,t){if(e==pe){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Pl(e){return e==pe?"text/vtt":Ol.get(e).get("mp4")}function C1(e,t){e=jt(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Kc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function dC(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m,v,y;return C(function(S){switch(S.g){case 1:return r=Sn,o=C1(e,i),s=o.segment,s.status==2?S.return(Pl(t)):(a=s.P(),(l=mo(a[0]))&&(c=Ol.get(t),(f=c.get(l))||(f=ph.get(l)))?S.return(f):(u=dh(t,n))?S.return(u):(p=1,m=ot(a,e.g.retryParameters),ue(S,2),m.method="HEAD",T(S,Ri(e,m,r,{type:p}).promise,4)));case 4:v=S.h,h=v.headers["content-type"],de(S,3);break;case 2:if(y=ae(S),!y||y.code!=1002&&y.code!=1001){S.A(3);break}return m.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(m.headers.Range="bytes=0-0"),T(S,Ri(e,m,r,{type:p}).promise,6);case 6:v=S.h,h=v.headers["content-type"];case 3:if(!h){S.A(7);break}if(u=h.toLowerCase().split(";")[0],u!="application/octet-stream"){S.A(8);break}if(v.data.byteLength){S.A(9);break}return m.method="GET",T(S,Ri(e,m,r,{type:p}).promise,10);case 10:v=S.h;case 9:lo(se(v.data))&&(u="video/mp2t");case 8:if(u!="application/octet-stream")return S.return(u);case 7:return S.return(Pl(t))}})}function M1(e,t,n,i,r,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function hh(e,t,n){return Ri(e,ot(t,e.g.retryParameters),0,{type:n?2:3})}function k1(e){var t,n,i,r,o,s;return C(function(u){switch(u.g){case 1:return e.h?(ue(u,2),t=Date.now(),T(u,e.update(),4)):u.return();case 4:n=Date.now(),jt(e)&&(i=(n-t)/1e3,e.ac.sample(1,i),r=e.g.updatePeriod>0?e.g.updatePeriod:e.o,o=Math.max(0,r-Au(e.ac)),e.F.ia(o)),de(u,3);break;case 2:if(s=ae(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.F.ia(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),G(u)}})}function jt(e){return e.Fa!=Ul}function Nl(e,t){e.Fa=t,e.l&&e.l.cd(!jt(e)),jt(e)||e.F.stop()}function Ri(e,t,n,i){if(!e.$)throw new M(2,7,7001);return i||(i={}),i.isPreload=e.cc(),t=e.h.networkingEngine.request(n,t,i),wr(e.$,t),t}function jl(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function hC(e,t,n,i){var r,o,s,u,a,l;return C(function(c){if(c.g==1){if(n=="video/mp2t")throw new M(2,4,4040);if(b.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4041);if(r=Ue(t,"METHOD"),o=["SAMPLE-AES","SAMPLE-AES-CTR"],!o.includes(r))return c.return(null);s="cenc",r=="SAMPLE-AES"&&(s="cbcs"),u=Ue(t,"URI"),a=li("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],u);var f=new nt(u).Eb.replace(/-/g,"").toLowerCase();return(l=f.length===32&&/^[0-9a-f]+$/.test(f)?f:null)||!i?c.A(2):T(c,R1(e,i),3)}return c.g!=2&&(l=c.h),l&&a.keyIds.add(l),c.return(a)})}function D1(e,t,n,i,r,o){var s,u,a,l,c,f,h,p,m,v,y,S;return C(function(x){switch(x.g){case 1:if(n=="video/mp2t")throw new M(2,4,4040);if(b.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4041);if(s=Ue(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return x.return(null);if(a=ir(i(),Ue(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){l=ai(Tn(a[0].split("data:text/plain;base64,").pop())),x.A(2);break}return c=a.sort().join(""),e.xa.has(c)||(f=ot(a,e.g.retryParameters),h=Ri(e,f,6).promise,e.xa.set(c,h)),T(x,e.xa.get(c),3);case 3:p=x.h,l=ai(p.data);case 2:if(m="00000000000000000000000000000000",!r){x.A(4);break}return T(x,R1(e,r),5);case 5:(v=x.h)&&(m=v);case 4:return y=new Map,y.set(m,l),S="cenc",s=="SAMPLE-AES"&&(S="cbcs"),x.return(Mp(y,S))}})}function R1(e,t){var n,i,r,o;return C(function(s){return s.g==1?(n=null,e.ya.has(t)?(n=e.ya.get(t),s.A(2)):(i=ks(t.P(),t.Jc(),t.Hc(),e.g.retryParameters),r=Sn,T(s,Ri(e,i,r,{type:0}).promise,3))):(s.g!=2&&(o=s.h,t.re(o.data),n=$w(o.data),e.ya.set(t,n)),s.return(n))})}K("shaka.hls.HlsParser",Dl);var ph=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),pC=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),gC=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),mC=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),vC=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Ol=new Map().set("audio",pC).set("video",gC).set("text",mC).set("image",vC),L1=new Set(["video/mp2t"].concat(V(pi))),Ul="VOD",yC="EVENT",gh="LIVE";dr("application/x-mpegurl",function(){return new Dl}),dr("application/vnd.apple.mpegurl",function(){return new Dl});function _l(e){return vl(e)}var TC=new Map().set("com.microsoft.playready",_l).set("com.microsoft.playready.recommendation",_l).set("com.microsoft.playready.software",_l).set("com.microsoft.playready.hardware",_l);function mh(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new _r(5),this.o=new ge(function(){xC(e)}),this.C=new Zr,this.m=new Map,this.B=function(){return!1}}d=mh.prototype,d.configure=function(e,t){this.g=e,t&&(this.B=t)},d.start=function(e,t){var n=this;return C(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,vh(n),2);if(!n.h)throw new M(2,7,7001);return i.return(n.j)})};function xC(e){var t;C(function(n){switch(n.g){case 1:return ue(n,2),T(n,vh(e),4);case 4:de(n,3);break;case 2:t=ae(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();G(n)}})}d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},d.update=function(){var e=this,t;return C(function(n){if(n.g==1)return ue(n,2),T(n,vh(e),4);if(n.g!=2)return de(n,0);if(t=ae(n),!e.h||!t)return n.return();e.h.onError(t),G(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){};function vh(e){var t,n,i,r,o,s,u;return C(function(a){if(a.g==1)return t=ot(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.B()}),wr(e.C,r),T(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=o.data,f=e.g.mss.manifestPreprocessor;if(f!=Oa){if(Ee("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=N0(c,"SmoothStreamingMedia"),!c)throw new M(2,4,4046,l);f(c),c=jn(c.outerHTML)}var h=es(c,"SmoothStreamingMedia");if(!h)throw new M(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Ua&&l(h),e.i||(e.i=new re(null,0)),l=oe(h,"IsLive",Ou,!1))throw new M(2,4,4047);e.i.cd(!l),f=oe(h,"TimeScale",St,1e7),c=oe(h,"DVRWindowLength",St),l&&(c===0||isNaN(c))&&(c=1/0);var p=oe(h,"CanSeek",Ou,!1);c===0&&p&&(c=1/0),p=null,c&&c>0&&(p=c/f),l&&!isNaN(e.g.availabilityWindowOverride)&&(p=e.g.availabilityWindowOverride),p==null&&(p=1/0),e.i.Kf(p),c=oe(h,"Duration",St,1/0),l||e.i.Ab(c/f),l={variants:[],textStreams:[],timescale:f,duration:c/f};var m;for(p=Pe(h,"Protection"),f=e.g.mss.keySystemsBySystemId,c=[],p=g(p),m=p.next();!m.done;m=p.next())c=c.concat(Pe(m.value,"ProtectionHeader"));if(c.length){for(p=[],m=0;m<c.length;m++){var v=c[m],y=v.attributes.SystemID.toLowerCase(),S=f[y];if(S){var x;e:{if(x=u0(v)){x=g(Kn(x,"DATA"));for(var A=x.next();!A.done;A=x.next())if(A=Ge(A.value,"KID")){x=Tn(it(A)),x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(V(x.slice(8)))),x=ai(x);break e}}x=null}A=Tn(it(v)),y=fr(y.replace(/-/g,"")),y=[{initData:oa(A,y,new Set,0),initDataType:"cenc",keyId:x}],y=li(S,"cenc",y),x&&y.keyIds.add(x),(S=TC.get(S))&&(y.licenseServerUri=S(v)),p.push(y)}}f=p}else f=[];for(m=f,p=[],f=[],c=[],h=Pe(h,"StreamIndex"),h=g(h),v=h.next();!v.done;v=h.next()){v=v.value,S=Pe(v,"QualityLevel"),y=l.timescale,x=l.duration,A=Pe(v,"c");for(var I=[],R=0,E=0;E<A.length;++E){var w=A[E],k=A[E+1],L=oe(w,"t",St),D=oe(w,"d",St);if(w=oe(w,"r",xt),!D)break;if(L=L??R,(w=w||0)&&w--,w<0)if(k){if(k=oe(k,"t",St),k==null)break;if(L>=k)break;w=Math.ceil((k-L)/D)-1}else{if(x==1/0)break;if(L/y>=x)break;w=Math.ceil((x*y-L)/D)-1}for(k=0;k<=w;++k)R=L+D,I.push({start:L/y,end:R/y,Hh:L}),L=R}for(y=I,S=g(S),x=S.next();!x.done;x=S.next())(x=SC(e,v,x.value,y,m,l))&&(x.type!="audio"||e.g.disableAudio?x.type!="video"||e.g.disableVideo?x.type!=pe||e.g.disableText||c.push(x):f.push(x):p.push(x))}for(h=[],p=g(p.length>0?p:[null]),m=p.next();!m.done;m=p.next())for(m=m.value,v=g(f.length>0?f:[null]),I=v.next();!I.done;I=v.next())S=h,y=S.push,x=e,A=m,I=I.value,E=0,A&&A.bandwidth&&A.bandwidth>0&&(E+=A.bandwidth),I&&I.bandwidth&&I.bandwidth>0&&(E+=I.bandwidth),x={id:x.u++,language:A?A.language:"und",disabledUntilTime:0,primary:!!A&&A.primary||!!I&&I.primary,audio:A,video:I,bandwidth:E,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(S,x);l.variants=h,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.nf()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.F.sample(1,u),G(a)})}function SC(e,t,n,i,r,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return xe("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.u++,l=oe(n,"Bitrate",Zn),c=oe(n,"MaxWidth",Zn),f=oe(n,"MaxHeight",Zn),h=oe(n,"Channels",Zn),p=oe(n,"SamplingRate",Zn),m=o.duration;i.length&&(m=i[i.length-1].end-i[0].start);var v=e.i.getDuration();e.i.Ab(Math.min(m,v)),(v=t.attributes.Name)&&(v+=n.attributes.Index),v||(v=String(a));var y={id:a,originalId:v,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:f||void 0,kind:"",encrypted:r.length>0,drmInfos:r,keyIds:new Set,language:ke(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=MC.get(r))&&y.roles.push(r),r==="main"&&(y.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(s==="audio")r="AAC";else if(s==="video")return xe('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!CC.includes(r.toUpperCase()))return xe("Codec not supported:",r),null;switch(n=wC(n,s,r,y),y.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return xe("Quality unsupported without CodecPrivateData",s),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=AC(r,n);break;case"video":if(!n)return xe("Quality unsupported without CodecPrivateData",s),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=EC(n);break;case"text":y.type=pe,y.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(y.codecs="stpp")}return y.fullMimeTypes.add(Ze(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var S=e.m.get(y.id);else S=[],y.type=="video"&&(S=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),S={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Cb:S,Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:null,stream:y},S=oo(new ro([S])),e.m.set(y.id,S);return S=IC(e,new Xt(function(){return[]},0,null,Sa(y),y.mssPrivateData.timescale,S,null,y.encrypted),y,t,i),y.segmentIndex=new Ce(S),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function wC(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[e*2],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function AC(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function EC(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function IC(e,t,n,i,r){var o=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=g(r);for(var s=r.next(),u={};!s.done;u={Of:void 0},s=r.next())u.Of=s.value,i.push(new Z(u.Of.start,u.Of.end,(function(a){return function(){return mt(e.l,[o.replace("{start time}",String(a.Of.Hh))])}})(u),0,null,t,0,0,n.mssPrivateData.duration));return i}K("shaka.mss.MssParser",mh);var CC="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),MC=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");dr("application/vnd.ms-sstr+xml",function(){return new mh});function P1(e,t,n,i,r,o,s){if(n>=200&&n<=299&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:o};o=null;try{o=Jn(t)}catch{}throw new M(n==401||n==403?2:1,1,1001,i,n,o,e,s,r||i)}function yh(){}function Bl(e,t,n,i,r,o){var s=new NC;try{to(t.headers).forEach(function(c,f){s.append(f,c)})}catch(c){return Gi(new M(1,1,1002,e,c,n))}var u=new LC,a={Sh:!1,fj:!1};if(e=kC(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,i,r,t.streamDataCallback,o.minBytesForProgressEvents||0),e=new et(e,function(){return a.Sh=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new ge(function(){a.fj=!0,u.abort()});l.ia(t/1e3),e.finally(function(){l.stop()})}return e}function kC(e,t,n,i,r,o,s,u,a){var l,c,f,h,p,m,v,y,S,x,A,I,R,E,w;return C(function(k){switch(k.g){case 1:return l=RC,c=PC,h=new ArrayBuffer(0),m=p=0,v={},y=Date.now(),ue(k,2),T(k,l(e,i),4);case 4:if(f=k.h,v=DC(f.headers),s(v),i.method=="HEAD"){k.A(5);break}return x=(S=f.headers.get("Content-Length"))?parseInt(S,10):0,f.body?(A=f.clone().body.getReader(),I=function(L){function D(){var P,N,_,B;return C(function(j){switch(j.g){case 1:return ue(j,2),T(j,A.read(),4);case 4:P=j.h,de(j,3);break;case 2:return ae(j),j.return();case 3:if(P.done){j.A(5);break}if(p+=P.value.byteLength,!u){j.A(5);break}return T(j,u(P.value),5);case 5:N=Date.now(),_=p-m,(N-y>100&&_>=a||P.done)&&(B=P.done?0:x-p,o(N-y,_,B),m=p,y=N),P.done?L.close():(L.enqueue(P.value),D()),G(j)}})}D()},new c({start:I}),T(k,f.arrayBuffer(),8)):T(k,f.arrayBuffer(),9);case 8:h=k.h,k.A(5);break;case 9:h=k.h,R=Date.now(),o(R-y,h.byteLength,0);case 5:t.headers.Range&&(E=t.headers.Range.replace("bytes=","").split("-").filter(function(L){return L}).map(function(L){return parseInt(L,10)}),E.length==2&&h.byteLength!=E[1]-E[0]+1&&xe("Payload length does not match range requested bytes",t,f)),de(k,3);break;case 2:throw w=ae(k),r.Sh?new M(1,1,7001,e,n):r.fj?new M(1,1,1003,e,n):new M(1,1,1002,e,w,n);case 3:return k.return(P1(v,h,f.status,e,f.url,t,n))}})}function DC(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function N1(){if(b.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(b.Response){if(!new Response("").body)return!1}else return!1;return!(!b.fetch||"polyfill"in b.fetch||!b.AbortController)}K("shaka.net.HttpFetchPlugin",yh),yh.isSupported=N1,yh.parse=Bl;var RC=b.fetch,LC=b.AbortController,PC=b.ReadableStream,NC=b.Headers;N1()&&(mi("http",Bl,2,!0),mi("https",Bl,2,!0),mi("blob",Bl,2,!0));function j1(){}function bl(e,t,n,i,r,o){var s=new jC,u=Date.now(),a=0,l=new Promise(function(c,f){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials;var h={};s.onabort=function(){f(new M(1,1,7001,e,n))},s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.HEADERS_RECEIVED){var m=s.getAllResponseHeaders().trim().split(`\r
`),v={};m=g(m);for(var y=m.next();!y.done;y=m.next())y=y.value.split(": "),v[y[0].toLowerCase()]=y.slice(1).join(": ");h=v,r(h)}},s.onload=function(m){var v=s.response;try{i(Date.now()-u,m.loaded-a,0);var y=P1(h,v,s.status,e,s.responseURL,t,n);c(y)}catch(S){f(S)}},s.onerror=function(m){f(new M(1,1,1002,e,m,n))},s.ontimeout=function(){f(new M(1,1,1003,e,n))},s.onprogress=function(m){var v=Date.now(),y=o.minBytesForProgressEvents||0,S=m.loaded-a;(v-u>100&&S>=y||m.lengthComputable&&m.loaded==m.total)&&(i(v-u,S,s.readyState==4?0:m.total-m.loaded),a=m.loaded,u=v)};for(var p in t.headers)try{s.setRequestHeader(p.toLowerCase(),t.headers[p])}catch(m){throw new M(1,1,1002,e,m,n)}s.send(t.body)});return new et(l,function(){return s.abort(),Promise.resolve()})}K("shaka.net.HttpXHRPlugin",j1),j1.parse=bl;var jC=b.XMLHttpRequest;mi("http",bl,1,!0),mi("https",bl,1,!0),mi("blob",bl,1,!0);function O1(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function Th(e){var t=e.$b(!1);return t?ui(t):e.P().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function OC(e,t){return ks(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function U1(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function _1(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}U1.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function B1(e){return e.i==0?0:e.j/e.i}function xh(e){var t=this;this.u=e,this.i=new Map,this.h=new eo(function(){return Sh(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new U1,this.l=!1}xh.prototype.destroy=function(){return this.h.destroy()};function UC(e,t,n){e.o=t,e.m=n}function Sh(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}xh.prototype.queue=function(e,t,n,i,r){var o=this;be(this.h);var s=(this.i.get(e)||Promise.resolve()).then(function(){var u,a,l,c,f,h,p;return C(function(m){if(m.g==1)return T(m,bC(o,t),2);if(u=m.h,o.h.g)throw new M(2,9,7001);if(i)for(c in a=se(u),l=new Yc(a),l.data)f=Number(c),h=l.data[f],p=l.g[f],o.m(h,p);return o.g.close(n,u.byteLength),o.o(B1(o.g),o.g.g),m.return(r(u))})});return this.i.set(e,s),s};function _C(e,t,n,i,r,o){be(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new M(2,9,7001);if(r){var u=se(n);u=new Yc(u);for(var a in u.data){var l=Number(a);e.m(u.data[l],u.g[l])}}return e.g.close(i,n.byteLength),e.o(B1(e.g),e.g.g),o(n)});e.i.set(t,s)}function BC(e){return C(function(t){return t.g==1?T(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function bC(e,t){var n,i,r,o;return C(function(s){return s.g==1?(n=Sn,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),T(s,i.promise,2)):(o=s.h,Nn(e.j,r),s.return(o.data))})}function Fl(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new je,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Fl.prototype.abort=function(){var e=this;return C(function(t){if(t.g==1){try{e.i.abort()}catch{}return ue(t,2),T(t,e.g,4)}if(t.g!=2)return de(t,0);ae(t),G(t)})};function wh(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return C(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,T(s,t(o.key,o.value,o),2));o.continue(),G(s)})}})}Fl.prototype.store=function(){return this.h},Fl.prototype.promise=function(){return this.g};function Ah(e){this.h=e,this.g=[]}Ah.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Nr(e,t){return Vl(e,t,"readwrite")}function Vl(e,t,n){n=e.h.transaction([t],n);var i=new Fl(n,t);return e.g.push(i),i.promise().then(function(){Nn(e.g,i)},function(){Nn(e.g,i)}),i}function jr(e,t,n){this.h=new Ah(e),this.i=t,this.g=n}d=jr.prototype,d.destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return b1(this.i)},d.removeSegments=function(e,t){return F1(this,this.i,e,t)},d.getSegments=function(e){var t=this,n;return C(function(i){return i.g==1?T(i,V1(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Uh(r)})))})},d.addManifests=function(){return b1(this.g)},d.updateManifest=function(){return Promise.reject(new M(2,9,9016,"Cannot modify values in "+this.g))};function FC(e,t,n){e=Nr(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}d.updateManifestExpiration=function(e,t){var n=Nr(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},d.removeManifests=function(e,t){return F1(this,this.g,e,t)},d.getManifests=function(e){var t=this,n;return C(function(i){return i.g==1?T(i,V1(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.Sd(r)}))))})},d.getAllManifests=function(){var e=this,t,n;return C(function(i){return i.g==1?(t=Vl(e.h,e.g,"readonly"),n=new Map,T(i,wh(t,function(r,o){var s;return C(function(u){if(u.g==1)return T(u,e.Sd(o),2);s=u.h,n.set(r,s),G(u)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},d.Uh=function(e){return e},d.Sd=function(e){return Promise.resolve(e)};function b1(e){return Promise.reject(new M(2,9,9011,"Cannot add new value to "+e))}d.add=function(e,t){var n=this,i,r,o,s,u,a,l;return C(function(c){if(c.g==1){for(i=Nr(n.h,e),r=i.store(),o=[],s=g(t),u=s.next(),a={};!u.done;a={gh:void 0},u=s.next())l=u.value,a.gh=r.add(l),a.gh.onsuccess=(function(f){return function(){o.push(f.gh.result)}})(a);return T(c,i.promise(),2)}return c.return(o)})};function F1(e,t,n,i){e=Nr(e.h,t),t=e.store(),n=g(n);for(var r=n.next(),o={};!r.done;o={Sg:void 0},r=n.next())o.Sg=r.value,t.delete(o.Sg).onsuccess=(function(s){return function(){return i(s.Sg)}})(o);return e.promise()}function V1(e,t,n){var i,r,o,s,u,a,l;return C(function(c){if(c.g==1){for(i=Vl(e.h,t,"readonly"),r=i.store(),o={},s=[],u=g(n),a=u.next(),l={};!a.done;l={Df:void 0,jf:void 0},a=u.next())l.jf=a.value,l.Df=r.get(l.jf),l.Df.onsuccess=(function(f){return function(){f.Df.result==null&&s.push(f.jf),o[f.jf]=f.Df.result}})(l);return T(c,i.promise(),2)}if(s.length)throw new M(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(f){return o[f]}))})}function uu(e){this.g=new Ah(e)}uu.prototype.destroy=function(){return this.g.destroy()},uu.prototype.getAll=function(){var e=this,t,n;return C(function(i){return i.g==1?(t=Vl(e.g,"session-ids","readonly"),n=[],T(i,wh(t,function(r,o){n.push(o)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},uu.prototype.add=function(e){var t=Nr(this.g,"session-ids"),n=t.store();e=g(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},uu.prototype.remove=function(e){var t=this,n;return C(function(i){return i.g==1?(n=Nr(t.g,"session-ids"),T(i,wh(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):T(i,n.promise(),0)})};function Yt(){this.g=new Map}Yt.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Yt.prototype.init=function(){var e=this;au.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=g(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function H1(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{Qb:i,bb:o},bb:r})})}),t)return t;throw new M(2,9,9013,"Could not find a cell that supports add-operations")}function VC(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({Qb:i,bb:o},r)})})}function Hl(e,t,n){if(e=e.g.get(t),!e)throw new M(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new M(2,9,9013,"Could not find cell with name "+n);return t}function HC(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function GC(e){var t=Array.from(e.g.keys());if(!t.length)throw new M(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function KC(e){var t,n,i;return C(function(r){return r.g==1?(t=Array.from(e.g.values()),n=t.length>0,n||(i=au,i.forEach(function(o){(o=o())&&t.push(o)})),T(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.A(0):T(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function G1(e,t){au.set(e,t)}K("shaka.offline.StorageMuxer",Yt),Yt.unregister=function(e){au.delete(e)},Yt.register=G1,Yt.prototype.destroy=Yt.prototype.destroy;var au=new Map;function lu(){jr.apply(this,arguments)}Qe(lu,jr),lu.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return C(function(s){return i=Nr(n.h,n.g),r=i.store(),o=new je,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new M(2,9,9012,"Could not find values for "+e))},T(s,Promise.all([i.promise(),o]),0)})},lu.prototype.Sd=function(e){var t,n,i,r,o,s;return C(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=XC(e.periods[n],r),t.push(o);return T(u,A0(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function XC(e,t){zC(e);for(var n=g(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return WC(r,e.startTime,t)})}function WC(e,t,n){var i=e.initSegmentUri?K1(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=K1(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}lu.prototype.Uh=function(e){return{data:e.data}};function K1(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new M(2,9,9004,"Could not parse uri "+e)}function zC(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=g(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=g(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=g(e),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=g(t),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i);if(e.length&&t.length)for(t=g(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=g(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function Gl(){jr.apply(this,arguments)}Qe(Gl,jr),Gl.prototype.Sd=function(e){var t,n,i,r,o,s;return C(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=g(a.streams),f=c.next();!f.done;f=c.next())f=f.value,f.variantIds.length!=0&&l.push(YC(f,a.startTime,a.startTime+r));o=l,t.push(o)}return T(u,A0(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function YC(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Eh(){jr.apply(this,arguments)}Qe(Eh,jr),d=Eh.prototype,d.hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,t){return FC(this,e,t)},d.Sd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function X1(){this.m=this.j=this.i=this.h=this.g=this.l=null}d=X1.prototype,d.init=function(){var e=this,t=new je,n=!1,i=new ge(function(){n=!0,t.reject(new M(2,9,9017))});i.ia(W1);var r=b.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){i.stop();var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new lu(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Gl(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Gl(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new Eh(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new uu(o):null,e.m=o,t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=g(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(i.stop(),t.reject(new M(2,9,9001,r.error)),o.preventDefault())},t},d.destroy=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),G(t)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,qC(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function qC(){var e=new je,t=b.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new M(2,9,9001,t.error)),n.preventDefault()},e}var W1=5;K("shaka.offline.indexeddb.StorageMechanismOpenTimeout",W1),G1("idb",function(){return he().Bh()?new X1:null});function ii(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}ii.prototype.Qb=function(){return this.i},ii.prototype.bb=function(){return this.h},ii.prototype.key=function(){return this.l},ii.prototype.toString=function(){return this.j};function Ih(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new ii(t,n,i,Number(e[4])):null}function z1(e,t){this.h=e,this.g=t}function Y1(e,t){var n=new re(null,0);n.Ab(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=JC(e,i,r,n),r=t.streams.filter(function(l){return l.type==pe}).map(function(l){return Kl(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Kl(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=g(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function JC(e,t,n,i){for(var r=new Set,o=g(t),s=o.next();!s.done;s=o.next()){s=g(s.value.variantIds);for(var u=s.next();!u.done;u=s.next())r.add(u.value)}for(o=g(n),s=o.next();!s.done;s=o.next())for(s=g(s.value.variantIds),u=s.next();!u.done;u=s.next())r.add(u.value);for(o=new Map,r=g(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),r=t.next();!r.done;r=t.next())for(s=r.value,r=Kl(e,s,i),s=g(s.variantIds),u=s.next();!u.done;u=s.next())u=o.get(u.value),u.language=r.language,u.primary=u.primary||r.primary,u.audio=r;for(n=g(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Kl(e,r,i),r=g(r.variantIds),s=r.next();!s.done;s=r.next())s=o.get(s.value),s.primary=s.primary||t.primary,s.video=t;return o}function Kl(e,t,n){var i=t.segments.map(function(r){return $C(e,r,t)});return n.ke(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ce(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Ze(t.mimeType,t.codecs)]),isAudioMuxedInVideo:t.isAudioMuxedInVideo||!1,baseOriginalId:null}}function $C(e,t,n){var i=new ii("segment",e.h,e.g,t.dataKey);return e=new Z(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?QC(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Lf(t.thumbnailSprite),e}function QC(e,t){var n=new ii("segment",e.h,e.g,t);return new Xt(function(){return[n.toString()]},0,null)}function q1(){this.g=null}d=q1.prototype,d.configure=function(){},d.start=function(e,t){var n=this,i,r,o,s,u,a,l;return C(function(c){switch(c.g){case 1:if(i=Ih(e),n.g=i,i==null||i.g!="manifest")throw new M(2,1,9004,e);return r=new Yt,oi(c,2),T(c,r.init(),4);case 4:return T(c,Hl(r,i.Qb(),i.bb()),5);case 5:return o=c.h,T(c,o.getManifests([i.key()]),6);case 6:return s=c.h,u=s[0],a=new z1(i.Qb(),i.bb()),l=Y1(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return sn(c),T(c,r.destroy(),7);case 7:un(c,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return C(function(c){switch(c.g){case 1:return i=n.g,r=new Yt,ue(c,2,3),T(c,r.init(),5);case 5:return T(c,Hl(r,i.Qb(),i.bb()),6);case 6:return o=c.h,T(c,o.getManifests([i.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.A(3);break}return T(c,o.updateManifestExpiration(i.key(),t),3);case 3:return sn(c),T(c,r.destroy(),10);case 10:un(c,0);break;case 2:ae(c),c.A(3)}})},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){},dr("application/x-offline-manifest",function(){return new q1});function J1(){}function $1(e,t){var n=Ih(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=Qr(e)):e=n&&n.g=="segment"?ZC(n.key(),n,t):Gi(new M(2,1,9004,e)),e}function ZC(e,t,n){var i=new Yt;return Qr(void 0).Xa(function(){return i.init()}).Xa(function(){return Hl(i,t.Qb(),t.bb())}).Xa(function(r){return r.getSegments([t.key()])}).Xa(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}K("shaka.offline.OfflineScheme",J1),J1.plugin=$1,mi("offline",$1);function Q1(e,t,n){var i,r,o,s,u,a;return C(function(l){switch(l.g){case 1:i=[];for(var c=[],f=g(n),h=f.next();!h.done;h=f.next()){h=h.value;for(var p=!1,m=g(c),v=m.next();!v.done;v=m.next())if(v=v.value,tM(v.info,h)){v.sessionIds.push(h.sessionId),p=!0;break}p||c.push({info:h,sessionIds:[h.sessionId]})}r=g(c),o=r.next();case 2:if(o.done){l.A(4);break}return s=o.value,u=eM(e,t,s),T(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.A(2);break;case 4:return l.return(i)}})}function eM(e,t,n){var i,r;return C(function(o){switch(o.g){case 1:return i=new sa({vc:t,onError:function(){},xf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ue(o,2),i.configure(e),T(o,PS(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:de(o,3);break;case 2:return ae(o),T(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],T(o,Promise.all(n.sessionIds.map(function(s){return C(function(u){if(u.g==1)return ue(u,2),T(u,OS(i,s),4);if(u.g!=2)return r.push(s),de(u,0);ae(u),G(u)})})),6);case 6:return T(o,i.destroy(),7);case 7:return o.return(r)}})}function tM(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ar(e.audioCapabilities,t.audioCapabilities,n)&&ar(e.videoCapabilities,t.videoCapabilities,n)}function nM(e,t,n){var i=t.presentationTimeline.getDuration();return t=Z1(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Ch(e,t){var n=Y1(new z1(e.Qb(),e.bb()),t),i=t.appMetadata||{};return n=Z1(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Z1(e){var t=[],n=Yu(e.variants);n=g(n);for(var i=n.next();!i.done;i=n.next())t.push(xr(i.value));for(e=g(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Sr(n.value));return t}function iM(){this.g=new Map}function rM(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;o<=0&&(o=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,o)}}function oM(e,t){e.g.set(t.id,t.bandwidth||2048)}function eT(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Tt(e){var t=this;if(e&&e.constructor!=U)throw new M(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Yb()):(this.h=To(),this.g=new Ke,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new eo(function(){var i,r,o,s,u;return C(function(a){switch(a.g){case 1:return T(a,Promise.all(t.l.map(function(l){return Sh(l)})),2);case 2:for(i=function(){},r=[],o=g(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return T(a,Promise.all(r),3);case 3:if(!n){a.A(4);break}return T(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,G(a)}})}),this.m=1e9}function Mh(){if(ni(he()))e:{for(var e=g(au.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}d=Tt.prototype,d.destroy=function(){return this.j.destroy()},d.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=La(e,t)),Ai(this.h,e)},d.getConfiguration=function(){var e=To();return Ai(e,this.h,To()),e},d.Yb=function(){return this.g},d.store=function(e,t,n,i,r){var o=this,s=this.getConfiguration(),u=new xh(this.g);return this.l.push(u),t=sM(this,e,t||{},i||[],r||[],function(){var a;return C(function(l){return l.g==1?n?l.A(2):T(l,go(e,o.g,s.manifest.retryParameters),3):(l.g!=2&&(n=l.h),a=Pp(e,n||null),l.return(a()))})},s,u),t=new et(t,function(){return Sh(u)}),t.finally(function(){Nn(o.l,u)}),wM(this,t)};function sM(e,t,n,i,r,o,s,u){var a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j;return C(function(O){switch(O.g){case 1:return Xl(),l=a=null,c=new Yt,p=h=f=null,ue(O,2,3),T(O,o(),5);case 5:return a=O.h,T(O,gM(e,t,a,s),6);case 6:if(m=O.h,an(e),v=!m.presentationTimeline.W()&&!m.presentationTimeline.Vc(),!v)throw new M(2,9,9005,t);y=g(i),S=y.next();case 7:if(S.done){O.A(9);break}return x=S.value,T(O,mM(e,x,m),10);case 10:A=O.h,m.imageStreams.push(A),an(e),S=y.next(),O.A(7);break;case 9:I=g(r),R=I.next();case 11:return R.done?(Vg(s.drm.clearKeys,m.variants),k=m.variants.some(function(F){if(F.audio){for(var H=g(F.audio.drmInfos),Q=H.next();!Q.done;Q=H.next())if(Q.value.licenseServerUri.startsWith("data:"))return!0}if(F.video){for(F=g(F.video.drmInfos),H=F.next();!H.done;H=F.next())if(H.value.licenseServerUri.startsWith("data:"))return!0}return!1}),L=s.offline.usePersistentLicense,k&&(L=!1),T(O,e.md(m,function(F){p=p||F},s,L),15)):(E=R.value,T(O,vM(e,m,E.uri,E.language,E.kind,E.mime,E.codecs),14));case 14:w=O.h,m.textStreams.push(w),an(e),R=I.next(),O.A(11);break;case 15:if(l=O.h,an(e),p)throw p;return T(O,aM(m,l,s,L),16);case 16:return T(O,c.init(),17);case 17:return an(e),T(O,H1(c),18);case 18:return f=O.h,an(e),D=lM(l,m,t,n,s,u,L),P=D.rk,N=D.Fh,T(O,f.bb.addManifests([P]),19);case 19:if(_=O.h,an(e),h=_[0],an(e),p)throw p;return T(O,uM(e,N,h,P,u,s,f.bb,m,l,L),20);case 20:return an(e),rT(m,P,l,L),T(O,f.bb.updateManifest(h,P),21);case 21:return an(e),B=new ii("manifest",f.path.Qb,f.path.bb,h),O.return(Ch(B,P));case 3:return sn(O),T(O,c.destroy(),22);case 22:if(!a){O.A(23);break}return T(O,a.stop(),23);case 23:if(!l){O.A(25);break}return T(O,l.destroy(),25);case 25:un(O,0);break;case 2:if(j=ae(O),h==null){O.A(27);break}return T(O,tT(h),27);case 27:throw p||j}})}function uM(e,t,n,i,r,o,s,u,a,l){var c,f,h,p,m,v,y,S,x,A,I;return C(function(R){switch(R.g){case 1:if(c={},f=0,h=function(){if(e.j.g||r.l)throw new M(2,9,7001)},p=function(E,w){var k,L,D,P,N,_,B,j,O;return C(function(F){if(F.g==1){for(k=g(E),L=k.next(),D={};!L.done;D={mc:void 0},L=k.next())D.mc=L.value,h(),P=OC(D.mc,o),N=D.mc.i,_=D.mc.h,B=(function(H){return function(Q){var z,Ae,ce,Le;return C(function(me){switch(me.g){case 1:if(z=H.mc.g,Ae=z.$b(!1),!z.aesKey||Ae){me.A(2);break}return T(me,kf(Q,z.aesKey,H.mc.j),3);case 3:Q=me.h;case 2:return ce=Th(z),T(me,s.addSegments([{data:Q}]),4);case 4:Le=me.h,h(),c[ce]=Le[0],f+=Q.byteLength,G(me)}})}})(D),j=D.mc.g,(O=j.$b(!1))?_C(r,D.mc.groupId,O,N,_,B):r.queue(D.mc.groupId,P,N,_,B);return T(F,BC(r),2)}return h(),!w||r.l?F.A(0):(rT(u,i,a,l),T(F,s.updateManifest(n,i),0))})},m=!1,ue(R,2),!kh(u)||!m||iT(u)){R.A(4);break}return T(R,p(t.filter(function(E){return E.h}),!0),5);case 5:return h(),t=t.filter(function(E){return!E.h}),v=c,y=f,c={},f=0,T(R,nT(s,n,i,v,y,function(){return an(e)}),6);case 6:h();case 4:if(m){R.A(7);break}return T(R,p(t,!1),8);case 8:return h(),S=c,x=f,c={},f=0,T(R,nT(s,n,i,S,x,function(){return h()}),9);case 9:h();case 7:de(R,0);break;case 2:return A=ae(R),I=Object.values(c),T(R,s.removeSegments(I,function(){}),10);case 10:throw A}})}function tT(e){var t,n,i,r;return C(function(o){switch(o.g){case 1:return t=new Yt,T(o,t.init(),2);case 2:return T(o,H1(t),3);case 3:return n=o.h,i=new ii("manifest",n.path.Qb,n.path.bb,e),T(o,t.destroy(),4);case 4:return r=new Tt,T(o,r.remove(i.toString()),0)}})}function nT(e,t,n,i,r,o){var s,u,a,l,c,f,h,p,m,v,y;return C(function(S){switch(S.g){case 1:for(s=!1,ue(S,2),u=!0,a=g(n.streams),l=a.next();!l.done;l=a.next())for(c=l.value,f=g(c.segments),h=f.next();!h.done;h=f.next())p=h.value,m=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null,m!=null&&(p.dataKey=m,p.pendingSegmentRefId=void 0),m=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null,m!=null&&(p.initSegmentKey=m,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(u=!1),p.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),T(S,e.updateManifest(t,n),4);case 4:s=!0,o(),de(S,0);break;case 2:return v=ae(S),T(S,tT(t),5);case 5:if(s){S.A(6);break}return y=Object.values(i),T(S,e.removeSegments(y,function(){}),6);case 6:throw v}})}function aM(e,t,n,i){var r,o,s,u,a,l,c,f,h,p,m,v,y,S,x,A,I,R,E,w,k,L,D,P,N,_,B,j,O,F;return C(function(H){switch(H.g){case 1:return r={width:1/0,height:1/0},dS(e,n.restrictions,r),T(H,rg(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(o=[],s=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,a=n.preferredAudioCodecs,l=n.preferredTextFormats,ig(e,u,a,s,l),c=g(e.variants),f=c.next();!f.done;f=c.next())h=f.value,o.push(xr(h));for(p=g(e.textStreams),m=p.next();!m.done;m=p.next())v=m.value,o.push(Sr(v));for(y=g(e.imageStreams),S=y.next();!S.done;S=y.next())x=S.value,o.push(Hc(x));return T(H,n.offline.trackSelectionCallback(o),3);case 3:for(A=H.h,I=e.presentationTimeline.getDuration(),R=0,E=g(A),w=E.next();!w.done;w=E.next())k=w.value,L=k.bandwidth*I/8,R+=L;return ue(H,4),T(H,n.offline.downloadSizeCallback(R),6);case 6:if(D=H.h,!D)throw new M(2,9,9014);de(H,5);break;case 4:throw P=ae(H),P instanceof M?P:new M(2,9,9015);case 5:for(N=new Set,_=new Set,B=new Set,j=g(A),O=j.next();!O.done;O=j.next())F=O.value,F.type=="variant"&&N.add(F.id),F.type=="text"&&_.add(F.id),F.type=="image"&&B.add(F.id);e.variants=e.variants.filter(function(Q){return N.has(Q.id)}),e.textStreams=e.textStreams.filter(function(Q){return _.has(Q.id)}),e.imageStreams=e.imageStreams.filter(function(Q){return B.has(Q.id)}),IM(e),G(H)}})}function lM(e,t,n,i,r,o,s){var u=nM(n,t,i),a=r.offline.progressCallback;UC(o,function(m,v){u.size=v,a(u,m)},function(m,v){l&&s&&c==v&&hs(e,"cenc",m)});var l=kh(t)&&!iT(t),c=null;l&&(c=CM.get(e.g.keySystem));for(var f=new iM,h=g(t.textStreams),p=h.next();!p.done;p=h.next())f.g.set(p.value.id,52);for(h=g(t.imageStreams),p=h.next();!p.done;p=h.next())oM(f,p.value);for(h=g(t.variants),p=h.next();!p.done;p=h.next())rM(f,p.value);return o=TM(o,f,t,r),r=o.streams,o=o.Fh,(f=e.g)&&s&&(f.initData=[]),{rk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Xd(),streams:r,sessionIds:s?jg(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Fh:o}}function kh(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function iT(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function rT(e,t,n,i){if(t.expiration=n.Xd(),n=jg(n),t.sessionIds=i?n:[],kh(e)&&i&&!n.length)throw new M(2,9,9007)}d.remove=function(e){return Dh(this,cM(this,e))};function cM(e,t){var n,i,r,o,s,u;return C(function(a){switch(a.g){case 1:if(Xl(),n=Ih(t),n==null||n.g!="manifest")throw new M(2,9,9004,t);return i=n,r=new Yt,oi(a,2),T(a,r.init(),4);case 4:return T(a,Hl(r,i.Qb(),i.bb()),5);case 5:return o=a.h,T(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],T(a,Promise.all([fM(e,u,r),dM(o,i,u)]),2);case 2:return sn(a),T(a,r.destroy(),8);case 8:un(a,0)}})}function oT(e,t){for(var n=[],i=g(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:Ze(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:Ze(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function fM(e,t,n){return C(function(i){return T(i,EM(e.g,e.h.drm,n,t),0)})}function dM(e,t,n){function i(){}var r=AM(n);return Ch(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}d.Mk=function(){return Dh(this,hM(this))};function hM(e){var t,n,i,r,o,s,u,a,l,c;return C(function(f){switch(f.g){case 1:return Xl(),t=e.g,n=e.h.drm,i=new Yt,r=!1,oi(f,2),T(f,i.init(),4);case 4:o=[],HC(i,function(h){return o.push(h)}),s=g(o),u=s.next();case 5:if(u.done){f.A(2);break}return a=u.value,T(f,a.getAll(),8);case 8:return l=f.h,T(f,Q1(n,t,l),9);case 9:return c=f.h,T(f,a.remove(c),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),f.A(5);break;case 2:return sn(f),T(f,i.destroy(),11);case 11:un(f,3);break;case 3:return f.return(!r)}})}d.list=function(){return Dh(this,pM())};function pM(){var e,t,n;return C(function(i){switch(i.g){case 1:return Xl(),e=[],t=new Yt,oi(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),VC(t,function(r,o){n=n.then(function(){var s;return C(function(u){if(u.g==1)return T(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=Ch(new ii("manifest",r.Qb,r.bb,l),a),e.push(a)}),G(u)})})}),T(i,n,2);case 2:return sn(i),T(i,t.destroy(),6);case 6:un(i,3);break;case 3:return i.return(e)}})}function gM(e,t,n,i){var r,o,s,u,a;return C(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),an(e),T(l,n.start(t,s),2);if(l.g!=3)return u=l.h,an(e),a=uT(u),T(l,Promise.all(Wc(a,function(c){return c.createSegmentIndex()})),3);if(an(e),r)throw r;return l.return(u)})}function mM(e,t,n){var i,r,o,s,u,a,l,c,f,h,p,m,v,y,S;return C(function(x){switch(x.g){case 1:return T(x,sT(e,t),2);case 2:if(i=x.h,i!="text/vtt")throw new M(1,2,2017,t);return T(x,yM(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=x.h,o=ss(i),!o)throw new M(2,2,2014,i);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},a=se(r),l=s.parseMedia(a,u,t,[]),c=[],f=g(l),h=f.next(),p={};!h.done;p={Uf:void 0,od:void 0},h=f.next())p.od=h.value,p.Uf=null,m=(function(A){return function(){return A.Uf==null&&(A.Uf=mt([t],[A.od.payload])),A.Uf||[]}})(p),v=new Z(p.od.startTime,p.od.endTime,m,0,null,null,0,0,1/0),p.od.payload.includes("#xywh")&&(y=p.od.payload.split("#xywh=")[1].split(","),y.length===4&&v.Lf({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),c.push(v);if(S=i,!c.length){x.A(4);break}return T(x,go(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:S=x.h;case 4:return x.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ce(c),mimeType:S||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ze(S||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function vM(e,t,n,i,r,o,s){var u,a,l;return C(function(c){if(c.g==1)return o?c.A(2):T(c,sT(e,n),3);if(c.g!=2&&(o=c.h),u={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ta(0,t.presentationTimeline.getDuration(),[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:pe,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ze(o||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a=Ze(u.mimeType,u.codecs),l=us(a),!l)throw new M(2,2,2014,o);return c.return(u)})}function sT(e,t){var n;return C(function(i){switch(i.g){case 1:return ue(i,2),T(i,go(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,de(i,3);break;case 2:ae(i);case 3:if(n)return i.return(n);throw new M(1,2,2011,t)}})}function yM(e,t,n){var i,r,o;return C(function(s){return s.g==1?(i=Sn,r=ot([e],n),r.method="GET",T(s,t.request(i,r).promise,2)):(o=s.h,s.return(o.data))})}d.md=function(e,t,n,i){var r=this,o;return C(function(s){return s.g==1?(o=new sa({vc:r.g,onError:t,xf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(n.drm),T(s,LS(o,e.variants,i),2)):s.g!=3?T(s,Ng(o),3):s.return(o)})};function TM(e,t,n,i){var r=new Map,o=uT(n),s=new Map;o=g(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=xM(e,t,n,u,i,r);s.set(u.id,a)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Fh:Array.from(r.values())}}function xM(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},u=r.offline.numberOfParallelDownloads,a=u===0?i.id:0;return SM(i,n.presentationTimeline.Ib(),function(l,c){var f=Th(l),h=void 0;if(!o.has(f)){var p=l.endTime-l.startTime;p=eT(t,i.id)*p,p=_1(e.g,p),o.set(f,new O1(l,p,a,!1,c))}l.ba&&(h=Th(l.ba),o.has(h)||(p=eT(t,i.id)*.5,p=_1(e.g,p),o.set(h,new O1(l.ba,p,a,!0,c)))),s.segments.push({pendingInitSegmentRefId:h,initSegmentKey:h?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:f,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),u!==0&&(a=(a+1)%u)}),s}function SM(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function an(e){if(e.j.g)throw new M(2,9,7001)}function Xl(){if(!Mh())throw new M(2,9,9e3)}function Dh(e,t){return C(function(n){return n.g==1?(e.i.push(t),oi(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(sn(n),Nn(e.i,t),un(n,0))})}function wM(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Nn(e.i,n)})}function AM(e){var t=new Set;e=g(e.streams);for(var n=e.next();!n.done;n=e.next()){n=g(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function EM(e,t,n,i){var r,o,s;return C(function(u){return u.g==1?i.drmInfo?(r=GC(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:oT(i,!1),videoCapabilities:oT(i,!0)}}),T(u,Q1(t,e,o),2)):u.return():u.g!=3?(s=u.h,T(u,r.remove(s),3)):T(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function uT(e){for(var t=new Set,n=g(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=g(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=g(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function IM(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=g(t),i=n.next();!i.done;i=n.next()){i=g(t);for(var r=i.next();!r.done;r=i.next());}for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),i=n.next();!i.done;i=n.next());}K("shaka.offline.Storage",Tt),Tt.deleteAll=function(){var e;return C(function(t){return t.g==1?(e=new Yt,oi(t,2),T(t,KC(e),2)):t.g!=5?(sn(t),T(t,e.destroy(),5)):un(t,0)})},Tt.prototype.list=Tt.prototype.list,Tt.prototype.removeEmeSessions=Tt.prototype.Mk,Tt.prototype.remove=Tt.prototype.remove,Tt.prototype.store=Tt.prototype.store,Tt.prototype.getNetworkingEngine=Tt.prototype.Yb,Tt.prototype.getConfiguration=Tt.prototype.getConfiguration,Tt.prototype.configure=Tt.prototype.configure,Tt.prototype.destroy=Tt.prototype.destroy,Tt.support=Mh;var CM=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");_v("offline",Mh);function qt(){}function ln(e,t){for(e={priority:t||0,callback:e},t=0;t<cu.length;t++)if(cu[t].priority<e.priority){cu.splice(t,0,e);return}cu.push(e)}K("shaka.polyfill",qt),qt.register=ln,qt.installAll=function(){for(var e=g(cu),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){xe("Error installing polyfill!",n)}}};var cu=[];function Wl(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Wl.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=g(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Wl.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function aT(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(xe("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function lT(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Rh(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&he().ed())}function cT(){}var fu;function fT(){he().Nf()&&!fu&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(fu=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=MM,navigator.emeEncryptionSchemePolyfilled=!0)}function MM(e,t){var n=this,i;return C(function(r){return r.g==1?T(r,fu.call(n,e,t),2):(i=r.h,lT(i)?(navigator.requestMediaKeySystemAccess=fu,r.return(i)):(navigator.requestMediaKeySystemAccess=dT,r.return(dT.call(n,e,t))))})}function dT(e,t){var n=this,i,r,o,s,u,a,l,c,f,h,p,m;return C(function(v){if(v.g==1){for(i=aT(e),r=[],o=g(t),s=o.next();!s.done;s=o.next())u=s.value,a=hT(u.videoCapabilities,i),l=hT(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw f=Error("Unsupported keySystem or supportedConfigurations."),f.name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return T(v,fu.call(n,e,r),2)}return h=v.h,m=p=null,r[0]&&(r[0].videoCapabilities&&(p=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(m=r[0].audioCapabilities[0].encryptionScheme)),v.return(new Wl(h,p,m))})}function hT(e,t){return e&&e.filter(function(n){return Rh(n.encryptionScheme,t)})}qt.EmeEncryptionScheme=cT,cT.install=fT,ln(fT);function pT(){}var du;function gT(){he().Nf()&&!du&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(du=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=kM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function kM(e){var t=this,n,i;return C(function(r){switch(r.g){case 1:return T(r,du.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if(i=n.keySystemAccess,lT(i))return navigator.mediaCapabilities.decodingInfo=du,r.return(n);if(navigator.mediaCapabilities.decodingInfo=mT,i){r.A(3);break}return T(r,vT(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(mT.call(t,e))}})}function mT(e){var t=this,n,i,r,o,s,u,a;return C(function(l){switch(l.g){case 1:return i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,s=aT(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Rh(i,s)&&Rh(n,s))?T(l,du.call(t,e),2):l.return(u);case 2:if(a=l.h,a.keySystemAccess){a.keySystemAccess=new Wl(a.keySystemAccess,n,i),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return T(l,vT(e),5);case 5:a.keySystemAccess=l.h;case 3:return l.return(a)}})}function vT(e){var t,n;return C(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}qt.MCapEncryptionScheme=pT,pT.install=gT,ln(gT,-2);function zl(){}function yT(){he().fc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),zl.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=DM)}function DM(e){var t,n,i,r,o,s,u,a,l,c,f;return C(function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},he(),n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,o=Ir().canPlayType(r)!="",!o)||i&&(s=i.contentType,u=Ir().canPlayType(s)!="",!u))return h.return(t)}else return h.return(t);h.A(2);break}if(!ni())return h.return(t);if(!n){h.A(3);break}return T(h,RM(n),4);case 4:if(a=h.h,!a)return h.return(t);case 3:if(i){var p=he().Oa(),m=i.contentType;if(p==="CAST"&&i.spatialRendering&&(m+="; spatialRendering=true"),l=Pt(m),!l)return h.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,T(h,LM(n,i,c),6)):(t.supported=!0,h.return(t));case 6:(f=h.h)&&(t.supported=!0,t.keySystemAccess=f);case 5:return h.return(t)}})}function RM(e){var t,n,i;return C(function(r){return r.g==1?(t=he(),n=t.Oa(),n!=="CAST"?r.A(2):T(r,PM(e),3)):r.g!=2?(i=r.h,r.return(i)):r.return(Pt(e.contentType))})}function LM(e,t,n){var i,r,o,s,u,a,l,c,f,h,p;return C(function(m){switch(m.g){case 1:if(i=[],r=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},he().xi()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),i.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),r.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(u.audioCapabilities=i),r.length&&(u.videoCapabilities=r),a=e?e.contentType:"",l=t?t.contentType:"",c=Qt(a)+";"+Vi(a),f=Qt(l)+";"+Vi(l),h=n.keySystem,p=null,ue(m,2),$r.has(c+"#"+f+"#"+h)){p=$r.get(c+"#"+f+"#"+h)||null,m.A(4);break}return T(m,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:p=m.h,$r.set(c+"#"+f+"#"+h,p);case 4:de(m,3);break;case 2:ae(m);case 3:return m.return(p)}})}function PM(e){var t,n,i,r,o;return C(function(s){if(s.g==1){if(!(b.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(Pt(e.contentType));switch(t=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),n<24||n>30)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return s.return(!1)}return r=!1,o=NM,o.has(t)?(r=o.get(t),s.A(2)):T(s,cast.__platform__.canDisplayType(t),3)}return s.g!=2&&(r=s.h,o.set(t,r)),s.return(r)})}qt.MediaCapabilities=zl,zl.install=yT,zl.originalMcap=null;var NM=new Map;ln(yT,-1);function TT(){}function xT(){var e=he(),t=e.Ha()==="WEBKIT"?e.Ba():null;for((b.MediaSource||b.ManagedMediaSource)&&t&&b.MediaSource&&(t<=12?(ST(),jM()):t<=15&&ST()),e=g(e.Ii()),t=e.next();!t.done;t=e.next())UM(t.value);(b.MediaSource||b.ManagedMediaSource)&&OM(),b.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&_M()}function ST(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,gt.apply(0,arguments));return t.abort=function(){},t}}function jM(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function OM(){if(b.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return os(n)!="mp2t"&&e(n)}}if(b.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);b.ManagedMediaSource.isTypeSupported=function(n){return os(n)!="mp2t"&&t(n)}}}function UM(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(i){return Vi(i)!=e&&t(i)},b.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);b.ManagedMediaSource.isTypeSupported=function(i){return Vi(i)!=e&&n(i)}}}function _M(){var e=MediaSource.isTypeSupported;he().cj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(i<0)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return o>=0&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}qt.MediaSource=TT,TT.install=xT,ln(xT);function Lh(){}var Ph,Nh,jh,Oh,Uh,_h;function wT(e){b.HTMLVideoElement&&b.WebKitMediaKeys&&b.shakaMediaKeysPolyfill!=bh&&(e!==void 0&&e&&(Ph=!0,Nh=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),jh=HTMLMediaElement.prototype.setMediaKeys,Oh=b.MediaKeys,Uh=b.MediaKeySystemAccess,_h=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bM,b.MediaKeys=hu,b.MediaKeySystemAccess=Yl,navigator.requestMediaKeySystemAccess=BM,b.shakaMediaKeysPolyfill=bh,qu.clear(),$r.clear())}function BM(e,t){try{var n=new Yl(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function bM(e){var t=this.mediaKeys;return t&&t!=e&&AT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?AT(e,this):Promise.resolve()}function FM(e){if(e=se(e.initData),Ht(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ui(e.subarray(4),!0),e=jn(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=yn(e),this.dispatchEvent(t)}qt.PatchedMediaKeysApple=Lh,Lh.uninstall=function(){b.shakaMediaKeysPolyfill==bh&&Ph&&(Ph=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Nh),HTMLMediaElement.prototype.setMediaKeys=jh,b.MediaKeys=Oh,b.MediaKeySystemAccess=Uh,navigator.requestMediaKeySystemAccess=_h,Nh=_h=jh=Uh=Oh=null,b.shakaMediaKeysPolyfill="",qu.clear(),$r.clear())},Lh.install=wT;function Yl(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=g(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=g(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=g(n.videoCapabilities),o=n.next();!o.done;o=n.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Yl.prototype.createMediaKeys=function(){var e=new hu(this.keySystem);return Promise.resolve(e)},Yl.prototype.getConfiguration=function(){return this.g};function hu(e){this.h=new WebKitMediaKeys(e),this.g=new Me}hu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Bh(this.h)},hu.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function AT(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",FM);try{return po(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}hu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Bh(e){Ne.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Me,this.sessionId="",this.expiration=NaN,this.closed=new je,this.keyStatuses=new ET,this.onkeystatuseschange=null}Qe(Bh,Ne),d=Bh.prototype,d.generateRequest=function(e,t){var n=this;this.h=new je;try{var i=this.l.createSession("video/mp4",se(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.Kc()==null?"license-request":"license-renewal").set("message",yn(r.message)),r=new Y("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(ql(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ql(n,"output-not-allowed");break;default:ql(n,"internal-error")}}),ql(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new je;try{this.i.update(se(e))}catch(t){this.g.reject(t)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ql(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Y("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function ET(){this.size=0,this.g=void 0}d=ET.prototype,d.Kc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,Zu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=Zu.value();return!!(this.g&&si(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var bh="apple";ln(function(){b.HTMLVideoElement&&b.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||wT())});function IT(){}function CT(){if(b.MediaKeys){var e=he();MediaKeys.prototype.setServerCertificate&&e.ue()||(MediaKeys.prototype.setServerCertificate=VM)}}function VM(){return Promise.resolve(!1)}qt.PatchedMediaKeysCert=IT,IT.install=CT,ln(CT);function MT(){}function kT(){if(!(!b.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Kh="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=HM,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=GM,b.MediaKeys=pu,b.MediaKeySystemAccess=Jl,b.shakaMediaKeysPolyfill=KM}}function Fh(e){var t=Kh;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function HM(e,t){try{var n=new Jl(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function GM(e){var t=this.mediaKeys;return t&&t!=e&&DT(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&DT(e,this),Promise.resolve()}qt.PatchedMediaKeysWebkit=MT,MT.install=kT;function Jl(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=g(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=g(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=g(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Jl.prototype.createMediaKeys=function(){var e=new pu(this.g);return Promise.resolve(e)},Jl.prototype.getConfiguration=function(){return this.h};function pu(e){this.l=e,this.h=null,this.g=new Me,this.i=[],this.j=new Map}function DT(e,t){e.h=t,e.g.Qa();var n=Kh;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=yn(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=Vh(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.Kc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new Y("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=Vh(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=Vh(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?$l(r,"output-restricted"):o==1?$l(r,"expired"):$l(r,"internal-error"))}}))}pu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Hh(t,this.l,e),this.i.push(e),e},pu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},pu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Vh(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Hh(e,t,n){Ne.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new je,this.keyStatuses=new LT,this.onkeystatuseschange=null}Qe(Hh,Ne),d=Hh.prototype,d.ready=function(){$l(this,"usable"),this.g&&this.g.resolve(),this.g=null};function RT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=se(jn("LOAD_SESSION|"+n));else{var r=jn("PERSISTENT|");i=rt(r,t)}else i=se(t)}catch(s){return Promise.reject(s)}e.h=new je;var o=Fh("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new ge(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).ia(.01)}return e.h}function Gh(e,t,n){if(e.g)e.g.then(function(){return Gh(e,t,n)}).catch(function(){return Gh(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=ze(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Tn(r.keys[0].k),r=Tn(r.keys[0].kid)}else i=se(n),r=null;var o=Fh("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function $l(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Y("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}d.generateRequest=function(e,t){return RT(this,t,null)},d.load=function(e){return this.l=="persistent-license"?RT(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var t=new je;return Gh(this,t,e),t},d.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Fh("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function LT(){this.size=0,this.g=void 0}d=LT.prototype,d.Kc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,Zu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=Zu.value();return!!(this.g&&si(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Kh="",KM="webkit";ln(kT);function PT(){}function NT(){b.crypto&&("randomUUID"in b.crypto||(b.crypto.randomUUID=XM))}function XM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}qt.RandomUUID=PT,PT.install=NT,ln(NT);function jT(){}function OT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:WM})}function WM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}qt.Symbol=jT,jT.install=OT,ln(OT);function UT(){}function _T(){for(var e=g([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=zM),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=YM),t.prototype.includes||(t.prototype.includes=qM)}function zM(e,t){return Array.prototype.indexOf.call(this,e,t)}function YM(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function qM(e,t){return this.indexOf(e,t)!==-1}qt.TypedArray=UT,UT.install=_T,ln(_T);function BT(){}function bT(){if(b.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}qt.VideoPlayPromise=BT,BT.install=bT,ln(bT);function FT(){}function VT(){if(b.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Ir().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=JM)}}function JM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}qt.VideoPlaybackQuality=FT,FT.install=VT,ln(VT);function HT(){}function GT(){if(!b.VTTCue&&b.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Xh;else if(t==6)e=$M;else{try{var n=!!Xh(1,2,"")}catch{n=!1}n&&(e=Xh)}e&&(b.VTTCue=function(i,r,o){return e(i,r,o)})}}function Xh(e,t,n){return new b.TextTrackCue(e,t,n)}function $M(e,t,n){return new b.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}qt.VTTCue=HT,HT.install=GT,ln(GT);function yt(e){Ne.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new Me}Qe(yt,Ne),d=yt.prototype,d.destroy=function(){var e=this;return C(function(t){if(t.g==1)return T(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Ne.prototype.release.call(e),G(t)})},d.configure=function(e){this.m=e},d.getConfiguration=function(){return this.m},d.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},d.getCurrentItemIndex=function(){return this.j},d.getItems=function(){return this.h.slice()},d.insertItems=function(e){this.h.push.apply(this.h,V(e)),this.dispatchEvent(new Y("itemsinserted"))},d.removeAllItems=function(){var e=this,t,n,i,r;return C(function(o){if(o.g==1)return e.o.Qa(),e.h.length&&e.j>=0?T(o,e.g.Cc(),2):o.A(2);if(o.g!=4){for(t=[],e.i&&(e.i.preloadManager.l||t.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.l||t.push(e.l.preloadManager.destroy()),e.l=null),n=g(e.h),i=n.next();!i.done;i=n.next())r=i.value,r.preloadManager&&!r.preloadManager.l&&t.push(r.preloadManager.destroy());return t.length?T(o,Promise.all(t),4):o.A(4)}e.h=[],e.j=-1,e.dispatchEvent(new Y("itemsremoved")),G(o)})},d.playItem=function(e){var t=this,n,i,r,o,s,u,a,l,c,f,h,p,m,v,y,S,x;return C(function(A){switch(A.g){case 1:if(t.o.Qa(),!t.h.length||e>=t.h.length)throw new M(2,7,7007);if(n=t.getCurrentItem(),i=t.h[e],t.j!=e&&(t.j=e,t.dispatchEvent(new Y("currentitemchanged"))),r=t.g.Ze(),o=t.m?t.m.preloadNextUrlWindow:0,o>0&&(s=!1,t.o.D(r,"timeupdate",function(){var I,R,E,w;return C(function(k){switch(k.g){case 1:if(t.l||t.h.length<=1||s||t.g.W()||!r.duration)return k.return();if(I=t.g.Ra().end-r.currentTime,isNaN(I)){k.A(0);break}if(!(I<=o)){k.A(0);break}if(R=t.m&&t.m.repeatMode,E=null,t.j+1<t.h.length?E=t.h[t.j+1]:R==1&&(E=t.h[0]),!E||E.preloadManager&&!E.preloadManager.l){k.A(0);break}return s=!0,w=null,ue(k,5),T(k,t.g.preload(E.manifestUri,E.startTime,E.mimeType,E.config),7);case 7:w=k.h,de(k,6);break;case 5:ae(k),w=null;case 6:t.l={item:E,preloadManager:w},s=!1,G(k)}})})),t.o.D(t.g,"complete",function(){var I=t.m&&t.m.repeatMode,R=!1;if(I==2)R=!0;else{var E=t.j+1;E<t.h.length?t.playItem(E):I==1&&(t.h.length==1?R=!0:t.playItem(0))}R&&(r.paused?(r.currentTime=t.g.Ra().start,r.play()):t.o.D(r,"paused",function(){r.currentTime=t.g.Ra().start,r.play()}))}),u=i.manifestUri,i.preloadManager&&!i.preloadManager.l&&(u=i.preloadManager),a=!1,t.l&&t.l.item==i&&t.l.preloadManager?u=t.l.preloadManager:t.i&&t.i.item==i&&t.i.preloadManager&&(u=t.i.preloadManager,a=!0),!t.i){A.A(2);break}if(a||t.i.preloadManager.l){A.A(3);break}return T(A,t.i.preloadManager.destroy(),3);case 3:t.i=null;case 2:if(!(t.m&&t.m.preloadPrevItem&&n&&t.g.Yd()===Et)){A.A(5);break}return l=null,ue(A,6),T(A,t.g.gj(),8);case 8:l=A.h,de(A,7);break;case 6:ae(A),l=null;case 7:t.i={item:n,preloadManager:l};case 5:return i.config&&(t.g.Li(),t.g.configure(i.config)),T(A,t.g.load(u,i.startTime,i.mimeType),9);case 9:if(t.l=null,i.extraText)for(c=g(i.extraText),f=c.next();!f.done;f=c.next())h=f.value,h.mime?t.g.Pd(h.uri,h.language,h.kind,h.mime,h.codecs):t.g.Pd(h.uri,h.language,h.kind);if(i.extraThumbnail)for(p=g(i.extraThumbnail),m=p.next();!m.done;m=p.next())v=m.value,t.g.Ne(v);if(i.extraChapter)for(y=g(i.extraChapter),S=y.next();!S.done;S=y.next())x=S.value,t.g.Me(x.uri,x.language,x.mime);G(A)}})},K("shaka.queue.QueueManager",yt),yt.prototype.playItem=yt.prototype.playItem,yt.prototype.removeAllItems=yt.prototype.removeAllItems,yt.prototype.insertItems=yt.prototype.insertItems,yt.prototype.getItems=yt.prototype.getItems,yt.prototype.getCurrentItemIndex=yt.prototype.getCurrentItemIndex,yt.prototype.getCurrentItem=yt.prototype.getCurrentItem,yt.prototype.getConfiguration=yt.prototype.getConfiguration,yt.prototype.configure=yt.prototype.configure,yt.prototype.destroy=yt.prototype.destroy,tl=function(e){return new yt(e)};function cn(){}cn.prototype.parseInit=function(){},cn.prototype.setSequenceMode=function(){},cn.prototype.setManifestType=function(){},cn.prototype.parseMedia=function(e,t){var n=null,i=[];e=ze(e).split(/\r?\n/),e=g(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=QM.exec(r))){var o=ZM.exec(r[1]);o=parseInt(o[1],10)*60+parseFloat(o[2].replace(",",".")),r=new Ve(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},K("shaka.text.LrcTextParser",cn),cn.prototype.parseMedia=cn.prototype.parseMedia,cn.prototype.setManifestType=cn.prototype.setManifestType,cn.prototype.setSequenceMode=cn.prototype.setSequenceMode,cn.prototype.parseInit=cn.prototype.parseInit;var QM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,ZM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;wt("application/x-subtitle-lrc",function(){return new cn});function on(){this.g="UNKNOWN"}on.prototype.parseInit=function(){},on.prototype.setSequenceMode=function(){},on.prototype.setManifestType=function(e){this.g=e},on.prototype.parseMedia=function(e,t,n,i){var r=ze(e);if(e=[],r=="")return e;var o=mr(r,"tt",!0);if(!o)throw new M(2,2,2005,"Failed to parse TTML.");if(r=Kn(o,"body")[0],!r)return[];var s=$n(o,gu,"frameRate"),u=$n(o,gu,"subFrameRate"),a=$n(o,gu,"frameRateMultiplier"),l=$n(o,gu,"tickRate"),c=$n(o,gu,"cellResolution"),f=o.attributes["xml:space"]||"default",h=$n(o,ec,"extent");if(f!="default"&&f!="preserve")throw new M(2,2,2005,"Invalid xml:space value: "+f);f=f=="default",s=new rk(s,u,a,l),c=ik(c),u=Kn(o,"metadata")[0],u=(u?u.children:[]).filter(function(v){return v!=`
`}),a=Kn(o,"style"),o=Kn(o,"region"),l=[];for(var p=g(o),m=p.next();!m.done;m=p.next())(m=ek(this,m.value,a,h))&&l.push(m);if(Pe(r,"p").length)throw new M(2,2,2001,"<p> can only be inside <div> in TTML");for(h=g(Pe(r,"div")),p=h.next();!p.done;p=h.next())if(Pe(p.value,"span").length)throw new M(2,2,2001,"<span> can only be inside <p> in TTML");return(t=KT(this,r,t,s,u,a,o,l,f,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function KT(e,t,n,i,r,o,s,u,a,l,c,f,h,p){var m=c;if(Pu(t)){if(!f)return null;var v={tagName:"span",children:[it(t)],attributes:{},parent:null}}else v=t;for(var y=null,S=g(ex),x=S.next();!x.done&&!(y=Zl(v,"backgroundImage",r,"#",x.value)[0]);x=S.next());S=null,x=$n(v,ex,"backgroundImage");var A=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(x&&A.test(x)){if(S=parseInt(x.split(":").pop(),10)-1,S>=p.length)return null;S=p[S]}else h&&x&&!x.startsWith("#")&&(A=new nt(h),x=new nt(x),(x=A.resolve(x).toString())&&(S=x));if((t.tagName=="p"||y||S)&&(f=!0),t=f,x=(v.attributes["xml:space"]||(a?"default":"preserve"))=="default",A=v.children.every(Pu),a=[],!A)for(var I=g(v.children),R=I.next();!R.done;R=I.next())(R=KT(e,R.value,n,i,r,o,s,u,x,l,v,f,h,p))&&a.push(R);if(r=c!=null,h=it(v),h=v.children.length&&h&&/\S/.test(h),I=v.attributes.begin||v.attributes.end||v.attributes.dur,!(I||h||v.tagName=="br"||a.length!=0||r&&!x))return null;for(p=zT(v,i),h=p.start,p=p.end;m&&m.tagName&&m.tagName!="tt";)p=nk(m,i,h,p),h=p.start,p=p.end,m=m.parent;if(h==null&&(h=0),h+=n.periodStart,p=p==null?1/0:p+n.periodStart,e.g!=="HLS"&&(h=Math.max(h,n.segmentStart),p=Math.min(p,n.segmentEnd)),!I&&a.length>0)for(h=1/0,p=0,n=g(a),i=n.next();!i.done;i=n.next())i=i.value,h=Math.min(h,i.startTime),p=Math.max(p,i.endTime);if(v.tagName=="br")return e=new Ve(h,p,""),e.lineBreak=!0,e;if(n="",A&&(n=Ut(it(v)||""),x&&(n=n.replace(/\s+/g," "))),n=new Ve(h,p,n),n.nestedCues=a,f||(n.isContainer=!0),l&&(n.cellResolution=l),l=Zl(v,"region",s,"")[0],v.attributes.region&&l&&l.attributes["xml:id"]){var E=l.attributes["xml:id"];n.region=u.filter(function(w){return w.id==E})[0]}return u=l,c&&r&&!v.attributes.region&&!v.attributes.style&&(u=Zl(c,"region",s,"")[0]),tk(e,n,v,u,y,S,o,t,a.length==0),n}function ek(e,t,n,i){var r=new pr,o=t.attributes["xml:id"];if(!o)return null;r.id=o,o=null,i&&(o=Jh.exec(i)||$h.exec(i)),i=o?Number(o[1]):null,o=o?Number(o[2]):null;var s,u=Ql(e,t,n,"extent");if(u){var a=(s=Jh.exec(u))||$h.exec(u);a!=null&&(r.width=Number(a[1]),r.height=Number(a[2]),s||(i!=null&&(r.width=r.width*100/i),o!=null&&(r.height=r.height*100/o)),r.widthUnits=s||i!=null?$t:0,r.heightUnits=s||o!=null?$t:0)}return(e=Ql(e,t,n,"origin"))&&(a=(s=Jh.exec(e))||$h.exec(e),a!=null&&(r.viewportAnchorX=Number(a[1]),r.viewportAnchorY=Number(a[2]),s?u||(r.width=100-r.viewportAnchorX,r.widthUnits=$t,r.height=100-r.viewportAnchorY,r.heightUnits=$t):(o!=null&&(r.viewportAnchorY=r.viewportAnchorY*100/o),i!=null&&(r.viewportAnchorX=r.viewportAnchorX*100/i)),r.viewportAnchorUnits=s||i!=null?$t:0)),r}function Wh(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function tk(e,t,n,i,r,o,s,u,a){if(u=u||a,Lt(e,n,i,s,"direction",u)=="rtl"&&(t.direction="rtl"),a=Lt(e,n,i,s,"writingMode",u),a=="tb"||a=="tblr"?t.writingMode="vertical-lr":a=="tbrl"?t.writingMode="vertical-rl":a=="rltb"||a=="rl"?t.direction="rtl":a&&(t.direction=is),(a=Lt(e,n,i,s,"textAlign",!0))?(t.positionAlign=uk.get(a),t.lineAlign=sk.get(a),t.textAlign=Lc[a.toUpperCase()]):t.textAlign=ei,(a=Lt(e,n,i,s,"displayAlign",!0))&&(t.displayAlign=Xp[a.toUpperCase()]),(a=Lt(e,n,i,s,"color",u))&&(t.color=Wh(a)),(a=Lt(e,n,i,s,"backgroundColor",u))&&(t.backgroundColor=Wh(a)),(a=Lt(e,n,i,s,"border",u))&&(t.border=a),a=Lt(e,n,i,s,"fontFamily",u))switch(a){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=a.split(",").filter(function(l){return l!="default"}).join(",")}switch((a=Lt(e,n,i,s,"fontWeight",u))&&a=="bold"&&(t.fontWeight=Wr),a=Lt(e,n,i,s,"wrapOption",u),t.wrapLine=!(a&&a=="noWrap"),(a=Lt(e,n,i,s,"lineHeight",u))&&a.match(Bo)&&(t.lineHeight=a),(a=Lt(e,n,i,s,"fontSize",u))&&(a.match(Bo)||a.match(ok))&&(t.fontSize=a),(a=Lt(e,n,i,s,"fontStyle",u))&&(t.fontStyle=qp[a.toUpperCase()]),r?(o=r.attributes.imageType||r.attributes.imagetype,a=r.attributes.encoding,r=it(r).trim(),o=="PNG"&&a=="Base64"&&r&&(t.backgroundImage="data:image/png;base64,"+r)):o&&(t.backgroundImage=o),(r=Lt(e,n,i,s,"textOutline",u))&&(r=r.split(" "),r[0].match(Bo)?t.textStrokeColor=t.color:(t.textStrokeColor=Wh(r[0]),r.shift()),r[0]&&r[0].match(Bo)?t.textStrokeWidth=r[0]:t.textStrokeColor=""),(r=Lt(e,n,i,s,"letterSpacing",u))&&r.match(Bo)&&(t.letterSpacing=r),(r=Lt(e,n,i,s,"linePadding",u))&&r.match(Bo)&&(t.linePadding=r),(r=Lt(e,n,i,s,"opacity",u))&&(t.opacity=parseFloat(r)),(r=Ql(e,i,s,"textDecoration"))&&XT(t,r),(r=zh(e,n,s,"textDecoration"))&&XT(t,r),(r=Lt(e,n,i,s,"textCombine",u))&&(t.textCombineUpright=r),Lt(e,n,i,s,"ruby",u)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}function XT(e,t){t=g(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(di)||e.textDecoration.push(di);break;case"noUnderline":e.textDecoration.includes(di)&&Nn(e.textDecoration,di);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Nn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Nn(e.textDecoration,"overline")}}function Lt(e,t,n,i,r,o){return o=o===void 0?!0:o,(t=zh(e,t,i,r))?t:o?Ql(e,n,i,r):null}function Ql(e,t,n,i){if(!t)return null;var r=$n(t,ec,i);return r||WT(e,t,n,i)}function zh(e,t,n,i){var r=$n(t,ec,i);return r||WT(e,t,n,i)}function WT(e,t,n,i){t=Zl(t,"style",n,"");for(var r=null,o=0;o<t.length;o++){var s=ci(t[o],"urn:ebu:tt:style",i);s||(s=$n(t[o],ec,i)),s||(s=zh(e,t[o],n,i)),s&&(r=s)}return r}function Zl(e,t,n,i,r){var o=[];if(!e||n.length<1)return o;var s=e;for(e=null;!e&&!(e=r?ci(s,r,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=g(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=g(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.attributes["xml:id"]==r){o.push(s);break}}return o}function nk(e,t,n,i){return e=zT(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function zT(e,t){var n=Yh(e.attributes.begin,t),i=Yh(e.attributes.end,t);return e=Yh(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function Yh(e,t){var n=null;if(YT.test(e)){e=YT.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+i*60+n*3600}else if(qT.test(e))n=qh(qT,e);else if(JT.test(e))n=qh(JT,e);else if($T.test(e))e=$T.exec(e),n=Number(e[1])/t.frameRate;else if(QT.test(e))e=QT.exec(e),n=Number(e[1])/t.g;else if(ZT.test(e))n=qh(ZT,e);else if(e)throw new M(2,2,2001,"Could not parse cue time range in TTML");return n}function qh(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function ik(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}K("shaka.text.TtmlTextParser",on),on.prototype.parseMedia=on.prototype.parseMedia,on.prototype.setManifestType=on.prototype.setManifestType,on.prototype.setSequenceMode=on.prototype.setSequenceMode,on.prototype.parseInit=on.prototype.parseInit;function rk(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Jh=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,ok=/^(\d{1,4}(?:\.\d+)?|100)%$/,Bo=/^(\d+px|\d+em|\d*\.?\d+c)$/,$h=/^(\d+)px (\d+)px$/,YT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,qT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,JT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,$T=/^(\d*(?:\.\d*)?)f$/,QT=/^(\d*(?:\.\d*)?)t$/,ZT=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),sk=new Map().set("left",yr).set("center","center").set("right","end").set("start",yr).set("end","end"),uk=new Map().set("left","line-left").set("center","center").set("right","line-right"),gu=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ec=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ex=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];wt("application/ttml+xml",function(){return new on});function pt(){this.g=new on}pt.prototype.parseInit=function(e){var t=!1;if(new Oe().box("moov",fe).box("trak",fe).box("mdia",fe).box("minf",fe).box("stbl",fe).S("stsd",yi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new M(2,2,2007)},pt.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},pt.prototype.setManifestType=function(e){this.g.setManifestType(e)},pt.prototype.parseMedia=function(e,t,n){var i=[],r=null,o=[],s=new Map,u=[];if(new Oe().box("moof",fe).box("traf",fe).S("tfhd",function(S){r=ua(S.reader,S.flags).Vd}).S("trun",function(S){S=ca(S.reader,S.version,S.flags),S=g(S.kh);for(var x=S.next();!x.done;x=S.next())u.push(x.value.sampleSize||r||0)}).S("subs",function(S){for(var x=S.reader,A=x.U(),I=-1,R=0;R<A;R++){var E=x.U();I+=E,E=x.Ca();for(var w=[],k=0;k<E;k++)S.version==1?w.push(x.U()):w.push(x.Ca()),x.Y(),x.Y(),x.U();s.set(I,w)}}).box("mdat",no(function(S){o.push(S)},!1)).parse(e,!1),o.length==0)throw new M(2,2,2007);for(var a=rt.apply(It,V(o)),l=0,c=0;c<u.length;c++){var f=se(a,l,u[c]);l+=u[c];var h=s.get(c);if(h&&h.length){f=se(f,0,h[0]);for(var p=[],m=h[0],v=1;v<h.length;v++){var y=se(e,m,h[v]);y=ku(y),p.push("data:image/png;base64,"+y),m+=h[v]}i=i.concat(this.g.parseMedia(f,t,n,p))}else i=i.concat(this.g.parseMedia(f,t,n,[]))}return i},K("shaka.text.Mp4TtmlParser",pt),pt.prototype.parseMedia=pt.prototype.parseMedia,pt.prototype.setManifestType=pt.prototype.setManifestType,pt.prototype.setSequenceMode=pt.prototype.setSequenceMode,pt.prototype.parseInit=pt.prototype.parseInit,wt('application/mp4; codecs="stpp"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.im1i"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.im1t"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.im2i"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.im2t"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.etd1"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new pt}),wt('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new pt}),wt('application/mp4; codecs="stpp.TTML.im1t"',function(){return new pt});function Ft(){this.g="UNKNOWN"}Ft.prototype.parseInit=function(){},Ft.prototype.setSequenceMode=function(){},Ft.prototype.setManifestType=function(e){this.g=e},Ft.prototype.parseMedia=function(e,t){e=ze(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new M(2,2,2e3);if(e=t.vttOffset,this.g=="HLS"&&n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new M(2,2,2e3);if(e=Xr(e[1]),e==null)throw new M(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;r>=95443.7176888889;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}for(t=[],i=g(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new Gr(r);var o=new pr;gr(r),Kr(r);for(var s=gr(r);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),Kr(r),s=gr(r)}t.push(o)}for(i=new Map,Gp(i),r=[],n=g(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=g(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=i.get(s))||(l=new Ve(0,0,""));for(var c=!1,f=0;f<a.length;f++){var h=/^\s*([^:]+):\s*(.*)/.exec(a[f]);if(h){var p=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=p;break;case"color":c=!0,l.color=p;break;case"font-family":c=!0,l.fontFamily=p;break;case"font-size":c=!0,l.fontSize=p;break;case"font-weight":(parseInt(p,10)>=700||p=="bold")&&(c=!0,l.fontWeight=Wr);break;case"font-style":switch(p){case"normal":c=!0,l.fontStyle=Nc;break;case"italic":c=!0,l.fontStyle=zr;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,l.textCombineUpright=p;break;case"text-shadow":c=!0,l.textShadow=p;break;case"white-space":c=!0,l.wrapLine=p!="noWrap"}}}c&&i.set(s,l)}}if(l=o,c=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")o=null;else if(o=null,l[0].includes("-->")||(o=l[0],l.splice(0,1)),u=new Gr(l[0]),s=Zo(u),f=_i(u,/[ \t]+--\x3e[ \t]+/g),a=Zo(u),s==null||f==null||a==null)xe("Failed to parse VTT time code. Cue skipped:",o,l),o=null;else{for(s+=c,a+=c,s<0&&(s=0),c=l.slice(1).join(`
`).trim(),i.has("global")?(l=i.get("global").clone(),l.startTime=s,l.endTime=a,l.payload=c):l=new Ve(s,a,c),Kr(u),s=gr(u);s;)tx(l,s,t),Kr(u),s=gr(u);Bu(l,i),o!=null&&(l.id=o),o=l}o&&r.push(o)}return r};function tx(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=ei:e.textAlign=Lc[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":bu)):(i=/^region:(.*)$/.exec(t))?(t=ak(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Pc[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=rs,e.line=Number(n[1]),n[2]&&(e.lineAlign=Pc[n[2].toUpperCase()]))}function ak(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}K("shaka.text.VttTextParser",Ft),Ft.prototype.parseMedia=Ft.prototype.parseMedia,Ft.prototype.setManifestType=Ft.prototype.setManifestType,Ft.prototype.setSequenceMode=Ft.prototype.setSequenceMode,Ft.prototype.parseInit=Ft.prototype.parseInit,wt("text/vtt",function(){return new Ft}),wt('text/vtt; codecs="vtt"',function(){return new Ft}),wt('text/vtt; codecs="wvtt"',function(){return new Ft});function fn(){this.g=null}fn.prototype.parseInit=function(e){var t=this,n=!1;if(new Oe().box("moov",fe).box("trak",fe).box("mdia",fe).S("mdhd",function(i){i=la(i.reader,i.version),t.g=i.timescale}).box("minf",fe).box("stbl",fe).S("stsd",yi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new M(2,2,2008);if(!n)throw new M(2,2,2008)},fn.prototype.setSequenceMode=function(){},fn.prototype.setManifestType=function(){},fn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new M(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new Oe().box("moof",fe).box("traf",fe).S("tfdt",function(A){s=!0,n=aa(A.reader,A.version).baseMediaDecodeTime}).S("tfhd",function(A){l=ua(A.reader,A.flags).Ud}).S("trun",function(A){u=!0,i=ca(A.reader,A.version,A.flags).kh}).box("mdat",no(function(A){a=!0,r=A},!1)).parse(e,!1),!a&&!s&&!u)throw new M(2,2,2008);e=n;for(var c=new He(r,0),f=g(i),h=f.next();!h.done;h=f.next()){h=h.value;var p=h.mh||l,m=h.Ff?n+h.Ff:e;e=m+(p||0);var v=0;do{var y=c.U();v+=y;var S=c.U(),x=null;ra(S)=="vttc"?y>8&&(x=c.Ub(y-8,!1)):c.skip(y-8),p&&x&&(y=lk(x,t.periodStart+m/this.g,t.periodStart+e/this.g),o.push(y))}while(h.sampleSize&&v<h.sampleSize)}return o.filter(Hi)};function lk(e,t,n){var i,r,o;return new Oe().box("payl",no(function(s){i=ze(s)},!1)).box("iden",no(function(s){r=ze(s)},!1)).box("sttg",no(function(s){o=ze(s)},!1)).parse(e),i?ck(i,r,o,t,n):null}function ck(e,t,n,i,r){if(e=new Ve(i,r,e),Bu(e),t&&(e.id=t),n)for(t=new Gr(n),n=gr(t);n;)tx(e,n,[]),Kr(t),n=gr(t);return e}K("shaka.text.Mp4VttParser",fn),fn.prototype.parseMedia=fn.prototype.parseMedia,fn.prototype.setManifestType=fn.prototype.setManifestType,fn.prototype.setSequenceMode=fn.prototype.setSequenceMode,fn.prototype.parseInit=fn.prototype.parseInit,wt('application/mp4; codecs="wvtt"',function(){return new fn});function dn(){}dn.prototype.parseInit=function(){},dn.prototype.setSequenceMode=function(){},dn.prototype.setManifestType=function(){},dn.prototype.parseMedia=function(e){var t=ze(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=g(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new Gr(n[0]),r=Zo(i),o=_i(i,/,/g);if(i=Zo(i),r==null||o==null||i==null)throw new M(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Ve(r,i,n.slice(1).join(`
`).trim()))}return e},K("shaka.text.SbvTextParser",dn),dn.prototype.parseMedia=dn.prototype.parseMedia,dn.prototype.setManifestType=dn.prototype.setManifestType,dn.prototype.setSequenceMode=dn.prototype.setSequenceMode,dn.prototype.parseInit=dn.prototype.parseInit,wt("text/x-subviewer",function(){return new dn});function hn(){this.g=new Ft}hn.prototype.parseInit=function(){},hn.prototype.setSequenceMode=function(){},hn.prototype.setManifestType=function(){},hn.prototype.parseMedia=function(e,t,n){var i=ze(e);if(e=`WEBVTT

`,i!=""){i=i.replace(/\r+/g,""),i=i.trim(),i=g(i.split(`

`));for(var r=i.next();!r.done;r=i.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),e+=r.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`}return e=se(jn(e)),this.g.parseMedia(e,t,n,[])},K("shaka.text.SrtTextParser",hn),hn.prototype.parseMedia=hn.prototype.parseMedia,hn.prototype.setManifestType=hn.prototype.setManifestType,hn.prototype.setSequenceMode=hn.prototype.setSequenceMode,hn.prototype.parseInit=hn.prototype.parseInit,wt("text/srt",function(){return new hn});function pn(){}pn.prototype.parseInit=function(){},pn.prototype.setSequenceMode=function(){},pn.prototype.setManifestType=function(){},pn.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=ze(e).split(/\r?\n\s*\r?\n/),e=g(r),r=e.next();!r.done;r=e.next()){var o=r.value;r=o,(o=dk.exec(o))&&(i=o[1],r=o[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=g(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(o=rx.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")r=o.split(tc);else if(e=="Style"){e=o.split(tc),o={};for(var s=0;s<r.length&&s<e.length;s++)o[r[s]]=e[s];i.push(o)}}for(r=[],t=null,n=g(n.split(/\r?\n/)),o=n.next(),e={};!o.done;e={Yi:void 0},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=rx.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(tc);else if(o=="Dialogue"){s=s.split(tc),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=ix(o.Start);var a=ix(o.End);s=new Ve(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Yi=o.Style,(e=i.find((function(l){return function(c){return c.Name==l.Yi}})(e)))&&fk(s,e),r.push(s)}}return r};function fk(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=nx(n))&&(e.color=n),(n=t.BackColour)&&(n=nx(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Wr),t.Italic&&(e.fontStyle=zr),t.Underline&&e.textDecoration.push(di),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ns,e.textAlign="start";break;case 2:e.displayAlign=ns,e.textAlign=ei;break;case 3:e.displayAlign=ns,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ei;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ei;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function nx(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function ix(e){return e=hk.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}K("shaka.text.SsaTextParser",pn),pn.prototype.parseMedia=pn.prototype.parseMedia,pn.prototype.setManifestType=pn.prototype.setManifestType,pn.prototype.setSequenceMode=pn.prototype.setSequenceMode,pn.prototype.parseInit=pn.prototype.parseInit;var dk=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,rx=/^\s*([^:]+):\s*(.*)/,tc=/\s*,\s*/,hk=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;wt("text/x-ssa",function(){return new pn});function ox(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,e>0)?{be:n,ra:e}:null}function sx(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,codec:"mp4a.40."+r}}function ux(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function pk(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function gn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=gn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Pt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Kt(t)||"mp4a.40.2")+'"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=se(e),o=uo(r),s=o.length;s<r.length&&!ux(r,s);s++);if(e=n.endTime*1e3,o=Cr(o),o.length&&n&&(o=o.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=sx(r,s),!o)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<r.length;){var a=ox(r,s);if(!a)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));var l=a.be+a.ra;s+l<=r.length&&u.push({data:r.subarray(s+a.be,s+l),size:a.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),s+=l}return r=o.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:o.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:r,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:u},stream:t},i=new ro([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oo(i),this.g.set(n,t)),n=this.i!==t,i=ys(i),this.i=t,this.h++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.AacTransmuxer",gn),gn.prototype.transmux=gn.prototype.transmux,gn.prototype.getOriginalMimeType=gn.prototype.getOriginalMimeType,gn.prototype.convertCodecs=gn.prototype.convertCodecs,gn.prototype.isSupported=gn.prototype.isSupported,gn.prototype.destroy=gn.prototype.destroy,hi("audio/aac",function(){return new gn("audio/aac")},Fi);function ax(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(n>=3)return null;var i=e[t+4]&63,r=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][i*3+n]*2;if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,Ga:e,ra:r}}function gk(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;i>0;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(n<16)return!0}return!1}function Mn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Mn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Pt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?he().qe()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=se(e);for(var r=uo(e),o=r.length;o<e.length&&!gk(e,o);o++);var s=n.endTime*1e3;r=Cr(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=ax(e,o);if(!l)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Ga,a.push({data:e.subarray(o,o+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),o+=l.ra}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:r,duration:i,Cb:[],Ga:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:a},stream:t},i=new ro([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oo(i),this.g.set(n,t)),n=this.i!==t,i=ys(i),this.i=t,this.h++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.Ac3Transmuxer",Mn),Mn.prototype.transmux=Mn.prototype.transmux,Mn.prototype.getOriginalMimeType=Mn.prototype.getOriginalMimeType,Mn.prototype.convertCodecs=Mn.prototype.convertCodecs,Mn.prototype.isSupported=Mn.prototype.isSupported,Mn.prototype.destroy=Mn.prototype.destroy,hi("audio/ac3",function(){return new Mn("audio/ac3")},Fi);function lx(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Si(e.subarray(t+2));tn(n,2),tn(n,3);var i=ye(n,11)+1<<1,r=ye(n,2);if(r==3){r=ye(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=ye(n,2);var s=ye(n,3),u=ye(n,1);return n=ye(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/([1,2,3,6][o]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,Ga:e,ra:i})}function kn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=kn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Pt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=se(e);for(var r=uo(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=n.endTime*1e3;r=Cr(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=lx(e,o);if(!l)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Ga,a.push({data:e.subarray(o,o+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),o+=l.ra}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:r,duration:i,Cb:[],Ga:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:a},stream:t},i=new ro([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oo(i),this.g.set(n,t)),n=this.i!==t,i=ys(i),this.i=t,this.h++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.Ec3Transmuxer",kn),kn.prototype.transmux=kn.prototype.transmux,kn.prototype.getOriginalMimeType=kn.prototype.getOriginalMimeType,kn.prototype.convertCodecs=kn.prototype.convertCodecs,kn.prototype.isSupported=kn.prototype.isSupported,kn.prototype.destroy=kn.prototype.destroy,hi("audio/ec3",function(){return new kn("audio/ec3")},Fi);function mk(e){if(!e.length)return null;var t=e.find(function(v){return v.type==7});if(e=e.find(function(v){return v.type==8}),!t||!e)return null;var n=new Si(t.data),i=De(n);if(De(n),De(n),At(n),yk.includes(i)&&(i=W(n),i===3&&tn(n,1),At(n),At(n),tn(n,1),J(n))){i=i!==3?8:12;for(var r=0;r<i;r++)J(n)&&(r<6?pa(n,16):pa(n,64))}if(At(n),i=W(n),i===0)W(n);else if(i===1)for(tn(n,1),At(n),At(n),i=W(n),r=0;r<i;r++)At(n);At(n),tn(n,1);var o=W(n),s=W(n),u=ye(n,1);u===0&&tn(n,1),tn(n,1);var a=0,l=0,c=0,f=0;if(J(n)&&(a=W(n),l=W(n),c=W(n),f=W(n)),r=i=1,J(n)&&J(n)){var h=De(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],m=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];h>0&&h<=16?(i=p[h-1],r=m[h-1]):h===255&&(i=ye(n,16),r=ye(n,16))}return n=(2-u)*(s+1)*16-c*2-f*2,o=(o+1)*16-a*2-l*2,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,V(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,V(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Sa:e,Za:i,$a:r}}function vk(e){function t(m){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:m.pts,dts:m.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var m=[],v=g(r.nalus),y=v.next();!y.done;y=v.next()){y=y.value;var S=y.fullData.byteLength,x=new Uint8Array(4);x[0]=S>>24&255,x[1]=S>>16&255,x[2]=S>>8&255,x[3]=S&255,m.push(x),m.push(y.fullData)}r.data=rt.apply(It,V(m)),i.push(r)}}for(var i=[],r=null,o=!1,s=0;s<e.length;s++){var u=e[s],a=u.nalus,l=!1;r&&a.length&&!o&&(n(),t(u)),a=g(u.nalus);for(var c=a.next();!c.done;c=a.next()){c=c.value;var f=!1;switch(c.type){case 1:var h=!1;f=!0;var p=c.data;l&&p.length>4&&(p=yw(new Si(p)),p===2||p===4||p===7||p===9)&&(h=!0),h&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=h;break;case 5:f=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=!0;break;case 6:f=!0;break;case 7:l=f=!0;break;case 8:f=!0;break;case 9:o=f=!0,r&&r.frame&&(n(),r=null),r||t(u);break;case 12:f=!0;break;default:f=!1}r&&f&&r.nalus.push(c)}}return n(),i}var yk=[100,110,122,244,44,83,86,118,128,138,139,134];function Tk(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=xk(t.fullData);e=Sk(n.fullData);var o=wk(i.fullData);return t=Ak(t.fullData,n.fullData,i.fullData,{Wg:r.Wg,Dh:r.Dh,Hg:e.Hg,Ig:e.Ig,Bg:e.Bg,Gg:e.Gg,Cg:e.Cg,Dg:e.Dg,Eg:e.Eg,Fg:e.Fg,vg:e.vg,wg:e.wg,xg:e.xg,yg:e.yg,zg:e.zg,Ag:e.Ag,rf:e.rf,jg:e.jg,ig:e.ig,hg:e.hg,Yg:o.Yg,ug:e.ug,sg:e.sg}),{height:e.height,width:e.width,Sa:t,Za:e.Qk,$a:e.Pk}}function xk(e){var t=new Si(e,!0);return De(t),De(t),ye(t,4),ye(t,2),ye(t,6),e=ye(t,3),t=J(t),{Wg:e+1,Dh:t}}function Sk(e){e=new Si(e,!0),De(e),De(e);var t=0,n=0,i=0,r=0;ye(e,4);var o=ye(e,3);J(e);for(var s=ye(e,2),u=ye(e,1),a=ye(e,5),l=De(e),c=De(e),f=De(e),h=De(e),p=De(e),m=De(e),v=De(e),y=De(e),S=De(e),x=De(e),A=De(e),I=[],R=[],E=0;E<o;E++)I.push(J(e)),R.push(J(e));if(o>0)for(E=o;E<8;E++)ye(e,2);for(E=0;E<o;E++)I[E]&&ye(e,88),R[E]&&De(e);W(e),I=W(e),I==3&&ye(e,1),R=W(e),E=W(e),J(e)&&(t+=W(e),n+=W(e),i+=W(e),r+=W(e));var w=W(e),k=W(e),L=W(e);if(J(e))for(var D=0;D<=o;D++)W(e),W(e),W(e);else W(e),W(e),W(e);if(W(e),W(e),W(e),W(e),W(e),W(e),J(e)&&J(e))for(D=0;D<4;D++)for(var P=0;P<(D===3?2:6);P++)if(J(e)){var N=Math.min(64,1<<4+(D<<1));D>1&&ao(e);for(var _=0;_<N;_++)ao(e)}else W(e);for(J(e),J(e),J(e)&&(De(e),W(e),W(e),J(e)),D=W(e),N=P=0;N<D;N++)if(_=!1,N!==0&&(_=J(e)),_){N===D&&W(e),J(e),W(e);for(var B=_=0;B<=P;B++){var j=J(e),O=!1;j||(O=J(e)),(j||O)&&_++}P=_}else{for(B=W(e),_=W(e),P=B+_,j=0;j<B;j++)W(e),J(e);for(B=0;B<_;B++)W(e),J(e)}if(J(e))for(D=W(e),P=0;P<D;P++){for(N=0;N<L+4;N++)ye(e,1);ye(e,1)}if(D=L=1,P=!0,N=1,B=_=0,J(e),J(e),J(e)){if(J(e)){j=De(e),O=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var F=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];j>0&&j<=16?(L=O[j-1],D=F[j-1]):j===255&&(L=ye(e,16),D=ye(e,16))}if(J(e)&&J(e),J(e)&&(ye(e,3),J(e),J(e)&&(De(e),De(e),De(e))),J(e)&&(W(e),W(e)),J(e),J(e),J(e),(j=J(e))&&(At(e),At(e),At(e),At(e)),J(e)&&(N=ye(e,32),_=ye(e,32),J(e)&&W(e),J(e))){F=!1,j=J(e),O=J(e),(j||O)&&((F=J(e))&&(De(e),ye(e,5),J(e),ye(e,5)),ye(e,4),ye(e,4),F&&ye(e,4),ye(e,5),ye(e,5),ye(e,5));for(var H=0;H<=o;H++){P=J(e);var Q=!0,z=1;P||(Q=J(e));var Ae=!1;if(Q?W(e):Ae=J(e),Ae||(z=W(e)+1),j){for(Q=0;Q<z;Q++)W(e),W(e),F&&(W(e),W(e));J(e)}if(O){for(Q=0;Q<z;Q++)W(e),W(e),F&&(W(e),W(e));J(e)}}}J(e)&&(J(e),J(e),J(e),B=W(e),W(e),W(e),W(e),W(e))}return{Bg:A,Hg:s,Ig:u,Gg:a,Cg:l,Dg:c,Eg:f,Fg:h,vg:p,wg:m,xg:v,yg:y,zg:S,Ag:x,rf:B,jg:I,ig:w,hg:k,width:R-(t+n)*(I===1||I===2?2:1),height:E-(i+r)*(I===1?2:1),Qk:L,Pk:D,ug:_/N,sg:P}}function wk(e){var t=new Si(e,!0);De(t),De(t),W(t),W(t),J(t),J(t),ye(t,3),J(t),J(t),W(t),W(t),ao(t),J(t),J(t),J(t)&&W(t),ao(t),ao(t),J(t),J(t),J(t),J(t),e=J(t),t=J(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Yg:n}}function Ak(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(r[0]=1,r[1]=(i.Hg&3)<<6|(i.Ig?1:0)<<5|i.Gg&31,r[2]=i.Cg,r[3]=i.Dg,r[4]=i.Eg,r[5]=i.Fg,r[6]=i.vg,r[7]=i.wg,r[8]=i.xg,r[9]=i.yg,r[10]=i.zg,r[11]=i.Ag,r[12]=i.Bg,r[13]=240|(i.rf&3840)>>8,r[14]=i.rf&255,r[15]=252|i.Yg&3,r[16]=252|i.jg&3,r[17]=248|i.ig&7,r[18]=248|i.hg&7,r[19]=0,r[20]=parseInt(i.ug,10),r[21]=((i.sg?1:0)&3)<<6|(i.Wg&7)<<3|(i.Dh?1:0)<<2|3,r[22]=3,e=[e,t,n],t=23,n=e.length-1,i=0;i<e.length;i+=1)r.set(new Uint8Array([32+i|(i===n?128:0),0,1]),t),t+=3,r.set(new Uint8Array([e[i].byteLength>>8,e[i].byteLength&255]),t),t+=2,r.set(e[i],t),t+=e[i].byteLength;return r}function nc(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=Ek[(n===3?3-i:i===3?3:4)*14+r-1]*1e3,o=Ik[(n===3?0:n===2?1:2)*3+o],n=Ck[n][i];var u=Mk[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&l<=87&&i===2&&r>=224e3&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,ra:a,Ok:n*8*u}}return null}function cx(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function fx(e,t){if(t+1<e.length&&cx(e,t)){var n=nc(e,t),i=4;return n&&n.ra&&(i=n.ra),t+=i,t===e.length||t+1<e.length&&cx(e,t)}return!1}var Ek=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ik=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ck=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Mk=[0,1,1,4];function Dn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Dn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Pt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=se(e),o=uo(r).length;o<r.length&&!fx(r,o);o++);var s;for(e=[];o<r.length;){var u=nc(r,o);if(!u)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));s||(s=u),o+u.ra<=r.length&&e.push({data:r.subarray(o,o+u.ra),size:u.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),o+=u.ra}return s?(r=s.Ok*9e4/s.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:s.sampleRate,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:r,zb:e},stream:t},i=new ro([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oo(i),this.g.set(n,t)),n=this.i!==t,i=ys(i),this.i=t,this.h++,Promise.resolve({data:i,init:n?t:null})):Promise.reject(new M(2,3,3018,n?n.P()[0]:null))},K("shaka.transmuxer.Mp3Transmuxer",Dn),Dn.prototype.transmux=Dn.prototype.transmux,Dn.prototype.getOriginalMimeType=Dn.prototype.getOriginalMimeType,Dn.prototype.convertCodecs=Dn.prototype.convertCodecs,Dn.prototype.isSupported=Dn.prototype.isSupported,Dn.prototype.destroy=Dn.prototype.destroy,hi("audio/mpeg",function(){return new Dn("audio/mpeg")},Fi);function Rn(e){this.h=e,this.g=null}d=Rn.prototype,d.destroy=function(){},d.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Kt(e).split(","),n=Gt("audio",t);return t=Gt("video",t),!n||t||ct(n)!="mp3"?!1:Pt(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Fe,this.g.Jf(n.i),e=se(e),e=this.g.parse(e),e.Wd().audio!="mp3"||r!="audio")return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),r=g(e.ub()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=nc(e,t))?(t+i.ra<=e.length&&(n=rt(n,e.subarray(t,t+i.ra))),t+=i.ra):t++;return Promise.resolve(n)},K("shaka.transmuxer.MpegTsTransmuxer",Rn),Rn.prototype.transmux=Rn.prototype.transmux,Rn.prototype.getOriginalMimeType=Rn.prototype.getOriginalMimeType,Rn.prototype.convertCodecs=Rn.prototype.convertCodecs,Rn.prototype.isSupported=Rn.prototype.isSupported,Rn.prototype.destroy=Rn.prototype.destroy,hi("video/mp2t",function(){return new Rn("video/mp2t")},Oc);function mn(e){this.h=e,(this.g=Yd.get("ISOBoxer")())&&kk(this)}function kk(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;i<16;i++)this.usertype[i]!==Dk[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}d=mn.prototype,d.destroy=function(){},d.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Pt(t)||Pt(e))},d.convertCodecs=function(e,t){return t.replace("mss/","")},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n){if(!n)return Promise.resolve(se(e));if(!t.mssPrivateData)return Promise.reject(new M(2,3,3020,n?n.P()[0]:null));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=r.fetch("sepiff");if(f!==null){f.type="senc",f.usertype=void 0;var h=r.fetch("saio");if(h===null){h=this.g.createFullBox("saio",u),h.version=0,h.flags=0,h.entry_count=1,h.offset=[0];var p=this.g.createFullBox("saiz",u);if(p.version=0,p.flags=0,p.sample_count=f.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],f.flags&2)for(i=0;i<f.sample_count;i+=1)p.sample_info_size[i]=10+6*f.entry[i].NumberOfEntries;else p.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var m=r.fetch("moof");a.data_offset=m.getLength()+8;var v=r.fetch("saio");v!==null&&(v.offset[0]=dx(m,"traf")+dx(u,"senc")+16);var y=se(r.write());return Promise.resolve(y)}catch(S){return S instanceof M?Promise.reject(S):Promise.reject(new M(2,3,3022,n?n.P()[0]:null))}};function dx(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}K("shaka.transmuxer.MssTransmuxer",mn),mn.prototype.transmux=mn.prototype.transmux,mn.prototype.getOriginalMimeType=mn.prototype.getOriginalMimeType,mn.prototype.convertCodecs=mn.prototype.convertCodecs,mn.prototype.isSupported=mn.prototype.isSupported,mn.prototype.destroy=mn.prototype.destroy;var Dk=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);hi("mss/audio/mp4",function(){return new mn("mss/audio/mp4")},Fi),hi("mss/video/mp4",function(){return new mn("mss/video/mp4")},Fi);function Ln(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}d=Ln.prototype,d.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},d.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Kt(n).split(",");return n=Gt("audio",i),i=Gt("video",i),n&&(n=ct(n),!Rk.includes(n))||i&&(n=ct(i),!Lk.includes(n))?!1:t?Pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Pt(t)||Pt(e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Kt(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return fs(n,"audio/mp4")}).map(ug).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},d.getOriginalMimeType=function(){return this.m},d.transmux=function(e,t,n,i,r){var o=se(e);if(r=="audio"&&!lo(o)){for(var s=uo(o),u=s.length;u<o.length;u++)if(fx(o,u))return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));for(u=s.length;u<o.length;u++)if(ux(o,u))return this.i||(this.i=new gn("audio/aac")),this.i.transmux(e,t,n,i,r);return Promise.reject(new M(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new Fe,this.h.Jf(n.i);var a=this.h.parse(o),l=[],c=a.Wd();try{var f=null;if(r=="video"){switch(c.video){case"avc":var h=[],p=null,m=a.ud(),v=vk(m);if(!v.length)throw new M(2,3,3023,n?n.P()[0]:null);for(var y=0;y<v.length;y++){var S=v[y];p==null&&(p=S.dts);var x=void 0;x=y+1<v.length?(v[y+1].dts||0)-(S.dts||0):v.length>1?(S.dts||0)-(v[y-1].dts||0):(n.endTime-n.startTime)*9e4,h.push({data:S.data,size:S.data.byteLength,duration:x,sb:Math.round((S.pts||0)-(S.dts||0)),flags:{xb:0,mb:0,jb:0,hb:0,ib:S.isKeyframe?2:1,yb:S.isKeyframe?0:1}})}for(var A=[],I=g(m),R=I.next();!R.done;R=I.next())A.push.apply(A,V(R.value.nalus));var E=mk(A);if(!E||p==null)throw new M(2,3,3018,n?n.P()[0]:null);t.height=E.height,t.width=E.width,f={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:E.Sa,Za:E.Za,$a:E.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:p,zb:h},stream:t};break;case"hvc":var w=[],k=null,L=[],D=a.ud();if(!D.length)throw new M(2,3,3023,n?n.P()[0]:null);for(var P=0;P<D.length;P++){var N=D[P],_=N.nalus;L.push.apply(L,V(_));for(var B=!1,j=[],O=!1,F=g(_),H=F.next();!H.done;H=F.next()){var Q=H.value;switch(Q.type){case 1:case 0:var z=O=!0;break;case 19:case 20:case 21:B=z=O=!0;break;case 32:z=!0;break;case 33:z=!0;break;case 34:z=!0;break;case 35:O=z=!0;break;case 39:case 40:z=!0;break;default:z=!1}if(O&&z){var Ae=Q.fullData.byteLength,ce=new Uint8Array(4);ce[0]=Ae>>24&255,ce[1]=Ae>>16&255,ce[2]=Ae>>8&255,ce[3]=Ae&255,j.push(ce),j.push(Q.fullData)}}var Le=j.length?{data:rt.apply(It,V(j)),isKeyframe:B}:null;if(Le){k==null&&N.dts!=null&&(k=N.dts);var me=void 0;me=P+1<D.length?(D[P+1].dts||0)-(N.dts||0):D.length>1?(N.dts||0)-(D[P-1].dts||0):(n.endTime-n.startTime)*9e4,w.push({data:Le.data,size:Le.data.byteLength,duration:me,sb:Math.round((N.pts||0)-(N.dts||0)),flags:{xb:0,mb:0,jb:0,hb:0,ib:Le.isKeyframe?2:1,yb:Le.isKeyframe?0:1}})}}var le=Tk(L);if(!le||k==null)throw new M(2,3,3018,n?n.P()[0]:null);t.height=le.height,t.width=le.width,f={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:le.Sa,Za:le.Za,$a:le.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:k,zb:w},stream:t}}f&&(l.push(f),f=null)}if(r=="audio"){switch(c.audio){case"aac":for(var Be=[],Ie,Te=null,ve=null,we=null,at=g(a.ub()),lt=at.next();!lt.done;lt=at.next()){var vn=lt.value,Jt=vn.data;if(Jt){var Ot=0;if(ve==-1&&we)Jt=rt(we,vn.data),ve=null;else if(ve!=null&&we){Ot=Math.max(0,ve);var mu=rt(we,Jt.subarray(0,Ot));Be.push({data:mu,size:mu.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),ve=we=null}if(Ie=sx(Jt,Ot),!Ie)throw new M(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=Ie.sampleRate,t.channelsCount=Ie.channelCount,Te==null&&vn.pts!==null&&(Te=vn.pts);Ot<Jt.length;){var Pn=ox(Jt,Ot);if(!Pn){we=Jt.subarray(Ot,Jt.length),ve=-1;break}var rr=Pn.be+Pn.ra;ve=Math.max(0,Ot+rr-Jt.length),ve!=0?we=Jt.subarray(Ot+Pn.be,Ot+rr):Ot+rr<=Jt.length&&Be.push({data:Jt.subarray(Ot+Pn.be,Ot+rr),size:Pn.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Ot+=rr}}}if(!Ie||Te==null){Te=n.startTime*9e4;var bo=Gt("audio",t.codecs.split(","));if(!bo||!t.channelsCount||!t.audioSamplingRate)throw new M(2,3,3018,n?n.P()[0]:null);Ie={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:bo};var Fo=pk(bo,t.channelsCount);if(!Fo)throw new M(2,3,3018,n?n.P()[0]:null);for(var Yn=Te+(n.endTime-n.startTime)*9e4,px=Te;px<Yn;)Be.push({data:Fo,size:Fo.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),px+=1024/Ie.sampleRate*9e4}var gx=Ie.sampleRate,Pk=Te/9e4*gx;f={id:t.id,type:"audio",codecs:Ie.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:gx,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Pk,zb:Be},stream:t};break;case"ac3":for(var mx=[],ic=0,Qh=new Uint8Array([]),rc=null,vx=g(a.ub()),Zh=vx.next();!Zh.done;Zh=vx.next()){var ep=Zh.value,tp=ep.data;rc==null&&ep.pts!==null&&(rc=ep.pts);for(var Vo=0;Vo<tp.length;){var or=ax(tp,Vo);or?(t.audioSamplingRate=or.sampleRate,t.channelsCount=or.channelCount,ic=or.sampleRate,Qh=or.Ga,mx.push({data:tp.subarray(Vo,Vo+or.ra),size:or.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Vo+=or.ra):Vo++}}if(ic==0||Qh.byteLength==0||rc==null)throw new M(2,3,3018,n?n.P()[0]:null);var Nk=rc/9e4*ic;f={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:ic,duration:i,Cb:[],Ga:Qh,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Nk,zb:mx},stream:t};break;case"ec3":for(var yx=[],oc=0,np=new Uint8Array([]),sc=null,Tx=g(a.ub()),ip=Tx.next();!ip.done;ip=Tx.next()){var rp=ip.value,op=rp.data;sc==null&&rp.pts!==null&&(sc=rp.pts);for(var Ho=0;Ho<op.length;){var sr=lx(op,Ho);sr?(t.audioSamplingRate=sr.sampleRate,t.channelsCount=sr.channelCount,oc=sr.sampleRate,np=sr.Ga,yx.push({data:op.subarray(Ho,Ho+sr.ra),size:sr.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Ho+=sr.ra):Ho++}}if(oc==0||np.byteLength==0||sc==null)throw new M(2,3,3018,n?n.P()[0]:null);var jk=sc/9e4*oc;f={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:oc,duration:i,Cb:[],Ga:np,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:jk,zb:yx},stream:t};break;case"mp3":for(var xx=[],uc,ac=null,Sx=g(a.ub()),sp=Sx.next();!sp.done;sp=Sx.next()){var up=sp.value,vu=up.data;if(vu){ac==null&&up.pts!==null&&(ac=up.pts);for(var Or=0;Or<vu.length;){var Go=nc(vu,Or);Go?(uc||(uc=Go),Or+Go.ra<=vu.length&&xx.push({data:vu.subarray(Or,Or+Go.ra),size:Go.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Or+=Go.ra):Or++}}}if(!uc||ac==null)throw new M(2,3,3018,n?n.P()[0]:null);var wx=uc.sampleRate,Ok=ac/9e4*wx;f={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:wx,duration:i,Cb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ok,zb:xx},stream:t};break;case"opus":var Ax=[],lc=null,ri=a.H;if(!ri)throw new M(2,3,3018,n?n.P()[0]:null);var Vt=[];switch(ri.qj){case 1:case 2:Vt=[0];break;case 0:Vt=[255,1,1,0,1];break;case 128:Vt=[255,2,0,0,1];break;case 3:Vt=[1,2,1,0,2,1];break;case 4:Vt=[1,2,2,0,1,2,3];break;case 5:Vt=[1,3,2,0,4,1,2,3];break;case 6:Vt=[1,4,2,0,4,1,2,3,5];break;case 7:Vt=[1,4,2,0,4,1,2,3,5,6];break;case 8:Vt=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Vt=[1,1,2,0,1];break;case 131:Vt=[1,1,3,0,1,2];break;case 132:Vt=[1,1,4,0,1,2,3];break;case 133:Vt=[1,1,5,0,1,2,3,4];break;case 134:Vt=[1,1,6,0,1,2,3,4,5];break;case 135:Vt=[1,1,7,0,1,2,3,4,5,6];break;case 136:Vt=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ex=new Uint8Array([0,ri.channelCount,0,0,ri.sampleRate>>>24&255,ri.sampleRate>>>17&255,ri.sampleRate>>>8&255,ri.sampleRate>>>0&255,0,0].concat(V(Vt))),Ix=ri.sampleRate,Cx=g(a.ub()),ap=Cx.next();!ap.done;ap=Cx.next()){var lp=ap.value,Ko=lp.data;lc==null&&lp.pts!==null&&(lc=lp.pts);for(var yu=0;yu<Ko.length;){for(var Uk=(Ko[yu+1]&16)!==0,_k=(Ko[yu+1]&8)!==0,Li=yu+2,cc=0;Ko[Li]===255;)cc+=255,Li+=1;cc+=Ko[Li],Li+=1,Li+=Uk?2:0,Li+=_k?2:0;var Mx=Ko.slice(Li,Li+cc);Ax.push({data:Mx,size:Mx.byteLength,duration:960,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),yu=Li+cc}}if(Ex.byteLength==0||lc==null)throw new M(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=ri.sampleRate,t.channelsCount=ri.channelCount;var Bk=lc/9e4*Ix;f={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ix,duration:i,Cb:[],Ga:Ex,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Bk,zb:Ax},stream:t}}f&&(l.push(f),f=null)}}catch(fp){return fp&&fp.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(fp)}if(!l.length)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));var kx=new ro(l),cp=t.id+"_"+n.i;if(this.j.has(cp))var Tu=this.j.get(cp);else Tu=oo(kx),this.j.set(cp,Tu);var bk=this.l!==Tu,Fk=ys(kx);return this.l=Tu,this.g++,Promise.resolve({data:Fk,init:bk?Tu:null})},K("shaka.transmuxer.TsTransmuxer",Ln),Ln.prototype.transmux=Ln.prototype.transmux,Ln.prototype.getOriginalMimeType=Ln.prototype.getOriginalMimeType,Ln.prototype.convertCodecs=Ln.prototype.convertCodecs,Ln.prototype.isSupported=Ln.prototype.isSupported,Ln.prototype.destroy=Ln.prototype.destroy;var Rk=["aac","ac-3","ec-3","mp3","opus"],Lk=["avc","hevc"];hi("video/mp2t",function(){return new Ln("video/mp2t")},Uc);function hx(){}Qe(hx,Wt),K("shaka.util.FairPlayUtils",hx)}).call(ur,Wo,Wo,void 0);for(var Pi in ur.shaka)Xo[Pi]=ur.shaka[Pi]})()})(dp)),dp}var Rx=Kk();const Xk=Hk(Rx),Jk=Gk({__proto__:null,default:Xk},[Rx]);export{Jk as s};
