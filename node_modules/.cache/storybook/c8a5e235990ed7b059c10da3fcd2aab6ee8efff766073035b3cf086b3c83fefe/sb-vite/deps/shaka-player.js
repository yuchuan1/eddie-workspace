import {
  __commonJS
} from "./chunk-7D4SUZUM.js";

// node_modules/.pnpm/shaka-player@4.16.8/node_modules/shaka-player/dist/shaka-player.compiled.js
var require_shaka_player_compiled = __commonJS({
  "node_modules/.pnpm/shaka-player@4.16.8/node_modules/shaka-player/dist/shaka-player.compiled.js"(exports) {
    (function() {
      var innerGlobal = typeof window != "undefined" ? window : global;
      var exportTo = {};
      (function(window2, global2, module2) {
        var p, aa = typeof Object.create == "function" ? Object.create : function(a) {
          function b() {
          }
          b.prototype = a;
          return new b();
        }, ba = typeof Object.defineProperties == "function" ? Object.defineProperty : function(a, b, c) {
          if (a == Array.prototype || a == Object.prototype) return a;
          a[b] = c.value;
          return a;
        };
        function ca(a) {
          a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window2 && window2, "object" == typeof self && self, "object" == typeof global2 && global2];
          for (var b = 0; b < a.length; ++b) {
            var c = a[b];
            if (c && c.Math == Math) return c;
          }
          throw Error("Cannot find global object");
        }
        var da = ca(this);
        function ea(a, b) {
          if (b) a: {
            var c = da;
            a = a.split(".");
            for (var d = 0; d < a.length - 1; d++) {
              var e = a[d];
              if (!(e in c)) break a;
              c = c[e];
            }
            a = a[a.length - 1];
            d = c[a];
            b = b(d);
            b != d && b != null && ba(c, a, { configurable: true, writable: true, value: b });
          }
        }
        var fa;
        if (typeof Object.setPrototypeOf == "function") fa = Object.setPrototypeOf;
        else {
          var ha;
          a: {
            var ia = { a: true }, ja = {};
            try {
              ja.__proto__ = ia;
              ha = ja.a;
              break a;
            } catch (a) {
            }
            ha = false;
          }
          fa = ha ? function(a, b) {
            a.__proto__ = b;
            if (a.__proto__ !== b) throw new TypeError(a + " is not extensible");
            return a;
          } : null;
        }
        var ka = fa;
        function la(a, b) {
          a.prototype = aa(b.prototype);
          a.prototype.constructor = a;
          if (ka) ka(a, b);
          else for (var c in b) if (c != "prototype") if (Object.defineProperties) {
            var d = Object.getOwnPropertyDescriptor(b, c);
            d && Object.defineProperty(a, c, d);
          } else a[c] = b[c];
          a.Em = b.prototype;
        }
        function na(a) {
          var b = 0;
          return function() {
            return b < a.length ? { done: false, value: a[b++] } : { done: true };
          };
        }
        function t(a) {
          var b = typeof Symbol != "undefined" && Symbol.iterator && a[Symbol.iterator];
          if (b) return b.call(a);
          if (typeof a.length == "number") return { next: na(a) };
          throw Error(String(a) + " is not an iterable or ArrayLike");
        }
        function x(a) {
          if (!(a instanceof Array)) {
            a = t(a);
            for (var b, c = []; !(b = a.next()).done; ) c.push(b.value);
            a = c;
          }
          return a;
        }
        function oa() {
          this.o = false;
          this.l = null;
          this.h = void 0;
          this.g = 1;
          this.j = this.m = 0;
          this.B = this.i = null;
        }
        function pa(a) {
          if (a.o) throw new TypeError("Generator is already running");
          a.o = true;
        }
        oa.prototype.u = function(a) {
          this.h = a;
        };
        function qa(a, b) {
          a.i = { Xh: b, mi: true };
          a.g = a.m || a.j;
        }
        oa.prototype.return = function(a) {
          this.i = { return: a };
          this.g = this.j;
        };
        function F(a, b, c) {
          a.g = c;
          return { value: b };
        }
        oa.prototype.A = function(a) {
          this.g = a;
        };
        function G(a) {
          a.g = 0;
        }
        function ra(a, b, c) {
          a.m = b;
          c != void 0 && (a.j = c);
        }
        function sa(a, b) {
          a.m = 0;
          a.j = b || 0;
        }
        function ta(a, b, c) {
          a.g = b;
          a.m = c || 0;
        }
        function Aa(a, b) {
          a.m = b || 0;
          b = a.i.Xh;
          a.i = null;
          return b;
        }
        function Ba(a) {
          a.B = [a.i];
          a.m = 0;
          a.j = 0;
        }
        function Da(a, b) {
          var c = a.B.splice(0)[0];
          (c = a.i = a.i || c) ? c.mi ? a.g = a.m || a.j : c.A != void 0 && a.j < c.A ? (a.g = c.A, a.i = null) : a.g = a.j : a.g = b;
        }
        function Fa(a) {
          this.g = new oa();
          this.h = a;
        }
        function Ha(a, b) {
          pa(a.g);
          var c = a.g.l;
          if (c) return Ja(a, "return" in c ? c["return"] : function(d) {
            return { value: d, done: true };
          }, b, a.g.return);
          a.g.return(b);
          return Ka(a);
        }
        function Ja(a, b, c, d) {
          try {
            var e = b.call(a.g.l, c);
            if (!(e instanceof Object)) throw new TypeError("Iterator result " + e + " is not an object");
            if (!e.done) return a.g.o = false, e;
            var f = e.value;
          } catch (g) {
            return a.g.l = null, qa(a.g, g), Ka(a);
          }
          a.g.l = null;
          d.call(a.g, f);
          return Ka(a);
        }
        function Ka(a) {
          for (; a.g.g; ) try {
            var b = a.h(a.g);
            if (b) return a.g.o = false, { value: b.value, done: false };
          } catch (c) {
            a.g.h = void 0, qa(a.g, c);
          }
          a.g.o = false;
          if (a.g.i) {
            b = a.g.i;
            a.g.i = null;
            if (b.mi) throw b.Xh;
            return { value: b.return, done: true };
          }
          return { value: void 0, done: true };
        }
        function La(a) {
          this.next = function(b) {
            pa(a.g);
            a.g.l ? b = Ja(a, a.g.l.next, b, a.g.u) : (a.g.u(b), b = Ka(a));
            return b;
          };
          this.throw = function(b) {
            pa(a.g);
            a.g.l ? b = Ja(a, a.g.l["throw"], b, a.g.u) : (qa(a.g, b), b = Ka(a));
            return b;
          };
          this.return = function(b) {
            return Ha(a, b);
          };
          this[Symbol.iterator] = function() {
            return this;
          };
        }
        function Ma(a) {
          function b(d) {
            return a.next(d);
          }
          function c(d) {
            return a.throw(d);
          }
          return new Promise(function(d, e) {
            function f(g) {
              g.done ? d(g.value) : Promise.resolve(g.value).then(b, c).then(f, e);
            }
            f(a.next());
          });
        }
        function Q(a) {
          return Ma(new La(new Fa(a)));
        }
        function Na() {
          for (var a = Number(this), b = [], c = a; c < arguments.length; c++) b[c - a] = arguments[c];
          return b;
        }
        ea("Symbol", function(a) {
          function b(f) {
            if (this instanceof b) throw new TypeError("Symbol is not a constructor");
            return new c(d + (f || "") + "_" + e++, f);
          }
          function c(f, g) {
            this.g = f;
            ba(this, "description", { configurable: true, writable: true, value: g });
          }
          if (a) return a;
          c.prototype.toString = function() {
            return this.g;
          };
          var d = "jscomp_symbol_" + (Math.random() * 1e9 >>> 0) + "_", e = 0;
          return b;
        });
        ea("Symbol.iterator", function(a) {
          if (a) return a;
          a = Symbol("Symbol.iterator");
          ba(Array.prototype, a, { configurable: true, writable: true, value: function() {
            return Oa(na(this));
          } });
          return a;
        });
        function Oa(a) {
          a = { next: a };
          a[Symbol.iterator] = function() {
            return this;
          };
          return a;
        }
        ea("Promise", function(a) {
          function b(g) {
            this.h = 0;
            this.i = void 0;
            this.g = [];
            this.o = false;
            var h = this.j();
            try {
              g(h.resolve, h.reject);
            } catch (k2) {
              h.reject(k2);
            }
          }
          function c() {
            this.g = null;
          }
          function d(g) {
            return g instanceof b ? g : new b(function(h) {
              h(g);
            });
          }
          if (a) return a;
          c.prototype.h = function(g) {
            if (this.g == null) {
              this.g = [];
              var h = this;
              this.i(function() {
                h.l();
              });
            }
            this.g.push(g);
          };
          var e = da.setTimeout;
          c.prototype.i = function(g) {
            e(g, 0);
          };
          c.prototype.l = function() {
            for (; this.g && this.g.length; ) {
              var g = this.g;
              this.g = [];
              for (var h = 0; h < g.length; ++h) {
                var k2 = g[h];
                g[h] = null;
                try {
                  k2();
                } catch (l) {
                  this.j(l);
                }
              }
            }
            this.g = null;
          };
          c.prototype.j = function(g) {
            this.i(function() {
              throw g;
            });
          };
          b.prototype.j = function() {
            function g(l) {
              return function(m) {
                k2 || (k2 = true, l.call(h, m));
              };
            }
            var h = this, k2 = false;
            return { resolve: g(this.G), reject: g(this.l) };
          };
          b.prototype.G = function(g) {
            if (g === this) this.l(new TypeError("A Promise cannot resolve to itself"));
            else if (g instanceof b) this.I(g);
            else {
              a: switch (typeof g) {
                case "object":
                  var h = g != null;
                  break a;
                case "function":
                  h = true;
                  break a;
                default:
                  h = false;
              }
              h ? this.F(g) : this.m(g);
            }
          };
          b.prototype.F = function(g) {
            var h = void 0;
            try {
              h = g.then;
            } catch (k2) {
              this.l(k2);
              return;
            }
            typeof h == "function" ? this.J(h, g) : this.m(g);
          };
          b.prototype.l = function(g) {
            this.u(2, g);
          };
          b.prototype.m = function(g) {
            this.u(1, g);
          };
          b.prototype.u = function(g, h) {
            if (this.h != 0) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.h);
            this.h = g;
            this.i = h;
            this.h === 2 && this.H();
            this.B();
          };
          b.prototype.H = function() {
            var g = this;
            e(function() {
              if (g.C()) {
                var h = da.console;
                typeof h !== "undefined" && h.error(g.i);
              }
            }, 1);
          };
          b.prototype.C = function() {
            if (this.o) return false;
            var g = da.CustomEvent, h = da.Event, k2 = da.dispatchEvent;
            if (typeof k2 === "undefined") return true;
            typeof g === "function" ? g = new g("unhandledrejection", { cancelable: true }) : typeof h === "function" ? g = new h("unhandledrejection", { cancelable: true }) : (g = da.document.createEvent("CustomEvent"), g.initCustomEvent("unhandledrejection", false, true, g));
            g.promise = this;
            g.reason = this.i;
            return k2(g);
          };
          b.prototype.B = function() {
            if (this.g != null) {
              for (var g = 0; g < this.g.length; ++g) f.h(this.g[g]);
              this.g = null;
            }
          };
          var f = new c();
          b.prototype.I = function(g) {
            var h = this.j();
            g.Qe(h.resolve, h.reject);
          };
          b.prototype.J = function(g, h) {
            var k2 = this.j();
            try {
              g.call(h, k2.resolve, k2.reject);
            } catch (l) {
              k2.reject(l);
            }
          };
          b.prototype.then = function(g, h) {
            function k2(q, r) {
              return typeof q == "function" ? function(u) {
                try {
                  l(q(u));
                } catch (v) {
                  m(v);
                }
              } : r;
            }
            var l, m, n = new b(function(q, r) {
              l = q;
              m = r;
            });
            this.Qe(k2(g, l), k2(h, m));
            return n;
          };
          b.prototype.catch = function(g) {
            return this.then(void 0, g);
          };
          b.prototype.Qe = function(g, h) {
            function k2() {
              switch (l.h) {
                case 1:
                  g(l.i);
                  break;
                case 2:
                  h(l.i);
                  break;
                default:
                  throw Error("Unexpected state: " + l.h);
              }
            }
            var l = this;
            this.g == null ? f.h(k2) : this.g.push(k2);
            this.o = true;
          };
          b.resolve = d;
          b.reject = function(g) {
            return new b(function(h, k2) {
              k2(g);
            });
          };
          b.race = function(g) {
            return new b(function(h, k2) {
              for (var l = t(g), m = l.next(); !m.done; m = l.next()) d(m.value).Qe(h, k2);
            });
          };
          b.all = function(g) {
            var h = t(g), k2 = h.next();
            return k2.done ? d([]) : new b(function(l, m) {
              function n(u) {
                return function(v) {
                  q[u] = v;
                  r--;
                  r == 0 && l(q);
                };
              }
              var q = [], r = 0;
              do
                q.push(void 0), r++, d(k2.value).Qe(n(q.length - 1), m), k2 = h.next();
              while (!k2.done);
            });
          };
          return b;
        });
        function Pa(a, b) {
          return Object.prototype.hasOwnProperty.call(a, b);
        }
        ea("WeakMap", function(a) {
          function b(k2) {
            this.g = (h += Math.random() + 1).toString();
            if (k2) {
              k2 = t(k2);
              for (var l; !(l = k2.next()).done; ) l = l.value, this.set(l[0], l[1]);
            }
          }
          function c() {
          }
          function d(k2) {
            var l = typeof k2;
            return l === "object" && k2 !== null || l === "function";
          }
          function e(k2) {
            if (!Pa(k2, g)) {
              var l = new c();
              ba(k2, g, { value: l });
            }
          }
          function f(k2) {
            var l = Object[k2];
            l && (Object[k2] = function(m) {
              if (m instanceof c) return m;
              Object.isExtensible(m) && e(m);
              return l(m);
            });
          }
          if ((function() {
            if (!a || !Object.seal) return false;
            try {
              var k2 = Object.seal({}), l = Object.seal({}), m = new a([[k2, 2], [l, 3]]);
              if (m.get(k2) != 2 || m.get(l) != 3) return false;
              m.delete(k2);
              m.set(l, 4);
              return !m.has(k2) && m.get(l) == 4;
            } catch (n) {
              return false;
            }
          })()) return a;
          var g = "$jscomp_hidden_" + Math.random();
          f("freeze");
          f("preventExtensions");
          f("seal");
          var h = 0;
          b.prototype.set = function(k2, l) {
            if (!d(k2)) throw Error("Invalid WeakMap key");
            e(k2);
            if (!Pa(k2, g)) throw Error("WeakMap key fail: " + k2);
            k2[g][this.g] = l;
            return this;
          };
          b.prototype.get = function(k2) {
            return d(k2) && Pa(k2, g) ? k2[g][this.g] : void 0;
          };
          b.prototype.has = function(k2) {
            return d(k2) && Pa(
              k2,
              g
            ) && Pa(k2[g], this.g);
          };
          b.prototype.delete = function(k2) {
            return d(k2) && Pa(k2, g) && Pa(k2[g], this.g) ? delete k2[g][this.g] : false;
          };
          return b;
        });
        ea("Map", function(a) {
          function b() {
            var h = {};
            return h.xc = h.next = h.head = h;
          }
          function c(h, k2) {
            var l = h[1];
            return Oa(function() {
              if (l) {
                for (; l.head != h[1]; ) l = l.xc;
                for (; l.next != l.head; ) return l = l.next, { done: false, value: k2(l) };
                l = null;
              }
              return { done: true, value: void 0 };
            });
          }
          function d(h, k2) {
            var l = k2 && typeof k2;
            l == "object" || l == "function" ? f.has(k2) ? l = f.get(k2) : (l = "" + ++g, f.set(k2, l)) : l = "p_" + k2;
            var m = h[0][l];
            if (m && Pa(h[0], l)) for (h = 0; h < m.length; h++) {
              var n = m[h];
              if (k2 !== k2 && n.key !== n.key || k2 === n.key) return { id: l, list: m, index: h, entry: n };
            }
            return {
              id: l,
              list: m,
              index: -1,
              entry: void 0
            };
          }
          function e(h) {
            this[0] = {};
            this[1] = b();
            this.size = 0;
            if (h) {
              h = t(h);
              for (var k2; !(k2 = h.next()).done; ) k2 = k2.value, this.set(k2[0], k2[1]);
            }
          }
          if ((function() {
            if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return false;
            try {
              var h = Object.seal({ x: 4 }), k2 = new a(t([[h, "s"]]));
              if (k2.get(h) != "s" || k2.size != 1 || k2.get({ x: 4 }) || k2.set({ x: 4 }, "t") != k2 || k2.size != 2) return false;
              var l = k2.entries(), m = l.next();
              if (m.done || m.value[0] != h || m.value[1] != "s") return false;
              m = l.next();
              return m.done || m.value[0].x != 4 || m.value[1] != "t" || !l.next().done ? false : true;
            } catch (n) {
              return false;
            }
          })()) return a;
          var f = /* @__PURE__ */ new WeakMap();
          e.prototype.set = function(h, k2) {
            h = h === 0 ? 0 : h;
            var l = d(this, h);
            l.list || (l.list = this[0][l.id] = []);
            l.entry ? l.entry.value = k2 : (l.entry = { next: this[1], xc: this[1].xc, head: this[1], key: h, value: k2 }, l.list.push(l.entry), this[1].xc.next = l.entry, this[1].xc = l.entry, this.size++);
            return this;
          };
          e.prototype.delete = function(h) {
            h = d(this, h);
            return h.entry && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this[0][h.id], h.entry.xc.next = h.entry.next, h.entry.next.xc = h.entry.xc, h.entry.head = null, this.size--, true) : false;
          };
          e.prototype.clear = function() {
            this[0] = {};
            this[1] = this[1].xc = b();
            this.size = 0;
          };
          e.prototype.has = function(h) {
            return !!d(this, h).entry;
          };
          e.prototype.get = function(h) {
            return (h = d(this, h).entry) && h.value;
          };
          e.prototype.entries = function() {
            return c(this, function(h) {
              return [h.key, h.value];
            });
          };
          e.prototype.keys = function() {
            return c(this, function(h) {
              return h.key;
            });
          };
          e.prototype.values = function() {
            return c(this, function(h) {
              return h.value;
            });
          };
          e.prototype.forEach = function(h, k2) {
            for (var l = this.entries(), m; !(m = l.next()).done; ) m = m.value, h.call(k2, m[1], m[0], this);
          };
          e.prototype[Symbol.iterator] = e.prototype.entries;
          var g = 0;
          return e;
        });
        ea("Set", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new Map();
            if (c) {
              c = t(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
            this.size = this.g.size;
          }
          if ((function() {
            if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return false;
            try {
              var c = Object.seal({ x: 4 }), d = new a(t([c]));
              if (!d.has(c) || d.size != 1 || d.add(c) != d || d.size != 1 || d.add({ x: 4 }) != d || d.size != 2) return false;
              var e = d.entries(), f = e.next();
              if (f.done || f.value[0] != c || f.value[1] != c) return false;
              f = e.next();
              return f.done || f.value[0] == c || f.value[0].x != 4 || f.value[1] != f.value[0] ? false : e.next().done;
            } catch (g) {
              return false;
            }
          })()) return a;
          b.prototype.add = function(c) {
            c = c === 0 ? 0 : c;
            this.g.set(c, c);
            this.size = this.g.size;
            return this;
          };
          b.prototype.delete = function(c) {
            c = this.g.delete(c);
            this.size = this.g.size;
            return c;
          };
          b.prototype.clear = function() {
            this.g.clear();
            this.size = 0;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.entries = function() {
            return this.g.entries();
          };
          b.prototype.values = function() {
            return this.g.values();
          };
          b.prototype.keys = b.prototype.values;
          b.prototype[Symbol.iterator] = b.prototype.values;
          b.prototype.forEach = function(c, d) {
            var e = this;
            this.g.forEach(function(f) {
              return c.call(d, f, f, e);
            });
          };
          return b;
        });
        function Qa(a, b, c) {
          a instanceof String && (a = String(a));
          for (var d = a.length, e = 0; e < d; e++) {
            var f = a[e];
            if (b.call(c, f, e, a)) return { ii: e, v: f };
          }
          return { ii: -1, v: void 0 };
        }
        ea("Array.prototype.findIndex", function(a) {
          return a ? a : function(b, c) {
            return Qa(this, b, c).ii;
          };
        });
        function Ra(a, b) {
          a instanceof String && (a += "");
          var c = 0, d = false, e = { next: function() {
            if (!d && c < a.length) {
              var f = c++;
              return { value: b(f, a[f]), done: false };
            }
            d = true;
            return { done: true, value: void 0 };
          } };
          e[Symbol.iterator] = function() {
            return e;
          };
          return e;
        }
        ea("Array.prototype.values", function(a) {
          return a ? a : function() {
            return Ra(this, function(b, c) {
              return c;
            });
          };
        });
        ea("Array.from", function(a) {
          return a ? a : function(b, c, d) {
            c = c != null ? c : function(h) {
              return h;
            };
            var e = [], f = typeof Symbol != "undefined" && Symbol.iterator && b[Symbol.iterator];
            if (typeof f == "function") {
              b = f.call(b);
              for (var g = 0; !(f = b.next()).done; ) e.push(c.call(d, f.value, g++));
            } else for (f = b.length, g = 0; g < f; g++) e.push(c.call(d, b[g], g));
            return e;
          };
        });
        ea("Array.prototype.keys", function(a) {
          return a ? a : function() {
            return Ra(this, function(b) {
              return b;
            });
          };
        });
        ea("Object.is", function(a) {
          return a ? a : function(b, c) {
            return b === c ? b !== 0 || 1 / b === 1 / c : b !== b && c !== c;
          };
        });
        ea("Array.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            var d = this;
            d instanceof String && (d = String(d));
            var e = d.length;
            c = c || 0;
            for (c < 0 && (c = Math.max(c + e, 0)); c < e; c++) {
              var f = d[c];
              if (f === b || Object.is(f, b)) return true;
            }
            return false;
          };
        });
        function Sa(a, b, c) {
          if (a == null) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
          if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
          return a + "";
        }
        ea("String.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            return Sa(this, b, "includes").indexOf(b, c || 0) !== -1;
          };
        });
        ea("String.fromCodePoint", function(a) {
          return a ? a : function(b) {
            for (var c = "", d = 0; d < arguments.length; d++) {
              var e = Number(arguments[d]);
              if (e < 0 || e > 1114111 || e !== Math.floor(e)) throw new RangeError("invalid_code_point " + e);
              e <= 65535 ? c += String.fromCharCode(e) : (e -= 65536, c += String.fromCharCode(e >>> 10 & 1023 | 55296), c += String.fromCharCode(e & 1023 | 56320));
            }
            return c;
          };
        });
        ea("WeakSet", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new WeakMap();
            if (c) {
              c = t(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
          }
          if ((function() {
            if (!a || !Object.seal) return false;
            try {
              var c = Object.seal({}), d = Object.seal({}), e = new a([c]);
              if (!e.has(c) || e.has(d)) return false;
              e.delete(c);
              e.add(d);
              return !e.has(c) && e.has(d);
            } catch (f) {
              return false;
            }
          })()) return a;
          b.prototype.add = function(c) {
            this.g.set(c, true);
            return this;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.delete = function(c) {
            return this.g.delete(c);
          };
          return b;
        });
        ea("Array.prototype.find", function(a) {
          return a ? a : function(b, c) {
            return Qa(this, b, c).v;
          };
        });
        ea("String.prototype.startsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Sa(this, b, "startsWith"), e = d.length, f = b.length;
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var g = 0; g < f && c < e; ) if (d[c++] != b[g++]) return false;
            return g >= f;
          };
        });
        ea("Object.entries", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Pa(b, d) && c.push([d, b[d]]);
            return c;
          };
        });
        var Ta = typeof Object.assign == "function" ? Object.assign : function(a, b) {
          if (a == null) throw new TypeError("No nullish arg");
          a = Object(a);
          for (var c = 1; c < arguments.length; c++) {
            var d = arguments[c];
            if (d) for (var e in d) Pa(d, e) && (a[e] = d[e]);
          }
          return a;
        };
        ea("Object.assign", function(a) {
          return a || Ta;
        });
        ea("Promise.prototype.finally", function(a) {
          return a ? a : function(b) {
            return this.then(function(c) {
              return Promise.resolve(b()).then(function() {
                return c;
              });
            }, function(c) {
              return Promise.resolve(b()).then(function() {
                throw c;
              });
            });
          };
        });
        ea("Array.prototype.entries", function(a) {
          return a ? a : function() {
            return Ra(this, function(b, c) {
              return [b, c];
            });
          };
        });
        ea("Number.isNaN", function(a) {
          return a ? a : function(b) {
            return typeof b === "number" && isNaN(b);
          };
        });
        ea("String.prototype.repeat", function(a) {
          return a ? a : function(b) {
            var c = Sa(this, null, "repeat");
            if (b < 0 || b > 1342177279) throw new RangeError("Invalid count value");
            b |= 0;
            for (var d = ""; b; ) if (b & 1 && (d += c), b >>>= 1) c += c;
            return d;
          };
        });
        ea("Number.EPSILON", function() {
          return 2220446049250313e-31;
        });
        ea("Number.MAX_SAFE_INTEGER", function() {
          return 9007199254740991;
        });
        ea("Number.isFinite", function(a) {
          return a ? a : function(b) {
            return typeof b !== "number" ? false : !isNaN(b) && b !== Infinity && b !== -Infinity;
          };
        });
        ea("Object.values", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Pa(b, d) && c.push(b[d]);
            return c;
          };
        });
        ea("Math.log2", function(a) {
          return a ? a : function(b) {
            return Math.log(b) / Math.LN2;
          };
        });
        ea("String.prototype.endsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Sa(this, b, "endsWith");
            c === void 0 && (c = d.length);
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var e = b.length; e > 0 && c > 0; ) if (d[--c] != b[--e]) return false;
            return e <= 0;
          };
        });
        ea("Math.trunc", function(a) {
          return a ? a : function(b) {
            b = Number(b);
            if (isNaN(b) || b === Infinity || b === -Infinity || b === 0) return b;
            var c = Math.floor(Math.abs(b));
            return b < 0 ? -c : c;
          };
        });
        var Ua = this || self;
        function S(a, b) {
          a = a.split(".");
          var c = Ua;
          a[0] in c || typeof c.execScript == "undefined" || c.execScript("var " + a[0]);
          for (var d; a.length && (d = a.shift()); ) a.length || b === void 0 ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b;
        }
        ;
        function Va(a) {
          this.g = Math.exp(Math.log(0.5) / a);
          this.i = this.h = 0;
        }
        Va.prototype.sample = function(a, b) {
          var c = Math.pow(this.g, a);
          b = b * (1 - c) + c * this.h;
          isNaN(b) || (this.h = b, this.i += a);
        };
        function Wa(a) {
          return a.h / (1 - Math.pow(a.g, a.i));
        }
        ;
        function Xa() {
          this.h = new Va(2);
          this.j = new Va(5);
          this.g = 0;
          this.i = 128e3;
          this.l = 16e3;
        }
        Xa.prototype.configure = function(a) {
          this.i = a.minTotalBytes;
          this.l = a.minBytes;
          this.h.g = Math.exp(Math.log(0.5) / a.fastHalfLife);
          this.j.g = Math.exp(Math.log(0.5) / a.slowHalfLife);
        };
        Xa.prototype.sample = function(a, b) {
          if (!(b < this.l)) {
            var c = 8e3 * b / a;
            a /= 1e3;
            this.g += b;
            this.h.sample(a, c);
            this.j.sample(a, c);
          }
        };
        Xa.prototype.getBandwidthEstimate = function(a) {
          return this.g < this.i ? a : Math.min(Wa(this.h), Wa(this.j));
        };
        function Ya() {
        }
        function Za() {
        }
        function $a() {
        }
        function ab(a) {
          var b = Na.apply(1, arguments);
          bb.has(a) || (bb.add(a), $a.apply(Ya, x(b)));
        }
        function cb() {
        }
        function db() {
        }
        function eb() {
        }
        var bb = /* @__PURE__ */ new Set();
        window2.console && ((/* @__PURE__ */ new Map()).set(1, function() {
          return console.error.apply(console, x(Na.apply(0, arguments)));
        }).set(2, function() {
          return console.warn.apply(console, x(Na.apply(0, arguments)));
        }).set(3, function() {
          return console.info.apply(console, x(Na.apply(0, arguments)));
        }).set(4, function() {
          return console.log.apply(console, x(Na.apply(0, arguments)));
        }).set(5, function() {
          return console.debug.apply(console, x(Na.apply(0, arguments)));
        }).set(6, function() {
          return console.debug.apply(console, x(Na.apply(0, arguments)));
        }), $a = function() {
          return console.warn.apply(console, x(Na.apply(0, arguments)));
        }, Za = function() {
          console.error.apply(console, x(Na.apply(0, arguments)));
        });
        function fb(a, b) {
          return typeof a === "number" && typeof b === "number" && isNaN(a) && isNaN(b) ? true : a === b;
        }
        function gb(a, b) {
          b = a.indexOf(b);
          b > -1 && a.splice(b, 1);
        }
        function hb(a, b, c) {
          c || (c = fb);
          if (a.length != b.length) return false;
          b = b.slice();
          a = t(a);
          for (var d = a.next(), e = {}; !d.done; e = { oi: void 0 }, d = a.next()) {
            e.oi = d.value;
            d = b.findIndex(/* @__PURE__ */ (function(f) {
              return function(g) {
                return c(f.oi, g);
              };
            })(e));
            if (d == -1) return false;
            b[d] = b[b.length - 1];
            b.pop();
          }
          return b.length == 0;
        }
        function ib(a, b, c) {
          if (a === b) return true;
          if (!a || !b) return a == b;
          c || (c = fb);
          if (a.length != b.length) return false;
          for (var d = 0; d < a.length; d++) if (!c(a[d], b[d])) return false;
          return true;
        }
        ;
        function jb() {
          this.g = /* @__PURE__ */ new Map();
        }
        p = jb.prototype;
        p.push = function(a, b) {
          this.g.has(a) ? this.g.get(a).push(b) : this.g.set(a, [b]);
        };
        p.get = function(a) {
          return this.g.has(a) ? this.g.get(a).slice() : null;
        };
        p.remove = function(a, b) {
          if (this.g.has(a)) {
            var c = this.g.get(a).filter(function(d) {
              return d != b;
            });
            this.g.set(a, c);
            c.length || this.g.delete(a);
          }
        };
        p.forEach = function(a) {
          this.g.forEach(function(b, c) {
            a(c, b);
          });
        };
        p.size = function() {
          return this.g.size;
        };
        p.keys = function() {
          return Array.from(this.g.keys());
        };
        function kb() {
          this.g = new jb();
        }
        p = kb.prototype;
        p.release = function() {
          this.Qa();
          this.g = null;
        };
        p.D = function(a, b, c, d) {
          this.g && (a = new lb(a, b, c, d), this.g.push(b, a));
        };
        p.za = function(a, b, c, d) {
          function e(g) {
            f.Ma(a, b, e);
            c(g);
          }
          var f = this;
          this.D(a, b, e, d);
        };
        p.Ma = function(a, b, c) {
          if (this.g) {
            var d = this.g.get(b) || [];
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, e.target != a || c != e.listener && c || (e.Ma(), this.g.remove(b, e));
          }
        };
        p.Qa = function() {
          if (this.g) {
            for (var a = [], b = t(this.g.g.values()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, x(c.value));
            a = t(a);
            for (b = a.next(); !b.done; b = a.next()) b.value.Ma();
            this.g.g.clear();
          }
        };
        S("shaka.util.EventManager", kb);
        kb.prototype.removeAll = kb.prototype.Qa;
        kb.prototype.unlisten = kb.prototype.Ma;
        kb.prototype.listenOnce = kb.prototype.za;
        kb.prototype.listen = kb.prototype.D;
        kb.prototype.release = kb.prototype.release;
        function lb(a, b, c, d) {
          this.target = a;
          this.type = b;
          this.listener = c;
          this.g = mb(a, d);
          this.target.addEventListener(b, c, this.g);
        }
        lb.prototype.Ma = function() {
          this.target.removeEventListener(this.type, this.listener, this.g);
          this.listener = this.target = null;
          this.g = false;
        };
        function mb(a, b) {
          if (b == void 0) return false;
          if (typeof b == "boolean") return b;
          var c = /* @__PURE__ */ new Set(["passive", "capture"]);
          Object.keys(b).filter(function(d) {
            return !c.has(d);
          });
          return nb(a) ? b : b.capture || false;
        }
        function nb(a) {
          var b = ob;
          if (b == void 0) {
            b = false;
            try {
              var c = {}, d = { get: function() {
                b = true;
                return false;
              } };
              Object.defineProperty(c, "passive", d);
              Object.defineProperty(c, "capture", d);
              d = function() {
              };
              a.addEventListener("test", d, c);
              a.removeEventListener("test", d, c);
            } catch (e) {
              b = false;
            }
            ob = b;
          }
          return b || false;
        }
        var ob = void 0;
        S("shaka.config.AutoShowText", { NEVER: 0, ALWAYS: 1, IF_PREFERRED_TEXT_LANGUAGE: 2, IF_SUBTITLES_MAY_BE_NEEDED: 3 });
        function qb(a) {
          this.h = a;
          this.g = void 0;
        }
        qb.prototype.value = function() {
          this.g === void 0 && (this.g = this.h());
          return this.g;
        };
        function rb() {
          return sb.value();
        }
        var tb = null, vb = null, sb = new qb(function() {
          var a = void 0;
          tb && (a = tb());
          !a && vb && (a = vb());
          return a;
        });
        function wb(a, b) {
          this.g = a;
          this.h = b;
        }
        wb.prototype.toString = function() {
          return "v" + this.g + "." + this.h;
        };
        function xb(a, b) {
          var c = new wb(5, 0), d = yb, e = d.g, f = c.h - e.h;
          ((c.g - e.g || f) > 0 ? d.i : d.h)(d.g, c, a, b);
        }
        function zb(a, b, c, d) {
          $a([c, "has been deprecated and will be removed in", b, ". We are currently at version", a, ". Additional information:", d].join(" "));
        }
        function Ab(a, b, c, d) {
          Za([c, "has been deprecated and has been removed in", b, ". We are now at version", a, ". Additional information:", d].join(" "));
        }
        var yb = null;
        var Bb = RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
        function Cb(a) {
          var b;
          a instanceof Cb ? (Db(this, a.ec), this.hd = a.hd, Eb(this, a.Eb), Fb(this, a.Cd), this.Tb = a.Tb, Gb(this, a.g.clone()), this.Rc = a.Rc) : a && (b = String(a).match(Bb)) ? (Db(this, b[1] || "", true), this.hd = Hb(b[2] || ""), Eb(this, b[3] || "", true), Fb(this, b[4]), this.Tb = Hb(b[5] || "", true), Gb(this, b[6] || "", true), this.Rc = Hb(b[7] || "")) : this.g = new Ib(null);
        }
        p = Cb.prototype;
        p.ec = "";
        p.hd = "";
        p.Eb = "";
        p.Cd = null;
        p.Tb = "";
        p.Rc = "";
        p.toString = function() {
          var a = [], b = this.ec;
          b && a.push(Jb(b, Kb, true), ":");
          if (b = this.Eb) {
            a.push("//");
            var c = this.hd;
            c && a.push(Jb(c, Kb, true), "@");
            a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g, "%$1"));
            b = this.Cd;
            b != null && a.push(":", String(b));
          }
          if (b = this.Tb) this.Eb && b.charAt(0) != "/" && a.push("/"), a.push(Jb(b, b.charAt(0) == "/" ? Lb : Mb, true));
          (b = this.g.toString()) && a.push("?", b);
          (b = this.Rc) && a.push("#", Jb(b, Nb));
          return a.join("");
        };
        p.resolve = function(a) {
          var b = this.clone();
          b.ec === "data" && (b = new Cb());
          var c = !!a.ec;
          c ? Db(b, a.ec) : c = !!a.hd;
          c ? b.hd = a.hd : c = !!a.Eb;
          c ? Eb(b, a.Eb) : c = a.Cd != null;
          var d = a.Tb;
          if (c) Fb(b, a.Cd);
          else if (c = !!a.Tb) {
            if (d.charAt(0) != "/") if (this.Eb && !this.Tb) d = "/" + d;
            else {
              var e = b.Tb.lastIndexOf("/");
              e != -1 && (d = b.Tb.substr(0, e + 1) + d);
            }
            if (d == ".." || d == ".") d = "";
            else if (d.indexOf("./") != -1 || d.indexOf("/.") != -1) {
              e = d.lastIndexOf("/", 0) == 0;
              d = d.split("/");
              for (var f = [], g = 0; g < d.length; ) {
                var h = d[g++];
                h == "." ? e && g == d.length && f.push("") : h == ".." ? ((f.length > 1 || f.length == 1 && f[0] != "") && f.pop(), e && g == d.length && f.push("")) : (f.push(h), e = true);
              }
              d = f.join("/");
            }
          }
          c ? b.Tb = d : c = a.g.toString() !== "";
          c ? Gb(b, a.g.clone()) : c = !!a.Rc;
          c && (b.Rc = a.Rc);
          return b;
        };
        p.clone = function() {
          return new Cb(this);
        };
        function Db(a, b, c) {
          a.ec = c ? Hb(b, true) : b;
          a.ec && (a.ec = a.ec.replace(/:$/, ""));
        }
        function Eb(a, b, c) {
          a.Eb = c ? Hb(b, true) : b;
        }
        function Fb(a, b) {
          if (b) {
            b = Number(b);
            if (isNaN(b) || b < 0) throw Error("Bad port number " + b);
            a.Cd = b;
          } else a.Cd = null;
        }
        function Gb(a, b, c) {
          b instanceof Ib ? a.g = b : (c || (b = Jb(b, Ob)), a.g = new Ib(b));
        }
        function Hb(a, b) {
          return a ? b ? decodeURI(a) : decodeURIComponent(a) : "";
        }
        function Jb(a, b, c) {
          return a != null ? (a = encodeURI(a).replace(b, Pb), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), a) : null;
        }
        function Pb(a) {
          a = a.charCodeAt(0);
          return "%" + (a >> 4 & 15).toString(16) + (a & 15).toString(16);
        }
        var Kb = /[#\/\?@]/g, Mb = /[#\?:]/g, Lb = /[#\?]/g, Ob = /[#\?@]/g, Nb = /#/g;
        function Ib(a) {
          this.g = a || null;
        }
        function Qb(a) {
          if (!a.fb && (a.fb = /* @__PURE__ */ new Map(), a.Sd = 0, a.g)) for (var b = a.g.split("&"), c = 0; c < b.length; c++) {
            var d = b[c].indexOf("="), e = null;
            if (d >= 0) {
              var f = b[c].substring(0, d);
              e = b[c].substring(d + 1);
            } else f = b[c];
            f = decodeURIComponent(f);
            e = e || "";
            a.add(f, decodeURIComponent(e));
          }
        }
        p = Ib.prototype;
        p.fb = null;
        p.Sd = null;
        function Rb(a) {
          Qb(a);
          return a.Sd;
        }
        p.add = function(a, b) {
          Qb(this);
          this.g = null;
          var c = this.fb.has(a) ? this.fb.get(a) : null;
          c || this.fb.set(a, c = []);
          c.push(b);
          this.Sd++;
          return this;
        };
        p.set = function(a, b) {
          Qb(this);
          this.g = null;
          this.fb.has(a) ? this.fb.set(a, [b]) : this.add(a, b);
          return this;
        };
        p.get = function(a) {
          Qb(this);
          return this.fb.get(a) || [];
        };
        p.toString = function() {
          if (this.g) return this.g;
          if (!this.fb || !this.fb.size) return "";
          for (var a = [], b = t(this.fb.keys()), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = encodeURIComponent(d);
            d = this.fb.get(d);
            for (var e = 0; e < d.length; e++) {
              var f = c;
              d[e] !== "" && (f += "=" + encodeURIComponent(d[e]));
              a.push(f);
            }
          }
          return this.g = a.join("&");
        };
        p.clone = function() {
          var a = new Ib();
          a.g = this.g;
          if (this.fb) {
            for (var b = /* @__PURE__ */ new Map(), c = t(this.fb), d = c.next(); !d.done; d = c.next()) {
              var e = t(d.value);
              d = e.next().value;
              e = e.next().value;
              b.set(d, e.concat());
            }
            a.fb = b;
            a.Sd = this.Sd;
          }
          return a;
        };
        function Sb() {
        }
        function Tb(a, b) {
          if (!a && !b) return true;
          if (!a || !b || a.byteLength != b.byteLength) return false;
          if ((ArrayBuffer.isView(a) ? a.buffer : a) == (ArrayBuffer.isView(b) ? b.buffer : b) && (a.byteOffset || 0) == (b.byteOffset || 0)) return true;
          var c = Vb(a);
          b = Vb(b);
          for (var d = 0; d < a.byteLength; d++) if (c[d] != b[d]) return false;
          return true;
        }
        function Xb(a) {
          return ArrayBuffer.isView(a) ? a.byteOffset == 0 && a.byteLength == a.buffer.byteLength ? a.buffer : new Uint8Array(a).buffer : a;
        }
        function Vb(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Yb(a, b === void 0 ? 0 : b, c, Uint8Array);
        }
        function Zb(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Yb(a, b === void 0 ? 0 : b, c, Uint16Array);
        }
        function $b(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Yb(a, b === void 0 ? 0 : b, c, DataView);
        }
        function Yb(a, b, c, d) {
          var e = ArrayBuffer.isView(a) ? a.buffer : a, f = 1;
          "BYTES_PER_ELEMENT" in d && (f = d.BYTES_PER_ELEMENT);
          var g = ((a.byteOffset || 0) + a.byteLength) / f;
          a = Math.floor(Math.max(0, Math.min(((a.byteOffset || 0) + b) / f, g)));
          return new d(e, a, Math.floor(Math.min(a + Math.max(c, 0), g)) - a);
        }
        S("shaka.util.BufferUtils", Sb);
        Sb.toDataView = $b;
        Sb.toUint16 = Zb;
        Sb.toUint8 = Vb;
        Sb.toArrayBuffer = Xb;
        Sb.equal = Tb;
        function U(a, b, c) {
          var d = Na.apply(3, arguments);
          this.severity = a;
          this.category = b;
          this.code = c;
          this.data = d;
          this.handled = false;
          this.message = "Shaka Error " + this.code;
          if (ac) try {
            throw Error(this.message || "Shaka Error");
          } catch (e) {
            this.stack = e.stack;
          }
        }
        U.prototype.toString = function() {
          return "shaka.util.Error " + JSON.stringify(this, null, "  ");
        };
        S("shaka.util.Error", U);
        var ac = true;
        U.Severity = { RECOVERABLE: 1, CRITICAL: 2 };
        U.Category = { NETWORK: 1, TEXT: 2, MEDIA: 3, MANIFEST: 4, STREAMING: 5, DRM: 6, PLAYER: 7, CAST: 8, STORAGE: 9, ADS: 10 };
        U.Code = {
          UNSUPPORTED_SCHEME: 1e3,
          BAD_HTTP_STATUS: 1001,
          HTTP_ERROR: 1002,
          TIMEOUT: 1003,
          MALFORMED_DATA_URI: 1004,
          REQUEST_FILTER_ERROR: 1006,
          RESPONSE_FILTER_ERROR: 1007,
          MALFORMED_TEST_URI: 1008,
          UNEXPECTED_TEST_REQUEST: 1009,
          ATTEMPTS_EXHAUSTED: 1010,
          SEGMENT_MISSING: 1011,
          INVALID_TEXT_HEADER: 2e3,
          INVALID_TEXT_CUE: 2001,
          UNABLE_TO_DETECT_ENCODING: 2003,
          BAD_ENCODING: 2004,
          INVALID_XML: 2005,
          INVALID_MP4_TTML: 2007,
          INVALID_MP4_VTT: 2008,
          UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
          INVALID_MP4_CEA: 2010,
          TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
          CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
          TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
          MISSING_TEXT_PLUGIN: 2014,
          UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
          BUFFER_READ_OUT_OF_BOUNDS: 3e3,
          JS_INTEGER_OVERFLOW: 3001,
          EBML_OVERFLOW: 3002,
          EBML_BAD_FLOATING_POINT_SIZE: 3003,
          MP4_SIDX_WRONG_BOX_TYPE: 3004,
          MP4_SIDX_INVALID_TIMESCALE: 3005,
          MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
          WEBM_CUES_ELEMENT_MISSING: 3007,
          WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
          WEBM_SEGMENT_ELEMENT_MISSING: 3009,
          WEBM_INFO_ELEMENT_MISSING: 3010,
          WEBM_DURATION_ELEMENT_MISSING: 3011,
          WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
          WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
          MEDIA_SOURCE_OPERATION_FAILED: 3014,
          MEDIA_SOURCE_OPERATION_THREW: 3015,
          VIDEO_ERROR: 3016,
          QUOTA_EXCEEDED_ERROR: 3017,
          TRANSMUXING_FAILED: 3018,
          CONTENT_TRANSFORMATION_FAILED: 3019,
          MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
          MSS_TRANSMUXING_FAILED: 3022,
          TRANSMUXING_NO_VIDEO_DATA: 3023,
          STREAMING_NOT_ALLOWED: 3024,
          UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
          DASH_INVALID_XML: 4001,
          DASH_NO_SEGMENT_INFO: 4002,
          DASH_EMPTY_ADAPTATION_SET: 4003,
          DASH_EMPTY_PERIOD: 4004,
          DASH_WEBM_MISSING_INIT: 4005,
          DASH_UNSUPPORTED_CONTAINER: 4006,
          DASH_PSSH_BAD_ENCODING: 4007,
          DASH_NO_COMMON_KEY_SYSTEM: 4008,
          DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
          DASH_CONFLICTING_KEY_IDS: 4010,
          RESTRICTIONS_CANNOT_BE_MET: 4012,
          HLS_PLAYLIST_HEADER_MISSING: 4015,
          INVALID_HLS_TAG: 4016,
          HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
          DASH_DUPLICATE_REPRESENTATION_ID: 4018,
          HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
          HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
          HLS_REQUIRED_TAG_MISSING: 4024,
          HLS_COULD_NOT_GUESS_CODECS: 4025,
          HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
          DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
          DASH_XLINK_DEPTH_LIMIT: 4028,
          CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
          CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
          NO_VARIANTS: 4036,
          PERIOD_FLATTENING_FAILED: 4037,
          INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
          HLS_VARIABLE_NOT_FOUND: 4039,
          HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
          HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
          NO_WEB_CRYPTO_API: 4042,
          CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
          MSS_INVALID_XML: 4046,
          MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
          AES_128_INVALID_IV_LENGTH: 4048,
          AES_128_INVALID_KEY_LENGTH: 4049,
          DASH_CONFLICTING_AES_128: 4050,
          DASH_UNSUPPORTED_AES_128: 4051,
          DASH_INVALID_PATCH: 4052,
          HLS_EMPTY_MEDIA_PLAYLIST: 4053,
          DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
          CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4055,
          STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
          NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
          REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
          FAILED_TO_CREATE_CDM: 6002,
          FAILED_TO_ATTACH_TO_VIDEO: 6003,
          INVALID_SERVER_CERTIFICATE: 6004,
          FAILED_TO_CREATE_SESSION: 6005,
          FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
          LICENSE_REQUEST_FAILED: 6007,
          LICENSE_RESPONSE_REJECTED: 6008,
          ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
          NO_LICENSE_SERVER_GIVEN: 6012,
          OFFLINE_SESSION_REMOVED: 6013,
          EXPIRED: 6014,
          SERVER_CERTIFICATE_REQUIRED: 6015,
          INIT_DATA_TRANSFORM_ERROR: 6016,
          SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
          MIN_HDCP_VERSION_NOT_MATCH: 6018,
          ERROR_CHECKING_HDCP_VERSION: 6019,
          MISSING_EME_SUPPORT: 6020,
          LOAD_INTERRUPTED: 7e3,
          OPERATION_ABORTED: 7001,
          NO_VIDEO_ELEMENT: 7002,
          OBJECT_DESTROYED: 7003,
          CONTENT_NOT_LOADED: 7004,
          SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
          PRELOAD_DESTROYED: 7006,
          QUEUE_INDEX_OUT_OF_BOUNDS: 7007,
          CAST_API_UNAVAILABLE: 8e3,
          NO_CAST_RECEIVERS: 8001,
          ALREADY_CASTING: 8002,
          UNEXPECTED_CAST_ERROR: 8003,
          CAST_CANCELED_BY_USER: 8004,
          CAST_CONNECTION_TIMED_OUT: 8005,
          CAST_RECEIVER_APP_UNAVAILABLE: 8006,
          STORAGE_NOT_SUPPORTED: 9e3,
          INDEXED_DB_ERROR: 9001,
          DEPRECATED_OPERATION_ABORTED: 9002,
          REQUESTED_ITEM_NOT_FOUND: 9003,
          MALFORMED_OFFLINE_URI: 9004,
          CANNOT_STORE_LIVE_OFFLINE: 9005,
          NO_INIT_DATA_FOR_OFFLINE: 9007,
          LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
          NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
          KEY_NOT_FOUND: 9012,
          MISSING_STORAGE_CELL: 9013,
          STORAGE_LIMIT_REACHED: 9014,
          DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
          MODIFY_OPERATION_NOT_SUPPORTED: 9016,
          INDEXED_DB_INIT_TIMED_OUT: 9017,
          CS_IMA_SDK_MISSING: 1e4,
          CS_AD_MANAGER_NOT_INITIALIZED: 10001,
          SS_IMA_SDK_MISSING: 10002,
          SS_AD_MANAGER_NOT_INITIALIZED: 10003,
          CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
          MT_AD_MANAGER_NOT_INITIALIZED: 10005,
          INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
          VAST_INVALID_XML: 10007
        };
        function bc() {
        }
        function cc(a) {
          if (!a) return "";
          a = Vb(a);
          a[0] == 239 && a[1] == 187 && a[2] == 191 && (a = a.subarray(3));
          if (window2.TextDecoder && !rb().sh()) return a = new TextDecoder().decode(a), a.includes("") && Za('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'), a;
          for (var b = "", c = 0; c < a.length; ++c) {
            var d = 65533;
            (a[c] & 128) == 0 ? d = a[c] : a.length >= c + 2 && (a[c] & 224) == 192 && (a[c + 1] & 192) == 128 ? (d = (a[c] & 31) << 6 | a[c + 1] & 63, c += 1) : a.length >= c + 3 && (a[c] & 240) == 224 && (a[c + 1] & 192) == 128 && (a[c + 2] & 192) == 128 ? (d = (a[c] & 15) << 12 | (a[c + 1] & 63) << 6 | a[c + 2] & 63, c += 2) : a.length >= c + 4 && (a[c] & 241) == 240 && (a[c + 1] & 192) == 128 && (a[c + 2] & 192) == 128 && (a[c + 3] & 192) == 128 && (d = (a[c] & 7) << 18 | (a[c + 1] & 63) << 12 | (a[c + 2] & 63) << 6 | a[c + 3] & 63, c += 3);
            if (d <= 65535) b += String.fromCharCode(d);
            else {
              d -= 65536;
              var e = d & 1023;
              b += String.fromCharCode(55296 + (d >> 10));
              b += String.fromCharCode(56320 + e);
            }
          }
          return b;
        }
        function dc(a, b, c) {
          if (!a) return "";
          if (!c && a.byteLength % 2 != 0) throw new U(2, 2, 2004);
          c = Math.floor(a.byteLength / 2);
          var d = new Uint16Array(c);
          a = $b(a);
          for (var e = 0; e < c; e++) d[e] = a.getUint16(e * 2, b);
          return ec(d);
        }
        function fc(a) {
          function b(d) {
            return c.byteLength <= d || c[d] >= 9 && c[d] <= 126;
          }
          if (!a) return "";
          var c = Vb(a);
          if (c[0] == 239 && c[1] == 187 && c[2] == 191) return cc(c);
          if (c[0] == 254 && c[1] == 255) return dc(c.subarray(2), false);
          if (c[0] == 255 && c[1] == 254) return dc(c.subarray(2), true);
          if (c[0] == 0 && c[2] == 0) return dc(a, false);
          if (c[1] == 0 && c[3] == 0) return dc(a, true);
          if (b(0) && b(1) && b(2) && b(3)) return cc(a);
          throw new U(2, 2, 2003);
        }
        function hc(a) {
          if (window2.TextEncoder && !rb().sh()) {
            var b = new TextEncoder();
            return Xb(b.encode(a));
          }
          a = encodeURIComponent(a);
          a = unescape(a);
          b = new Uint8Array(a.length);
          for (var c = 0; c < a.length; c++) b[c] = a[c].charCodeAt(0);
          return Xb(b);
        }
        function ic(a, b) {
          for (var c = new ArrayBuffer(a.length * 2), d = new DataView(c), e = 0; e < a.length; ++e) d.setUint16(e * 2, a.charCodeAt(e), b);
          return c;
        }
        function ec(a) {
          return jc.value()(a);
        }
        function kc(a) {
          var b = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&apos;": "'", "&nbsp;": "", "&lrm;": "", "&rlm;": "" }, c = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return e[1] == "#" ? (e = e[2] == "x" || e[2] == "X" ? parseInt(e.substring(3), 16) : parseInt(e.substring(2), 10), e >= 0 && e <= 1114111 ? String.fromCodePoint(e) : "") : b[e] || "'";
          }) : a || "";
        }
        S("shaka.util.StringUtils", bc);
        bc.resetFromCharCode = function() {
          jc.g = void 0;
        };
        bc.toUTF16 = ic;
        bc.toUTF8 = hc;
        bc.fromBytesAutoDetect = fc;
        bc.fromUTF16 = dc;
        bc.fromUTF8 = cc;
        var jc = new qb(function() {
          function a(c) {
            try {
              var d = new Uint8Array(c);
              return String.fromCharCode.apply(null, d).length > 0;
            } catch (e) {
              return false;
            }
          }
          for (var b = { Pc: 65536 }; b.Pc > 0; b = { Pc: b.Pc }, b.Pc /= 2) if (a(b.Pc)) return /* @__PURE__ */ (function(c) {
            return function(d) {
              for (var e = "", f = 0; f < d.length; f += c.Pc) e += String.fromCharCode.apply(null, d.subarray(f, f + c.Pc));
              return e;
            };
          })(b);
          return null;
        });
        function lc() {
        }
        function mc(a) {
          a = ec(Vb(a));
          return btoa(a);
        }
        function nc(a, b) {
          b = b == void 0 ? true : b;
          a = mc(a).replace(/\+/g, "-").replace(/\//g, "_");
          return b ? a : a.replace(/[=]*$/, "");
        }
        function oc(a) {
          a = window2.atob(a.replace(/-/g, "+").replace(/_/g, "/"));
          for (var b = new Uint8Array(a.length), c = 0; c < a.length; ++c) b[c] = a.charCodeAt(c);
          return b;
        }
        function rc(a) {
          for (var b = a.length / 2, c = new Uint8Array(b), d = 0; d < b; d++) c[d] = window2.parseInt(a.substr(d * 2, 2), 16);
          return c;
        }
        function sc(a) {
          var b = Vb(a);
          a = "";
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, c = c.toString(16), c.length == 1 && (c = "0" + c), a += c;
          return a;
        }
        function tc() {
          for (var a = Na.apply(0, arguments), b = 0, c = 0; c < a.length; ++c) b += a[c].byteLength;
          b = new Uint8Array(b);
          for (var d = c = 0; d < a.length; ++d) {
            var e = a[d];
            ArrayBuffer.isView(e) && e.BYTES_PER_ELEMENT === 1 ? b.set(e, c) : b.set(Vb(e), c);
            c += e.byteLength;
          }
          return b;
        }
        S("shaka.util.Uint8ArrayUtils", lc);
        lc.concat = tc;
        lc.toHex = sc;
        lc.fromHex = rc;
        lc.fromBase64 = oc;
        lc.toBase64 = nc;
        lc.toStandardBase64 = mc;
        function uc(a, b, c) {
          c = c === void 0 ? "" : c;
          if (b.length == 0) return a;
          if (a.length == 1 && b.length == 1) {
            var d = new Cb(a[0]);
            b = new Cb(b[0]);
            b = d.resolve(b);
            c && Gb(b, c);
            return [b.toString()];
          }
          b = b.map(function(h) {
            return new Cb(h);
          });
          d = [];
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            e = new Cb(e.value);
            for (var f = t(b), g = f.next(); !g.done; g = f.next()) g = e.resolve(g.value), c && Gb(g, c), d.push(g.toString());
          }
          return d;
        }
        function vc(a, b, c, d) {
          a = { keySystem: a, encryptionScheme: b, licenseServerUri: "", distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", sessionType: "", initData: c || [], keyIds: /* @__PURE__ */ new Set() };
          d && (a.keySystemUris = /* @__PURE__ */ new Set([d]));
          return a;
        }
        function wc(a, b) {
          b = b === void 0 ? "cenc" : b;
          var c = [], d = [], e = [];
          a.forEach(function(g, h) {
            var k2 = h;
            k2.length != 22 && (k2 = nc(rc(h), false));
            var l = g;
            l.length != 22 && (l = nc(rc(g), false));
            g = { kty: "oct", kid: k2, k: l };
            c.push(g);
            d.push(g.kid);
            e.push(h);
          });
          a = JSON.stringify({ keys: c });
          var f = JSON.stringify({ kids: d });
          f = [{ initData: Vb(hc(f)), initDataType: "keyids" }];
          return {
            keySystem: "org.w3.clearkey",
            encryptionScheme: b,
            licenseServerUri: "data:application/json;base64," + window2.btoa(a),
            distinctiveIdentifierRequired: false,
            persistentStateRequired: false,
            audioRobustness: "",
            videoRobustness: "",
            serverCertificate: null,
            serverCertificateUri: "",
            sessionType: "",
            initData: f,
            keyIds: new Set(e)
          };
        }
        function xc(a, b) {
          if (b.length == 1) return b[0];
          a = yc(a, b);
          if (a != null) return a;
          throw new U(2, 4, 4025, b);
        }
        function yc(a, b) {
          var c = zc.get(a);
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.test(f.trim())) return f.trim();
          }
          return a == Ac ? "" : null;
        }
        function Bc(a, b) {
          var c = [];
          a = zc.get(a);
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) f = f.value, d.test(f.trim()) && c.push(f.trim());
          }
          return c;
        }
        var Ac = "text", Cc = { Aa: "video", ka: "audio", Na: Ac, Uf: "image", ll: "application" }, Dc = 1 / 15, zc = (/* @__PURE__ */ new Map()).set("audio", [/^vorbis$/, /^Opus$/, /^opus$/, /^fLaC$/, /^flac$/, /^mp4a/, /^[ae]c-3$/, /^ac-4/, /^dts[cex]$/, /^iamf/, /^mhm[12]/, /^ac3$/, /^eac3$/, /^apac$/]).set("video", [/^avc/, /^hev/, /^hvc/, /^vvc/, /^vvi/, /^vp0?[89]/, /^av01/, /^dvh/, /^dva/, /^dav/]).set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
        function Ec(a, b, c, d) {
          this.g = null;
          this.l = a;
          this.i = b;
          this.m = c;
          this.o = d;
          this.j = false;
          a: {
            typeof libDPIModule === "undefined" && $a("Could not find LCEVC Library dependencies on this page");
            if (typeof LCEVCdec !== "undefined") this.h = LCEVCdec;
            else if (typeof LcevcDil !== "undefined") this.h = LcevcDil, this.j = true, xb("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead");
            else {
              $a("Could not find LCEVC Library on this page");
              a = false;
              break a;
            }
            typeof this.h.SupportObject === "undefined" ? ($a("Could not find LCEVC Library on this page"), a = false) : (this.h.SupportObject.SupportStatus || $a(this.h.SupportObject.SupportError), a = typeof this.h !== "undefined" && typeof libDPIModule !== "undefined" && this.i instanceof HTMLCanvasElement && this.h.SupportObject.SupportStatus);
          }
          a && !this.g && this.h.SupportObject.webGLSupport(this.i) && (this.i.classList.remove("shaka-hidden"), this.g = this.j ? new this.h.LcevcDil(this.l, this.i, this.m) : new this.h.LCEVCdec(this.l, this.i, this.m));
        }
        function Fc(a, b, c, d) {
          d.type !== "video" || a.o && !d.baseOriginalId || a.g && a.g.appendBuffer(b, "video", d.id, -c, !a.o);
        }
        function Gc(a) {
          a.g && a.i.classList.add("shaka-hidden");
        }
        Ec.prototype.release = function() {
          this.g && (this.g.close(), this.g = null);
        };
        function Hc(a) {
          return a && typeof LCEVCdec !== "undefined" ? a.codecs == "lvc1" : false;
        }
        S("shaka.lcevc.Dec", Ec);
        Ec.prototype.release = Ec.prototype.release;
        function Ic() {
        }
        function Jc(a, b) {
          Kc.set(a, b);
        }
        function Lc() {
          var a = {};
          rb();
          if (Mc()) for (var b = t(Kc.keys()), c = b.next(); !c.done; c = b.next()) a[c.value] = true;
          b = t(["application/dash+xml", "application/x-mpegurl", "application/vnd.apple.mpegurl", "application/vnd.ms-sstr+xml"]);
          for (c = b.next(); !c.done; c = b.next()) c = c.value, a[c] = Mc() ? Kc.has(c) : Nc().canPlayType(c) != "";
          return a;
        }
        function Oc(a, b) {
          if (b) {
            var c = Kc.get(b.toLowerCase());
            if (c) return c;
          }
          throw new U(2, 4, 4e3, a, b);
        }
        S("shaka.media.ManifestParser", Ic);
        Ic.unregisterParserByMime = function(a) {
          Kc.delete(a);
        };
        Ic.registerParserByMime = Jc;
        Ic.registerParserByExtension = function() {
          xb("ManifestParser.registerParserByExtension", "Please use an ManifestParser with registerParserByMime function.");
        };
        Ic.AccessibilityPurpose = { ym: "visually impaired", Jl: "hard of hearing", fm: "spoken subtitles" };
        var Kc = /* @__PURE__ */ new Map();
        function Pc() {
        }
        Pc.prototype.extract = function() {
        };
        Pc.prototype.decode = function() {
          return [];
        };
        Pc.prototype.clear = function() {
        };
        Pc.prototype.getStreams = function() {
          return [];
        };
        function Qc() {
        }
        Qc.prototype.init = function() {
        };
        Qc.prototype.parse = function() {
          return [];
        };
        function Rc() {
        }
        p = Rc.prototype;
        p.init = function() {
        };
        p.xf = function() {
        };
        p.Nd = function() {
        };
        p.remove = function() {
        };
        p.Vf = function() {
        };
        S("shaka.media.IClosedCaptionParser", Rc);
        function Sc(a) {
          this.h = /* @__PURE__ */ new Map();
          this.i = 0;
          this.j = new Qc();
          if (a = Tc(a.toLowerCase())) this.j = a();
          this.g = new Pc();
          if (a = Uc) this.g = a(), this.h.set(this.i, this.g);
        }
        p = Sc.prototype;
        p.init = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? -1 : c;
          if (c != -1 && this.i != c) {
            b = c;
            var d = this.h.get(b);
            this.h.set(this.i, this.g);
            if (d) this.g = d;
            else {
              if (d = Uc) this.g = d();
              this.h.set(b, this.g);
            }
          } else b || this.Nd();
          this.j.init(a);
          c != -1 && (this.i = c);
        };
        p.xf = function(a) {
          a = this.j.parse(a);
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = Vb(b.packet);
            c.length > 0 && this.g.extract(c, b.pts);
          }
          return this.g.decode();
        };
        p.Nd = function() {
          this.g.clear();
        };
        p.remove = function(a) {
          a = a === void 0 ? [] : a;
          a = new Set(a);
          for (var b = t(this.h.keys()), c = b.next(); !c.done; c = b.next()) if (c = c.value, !a.has(c)) {
            var d = this.h.get(c);
            d && d.clear();
            this.h.delete(c);
          }
        };
        p.Vf = function() {
          return this.g.getStreams();
        };
        function Vc(a, b) {
          Xc.set(a, b);
        }
        function Tc(a) {
          return Xc.get(a);
        }
        S("shaka.media.ClosedCaptionParser", Sc);
        Sc.findDecoder = function() {
          return Uc;
        };
        Sc.unregisterDecoder = function() {
          Uc = null;
        };
        Sc.registerDecoder = function(a) {
          Uc = a;
        };
        Sc.findParser = Tc;
        Sc.unregisterParser = function(a) {
          Xc.delete(a);
        };
        Sc.registerParser = Vc;
        var Xc = /* @__PURE__ */ new Map(), Uc = null;
        function Yc() {
          this.id = "";
          this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0;
          this.height = this.width = 100;
          this.viewportAnchorUnits = this.widthUnits = this.heightUnits = Zc;
          this.scroll = $c;
        }
        S("shaka.text.CueRegion", Yc);
        var Zc = 1;
        Yc.units = { PX: 0, PERCENTAGE: Zc, LINES: 2 };
        var $c = "";
        Yc.scrollMode = { NONE: $c, UP: "up" };
        function ad(a) {
          this.h = a || "";
          this.g = 0;
        }
        function bd(a) {
          cd(a, /[ \t]+/gm);
        }
        function cd(a, b) {
          b.lastIndex = a.g;
          b = b.exec(a.h);
          b = b == null ? null : { position: b.index, length: b[0].length, results: b };
          if (a.g == a.h.length || b == null || b.position != a.g) return null;
          a.g += b.length;
          return b.results;
        }
        function ed(a) {
          return a.g == a.h.length ? null : (a = cd(a, /[^ \t\n]*/gm)) ? a[0] : null;
        }
        function fd(a) {
          a = cd(a, gd);
          if (a == null) return null;
          var b = Number(a[2]), c = Number(a[3]);
          return b > 59 || c > 59 ? null : (Number(a[6]) || 0) / 1e3 + c + b * 60 + (Number(a[1]) || 0) * 3600;
        }
        function hd(a) {
          return a ? fd(new ad(a)) : null;
        }
        var gd = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
        function id() {
        }
        function jd(a) {
          function b(d) {
            switch (typeof d) {
              case "undefined":
              case "boolean":
              case "number":
              case "string":
              case "symbol":
              case "function":
                return d;
              default:
                if (!d || ArrayBuffer.isView(d)) return d;
                if (c.has(d)) return null;
                var e = Array.isArray(d);
                if (d.constructor != Object && !e) return null;
                c.add(d);
                var f = e ? [] : {}, g;
                for (g in d) f[g] = b(d[g]);
                e && (f.length = d.length);
                return f;
            }
          }
          var c = /* @__PURE__ */ new WeakSet();
          return b(a);
        }
        function kd(a) {
          var b = {}, c;
          for (c in a) b[c] = a[c];
          return b;
        }
        function ld(a) {
          if (Array.isArray(a)) {
            for (var b = [], c = 0; c < a.length; c++) {
              var d = c.toString(), e = a[c];
              e !== void 0 && (e = ld(e)) && b.push(d + ":" + e);
            }
            a = "[" + b.join(",") + "]";
          } else if (typeof a == "function") a = "";
          else if (a instanceof Object) {
            c = Object.keys(a);
            c.sort();
            b = [];
            c = t(c);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, d = JSON.stringify(e), e = a[e], e !== void 0 && (e = ld(e)) && b.push(d + ":" + e);
            a = "{" + b.join(",") + "}";
          } else a = JSON.stringify(a);
          return a;
        }
        S("shaka.util.ObjectUtils", id);
        id.alphabeticalKeyOrderStringify = ld;
        id.shallowCloneObject = kd;
        id.cloneObject = jd;
        function nd(a, b) {
          var c = c === void 0 ? false : c;
          a = fc(a);
          return pd(a, b, c);
        }
        function pd(a, b, c) {
          a = qd(a, c === void 0 ? false : c);
          return !b && a.length ? a[0] : (a = a.find(function(d) {
            return b.split(",").includes(d.tagName);
          })) ? a : null;
        }
        function rd(a) {
          return sd.has(a) ? sd.get(a) : "";
        }
        function qd(a, b) {
          function c(f, g) {
            g = g === void 0 ? false : g;
            for (var h = []; a[e]; ) if (a.charCodeAt(e) == 60) {
              if (a.charCodeAt(e + 1) === 47) {
                g = e + 2;
                e = a.indexOf(">", e);
                g = a.substring(g, e);
                var k2 = g.indexOf(f);
                if (k2 == -1) {
                  var l = f.indexOf(".");
                  l > 0 && (k2 = g.indexOf(f.substring(0, l)));
                }
                if (k2 == -1) throw f = a.substring(0, e).split("\n"), Error("Unexpected close tag\nLine: " + (f.length - 1) + "\nColumn: " + (f[f.length - 1].length + 1) + "\nChar: " + a[e]);
                e + 1 && (e += 1);
                break;
              } else if (a.charCodeAt(e + 1) === 33) {
                if (a.charCodeAt(e + 2) == 45) {
                  for (; e !== -1 && (a.charCodeAt(e) !== 62 || a.charCodeAt(e - 1) != 45 || a.charCodeAt(e - 2) != 45 || e == -1); ) e = a.indexOf(">", e + 1);
                  e === -1 && (e = a.length);
                } else if (a.charCodeAt(e + 2) === 91 && a.charCodeAt(e + 8) === 91 && a.substr(e + 3, 5).toLowerCase() === "cdata") {
                  k2 = a.indexOf("]]>", e);
                  k2 == -1 ? (h.push(a.substr(e + 9)), e = a.length) : (h.push(a.substring(e + 9, k2)), e = k2 + 3);
                  continue;
                }
                e++;
                continue;
              }
              a: {
                l = g;
                e++;
                var m = d(), n = {};
                for (k2 = []; a.charCodeAt(e) !== 62 && a[e]; ) {
                  var q = a.charCodeAt(e);
                  if (q > 64 && q < 91 || q > 96 && q < 123) {
                    q = d();
                    for (var r = a.charCodeAt(e); r && r !== 39 && r !== 34 && !(r > 64 && r < 91 || r > 96 && r < 123) && r !== 62; ) e++, r = a.charCodeAt(e);
                    var u = e + 1;
                    e = a.indexOf(a[e], u);
                    u = a.slice(u, e);
                    if (r === 39 || r === 34) {
                      if (e === -1) {
                        l = { tagName: m, attributes: n, children: k2, parent: null };
                        if (b) for (m = 0; m < k2.length; m++) typeof k2[m] !== "string" && (k2[m].parent = l);
                        k2 = l;
                        break a;
                      }
                    } else u = null, e--;
                    if (q.startsWith("xmlns:")) {
                      r = u;
                      var v = q.split(":")[1];
                      sd.set(r, v);
                      td.set(v, r);
                    }
                    m === "tt" && q === "xml:space" && u === "preserve" && (l = true);
                    n[q] = u;
                  }
                  e++;
                }
                a.charCodeAt(e - 1) !== 47 ? (e++, k2 = c(m, l)) : e++;
                l = { tagName: m, attributes: n, children: k2, parent: null };
                m = k2.length;
                for (n = 0; n < m; n++) q = k2[n], typeof q !== "string" ? b && (q.parent = l) : n == m - 1 && q == "\n" && k2.pop();
                k2 = l;
              }
              h.push(k2);
              if (typeof k2 === "string") break;
              k2.tagName[0] === "?" && k2.children && (h.push.apply(h, x(k2.children)), k2.children = []);
            } else k2 = e, e = a.indexOf("<", e) - 1, e === -2 && (e = a.length), k2 = a.slice(k2, e + 1), g ? k2.length > 0 && h.push(k2) : h.length && k2.length == 1 && k2[0] == "\n" ? h.push(k2) : k2.trim().length > 0 && h.push(k2), e++;
            return h;
          }
          function d() {
            for (var f = e; "\r\n	>/= ".indexOf(a[e]) === -1 && a[e]; ) e++;
            return a.slice(f, e);
          }
          var e = 0;
          return c("");
        }
        function ud(a) {
          return typeof a === "string";
        }
        function vd(a) {
          var b = [];
          if (!a.children) return [];
          a = t(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, typeof c !== "string" && b.push(c);
          return b;
        }
        function wd(a, b) {
          var c = [];
          if (!a.children) return [];
          a = t(a.children);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.tagName === b && c.push(d);
          return c;
        }
        function xd(a) {
          if (typeof a === "string") return kc(a);
          a = a.children.reduce(function(b, c) {
            return typeof c === "string" ? b + c : b;
          }, "");
          return a === "" ? null : kc(a);
        }
        function yd(a) {
          if (!Array.from(a.children).every(function(b) {
            return typeof b === "string";
          })) return null;
          (a = xd(a)) && (a = a.trim());
          return a;
        }
        function zd(a, b, c) {
          c = c === void 0 ? [] : c;
          a.tagName === b && c.push(a);
          if (a.children) {
            a = t(a.children);
            for (var d = a.next(); !d.done; d = a.next()) zd(d.value, b, c);
          }
          return c;
        }
        function Ad(a, b) {
          a = wd(a, b);
          return a.length != 1 ? null : a[0];
        }
        function Bd(a, b, c) {
          a = Cd(a, b, c);
          return a.length != 1 ? null : a[0];
        }
        function Dd(a, b, c, d) {
          d = d === void 0 ? null : d;
          var e = null;
          a = a.attributes[b];
          a != null && (e = c(a));
          return e == null ? d : e;
        }
        function Ed(a, b, c) {
          b = rd(b);
          return a.attributes[b + ":" + c] || null;
        }
        function Cd(a, b, c) {
          var d = rd(b);
          b = [];
          if (a.children) for (c = d ? d + ":" + c : c, a = t(a.children), d = a.next(); !d.done; d = a.next()) (d = d.value) && d.tagName === c && b.push(d);
          return b;
        }
        function Fd(a, b, c) {
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) if (d = Ed(a, d.value, c)) return d;
          return null;
        }
        function Gd(a) {
          if (!a) return null;
          /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a) && (a += "Z");
          a = Date.parse(a);
          return isNaN(a) ? null : a / 1e3;
        }
        function Hd(a) {
          if (!a) return null;
          a = RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$", "i").exec(a);
          if (!a) return null;
          a = 31536e3 * Number(a[1] || null) + 2592e3 * Number(a[2] || null) + 86400 * Number(a[3] || null) + 3600 * Number(a[4] || null) + 60 * Number(a[5] || null) + Number(a[6] || null);
          return isFinite(a) ? a : null;
        }
        function Id(a) {
          var b = /([0-9]+)-([0-9]+)/.exec(a);
          if (!b) return null;
          a = Number(b[1]);
          if (!isFinite(a)) return null;
          b = Number(b[2]);
          return isFinite(b) ? { start: a, end: b } : null;
        }
        function Jd(a) {
          a = Number(a);
          return a % 1 === 0 ? a : null;
        }
        function Kd(a) {
          a = Number(a);
          return a % 1 === 0 && a > 0 ? a : null;
        }
        function Ld(a) {
          a = Number(a);
          return a % 1 === 0 && a >= 0 ? a : null;
        }
        function Md(a) {
          a = Number(a);
          return isNaN(a) ? null : a;
        }
        function Nd(a) {
          return a ? a.toLowerCase() === "true" : false;
        }
        function Od(a) {
          var b;
          var c = (b = a.match(/^(\d+)\/(\d+)$/)) ? Number(b[1]) / Number(b[2]) : Number(a);
          return isNaN(c) ? null : c;
        }
        function Qd(a) {
          var b = [];
          a = kc(a).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/);
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = c.match(/^([\w]+)/);
            if (d) {
              var e = c.match(/(@id='(.*?)')/), f = c.match(/(@t='(\d+)')/), g = c.match(/(@n='(\d+)')/), h = c.match(/\[(\d+)\]/);
              b.push({ name: d[0], id: e ? e[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null, t: f ? Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, n: g ? Number(g[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, position: h ? Number(h[1]) - 1 : null, Dc: c.split("/@")[1] || null });
            } else c.startsWith("@") && b.length && (b[b.length - 1].Dc = c.slice(1));
          }
          return b;
        }
        function Rd(a, b) {
          var c = Qd(b.attributes.sel || "");
          if (c.length) {
            var d = c[c.length - 1], e = b.attributes.pos || null;
            c = d.position;
            c == null && (d.t !== null && (c = Sd(a, "t", d.t)), d.n !== null && (c = Sd(a, "n", d.n)));
            c === null ? c = e === "prepend" ? 0 : a.length : e === "prepend" ? --c : e === "after" && ++c;
            e = b.tagName;
            (d = d.Dc) && a[c] ? Td(a[c], e, d, yd(b) || "") : (e !== "remove" && e !== "replace" || a.splice(c, 1), e !== "add" && e !== "replace" || a.splice.apply(a, [c, 0].concat(x(b.children))));
          }
        }
        function Sd(a, b, c) {
          var d = 0;
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            if (Number(e.value.attributes[b]) === c) return d;
            d++;
          }
          return null;
        }
        function Td(a, b, c, d) {
          if (b === "remove") delete a.attributes[c];
          else if (b === "add" || b === "replace") a.attributes[c] = d;
        }
        function Ud(a) {
          var b = "", c = a.tagName.split(":");
          c.length > 0 && (b = c[0], b = td.has(b) ? td.get(b) : "");
          b = document.createElementNS(b, a.tagName);
          for (var d in a.attributes) b.setAttribute(d, a.attributes[d]);
          a = t(a.children);
          for (d = a.next(); !d.done; d = a.next()) d = d.value, c = void 0, typeof d == "string" ? c = new Text(d) : c = Ud(d), b.appendChild(c);
          return b;
        }
        function Vd(a) {
          if (!a) return null;
          var b = { tagName: a.tagName, attributes: kd(a.attributes), children: [], parent: null };
          a = t(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, typeof c === "string" ? b.children.push(c) : (c = Vd(c), c.parent = b, b.children.push(c));
          return b;
        }
        var sd = /* @__PURE__ */ new Map(), td = /* @__PURE__ */ new Map();
        function Wd(a, b, c) {
          this.startTime = a;
          this.endTime = b;
          this.payload = c;
          this.region = new Yc();
          this.position = null;
          this.positionAlign = Xd;
          this.size = 0;
          this.textAlign = Yd;
          this.direction = Zd;
          this.writingMode = $d;
          this.lineInterpretation = ae;
          this.line = null;
          this.lineHeight = "";
          this.lineAlign = be;
          this.displayAlign = ce;
          this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = "";
          this.fontWeight = de;
          this.fontStyle = ee;
          this.linePadding = this.letterSpacing = this.fontFamily = "";
          this.opacity = 1;
          this.textCombineUpright = "";
          this.textDecoration = [];
          this.textStrokeWidth = this.textStrokeColor = this.textShadow = "";
          this.wrapLine = true;
          this.id = "";
          this.nestedCues = [];
          this.lineBreak = this.isContainer = false;
          this.rubyTag = null;
          this.cellResolution = { columns: 32, rows: 15 };
        }
        function fe(a, b) {
          a = new Wd(a, b, "");
          a.lineBreak = true;
          return a;
        }
        Wd.prototype.clone = function() {
          var a = new Wd(0, 0, ""), b;
          for (b in this) a[b] = this[b], Array.isArray(a[b]) && (a[b] = a[b].slice());
          return a;
        };
        function ge(a, b) {
          if (a.payload != b.payload || !(Math.abs(a.startTime - b.startTime) < 1e-3 && Math.abs(a.endTime - b.endTime) < 1e-3)) return false;
          for (var c in a) if (c != "startTime" && c != "endTime" && c != "payload") {
            if (c == "nestedCues") {
              if (!ib(a.nestedCues, b.nestedCues, ge)) return false;
            } else if (c == "region" || c == "cellResolution") for (var d in a[c]) {
              if (a[c][d] != b[c][d]) return false;
            }
            else if (Array.isArray(a[c])) {
              if (!ib(a[c], b[c])) return false;
            } else if (a[c] != b[c]) return false;
          }
          return true;
        }
        function he(a, b) {
          b = b === void 0 ? /* @__PURE__ */ new Map() : b;
          var c = a.payload;
          if (c.includes("<")) {
            b.size === 0 && ie(b);
            var d = c;
            c = [];
            for (var e = -1, f = 0; f < d.length; f++) d[f] === "<" ? e = f + 1 : d[f] === ">" && e > 0 && (e = d.substr(e, f - e), e.match(je) && c.push(e), e = -1);
            c = t(c);
            for (f = c.next(); !f.done; f = c.next()) f = f.value, d = d.replace("<" + f + ">", '<div time="' + f + '">'), d += "</div>";
            a: {
              f = d;
              e = [];
              var g = -1;
              c = "";
              d = false;
              for (var h = 0; h < f.length; h++) if (f[h] === "/") {
                var k2 = f.indexOf(">", h);
                if (k2 === -1) {
                  c = f;
                  break a;
                }
                if ((k2 = f.substring(h + 1, k2)) && k2 == "v") {
                  d = true;
                  var l = null;
                  e.length && (l = e[e.length - 1]);
                  if (l) {
                    if (l === k2) c += "/" + k2 + ">";
                    else {
                      if (!l.startsWith("v")) {
                        c += f[h];
                        continue;
                      }
                      c += "/" + l + ">";
                    }
                    h += k2.length + 1;
                  } else c += f[h];
                } else c += f[h];
              } else f[h] === "<" ? (g = h + 1, f[g] != "v" && (g = -1)) : f[h] === ">" && g > 0 && (e.push(f.substr(g, h - g)), g = -1), c += f[h];
              f = t(e);
              for (e = f.next(); !e.done; e = f.next()) e = e.value, g = e.replace(" ", ".voice-"), c = c.replace("<" + e + ">", "<" + g + ">"), c = c.replace("</" + e + ">", "</" + g + ">"), d || (c += "</" + g + ">");
            }
            c = ke(c);
            a.payload = "";
            d = "<span>" + c.replace(/\n/g, "<br />") + "</span>";
            try {
              var m = pd(d, "span");
            } catch (n) {
            }
            if (m) if (m = m.children, m.length != 1 || m[0].tagName) for (m = t(m), c = m.next(); !c.done; c = m.next()) le(c.value, a, b);
            else a.payload = kc(c);
            else a.payload = kc(c);
          } else a.payload = kc(c);
        }
        function ie(a) {
          for (var b = t(Object.entries(ne)), c = b.next(); !c.done; c = b.next()) {
            var d = t(c.value);
            c = d.next().value;
            d = d.next().value;
            var e = new Wd(0, 0, "");
            e.color = d;
            a.set("." + c, e);
          }
          b = t(Object.entries(qe));
          for (c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, e = new Wd(0, 0, ""), e.backgroundColor = d, a.set("." + c, e);
        }
        function ke(a) {
          var b = { "< ": "", " >": " &gt;" }, c = /(< +>|<\s|\s>)/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return b[e] || "";
          }) : a || "";
        }
        function le(a, b, c) {
          var d = b.clone();
          d.nestedCues = [];
          d.payload = "";
          d.rubyTag = "";
          d.line = null;
          d.region = new Yc();
          d.position = null;
          d.size = 0;
          d.textAlign = Yd;
          if (a.tagName) for (var e = t(a.tagName.split(/(?=[ .])+/g)), f = e.next(); !f.done; f = e.next()) {
            var g = f = f.value;
            if (g.startsWith(".voice-")) {
              var h = g.split("-").pop();
              g = 'v[voice="' + h + '"]';
              c.has(g) || (g = "v[voice=" + h + "]");
            }
            c.has(g) && (h = d, g = c.get(g)) && (h.backgroundColor = re(g.backgroundColor, h.backgroundColor), h.color = re(g.color, h.color), h.fontFamily = re(g.fontFamily, h.fontFamily), h.fontSize = re(g.fontSize, h.fontSize), h.textShadow = re(g.textShadow, h.textShadow), h.fontWeight = g.fontWeight, h.fontStyle = g.fontStyle, h.opacity = g.opacity, h.rubyTag = g.rubyTag, h.textCombineUpright = g.textCombineUpright, h.wrapLine = g.wrapLine);
            switch (f) {
              case "br":
                d = fe(d.startTime, d.endTime);
                b.nestedCues.push(d);
                return;
              case "b":
                d.fontWeight = se;
                break;
              case "i":
                d.fontStyle = te;
                break;
              case "u":
                d.textDecoration.push(ue);
                break;
              case "font":
                if (f = a.attributes.color) d.color = f;
                break;
              case "div":
                f = a.attributes.time;
                if (!f) break;
                if (f = hd(f)) d.startTime = f;
                break;
              case "ruby":
              case "rp":
              case "rt":
                d.rubyTag = f;
            }
          }
          e = a.children;
          if (ud(a) || e.length == 1 && ud(e[0])) for (c = xd(a).split("\n"), a = true, c = t(c), e = c.next(); !e.done; e = c.next()) e = e.value, a || (a = fe(d.startTime, d.endTime), b.nestedCues.push(a)), e.length > 0 && (a = d.clone(), a.payload = kc(e), b.nestedCues.push(a)), a = false;
          else for (b.nestedCues.push(d), b = t(e), a = b.next(); !a.done; a = b.next()) le(a.value, d, c);
        }
        function re(a, b) {
          return a && a.length > 0 ? a : b;
        }
        S("shaka.text.Cue", Wd);
        Wd.parseCuePayload = he;
        Wd.equal = ge;
        Wd.prototype.clone = Wd.prototype.clone;
        var Xd = "auto";
        Wd.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: Xd };
        var Yd = "center", ve = { LEFT: "left", RIGHT: "right", CENTER: Yd, START: "start", END: "end" };
        Wd.textAlign = ve;
        var ce = "after", we = { BEFORE: "before", CENTER: "center", AFTER: ce };
        Wd.displayAlign = we;
        var Zd = "ltr";
        Wd.direction = { HORIZONTAL_LEFT_TO_RIGHT: Zd, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
        var $d = "horizontal-tb";
        Wd.writingMode = { HORIZONTAL_TOP_TO_BOTTOM: $d, VERTICAL_LEFT_TO_RIGHT: "vertical-lr", VERTICAL_RIGHT_TO_LEFT: "vertical-rl" };
        var ae = 0;
        Wd.lineInterpretation = { LINE_NUMBER: ae, PERCENTAGE: 1 };
        var be = "start", xe = { CENTER: "center", START: be, END: "end" };
        Wd.lineAlign = xe;
        var ne = { white: "white", lime: "lime", cyan: "cyan", red: "red", yellow: "yellow", magenta: "magenta", blue: "blue", black: "black" };
        Wd.defaultTextColor = ne;
        var qe = { bg_white: "white", bg_lime: "lime", bg_cyan: "cyan", bg_red: "red", bg_yellow: "yellow", bg_magenta: "magenta", bg_blue: "blue", bg_black: "black" };
        Wd.defaultTextBackgroundColor = qe;
        var de = 400, se = 700;
        Wd.fontWeight = { NORMAL: de, BOLD: se };
        var ee = "normal", te = "italic", ye = { NORMAL: ee, ITALIC: te, OBLIQUE: "oblique" };
        Wd.fontStyle = ye;
        var ue = "underline";
        Wd.textDecoration = { UNDERLINE: ue, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
        var je = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
        function ze() {
        }
        ze.prototype.destroy = function() {
        };
        function Ae(a, b, c) {
          Be.set(a.toLowerCase().split(";")[0] + "-" + c, { priority: c, yf: b });
        }
        function Ce(a, b) {
          for (var c = a.toLowerCase().split(";")[0], d = t([De, Ee, Fe, Ge]), e = d.next(); !e.done; e = d.next()) if (e = Be.get(c + "-" + e.value)) {
            var f = e.yf(), g = f.isSupported(a, b);
            f.destroy();
            if (g) return e.yf;
          }
          return null;
        }
        S("shaka.transmuxer.TransmuxerEngine", ze);
        ze.findTransmuxer = Ce;
        ze.unregisterTransmuxer = function(a, b) {
          Be.delete(a.toLowerCase().split(";")[0] + "-" + b);
        };
        ze.registerTransmuxer = Ae;
        ze.prototype.destroy = ze.prototype.destroy;
        var Be = /* @__PURE__ */ new Map(), Ge = 1, Fe = 2, Ee = 3, De = 4;
        ze.PluginPriority = { FALLBACK: Ge, PREFERRED_SECONDARY: Fe, PREFERRED: Ee, APPLICATION: De };
        function He() {
        }
        function Ie(a, b) {
          var c = a;
          b && !Je.includes(a) && (c += '; codecs="' + b + '"');
          return c;
        }
        function Ke(a, b) {
          b && (a += '; codecs="' + b + '"');
          return a;
        }
        function Le(a, b, c) {
          var d = Ie(a, b);
          b = Ke(a, b);
          Ce(b) ? (a = Ce(b)) ? (a = a(), c = a.convertCodecs(c, b), a.destroy()) : c = b : c = a != "video/mp2t" && c == "audio" ? d.replace("video", "audio") : d;
          return c;
        }
        function Me(a) {
          return a.split(";")[0].split("/")[1];
        }
        function Ne(a) {
          var b = Oe(a);
          a = b[0].toLowerCase();
          b = b[1].toLowerCase();
          switch (true) {
            case (a === "mp4a" && b === "69"):
            case (a === "mp4a" && b === "6b"):
            case (a === "mp4a" && b === "40.34"):
              return "mp3";
            case (a === "mp4a" && b === "66"):
            case (a === "mp4a" && b === "67"):
            case (a === "mp4a" && b === "68"):
            case (a === "mp4a" && b === "40.2"):
            case (a === "mp4a" && b === "40.02"):
            case (a === "mp4a" && b === "40.5"):
            case (a === "mp4a" && b === "40.05"):
            case (a === "mp4a" && b === "40.29"):
            case (a === "mp4a" && b === "40.42"):
              return "aac";
            case (a === "mp4a" && b === "a5"):
            case a === "ac3":
            case a === "ac-3":
              return "ac-3";
            case (a === "mp4a" && b === "a6"):
            case a === "eac3":
            case a === "ec-3":
              return "ec-3";
            case a === "ac-4":
              return "ac-4";
            case (a === "mp4a" && b === "b2"):
              return "dtsx";
            case (a === "mp4a" && b === "a9"):
              return "dtsc";
            case a === "vp09":
            case a === "vp9":
              return "vp9";
            case a === "avc1":
            case a === "avc3":
              return "avc";
            case a === "hvc1":
            case a === "hev1":
              return "hevc";
            case a === "vvc1":
            case a === "vvi1":
              return "vvc";
            case a === "dvh1":
            case a === "dvhe":
              return b && b.startsWith("05") ? "dovi-p5" : "dovi-hevc";
            case a === "dvav":
            case a === "dva1":
              return "dovi-avc";
            case a === "dav1":
              return "dovi-av1";
            case a === "dvc1":
            case a === "dvi1":
              return "dovi-vvc";
            case a === "lvc1":
              return "lcevc";
          }
          return a;
        }
        function Pe(a) {
          var b = [];
          a = t(a.split(","));
          for (var c = a.next(); !c.done; c = a.next()) c = Oe(c.value), b.push(c[0]);
          return b.sort().join(",");
        }
        function Qe(a) {
          return a.split(";")[0];
        }
        function Re(a) {
          a = a.split(/ *; */);
          a.shift();
          return (a = a.find(function(b) {
            return b.startsWith("codecs=");
          })) ? a.split("=")[1].replace(/^"|"$/g, "") : "";
        }
        function Te(a) {
          return a === "application/x-mpegurl" || a === "application/vnd.apple.mpegurl";
        }
        function Oe(a) {
          a = a.split(".");
          var b = a[0];
          a.shift();
          return [b, a.join(".")];
        }
        S("shaka.util.MimeUtils", He);
        He.getFullTypeWithAllCodecs = Ke;
        He.getFullType = Ie;
        (/* @__PURE__ */ new Map()).set("codecs", "codecs").set("frameRate", "framerate").set("bandwidth", "bitrate").set("width", "width").set("height", "height").set("channelsCount", "channels");
        var Je = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
        function Ue(a) {
          this.i = null;
          this.l = a;
          this.C = false;
          this.m = this.u = 0;
          this.o = Infinity;
          this.h = this.g = null;
          this.F = "";
          this.B = function() {
          };
          this.j = /* @__PURE__ */ new Map();
        }
        function Ve(a, b) {
          We.set(a, b);
        }
        function Xe(a) {
          return We.get(a);
        }
        function Ye(a) {
          return We.has(a) ? true : a == "application/cea-608" || a == "application/cea-708" ? !!Uc : false;
        }
        Ue.prototype.destroy = function() {
          this.l = this.i = null;
          this.j.clear();
          return Promise.resolve();
        };
        function Ze(a, b, c, d, e) {
          var f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) return F(q, Promise.resolve(), 2);
            if (!a.i || !a.l) return q.return();
            if (c == null || d == null) return a.i.parseInit(Vb(b)), q.return();
            f = a.C ? c : a.u;
            g = { periodStart: a.u, segmentStart: c, segmentEnd: d, vttOffset: f };
            h = a.i.parseMedia(Vb(b), g, e, []);
            k2 = t(h);
            for (l = k2.next(); !l.done; l = k2.next()) m = l.value, a.B(m, e || null, g);
            n = h.filter(function(r) {
              return r.startTime >= a.m && r.startTime < a.o;
            });
            a.l.append(n);
            a.g == null && (a.g = Math.max(c, a.m));
            a.h = Math.min(d, a.o);
            G(q);
          });
        }
        Ue.prototype.remove = function(a, b, c) {
          c = c === void 0 ? false : c;
          var d = this;
          return Q(function(e) {
            if (e.g == 1) return F(e, Promise.resolve(), 2);
            if (a >= b) return e.return();
            c && $e(d, a, b);
            d.l && d.l.remove(a, b) && d.g != null && (b <= d.g || a >= d.h || (a <= d.g && b >= d.h ? d.g = d.h = null : a <= d.g && b < d.h ? d.g = b : a > d.g && b >= d.h && (d.h = a)), af(d));
            G(e);
          });
        };
        function bf(a, b, c) {
          a.m = b;
          a.o = c;
        }
        function cf(a, b, c) {
          a.F = b;
          if (b = a.j.get(b)) b = b.filter(function(d) {
            return d.endTime <= c;
          }), b.length && a.l.append(b);
        }
        function df(a, b, c) {
          b.startTime += c;
          b.endTime += c;
          b = t(b.nestedCues);
          for (var d = b.next(); !d.done; d = b.next()) df(a, d.value, c);
        }
        function ef(a, b, c) {
          var d = /* @__PURE__ */ new Map();
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            var f = e.value;
            e = f.stream;
            f = f.cue;
            d.has(e) || d.set(e, []);
            df(a, f, c);
            f.startTime >= a.m && f.startTime < a.o && (d.get(e).push(f), e == a.F && a.l.append([f]));
          }
          c = t(d.keys());
          for (b = c.next(); !b.done; b = c.next()) for (b = b.value, a.j.has(b) || a.j.set(b, []), e = t(d.get(b)), f = e.next(); !f.done; f = e.next()) f = f.value, a.j.get(b).push(f);
          af(a);
        }
        function $e(a, b, c) {
          for (var d = t(a.j.keys()), e = d.next(); !e.done; e = d.next()) {
            e = e.value;
            var f = a.j.get(e);
            f = f.filter(function(g) {
              return g.startTime < b || g.endTime >= c;
            });
            a.j.set(e, f);
          }
        }
        function af(a) {
          for (var b = Infinity, c = -Infinity, d = t(a.j.values()), e = d.next(); !e.done; e = d.next()) {
            e = t(e.value);
            for (var f = e.next(); !f.done; f = e.next()) f = f.value, b = Math.min(b, f.startTime), c = Math.max(c, f.endTime);
          }
          b !== Infinity && c !== -Infinity && (a.g = a.g == null ? Math.max(b, a.m) : Math.min(a.g, Math.max(b, a.m)), a.h = Math.max(a.h, Math.min(c, a.o)));
        }
        S("shaka.text.TextEngine", Ue);
        Ue.prototype.destroy = Ue.prototype.destroy;
        Ue.findParser = Xe;
        Ue.unregisterParser = function(a) {
          We.delete(a);
        };
        Ue.registerParser = Ve;
        var We = /* @__PURE__ */ new Map();
        function ff(a) {
          this.h = a;
          this.g = null;
        }
        ff.prototype.ia = function(a) {
          var b = this;
          this.stop();
          var c = true, d = null;
          this.g = function() {
            window2.clearTimeout(d);
            c = false;
          };
          d = window2.setTimeout(function() {
            c && b.h();
          }, a * 1e3);
          return this;
        };
        ff.prototype.stop = function() {
          this.g && (this.g(), this.g = null);
        };
        function gf(a) {
          this.h = a;
          this.g = null;
        }
        gf.prototype.Kb = function() {
          this.stop();
          this.h();
          return this;
        };
        gf.prototype.ia = function(a) {
          var b = this;
          this.stop();
          this.g = new ff(function() {
            b.h();
          }).ia(a);
          return this;
        };
        gf.prototype.Ea = function(a) {
          var b = this;
          this.stop();
          this.g = new ff(function() {
            b.g.ia(a);
            b.h();
          }).ia(a);
          return this;
        };
        gf.prototype.stop = function() {
          this.g && (this.g.stop(), this.g = null);
        };
        S("shaka.util.Timer", gf);
        gf.prototype.stop = gf.prototype.stop;
        gf.prototype.tickEvery = gf.prototype.Ea;
        gf.prototype.tickAfter = gf.prototype.ia;
        gf.prototype.tickNow = gf.prototype.Kb;
        function hf(a, b) {
          return a.concat(b);
        }
        function jf() {
        }
        function kf(a) {
          return a != null;
        }
        function lf(a, b) {
          return Promise.race([b, new Promise(function(c, d) {
            new gf(d).ia(a);
          })]);
        }
        ;
        function mf() {
        }
        function nf(a, b) {
          a = of(a);
          b = of(b);
          return a.split("-")[0] == b.split("-")[0];
        }
        function pf(a, b) {
          a = of(a);
          b = of(b);
          a = a.split("-");
          b = b.split("-");
          return a[0] == b[0] && a.length == 1 && b.length == 2;
        }
        function qf(a, b) {
          a = of(a);
          b = of(b);
          a = a.split("-");
          b = b.split("-");
          return a.length == 2 && b.length == 2 && a[0] == b[0];
        }
        function of(a) {
          a = t(a.split("-x-"));
          var b = a.next().value;
          b = b === void 0 ? "" : b;
          a = a.next().value;
          a = a === void 0 ? "" : a;
          var c = t(b.split("-"));
          b = c.next().value;
          b = b === void 0 ? "" : b;
          c = c.next().value;
          c = c === void 0 ? "" : c;
          a = a ? "x-" + a : "";
          b = b.toLowerCase();
          b = rf.get(b) || b;
          c = c.toUpperCase();
          return (c ? b + "-" + c : b) + (a ? "-" + a : "");
        }
        function sf(a, b) {
          a = of(a);
          b = of(b);
          return b == a ? 4 : pf(b, a) ? 3 : qf(b, a) ? 2 : pf(a, b) ? 1 : 0;
        }
        function tf(a) {
          var b = a.indexOf("-");
          a = b >= 0 ? a.substring(0, b) : a;
          a = a.toLowerCase();
          return a = rf.get(a) || a;
        }
        function uf(a) {
          return a.language ? of(a.language) : a.audio && a.audio.language ? of(a.audio.language) : a.video && a.video.language ? of(a.video.language) : "und";
        }
        function vf(a, b) {
          a = of(a);
          var c = /* @__PURE__ */ new Set();
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) c.add(of(d.value));
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, d == a) return d;
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, pf(d, a)) return d;
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, qf(d, a)) return d;
          c = t(c);
          for (b = c.next(); !b.done; b = c.next()) if (b = b.value, pf(a, b)) return b;
          return null;
        }
        S("shaka.util.LanguageUtils", mf);
        mf.findClosestLocale = vf;
        mf.getLocaleForVariant = uf;
        mf.getLocaleForText = function(a) {
          return of(a.language || "und");
        };
        mf.getBase = tf;
        mf.relatedness = sf;
        mf.areSiblings = function(a, b) {
          var c = tf(a), d = tf(b);
          return a != c && b != d && c == d;
        };
        mf.normalize = of;
        mf.isSiblingOf = qf;
        mf.isParentOf = pf;
        mf.areLanguageCompatible = nf;
        mf.areLocaleCompatible = function(a, b) {
          a = of(a);
          b = of(b);
          return a == b;
        };
        var rf = /* @__PURE__ */ new Map([["aar", "aa"], ["abk", "ab"], ["afr", "af"], ["aka", "ak"], ["alb", "sq"], ["amh", "am"], ["ara", "ar"], ["arg", "an"], ["arm", "hy"], ["asm", "as"], ["ava", "av"], ["ave", "ae"], ["aym", "ay"], ["aze", "az"], ["bak", "ba"], ["bam", "bm"], ["baq", "eu"], ["bel", "be"], ["ben", "bn"], ["bih", "bh"], ["bis", "bi"], ["bod", "bo"], ["bos", "bs"], ["bre", "br"], ["bul", "bg"], ["bur", "my"], ["cat", "ca"], ["ces", "cs"], ["cha", "ch"], ["che", "ce"], ["chi", "zh"], ["chu", "cu"], ["chv", "cv"], ["cor", "kw"], ["cos", "co"], ["cre", "cr"], ["cym", "cy"], [
          "cze",
          "cs"
        ], ["dan", "da"], ["deu", "de"], ["div", "dv"], ["dut", "nl"], ["dzo", "dz"], ["ell", "el"], ["eng", "en"], ["epo", "eo"], ["est", "et"], ["eus", "eu"], ["ewe", "ee"], ["fao", "fo"], ["fas", "fa"], ["fij", "fj"], ["fin", "fi"], ["fra", "fr"], ["fre", "fr"], ["fry", "fy"], ["ful", "ff"], ["geo", "ka"], ["ger", "de"], ["gla", "gd"], ["gle", "ga"], ["glg", "gl"], ["glv", "gv"], ["gre", "el"], ["grn", "gn"], ["guj", "gu"], ["hat", "ht"], ["hau", "ha"], ["heb", "he"], ["her", "hz"], ["hin", "hi"], ["hmo", "ho"], ["hrv", "hr"], ["hun", "hu"], ["hye", "hy"], ["ibo", "ig"], [
          "ice",
          "is"
        ], ["ido", "io"], ["iii", "ii"], ["iku", "iu"], ["ile", "ie"], ["ina", "ia"], ["ind", "id"], ["ipk", "ik"], ["isl", "is"], ["ita", "it"], ["jav", "jv"], ["jpn", "ja"], ["kal", "kl"], ["kan", "kn"], ["kas", "ks"], ["kat", "ka"], ["kau", "kr"], ["kaz", "kk"], ["khm", "km"], ["kik", "ki"], ["kin", "rw"], ["kir", "ky"], ["kom", "kv"], ["kon", "kg"], ["kor", "ko"], ["kua", "kj"], ["kur", "ku"], ["lao", "lo"], ["lat", "la"], ["lav", "lv"], ["lim", "li"], ["lin", "ln"], ["lit", "lt"], ["ltz", "lb"], ["lub", "lu"], ["lug", "lg"], ["mac", "mk"], ["mah", "mh"], ["mal", "ml"], [
          "mao",
          "mi"
        ], ["mar", "mr"], ["may", "ms"], ["mkd", "mk"], ["mlg", "mg"], ["mlt", "mt"], ["mon", "mn"], ["mri", "mi"], ["msa", "ms"], ["mya", "my"], ["nau", "na"], ["nav", "nv"], ["nbl", "nr"], ["nde", "nd"], ["ndo", "ng"], ["nep", "ne"], ["nld", "nl"], ["nno", "nn"], ["nob", "nb"], ["nor", "no"], ["nya", "ny"], ["oci", "oc"], ["oji", "oj"], ["ori", "or"], ["orm", "om"], ["oss", "os"], ["pan", "pa"], ["per", "fa"], ["pli", "pi"], ["pol", "pl"], ["por", "pt"], ["pus", "ps"], ["que", "qu"], ["roh", "rm"], ["ron", "ro"], ["rum", "ro"], ["run", "rn"], ["rus", "ru"], ["sag", "sg"], [
          "san",
          "sa"
        ], ["sin", "si"], ["slk", "sk"], ["slo", "sk"], ["slv", "sl"], ["sme", "se"], ["smo", "sm"], ["sna", "sn"], ["snd", "sd"], ["som", "so"], ["sot", "st"], ["spa", "es"], ["sqi", "sq"], ["srd", "sc"], ["srp", "sr"], ["ssw", "ss"], ["sun", "su"], ["swa", "sw"], ["swe", "sv"], ["tah", "ty"], ["tam", "ta"], ["tat", "tt"], ["tel", "te"], ["tgk", "tg"], ["tgl", "tl"], ["tha", "th"], ["tib", "bo"], ["tir", "ti"], ["ton", "to"], ["tsn", "tn"], ["tso", "ts"], ["tuk", "tk"], ["tur", "tr"], ["twi", "tw"], ["uig", "ug"], ["ukr", "uk"], ["urd", "ur"], ["uzb", "uz"], ["ven", "ve"], [
          "vie",
          "vi"
        ], ["vol", "vo"], ["wel", "cy"], ["wln", "wa"], ["wol", "wo"], ["xho", "xh"], ["yid", "yi"], ["yor", "yo"], ["zha", "za"], ["zho", "zh"], ["zul", "zu"]]);
        function wf() {
        }
        function xf(a, b, c, d, e) {
          function f(z) {
            var y = String(z.width || "") + String(z.height || "") + String(Math.round(z.frameRate || 0)) + (z.hdr || "") + z.fastSwitching;
            z.dependencyStream && (y += z.dependencyStream.baseOriginalId || "");
            z.roles && (y += z.roles.sort().join("_"));
            return y;
          }
          function g(z) {
            var y = z.language + (z.channelsCount || 0) + (z.audioSamplingRate || 0) + z.roles.join(",") + z.label + z.groupId + z.fastSwitching;
            z.dependencyStream && (y += z.dependencyStream.baseOriginalId || "");
            return y;
          }
          if (e.length) {
            var h = a.textStreams;
            e = t(e);
            for (var k2 = e.next(), l = {}; !k2.done; l = { Ch: void 0 }, k2 = e.next()) if (l.Ch = k2.value, k2 = h.filter(/* @__PURE__ */ (function(z) {
              return function(y) {
                return y.codecs.startsWith(z.Ch) || y.mimeType.startsWith(z.Ch) ? true : false;
              };
            })(l)), k2.length) {
              h = k2;
              break;
            }
            a.textStreams = h;
          }
          h = a.variants;
          if (b.length || c.length) h = yf(h, b, c);
          if (d.length) {
            b = new jb();
            c = t(h);
            for (h = c.next(); !h.done; h = c.next()) h = h.value, b.push(String(h.video.width || 0), h);
            var m = [];
            b.forEach(function(z, y) {
              z = 0;
              var B = [];
              y = t(y);
              for (var C = y.next(), H = {}; !C.done; H = { Tf: void 0 }, C = y.next()) H.Tf = C.value, C = d.filter(/* @__PURE__ */ (function(D) {
                return function(A) {
                  return D.Tf.decodingInfos[0][A];
                };
              })(H)).length, C > z ? (z = C, B = [H.Tf]) : C == z && B.push(H.Tf);
              m.push.apply(m, x(B));
            });
            h = m;
          }
          c = /* @__PURE__ */ new Set();
          b = /* @__PURE__ */ new Set();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) e = e.value, e.audio && c.add(e.audio), e.video && b.add(e.video);
          h = Array.from(c).sort(function(z, y) {
            return z.bandwidth - y.bandwidth;
          });
          var n = [];
          c = /* @__PURE__ */ new Map();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = g(e);
            l = c.get(k2) || [];
            if (l.length) {
              var q = l[l.length - 1], r = Ne(q.codecs), u = Ne(e.codecs);
              r != u || e.bandwidth && q.bandwidth && !(e.bandwidth > q.bandwidth) || (l.push(e), n.push(e.id));
            } else l.push(e), n.push(e.id);
            c.set(k2, l);
          }
          var v = { vp8: 1, avc: 1, "dovi-avc": 0.95, vp9: 0.9, vp09: 0.9, hevc: 0.85, "dovi-hevc": 0.8, "dovi-p5": 0.75, av01: 0.7, "dovi-av1": 0.65, vvc: 0.6 };
          h = Array.from(b).sort(function(z, y) {
            if (!z.bandwidth || !y.bandwidth || z.bandwidth == y.bandwidth) {
              if (z.codecs && y.codecs && z.codecs != y.codecs && z.width == y.width) {
                var B = Ne(z.codecs), C = Ne(y.codecs);
                if (B != C) return (v[B] || 1) - (v[C] || 1);
              }
              return z.width - y.width;
            }
            return z.bandwidth - y.bandwidth;
          });
          b = rb().Bb();
          var w = [];
          c = /* @__PURE__ */ new Map();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = f(e);
            l = c.get(k2) || [];
            if (l.length) {
              q = l[l.length - 1];
              if (!b && (r = Ne(q.codecs), u = Ne(e.codecs), r !== u)) continue;
              r = Ne(q.codecs);
              u = Ne(e.codecs);
              r != u || e.bandwidth && q.bandwidth && !(e.bandwidth > q.bandwidth) || (l.push(e), w.push(e.id));
            } else l.push(e), w.push(e.id);
            c.set(k2, l);
          }
          a.variants = a.variants.filter(function(z) {
            var y = z.audio;
            z = z.video;
            return y && !n.includes(y.id) || z && !w.includes(z.id) ? false : true;
          });
        }
        function yf(a, b, c) {
          b = t(b);
          for (var d = b.next(), e = {}; !d.done; e = { videoCodec: void 0 }, d = b.next()) if (e.videoCodec = d.value, d = a.filter(/* @__PURE__ */ (function(f) {
            return function(g) {
              return g.video && g.video.codecs.startsWith(f.videoCodec);
            };
          })(e)), d.length) {
            a = d;
            break;
          }
          c = t(c);
          b = c.next();
          for (d = {}; !b.done; d = { audioCodec: void 0 }, b = c.next()) if (d.audioCodec = b.value, b = a.filter(/* @__PURE__ */ (function(f) {
            return function(g) {
              return g.audio && g.audio.codecs.startsWith(f.audioCodec);
            };
          })(d)), b.length) {
            a = b;
            break;
          }
          return a;
        }
        function zf(a, b, c) {
          a.variants = a.variants.filter(function(d) {
            return Af(d, b, c);
          });
        }
        function Af(a, b, c) {
          function d(h, k2, l) {
            return h >= k2 && h <= l;
          }
          var e = a.video;
          if (e && e.width && e.height) {
            var f = e.width, g = e.height;
            g > f && (g = t([g, f]), f = g.next().value, g = g.next().value);
            if (!d(f, b.minWidth, Math.min(b.maxWidth, c.width)) || !d(g, b.minHeight, Math.min(b.maxHeight, c.height)) || !d(e.width * e.height, b.minPixels, b.maxPixels)) return false;
          }
          return a && a.video && a.video.frameRate && !d(a.video.frameRate, b.minFrameRate, b.maxFrameRate) || a && a.audio && a.audio.channelsCount && !d(a.audio.channelsCount, b.minChannelsCount, b.maxChannelsCount) || !d(a.bandwidth, b.minBandwidth, b.maxBandwidth) ? false : true;
        }
        function Bf(a, b, c, d) {
          c = c === void 0 ? [] : c;
          d = d === void 0 ? {} : d;
          return Q(function(e) {
            if (e.g == 1) return F(e, Cf(a, b, b.offlineSessionIds.length > 0, c, d), 2);
            Df(b);
            return F(e, Ef(b), 0);
          });
        }
        function Cf(a, b, c, d, e) {
          var f, g;
          return Q(function(h) {
            if (h.g == 1) return rb().Vi() && Ff(b.variants), F(h, Gf(b.variants, c, false, d), 2);
            f = null;
            a && (g = a.g) && (f = g.keySystem);
            b.variants = b.variants.filter(function(k2) {
              var l = Hf(k2, f, e);
              if (!l) {
                var m = [];
                k2.audio && m.push(If(k2.audio));
                k2.video && m.push(If(k2.video));
              }
              return l;
            });
            G(h);
          });
        }
        function Ff(a) {
          var b = (/* @__PURE__ */ new Map()).set("dvav", "avc3").set("dva1", "avc1").set("dvhe", "hev1").set("dvh1", "hvc1").set("dvc1", "vvc1").set("dvi1", "vvi1"), c = /* @__PURE__ */ new Set();
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && c.add(d.video);
          c = t(c);
          for (a = c.next(); !a.done; a = c.next()) {
            a = a.value;
            d = t(b);
            for (var e = d.next(); !e.done; e = d.next()) {
              var f = t(e.value);
              e = f.next().value;
              f = f.next().value;
              if (a.codecs.includes(e)) {
                a.codecs = a.codecs.replace(e, f);
                break;
              }
            }
          }
        }
        function Hf(a, b, c) {
          if (!a.decodingInfos.some(function(k2) {
            return !k2.supported || b && (k2 = k2.keySystemAccess) && (c[k2.keySystem] || k2.keySystem) != b ? false : true;
          })) return false;
          var d = rb(), e = d.Ob() === "Xbox";
          d = d.Oa() === "MOBILE" && d.Ha() === "GECKO";
          var f = a.video, g = f && f.width || 0, h = f && f.height || 0;
          if (e && f && (g > 1920 || h > 1080) && (f.codecs.includes("avc1.") || f.codecs.includes("avc3.")) || (e = f && f.dependencyStream) && !Hc(e)) return false;
          a = a.audio;
          return d && a && a.encrypted && a.codecs.toLowerCase().includes("opus") || a && a.dependencyStream ? false : true;
        }
        function Jf(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) {
              c = function(m, n) {
                if (m) {
                  var q = kd(m);
                  q.supported = m.supported && n.supported;
                  q.powerEfficient = m.powerEfficient && n.powerEfficient;
                  q.smooth = m.smooth && n.smooth;
                  n.keySystemAccess && !q.keySystemAccess && (q.keySystemAccess = n.keySystemAccess);
                  return q;
                }
                return n;
              };
              d = null;
              e = [];
              f = t(b);
              g = f.next();
              for (h = {}; !g.done; h = { cache: void 0, Pe: void 0 }, g = f.next()) k2 = g.value, h.Pe = ld(k2), h.cache = Kf, h.cache.has(h.Pe) ? d = c(d, h.cache.get(h.Pe)) : e.push(Lf(k2).then(/* @__PURE__ */ (function(m) {
                return function(n) {
                  var q = null;
                  n = t(n || []);
                  for (var r = n.next(); !r.done; r = n.next()) q = c(q, r.value);
                  q && (m.cache.set(m.Pe, q), d = c(d, q));
                };
              })(h)));
              return F(l, Promise.all(e), 2);
            }
            d && a.decodingInfos.push(d);
            G(l);
          });
        }
        function Lf(a) {
          var b = [""];
          a.video && (b = Re(a.video.contentType).split(","));
          var c = [""];
          a.audio && (c = Re(a.audio.contentType).split(","));
          var d = [];
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            for (var f = t(c), g = f.next(), h = {}; !g.done; h = { Qc: void 0 }, g = f.next()) g = g.value, h.Qc = jd(a), a.video && (h.Qc.video.contentType = Ie(Qe(h.Qc.video.contentType), e)), a.audio && (h.Qc.audio.contentType = Ie(Qe(h.Qc.audio.contentType), g)), d.push(new Promise(/* @__PURE__ */ (function(k2) {
              return function(l, m) {
                (rb().Oa() == "MOBILE" ? lf(5, navigator.mediaCapabilities.decodingInfo(k2.Qc)) : navigator.mediaCapabilities.decodingInfo(k2.Qc)).then(function(n) {
                  l(n);
                }).catch(m);
              };
            })(h)));
          }
          return Promise.all(d).catch(function() {
            JSON.stringify(a);
            return null;
          });
        }
        function Gf(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                if (e = a.some(function(E) {
                  return E.decodingInfos.length;
                })) return A.return();
                f = t(d);
                g = f.next();
                h = {};
              case 2:
                if (g.done) {
                  A.A(4);
                  break;
                }
                h.Ei = g.value;
                k2 = false;
                l = t(a);
                m = l.next();
              case 5:
                if (m.done) {
                  A.A(7);
                  break;
                }
                n = m.value;
                q = Mf(n, b, c).filter(/* @__PURE__ */ (function(E) {
                  return function(J) {
                    J = J[0];
                    return (J.keySystemConfiguration && J.keySystemConfiguration.keySystem) === E.Ei;
                  };
                })(h));
                r = t(q);
                u = r.next();
              case 8:
                if (u.done) {
                  A.A(10);
                  break;
                }
                v = u.value;
                return F(A, Jf(n, v), 9);
              case 9:
                u = r.next();
                A.A(8);
                break;
              case 10:
                n.decodingInfos.some(function(E) {
                  return E.supported;
                }) && (k2 = true);
                m = l.next();
                A.A(5);
                break;
              case 7:
                if (k2) return A.return();
                h = { Ei: void 0 };
                g = f.next();
                A.A(2);
                break;
              case 4:
                w = t(a), z = w.next();
              case 12:
                if (z.done) {
                  A.A(0);
                  break;
                }
                y = z.value;
                B = Mf(y, b, c).filter(function(E) {
                  E = E[0];
                  E = E.keySystemConfiguration && E.keySystemConfiguration.keySystem;
                  return !E || !d.includes(E);
                });
                C = t(B);
                H = C.next();
              case 15:
                if (H.done) {
                  z = w.next();
                  A.A(12);
                  break;
                }
                D = H.value;
                return F(
                  A,
                  Jf(y, D),
                  16
                );
              case 16:
                H = C.next(), A.A(15);
            }
          });
        }
        function Mf(a, b, c) {
          var d = a.audio, e = a.video, f = [], g = [];
          if (e) for (var h = t(e.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) {
            k2 = k2.value;
            var l = Re(k2);
            if (l.includes(",") && !d) {
              var m = l.split(","), n = Qe(k2);
              l = xc("video", m);
              m = xc("audio", m);
              m = Nf(m, n);
              n = Le(n, m, "audio");
              g.push({ contentType: n, channels: 2, bitrate: a.bandwidth || 1, samplerate: 1, spatialRendering: false });
            }
            l = Of(l);
            k2 = { contentType: Le(Qe(k2), l, "video"), width: e.width || 64, height: e.height || 64, bitrate: e.bandwidth || a.bandwidth || 1, framerate: e.frameRate || 30 };
            if (e.hdr) switch (e.hdr) {
              case "PQ":
                k2.transferFunction = "pq";
                break;
              case "HLG":
                k2.transferFunction = "hlg";
            }
            e.colorGamut && (k2.colorGamut = e.colorGamut);
            f.push(k2);
          }
          if (d) for (h = t(d.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) l = k2.value, k2 = Qe(l), l = Nf(Re(l), k2), k2 = Le(k2, l, "audio"), g.push({ contentType: k2, channels: d.channelsCount || 2, bitrate: d.bandwidth || a.bandwidth || 1, samplerate: d.audioSamplingRate || 1, spatialRendering: d.spatialAudio });
          h = [];
          f.length == 0 && f.push(null);
          g.length == 0 && g.push(null);
          f = t(f);
          for (k2 = f.next(); !k2.done; k2 = f.next()) for (k2 = k2.value, l = t(g), n = l.next(); !n.done; n = l.next()) n = n.value, m = { type: c ? "file" : "media-source" }, k2 && (m.video = k2), n && (m.audio = n), h.push(m);
          g = (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
          if (!g.length) return [h];
          a = [];
          c = /* @__PURE__ */ new Map();
          g = t(g);
          for (f = g.next(); !f.done; f = g.next()) f = f.value, c.get(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          g = b ? "required" : "optional";
          b = b ? ["persistent-license"] : ["temporary"];
          f = t(c.keys());
          for (k2 = f.next(); !k2.done; k2 = f.next()) {
            k2 = k2.value;
            n = c.get(k2);
            l = /* @__PURE__ */ new Map();
            n = t(n);
            for (m = n.next(); !m.done; m = n.next()) {
              m = m.value;
              var q = m.videoRobustness + "," + m.audioRobustness;
              l.get(q) || l.set(q, []);
              l.get(q).push(m);
            }
            l = t(l.values());
            for (n = l.next(); !n.done; n = l.next()) {
              n = n.value;
              m = [];
              q = t(h);
              for (var r = q.next(); !r.done; r = q.next()) {
                r = Object.assign({}, r.value);
                for (var u = { keySystem: k2, initDataType: "cenc", persistentState: g, distinctiveIdentifier: "optional", sessionTypes: b }, v = t(n), w = v.next(); !w.done; w = v.next()) {
                  w = w.value;
                  if (w.initData && w.initData.length) {
                    for (var z = /* @__PURE__ */ new Set(), y = t(w.initData), B = y.next(); !B.done; B = y.next()) z.add(B.value.initDataType);
                    u.initDataType = w.initData[0].initDataType;
                  }
                  w.distinctiveIdentifierRequired && (u.distinctiveIdentifier = "required");
                  w.persistentStateRequired && (u.persistentState = "required");
                  w.sessionType && (u.sessionTypes = [w.sessionType]);
                  d && (u.audio ? (w.encryptionScheme && (u.audio.encryptionScheme = u.audio.encryptionScheme || w.encryptionScheme), u.audio.robustness = u.audio.robustness || w.audioRobustness) : (u.audio = { robustness: w.audioRobustness }, w.encryptionScheme && (u.audio.encryptionScheme = w.encryptionScheme)), u.audio.robustness == "" && delete u.audio.robustness);
                  e && (u.video ? (w.encryptionScheme && (u.video.encryptionScheme = u.video.encryptionScheme || w.encryptionScheme), u.video.robustness = u.video.robustness || w.videoRobustness) : (u.video = { robustness: w.videoRobustness }, w.encryptionScheme && (u.video.encryptionScheme = w.encryptionScheme)), u.video.robustness == "" && delete u.video.robustness);
                }
                r.keySystemConfiguration = u;
                m.push(r);
              }
              a.push(m);
            }
          }
          return a;
        }
        function Nf(a, b) {
          var c = rb();
          return a.toLowerCase() == "flac" ? c.Ha() != "WEBKIT" ? "flac" : "fLaC" : a.toLowerCase() === "opus" ? c.Ha() != "WEBKIT" ? "opus" : Me(b) == "mp4" ? "Opus" : "opus" : a.toLowerCase() == "ac-3" && c.oe() ? "ec-3" : a;
        }
        function Of(a) {
          if (a.includes("avc1")) {
            var b = a.split(".");
            if (b.length == 3) return a = b.shift() + ".", a += parseInt(b.shift(), 10).toString(16), a += ("000" + parseInt(b.shift(), 10).toString(16)).slice(-4);
          } else if (a == "vp9") return "vp09.00.41.08";
          return a;
        }
        function Df(a) {
          a.textStreams = a.textStreams.filter(function(b) {
            b = Ie(b.mimeType, b.codecs);
            return Ye(b);
          });
        }
        function Ef(a) {
          var b, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                b = [], c = t(a.imageStreams), d = c.next();
              case 2:
                if (d.done) {
                  l.A(4);
                  break;
                }
                e = d.value;
                f = e.mimeType;
                f == "application/mp4" && e.codecs == "mjpg" && (f = "image/jpg");
                if (Pf.has(f)) {
                  l.A(5);
                  break;
                }
                g = Qf.get(f);
                if (!g) {
                  Pf.set(f, false);
                  l.A(5);
                  break;
                }
                return F(l, Tf(g), 7);
              case 7:
                h = l.h, Pf.set(f, h);
              case 5:
                (k2 = Pf.get(f)) && b.push(e);
                d = c.next();
                l.A(2);
                break;
              case 4:
                a.imageStreams = b, G(l);
            }
          });
        }
        function Tf(a) {
          return new Promise(function(b) {
            var c = new Image();
            c.src = a;
            "decode" in c ? c.decode().then(function() {
              b(true);
            }).catch(function() {
              b(false);
            }) : c.onload = c.onerror = function() {
              b(c.height === 2);
            };
          });
        }
        function Uf(a) {
          var b = a.audio, c = a.video, d = b ? b.mimeType : null, e = c ? c.mimeType : null, f = b ? b.codecs : null, g = c ? c.codecs : null, h = b ? b.groupId : null, k2 = [];
          c && k2.push(c.mimeType);
          b && k2.push(b.mimeType);
          k2 = k2[0] || null;
          var l = [];
          b && l.push(b.kind);
          c && l.push(c.kind);
          l = l[0] || null;
          var m = /* @__PURE__ */ new Set();
          if (b) for (var n = t(b.roles), q = n.next(); !q.done; q = n.next()) m.add(q.value);
          if (c) for (n = t(c.roles), q = n.next(); !q.done; q = n.next()) m.add(q.value);
          a = {
            id: a.id,
            active: false,
            type: "variant",
            bandwidth: a.bandwidth,
            language: a.language,
            label: null,
            videoLabel: null,
            kind: l,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: k2,
            audioMimeType: d,
            videoMimeType: e,
            codecs: "",
            audioCodec: f,
            videoCodec: g,
            primary: a.primary,
            roles: Array.from(m),
            audioRoles: null,
            videoRoles: null,
            forced: false,
            videoId: null,
            audioId: null,
            audioGroupId: h,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: null
          };
          if (c) {
            a.videoId = c.id;
            a.originalVideoId = c.originalId;
            a.width = c.width || null;
            a.height = c.height || null;
            a.frameRate = c.frameRate || null;
            a.pixelAspectRatio = c.pixelAspectRatio || null;
            a.videoBandwidth = c.bandwidth || null;
            a.hdr = c.hdr || null;
            a.colorGamut = c.colorGamut || null;
            a.videoLayout = c.videoLayout || null;
            a.videoRoles = c.roles;
            a.videoLabel = c.label;
            if (d = c.dependencyStream) a.width = d.width || a.width, a.height = d.height || a.height, a.videoCodec = d.codecs || a.videoCodec, a.pixelAspectRatio = d.pixelAspectRatio || a.pixelAspectRatio, a.videoBandwidth && d.bandwidth && (a.videoBandwidth += d.bandwidth);
            if (g.includes(",")) {
              a.channelsCount = c.channelsCount;
              a.audioSamplingRate = c.audioSamplingRate;
              a.spatialAudio = c.spatialAudio;
              a.originalLanguage = c.originalLanguage;
              a.audioMimeType = e;
              e = g.split(",");
              try {
                a.videoCodec = xc("video", e), a.audioCodec = xc("audio", e);
              } catch (r) {
              }
            }
          }
          b && (a.audioId = b.id, a.originalAudioId = b.originalId, a.channelsCount = b.channelsCount, a.audioSamplingRate = b.audioSamplingRate, a.audioBandwidth = b.bandwidth || null, a.spatialAudio = b.spatialAudio, a.label = b.label, a.audioRoles = b.roles, a.accessibilityPurpose = b.accessibilityPurpose, a.originalLanguage = b.originalLanguage, e = b.dependencyStream) && (a.audioCodec = e.codecs || a.audioCodec, a.audioBandwidth && e.bandwidth && (a.audioBandwidth += e.bandwidth));
          c && !a.videoBandwidth && (b ? a.audioBandwidth && (a.videoBandwidth = a.bandwidth - a.audioBandwidth) : a.videoBandwidth = a.bandwidth);
          b && !a.audioBandwidth && (c ? a.videoBandwidth && (a.audioBandwidth = a.bandwidth - a.videoBandwidth) : a.audioBandwidth = a.bandwidth);
          b = [];
          a.videoCodec && b.push(a.videoCodec);
          a.audioCodec && b.push(a.audioCodec);
          a.codecs = b.join(", ");
          return a;
        }
        function Vf(a) {
          return { id: a.id, active: false, type: Ac, bandwidth: a.bandwidth || 0, language: a.language, label: a.label, kind: a.kind || null, mimeType: a.mimeType, codecs: a.codecs || null, primary: a.primary, roles: a.roles, accessibilityPurpose: a.accessibilityPurpose, forced: a.forced, originalTextId: a.originalId, originalLanguage: a.originalLanguage };
        }
        function Wf(a) {
          var b = a.width || null, c = a.height || null, d = null;
          a.segmentIndex && (d = Xf(a.segmentIndex));
          var e = a.tilesLayout;
          d && (e = d.tilesLayout || e);
          e && b != null && (b /= Number(e.split("x")[0]));
          e && c != null && (c /= Number(e.split("x")[1]));
          return { id: a.id, type: "image", bandwidth: a.bandwidth || 0, width: b, height: c, mimeType: a.mimeType, codecs: a.codecs || null, tilesLayout: e || null, originalImageId: a.originalId };
        }
        function bg(a) {
          a.__shaka_id || (a.__shaka_id = cg++);
          return a.__shaka_id;
        }
        function dg(a) {
          var b = { id: bg(a), active: a.mode != "disabled", type: Ac, bandwidth: 0, language: of(a.language || "und"), label: a.label, kind: a.kind, mimeType: null, codecs: null, primary: false, roles: [], accessibilityPurpose: null, forced: a.kind == "forced", originalTextId: a.id, originalLanguage: a.language };
          a.kind == "captions" && (b.mimeType = "unknown");
          a.kind == "subtitles" && (b.mimeType = "text/vtt");
          a.kind && (b.roles = [a.kind]);
          return b;
        }
        function eg(a, b) {
          var c = a ? a.language : null;
          c = {
            id: bg(a || b),
            active: a ? a.enabled : b.selected,
            type: "variant",
            bandwidth: 0,
            language: of(c || "und"),
            label: a ? a.label : null,
            videoLabel: null,
            kind: a ? a.kind : null,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: null,
            audioMimeType: null,
            videoMimeType: null,
            codecs: null,
            audioCodec: null,
            videoCodec: null,
            primary: a ? a.kind == "main" : false,
            roles: [],
            forced: false,
            audioRoles: null,
            videoRoles: null,
            videoId: null,
            audioId: null,
            audioGroupId: null,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: b ? b.id : null,
            originalAudioId: a ? a.id : null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: c
          };
          a && a.kind && (c.roles = [a.kind], c.audioRoles = [a.kind]);
          a && a.configuration && (a.configuration.codec && (c.audioCodec = a.configuration.codec, c.codecs = c.audioCodec), a.configuration.bitrate && (c.audioBandwidth = a.configuration.bitrate, c.bandwidth += c.audioBandwidth), a.configuration.sampleRate && (c.audioSamplingRate = a.configuration.sampleRate), a.configuration.numberOfChannels && (c.channelsCount = a.configuration.numberOfChannels));
          if (b && b.configuration && (b.configuration.codec && (c.videoCodec = b.configuration.codec, c.codecs = c.codecs ? c.codecs + ("," + c.videoCodec) : c.videoCodec), b.configuration.bitrate && (c.videoBandwidth = b.configuration.bitrate, c.bandwidth += c.videoBandwidth), b.configuration.framerate && (c.frameRate = b.configuration.framerate), b.configuration.width && (c.width = b.configuration.width), b.configuration.height && (c.height = b.configuration.height), b.configuration.colorSpace && b.configuration.colorSpace.transfer)) switch (b.configuration.colorSpace.transfer) {
            case "pq":
              c.hdr = "PQ";
              break;
            case "hlg":
              c.hdr = "HLG";
              break;
            case "bt709":
              c.hdr = "SDR";
          }
          return c;
        }
        function fg(a) {
          return a.allowedByApplication && a.allowedByKeySystem && a.disabledUntilTime == 0;
        }
        function gg(a) {
          return a.filter(function(b) {
            return fg(b);
          });
        }
        function hg(a, b, c, d) {
          var e = a, f = a.filter(function(k2) {
            return k2.primary;
          });
          f.length && (e = f);
          var g = e.length ? e[0].language : "";
          e = e.filter(function(k2) {
            return k2.language == g;
          });
          if (b) {
            var h = vf(of(b), a.map(function(k2) {
              return k2.language;
            }));
            h && (e = a.filter(function(k2) {
              return of(k2.language) == h;
            }));
          }
          e = e.filter(function(k2) {
            return k2.forced == d;
          });
          if (c) {
            if (a = ig(e, c), a.length) return a;
          } else if (a = e.filter(function(k2) {
            return k2.roles.length == 0;
          }), a.length) return a;
          a = e.map(function(k2) {
            return k2.roles;
          }).reduce(hf, []);
          return a.length ? ig(e, a[0]) : e;
        }
        function ig(a, b) {
          return a.filter(function(c) {
            return c.roles.includes(b);
          });
        }
        function jg(a) {
          var b = [];
          a.audio && b.push(a.audio);
          a.video && b.push(a.video);
          return b;
        }
        function kg(a, b) {
          b.length && (b = b.filter(function(c) {
            return Ne(a.codecs) == Ne(c.codecs);
          }).sort(function(c, d) {
            return c.bandwidth && d.bandwidth && c.bandwidth != d.bandwidth ? c.bandwidth - d.bandwidth : (c.width || 0) - (d.width || 0);
          }), a.trickModeVideo = b[0], b.length > 1 && (b = b.find(function(c) {
            return a.width == c.width && a.height == c.height;
          }))) && (a.trickModeVideo = b);
        }
        function If(a) {
          return a.type == "audio" ? "type=audio codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " channelsCount=" + a.channelsCount + " audioSamplingRate=" + a.audioSamplingRate : a.type == "video" ? "type=video codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " frameRate=" + a.frameRate + " width=" + a.width + " height=" + a.height : "unexpected stream type";
        }
        function lg(a, b, c) {
          if (c.autoShowText == 0) return false;
          if (c.autoShowText == 1) return true;
          var d = of(c.preferredTextLanguage);
          b = of(b.language);
          if (c.autoShowText == 2) return nf(b, d);
          if (c.autoShowText == 3) {
            if (!a) return false;
            a = of(a.language);
            return nf(b, d) && !nf(a, b);
          }
          $a("Invalid autoShowText setting!");
          return false;
        }
        function mg(a) {
          var b = { id: 0, language: "und", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 100, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] };
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = {
              id: 0,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: null,
              mimeType: c ? Qe(c) : "",
              codecs: c ? Re(c) : "",
              encrypted: true,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: "und",
              originalLanguage: null,
              label: null,
              type: "video",
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: false,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set(),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            };
            d.fullMimeTypes.add(Ie(d.mimeType, d.codecs));
            c.startsWith("audio/") ? (d.type = "audio", b.audio = d) : b.video = d;
          }
          return b;
        }
        S("shaka.util.StreamUtils", wf);
        wf.meetsRestrictions = Af;
        var Kf = /* @__PURE__ */ new Map(), cg = 0, Pf = (/* @__PURE__ */ new Map()).set("image/svg+xml", true).set("image/png", true).set("image/jpeg", true).set("image/jpg", true), Qf = (/* @__PURE__ */ new Map()).set("image/webp", "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif", "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");
        function ng() {
          var a = this;
          this.H = null;
          this.B = false;
          this.u = new Xa();
          this.j = new kb();
          navigator.connection && navigator.connection.addEventListener && this.j.D(navigator.connection, "change", function() {
            if (a.B && a.g.useNetworkInformation) {
              a.u = new Xa();
              a.g && a.u.configure(a.g.advanced);
              var b = a.chooseVariant();
              b && navigator.onLine && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.l = [];
          this.I = 1;
          this.J = false;
          this.h = this.o = this.g = this.C = null;
          this.m = new gf(function() {
            if (a.B && (a.g.restrictToElementSize || a.g.restrictToScreenSize)) {
              var b = a.chooseVariant();
              b && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.F = window2;
          "documentPictureInPicture" in window2 && this.j.D(window2.documentPictureInPicture, "enter", function() {
            a.F = window2.documentPictureInPicture.window;
            a.m && a.m.Kb();
            a.j.za(a.F, "pagehide", function() {
              a.F = window2;
              a.m && a.m.Kb();
            });
          });
          this.G = this.i = null;
        }
        p = ng.prototype;
        p.stop = function() {
          this.H = null;
          this.B = false;
          this.l = [];
          this.I = 1;
          this.o = this.C = null;
          this.h && (this.h.disconnect(), this.h = null);
          this.m && this.m.stop();
          this.G = this.i = null;
        };
        p.release = function() {
          this.stop();
          this.j.release();
          this.m = null;
        };
        p.init = function(a) {
          this.H = a;
        };
        p.chooseVariant = function(a) {
          a = a === void 0 ? false : a;
          var b = Infinity, c = Infinity;
          this.g.restrictToScreenSize && (c = this.g.ignoreDevicePixelRatio ? 1 : this.F.devicePixelRatio, b = this.F.screen.height * c, c *= this.F.screen.width);
          if (this.h && this.g.restrictToElementSize) {
            var d = this.g.ignoreDevicePixelRatio ? 1 : this.F.devicePixelRatio, e = this.o.clientHeight, f = this.o.clientWidth;
            this.i && document.pictureInPictureElement && document.pictureInPictureElement == this.o && (e = this.i.height, f = this.i.width);
            b = Math.min(b, e * d);
            c = Math.min(
              c,
              f * d
            );
          }
          e = this.l.filter(function(l) {
            return l && !(l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching);
          });
          e.length || (e = this.l);
          d = e;
          a && e.length != this.l.length && (d = this.l.filter(function(l) {
            return l && (l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching ? true : false);
          }));
          a = og(this, this.g.restrictions, d, Infinity, Infinity);
          if (b != Infinity || c != Infinity) {
            a = pg(a);
            a = t(a);
            for (e = a.next(); !e.done; e = a.next()) if (e = e.value, e.height >= b && e.width >= c) {
              b = e.height;
              c = e.width;
              break;
            }
            a = og(
              this,
              this.g.restrictions,
              d,
              b,
              c
            );
          }
          b = this.getBandwidthEstimate();
          d.length && !a.length && (a = og(this, null, d, Infinity, Infinity), a = [a[0]]);
          c = a[0] || null;
          for (d = 0; d < a.length; d++) {
            e = a[d];
            var g = isNaN(this.I) ? 1 : Math.abs(this.I);
            f = g * e.bandwidth / this.g.bandwidthDowngradeTarget;
            for (var h = { bandwidth: Infinity }, k2 = d + 1; k2 < a.length; k2++) if (e.bandwidth != a[k2].bandwidth) {
              h = a[k2];
              break;
            }
            g = g * h.bandwidth / this.g.bandwidthUpgradeTarget;
            c && e && b >= f && b <= g && (c.bandwidth != e.bandwidth || c.bandwidth == e.bandwidth && c.video && e.video && (c.video.width < e.video.width || c.video.height < e.video.height)) && (c = e);
          }
          this.C = Date.now();
          return c;
        };
        p.enable = function() {
          this.B = true;
          this.l.length && this.trySuggestStreams();
        };
        p.disable = function() {
          this.B = false;
        };
        p.segmentDownloaded = function(a, b, c, d) {
          var e = a;
          this.g.removeLatencyFromFirstPacketTime && d && d.packetNumber === 1 && d.timeToFirstByte && (e = a - d.timeToFirstByte);
          e >= this.g.cacheLoadThreshold && this.u.sample(e, b);
          c && this.C != null && this.B && qg(this);
        };
        p.trySuggestStreams = function() {
          this.B && (this.C = Date.now(), qg(this, true));
        };
        p.getBandwidthEstimate = function() {
          var a = this.g.defaultBandwidthEstimate;
          navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && (a = navigator.connection.downlink * 1e6);
          if (navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && this.g.preferNetworkInformationBandwidth) return a;
          a = this.u.getBandwidthEstimate(a);
          return this.G ? this.G.getBandwidthEstimate(a) : a;
        };
        p.setVariants = function(a) {
          if (hb(a, this.l)) return false;
          this.l = a;
          return true;
        };
        p.playbackRateChanged = function(a) {
          this.I = a;
        };
        p.setMediaElement = function(a) {
          function b() {
            c.m.ia(rg);
          }
          var c = this;
          this.o = a;
          this.h && (this.h.disconnect(), this.h = null);
          this.o && "ResizeObserver" in window2 && (this.h = new ResizeObserver(b), this.h.observe(this.o));
          this.j.D(a, "enterpictureinpicture", function(d) {
            d.pictureInPictureWindow && (c.i = d.pictureInPictureWindow, c.j.D(c.i, "resize", b));
          });
          this.j.D(a, "leavepictureinpicture", function() {
            c.i && c.j.Ma(c.i, "resize", b);
            c.i = null;
          });
        };
        p.setCmsdManager = function(a) {
          this.G = a;
        };
        p.configure = function(a) {
          this.g = a;
          this.u && this.g && this.u.configure(this.g.advanced);
        };
        function qg(a, b) {
          if (b === void 0 || !b) {
            if (!a.J) {
              b = a.u;
              if (!(b.g >= b.i)) return;
              a.J = true;
              a.C -= (a.g.switchInterval - a.g.minTimeToSwitch) * 1e3;
            }
            if (Date.now() - a.C < a.g.switchInterval * 1e3) return;
          }
          b = a.chooseVariant();
          a.getBandwidthEstimate();
          b && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
        }
        function og(a, b, c, d, e) {
          if (a.G) {
            var f = a.G.ci();
            f && (c = c.filter(function(g) {
              return g.bandwidth && f ? g.bandwidth <= f : true;
            }));
          }
          b && (c = c.filter(function(g) {
            return Af(g, b, { width: e, height: d });
          }));
          return c.sort(function(g, h) {
            return g.bandwidth - h.bandwidth;
          });
        }
        function pg(a) {
          var b = [];
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) (c = c.value) && (c = c.video) && c.height && c.width && b.push({ height: c.height, width: c.width });
          return b.sort(function(d, e) {
            return d.width - e.width;
          });
        }
        S("shaka.abr.SimpleAbrManager", ng);
        ng.prototype.configure = ng.prototype.configure;
        ng.prototype.setCmsdManager = ng.prototype.setCmsdManager;
        ng.prototype.setMediaElement = ng.prototype.setMediaElement;
        ng.prototype.playbackRateChanged = ng.prototype.playbackRateChanged;
        ng.prototype.setVariants = ng.prototype.setVariants;
        ng.prototype.getBandwidthEstimate = ng.prototype.getBandwidthEstimate;
        ng.prototype.trySuggestStreams = ng.prototype.trySuggestStreams;
        ng.prototype.segmentDownloaded = ng.prototype.segmentDownloaded;
        ng.prototype.disable = ng.prototype.disable;
        ng.prototype.enable = ng.prototype.enable;
        ng.prototype.chooseVariant = ng.prototype.chooseVariant;
        ng.prototype.init = ng.prototype.init;
        ng.prototype.release = ng.prototype.release;
        ng.prototype.stop = ng.prototype.stop;
        var rg = 1;
        function sg(a, b) {
          if (a === b || !a.length || !b.length) return true;
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            if (tg(c)) return true;
            for (var d = t(b), e = d.next(); !e.done; e = d.next()) if (e = e.value, c.keySystem === e.keySystem || tg(e)) return true;
          }
          return false;
        }
        function ug(a, b) {
          if (!a.length) return b;
          if (!b.length) return a;
          var c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.keySystem == f.keySystem) {
              e = /* @__PURE__ */ new Map();
              for (var g = t((d.initData || []).concat(f.initData || [])), h = g.next(); !h.done; h = g.next()) h = h.value, e.set(h.keyId, h);
              e = Array.from(e.values());
              g = d.keyIds && f.keyIds ? new Set([].concat(x(d.keyIds), x(f.keyIds))) : d.keyIds || f.keyIds;
              c.push({ keySystem: d.keySystem, licenseServerUri: d.licenseServerUri || f.licenseServerUri, distinctiveIdentifierRequired: d.distinctiveIdentifierRequired || f.distinctiveIdentifierRequired, persistentStateRequired: d.persistentStateRequired || f.persistentStateRequired, videoRobustness: d.videoRobustness || f.videoRobustness, audioRobustness: d.audioRobustness || f.audioRobustness, serverCertificate: d.serverCertificate || f.serverCertificate, serverCertificateUri: d.serverCertificateUri || f.serverCertificateUri, initData: e, keyIds: g });
              break;
            } else tg(d) ? c.push(d) : tg(f) && c.push(f);
          }
          return c;
        }
        function vg(a) {
          return a ? !!a.match(/^com\.(microsoft|chromecast)\.playready/) : false;
        }
        function wg(a) {
          return a ? !!a.match(/^com\.apple\.fps/) : false;
        }
        function tg(a) {
          return (a = a.licenseServerUri) ? a.startsWith("data:application/json;base64,") : false;
        }
        var xg = new qb(function() {
          return Xb(new Uint8Array([0]));
        }), yg = /* @__PURE__ */ new Map();
        function zg(a, b) {
          var c = Ag();
          this.l = a.maxAttempts == null ? c.maxAttempts : a.maxAttempts;
          this.j = a.baseDelay == null ? c.baseDelay : a.baseDelay;
          this.o = a.fuzzFactor == null ? c.fuzzFactor : a.fuzzFactor;
          this.m = a.backoffFactor == null ? c.backoffFactor : a.backoffFactor;
          this.g = 0;
          this.h = this.j;
          if (this.i = b === void 0 ? false : b) this.g = 1;
        }
        function Bg(a) {
          var b, c;
          return Q(function(d) {
            if (d.g == 1) {
              if (a.g >= a.l) if (a.i) a.g = 1, a.h = a.j;
              else throw new U(2, 7, 1010);
              b = a.g;
              a.g++;
              if (b == 0) return d.return();
              c = a.h * (1 + (Math.random() * 2 - 1) * a.o);
              return F(d, new Promise(function(e) {
                new gf(e).ia(c / 1e3);
              }), 2);
            }
            a.h *= a.m;
            G(d);
          });
        }
        function Ag() {
          return { maxAttempts: 2, baseDelay: 1e3, backoffFactor: 2, fuzzFactor: 0.5, timeout: 3e4, stallTimeout: 5e3, connectionTimeout: 1e4 };
        }
        ;
        function Cg() {
          var a, b, c = new Promise(function(d, e) {
            a = d;
            b = e;
          });
          c.resolve = a;
          c.reject = b;
          return c;
        }
        Cg.prototype.resolve = function() {
        };
        Cg.prototype.reject = function() {
        };
        function Dg(a, b) {
          this.promise = a;
          this.i = b;
          this.g = null;
        }
        function Eg(a) {
          return new Dg(Promise.reject(a), function() {
            return Promise.resolve();
          });
        }
        function Fg() {
          var a = Promise.reject(new U(2, 7, 7001));
          a.catch(function() {
          });
          return new Dg(a, function() {
            return Promise.resolve();
          });
        }
        function Gg(a) {
          return new Dg(Promise.resolve(a), function() {
            return Promise.resolve();
          });
        }
        function Hg(a) {
          return new Dg(a, function() {
            return a.catch(function() {
            });
          });
        }
        Dg.prototype.abort = function() {
          this.g || (this.g = this.i());
          return this.g;
        };
        function Ig(a) {
          return new Dg(Promise.all(a.map(function(b) {
            return b.promise;
          })), function() {
            return Promise.all(a.map(function(b) {
              return b.abort();
            }));
          });
        }
        Dg.prototype.finally = function(a) {
          this.promise.then(function() {
            return a(true);
          }, function() {
            return a(false);
          });
          return this;
        };
        Dg.prototype.Xa = function(a, b) {
          function c(h) {
            return function(k2) {
              if (e.g && h) f.reject(g);
              else {
                var l = h ? a : b;
                l ? d = Jg(l, k2, f) : (h ? f.resolve : f.reject)(k2);
              }
            };
          }
          function d() {
            f.reject(g);
            return e.abort();
          }
          var e = this, f = new Cg();
          f.catch(function() {
          });
          var g = new U(2, 7, 7001);
          this.promise.then(c(true), c(false));
          return new Dg(f, function() {
            return d();
          });
        };
        function Jg(a, b, c) {
          try {
            var d = a(b);
            if (d && d.promise && d.abort) return c.resolve(d.promise), function() {
              return d.abort();
            };
            c.resolve(d);
            return function() {
              return Promise.resolve(d).then(function() {
              }, function() {
              });
            };
          } catch (e) {
            return c.reject(e), function() {
              return Promise.resolve();
            };
          }
        }
        da.Object.defineProperties(Dg.prototype, { aborted: { configurable: true, enumerable: true, get: function() {
          return this.g !== null;
        } } });
        S("shaka.util.AbortableOperation", Dg);
        Dg.prototype.chain = Dg.prototype.Xa;
        Dg.prototype["finally"] = Dg.prototype.finally;
        Dg.all = Ig;
        Dg.prototype.abort = Dg.prototype.abort;
        Dg.notAbortable = Hg;
        Dg.completed = Gg;
        Dg.aborted = Fg;
        Dg.failed = Eg;
        function V(a, b) {
          if (b) if (b instanceof Map) for (var c = t(b.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, Object.defineProperty(this, d, { value: b.get(d), writable: true, enumerable: true });
          else for (c in b) Object.defineProperty(this, c, { value: b[c], writable: true, enumerable: true });
          this.defaultPrevented = this.cancelable = this.bubbles = false;
          this.timeStamp = window2.performance && window2.performance.now ? window2.performance.now() : Date.now();
          this.type = a;
          this.isTrusted = false;
          this.target = this.currentTarget = null;
          this.g = false;
        }
        function Kg(a) {
          var b = new V(a.type), c;
          for (c in a) Object.defineProperty(b, c, { value: a[c], writable: true, enumerable: true });
          return b;
        }
        V.prototype.preventDefault = function() {
          this.cancelable && (this.defaultPrevented = true);
        };
        V.prototype.stopImmediatePropagation = function() {
          this.g = true;
        };
        V.prototype.stopPropagation = function() {
        };
        S("shaka.util.FakeEvent", V);
        var Lg = {
          ql: "abrstatuschanged",
          rl: "adaptation",
          ul: "audiotrackchanged",
          vl: "audiotrackschanged",
          wl: "boundarycrossed",
          xl: "buffering",
          yl: "canupdatestarttime",
          zl: "complete",
          Al: "currentitemchanged",
          Bl: "downloadcompleted",
          Cl: "downloadfailed",
          Dl: "downloadheadersreceived",
          El: "drmsessionupdate",
          Fl: "emsg",
          Ll: "itemsinserted",
          Ml: "itemsremoved",
          am: "prft",
          Error: "error",
          Gl: "expirationupdated",
          Hl: "firstquartile",
          Il: "gapjumped",
          Nl: "keystatuschanged",
          Ql: "loaded",
          Rl: "loading",
          Tl: "manifestparsed",
          Ul: "manifestupdated",
          Vl: "mediaqualitychanged",
          Wl: "mediasourcerecovered",
          Xl: "metadataadded",
          Metadata: "metadata",
          Yl: "midpoint",
          Zl: "nospatialvideoinfo",
          $l: "onstatechange",
          bm: "ratechange",
          gm: "segmentappended",
          hm: "sessiondata",
          im: "spatialvideoinfo",
          jm: "stalldetected",
          lm: "started",
          nm: "statechanged",
          om: "streaming",
          pm: "textchanged",
          qm: "texttrackvisibility",
          rm: "thirdquartile",
          sm: "timelineregionadded",
          tm: "timelineregionenter",
          um: "timelineregionexit",
          vm: "trackschanged",
          xm: "unloading",
          zm: "variantchanged"
        };
        function Mg() {
          this.ab = new jb();
          this.Fe = this;
        }
        Mg.prototype.addEventListener = function(a, b) {
          this.ab && this.ab.push(a, b);
        };
        Mg.prototype.removeEventListener = function(a, b) {
          this.ab && this.ab.remove(a, b);
        };
        Mg.prototype.dispatchEvent = function(a) {
          if (!this.ab) return true;
          var b = this.ab.get(a.type) || [], c = this.ab.get("All");
          c && (b = b.concat(c));
          b = t(b);
          for (c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            a.target = this.Fe;
            a.currentTarget = this.Fe;
            try {
              c.handleEvent ? c.handleEvent(a) : c.call(this, a);
            } catch (d) {
            }
            if (a.g) break;
          }
          return a.defaultPrevented;
        };
        Mg.prototype.release = function() {
          this.ab = null;
        };
        function Ng() {
          this.g = [];
        }
        function Og(a, b) {
          a.g.push(b.finally(function() {
            gb(a.g, b);
          }));
        }
        Ng.prototype.destroy = function() {
          for (var a = [], b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.promise.catch(function() {
          }), a.push(c.abort());
          this.g = [];
          return Promise.all(a);
        };
        function Pg(a, b, c, d, e, f, g) {
          Mg.call(this);
          this.i = null;
          this.j = false;
          this.u = new Ng();
          this.g = /* @__PURE__ */ new Set();
          this.h = /* @__PURE__ */ new Set();
          this.o = a || null;
          this.m = b || null;
          this.B = c || null;
          this.C = d || null;
          this.F = e || null;
          this.H = f || null;
          this.G = g || null;
          this.l = /* @__PURE__ */ new Map();
        }
        la(Pg, Mg);
        p = Pg.prototype;
        p.configure = function(a) {
          this.i = a;
        };
        function Qg(a, b, c, d) {
          d = d === void 0 ? false : d;
          c = c || Rg;
          var e = Sg.get(a);
          (!e || c >= e.priority) && Sg.set(a, { priority: c, yf: b, Ek: d });
        }
        function Tg(a, b) {
          for (var c = t(a.g), d = c.next(); !d.done; d = c.next()) b.g.add(d.value);
          a = t(a.h);
          for (c = a.next(); !c.done; c = a.next()) b.h.add(c.value);
        }
        p.Hk = function(a) {
          this.g.add(a);
        };
        p.fl = function(a) {
          this.g.delete(a);
        };
        p.pj = function() {
          this.g.clear();
        };
        p.Ik = function(a) {
          this.h.add(a);
        };
        p.hl = function(a) {
          this.h.delete(a);
        };
        p.qj = function() {
          this.h.clear();
        };
        p.Rh = function() {
          this.l.clear();
        };
        function Ug(a, b, c) {
          return { uris: a, method: "GET", body: null, headers: {}, allowCrossSiteCredentials: false, retryParameters: b, licenseRequestType: null, sessionId: null, drmInfo: null, initData: null, initDataType: null, streamDataCallback: c === void 0 ? null : c };
        }
        p.destroy = function() {
          this.j = true;
          this.g.clear();
          this.h.clear();
          this.l.clear();
          Mg.prototype.release.call(this);
          return this.u.destroy();
        };
        p.request = function(a, b, c) {
          var d = this, e = new Vg();
          if (this.j) {
            var f = Promise.reject(new U(2, 7, 7001));
            f.catch(function() {
            });
            return new Wg(f, function() {
              return Promise.resolve();
            }, e);
          }
          b.method = b.method || "GET";
          b.headers = b.headers || {};
          b.retryParameters = b.retryParameters ? jd(b.retryParameters) : Ag();
          b.uris = jd(b.uris);
          f = Xg(this, a, b, c);
          var g = f.Xa(function() {
            return Yg(d, a, b, c, new zg(b.retryParameters, false), 0, null, e);
          }), h = g.Xa(function(q) {
            return Zg(d, a, q, c);
          }), k2 = Date.now(), l = 0;
          f.promise.then(function() {
            l = Date.now() - k2;
          }, function() {
          });
          var m = 0;
          g.promise.then(function() {
            m = Date.now();
          }, function() {
          });
          var n = h.Xa(function(q) {
            var r = Date.now() - m, u = q.response;
            u.timeMs += l;
            u.timeMs += r;
            q.fk || !d.o || u.fromCache || b.method == "HEAD" || a != $g || d.o(u.timeMs, u.data.byteLength, ah(c), b, c);
            d.G && d.G(a, u, c);
            return u;
          }, function(q) {
            q && (q.severity = 2);
            throw q;
          });
          f = new Wg(n.promise, function() {
            return n.abort();
          }, e);
          Og(this.u, f);
          return f;
        };
        function Xg(a, b, c, d) {
          function e(h) {
            f = f.Xa(function() {
              c.body && (c.body = Xb(c.body));
              return h(b, c, d);
            });
          }
          var f = Gg(void 0);
          a.F && e(a.F);
          a = t(a.g);
          for (var g = a.next(); !g.done; g = a.next()) e(g.value);
          return f.Xa(void 0, function(h) {
            if (h instanceof U && h.code == 7001) throw h;
            throw new U(2, 1, 1006, h);
          });
        }
        function Yg(a, b, c, d, e, f, g, h) {
          a.i.forceHTTP && (c.uris[f] = c.uris[f].replace("https://", "http://"));
          a.i.forceHTTPS && (c.uris[f] = c.uris[f].replace("http://", "https://"));
          f > 0 && a.H && a.H(b, d, c.uris[f], c.uris[f - 1]);
          var k2 = new Cb(c.uris[f]), l = k2.ec, m = false;
          l || (l = location.protocol, l = l.slice(0, -1), Db(k2, l), c.uris[f] = k2.toString());
          l = l.toLowerCase();
          var n = (l = Sg.get(l)) ? l.yf : null;
          if (!n) return Eg(new U(2, 1, 1e3, k2));
          var q = l.Ek;
          (k2 = a.l.get(k2.Eb)) && (c.headers["common-access-token"] = k2);
          var r = null, u = null, v = false, w = false, z;
          return Hg(Bg(e)).Xa(function() {
            if (a.j) return Fg();
            z = Date.now();
            var y = 0;
            c.requestStartTime = Date.now();
            var B = n(c.uris[f], c, b, function(D, A, E) {
              r && r.stop();
              u && u.ia(H / 1e3);
              a.o && b == $g && (y++, c.packetNumber = y, a.o(D, A, ah(d), c, d), m = true, h.g = E);
            }, function(D) {
              w = true;
              c.timeToFirstByte = Date.now() - c.requestStartTime;
              a.m && a.m(D, c, b);
            }, { minBytesForProgressEvents: a.i.minBytesForProgressEvents });
            if (!q) return B;
            var C = c.retryParameters.connectionTimeout;
            C && (r = new gf(function() {
              v = true;
              B.abort();
            }), r.ia(C / 1e3));
            var H = c.retryParameters.stallTimeout;
            H && (u = new gf(function() {
              v = true;
              B.abort();
            }));
            return B;
          }).Xa(function(y) {
            r && r.stop();
            u && u.stop();
            y.timeMs == void 0 && (y.timeMs = Date.now() - z);
            var B = y.headers["common-access-token"];
            if (B) {
              var C = new Cb(y.uri);
              a.l.set(C.Eb, B);
            }
            B = { response: y, fk: m };
            !w && a.m && a.m(y.headers, c, b);
            a.B && a.B(c, y);
            return B;
          }, function(y) {
            r && r.stop();
            u && u.stop();
            if (a.C) {
              var B = null, C = 0;
              y instanceof U && (B = y, y.code == 1001 && (C = y.data[1]));
              a.C(c, B, C, v);
            }
            if (a.j) return Fg();
            v && (y = new U(1, 1, 1003, c.uris[f], b));
            if (y instanceof U) {
              if (y.code == 7001) throw y;
              if (y.code == 1010) throw g;
              if (y.severity == 1) {
                B = (/* @__PURE__ */ new Map()).set("error", y);
                B = new V("retry", B);
                B.cancelable = true;
                a.dispatchEvent(B);
                if (B.defaultPrevented) throw y;
                f = (f + 1) % c.uris.length;
                return Yg(a, b, c, d, e, f, y, h);
              }
            }
            throw y;
          });
        }
        function Zg(a, b, c, d) {
          var e = Gg(void 0);
          a = t(a.h);
          for (var f = a.next(), g = {}; !f.done; g = { Ki: void 0 }, f = a.next()) g.Ki = f.value, e = e.Xa(/* @__PURE__ */ (function(h) {
            return function() {
              var k2 = c.response;
              k2.data && (k2.data = Xb(k2.data));
              return (0, h.Ki)(b, k2, d);
            };
          })(g));
          return e.Xa(function() {
            return c;
          }, function(h) {
            var k2 = 2;
            if (h instanceof U) {
              if (h.code == 7001) throw h;
              k2 = h.severity;
            }
            throw new U(k2, 1, 1007, h);
          });
        }
        function ah(a) {
          if (a) {
            var b = a.segment;
            a = a.stream;
            if (b && a && a.fastSwitching && b.Xc) return false;
          }
          return true;
        }
        S("shaka.net.NetworkingEngine", Pg);
        Pg.prototype.request = Pg.prototype.request;
        Pg.prototype.destroy = Pg.prototype.destroy;
        Pg.makeRequest = Ug;
        Pg.defaultRetryParameters = function() {
          return Ag();
        };
        Pg.prototype.clearCommonAccessTokenMap = Pg.prototype.Rh;
        Pg.prototype.clearAllResponseFilters = Pg.prototype.qj;
        Pg.prototype.unregisterResponseFilter = Pg.prototype.hl;
        Pg.prototype.registerResponseFilter = Pg.prototype.Ik;
        Pg.prototype.clearAllRequestFilters = Pg.prototype.pj;
        Pg.prototype.unregisterRequestFilter = Pg.prototype.fl;
        Pg.prototype.registerRequestFilter = Pg.prototype.Hk;
        Pg.unregisterScheme = function(a) {
          Sg.delete(a);
        };
        Pg.registerScheme = Qg;
        Pg.prototype.configure = Pg.prototype.configure;
        function Vg() {
          this.g = 0;
        }
        Pg.NumBytesRemainingClass = Vg;
        function Wg(a, b, c) {
          Dg.call(this, a, b);
          this.h = c;
        }
        la(Wg, Dg);
        Pg.PendingRequest = Wg;
        var $g = 1;
        Pg.RequestType = { MANIFEST: 0, SEGMENT: $g, LICENSE: 2, APP: 3, TIMING: 4, SERVER_CERTIFICATE: 5, KEY: 6, ADS: 7, CONTENT_STEERING: 8, CMCD: 9 };
        Pg.AdvancedRequestType = { INIT_SEGMENT: 0, MEDIA_SEGMENT: 1, MEDIA_PLAYLIST: 2, MASTER_PLAYLIST: 3, MPD: 4, MSS: 5, MPD_PATCH: 6, MEDIATAILOR_SESSION_INFO: 7, MEDIATAILOR_TRACKING_INFO: 8, MEDIATAILOR_STATIC_RESOURCE: 9, MEDIATAILOR_TRACKING_EVENT: 10, INTERSTITIAL_ASSET_LIST: 11, INTERSTITIAL_AD_URL: 12 };
        var Rg = 3;
        Pg.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: Rg };
        var Sg = /* @__PURE__ */ new Map();
        function bh(a) {
          this.g = false;
          this.h = new Cg();
          this.i = a;
        }
        bh.prototype.destroy = function() {
          var a = this;
          if (this.g) return this.h;
          this.g = true;
          return this.i().then(function() {
            a.h.resolve();
          }, function() {
            a.h.resolve();
          });
        };
        function ch(a, b) {
          if (a.g) {
            if (b instanceof U && b.code == 7003) throw b;
            throw new U(2, 7, 7003, b);
          }
        }
        ;
        function dh(a, b) {
          var c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) c.push(b(d.value));
          return c;
        }
        function eh(a, b) {
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) if (!b(c.value)) return false;
          return true;
        }
        ;
        function fh(a) {
          for (var b = /* @__PURE__ */ new Map(), c = t(Object.keys(a)), d = c.next(); !d.done; d = c.next()) d = d.value, b.set(d, a[d]);
          return b;
        }
        function gh(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d] = c;
          });
          return b;
        }
        ;
        function hh(a, b) {
          this.h = $b(a);
          this.i = b == ih;
          this.g = 0;
        }
        p = hh.prototype;
        p.Ia = function() {
          return this.g < this.h.byteLength;
        };
        p.Pa = function() {
          return this.g;
        };
        p.getLength = function() {
          return this.h.byteLength;
        };
        p.Y = function() {
          try {
            var a = this.h.getUint8(this.g);
            this.g += 1;
            return a;
          } catch (b) {
            throw jh();
          }
        };
        p.Ca = function() {
          try {
            var a = this.h.getUint16(this.g, this.i);
            this.g += 2;
            return a;
          } catch (b) {
            throw jh();
          }
        };
        p.U = function() {
          try {
            var a = this.h.getUint32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw jh();
          }
        };
        p.Zg = function() {
          try {
            var a = this.h.getInt32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw jh();
          }
        };
        p.Dd = function() {
          try {
            if (this.i) {
              var a = this.h.getUint32(this.g, true);
              var b = this.h.getUint32(this.g + 4, true);
            } else b = this.h.getUint32(this.g, false), a = this.h.getUint32(this.g + 4, false);
          } catch (c) {
            throw jh();
          }
          if (b > 2097151) throw new U(2, 3, 3001);
          this.g += 8;
          return b * 4294967296 + a;
        };
        p.Ub = function(a, b) {
          if (this.g + a > this.h.byteLength) throw jh();
          var c = Vb(this.h, this.g, a);
          this.g += a;
          return b ? new Uint8Array(c) : c;
        };
        p.skip = function(a) {
          if (this.g + a > this.h.byteLength) throw jh();
          this.g += a;
        };
        p.Li = function(a) {
          if (this.g < a) throw jh();
          this.g -= a;
        };
        p.seek = function(a) {
          if (a < 0 || a > this.h.byteLength) throw jh();
          this.g = a;
        };
        p.Yc = function() {
          for (var a = this.g; this.Ia() && this.h.getUint8(this.g) != 0; ) this.g += 1;
          a = Vb(this.h, a, this.g - a);
          this.g += 1;
          return cc(a);
        };
        function jh() {
          return new U(2, 3, 3e3);
        }
        S("shaka.util.DataViewReader", hh);
        hh.prototype.readTerminatedString = hh.prototype.Yc;
        hh.prototype.seek = hh.prototype.seek;
        hh.prototype.rewind = hh.prototype.Li;
        hh.prototype.skip = hh.prototype.skip;
        hh.prototype.readBytes = hh.prototype.Ub;
        hh.prototype.readUint64 = hh.prototype.Dd;
        hh.prototype.readInt32 = hh.prototype.Zg;
        hh.prototype.readUint32 = hh.prototype.U;
        hh.prototype.readUint16 = hh.prototype.Ca;
        hh.prototype.readUint8 = hh.prototype.Y;
        hh.prototype.getLength = hh.prototype.getLength;
        hh.prototype.getPosition = hh.prototype.Pa;
        hh.prototype.hasMoreData = hh.prototype.Ia;
        var ih = 1;
        hh.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: ih };
        function kh() {
          this.i = /* @__PURE__ */ new Map();
          this.h = /* @__PURE__ */ new Map();
          this.g = false;
        }
        p = kh.prototype;
        p.box = function(a, b) {
          a = lh(a);
          this.i.set(a, mh);
          this.h.set(a, b);
          return this;
        };
        p.S = function(a, b) {
          a = lh(a);
          this.i.set(a, nh);
          this.h.set(a, b);
          return this;
        };
        p.stop = function() {
          this.g = true;
        };
        p.parse = function(a, b, c) {
          a = new hh(a, 0);
          for (this.g = false; a.Ia() && !this.g; ) this.zd(0, a, b, c);
        };
        p.zd = function(a, b, c, d) {
          var e = b.Pa();
          if (d && e + 8 > b.getLength()) this.g = true;
          else {
            var f = b.U(), g = b.U(), h = ph(g), k2 = false;
            switch (f) {
              case 0:
                f = b.getLength() - e;
                break;
              case 1:
                if (d && b.Pa() + 8 > b.getLength()) {
                  this.g = true;
                  return;
                }
                f = b.Dd();
                k2 = true;
            }
            var l = this.h.get(g);
            if (l) {
              var m = null, n = null;
              if (this.i.get(g) == nh) {
                if (d && b.Pa() + 4 > b.getLength()) {
                  this.g = true;
                  return;
                }
                n = b.U();
                m = n >>> 24;
                n &= 16777215;
              }
              g = e + f;
              c && g > b.getLength() && (g = b.getLength());
              d && g > b.getLength() ? this.g = true : (g -= b.Pa(), b = g > 0 ? b.Ub(g, false) : new Uint8Array(0), b = new hh(b, 0), l({
                name: h,
                parser: this,
                partialOkay: c || false,
                stopOnPartial: d || false,
                version: m,
                flags: n,
                reader: b,
                size: f,
                start: e + a,
                has64BitSize: k2
              }));
            } else b.skip(Math.min(e + f - b.Pa(), b.getLength() - b.Pa()));
          }
        };
        function qh(a) {
          for (var b = rh(a); a.reader.Ia() && !a.parser.g; ) a.parser.zd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function sh(a) {
          for (var b = rh(a), c = a.reader.U(), d = 0; d < c && (a.parser.zd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial), !a.parser.g); d++) ;
        }
        function th(a) {
          var b = rh(a);
          for (a.reader.skip(78); a.reader.Ia() && !a.parser.g; ) a.parser.zd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function uh(a) {
          var b = rh(a);
          a.reader.skip(8);
          var c = a.reader.Ca();
          a.reader.skip(6);
          c == 2 ? a.reader.skip(48) : a.reader.skip(12);
          for (c == 1 && a.reader.skip(16); a.reader.Ia() && !a.parser.g; ) a.parser.zd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function vh(a, b) {
          return function(c) {
            a(c.reader.Ub(c.reader.getLength() - c.reader.Pa(), b));
          };
        }
        function lh(a) {
          var b = 0;
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) b = b << 8 | c.value.charCodeAt(0);
          return b;
        }
        function ph(a) {
          return String.fromCharCode(a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255);
        }
        function rh(a) {
          return 8 + (a.has64BitSize ? 8 : 0) + (a.flags != null ? 4 : 0);
        }
        S("shaka.util.Mp4Parser", kh);
        kh.headerSize = rh;
        kh.typeToString = ph;
        kh.allData = vh;
        kh.audioSampleEntry = uh;
        kh.visualSampleEntry = th;
        kh.sampleDescription = sh;
        kh.children = qh;
        kh.prototype.parseNext = kh.prototype.zd;
        kh.prototype.parse = kh.prototype.parse;
        kh.prototype.stop = kh.prototype.stop;
        kh.prototype.fullBox = kh.prototype.S;
        kh.prototype.box = kh.prototype.box;
        var mh = 0, nh = 1;
        function wh(a) {
          var b = this;
          this.g = [];
          this.h = [];
          this.data = [];
          new kh().box("moov", qh).box("moof", qh).S("pssh", function(c) {
            if (!(c.version > 1)) {
              var d = Vb(c.reader.h, -12, c.size);
              b.data.push(d);
              d = c.reader.Ub(16, false);
              b.g.push(sc(d));
              if (c.version > 0) {
                d = c.reader.U();
                for (var e = 0; e < d; e++) {
                  var f = c.reader.Ub(16, false);
                  f = sc(f);
                  b.h.push(f);
                }
              }
            }
          }).parse(a);
        }
        function xh(a, b, c, d) {
          var e = a.length, f = 12 + b.length + 4 + e;
          d > 0 && (f += 4 + 16 * c.size);
          var g = new Uint8Array(f), h = $b(g), k2 = 0;
          h.setUint32(k2, f);
          k2 += 4;
          h.setUint32(k2, 1886614376);
          k2 += 4;
          d < 1 ? h.setUint32(k2, 0) : h.setUint32(k2, 16777216);
          k2 += 4;
          g.set(b, k2);
          k2 += b.length;
          if (d > 0) for (h.setUint32(k2, c.size), k2 += 4, b = t(c), c = b.next(); !c.done; c = b.next()) c = rc(c.value), g.set(c, k2), k2 += c.length;
          h.setUint32(k2, e);
          g.set(a, k2 + 4);
          return g;
        }
        ;
        function yh(a) {
          var b = this;
          this.F = a;
          this.j = this.B = null;
          this.oa = this.T = false;
          this.J = 0;
          this.g = null;
          this.o = new kb();
          this.i = /* @__PURE__ */ new Map();
          this.X = [];
          this.C = /* @__PURE__ */ new Map();
          this.K = false;
          this.m = new Cg();
          this.h = null;
          this.u = function(c) {
            c.severity == 2 && b.m.reject(c);
            a.onError(c);
          };
          this.aa = /* @__PURE__ */ new Map();
          this.ma = /* @__PURE__ */ new Map();
          this.M = new gf(function() {
            return zh(b);
          });
          this.R = false;
          this.N = [];
          this.$ = false;
          this.G = new gf(function() {
            Dh(b);
          });
          this.m.catch(function() {
          });
          this.l = new bh(function() {
            return Eh(b);
          });
          this.O = false;
          this.H = this.I = null;
          this.V = function() {
            return false;
          };
        }
        p = yh.prototype;
        p.destroy = function() {
          return this.l.destroy();
        };
        function Eh(a) {
          return Q(function(b) {
            switch (b.g) {
              case 1:
                return a.o.release(), a.o = null, a.m.reject(), a.G.stop(), a.G = null, a.M.stop(), a.M = null, F(b, Fh(a), 2);
              case 2:
                if (!a.j) {
                  b.A(3);
                  break;
                }
                ra(b, 4);
                return F(b, a.j.setMediaKeys(null), 6);
              case 6:
                ta(b, 5);
                break;
              case 4:
                Aa(b);
              case 5:
                a.j = null;
              case 3:
                a.g = null, a.B = null, a.C = /* @__PURE__ */ new Map(), a.h = null, a.u = function() {
                }, a.F = null, a.O = false, a.I = null, G(b);
            }
          });
        }
        p.configure = function(a, b) {
          this.h = a;
          b && (this.V = b);
          this.G && this.T && this.g && this.G.Ea(this.h.updateExpirationTime);
        };
        function Gh(a, b, c) {
          a.oa = true;
          a.C = /* @__PURE__ */ new Map();
          a.R = c;
          return Hh(a, b, false);
        }
        function Ih(a, b, c, d) {
          d = d === void 0 ? true : d;
          a.C = /* @__PURE__ */ new Map();
          c = t(c);
          for (var e = c.next(); !e.done; e = c.next()) a.C.set(e.value, { initData: null, initDataType: null });
          c = t(a.h.persistentSessionsMetadata);
          for (e = c.next(); !e.done; e = c.next()) e = e.value, a.C.set(e.sessionId, { initData: e.initData, initDataType: e.initDataType });
          a.R = a.C.size > 0;
          return Hh(a, b, d);
        }
        function Jh(a, b, c, d, e, f) {
          var g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return g = [], f.length && g.push(f[0].contentType), e.length && g.push(e[0].contentType), h = function(q) {
              q = vc(b, q, null);
              q.licenseServerUri = c;
              q.serverCertificate = d;
              q.persistentStateRequired = true;
              q.sessionType = "persistent-license";
              return q;
            }, k2 = mg(g), k2.video && (l = h(f[0].encryptionScheme || ""), k2.video.drmInfos.push(l)), k2.audio && (m = h(e[0].encryptionScheme || ""), k2.audio.drmInfos.push(m)), F(n, Gf([k2], true, a.O, []), 2);
            ch(a.l);
            return n.return(Kh(a, [k2]));
          });
        }
        function Hh(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C;
          return Q(function(H) {
            if (H.g == 1) {
              Lh(a.h.clearKeys, b);
              d = b.some(function(D) {
                return D.video && D.video.drmInfos.length || D.audio && D.audio.drmInfos.length ? true : false;
              });
              e = fh(a.h.servers);
              f = fh(a.h.advanced || {});
              !d && c && Mh(b, e);
              g = /* @__PURE__ */ new WeakSet();
              h = t(b);
              for (k2 = h.next(); !k2.done; k2 = h.next()) for (l = k2.value, m = Nh(l), n = t(m), q = n.next(); !q.done; q = n.next()) r = q.value, g.has(r) || (g.add(r), Oh(r, e, f, a.h.keySystemsMapping));
              u = function(D, A) {
                var E = [];
                D = t(D);
                for (var J = D.next(); !J.done; J = D.next()) {
                  J = J.value;
                  var I = J[A] || f.has(J.keySystem) && f.get(J.keySystem)[A] || "", K;
                  if (K = I == "") K = (K = J.keySystem) ? !!K.match(/^com\.widevine\.alpha/) : false;
                  K && (A == "audioRobustness" ? I = [a.h.defaultAudioRobustnessForWidevine] : A == "videoRobustness" && (I = [a.h.defaultVideoRobustnessForWidevine]));
                  if (typeof I === "string") E.push(J);
                  else if (Array.isArray(I)) for (I.length === 0 && (I = [""]), I = t(I), K = I.next(); !K.done; K = I.next()) {
                    var L = {};
                    E.push(Object.assign({}, J, (L[A] = K.value, L)));
                  }
                }
                return E;
              };
              v = /* @__PURE__ */ new WeakSet();
              w = t(b);
              for (z = w.next(); !z.done; z = w.next()) y = z.value, y.video && !v.has(y.video) && (y.video.drmInfos = u(y.video.drmInfos, "videoRobustness"), y.video.drmInfos = u(y.video.drmInfos, "audioRobustness"), v.add(y.video)), y.audio && !v.has(y.audio) && (y.audio.drmInfos = u(y.audio.drmInfos, "videoRobustness"), y.audio.drmInfos = u(y.audio.drmInfos, "audioRobustness"), v.add(y.audio));
              return F(H, Gf(b, a.R, a.O, a.h.preferredKeySystems), 2);
            }
            ch(a.l);
            B = d || e.size > 0;
            if (!B) return a.T = true, H.return(Promise.resolve());
            C = Kh(a, b);
            return H.return(d ? C : C.catch(function() {
            }));
          });
        }
        function Ph(a) {
          var b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.j.mediaKeys) return c.return();
                if (!a.I) {
                  c.A(2);
                  break;
                }
                return F(c, a.I, 3);
              case 3:
                return ch(a.l), c.return();
              case 2:
                return ra(c, 4), a.I = a.j.setMediaKeys(a.B), F(c, a.I, 6);
              case 6:
                ta(c, 5);
                break;
              case 4:
                b = Aa(c), a.u(new U(2, 6, 6003, b.message));
              case 5:
                ch(a.l), G(c);
            }
          });
        }
        function Qh(a, b) {
          return Q(function(c) {
            if (c.g == 1) return F(c, Ph(a), 2);
            Rh(a, b.initDataType, Vb(b.initData));
            G(c);
          });
        }
        p.Vb = function(a) {
          var b = this, c, d;
          return Q(function(e) {
            if (e.g == 1) {
              if (b.j === a) return e.return();
              if (!b.B) return b.o.za(a, "encrypted", function() {
                b.u(new U(2, 6, 6010));
              }), e.return();
              b.j = a;
              b.h.delayLicenseRequestUntilPlayed && b.o.za(b.j, "play", function() {
                for (var f = t(b.N), g = f.next(); !g.done; g = f.next()) Sh(b, g.value);
                b.$ = true;
                b.N = [];
              });
              b.j.remote ? (b.o.D(b.j.remote, "connect", function() {
                return Fh(b);
              }), b.o.D(b.j.remote, "connecting", function() {
                return Fh(b);
              }), b.o.D(b.j.remote, "disconnect", function() {
                return Fh(b);
              })) : "webkitCurrentPlaybackTargetIsWireless" in b.j && b.o.D(b.j, "webkitcurrentplaybacktargetiswirelesschanged", function() {
                return Fh(b);
              });
              b.H = b.g ? b.g.initData.find(function(f) {
                return f.initData.length > 0;
              }) || null : null;
              c = b.g.keySystem;
              return (d = rb().Rg(c)) || !b.H && b.g.keySystem === "com.apple.fps" && !b.C.size ? e.A(2) : F(e, Ph(b), 2);
            }
            Th(b).catch(function() {
            });
            !d && (b.H || b.C.size || b.h.parseInbandPsshEnabled) || b.o.D(b.j, "encrypted", function(f) {
              return Qh(b, f);
            });
            G(e);
          });
        };
        function Uh(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (!a.B || !a.g) return g.return();
                if (!a.g.serverCertificateUri || a.g.serverCertificate && a.g.serverCertificate.length) {
                  g.A(2);
                  break;
                }
                b = Ug([a.g.serverCertificateUri], a.h.retryParameters);
                ra(g, 3);
                c = a.F.vc.request(5, b, { isPreload: a.V() });
                return F(g, c.promise, 5);
              case 5:
                d = g.h;
                a.g.serverCertificate = Vb(d.data);
                ta(g, 4);
                break;
              case 3:
                throw e = Aa(g), new U(2, 6, 6017, e);
              case 4:
                if (a.l.g) return g.return();
              case 2:
                if (!a.g.serverCertificate || !a.g.serverCertificate.length) return g.return();
                ra(g, 6);
                return F(g, a.B.setServerCertificate(a.g.serverCertificate), 8);
              case 8:
                ta(g, 0);
                break;
              case 6:
                throw f = Aa(g), new U(2, 6, 6004, f.message);
            }
          });
        }
        function Vh(a, b) {
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) return F(f, Wh(a, b, { initData: null, initDataType: null }), 2);
            if (f.g != 3) {
              c = f.h;
              if (!c) return f.return();
              d = [];
              if (e = a.i.get(c)) e.Lb = new Cg(), d.push(e.Lb);
              d.push(c.remove());
              return F(f, Promise.all(d), 3);
            }
            a.i.delete(c);
            G(f);
          });
        }
        function Th(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              if (!a.C.size) return g.A(2);
              a.C.forEach(function(h, k2) {
                Wh(a, k2, h);
              });
              return F(g, a.m, 3);
            }
            if (g.g != 2) {
              b = a.g && a.g.keyIds || /* @__PURE__ */ new Set([]);
              if (b.size > 0 && Xh(a)) return g.return(a.m);
              a.K = false;
              a.m = new Cg();
              a.m.catch(function() {
              });
            }
            c = (a.g ? a.g.initData : []) || [];
            d = t(c);
            for (e = d.next(); !e.done; e = d.next()) f = e.value, Rh(a, f.initDataType, f.initData);
            Yh(a) && a.m.resolve();
            return g.return(a.m);
          });
        }
        function Rh(a, b, c) {
          if (c.length) {
            if (a.h.ignoreDuplicateInitData) {
              var d = a.i.values();
              d = t(d);
              for (var e = d.next(); !e.done; e = d.next()) if (Tb(c, e.value.initData)) return;
              var f = false;
              a.C.forEach(function(g) {
                !f && Tb(c, g.initData) && (f = true);
              });
              if (f) return;
            }
            a.K = true;
            a.i.size > 0 && Yh(a) && (a.m.resolve(), a.K = false, a.m = new Cg(), a.m.catch(function() {
            }));
            Zh(a, b, c, a.g.sessionType);
          }
        }
        function $h(a) {
          a = a.i.keys();
          a = dh(a, function(b) {
            return b.sessionId;
          });
          return Array.from(a);
        }
        p.Gg = function() {
          var a = this, b = this.i.keys();
          b = dh(b, function(c) {
            var d = a.i.get(c);
            return { sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType };
          });
          return Array.from(b);
        };
        p.Wd = function() {
          var a = Infinity, b = this.i.keys();
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, isNaN(c.expiration) || (a = Math.min(a, c.expiration));
          return a;
        };
        function ai(a) {
          return a.J ? a.J : NaN;
        }
        p.Xe = function() {
          return gh(this.ma);
        };
        function Kh(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                c = /* @__PURE__ */ new Map();
                d = bi(a, b, c);
                if (!d) {
                  if (!navigator.requestMediaKeySystemAccess) throw new U(2, 6, 6020);
                  throw new U(2, 6, 6001);
                }
                ch(a.l);
                ra(l, 2);
                d.getConfiguration();
                var m = e = a.h.keySystemsMapping[d.keySystem] || d.keySystem, n = c.get(e), q = [], r = [], u = [], v = [], w = [], z = /* @__PURE__ */ new Set(), y = /* @__PURE__ */ new Set();
                ci(n, q, r, v, u, w, z, y);
                var B = a.R ? "persistent-license" : "temporary";
                m = {
                  keySystem: m,
                  encryptionScheme: q[0],
                  licenseServerUri: r[0],
                  distinctiveIdentifierRequired: n[0].distinctiveIdentifierRequired,
                  persistentStateRequired: n[0].persistentStateRequired,
                  sessionType: n[0].sessionType || B,
                  audioRobustness: n[0].audioRobustness || "",
                  videoRobustness: n[0].videoRobustness || "",
                  serverCertificate: v[0],
                  serverCertificateUri: u[0],
                  initData: w,
                  keyIds: z
                };
                y.size > 0 && (m.keySystemUris = y);
                n = t(n);
                for (y = n.next(); !y.done; y = n.next()) y = y.value, y.distinctiveIdentifierRequired && (m.distinctiveIdentifierRequired = y.distinctiveIdentifierRequired), y.persistentStateRequired && (m.persistentStateRequired = y.persistentStateRequired);
                a.g = m;
                if (!a.g.licenseServerUri) throw new U(2, 6, 6012, a.g.keySystem);
                return F(l, d.createMediaKeys(), 4);
              case 4:
                f = l.h;
                ch(a.l);
                a.B = f;
                if (!(a.h.minHdcpVersion != "" && "getStatusForPolicy" in a.B)) {
                  l.A(5);
                  break;
                }
                ra(l, 6);
                return F(l, a.B.getStatusForPolicy({ minHdcpVersion: a.h.minHdcpVersion }), 8);
              case 8:
                g = l.h;
                if (g != "usable") throw new U(2, 6, 6018);
                ch(a.l);
                ta(l, 5, 2);
                break;
              case 6:
                h = Aa(l, 2);
                if (h instanceof U) throw h;
                throw new U(2, 6, 6019, h.message);
              case 5:
                return a.T = true, a.G.Ea(a.h.updateExpirationTime), F(l, Uh(a), 9);
              case 9:
                ch(a.l);
                ta(l, 0);
                break;
              case 2:
                k2 = Aa(l);
                ch(a.l, k2);
                a.g = null;
                if (k2 instanceof U) throw k2;
                throw new U(2, 6, 6002, k2.message);
            }
          });
        }
        function bi(a, b, c) {
          for (var d = t(b), e = d.next(); !e.done; e = d.next()) {
            e = t(Nh(e.value));
            for (var f = e.next(); !f.done; f = e.next()) f = f.value, c.has(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          }
          if (c.size == 1 && c.has("")) throw new U(2, 6, 6e3);
          d = a.h.preferredKeySystems;
          d.length || (e = fh(a.h.servers), e.size == 1 && (d = Array.from(e.keys())));
          e = t(d);
          var g = e.next();
          for (f = {}; !g.done; f = { Fi: void 0 }, g = e.next()) {
            f.Fi = g.value;
            g = t(b);
            for (var h = g.next(); !h.done; h = g.next()) if (h = h.value.decodingInfos.find(/* @__PURE__ */ (function(n) {
              return function(q) {
                return q.supported && q.keySystemAccess != null && q.keySystemAccess.keySystem == n.Fi;
              };
            })(f))) return h.keySystemAccess;
          }
          e = t([true, false]);
          for (f = e.next(); !f.done; f = e.next()) for (f = f.value, g = t(b), h = g.next(); !h.done; h = g.next()) {
            h = t(h.value.decodingInfos);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) if (k2 = k2.value, k2.supported && k2.keySystemAccess) {
              var l = k2.keySystemAccess.keySystem;
              if (!d.includes(l)) {
                var m = c.get(l);
                !m && a.h.keySystemsMapping[l] && (m = c.get(a.h.keySystemsMapping[l]));
                l = t(m);
                for (m = l.next(); !m.done; m = l.next()) if (!!m.value.licenseServerUri == f) return k2.keySystemAccess;
              }
            }
          }
          return null;
        }
        function di(a) {
          Yh(a) && a.m.resolve();
        }
        function ei(a, b) {
          new gf(function() {
            b.loaded = true;
            di(a);
          }).ia(fi);
        }
        function Wh(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                try {
                  d = a.B.createSession("persistent-license");
                } catch (n) {
                  return e = new U(2, 6, 6005, n.message), a.u(e), m.return(Promise.reject(e));
                }
                a.o.D(d, "message", function(n) {
                  a.j && a.h.delayLicenseRequestUntilPlayed && a.j.paused && !a.$ ? a.N.push(n) : Sh(a, n);
                });
                a.o.D(d, "keystatuseschange", function(n) {
                  return gi(a, n);
                });
                f = { initData: c.initData, initDataType: c.initDataType, loaded: false, Ug: Infinity, Lb: null, type: "persistent-license" };
                a.i.set(d, f);
                ra(m, 2);
                return F(
                  m,
                  d.load(b),
                  4
                );
              case 4:
                return g = m.h, ch(a.l), g || (a.i.delete(d), h = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.u(new U(h, 6, 6013)), f.loaded = true), ei(a, f), di(a), m.return(d);
              case 2:
                k2 = Aa(m), ch(a.l, k2), a.i.delete(d), l = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.u(new U(l, 6, 6005, k2.message)), f.loaded = true, di(a);
              case 3:
                return m.return(Promise.resolve());
            }
          });
        }
        function Zh(a, b, c, d) {
          try {
            var e = a.B.createSession(d);
          } catch (f) {
            a.u(new U(2, 6, 6005, f.message));
            return;
          }
          a.o.D(e, "message", function(f) {
            a.j && a.h.delayLicenseRequestUntilPlayed && a.j.paused && !a.$ ? a.N.push(f) : Sh(a, f);
          });
          a.o.D(e, "keystatuseschange", function(f) {
            return gi(a, f);
          });
          a.i.set(e, { initData: c, initDataType: b, loaded: false, Ug: Infinity, Lb: null, type: d });
          try {
            c = a.h.initDataTransform(c, b, a.g);
          } catch (f) {
            b = f;
            f instanceof U || (b = new U(2, 6, 6016, f));
            a.u(b);
            return;
          }
          a.h.logLicenseExchange && nc(c);
          e.generateRequest(b, c).catch(function(f) {
            if (!a.l.g) {
              a.i.delete(e);
              var g = f.errorCode;
              if (g && g.systemCode) {
                var h = g.systemCode;
                h < 0 && (h += 4294967296);
                h = "0x" + h.toString(16);
              }
              a.u(new U(2, 6, 6006, f.message, f, h));
            }
          });
        }
        function hi(a) {
          return Q(function(b) {
            return b.g == 1 ? a.K ? F(b, a.m, 3) : b.A(0) : F(b, Promise.all(a.X.map(function(c) {
              return c.promise;
            })), 0);
          });
        }
        function Sh(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z;
          Q(function(y) {
            switch (y.g) {
              case 1:
                c = b.target;
                a.h.logLicenseExchange && nc(b.message);
                d = a.i.get(c);
                e = a.g.licenseServerUri;
                f = a.h.advanced[a.g.keySystem];
                b.messageType == "individualization-request" && f && f.individualizationServer && (e = f.individualizationServer);
                g = Ug([e], a.h.retryParameters);
                g.body = b.message;
                g.method = "POST";
                g.licenseRequestType = b.messageType;
                g.sessionId = c.sessionId;
                g.drmInfo = a.g;
                d && (g.initData = d.initData, g.initDataType = d.initDataType);
                if (f && f.headers) for (h in f.headers) g.headers[h] = f.headers[h];
                if (a.g.keySystem === "org.w3.clearkey") {
                  var B = g, C = a.g;
                  try {
                    var H = fc(B.body);
                    if (H) {
                      var D = JSON.parse(H);
                      D.type || (D.type = C.sessionType, B.body = hc(JSON.stringify(D)));
                    }
                  } catch (A) {
                  }
                }
                if (vg(a.g.keySystem)) if (B = dc(g.body, true, true), B.includes("PlayReadyKeyMessage")) {
                  B = pd(B, "PlayReadyKeyMessage");
                  C = zd(B, "HttpHeader");
                  C = t(C);
                  for (H = C.next(); !H.done; H = C.next()) D = H.value, H = zd(D, "name")[0], D = zd(D, "value")[0], g.headers[xd(H)] = xd(D);
                  B = zd(B, "Challenge")[0];
                  g.body = oc(xd(B));
                } else g.headers["Content-Type"] = "text/xml; charset=utf-8";
                k2 = Date.now();
                ra(y, 2);
                m = a.F.vc.request(2, g, { isPreload: a.V() });
                a.X.push(m);
                return F(y, m.promise, 4);
              case 4:
                l = y.h;
                gb(a.X, m);
                ta(y, 3);
                break;
              case 2:
                n = Aa(y);
                if (a.l.g) return y.return();
                q = { sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType };
                r = new U(2, 6, 6007, n, q);
                a.i.size == 1 ? (a.u(r), d && d.Lb && d.Lb.reject(r)) : (d && d.Lb && d.Lb.reject(r), a.i.delete(c), Yh(a) && (a.m.resolve(), a.M.ia(0.1)));
                return y.return();
              case 3:
                if (a.l.g) return y.return();
                a.J += (Date.now() - k2) / 1e3;
                a.h.logLicenseExchange && nc(l.data);
                ra(y, 5);
                return F(y, c.update(l.data), 7);
              case 7:
                ta(y, 6);
                break;
              case 5:
                return v = (u = Aa(y)) && u.message || String(u), w = new U(2, 6, 6008, v), a.u(w), d && d.Lb && d.Lb.reject(w), y.return();
              case 6:
                if (a.l.g) return y.return();
                z = new V("drmsessionupdate");
                a.F.onEvent(z);
                d && (d.Lb && d.Lb.resolve(), ei(a, d));
                G(y);
            }
          });
        }
        function gi(a, b) {
          b = b.target;
          var c = a.i.get(b), d = false;
          b.keyStatuses.forEach(function(f, g) {
            if (typeof g == "string") {
              var h = g;
              g = f;
              f = h;
            }
            h = rb();
            if (vg(a.g.keySystem) && g.byteLength == 16 && h.hh()) {
              h = $b(g);
              var k2 = h.getUint32(0, true), l = h.getUint16(4, true), m = h.getUint16(6, true);
              h.setUint32(0, k2, false);
              h.setUint16(4, l, false);
              h.setUint16(6, m, false);
            }
            f != "status-pending" && (c.loaded = true);
            f == "expired" && (d = true);
            g = sc(g).slice(0, 32);
            a.aa.set(g, f);
          });
          var e = b.expiration - Date.now();
          (e < 0 || d && e < 1e3) && c && !c.Lb && (a.i.delete(b), ii(b));
          Yh(a) && (a.m.resolve(), a.M.ia(ji));
        }
        function zh(a) {
          var b = a.aa, c = a.ma;
          c.clear();
          b.forEach(function(d, e) {
            return c.set(e, d);
          });
          b = Array.from(c.values());
          b.length && b.every(function(d) {
            return d == "expired";
          }) && a.u(new U(2, 6, 6014));
          a.F.vf(gh(c));
        }
        function ki() {
          var a, b, c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L;
          return Q(function(O) {
            if (O.g == 1) {
              a = "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" ");
              if (!(window2.MediaKeys && window2.navigator && window2.navigator.requestMediaKeySystemAccess && window2.MediaKeySystemAccess && window2.MediaKeySystemAccess.prototype.getConfiguration)) {
                b = {};
                c = t(a);
                for (d = c.next(); !d.done; d = c.next()) e = d.value, b[e] = null;
                return O.return(b);
              }
              f = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" ");
              g = ["SW_SECURE_CRYPTO", "SW_SECURE_DECODE", "HW_SECURE_CRYPTO", "HW_SECURE_DECODE", "HW_SECURE_ALL"];
              h = ["150", "2000", "3000"];
              k2 = { "com.widevine.alpha": g, "com.widevine.alpha.experiment": g, "com.microsoft.playready.recommendation": h };
              l = [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }, { contentType: 'video/webm; codecs="vp8"' }];
              m = [{ contentType: 'audio/mp4; codecs="mp4a.40.2"' }, { contentType: 'audio/webm; codecs="opus"' }];
              n = { videoCapabilities: l, audioCapabilities: m, initDataTypes: ["cenc", "sinf", "skd", "keyids"] };
              q = [null, "cenc", "cbcs"];
              r = /* @__PURE__ */ new Map();
              u = rb();
              v = function(P, N, M) {
                var R, T, ma, W, Ia, ua, Ea, ya, va, xa, Ga, Ca, wa;
                return Q(function(za) {
                  switch (za.g) {
                    case 1:
                      return ra(za, 2), F(za, N.createMediaKeys(), 5);
                    case 5:
                      R = za.h;
                    case 4:
                      ta(za, 3);
                      break;
                    case 2:
                      return Aa(za), za.return();
                    case 3:
                      ma = (T = N.getConfiguration().sessionTypes) ? T.includes("persistent-license") : false;
                      u.wi() && (ma = false);
                      W = N.getConfiguration().videoCapabilities;
                      Ia = N.getConfiguration().audioCapabilities;
                      ua = { persistentState: ma, encryptionSchemes: [], videoRobustnessLevels: [], audioRobustnessLevels: [], minHdcpVersions: [] };
                      r.get(P) ? ua = r.get(P) : r.set(P, ua);
                      (Ea = W[0].encryptionScheme) && !ua.encryptionSchemes.includes(Ea) && ua.encryptionSchemes.push(Ea);
                      (ya = W[0].robustness) && !ua.videoRobustnessLevels.includes(ya) && ua.videoRobustnessLevels.push(ya);
                      (va = Ia[0].robustness) && !ua.audioRobustnessLevels.includes(va) && ua.audioRobustnessLevels.push(va);
                      if (!(M && "getStatusForPolicy" in R)) {
                        za.A(0);
                        break;
                      }
                      xa = t(f);
                      Ga = xa.next();
                    case 7:
                      if (Ga.done) {
                        za.A(0);
                        break;
                      }
                      Ca = Ga.value;
                      if (ua.minHdcpVersions.includes(Ca)) {
                        za.A(8);
                        break;
                      }
                      return F(za, R.getStatusForPolicy({ minHdcpVersion: Ca }), 10);
                    case 10:
                      if (wa = za.h, wa == "usable") ua.minHdcpVersions.includes(Ca) || ua.minHdcpVersions.push(Ca);
                      else {
                        za.A(0);
                        break;
                      }
                    case 8:
                      Ga = xa.next(), za.A(7);
                  }
                });
              };
              w = function(P, N, M, R, T) {
                T = T === void 0 ? false : T;
                var ma, W, Ia, ua, Ea, ya, va, xa, Ga, Ca, wa;
                return Q(function(za) {
                  switch (za.g) {
                    case 1:
                      ra(
                        za,
                        2
                      );
                      ma = jd(n);
                      W = t(ma.videoCapabilities);
                      for (Ia = W.next(); !Ia.done; Ia = W.next()) ua = Ia.value, ua.encryptionScheme = N, ua.robustness = M;
                      Ea = t(ma.audioCapabilities);
                      for (ya = Ea.next(); !ya.done; ya = Ea.next()) va = ya.value, va.encryptionScheme = N, va.robustness = R;
                      xa = jd(ma);
                      xa.persistentState = "required";
                      xa.sessionTypes = ["persistent-license"];
                      Ga = [xa, ma];
                      wa = rb();
                      return wa.Oa() == "MOBILE" ? F(za, lf(5, navigator.requestMediaKeySystemAccess(P, Ga)), 7) : F(za, navigator.requestMediaKeySystemAccess(P, Ga), 6);
                    case 6:
                      Ca = za.h;
                      za.A(5);
                      break;
                    case 7:
                      Ca = za.h;
                    case 5:
                      return F(za, v(P, Ca, T), 8);
                    case 8:
                      ta(za, 0);
                      break;
                    case 2:
                      Aa(za), G(za);
                  }
                });
              };
              z = function(P) {
                return rb().Ha() === "WEBKIT" && P === "org.w3.clearkey" ? false : true;
              };
              y = [];
              B = t(a);
              for (C = B.next(); !C.done; C = B.next()) if (H = C.value, r.set(H, null), z(H)) {
                D = true;
                A = t(q);
                for (E = A.next(); !E.done; E = A.next()) J = E.value, y.push(w(H, J, "", "", D)), D = false;
                I = t(k2[H] || []);
                for (K = I.next(); !K.done; K = I.next()) L = K.value, y.push(w(H, null, L, "")), y.push(w(H, null, "", L));
              }
              return F(O, Promise.all(y), 2);
            }
            return O.return(gh(r));
          });
        }
        function ii(a) {
          return Q(function(b) {
            if (b.g == 1) return ra(b, 2), F(b, lf(li, Promise.all([a.close().catch(function() {
            }), a.closed])), 4);
            if (b.g != 2) return ta(b, 0);
            Aa(b);
            G(b);
          });
        }
        function Fh(a) {
          var b;
          return Q(function(c) {
            b = Array.from(a.i.entries());
            a.i.clear();
            return F(c, Promise.all(b.map(function(d) {
              d = t(d);
              var e = d.next().value;
              var f = d.next().value;
              return Q(function(g) {
                if (g.g == 1) return ra(g, 2), a.oa || a.C.has(e.sessionId) || f.type !== "persistent-license" || a.h.persistentSessionOnlinePlayback ? F(g, ii(e), 5) : F(g, e.remove(), 5);
                if (g.g != 2) return ta(g, 0);
                Aa(g);
                G(g);
              });
            })), 0);
          });
        }
        function Nh(a) {
          return (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
        }
        function Dh(a) {
          a.i.forEach(function(b, c) {
            var d = b.Ug, e = c.expiration;
            isNaN(e) && (e = Infinity);
            e != d && (a.F.onExpirationUpdated(c.sessionId, e), b.Ug = e);
          });
        }
        function Yh(a) {
          a = a.i.values();
          return eh(a, function(b) {
            return b.loaded;
          });
        }
        function Xh(a) {
          for (var b = t(a.g && a.g.keyIds || /* @__PURE__ */ new Set([])), c = b.next(); !c.done; c = b.next()) if (a.aa.get(c.value) !== "usable") return false;
          return true;
        }
        function Mh(a, b) {
          var c = [];
          b.forEach(function(d, e) {
            c.push({ keySystem: e, licenseServerUri: d, distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", initData: [], keyIds: /* @__PURE__ */ new Set() });
          });
          a = t(a);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.video && (b.video.drmInfos = c), b.audio && (b.audio.drmInfos = c);
        }
        function ci(a, b, c, d, e, f, g, h) {
          var k2 = [];
          a = t(a);
          for (var l = a.next(), m = {}; !l.done; m = { Ka: void 0 }, l = a.next()) {
            m.Ka = l.value;
            b.includes(m.Ka.encryptionScheme) || b.push(m.Ka.encryptionScheme);
            m.Ka.keySystem == "org.w3.clearkey" && m.Ka.licenseServerUri.startsWith("data:application/json;base64,") ? k2.includes(m.Ka.licenseServerUri) || k2.push(m.Ka.licenseServerUri) : c.includes(m.Ka.licenseServerUri) || c.push(m.Ka.licenseServerUri);
            e.includes(m.Ka.serverCertificateUri) || e.push(m.Ka.serverCertificateUri);
            m.Ka.serverCertificate && (d.some(/* @__PURE__ */ (function(r) {
              return function(u) {
                return Tb(u, r.Ka.serverCertificate);
              };
            })(m)) || d.push(m.Ka.serverCertificate));
            if (m.Ka.initData) {
              l = t(m.Ka.initData);
              for (var n = l.next(), q = {}; !n.done; q = { Lg: void 0 }, n = l.next()) q.Lg = n.value, f.some(/* @__PURE__ */ (function(r) {
                return function(u) {
                  var v = r.Lg;
                  return u.keyId && u.keyId == v.keyId ? true : u.initDataType == v.initDataType && Tb(u.initData, v.initData);
                };
              })(q)) || f.push(q.Lg);
            }
            if (m.Ka.keyIds) for (l = t(m.Ka.keyIds), n = l.next(); !n.done; n = l.next()) g.add(n.value);
            if (m.Ka.keySystemUris && h) for (m = t(m.Ka.keySystemUris), l = m.next(); !l.done; l = m.next()) h.add(l.value);
          }
          if (k2.length == 1) c.push(k2[0]);
          else if (k2.length > 0) {
            b = [];
            k2 = t(k2);
            for (d = k2.next(); !d.done; d = k2.next()) d = window2.atob(d.value.split("data:application/json;base64,").pop()), d = JSON.parse(d), b.push.apply(b, x(d.keys));
            k2 = JSON.stringify({ keys: b });
            c.push("data:application/json;base64," + window2.btoa(k2));
          }
        }
        function Oh(a, b, c, d) {
          var e = a.keySystem;
          if (e && (e != "org.w3.clearkey" || !a.licenseServerUri)) {
            b.size && b.get(e) && (b = b.get(e), a.licenseServerUri = b);
            a.keyIds || (a.keyIds = /* @__PURE__ */ new Set());
            if (c = c.get(e)) a.distinctiveIdentifierRequired || (a.distinctiveIdentifierRequired = c.distinctiveIdentifierRequired), a.persistentStateRequired || (a.persistentStateRequired = c.persistentStateRequired), a.serverCertificate || (a.serverCertificate = c.serverCertificate), c.sessionType && (a.sessionType = c.sessionType), a.serverCertificateUri || (a.serverCertificateUri = c.serverCertificateUri);
            d[e] && (a.keySystem = d[e]);
            window2.cast && window2.cast.__platform__ && e == "com.microsoft.playready" && (a.keySystem = "com.chromecast.playready");
          }
        }
        function Lh(a, b) {
          a = fh(a);
          if (a.size != 0) {
            a = wc(a);
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.drmInfos = [a]), c.audio && (c.audio.drmInfos = [a]);
          }
        }
        var li = 1, fi = 5, ji = 0.5;
        function mi() {
          this.g = ni;
          this.i = (/* @__PURE__ */ new Map()).set(ni, 2).set(oi, 1);
          this.h = 0;
        }
        function pi(a, b) {
          var c = a.g !== b;
          a.g = b;
          c && b === ni && (a.h = Date.now());
          return c;
        }
        var oi = 0, ni = 1;
        function qi(a, b, c) {
          this.g = a;
          this.i = b;
          this.h = c;
        }
        function ri(a, b) {
          return Q(function(c) {
            if (c.g == 1) return F(c, Bf(a.h, b, a.g.drm.preferredKeySystems, a.g.drm.keySystemsMapping), 2);
            a.g.streaming.dontChooseCodecs || xf(b, a.g.preferredVideoCodecs, a.g.preferredAudioCodecs, a.g.preferredDecodingAttributes, a.g.preferredTextFormats);
            if (!b.variants.some(fg)) throw new U(2, 4, 4032);
            return c.return(si(a, b));
          });
        }
        function ti(a, b) {
          var c = a.g.restrictions;
          a = a.i;
          var d = false;
          b = t(b.variants);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = e.allowedByApplication;
            e.allowedByApplication = Af(e, c, a);
            f != e.allowedByApplication && (d = true);
          }
          return d;
        }
        function si(a, b) {
          var c = ti(a, b);
          if (b) {
            var d = a.h ? a.h.g : null;
            if (d && a.h.B) {
              for (var e = /* @__PURE__ */ new Set(), f = t(b.variants), g = f.next(); !g.done; g = f.next()) g = g.value, g.audio && e.add(g.audio), g.video && e.add(g.video);
              e = t(e);
              for (f = e.next(); !f.done; f = e.next()) ui(a, d.keySystem, f.value);
            }
            vi(a, b);
          }
          return c;
        }
        function ui(a, b, c) {
          c = t(c.drmInfos);
          for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, d.keySystem == b) {
            d = t(d.initData || []);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, Rh(a.h, e.initDataType, e.initData);
          }
        }
        function vi(a, b) {
          function c(l) {
            if (l && !h.has(l) && (h.add(l), l.keyIds.size)) {
              l = t(l.keyIds);
              for (var m = l.next(); !m.done; m = l.next()) {
                m = m.value;
                var n = d[e ? "00" : m];
                n ? wi.includes(n) && g.add(n) : f.add(m);
              }
            }
          }
          var d = a.h ? a.h.Xe() : {};
          a = Object.keys(d);
          var e = a.length && a[0] == "00";
          a = false;
          var f = /* @__PURE__ */ new Set(), g = /* @__PURE__ */ new Set(), h = /* @__PURE__ */ new WeakSet();
          b = t(b.variants);
          for (var k2 = b.next(); !k2.done; k2 = b.next()) {
            k2 = k2.value;
            if (!k2.allowedByApplication) a = true;
            else if (k2.allowedByKeySystem) return;
            c(k2.audio);
            c(k2.video);
          }
          a = {
            hasAppRestrictions: a,
            missingKeys: Array.from(f),
            restrictedKeyStatuses: Array.from(g)
          };
          throw new U(2, 4, 4012, a);
        }
        var wi = ["output-restricted", "internal-error"];
        S("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
        function xi(a) {
          if (yi.has(a)) return yi.get(a);
          var b = window2.ManagedMediaSource || window2.MediaSource;
          return b ? (b = b.isTypeSupported(a), yi.set(a, b), b) : false;
        }
        function zi() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.prototype ? !!a.prototype.setLiveSeekableRange && !!a.prototype.clearLiveSeekableRange : false;
        }
        var yi = /* @__PURE__ */ new Map();
        function Ai(a, b) {
          var c = null, d = null, e = null, f = null, g = a.U();
          b & 1 && (e = a.Dd());
          b & 2 && (f = a.U());
          b & 8 && (c = a.U());
          b & 16 && (d = a.U());
          return { trackId: g, Td: c, Ud: d, lj: e, Mi: f };
        }
        function Bi(a, b) {
          return b == 1 ? (b = a.U(), a = a.U(), { baseMediaDecodeTime: b * 4294967296 + a }) : { baseMediaDecodeTime: a.U() };
        }
        function Ci(a, b) {
          b == 1 ? (a.skip(8), a.skip(8)) : (a.skip(4), a.skip(4));
          b = a.U();
          a.skip(4);
          a = a.Ca();
          return { timescale: b, language: String.fromCharCode((a >> 10) + 96) + String.fromCharCode(((a & 960) >> 5) + 96) + String.fromCharCode((a & 31) + 96) };
        }
        function Di(a, b, c) {
          var d = a.U(), e = [], f = null;
          c & 1 && (f = a.Zg());
          c & 4 && a.skip(4);
          for (var g = 0; g < d; g++) {
            var h = { jh: null, sampleSize: null, Cf: null };
            c & 256 && (h.jh = a.U());
            c & 512 && (h.sampleSize = a.U());
            c & 1024 && a.skip(4);
            c & 2048 && (h.Cf = b == 0 ? a.U() : a.Zg());
            e.push(h);
          }
          return { Dm: d, ih: e, mg: f };
        }
        function Ei(a) {
          a.skip(6);
          a.skip(2);
          a.skip(8);
          var b = a.Ca();
          a.skip(2);
          a.skip(2);
          a.skip(2);
          a = a.Ca() + a.Ca() / 65536;
          return { channelCount: b, sampleRate: a };
        }
        function Fi(a) {
          a = a.U();
          return { codec: ph(a) };
        }
        function Gi(a) {
          var b = null, c = null, d = a.Ub(4, false);
          var e = String.fromCharCode(d[0]);
          e += String.fromCharCode(d[1]);
          e += String.fromCharCode(d[2]);
          e += String.fromCharCode(d[3]);
          if (e === "nclx") {
            switch (a.Ca()) {
              case 1:
              case 5:
              case 6:
              case 7:
                b = "srgb";
                break;
              case 9:
                b = "rec2020";
                break;
              case 11:
              case 12:
                b = "p3";
            }
            d = a.Ca();
            a.Ca();
            switch (d) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                c = "SDR";
                break;
              case 16:
                c = "PQ";
                break;
              case 18:
                c = "HLG";
            }
          }
          return { colorGamut: b, ve: c };
        }
        function Hi(a, b) {
          b = b === void 0 ? false : b;
          a = a.toString(16).toUpperCase();
          return b ? a : ("0" + a).slice(-2);
        }
        function Ii(a) {
          return (a < 10 ? "0" : "") + a;
        }
        ;
        function Ji(a) {
          this.g = a;
        }
        function Ki(a) {
          for (var b = [], c = t(a.g), d = c.next(); !d.done; d = c.next()) {
            var e = b, f = e.push;
            var g = d.value;
            d = Li;
            var h = g.id + 1;
            var k2 = g.stream.width || 0, l = g.stream.height || 0;
            g.type == "audio" && (l = k2 = 0);
            var m = g.duration * g.timescale, n = Math.floor(m / (Mi + 1));
            m = Math.floor(m % (Mi + 1));
            h = new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Ni(h, 4)), [0, 0, 0, 0], x(Ni(n, 4)), x(Ni(m, 4)), [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0], x(Ni(k2, 2)), [0, 0], x(Ni(
              l,
              2
            )), [0, 0]));
            h = Li("tkhd", h);
            k2 = Li;
            n = g.duration * g.timescale;
            l = Math.floor(n / (Mi + 1));
            n = Math.floor(n % (Mi + 1));
            m = g.stream.language;
            m = m.charCodeAt(0) - 96 << 10 | m.charCodeAt(1) - 96 << 5 | m.charCodeAt(2) - 96;
            l = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Ni(g.timescale, 4)), x(Ni(l, 4)), x(Ni(n, 4)), x(Ni(m, 2)), [0, 0]));
            l = Li("mdhd", l);
            n = g;
            m = new Uint8Array([]);
            switch (n.type) {
              case "video":
                m = Oi.value();
                break;
              case "audio":
                m = Pi.value();
            }
            n = Li("hdlr", m);
            a: {
              switch (g.type) {
                case "video":
                  g = Li(
                    "minf",
                    Li("vmhd", Qi.value()),
                    Ri.value(),
                    Si(g)
                  );
                  break a;
                case "audio":
                  g = Li("minf", Li("smhd", Ti.value()), Ri.value(), Si(g));
                  break a;
              }
              g = new Uint8Array([]);
            }
            g = k2("mdia", l, n, g);
            d = d("trak", h, g);
            f.call(e, d);
          }
          b = tc.apply(lc, x(b));
          f = a.g[0];
          c = Li;
          d = f.duration * f.timescale;
          e = Math.floor(d / (Mi + 1));
          d = Math.floor(d % (Mi + 1));
          e = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Ni(f.timescale, 4)), x(Ni(e, 4)), x(Ni(d, 4)), [
            0,
            1,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            64,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            255,
            255,
            255,
            255
          ]));
          e = Li("mvhd", e);
          d = [];
          a = t(a.g);
          for (k2 = a.next(); !k2.done; k2 = a.next()) g = d, h = g.push, k2 = new Uint8Array([0, 0, 0, 0].concat(x(Ni(k2.value.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), k2 = Li("trex", k2), h.call(g, k2);
          a = tc.apply(lc, x(d));
          a = Li("mvex", a);
          d = [];
          if (f.encrypted) {
            f = t(f.stream.drmInfos);
            for (g = f.next(); !g.done; g = f.next()) if (g = g.value, g.initData) for (g = t(g.initData), h = g.next(); !h.done; h = g.next()) d.push(h.value.initData);
            f = tc.apply(lc, x(d));
          } else f = new Uint8Array([]);
          a = c("moov", e, b, a, f);
          b = Ui.value();
          c = new Uint8Array(b.byteLength + a.byteLength);
          c.set(b);
          c.set(a, b.byteLength);
          return c;
        }
        function Si(a) {
          var b = Li, c = "aac";
          a.codecs.includes("mp3") ? c = "mp3" : a.codecs.includes("ac-3") ? c = rb().oe() ? "ec-3" : "ac-3" : a.codecs.includes("ec-3") ? c = "ec-3" : a.codecs.includes("opus") && (c = "opus");
          var d = new Uint8Array([]);
          switch (a.type) {
            case "video":
              if (a.codecs.includes("avc1")) {
                c = a.stream.width || 0;
                d = a.stream.height || 0;
                if (a.Sa.byteLength > 0) var e = Li("avcC", a.Sa);
                else {
                  e = Li;
                  for (var f = 7, g = [], h = [], k2 = 0, l = 0, m = 0, n = 0; n < a.Cb.length; n++) {
                    var q = Vi(a.Cb[n]);
                    switch (q[0] & 31) {
                      case 7:
                        g.push(q);
                        f += q.length + 2;
                        break;
                      case 8:
                        h.push(q), f += q.length + 2;
                    }
                  }
                  g.length > 0 && (k2 = g[0][1], m = g[0][2], l = g[0][3]);
                  f = new Uint8Array(f);
                  n = 0;
                  f[n++] = 1;
                  f[n++] = k2;
                  f[n++] = m;
                  f[n++] = l;
                  f[n++] = 255;
                  f[n++] = 224 | g.length;
                  for (k2 = 0; k2 < g.length; k2++) f[n++] = (g[k2].length & 65280) >> 8, f[n++] = g[k2].length & 255, f.set(g[k2], n), n += g[k2].length;
                  f[n++] = h.length;
                  for (g = 0; g < h.length; g++) f[n++] = (h[g].length & 65280) >> 8, f[n++] = h[g].length & 255, f.set(h[g], n), n += h[g].length;
                  e = e("avcC", f);
                }
                c = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(Ni(c, 2)), x(Ni(d, 2)), [
                  0,
                  72,
                  0,
                  0,
                  0,
                  72,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  19,
                  118,
                  105,
                  100,
                  101,
                  111,
                  106,
                  115,
                  45,
                  99,
                  111,
                  110,
                  116,
                  114,
                  105,
                  98,
                  45,
                  104,
                  108,
                  115,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  24,
                  17,
                  17
                ]));
                d = "avc1";
                h = Wi(a);
                g = new Uint8Array([]);
                a.encrypted && (g = Xi(a.stream, a.codecs), d = "encv");
                d = Li(d, c, e, h, g);
              } else a.codecs.includes("hvc1") && (d = a.stream.width || 0, e = a.stream.height || 0, c = new Uint8Array([]), a.Sa.byteLength > 0 && (c = Li("hvcC", a.Sa)), d = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(Ni(d, 2)), x(Ni(e, 2)), [
                0,
                72,
                0,
                0,
                0,
                72,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                19,
                118,
                105,
                100,
                101,
                111,
                106,
                115,
                45,
                99,
                111,
                110,
                116,
                114,
                105,
                98,
                45,
                104,
                108,
                115,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                24,
                17,
                17
              ])), e = "hvc1", h = Wi(a), g = new Uint8Array([]), a.encrypted && (g = Xi(a.stream, a.codecs), e = "encv"), d = Li(e, d, c, h, g));
              break;
            case "audio":
              if (c == "mp3") a = Li(".mp3", Yi(a));
              else if (c == "ac-3") c = Li("dac3", a.Ga), d = "ac-3", e = new Uint8Array([]), a.encrypted && (e = Xi(a.stream, a.codecs), d = "enca"), a = Li(d, Yi(a), c, e);
              else if (c == "ec-3") c = Li("dec3", a.Ga), d = "ec-3", e = new Uint8Array([]), a.encrypted && (e = Xi(a.stream, a.codecs), d = "enca"), a = Li(d, Yi(a), c, e);
              else if (c == "opus") c = Li("dOps", a.Ga), d = "Opus", e = new Uint8Array([]), a.encrypted && (e = Xi(a.stream, a.codecs), d = "enca"), a = Li(d, Yi(a), c, e);
              else {
                if (a.Ga.byteLength > 0) c = Li("esds", a.Ga);
                else {
                  c = Li;
                  d = a.id + 1;
                  e = a.stream.channelsCount || 2;
                  g = a.stream.audioSamplingRate || 44100;
                  k2 = xc("audio", a.codecs.split(","));
                  l = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
                  h = l[g];
                  if (k2 === "mp4a.40.5" || k2 === "mp4a.40.29") h = l[g * 2];
                  g = parseInt(k2.split(".").pop(), 10);
                  d = new Uint8Array([0, 0, 0, 0, 3, 25].concat(x(Ni(d, 2)), [0, 4, 17, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 2, g << 3 | h >>> 1, h << 7 | e << 3, 6, 1, 2]));
                  c = c("esds", d);
                }
                d = "mp4a";
                e = new Uint8Array([]);
                a.encrypted && (e = Xi(a.stream, a.codecs), d = "enca");
                a = Li(d, Yi(a), c, e);
              }
              d = a;
          }
          a = Li("stsd", Zi.value(), d);
          return b("stbl", a, Li("stts", $i.value()), Li("stsc", aj.value()), Li("stsz", bj.value()), Li("stco", cj.value()));
        }
        function Wi(a) {
          if (!a.Za && !a.$a) return new Uint8Array([]);
          var b = a.$a;
          a = new Uint8Array([].concat(x(Ni(a.Za, 4)), x(Ni(b, 4))));
          return Li("pasp", a);
        }
        function Yi(a) {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, a.stream.channelsCount || 2, 0, 16, 0, 0, 0, 0].concat(x(Ni(a.stream.audioSamplingRate || 44100, 2)), [0, 0]));
        }
        function Xi(a, b) {
          var c = Li;
          b = new Uint8Array([].concat(x(Ni(dj(b.split(".")[0]), 4))));
          b = Li("frma", b);
          var d = "cenc";
          var e = a.drmInfos[0];
          e && e.encryptionScheme && (d = e.encryptionScheme);
          d = new Uint8Array([0, 0, 0, 0].concat(x(Ni(dj(d), 4)), [0, 1, 0, 0]));
          d = Li("schm", d);
          e = Li;
          var f = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
          a = t(a.drmInfos);
          for (var g = a.next(); !g.done; g = a.next()) if ((g = g.value) && g.keyIds && g.keyIds.size) {
            g = t(g.keyIds);
            for (var h = g.next(); !h.done; h = g.next()) f = Vi(h.value);
          }
          a = new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            8
          ]);
          f = Li("tenc", a, f);
          return c("sinf", b, d, e("schi", f));
        }
        function ej(a) {
          var b = [];
          a = t(a.g);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = b.push, e = d.apply;
            var f = Li;
            var g = new Uint8Array([0, 0, 0, 0].concat(x(Ni(c.data ? c.data.sequenceNumber : 0, 4))));
            g = Li("mfhd", g);
            var h;
            var k2 = c.data ? c.data.zb : [];
            var l = new Uint8Array(4 + k2.length);
            for (h = 0; h < k2.length; h++) {
              var m = k2[h].flags;
              l[h + 4] = m.ib << 4 | m.mb << 2 | m.jb;
            }
            k2 = Li("sdtp", l);
            var n = k2.length + 32 + 20 + 8 + 16 + 8 + 8;
            l = Li;
            h = new Uint8Array([0, 0, 0, 58].concat(x(Ni(c.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
            h = Li("tfhd", h);
            m = c.data ? c.data.baseMediaDecodeTime : 0;
            var q = Math.floor(m % (Mi + 1));
            m = new Uint8Array([1, 0, 0, 0].concat(x(Ni(Math.floor(m / (Mi + 1)), 4)), x(Ni(q, 4))));
            m = Li("tfdt", m);
            var r = n;
            n = c.data ? c.data.zb : [];
            q = n.length;
            var u = 12 + 16 * q, v = new Uint8Array(u);
            r += 8 + u;
            v.set([c.type === "video" ? 1 : 0, 0, 15, 1].concat(x(Ni(q, 4)), x(Ni(r, 4))), 0);
            for (r = 0; r < q; r++) {
              var w = n[r];
              u = Ni(w.duration, 4);
              var z = Ni(w.size, 4), y = w.flags;
              w = Ni(w.sb, 4);
              v.set([].concat(x(u), x(z), [y.xb << 2 | y.ib, y.mb << 6 | y.jb << 4 | y.yb, y.hb & 61440, y.hb & 15], x(w)), 12 + 16 * r);
            }
            n = Li("trun", v);
            k2 = l("traf", h, m, n, k2);
            f = f("moof", g, k2);
            e.call(d, b, [f, fj(c)]);
          }
          return tc.apply(lc, x(b));
        }
        function fj(a) {
          a = (a.data ? a.data.zb : []).map(function(b) {
            return b.data;
          });
          a = tc.apply(lc, x(a));
          return Li("mdat", a);
        }
        function Ni(a, b) {
          var c = [];
          for (--b; b >= 0; b--) c.push(a >> 8 * b & 255);
          return c;
        }
        function Vi(a) {
          for (var b = new Uint8Array(a.length / 2), c = 0; c < a.length / 2; c += 1) b[c] = parseInt(String(a[c * 2] + a[c * 2 + 1]), 16);
          return b;
        }
        function dj(a) {
          for (var b = 0, c = 0; c < a.length; c += 1) b |= a.charCodeAt(c) << (a.length - c - 1) * 8;
          return b;
        }
        function Li(a) {
          var b = Na.apply(1, arguments), c = gj.get(a);
          c || (c = [a.charCodeAt(0), a.charCodeAt(1), a.charCodeAt(2), a.charCodeAt(3)], gj.set(a, c));
          for (var d = 8, e = b.length - 1; e >= 0; e--) d += b[e].byteLength;
          e = new Uint8Array(d);
          e[0] = d >> 24 & 255;
          e[1] = d >> 16 & 255;
          e[2] = d >> 8 & 255;
          e[3] = d & 255;
          e.set(c, 4);
          c = 0;
          for (d = 8; c < b.length; c++) e.set(b[c], d), d += b[c].byteLength;
          return e;
        }
        var Mi = 4294967295, gj = /* @__PURE__ */ new Map(), Oi = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]);
        }), Pi = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
        }), $i = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), aj = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), cj = new qb(function() {
          return new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
          ]);
        }), bj = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
        }), Qi = new qb(function() {
          return new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
        }), Ti = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), Zi = new qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
        }), Ui = new qb(function() {
          var a = new Uint8Array([105, 115, 111, 109]), b = new Uint8Array([97, 118, 99, 49]), c = new Uint8Array([0, 0, 0, 1]);
          return Li("ftyp", a, c, a, b);
        }), Ri = new qb(function() {
          var a = new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            12,
            117,
            114,
            108,
            32,
            0,
            0,
            0,
            1
          ]);
          a = Li("dref", a);
          return Li("dinf", a);
        });
        function hj(a) {
          a = Vb(a);
          var b = null;
          new kh().box("moov", qh).box("trak", qh).box("mdia", qh).box("minf", qh).box("stbl", qh).S("stsd", sh).box("enca", function(c) {
            b = c.reader.h;
            return uh(c);
          }).box("sinf", qh).box("frma", function(c) {
            c.parser.stop();
            Fi(c.reader).codec === "ec-3" && b && b.getUint16(16) !== 2 && b.setUint16(16, 2);
          }).parse(a);
          return a;
        }
        function ij(a, b, c) {
          function d(r) {
            n.push({ box: r, zi: 1701733217 });
          }
          function e(r) {
            n.push({ box: r, zi: 1701733238 });
          }
          function f(r) {
            k2 = true;
            r.parser.stop();
          }
          function g(r) {
            m.push(r);
            qh(r);
          }
          var h = b = Vb(b), k2 = false, l, m = [], n = [];
          new kh().box("moov", g).box("trak", g).box("mdia", g).box("minf", g).box("stbl", g).S("stsd", function(r) {
            l = r;
            m.push(r);
            sh(r);
          }).S("encv", f).S("enca", f).S("dvav", e).S("dva1", e).S("dvh1", e).S("dvhe", e).S("dvc1", e).S("dvi1", e).S("hev1", e).S("hvc1", e).S("avc1", e).S("avc3", e).S("ac-3", d).S("ec-3", d).S(
            "ac-4",
            d
          ).S("Opus", d).S("fLaC", d).S("mp4a", d).parse(b);
          if (k2) return b;
          if (n.length == 0 || !l) throw eb(sc(b)), new U(2, 3, 3019, c);
          n.reverse();
          c = t(n);
          for (var q = c.next(); !q.done; q = c.next()) q = q.value, h = jj(a, h, l, q.box, m, q.zi);
          return rb().eh() ? (a = new Uint8Array(b.byteLength + h.byteLength), a.set(h), a.set(b, h.byteLength), a) : h;
        }
        function kj(a) {
          a = Vb(a);
          var b = [];
          new kh().box("mdat", function(g) {
            b.push(g);
          }).parse(a);
          for (var c = [], d = 0; d < b.length; d++) {
            var e = b[d - 1], f = b[d];
            c.push(lj(a.subarray(e ? e.start + e.size : 0, f.start + f.size)));
          }
          return tc.apply(lc, x(c));
        }
        function lj(a) {
          function b(n) {
            g.push(n);
            qh(n);
          }
          var c, d, e, f, g = [];
          new kh().box("moof", b).box("traf", b).S("tfhd", function(n) {
            c = n;
            e = Ai(n.reader, n.flags);
          }).S("trun", function(n) {
            d = n;
            f = Di(n.reader, n.version, n.flags);
          }).parse(a);
          if (e && e.Mi !== 2) {
            var h = c.start + rh(c) + 4 + (e.lj !== null ? 8 : 0), k2 = $b(a);
            if (e.Mi !== null) k2.setUint32(h, 2);
            else {
              mj(a, c.start, c.size + 4);
              var l = k2.getUint32(c.start + 8);
              k2.setUint32(c.start + 8, l | 2);
              f && f.mg !== null && k2.setInt32(d.start + rh(d) + 4, f.mg + 4);
              l = a.subarray(0, h);
              k2 = a.subarray(h);
              a = new Uint8Array(a.byteLength + 4);
              a.set(l);
              l = [];
              for (var m = 3; m >= 0; m--) l.push(2 >> 8 * m & 255);
              a.set(new Uint8Array(l), h);
              a.set(k2, h + 4);
              h = t(g);
              for (k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, mj(a, k2.start, k2.size + 4);
            }
          }
          return a;
        }
        function jj(a, b, c, d, e, f) {
          var g = Xi(a, d.name), h = b.subarray(d.start, d.start + d.size);
          a = new Uint8Array(d.size + g.byteLength);
          a.set(h, 0);
          $b(a).setUint32(4, f);
          a.set(g, d.size);
          mj(a, 0, a.byteLength);
          f = new Uint8Array(b.byteLength + a.byteLength);
          d = rb().df() ? d.start : d.start + d.size;
          g = b.subarray(d);
          f.set(b.subarray(0, d));
          f.set(a, d);
          f.set(g, d + a.byteLength);
          b = t(e);
          for (e = b.next(); !e.done; e = b.next()) e = e.value, mj(f, e.start, e.size + a.byteLength);
          a = $b(f, c.start);
          c = rh(c);
          b = a.getUint32(c);
          a.setUint32(c, b + 1);
          return f;
        }
        function mj(a, b, c) {
          a = $b(a, b);
          b = a.getUint32(0);
          b != 0 && (b == 1 ? (a.setUint32(8, c >> 32), a.setUint32(12, c & 4294967295)) : a.setUint32(0, c));
        }
        function nj(a) {
          function b(e) {
            d.push({ start: e.start, size: e.size });
            qh(e);
          }
          var c = Vb(a), d = [];
          new kh().box("moov", b).box("trak", b).box("mdia", b).box("minf", b).box("stbl", b).box("stsd", function(e) {
            d.push({ start: e.start, size: e.size });
            for (var f = $b(c, e.start), g = 0; g < e.size - 3; g++) {
              var h = f.getUint32(g);
              h == 1633889587 ? f.setUint32(g, 1700998451) : h == 1684103987 && f.setUint32(g, 1684366131);
            }
          }).parse(c);
          return c;
        }
        ;
        function oj(a, b, c, d, e, f, g, h) {
          this.P = a;
          this.startByte = b;
          this.endByte = c;
          this.xd = d === void 0 ? null : d;
          this.timescale = e === void 0 ? null : e;
          this.h = f === void 0 ? null : f;
          this.aesKey = g === void 0 ? null : g;
          this.g = this.mimeType = this.codecs = null;
          this.encrypted = h === void 0 ? false : h;
        }
        oj.prototype.Jc = function() {
          return this.startByte;
        };
        oj.prototype.Hc = function() {
          return this.endByte;
        };
        oj.prototype.pe = function(a) {
          this.h = a;
        };
        oj.prototype.$b = function() {
          return this.h;
        };
        function pj(a, b) {
          return a === b ? true : a && b ? a.Jc() == b.Jc() && a.Hc() == b.Hc() && ib(a.P().sort(), b.P().sort()) && Tb(a.$b(), b.$b()) : a == b;
        }
        S("shaka.media.InitSegmentReference", oj);
        oj.prototype.getEndByte = oj.prototype.Hc;
        oj.prototype.getStartByte = oj.prototype.Jc;
        function qj(a, b, c, d, e, f, g, h, k2, l, m, n, q, r, u, v) {
          l = l === void 0 ? [] : l;
          r = r === void 0 ? rj : r;
          this.startTime = a;
          this.j = this.endTime = b;
          this.C = c;
          this.startByte = d;
          this.endByte = e;
          this.ba = f;
          this.timestampOffset = g;
          this.appendWindowStart = h;
          this.appendWindowEnd = k2;
          this.g = l;
          this.tilesLayout = m === void 0 ? "" : m;
          this.B = n === void 0 ? null : n;
          this.h = q === void 0 ? null : q;
          this.status = r;
          this.preload = false;
          this.l = true;
          this.o = false;
          this.aesKey = u === void 0 ? null : u;
          this.thumbnailSprite = null;
          this.i = -1;
          this.m = v === void 0 ? false : v;
          this.ee = this.Xc = false;
          a = t(this.g);
          for (b = a.next(); !b.done; b = a.next()) b.value.ti();
          this.m && this.g.length && this.g[this.g.length - 1].si();
          this.u = this.bandwidth = this.mimeType = this.codecs = null;
          this.F = false;
        }
        p = qj.prototype;
        p.P = function() {
          return this.C();
        };
        p.getStartTime = function() {
          return this.startTime;
        };
        p.Ej = function() {
          return this.endTime;
        };
        p.Jc = function() {
          return this.startByte;
        };
        p.Hc = function() {
          return this.endByte;
        };
        function sj(a) {
          if (a.endByte) return a.endByte + 1 - a.startByte;
          if (a.bandwidth) {
            var b = a.bandwidth * (a.endTime - a.startTime);
            if (!isNaN(b) && b > 0) return b;
          }
          if (a.g.length > 0 && a.m) for (a = t(a.g), a = a.next(); !a.done; a = a.next()) {
            sj(a.value);
            break;
          }
          return null;
        }
        p.$j = function() {
          return this.tilesLayout;
        };
        p.Zj = function() {
          return this.B;
        };
        p.Kc = function() {
          return this.status;
        };
        p.wk = function() {
          this.status = tj;
        };
        p.Qg = function() {
          this.preload = true;
        };
        p.isPreload = function() {
          return this.preload;
        };
        p.wd = function() {
          this.l = false;
        };
        p.kk = function() {
          return this.l;
        };
        p.ti = function() {
          this.Xc = true;
        };
        p.nk = function() {
          return this.Xc;
        };
        p.si = function() {
          this.ee = true;
        };
        p.lk = function() {
          return this.ee;
        };
        p.ri = function() {
          this.o = true;
        };
        p.gk = function() {
          return this.o;
        };
        p.If = function(a) {
          this.thumbnailSprite = a;
        };
        p.Xj = function() {
          return this.thumbnailSprite;
        };
        p.offset = function(a) {
          this.startTime += a;
          this.endTime += a;
          this.j += a;
          for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.startTime += a, c.endTime += a, c.j += a;
        };
        p.Ah = function(a) {
          this.h == null ? Za("Sync attempted without sync time!") : (a = this.h - a - this.startTime, Math.abs(a) >= 1e-3 && this.offset(a));
        };
        p.pe = function(a, b) {
          this.u = a;
          this.F = b === void 0 ? false : b;
        };
        p.$b = function(a) {
          var b = this.u;
          (a === void 0 || a) && this.F && (this.u = null);
          return b;
        };
        function uj(a, b) {
          a.ba = b;
          a = t(a.g);
          for (var c = a.next(); !c.done; c = a.next()) uj(c.value, b);
        }
        S("shaka.media.SegmentReference", qj);
        qj.prototype.getSegmentData = qj.prototype.$b;
        qj.prototype.setSegmentData = qj.prototype.pe;
        qj.prototype.syncAgainst = qj.prototype.Ah;
        qj.prototype.offset = qj.prototype.offset;
        qj.prototype.getThumbnailSprite = qj.prototype.Xj;
        qj.prototype.setThumbnailSprite = qj.prototype.If;
        qj.prototype.hasByterangeOptimization = qj.prototype.gk;
        qj.prototype.markAsByterangeOptimization = qj.prototype.ri;
        qj.prototype.isLastPartial = qj.prototype.lk;
        qj.prototype.markAsLastPartial = qj.prototype.si;
        qj.prototype.isPartial = qj.prototype.nk;
        qj.prototype.markAsPartial = qj.prototype.ti;
        qj.prototype.isIndependent = qj.prototype.kk;
        qj.prototype.markAsNonIndependent = qj.prototype.wd;
        qj.prototype.isPreload = qj.prototype.isPreload;
        qj.prototype.markAsPreload = qj.prototype.Qg;
        qj.prototype.markAsUnavailable = qj.prototype.wk;
        qj.prototype.getStatus = qj.prototype.Kc;
        qj.prototype.getTileDuration = qj.prototype.Zj;
        qj.prototype.getTilesLayout = qj.prototype.$j;
        qj.prototype.getEndByte = qj.prototype.Hc;
        qj.prototype.getStartByte = qj.prototype.Jc;
        qj.prototype.getEndTime = qj.prototype.Ej;
        qj.prototype.getStartTime = qj.prototype.getStartTime;
        qj.prototype.getUris = qj.prototype.P;
        var rj = 0, tj = 1;
        qj.Status = { ol: rj, wm: tj, Sl: 2 };
        function vj(a) {
          return a.length == 1 && a.end(0) - a.start(0) < 1e-4;
        }
        function wj(a) {
          return !a || vj(a) ? null : a.length == 1 && a.start(0) < 0 ? 0 : a.length ? a.start(0) : null;
        }
        function xj(a) {
          return !a || vj(a) ? null : a.length ? a.end(a.length - 1) : null;
        }
        function yj(a, b) {
          return !a || !a.length || vj(a) || b > a.end(a.length - 1) ? false : b >= a.start(0);
        }
        function zj(a, b) {
          if (!a || !a.length || vj(a)) return 0;
          var c = 0;
          a = t(Aj(a));
          for (var d = a.next(); !d.done; d = a.next()) {
            var e = d.value;
            d = e.start;
            e = e.end;
            e > b && (c += e - Math.max(d, b));
          }
          return c;
        }
        function Bj(a, b, c) {
          if (!a || !a.length || vj(a)) return null;
          a = Aj(a).findIndex(function(d, e, f) {
            return d.start > b && (e == 0 || f[e - 1].end - b <= c);
          });
          return a >= 0 ? a : null;
        }
        function Aj(a) {
          if (!a) return [];
          for (var b = [], c = 0; c < a.length; c++) b.push({ start: a.start(c), end: a.end(c) });
          return b;
        }
        ;
        function Cj() {
        }
        function Dj(a, b) {
          var c = document.createElement("source");
          c.src = a;
          c.type = b === void 0 ? "" : b;
          return c;
        }
        function Ej(a) {
          for (var b = false, c = a.getElementsByTagName("source"), d = c.length - 1; d >= 0; --d) a.removeChild(c[d]), b = true;
          a.src && (a.removeAttribute("src"), b = true);
          return b;
        }
        function Fj(a) {
          for (; a.firstChild; ) a.removeChild(a.firstChild);
        }
        function Nc() {
          if (Gj) return Gj;
          Hj || (Hj = new gf(function() {
            Gj = null;
          }));
          (Gj = document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) || (Gj = document.createElement("video"));
          Hj.ia(1);
          return Gj;
        }
        function Ij(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) return "fonts" in document && "FontFace" in window2 ? F(h, document.fonts.ready, 2) : h.return();
            if (!("entries" in document.fonts)) return h.return();
            c = function(k2) {
              k2 = k2.entries();
              for (var l = [], m = k2.next(); m.done === false; ) l.push(m.value), m = k2.next();
              return l;
            };
            d = t(c(document.fonts));
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, f.family === a && f.display === "swap") return h.return();
            g = new FontFace(a, "url(" + b + ")", { display: "swap" });
            document.fonts.add(g);
            G(h);
          });
        }
        S("shaka.util.Dom", Cj);
        Cj.removeAllChildren = Fj;
        Cj.clearSourceFromVideo = Ej;
        var Hj = null, Gj = null;
        function Kj() {
        }
        function Lj(a, b) {
          return b + 10 <= a.length && a[b] === 73 && a[b + 1] === 68 && a[b + 2] === 51 && a[b + 3] < 255 && a[b + 4] < 255 && a[b + 6] < 128 && a[b + 7] < 128 && a[b + 8] < 128 && a[b + 9] < 128 ? true : false;
        }
        function Mj(a, b) {
          return b + 10 <= a.length && a[b] === 51 && a[b + 1] === 68 && a[b + 2] === 73 && a[b + 3] < 255 && a[b + 4] < 255 && a[b + 6] < 128 && a[b + 7] < 128 && a[b + 8] < 128 && a[b + 9] < 128 ? true : false;
        }
        function Nj(a, b) {
          var c = (a[b] & 127) << 21;
          c |= (a[b + 1] & 127) << 14;
          c |= (a[b + 2] & 127) << 7;
          return c |= a[b + 3] & 127;
        }
        function Oj(a) {
          var b = { key: a.type, description: "", data: "", mimeType: null, pictureType: null };
          if (a.type === "APIC") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            var c = a.data.subarray(1).indexOf(0);
            if (c === -1) return null;
            var d = cc(Vb(a.data, 1, c)), e = a.data[2 + c], f = a.data.subarray(3 + c).indexOf(0);
            if (f === -1) return null;
            var g = cc(Vb(a.data, 3 + c, f)), h;
            d === "-->" ? h = cc(Vb(a.data, 4 + c + f)) : h = Xb(a.data.subarray(4 + c + f));
            b.mimeType = d;
            b.pictureType = e;
            b.description = g;
            b.data = h;
            return b;
          }
          if (a.type === "TXXX") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            d = a.data.subarray(1).indexOf(0);
            if (d === -1) return null;
            c = cc(Vb(a.data, 1, d));
            a = cc(Vb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if (a.type === "WXXX") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            d = a.data.subarray(1).indexOf(0);
            if (d === -1) return null;
            c = cc(Vb(a.data, 1, d));
            a = cc(Vb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if (a.type === "PRIV") {
            if (a.size < 2) return null;
            c = a.data.indexOf(0);
            if (c === -1) return null;
            c = cc(Vb(a.data, 0, c));
            b.description = c;
            c == "com.apple.streaming.transportStreamTimestamp" ? (c = a.data.subarray(c.length + 1), a = c[3] & 1, c = (c[4] << 23) + (c[5] << 15) + (c[6] << 7) + c[7], c /= 45, a && (c += 4772185884e-2), b.data = c) : (a = Xb(a.data.subarray(c.length + 1)), b.data = a);
            return b;
          }
          if (a.type[0] === "T") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            a = cc(a.data.subarray(1)).replace(/\0*$/, "");
            b.data = a;
            return b;
          }
          return a.type[0] === "W" ? (a = cc(a.data).replace(/\0*$/, ""), b.data = a, b) : a.data ? (b.data = Xb(a.data), b) : null;
        }
        function Pj(a) {
          for (var b = 0, c = []; Lj(a, b); ) {
            var d = Nj(a, b + 6);
            a[b + 5] >> 6 & 1 && (b += 10);
            b += 10;
            for (d = b + d; b + 10 < d; ) {
              var e = a.subarray(b), f = Nj(e, 4);
              e = { type: String.fromCharCode(e[0], e[1], e[2], e[3]), size: f, data: e.subarray(10, 10 + f) };
              (f = Oj(e)) && c.push(f);
              b += e.size + 10;
            }
            Mj(a, b) && (b += 10);
          }
          return c;
        }
        function Qj(a, b) {
          for (var c = b = b === void 0 ? 0 : b, d = 0; Lj(a, b); ) a[b + 5] >> 6 & 1 && (d += 10), d += 10, d += Nj(a, b + 6), Mj(a, b + 10) && (d += 10), b += d;
          return d > 0 ? a.subarray(c, c + d) : new Uint8Array([]);
        }
        S("shaka.util.Id3Utils", Kj);
        Kj.getID3Data = Qj;
        Kj.getID3Frames = Pj;
        function Rj(a) {
          return new Date(Date.UTC(1900, 0, 1, 0, 0, 0, 0) + a).getTime();
        }
        ;
        function Sj(a, b) {
          this.j = a;
          if (b === void 0 ? 0 : b) {
            b = new Uint8Array(a.byteLength);
            for (var c = 0, d = 0; d < a.byteLength; d++) d >= 2 && a[d] == 3 && a[d - 1] == 0 && a[d - 2] == 0 || (b[c] = a[d], c++);
            this.j = Vb(b, 0, c);
          }
          this.i = this.j.byteLength;
          this.g = this.h = 0;
        }
        function Tj(a) {
          var b = a.j.byteLength - a.i, c = new Uint8Array(4), d = Math.min(4, a.i);
          d !== 0 && (c.set(a.j.subarray(b, b + d)), a.h = new hh(c, 0).U(), a.g = d * 8, a.i -= d);
        }
        function Uj(a, b) {
          if (a.g <= b) {
            b -= a.g;
            var c = Math.floor(b / 8);
            b -= c * 8;
            a.g -= c;
            Tj(a);
          }
          a.h <<= b;
          a.g -= b;
        }
        function Vj(a, b) {
          var c = Math.min(a.g, b), d = a.h >>> 32 - c;
          a.g -= c;
          a.g > 0 ? a.h <<= c : a.i > 0 && Tj(a);
          c = b - c;
          return c > 0 ? d << c | Vj(a, c) : d;
        }
        function Wj(a) {
          var b;
          for (b = 0; b < a.g; ++b) if ((a.h & 2147483648 >>> b) !== 0) return a.h <<= b, a.g -= b, b;
          Tj(a);
          return b + Wj(a);
        }
        function Xj(a) {
          Uj(a, 1 + Wj(a));
        }
        function X(a) {
          var b = Wj(a);
          return Vj(a, b + 1) - 1;
        }
        function Yj(a) {
          a = X(a);
          return 1 & a ? 1 + a >>> 1 : -1 * (a >>> 1);
        }
        function Zj(a) {
          return Vj(a, 1) === 1;
        }
        function ak(a) {
          return Vj(a, 8);
        }
        function bk(a, b) {
          for (var c = 8, d = 8, e = 0; e < b; e++) d !== 0 && (d = Yj(a), d = (c + d + 256) % 256), c = d === 0 ? c : d;
        }
        function ck(a) {
          ak(a);
          X(a);
          return X(a);
        }
        S("shaka.util.ExpGolomb", Sj);
        function dk() {
          this.I = null;
          this.J = false;
          this.m = this.K = null;
          this.j = [];
          this.g = [];
          this.C = this.F = null;
          this.i = [];
          this.h = [];
          this.G = null;
          this.l = [];
          this.B = this.H = this.o = this.u = null;
        }
        p = dk.prototype;
        p.clearData = function() {
          this.j = [];
          this.g = [];
          this.i = [];
          this.h = [];
          this.l = [];
        };
        p.Gf = function(a) {
          this.B != null && this.B != a && (this.o = this.u = null);
          this.B = a;
        };
        p.parse = function(a) {
          if (a.length < 564) return this;
          for (var b = Math.max(0, ek(a)), c = a.length - (a.length + b) % 188, d = false, e = b; e < c; e += 188) if (a[e] == 71) {
            var f = !!(a[e + 1] & 64), g = ((a[e + 1] & 31) << 8) + a[e + 2];
            if ((a[e + 3] & 48) >> 4 > 1) {
              var h = e + 5 + a[e + 4];
              if (h == e + 188) continue;
            } else h = e + 4;
            switch (g) {
              case 0:
                f && (h += a[h] + 1);
                this.I = (a[h + 10] & 31) << 8 | a[h + 11];
                break;
              case 17:
              case 8191:
                break;
              case this.I:
                f && (h += a[h] + 1);
                f = a;
                g = { audio: -1, video: -1, bf: -1, audioCodec: "", videoCodec: "" };
                var k2 = h + 3 + ((f[h + 1] & 15) << 8 | f[h + 2]) - 4;
                for (h += 12 + ((f[h + 10] & 15) << 8 | f[h + 11]); h < k2; ) {
                  var l = (f[h + 1] & 31) << 8 | f[h + 2], m = (f[h + 3] & 15) << 8 | f[h + 4];
                  switch (f[h]) {
                    case 6:
                      if (m > 0) for (var n = h + 5, q = m; q > 2; ) {
                        var r = f[n + 1] + 2;
                        switch (f[n]) {
                          case 5:
                            var u = ec(f.subarray(n + 2, n + r));
                            g.audio == -1 && u === "Opus" ? (g.audio = l, g.audioCodec = "opus") : g.video == -1 && u === "AV01" && (g.video = l, g.videoCodec = "av1");
                            break;
                          case 106:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "ac3");
                            break;
                          case 122:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "ec3");
                            break;
                          case 124:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "aac");
                            break;
                          case 127:
                            g.audioCodec == "opus" && (u = null, f[n + 2] === 128 && (u = f[n + 3]), u != null && (this.H = { channelCount: (u & 15) === 0 ? 2 : u & 15, oj: u, sampleRate: 48e3 }));
                        }
                        n += r;
                        q -= r;
                      }
                      break;
                    case 15:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "aac");
                      break;
                    case 17:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "aac-loas");
                      break;
                    case 21:
                      g.bf == -1 && (g.bf = l);
                      break;
                    case 27:
                      g.video == -1 && (g.video = l, g.videoCodec = "avc");
                      break;
                    case 3:
                    case 4:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "mp3");
                      break;
                    case 36:
                      g.video == -1 && (g.video = l, g.videoCodec = "hvc");
                      break;
                    case 129:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "ac3");
                      break;
                    case 132:
                    case 135:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "ec3");
                  }
                  h += m + 5;
                }
                f = g;
                f.video != -1 && (this.K = f.video, this.m = f.videoCodec);
                f.audio != -1 && (this.F = f.audio, this.C = f.audioCodec);
                f.bf != -1 && (this.G = f.bf);
                d && !this.J && (d = false, e = b - 188);
                this.J = true;
                break;
              case this.K:
                h = a.subarray(h, e + 188);
                f ? this.j.push([h]) : this.j.length && this.j[this.j.length - 1] && this.j[this.j.length - 1].push(h);
                break;
              case this.F:
                h = a.subarray(h, e + 188);
                f ? this.i.push([h]) : this.i.length && this.i[this.i.length - 1] && this.i[this.i.length - 1].push(h);
                break;
              case this.G:
                h = a.subarray(h, e + 188);
                f ? this.l.push([h]) : this.l.length && this.l[this.l.length - 1] && this.l[this.l.length - 1].push(h);
                break;
              default:
                d = true;
            }
          }
          return this;
        };
        function fk(a, b) {
          if ((b[0] << 16 | b[1] << 8 | b[2]) !== 1) return null;
          var c = { data: new Uint8Array(0), packetLength: b[4] << 8 | b[5], pts: null, dts: null, nalus: [] };
          if (c.packetLength && c.packetLength > b.byteLength - 6) return null;
          var d = b[7];
          if (d & 192) {
            var e = (b[9] & 14) * 536870912 + (b[10] & 255) * 4194304 + (b[11] & 254) * 16384 + (b[12] & 255) * 128 + (b[13] & 254) / 2;
            a.u == null && (a.u = e);
            c.pts = gk(e, a.u);
            a.u = c.pts;
            c.dts = c.pts;
            d & 64 && (d = (b[14] & 14) * 536870912 + (b[15] & 255) * 4194304 + (b[16] & 254) * 16384 + (b[17] & 255) * 128 + (b[18] & 254) / 2, a.o == null && (a.o = d), c.dts = c.pts != e ? gk(d, a.o) : d);
            a.o = c.dts;
          }
          a = b[8] + 9;
          if (b.byteLength <= a) return null;
          c.data = b.subarray(a);
          return c;
        }
        p.Dk = function(a) {
          xb("TsParser.parseAvcNalus", "Please use parseNalus function instead.");
          return this.Wg(a, { ge: null, state: null });
        };
        p.Wg = function(a, b) {
          var c = a.pts ? a.pts / 9e4 : null;
          a = a.data;
          var d = a.byteLength, e = 1;
          this.m == "hvc" && (e = 2);
          var f = b.state || 0, g = f, h = 0, k2 = [], l = -1, m = 0;
          f == -1 && (l = 0, m = this.m == "hvc" ? a[0] >> 1 & 63 : a[0] & 31, f = 0, h = 1);
          for (; h < d; ) {
            var n = a[h++];
            if (f) if (f === 1) f = n ? 0 : 2;
            else if (n) if (n == 1) {
              n = h - f - 1;
              if (l >= 0) k2.push({ data: a.subarray(l + e, n), fullData: a.subarray(l, n), type: m, time: c, state: null });
              else if (f = k2.length ? k2[k2.length - 1] : b.ge) g && h <= 4 - g && f.state && (f.data = f.data.subarray(0, f.data.byteLength - g), f.fullData = f.fullData.subarray(0, f.fullData.byteLength - g)), n > 0 && (n = a.subarray(0, n), f.data = tc(f.data, n), f.fullData = tc(f.fullData, n), f.state = 0);
              h < d ? (m = this.m == "hvc" ? a[h] >> 1 & 63 : a[h] & 31, l = h, f = 0) : f = -1;
            } else f = 0;
            else f = 3;
            else f = n ? 0 : 1;
          }
          l >= 0 && f >= 0 && k2.push({ data: a.subarray(l + e, d), fullData: a.subarray(l, d), type: m, time: c, state: f });
          !k2.length && b.ge && (c = k2.length ? k2[k2.length - 1] : b.ge) && (c.data = tc(c.data, a), c.fullData = tc(c.fullData, a));
          b.state = f;
          return k2;
        };
        p.getMetadata = function() {
          for (var a = [], b = t(this.l), c = b.next(); !c.done; c = b.next()) c = tc.apply(lc, x(c.value)), (c = fk(this, c)) && a.push({ cueTime: c.pts ? c.pts / 9e4 : null, data: c.data, frames: Pj(c.data), dts: c.dts, pts: c.pts });
          return a;
        };
        p.ub = function() {
          if (this.i.length && !this.h.length) for (var a = t(this.i), b = a.next(); !b.done; b = a.next()) {
            var c = tc.apply(lc, x(b.value)), d = fk(this, c);
            b = this.h.length ? this.h[this.h.length - 1] : null;
            d && d.pts != null && d.dts != null && (!b || b.pts != d.pts && b.dts != d.dts) ? this.h.push(d) : this.h.length && (c = d ? d.data : c) && (b = this.h.pop(), b.data = tc(b.data, c), this.h.push(b));
          }
          return this.h;
        };
        p.ud = function(a) {
          a = a === void 0 ? true : a;
          if (this.j.length && !this.g.length) {
            for (var b = t(this.j), c = b.next(); !c.done; c = b.next()) {
              var d = tc.apply(lc, x(c.value)), e = fk(this, d);
              c = this.g.length ? this.g[this.g.length - 1] : null;
              e && e.pts != null && e.dts != null && (!c || c.pts != e.pts && c.dts != e.dts) ? this.g.push(e) : this.g.length && (d = e ? e.data : d) && (c = this.g.pop(), c.data = tc(c.data, d), this.g.push(c));
            }
            if (a) {
              b = { ge: null, state: null };
              c = [];
              d = t(this.g);
              for (e = d.next(); !e.done; e = d.next()) e = e.value, e.nalus = this.Wg(e, b), e.nalus.length && (c.push(e), b.ge = e.nalus[e.nalus.length - 1]);
              this.g = c;
            }
          }
          return a ? this.g : (a = this.g, this.g = [], a);
        };
        p.getStartTime = function(a) {
          if (a == "audio") {
            a = null;
            var b = this.ub();
            b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4);
            return a;
          }
          return a == "video" ? (a = null, b = this.ud(false), b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4), a) : null;
        };
        p.Vd = function() {
          return { audio: this.C, video: this.m };
        };
        p.$e = function() {
          for (var a = [], b = t(this.ud()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, x(c.value.nalus));
          return a;
        };
        p.dk = function() {
          xb("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
          var a = this.Jg();
          return { height: a.height, width: a.width };
        };
        p.Jg = function() {
          return this.m == "hvc" ? hk(this) : ik(this);
        };
        function jk(a) {
          var b = a.ud();
          return b.length > 1 && (a = b[0].pts, b = b[1].pts, !isNaN(b - a)) ? String(Math.abs(1 / (b - a) * 9e4)) : null;
        }
        function ik(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.$e();
          if (!c.length) return b;
          c = c.find(function(r) {
            return r.type == 7;
          });
          if (!c) return b;
          c = new Sj(c.data);
          var d = ak(c), e = ak(c), f = ak(c);
          Xj(c);
          if (kk.includes(d)) {
            var g = X(c);
            g === 3 && Uj(c, 1);
            Xj(c);
            Xj(c);
            Uj(c, 1);
            if (Zj(c)) {
              g = g !== 3 ? 8 : 12;
              for (var h = 0; h < g; h++) Zj(c) && (h < 6 ? bk(c, 16) : bk(c, 64));
            }
          }
          Xj(c);
          g = X(c);
          if (g === 0) X(c);
          else if (g === 1) for (Uj(c, 1), Xj(c), Xj(c), g = X(c), h = 0; h < g; h++) Xj(c);
          Xj(c);
          Uj(c, 1);
          g = X(c);
          h = X(c);
          var k2 = Vj(c, 1);
          k2 === 0 && Uj(c, 1);
          Uj(
            c,
            1
          );
          var l = 0, m = 0, n = 0, q = 0;
          Zj(c) && (l = X(c), m = X(c), n = X(c), q = X(c));
          b.height = String((2 - k2) * (h + 1) * 16 - n * 2 - q * 2);
          b.width = String((g + 1) * 16 - l * 2 - m * 2);
          b.codec = "avc1." + ("0" + d.toString(16).toUpperCase()).slice(-2) + ("0" + e.toString(16).toUpperCase()).slice(-2) + ("0" + f.toString(16).toUpperCase()).slice(-2);
          b.frameRate = jk(a);
          return b;
        }
        function hk(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.$e();
          if (!c.length) return b;
          c = c.find(function(H) {
            return H.type == 33;
          });
          if (!c) return b;
          var d = new Sj(c.fullData, true);
          ak(d);
          ak(d);
          Vj(d, 4);
          var e = Vj(d, 3);
          Zj(d);
          var f = Vj(d, 2), g = Vj(d, 1), h = Vj(d, 5), k2 = Vj(d, 32);
          c = ak(d);
          for (var l = ak(d), m = ak(d), n = ak(d), q = ak(d), r = ak(d), u = ak(d), v = [], w = [], z = 0; z < e; z++) v.push(Zj(d)), w.push(Zj(d));
          if (e > 0) for (z = e; z < 8; z++) Vj(d, 2);
          for (z = 0; z < e; z++) v[z] && Vj(d, 88), w[z] && ak(d);
          X(d);
          e = X(d);
          e == 3 && Vj(d, 1);
          v = X(d);
          w = X(d);
          var y = z = 0, B = 0, C = 0;
          Zj(d) && (z += X(d), y += X(d), B += X(d), C += X(d));
          b.width = String(v - (z + y) * (e === 1 || e === 2 ? 2 : 1));
          b.height = String(w - (B + C) * (e === 1 ? 2 : 1));
          d = (function(H) {
            for (var D = 0, A = 0; A < 32; A++) D |= (H >> A & 1) << 31 - A;
            return D >>> 0;
          })(k2);
          g = g == 1 ? "H" : "L";
          f = "hvc1" + ("." + ["", "A", "B", "C"][f] + h);
          f += "." + d.toString(16).toUpperCase();
          f += "." + g + u;
          r && (f += "." + r.toString(16).toUpperCase());
          q && (f += "." + q.toString(16).toUpperCase());
          n && (f += "." + n.toString(16).toUpperCase());
          m && (f += "." + m.toString(16).toUpperCase());
          l && (f += "." + l.toString(16).toUpperCase());
          c && (f += "." + c.toString(16).toUpperCase());
          b.codec = f;
          b.frameRate = jk(a);
          return b;
        }
        function gk(a, b) {
          var c = 1;
          for (a > b && (c = -1); Math.abs(b - a) > 4294967296; ) a += c * 8589934592;
          return a;
        }
        function lk(a) {
          return ek(a) < 0 ? false : true;
        }
        function ek(a) {
          for (var b = Math.min(1e3, a.length - 564), c = 0; c < b; ) {
            if (a[c] == 71 && a[c + 188] == 71 && a[c + 376] == 71) return c;
            c++;
          }
          return -1;
        }
        S("shaka.util.TsParser", dk);
        dk.syncOffset = ek;
        dk.probe = lk;
        dk.prototype.getVideoInfo = dk.prototype.Jg;
        dk.prototype.getVideoResolution = dk.prototype.dk;
        dk.prototype.getVideoNalus = dk.prototype.$e;
        dk.prototype.getCodecs = dk.prototype.Vd;
        dk.prototype.getStartTime = dk.prototype.getStartTime;
        dk.prototype.getVideoData = dk.prototype.ud;
        dk.prototype.getAudioData = dk.prototype.ub;
        dk.prototype.getMetadata = dk.prototype.getMetadata;
        dk.prototype.parseNalus = dk.prototype.Wg;
        dk.prototype.parseAvcNalus = dk.prototype.Dk;
        dk.prototype.parse = dk.prototype.parse;
        dk.prototype.setDiscontinuitySequence = dk.prototype.Gf;
        dk.prototype.clearData = dk.prototype.clearData;
        dk.Timescale = 9e4;
        var kk = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function mk(a, b, c, d, e) {
          var f = this;
          this.g = a;
          this.O = c;
          this.B = d;
          this.aa = b;
          this.l = /* @__PURE__ */ new Map();
          this.G = /* @__PURE__ */ new Map();
          this.Ta = /* @__PURE__ */ new Map();
          this.h = null;
          this.Fa = false;
          this.C = e || null;
          this.o = /* @__PURE__ */ new Map();
          this.u = new kb();
          this.j = /* @__PURE__ */ new Map();
          this.K = null;
          this.M = new Cg();
          this.Da = "";
          this.ob = false;
          this.ya = true;
          this.N = false;
          this.F = this.R = null;
          this.i = nk(this, this.M);
          this.Ua = this.H = false;
          this.I = new bh(function() {
            return ok(f);
          });
          this.J = false;
          this.X = "UNKNOWN";
          this.eb = this.kb = false;
          this.ab = new Cg();
          this.m = false;
          this.xa = null;
          this.$ = /* @__PURE__ */ new Map();
          this.oa = this.T = this.va = this.V = null;
          this.ma = new Cg();
          this.g.remote && (this.N = this.g.remote.state != "disconnected", this.u.D(this.g.remote, "connect", function() {
            f.N = f.g.remote.state != "disconnected";
          }), this.u.D(this.g.remote, "connecting", function() {
            f.N = f.g.remote.state != "disconnected";
          }), this.u.D(this.g.remote, "disconnect", function() {
            f.N = f.g.remote.state != "disconnected";
          }));
        }
        function nk(a, b) {
          a.ya = true;
          if (window2.ManagedMediaSource) {
            a.F || (a.g.disableRemotePlayback = true);
            var c = new ManagedMediaSource();
            a.u.D(c, "startstreaming", function() {
              a.ya = true;
            });
            a.u.D(c, "endstreaming", function() {
              a.ya = false;
            });
          } else c = new MediaSource();
          a.u.za(c, "sourceopen", function() {
            URL.revokeObjectURL(a.Da);
            b.resolve();
          });
          a.u.za(a.g, "playing", function() {
            a.ob = true;
          });
          a.Da = pk(c);
          a.B.useSourceElements ? (a.g.removeAttribute("src"), a.R && a.g.removeChild(a.R), a.F && a.g.removeChild(a.F), a.R = Dj(a.Da), a.g.appendChild(a.R), a.F && a.g.appendChild(a.F), a.g.load()) : a.g.src = a.Da;
          return c;
        }
        function qk(a, b, c) {
          a.g && window2.ManagedMediaSource && a.i && a.B.useSourceElements && (a.F && a.g.removeChild(a.F), a.F = Dj(b, c), a.g.appendChild(a.F), a.g.disableRemotePlayback = false);
        }
        function rk() {
          var a = 'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(x(Je)), b = {};
          rb();
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            if (Ye(c)) b[c] = true;
            else if (Mc()) {
              var d = Qe(c), e = Nf(Re(c), d);
              d = Ie(d, e);
              b[c] = xi(d) || (Ce(d) ? true : false);
            } else b[c] = Nc().canPlayType(c) != "";
            d = c.split(";")[0];
            b[d] = b[d] || b[c];
          }
          return b;
        }
        p = mk.prototype;
        p.destroy = function() {
          return this.I.destroy();
        };
        function ok(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, q, r, u, v;
          return Q(function(w) {
            if (w.g == 1) {
              b = [];
              c = t(a.o);
              for (d = c.next(); !d.done; d = c.next()) for (e = d.value, f = t(e), g = f.next().value, h = f.next().value, k2 = h[0], l = g, a.o.set(l, h.slice(0, 1)), k2 && b.push(k2.p.catch(jf)), m = t(h.slice(1)), n = m.next(); !n.done; n = m.next()) q = n.value, q.p.reject(new U(2, 7, 7003, void 0));
              a.h && b.push(a.h.destroy());
              return F(w, Promise.all(b), 2);
            }
            r = t(a.j.values());
            for (u = r.next(); !u.done; u = r.next()) v = u.value, v.destroy();
            a.u && (a.u.release(), a.u = null);
            a.g && a.F && a.g.removeChild(a.F);
            a.g && a.R && (a.g.removeChild(a.R), a.g.load(), a.g.disableRemotePlayback = false);
            a.g = null;
            a.R = null;
            a.F = null;
            a.B = null;
            a.i = null;
            a.h = null;
            a.aa = null;
            a.l.clear();
            a.Ta.clear();
            a.j.clear();
            a.K = null;
            a.o.clear();
            a.C = null;
            a.$.clear();
            a.O = null;
            G(w);
          });
        }
        p.init = function(a, b, c, d) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? "UNKNOWN" : c;
          d = d === void 0 ? false : d;
          var e = this, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return f = Cc, F(n, e.M, 2);
            if (n.g != 3) {
              if (!Ak(e) && !Bk(e)) return n.A(3);
              Za("Expected MediaSource to be open during init(); reopening the media source.");
              e.M = new Cg();
              e.i = nk(e, e.M);
              return F(n, e.M, 3);
            }
            e.J = b;
            e.X = c;
            e.kb = d;
            e.eb = !e.J && e.X == "HLS" && !e.kb;
            e.$.clear();
            e.V = null;
            e.va = null;
            e.T = null;
            e.oa = null;
            e.ma = new Cg();
            g = t(a.keys());
            for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = a.get(k2), Ck(e, k2, l, l.codecs), e.m ? (e.o.set(f.ka, []), e.o.set(f.Aa, [])) : e.o.set(k2, []);
            (m = a.get(f.ka)) && m.isAudioMuxedInVideo && (e.m = true);
            G(n);
          });
        };
        function Ck(a, b, c, d) {
          b == "audio" && d && (d = Nf(d, c.mimeType));
          var e = Ie(c.mimeType, d);
          if (b == Ac) Dk(a, e, a.J, c.external);
          else {
            var f = a.B.forceTransmux;
            if (!xi(e) || !a.J && Je.includes(e)) f = true;
            var g = Ke(c.mimeType, d);
            if (f) {
              f = yc("audio", (d || "").split(","));
              d = yc("video", (d || "").split(","));
              if (f && d) {
                a.m = true;
                Ck(a, "audio", c, f);
                Ck(a, "video", c, d);
                return;
              }
              if (d = Ce(g)) e = d(), a.j.set(b, e), e = e.convertCodecs(b, g);
            }
            g = e + a.B.addExtraFeaturesToSourceBuffer(e);
            ch(a.I);
            try {
              var h = a.i.addSourceBuffer(g);
            } catch (k2) {
              throw new U(2, 3, 3015, k2, "The mediaSource_ status was " + a.i.readyState + " expected 'open'", null);
            }
            a.J && (h.mode = Ek);
            a.u.D(h, "error", function() {
              var k2 = a.o.get(b)[0];
              k2.p.reject(new U(2, 3, 3014, a.g.error ? a.g.error.code : 0, k2.uri));
            });
            a.u.D(h, "updateend", function() {
              return Fk(a, b);
            });
            a.l.set(b, h);
            a.G.set(b, e);
            a.Ta.set(b, !!c.drmInfos.length);
          }
        }
        p.configure = function(a) {
          this.B = a;
          this.h && (this.h.B = a.modifyCueCallback);
        };
        function Gk(a) {
          return a.ya && !a.N && !a.H;
        }
        function Dk(a, b, c, d) {
          a.h || (a.h = new Ue(a.aa), a.h && (a.h.B = a.B.modifyCueCallback));
          var e = a.h;
          d = d || a.Fa;
          a = a.X;
          b == "application/cea-608" || b == "application/cea-708" ? e.i = null : (e.i = We.get(b)(), e.i.setSequenceMode ? e.i.setSequenceMode(c) : xb("Text parsers w/ setSequenceMode", 'Text parsers should have a "setSequenceMode" method!'), e.i.setManifestType ? e.i.setManifestType(a) : xb("Text parsers w/ setManifestType", 'Text parsers should have a "setManifestType" method!'), e.C = d);
        }
        function Ak(a) {
          return a.H ? false : a.i ? a.i.readyState == "ended" : true;
        }
        function Bk(a) {
          return a.H ? false : a.i ? a.i.readyState == "closed" : true;
        }
        function Hk(a, b) {
          return a.l.size ? b == Ac ? a.h.g : wj(Ik(a, b)) : null;
        }
        function Jk(a, b) {
          return a.l.size ? b == Ac ? a.h.h : xj(Ik(a, b)) : null;
        }
        function Kk(a, b, c) {
          if (b == Ac) return a = a.h, a.h == null || a.h < c ? 0 : a.h - Math.max(c, a.g);
          a = Ik(a, b);
          return zj(a, c);
        }
        p.Gc = function() {
          var a = { total: this.H ? [] : Aj(this.g.buffered), audio: Aj(Ik(this, "audio")), video: Aj(Ik(this, "video")), text: [] };
          if (this.h) {
            var b = this.h.g, c = this.h.h;
            b != null && c != null && a.text.push({ start: b, end: c });
          }
          return a;
        };
        function Ik(a, b) {
          if (a.H || a.N) return null;
          try {
            return a.l.get(b).buffered;
          } catch (c) {
            return a.l.has(b), null;
          }
        }
        function Lk(a, b, c, d, e, f, g) {
          g = g === void 0 ? false : g;
          var h = null, k2 = [], l = Vb(c);
          if (Je.includes(f)) c = Pj(l), c.length && d && ((g = c.find(function(u) {
            return u.description === "com.apple.streaming.transportStreamTimestamp";
          })) && typeof g.data == "number" && (h = Math.round(g.data) / 1e3), a.O.onMetadata([{ cueTime: d.startTime, data: l, frames: c, dts: d.startTime, pts: d.startTime }], 0, d.endTime));
          else if (f.includes("/mp4") && d && d.ba) {
            l = new kh();
            var m = e.emsgSchemeIdUris != null && e.emsgSchemeIdUris.length > 0 || a.B.dispatchAllEmsgBoxes;
            m && l.S(
              "emsg",
              function(u) {
                var v = e.emsgSchemeIdUris;
                if (u.version === 0) {
                  var w = u.reader.Yc();
                  var z = u.reader.Yc();
                  var y = u.reader.U();
                  var B = u.reader.U();
                  var C = u.reader.U();
                  var H = u.reader.U();
                  var D = d.startTime + B / y;
                } else y = u.reader.U(), D = u.reader.Dd() / y + d.timestampOffset, B = D - d.startTime, C = u.reader.U(), H = u.reader.U(), w = u.reader.Yc(), z = u.reader.Yc();
                u = u.reader.Ub(u.reader.getLength() - u.reader.Pa(), true);
                if (v && v.includes(w) || a.B.dispatchAllEmsgBoxes) {
                  if (w == "urn:mpeg:dash:event:2012") a.O.Ck();
                  else if (v = D + C / y, a.O.Ak({
                    startTime: D,
                    endTime: v,
                    schemeIdUri: w,
                    value: z,
                    timescale: y,
                    presentationTimeDelta: B,
                    eventDuration: C,
                    id: H,
                    messageData: u
                  }), w == "https://aomedia.org/emsg/ID3" || w == "https://developer.apple.com/streaming/emsg-id3") {
                    if (y = Pj(u), y.length) a.O.onMetadata([{ cueTime: D, data: u, frames: y, dts: D, pts: D }], 0, v);
                  }
                }
              }
            );
            var n = d.ba.timescale;
            b = n && !isNaN(n);
            var q = 0, r = false;
            b && l.S("prft", function(u) {
              var v = u.reader, w = u.version;
              v.U();
              u = v.U();
              var z = v.U();
              u = u * 1e3 + z / 4294967296 * 1e3;
              w === 0 ? v = v.U() : (w = v.U(), v = v.U(), v = w * 4294967296 + v);
              u = Rj(u);
              v = (/* @__PURE__ */ new Map()).set(
                "detail",
                { wallClockTime: u, programStartDate: new Date(u - v / n * 1e3) }
              );
              v = new V("prft", v);
              a.O.onEvent(v);
            }).box("moof", qh).box("traf", qh).S("tfdt", function(u) {
              r || (q = Bi(u.reader, u.version).baseMediaDecodeTime / n, r = true, m || u.parser.stop());
            });
            (m || b) && l.parse(c, false, g);
            r && d.timestampOffset == 0 && (h = q);
          } else f.includes("/mp4") || f.includes("/webm") || !lk(l) || (a.$.has(b) || a.$.set(b, new dk()), k2 = a.$.get(b), k2.clearData(), k2.Gf(d.i), k2.parse(l), l = k2.getStartTime(b), l != null && (h = l), k2 = k2.getMetadata());
          return { timestamp: h, metadata: k2 };
        }
        function Mk(a, b, c, d, e, f, g, h, k2, l, m) {
          g = g === void 0 ? false : g;
          h = h === void 0 ? false : h;
          k2 = k2 === void 0 ? false : k2;
          l = l === void 0 ? false : l;
          var n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                n = Cc;
                if (b != n.Na) {
                  M.A(2);
                  break;
                }
                if (a.X != "HLS") {
                  M.A(3);
                  break;
                }
                return F(M, a.ab, 4);
              case 4:
                q = M.h, a.h.u = q;
              case 3:
                return F(M, Ze(a.h, c, d ? d.startTime : null, d ? d.endTime : null, d ? d.P()[0] : null), 5);
              case 5:
                return M.return();
              case 2:
                if (l || !a.m) {
                  M.A(6);
                  break;
                }
                return F(M, Mk(a, n.ka, c, d, e, f, g, h, k2, true), 7);
              case 7:
                return F(M, Mk(
                  a,
                  n.Aa,
                  c,
                  d,
                  e,
                  f,
                  g,
                  h,
                  k2,
                  true
                ), 8);
              case 8:
                return M.return();
              case 6:
                if (!a.l.has(b)) return M.return();
                r = a.l.get(b).timestampOffset;
                u = a.G.get(b);
                a.j.has(b) && (u = a.j.get(b).getOriginalMimeType());
                if (d && (v = Lk(a, b, c, d, e, u, k2), w = v.timestamp, z = v.metadata, w != null && (a.V == null && b == n.Aa && (a.V = w, a.va = d.startTime, a.T != null && (y = 0, a.va == a.oa && (y = a.V - a.T), a.ma.resolve(y))), a.T == null && b == n.ka && (a.T = w, a.oa = d.startTime, a.V != null && (B = 0, a.va == a.oa && (B = a.V - a.T), a.ma.resolve(B))), C = w, H = Je, !a.J && H.includes(a.G.get(b)) && (C = 0), D = d.startTime - C, A = Math.abs(r - D), (A >= 1e-3 || g || h) && (!k2 || D > 0 || !r) && (r = D, a.eb && (Nk(a, b, function() {
                  return Ok(a, b);
                }, null), Nk(a, b, function() {
                  return Pk(a, b, r);
                }, null))), (E = b == n.Aa || !a.l.has(n.Aa)) && a.ab.resolve(r)), z.length)) a.O.onMetadata(z, r, d ? d.endTime : null);
                f && b == n.Aa && (a.h || Dk(a, "application/cea-608", a.J, false), a.K || (J = u.split(";", 1)[0], a.K = new Sc(J)), d ? (I = a.K.xf(c), I.length && ef(a.h, I, r)) : a.K.init(c, h, m));
                if (!a.j.has(b)) {
                  M.A(9);
                  break;
                }
                return F(M, a.j.get(b).transmux(c, e, d, a.i.duration, b), 10);
              case 10:
                K = M.h, ArrayBuffer.isView(K) ? c = K : (L = K, L.init != null && (O = L.init, Nk(a, b, function() {
                  a.C && Fc(a.C, O, r, e);
                  a.l.get(b).appendBuffer(O);
                }, d ? d.P()[0] : null)), c = L.data);
              case 9:
                c = Qk(a, e, c, d, b);
                if (!d || !a.J || b == n.Na) {
                  M.A(11);
                  break;
                }
                if (!g && !h) {
                  M.A(11);
                  break;
                }
                P = d.startTime;
                if (a.X != "HLS" || a.m || b != n.ka || !a.l.has(n.Aa)) {
                  M.A(13);
                  break;
                }
                return F(M, a.ma, 14);
              case 14:
                N = M.h, Math.abs(N) > 0.15 && (P -= N);
              case 13:
                Nk(a, b, function() {
                  return Ok(a, b);
                }, null), Nk(a, b, function() {
                  return Pk(a, b, P);
                }, null);
              case 11:
                return F(M, Nk(
                  a,
                  b,
                  function() {
                    var R = c;
                    a.C && Fc(a.C, R, r, e);
                    a.l.get(b).appendBuffer(R);
                  },
                  d ? d.P()[0] : null
                ), 15);
              case 15:
                G(M);
            }
          });
        }
        function Rk(a, b) {
          var c = Jk(a, "video") || 0;
          cf(a.h, b, c);
        }
        function Sk(a) {
          a.h && cf(a.h, "", 0);
        }
        p.remove = function(a, b, c, d) {
          var e = this, f, g;
          return Q(function(h) {
            return h.g == 1 ? (f = Cc, a == f.Aa && e.K && (e.K.remove(d), g = e.h.g || 0, e.h.remove(g, c, true)), a == f.Na ? F(h, e.h.remove(b, c), 0) : c > b ? F(h, Nk(e, a, function() {
              return Tk(e, a, b, c);
            }, null), 5) : h.A(0)) : e.m ? F(h, Nk(e, f.ka, function() {
              return Tk(e, f.ka, b, c);
            }, null), 0) : h.A(0);
          });
        };
        function Uk(a, b) {
          var c;
          return Q(function(d) {
            return d.g == 1 ? (c = Cc, b == c.Na ? a.h ? F(d, a.h.remove(0, Infinity), 0) : d.return() : b === c.Aa && a.K && a.h ? F(d, a.h.remove(0, Infinity, true), 4) : d.A(4)) : d.g != 6 ? F(d, Nk(a, b, function() {
              return Tk(a, b, 0, a.i.duration);
            }, null), 6) : a.m ? F(d, Nk(a, c.ka, function() {
              return Tk(a, c.ka, 0, a.i.duration);
            }, null), 0) : d.A(0);
          });
        }
        p.flush = function(a) {
          var b = this, c;
          return Q(function(d) {
            return d.g == 1 ? (c = Cc, a == c.Na ? d.return() : F(d, Nk(b, a, function() {
              b.g.currentTime -= 1e-3;
              Fk(b, a);
            }, null), 2)) : b.m ? F(d, Nk(b, c.ka, function() {
              var e = c.ka;
              b.g.currentTime -= 1e-3;
              Fk(b, e);
            }, null), 0) : d.A(0);
          });
        };
        function Vk(a, b, c, d, e, f, g, h, k2) {
          var l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              l = Cc;
              if (b == l.Na) return f || (a.h.u = c), bf(a.h, d, e), q.return();
              m = [];
              return F(q, Wk(a, b, g, h, k2), 2);
            }
            n = q.h;
            n || (m.push(Nk(a, b, function() {
              return Ok(a, b);
            }, null)), a.m && m.push(Nk(a, l.ka, function() {
              return Ok(a, l.ka);
            }, null)));
            f || (m.push(Nk(a, b, function() {
              return Pk(a, b, c);
            }, null)), a.m && m.push(Nk(a, l.ka, function() {
              return Pk(a, l.ka, c);
            }, null)));
            if (d != 0 || e != Infinity) m.push(Nk(a, b, function() {
              return Xk(a, b, d, e);
            }, null)), a.m && m.push(Nk(a, l.ka, function() {
              return Xk(
                a,
                l.ka,
                d,
                e
              );
            }, null));
            return m.length ? F(q, Promise.all(m), 0) : q.A(0);
          });
        }
        function Yk(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (f.g == 1) {
              d = Cc;
              if (b == d.Na) return f.return();
              b == d.Aa && (a.ab = new Cg());
              if (!a.J || (e = Jk(a, b)) && Math.abs(e - c) < 0.15) return f.return();
              Nk(a, b, function() {
                return Ok(a, b);
              }, null);
              a.m && Nk(a, d.ka, function() {
                return Ok(a, d.ka);
              }, null);
              return F(f, Nk(a, b, function() {
                return Pk(a, b, c);
              }, null), 2);
            }
            return a.m ? F(f, Nk(a, d.ka, function() {
              return Pk(a, d.ka, c);
            }, null), 0) : f.A(0);
          });
        }
        p.endOfStream = function(a) {
          var b = this;
          return Q(function(c) {
            return F(c, Zk(b, function() {
              Ak(b) || Bk(b) || (a ? b.i.endOfStream(a) : b.i.endOfStream());
            }), 0);
          });
        };
        p.Ab = function(a) {
          var b = this;
          return Q(function(c) {
            return F(c, Zk(b, function() {
              if (b.B.durationReductionEmitsUpdateEnd && a < b.i.duration) for (var d = t(b.l.keys()), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = { start: function() {
                }, p: new Cg(), uri: null };
                b.o.get(e).unshift(f);
              }
              b.i.duration = a;
              b.xa = a;
            }), 0);
          });
        };
        p.getDuration = function() {
          return this.i.duration;
        };
        function $k(a, b, c) {
          Q(function(d) {
            return a.I.g || a.g.error || a.N || a.H || Ak(a) || Bk(a) ? d.return() : F(d, Zk(a, function() {
              Ak(a) || Bk(a) || a.i.setLiveSeekableRange(b, c);
            }), 0);
          });
        }
        function al(a) {
          Q(function(b) {
            return a.I.g || a.g.error || a.N || a.H || Ak(a) || Bk(a) ? b.return() : F(b, Zk(a, function() {
              Ak(a) || Bk(a) || a.i.clearLiveSeekableRange();
            }), 0);
          });
        }
        function Tk(a, b, c, d) {
          if (d <= c) Fk(a, b);
          else {
            if (a.C) {
              var e = a.C;
              b === "video" && e.g && e.g.flushBuffer(c, d);
            }
            a.l.get(b).remove(c, d);
          }
        }
        function Ok(a, b) {
          var c = a.l.get(b), d = c.appendWindowStart, e = c.appendWindowEnd;
          c.abort();
          c.appendWindowStart = d;
          c.appendWindowEnd = e;
          Fk(a, b);
        }
        function Pk(a, b, c) {
          c < 0 && (c += 1e-3);
          a.l.get(b).timestampOffset = c;
          Fk(a, b);
        }
        function Xk(a, b, c, d) {
          var e = a.l.get(b);
          if (e.appendWindowEnd !== d || e.appendWindowStart !== c) e.appendWindowStart = 0, e.appendWindowEnd = d, e.appendWindowStart = c;
          Fk(a, b);
        }
        function Fk(a, b) {
          if (a.H || a.I.g) {
            var c = a.o.get(b);
            c && c.length && ((c = c[0]) && c.p && c.p.resolve(), a.o.set(b, []));
          } else if (c = a.o.get(b)[0]) c.p.resolve(), bl(a, b);
        }
        function Nk(a, b, c, d) {
          ch(a.I);
          c = { start: c, p: new Cg(), uri: d };
          a.o.get(b).push(c);
          a.o.get(b).length == 1 && cl(a, b);
          return c.p;
        }
        function Zk(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                ch(a.I);
                c = [];
                d = Array.from(a.l.keys());
                e = t(d);
                f = e.next();
                for (g = {}; !f.done; g = { ready: void 0 }, f = e.next()) h = f.value, g.ready = new Cg(), k2 = { start: /* @__PURE__ */ (function(w) {
                  return function() {
                    return w.ready.resolve();
                  };
                })(g), p: g.ready, uri: null }, l = a.o.get(h), l.push(k2), c.push(g.ready), l.length == 1 && k2.start();
                ra(v, 2);
                return F(v, Promise.all(c), 4);
              case 4:
                ta(v, 3);
                break;
              case 2:
                throw m = Aa(v), m;
              case 3:
                return ra(v, 5, 6), F(v, b(), 6);
              case 6:
                Ba(v);
                n = t(d);
                for (q = n.next(); !q.done; q = n.next()) r = q.value, bl(a, r);
                Da(v, 0);
                break;
              case 5:
                throw u = Aa(v), new U(2, 3, 3015, u, a.g.error || "No error in the media element", null);
            }
          });
        }
        function bl(a, b) {
          a.o.get(b).shift();
          cl(a, b);
        }
        function cl(a, b) {
          var c = a.o.get(b)[0];
          if (c) try {
            c.start();
          } catch (d) {
            d.name == "QuotaExceededError" ? c.p.reject(new U(2, 3, 3017, b)) : Gk(a) ? c.p.reject(new U(2, 3, 3015, d, a.g.error || "No error in the media element", c.uri)) : c.p.reject(new U(2, 3, 3024, b)), bl(a, b);
          }
        }
        function dl(a, b) {
          a.aa = b;
          a.h && (a.h.l = b);
        }
        function Qk(a, b, c, d, e) {
          if (Me(a.G.get(e)) != "mp4") return c;
          var f = d === null, g = a.Ta.get(e), h = a.O.Jj(), k2 = false;
          d && d.ba && (k2 = d.ba.encrypted);
          d = d ? d.P()[0] : null;
          var l = rb();
          a.B.correctEc3Enca && f && e === "audio" && (c = hj(c));
          a.B.insertFakeEncryptionInInit && g && l.Ed(h, e) && (f ? c = ij(b, c, d) : !k2 && l.Ii(e) && (c = kj(c)));
          f && l.oe() && (c = nj(c));
          return c;
        }
        function el(a, b, c, d) {
          return Nk(a, b, function() {
            if (b !== Ac) {
              a.G.get(b);
              if (rb().Bb()) {
                a.j.has(b) && (a.j.get(b).destroy(), a.j.delete(b));
                d && a.j.set(b, d);
                var e = c + a.B.addExtraFeaturesToSourceBuffer(c);
                a.l.get(b).changeType(e);
                a.G.set(b, c);
              }
              Fk(a, b);
            }
          }, null);
        }
        function fl(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H;
          return Q(function(D) {
            if (D.g == 1) {
              if (a.H || a.N) return D.return();
              c = Cc;
              a.H = true;
              a.m = false;
              d = a.g.currentTime;
              e = a.g.autoplay;
              a.g.paused || (a.Ua = true);
              a.ob && (a.g.autoplay = false);
              sa(D, 2);
              a.u.Qa();
              f = t(a.j.values());
              for (g = f.next(); !g.done; g = f.next()) h = g.value, h.destroy();
              k2 = t(a.l.values());
              for (l = k2.next(); !l.done; l = k2.next()) {
                m = l.value;
                try {
                  a.i.removeSourceBuffer(m);
                } catch (A) {
                }
              }
              a.j.clear();
              a.l.clear();
              n = a.i.duration;
              a.M = new Cg();
              a.i = nk(a, a.M);
              return F(D, a.M, 4);
            }
            if (D.g != 2) {
              !isNaN(n) && n ? a.i.duration = n : !isNaN(a.xa) && a.xa && (a.i.duration = a.xa);
              q = new Cg();
              r = a.i.sourceBuffers;
              u = b.size;
              v = 0;
              w = function() {
                v++;
                v === u && (q.resolve(), a.u.Ma(r, "addsourcebuffer", w));
              };
              a.u.D(r, "addsourcebuffer", w);
              z = t(b.keys());
              for (y = z.next(); !y.done; y = z.next()) B = y.value, C = b.get(B), Ck(a, B, C, C.codecs);
              (H = b.get(c.ka)) && H.isAudioMuxedInVideo && (a.m = true);
              a.m && !a.o.has(c.ka) && a.o.set(c.ka, []);
              return F(D, q, 2);
            }
            Ba(D);
            a.H = false;
            ch(a.I);
            a.u.za(a.g, "loadedmetadata", function() {
              a.I.g || (a.g.currentTime = d);
            });
            a.u.za(
              a.g,
              "canplaythrough",
              function() {
                a.I.g || (a.g.autoplay = e, a.Ua && (a.Ua = false, a.g.play()));
              }
            );
            return Da(D, 0);
          });
        }
        function gl(a, b) {
          return Zk(a, function() {
            return fl(a, b);
          });
        }
        function hl(a, b, c, d) {
          var e = false, f = yc("audio", (d || "").split(",")), g = yc("video", (d || "").split(",")), h = g;
          b == "audio" && (h = f);
          h || (h = d);
          d = Ie(c, h);
          var k2 = Qe(a.G.get(b)), l = a.B.forceTransmux;
          !xi(d) || !a.J && Je.includes(d) ? l = true : l || c == k2 || (l = !rb().Jf() && Je.includes(c));
          if (l && (a = Ke(c, h), c = Ce(a))) {
            var m = c();
            f && g && (e = true);
            d = m.convertCodecs(b, a);
          }
          b = Ne(Re(d));
          return { hc: m, cl: e, Oh: Qe(d), codec: b, mimeType: d };
        }
        function il(a, b, c, d, e) {
          if (b == Ac) return { type: jl, rf: c, hc: null };
          var f = Ne(Re(a.G.get(b))), g = Qe(a.G.get(b)), h = hl(a, b, c, d), k2 = h.hc, l = h.cl, m = h.Oh, n = h.codec;
          h = h.mimeType;
          var q = true;
          l && a.G.has("audio") && (c = hl(a, "audio", c, d), d = Ne(Re(a.G.get("audio"))), q = Qe(a.G.get("audio")), q = d == c.codec && q == c.Oh, c.hc && c.hc.destroy());
          if (f === n && g === m && q) return { type: jl, rf: h, hc: k2 };
          f = true;
          if (a.m && !e.has("audio") || l && k2 && !a.j.has(b)) f = false;
          b = rb();
          if (f && a.B.codecSwitchingStrategy === "smooth" && b.Bb()) return { type: kl, rf: h, hc: k2 };
          k2 && k2.destroy();
          return { type: ll, rf: h, hc: null };
        }
        function Wk(a, b, c, d, e) {
          var f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) {
              f = Cc;
              g = il(a, b, c, d, e);
              h = g.type;
              k2 = g.hc;
              l = g.rf;
              if (m = e.get(f.ka)) a.m = m.isAudioMuxedInVideo;
              if (h == jl) return a.j.has(b) && !k2 ? (a.j.get(b).destroy(), a.j.delete(b)) : !a.j.has(b) && k2 ? a.j.set(b, k2) : k2 && (a.j.has(b) && a.j.get(b).transmux !== k2.transmux ? (a.j.get(b).destroy(), a.j.set(b, k2)) : k2.destroy()), n.return(false);
              if (h == kl) return F(n, el(a, b, l, k2), 3);
              if (h != ll) return n.A(3);
              k2 && k2.destroy();
              return F(n, gl(a, e), 3);
            }
            return n.return(true);
          });
        }
        function ml(a, b, c, d, e) {
          a = il(a, b, c, d, e);
          a.hc && a.hc.destroy();
          return a.type == ll;
        }
        var pk = window2.URL.createObjectURL, Ek = "sequence", jl = "none", ll = "reset", kl = "changeType";
        function nl(a, b, c) {
          this.i = a;
          this.F = b;
          this.u = this.l = Infinity;
          this.h = 1;
          this.g = this.j = null;
          this.B = 0;
          this.C = true;
          this.J = false;
          this.I = 0;
          this.G = c === void 0 ? true : c;
          this.H = 0;
          this.o = false;
          this.m = a;
        }
        p = nl.prototype;
        p.getDuration = function() {
          return this.l;
        };
        p.Mj = function() {
          return this.h;
        };
        p.Ri = function(a) {
          this.i = a;
        };
        p.Ab = function(a) {
          this.l = a;
        };
        p.Sj = function() {
          return this.i;
        };
        p.Qi = function(a) {
          this.B = a;
        };
        p.cd = function(a) {
          a && !this.C && (this.J = true);
          this.C = a;
        };
        p.Hf = function(a) {
          this.u = a;
        };
        p.Ze = function() {
          return this.u;
        };
        p.oh = function(a) {
          this.F = a;
        };
        p.Dj = function() {
          return this.F;
        };
        p.Ci = function(a, b) {
          if (a.length != 0) {
            var c = (Date.now() + this.B) / 1e3;
            a = a.filter(function(e) {
              return e.start + b < c;
            });
            if (a.length != 0) {
              var d = a[a.length - 1].end + b;
              this.tf(a[0].start + b);
              this.h = a.reduce(function(e, f) {
                return Math.max(e, f.end - f.start);
              }, this.h);
              this.g = Math.max(this.g, d);
              this.i != null && this.G && !this.o && (this.i = c - this.g - this.h);
            }
          }
        };
        p.ie = function(a) {
          if (a.length != 0) {
            var b = a[0].startTime, c = a[0].endTime, d = (Date.now() + this.B) / 1e3;
            a = t(a);
            for (var e = a.next(); !e.done; e = a.next()) e = e.value, d < e.startTime || (b = Math.min(b, e.startTime), c = Math.max(c, e.endTime), this.h = Math.max(this.h, e.endTime - e.startTime));
            this.tf(b);
            this.g = Math.max(this.g, c);
            this.i != null && this.G && !this.o && (this.i = d - this.g - this.h);
          }
        };
        p.Bi = function(a, b) {
          this.tf(a);
          b == Infinity || this.W() || (this.g = Math.max(this.g, b));
        };
        p.Nj = function() {
          return this.g;
        };
        p.lf = function() {
          this.o = true;
        };
        p.pk = function() {
          return this.o;
        };
        p.ph = function(a) {
          this.m = a;
        };
        p.Ij = function() {
          return this.m;
        };
        p.tf = function(a) {
          this.j == null ? this.j = a : this.J || (this.j = Math.min(this.j, a));
        };
        p.Sg = function(a) {
          this.h = Math.max(this.h, a);
        };
        p.offset = function(a) {
          this.j != null && (this.j += a);
          this.g != null && (this.g += a);
        };
        p.W = function() {
          return this.l == Infinity && !this.C;
        };
        p.Vc = function() {
          return this.l != Infinity && !this.C;
        };
        p.Ib = function() {
          return Math.max(this.I, this.Ic() - this.u);
        };
        p.Ti = function(a) {
          this.I = a;
        };
        p.Ic = function() {
          return this.W() || this.Vc() ? Math.min(Math.max(0, (Date.now() + this.B) / 1e3 - this.h - this.i) + this.H, this.l) : this.g ? Math.min(this.g, this.l) : this.l;
        };
        p.Xd = function(a) {
          var b = Math.max(this.j, this.I);
          return this.u == Infinity ? Math.ceil(b * 1e3) / 1e3 : Math.max(b, Math.min(this.Ic() - this.u + a, this.Hb()));
        };
        p.Zb = function() {
          return this.Xd(0);
        };
        p.Hb = function() {
          return Math.max(0, this.Ic() - (this.W() || this.Vc() ? this.F : 0));
        };
        p.fj = function() {
          return this.i == null || this.g != null && this.G ? false : true;
        };
        p.Pi = function(a) {
          this.H = a;
        };
        p.yj = function() {
          return this.H;
        };
        S("shaka.media.PresentationTimeline", nl);
        nl.prototype.getAvailabilityTimeOffset = nl.prototype.yj;
        nl.prototype.setAvailabilityTimeOffset = nl.prototype.Pi;
        nl.prototype.usingPresentationStartTime = nl.prototype.fj;
        nl.prototype.getSeekRangeEnd = nl.prototype.Hb;
        nl.prototype.getSeekRangeStart = nl.prototype.Zb;
        nl.prototype.getSafeSeekRangeStart = nl.prototype.Xd;
        nl.prototype.getSegmentAvailabilityEnd = nl.prototype.Ic;
        nl.prototype.setUserSeekStart = nl.prototype.Ti;
        nl.prototype.getSegmentAvailabilityStart = nl.prototype.Ib;
        nl.prototype.isInProgress = nl.prototype.Vc;
        nl.prototype.isLive = nl.prototype.W;
        nl.prototype.offset = nl.prototype.offset;
        nl.prototype.notifyMaxSegmentDuration = nl.prototype.Sg;
        nl.prototype.notifyMinSegmentStartTime = nl.prototype.tf;
        nl.prototype.getInitialProgramDateTime = nl.prototype.Ij;
        nl.prototype.setInitialProgramDateTime = nl.prototype.ph;
        nl.prototype.isStartTimeLocked = nl.prototype.pk;
        nl.prototype.lockStartTime = nl.prototype.lf;
        nl.prototype.getMaxSegmentEndTime = nl.prototype.Nj;
        nl.prototype.notifyPeriodDuration = nl.prototype.Bi;
        nl.prototype.notifySegments = nl.prototype.ie;
        nl.prototype.notifyTimeRange = nl.prototype.Ci;
        nl.prototype.getDelay = nl.prototype.Dj;
        nl.prototype.setDelay = nl.prototype.oh;
        nl.prototype.getSegmentAvailabilityDuration = nl.prototype.Ze;
        nl.prototype.setSegmentAvailabilityDuration = nl.prototype.Hf;
        nl.prototype.setStatic = nl.prototype.cd;
        nl.prototype.setClockOffset = nl.prototype.Qi;
        nl.prototype.getPresentationStartTime = nl.prototype.Sj;
        nl.prototype.setDuration = nl.prototype.Ab;
        nl.prototype.setPresentationStartTime = nl.prototype.Ri;
        nl.prototype.getMaxSegmentDuration = nl.prototype.Mj;
        nl.prototype.getDuration = nl.prototype.getDuration;
        function ol(a, b, c, d) {
          var e = this;
          this.u = d;
          this.g = a;
          this.F = b;
          this.h = c;
          this.j = new kb();
          this.m = false;
          this.l = 0;
          this.C = false;
          this.H = this.G = 0;
          this.o = pl(this);
          this.B = false;
          this.j.D(a, "waiting", function() {
            return ql(e);
          });
          this.i = new gf(function() {
            ql(e);
          }).Ea(this.h.gapJumpTimerTime);
        }
        ol.prototype.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.i != null && (this.i.stop(), this.i = null);
          this.o && (this.o.release(), this.o = null);
          this.g = this.F = this.u = null;
        };
        ol.prototype.wf = function() {
          this.B = true;
          this.i && this.i.Ea(this.h.gapJumpTimerTime);
          ql(this);
        };
        function ql(a) {
          if (a.g.readyState != 0) {
            if (a.g.seeking) {
              if (!a.m) return;
            } else a.m = false;
            if (!a.g.paused || a.g.currentTime == a.l && (a.g.autoplay || a.g.currentTime != a.l)) {
              var b;
              if (!(b = !a.o)) {
                b = a.o;
                var c = b.h, d = rl(c), e = c.g.currentTime, f = Date.now() / 1e3;
                if (b.g != e || b.m != d) b.l = f, b.g = e, b.m = d, b.i = false;
                e = f - b.l;
                if (d = e >= b.o && d && !b.i) b.j && b.j(b.g, e), b.i = true, b.g = c.g.currentTime;
                b = !d;
              }
              b && (b = a.g.currentTime, c = a.g.buffered, d = Bj(c, b, a.h.gapDetectionThreshold), d == null || d == 0 && !a.B || (e = c.start(d), (f = a.h.gapPadding) && (e = Math.ceil((e + f) * 100) / 100), e >= a.F.Hb() || e - b < 1e-3 || (d != 0 && c.end(d - 1), sl(a, e), b == a.l && (a.l = e), a.G++, a.u(new V("gapjumped")))));
            }
          }
        }
        function sl(a, b) {
          a.C = true;
          a.j.za(a.g, "seeked", function() {
            a.C = false;
          });
          a.g.currentTime = b;
        }
        function pl(a) {
          if (!a.h.stallEnabled) return null;
          var b = a.h.stallThreshold, c = a.h.stallSkip;
          return new tl(new ul(a.g), b, function() {
            var d;
            return Q(function(e) {
              if (e.g == 1) return d = Aj(a.g.buffered), d.length ? c ? (a.g.currentTime += c, e.A(2)) : F(e, a.g.play(), 3) : e.return();
              if (e.g != 2) {
                if (!a.g) return e.return();
                a.g.pause();
                a.g.play();
              }
              a.H++;
              a.u(new V("stalldetected"));
              G(e);
            });
          });
        }
        function tl(a, b, c) {
          this.h = a;
          this.m = rl(a);
          this.g = a.g.currentTime;
          this.l = Date.now() / 1e3;
          this.i = false;
          this.o = b;
          this.j = c;
        }
        tl.prototype.release = function() {
          this.h && this.h.release();
          this.j = this.h = null;
        };
        function ul(a) {
          var b = this;
          this.g = a;
          this.h = new kb();
          this.i = false;
          this.h.D(this.g, "audiofocuspaused", function() {
            b.i = true;
          });
          this.h.D(this.g, "audiofocusgranted", function() {
            b.i = false;
          });
          this.h.D(this.g, "audiofocuslost", function() {
            b.i = true;
          });
        }
        function rl(a) {
          if (a.g.paused || a.g.playbackRate == 0 || a.i || a.g.buffered.length == 0) var b = false;
          else a: {
            b = a.g.currentTime;
            a = t(Aj(a.g.buffered));
            for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, !(b < c.start - 0.1 || b > c.end - 0.5)) {
              b = true;
              break a;
            }
            b = false;
          }
          return b;
        }
        ul.prototype.release = function() {
          this.h && this.h.release();
          this.h = null;
        };
        function vl(a, b, c, d) {
          b == HTMLMediaElement.HAVE_NOTHING || a.readyState >= b ? d() : (b = wl.value().get(b), c.za(a, b, d));
        }
        var wl = new qb(function() {
          return /* @__PURE__ */ new Map([[HTMLMediaElement.HAVE_METADATA, "loadedmetadata"], [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"], [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"], [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"]]);
        });
        function xl(a, b, c, d) {
          var e = this;
          this.g = a;
          this.m = b;
          this.u = c;
          this.l = null;
          this.j = function() {
            e.l == null && (e.l = d());
            return e.l;
          };
          this.o = false;
          this.h = new kb();
          this.i = new yl(a);
          vl(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function() {
            zl(e, e.j());
          });
        }
        xl.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.i != null && (this.i.release(), this.i = null);
          this.m = function() {
          };
          this.g = null;
        };
        function Al(a) {
          return a.o ? a.g.currentTime : a.j();
        }
        function Bl(a, b) {
          a.g.readyState > 0 ? Cl(a.i, b) : vl(a.g, HTMLMediaElement.HAVE_METADATA, a.h, function() {
            zl(a, a.j());
          });
        }
        function zl(a, b) {
          Math.abs(a.g.currentTime - b) < 1e-3 ? Dl(a) : (a.h.za(a.g, "seeking", function() {
            Dl(a);
          }), Cl(a.i, a.g.currentTime && a.g.currentTime != 0 ? a.g.currentTime : b));
        }
        function Dl(a) {
          a.o = true;
          a.h.D(a.g, "seeking", function() {
            return a.m();
          });
          a.u(a.g.currentTime);
        }
        function yl(a) {
          var b = this;
          this.g = a;
          this.m = 10;
          this.j = this.l = this.i = 0;
          this.h = new gf(function() {
            b.i <= 0 ? b.h.stop() : b.g.currentTime != b.l || b.g.currentTime === b.j ? b.h.stop() : (b.g.currentTime = b.j, b.i--);
          });
        }
        yl.prototype.release = function() {
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        function Cl(a, b) {
          a.l = a.g.currentTime;
          a.j = b;
          a.i = a.m;
          a.g.currentTime = b;
          a.h.Ea(0.1);
        }
        ;
        function El(a) {
          this.g = a;
          this.i = false;
          this.h = null;
          this.j = new kb();
        }
        p = El.prototype;
        p.ready = function() {
          function a() {
            if (b.h == null || b.h == 0 && b.g.duration != Infinity) b.i = true;
            else {
              var c = b.g.currentTime, d = null;
              if (typeof b.h === "number") d = b.h;
              else if (b.h instanceof Date) {
                var e = Fl(b);
                e !== null && (d = b.h.getTime() / 1e3 - e, d = Gl(b, d));
              }
              d == null ? b.i = true : (d < 0 && (d = Math.max(0, c + d)), c != d ? (b.j.za(b.g, "seeking", function() {
                b.i = true;
              }), b.g.currentTime = d) : b.i = true);
            }
          }
          var b = this;
          vl(this.g, HTMLMediaElement.HAVE_FUTURE_DATA, this.j, function() {
            a();
          });
        };
        p.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.g = null;
        };
        p.Wf = function(a) {
          this.h = this.i ? this.h : a;
        };
        p.He = function() {
          var a = this.i ? this.g.currentTime : this.h;
          a instanceof Date && (a = a.getTime() / 1e3 - (Fl(this) || 0), a = Gl(this, a));
          return a || 0;
        };
        p.Jh = function() {
          return 0;
        };
        p.Hh = function() {
          return 0;
        };
        p.Ih = function() {
          return false;
        };
        p.Ai = function() {
        };
        p.li = function() {
          var a = xj(this.g.buffered);
          return a != null && a >= this.g.duration - 1;
        };
        function Fl(a) {
          return a.g.getStartDate && (a = a.g.getStartDate().getTime(), !isNaN(a)) ? a / 1e3 : null;
        }
        function Gl(a, b) {
          a = a.g.seekable;
          a.length > 0 && (b = Math.max(a.start(0), b), b = Math.min(a.end(a.length - 1), b));
          return b;
        }
        function Hl(a, b, c, d, e, f) {
          var g = this;
          this.h = a;
          this.g = b.presentationTimeline;
          this.l = c;
          this.u = e;
          this.o = null;
          this.i = new ol(a, b.presentationTimeline, c, f);
          this.j = new xl(a, function() {
            a: {
              var h = g.i;
              h.m = true;
              h.B = false;
              h.i && h.i.Ea(h.h.gapJumpTimerTime);
              ql(h);
              var k2 = Al(g.j);
              h = Il(g, k2);
              if (!zi() && Math.abs(h - k2) > 1e-3) {
                k2 = false;
                var l = rb().Ni();
                if (l) {
                  var m = Date.now() / 1e3;
                  if (!g.o || g.o < m - l) g.o = m, k2 = true;
                } else k2 = true;
                if (k2) {
                  Bl(g.j, h);
                  h = void 0;
                  break a;
                }
              }
              g.u();
              h = void 0;
            }
            return h;
          }, function(h) {
            var k2 = g.i;
            k2.g.seeking && !k2.m && (k2.m = true, k2.l = h);
            k2.i && k2.i.Ea(k2.h.gapJumpTimerTime);
            ql(k2);
          }, function() {
            return Jl(g, d);
          });
          this.m = new gf(function() {
            if (g.h.readyState != 0 && !g.h.paused) {
              var h = Al(g.j), k2 = g.g.Zb(), l = g.g.Hb();
              l - k2 < 3 && (k2 = l - 3);
              h < k2 && (h = Il(g, h), g.h.currentTime = h);
            }
          });
        }
        p = Hl.prototype;
        p.ready = function() {
          this.m.Ea(0.25);
        };
        p.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.i && (this.i.release(), this.i = null);
          this.m && (this.m.stop(), this.m = null);
          this.h = this.j = this.g = this.l = null;
          this.u = function() {
          };
        };
        p.Wf = function(a) {
          Bl(this.j, Jl(this, a));
        };
        p.He = function() {
          var a = Al(this.j);
          return this.h.readyState > 0 && !this.h.paused ? Kl(this, a) : a;
        };
        p.Jh = function() {
          return this.i.H;
        };
        p.Hh = function() {
          return this.i.G;
        };
        p.Ih = function() {
          return this.i.C;
        };
        function Jl(a, b) {
          b == null ? b = a.g.getDuration() < Infinity ? a.g.Zb() : a.g.Hb() : b instanceof Date ? b = b.getTime() / 1e3 - (a.g.m || a.g.i) : b < 0 && (b = a.g.Hb() + b);
          return Ll(a, Kl(a, b));
        }
        p.Ai = function() {
          this.i.wf();
        };
        p.li = function() {
          if (this.g.W()) {
            var a = this.g.Ic(), b = xj(this.h.buffered);
            if (b != null && b >= a) return true;
          }
          return false;
        };
        function Ll(a, b) {
          var c = a.g.getDuration();
          return b >= c ? c - a.l.durationBackoff : b;
        }
        function Il(a, b) {
          var c = a.l.rebufferingGoal, d = a.l.safeSeekOffset, e = a.g.Zb(), f = a.g.Hb(), g = a.g.getDuration();
          f - e < 3 && (e = f - 3);
          var h = a.g.Xd(c), k2 = a.g.Xd(d);
          c = a.g.Xd(c + d);
          return b >= g ? Ll(a, b) : b > f ? f - a.l.safeSeekEndOffset : b < e ? a.g.W() && a.l.returnToEndOfLiveWindowWhenOutside ? f - a.l.safeSeekEndOffset : yj(a.h.buffered, k2) ? k2 : c : b >= h || yj(a.h.buffered, b) ? b : c;
        }
        function Kl(a, b) {
          var c = a.g.Zb();
          if (b < c) return c;
          a = a.g.Hb();
          return b > a ? a : b;
        }
        ;
        function Ml(a) {
          this.g = a;
          this.m = null;
          this.i = 0;
          this.o = false;
        }
        p = Ml.prototype;
        p.getNumReferences = function() {
          return this.g.length;
        };
        p.getNumEvicted = function() {
          return this.i;
        };
        p.release = function() {
          this.o || (this.g = [], this.m && this.m.stop(), this.m = null);
        };
        p.xk = function() {
          this.o = true;
        };
        p.Gb = function(a) {
          for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) a(c.value);
        };
        function Xf(a) {
          return a.g[0] || null;
        }
        p.find = function(a) {
          for (var b = this.g.length - 1, c = b; c >= 0; --c) {
            var d = this.g[c], e = c < b ? this.g[c + 1].startTime : d.endTime;
            if (a >= d.startTime && a < e) return c + this.i;
          }
          return this.g.length && a < this.g[0].startTime ? this.i : null;
        };
        p.get = function(a) {
          if (this.g.length == 0) return null;
          a -= this.i;
          return a < 0 || a >= this.g.length ? null : this.g[a];
        };
        p.offset = function(a) {
          if (!this.o) for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c.value.offset(a);
        };
        p.nf = function(a) {
          if (!this.o && a.length) {
            var b = Math.round(a[0].startTime * 1e3) / 1e3;
            this.g = this.g.filter(function(c) {
              return Math.round(c.startTime * 1e3) / 1e3 < b;
            });
            this.g.push.apply(this.g, x(a));
          }
        };
        p.fe = function(a, b) {
          var c = this;
          a = a.filter(function(d) {
            return d.endTime > b && (c.g.length == 0 || d.endTime > c.g[0].startTime);
          });
          this.nf(a);
          this.Ya(b);
        };
        p.Ya = function(a) {
          if (!this.o) {
            var b = this.g.length;
            this.g = this.g.filter(function(c) {
              return c.endTime > a;
            });
            this.i += b - this.g.length;
          }
        };
        p.pd = function(a, b, c) {
          c = c === void 0 ? false : c;
          if (!this.o) {
            for (; this.g.length; ) if (this.g[this.g.length - 1].startTime >= b) this.g.pop();
            else break;
            for (; this.g.length; ) if (this.g[0].endTime <= a) this.g.shift(), c || this.i++;
            else break;
            this.g.length != 0 && (a = this.g[this.g.length - 1], b = new qj(a.startTime, b, a.C, a.startByte, a.endByte, a.ba, a.timestampOffset, a.appendWindowStart, a.appendWindowEnd, a.g, a.tilesLayout, a.B, a.h, a.status, a.aesKey), b.mimeType = a.mimeType, b.codecs = a.codecs, b.i = a.i, this.g[this.g.length - 1] = b);
          }
        };
        p.Nf = function(a, b) {
          var c = this;
          this.o || (this.m && this.m.stop(), this.m = new gf(function() {
            var d = b();
            d ? c.g.push.apply(c.g, x(d)) : (c.m.stop(), c.m = null);
          }), this.m.Ea(a));
        };
        Ml.prototype[Symbol.iterator] = function() {
          return this.Xb(0);
        };
        Ml.prototype.Xb = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? false : c;
          var d = this.find(a);
          if (d == null) return null;
          var e = this.get(d);
          c ? d++ : d--;
          var f = -1;
          if (e && e.g.length > 0) for (var g = e.g.length - 1; g >= 0; --g) {
            var h = e.g[g];
            if (a >= h.startTime && a < h.endTime) {
              if (!b) {
                for (; g && !h.l; ) g--, h = e.g[g];
                if (!h.l) return Za("No independent partial segment found!"), null;
              }
              c ? d-- : d++;
              f = g - 1;
              break;
            }
          }
          return new Nl(this, d, f, c);
        };
        Ml.prototype.Te = function() {
          return -1;
        };
        function Ol(a, b, c) {
          a = new qj(a, a + b, function() {
            return c;
          }, 0, null, null, a, a, a + b);
          return new Ml([a]);
        }
        S("shaka.media.SegmentIndex", Ml);
        Ml.forSingleSegment = Ol;
        Ml.prototype.getIteratorForTime = Ml.prototype.Xb;
        Ml.prototype.updateEvery = Ml.prototype.Nf;
        Ml.prototype.fit = Ml.prototype.pd;
        Ml.prototype.evict = Ml.prototype.Ya;
        Ml.prototype.mergeAndEvict = Ml.prototype.fe;
        Ml.prototype.offset = Ml.prototype.offset;
        Ml.prototype.get = Ml.prototype.get;
        Ml.prototype.find = Ml.prototype.find;
        Ml.prototype.markImmutable = Ml.prototype.xk;
        Ml.prototype.release = Ml.prototype.release;
        Ml.prototype.getNumEvicted = Ml.prototype.getNumEvicted;
        Ml.prototype.getNumReferences = Ml.prototype.getNumReferences;
        function Nl(a, b, c, d) {
          this.i = a;
          this.h = b;
          this.g = c;
          this.reverse = d;
        }
        p = Nl.prototype;
        p.Id = function(a) {
          this.reverse = a;
        };
        p.tj = function() {
          return this.h;
        };
        p.current = function() {
          var a = this.i.get(this.h);
          a && a.g.length > 0 && a.m && this.g >= a.g.length && (this.h++, this.g = 0, a = this.i.get(this.h));
          return a && a.g.length > 0 ? a.g[this.g] : a;
        };
        p.next = function() {
          var a = this.i.get(this.h);
          this.reverse ? a && a.g.length > 0 ? (this.g--, this.g < 0 && (this.h--, this.g = (a = this.i.get(this.h)) && a.g.length > 0 ? a.g.length - 1 : 0)) : (this.h--, this.g = 0) : a && a.g.length > 0 ? (this.g++, a.m && this.g == a.g.length && (this.h++, this.g = 0)) : (this.h++, this.g = 0);
          a = this.current();
          return { value: a, done: !a };
        };
        p.fh = function() {
          var a = this.current();
          if (a && a.Xc && !a.l && (a = this.i.get(this.h)) && a.g.length > 0) for (var b = a.g[this.g]; b.l && !(this.g <= 0); ) this.g--, b = a.g[this.g];
        };
        S("shaka.media.SegmentIterator", Nl);
        Nl.prototype.resetToLastIndependent = Nl.prototype.fh;
        Nl.prototype.next = Nl.prototype.next;
        Nl.prototype.current = Nl.prototype.current;
        Nl.prototype.currentPosition = Nl.prototype.tj;
        Nl.prototype.setReverse = Nl.prototype.Id;
        function Pl() {
          Ml.call(this, []);
          this.h = [];
        }
        la(Pl, Ml);
        p = Pl.prototype;
        p.clone = function() {
          var a = new Pl();
          a.h = this.h.slice();
          a.i = this.i;
          return a;
        };
        p.release = function() {
          this.h = [];
        };
        p.Gb = function(a) {
          for (var b = t(this.h), c = b.next(); !c.done; c = b.next()) c.value.Gb(a);
        };
        function Ql(a, b) {
          a = t(a.h);
          for (var c = a.next(); !c.done; c = a.next()) b(c.value);
        }
        p.find = function(a) {
          for (var b = this.i, c = t(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.find(a);
            if (e != null) return e + b;
            b += d.getNumEvicted() + d.getNumReferences();
          }
          return null;
        };
        function Rl(a, b) {
          a = t(a.h);
          for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.find(b) != null) return c.Te();
          return -1;
        }
        p.get = function(a) {
          for (var b = this.i, c = t(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.get(a - b);
            if (e) return e;
            e = d.getNumReferences();
            b += d.getNumEvicted() + e;
          }
          return null;
        };
        p.offset = function() {
        };
        p.nf = function() {
        };
        p.Ya = function(a) {
          if (this.h.length) {
            var b = this.h[0];
            b.Ya(a);
            b.getNumReferences() == 0 && (this.h.shift(), this.i += b.getNumEvicted(), b.release(), this.Ya(a));
          }
        };
        p.fe = function() {
        };
        p.pd = function() {
        };
        p.Nf = function() {
        };
        S("shaka.media.MetaSegmentIndex", Pl);
        Pl.prototype.updateEvery = Pl.prototype.Nf;
        Pl.prototype.fit = Pl.prototype.pd;
        Pl.prototype.mergeAndEvict = Pl.prototype.fe;
        Pl.prototype.evict = Pl.prototype.Ya;
        Pl.prototype.merge = Pl.prototype.nf;
        Pl.prototype.offset = Pl.prototype.offset;
        Pl.prototype.get = Pl.prototype.get;
        Pl.prototype.find = Pl.prototype.find;
        Pl.prototype.forEachTopLevelReference = Pl.prototype.Gb;
        Pl.prototype.release = Pl.prototype.release;
        function Sl(a) {
          var b = this;
          this.g = a;
          this.j = false;
          this.i = this.g.Ye();
          this.h = new gf(function() {
            b.g.xi(b.i * 0.25);
          });
        }
        Sl.prototype.release = function() {
          this.set(this.Tc());
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        Sl.prototype.set = function(a) {
          this.i = a;
          Tl(this);
        };
        Sl.prototype.Tc = function() {
          return this.g.Tc();
        };
        function Tl(a) {
          a.h.stop();
          var b = a.j ? 0 : a.i;
          if (b >= 0) try {
            a.g.Ye() != b && a.g.qh(b);
            return;
          } catch (c) {
          }
          a.h.Ea(0.25);
          a.g.Ye() != 0 && a.g.qh(0);
        }
        ;
        function Ul(a) {
          var b = this;
          this.j = a;
          this.h = new kb();
          this.g = /* @__PURE__ */ new Set();
          this.i = new gf(function() {
            Vl(b, false);
          }).Kb();
          a.paused || this.i.Ea(0.25);
          this.h.D(a, "playing", function() {
            b.i.Kb().Ea(0.25);
          });
          this.h.D(a, "pause", function() {
            b.i.stop();
          });
        }
        Ul.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.i.stop();
          for (var a = t(this.g), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.g.clear();
        };
        function Vl(a, b) {
          var c = a.j.currentTime;
          a = t(a.g);
          for (var d = a.next(); !d.done; d = a.next()) d.value.j(c, b);
        }
        ;
        function Wl(a) {
          Mg.call(this);
          this.g = /* @__PURE__ */ new Map();
          this.h = a;
        }
        la(Wl, Mg);
        Wl.prototype.release = function() {
          this.g.clear();
          Mg.prototype.release.call(this);
        };
        function Xl(a, b) {
          var c = a.g.get(b);
          c || (c = { me: [], lg: null, contentType: b }, a.g.set(b, c));
          return c;
        }
        function Yl(a, b, c) {
          var d = Xl(a, b.contentType);
          Zl(a, d);
          a = { xd: b, position: c };
          d = d.me;
          b = d.findIndex(function(e) {
            return e.position >= c;
          });
          b >= 0 ? d.splice(b, d[b].position == c ? 1 : 0, a) : d.push(a);
        }
        Wl.prototype.j = function(a) {
          for (var b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = c.lg;
            a: {
              var e = c.me;
              for (var f = e.length - 1; f >= 0; f--) {
                var g = e[f];
                if (g.position <= a) {
                  e = g.xd;
                  break a;
                }
              }
              e = null;
            }
            f = e && !(d === e || d && e && d.bandwidth == e.bandwidth && d.audioSamplingRate == e.audioSamplingRate && d.codecs == e.codecs && d.contentType == e.contentType && d.frameRate == e.frameRate && d.height == e.height && d.mimeType == e.mimeType && d.channelsCount == e.channelsCount && d.pixelAspectRatio == e.pixelAspectRatio && d.width == e.width);
            g = e && d && e.label && d.label && d.label !== e.label;
            var h = e && d && e.language && d.language && d.language !== e.language;
            d = e && d && e.roles && d.roles && !ib(d.roles, e.roles);
            (g || h || d) && $l(this, a, e.contentType) && (c.lg = e, d = new V("audiotrackchange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(d));
            f && $l(this, a, e.contentType) && (c.lg = e, JSON.stringify(e), c = new V("qualitychange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(c));
          }
        };
        function $l(a, b, c) {
          return (a = a.h()[c]) && a.length > 0 && (c = a[a.length - 1].end, b >= a[0].start && b < c) ? true : false;
        }
        function Zl(a, b) {
          if ((a = a.h()[b.contentType]) && a.length > 0) {
            var c = a[0].start, d = a[a.length - 1].end, e = b.me;
            b.me = e.filter(function(f, g) {
              return f.position <= c && g + 1 < e.length && e[g + 1].position <= c || f.position >= d ? false : true;
            });
          } else b.me = [];
        }
        function am(a) {
          var b = { bandwidth: a.bandwidth || 0, audioSamplingRate: null, codecs: a.codecs, contentType: a.type, frameRate: null, height: null, mimeType: a.mimeType, channelsCount: null, pixelAspectRatio: null, width: null, label: null, roles: a.roles, language: null };
          a.type == "video" && (b.frameRate = a.frameRate || null, b.height = a.height || null, b.pixelAspectRatio = a.pixelAspectRatio || null, b.width = a.width || null);
          a.type == "audio" && (b.audioSamplingRate = a.audioSamplingRate, b.channelsCount = a.channelsCount, b.label = a.label || null, b.language = a.language);
          return b;
        }
        ;
        function bm(a) {
          Mg.call(this);
          this.h = /* @__PURE__ */ new Map();
          this.i = a;
          this.g = null;
        }
        la(bm, Mg);
        bm.prototype.release = function() {
          this.h.clear();
          this.g && (this.g.stop(), this.g = null);
          Mg.prototype.release.call(this);
        };
        function cm(a, b) {
          var c = b.schemeIdUri + "_" + b.id + "_" + (b.startTime.toFixed(1) + "_" + b.endTime.toFixed(1));
          a.h.has(c) || (a.h.set(c, b), b = new V("regionadd", /* @__PURE__ */ new Map([["region", b]])), a.dispatchEvent(b), dm(a));
        }
        function dm(a) {
          a.g || (a.g = new gf(function() {
            for (var b = a.i(), c = t(a.h), d = c.next(); !d.done; d = c.next()) {
              var e = t(d.value);
              d = e.next().value;
              e = e.next().value;
              e.endTime < b.start && (a.h.delete(d), d = new V("regionremove", /* @__PURE__ */ new Map([["region", e]])), a.dispatchEvent(d));
            }
            !a.h.size && a.g && (a.g.stop(), a.g = null);
          }).Ea(2));
        }
        ;
        function em(a, b, c, d, e) {
          function f(g, h) {
            return h.fastSwitching && g.Xc && g.ee ? false : true;
          }
          this.m = a;
          this.i = b;
          this.l = c;
          this.g = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.h = null;
          this.o = d;
          this.u = e || f;
        }
        function fm(a, b) {
          a.l = b;
          a = t(a.g.values());
          for (var c = a.next(); !c.done; c = a.next()) c.value.g = b;
        }
        function gm(a, b, c) {
          c = c === void 0 ? false : c;
          if (!a.i.segmentIndex) return Promise.resolve();
          a.h || (a.h = a.i.segmentIndex.Xb(b, true, a.o));
          if (!a.h) return Promise.resolve();
          c && a.h.next();
          for (b = []; a.g.size < a.m; ) {
            c = a.h.next().value;
            if (!c) break;
            var d = true;
            c.isPreload() && c.endByte != null && (d = false);
            c.Kc() == 2 && (d = false);
            c.$b(false) && (d = false);
            d && c.ba && b.push(hm(a, c.ba));
            d && !a.g.has(c) && (d = new im(a.l), b.push(jm(d, c, a.i)), a.g.set(c, d));
            if (!a.u(c, a.i)) break;
          }
          km(a);
          return Promise.all(b);
        }
        function hm(a, b) {
          if (!a.i.segmentIndex || b.$b() || Array.from(a.j.keys()).some(function(e) {
            return pj(e, b);
          })) return Promise.resolve();
          var c = new im(a.l), d = jm(c, b, a.i);
          a.j.set(b, c);
          return d;
        }
        function lm(a, b) {
          b = t(b.keys());
          for (var c = b.next(); !c.done; c = b.next()) (c = c.value) && mm(a, c);
        }
        function nm(a) {
          lm(a, a.g);
          lm(a, a.j);
          a.h = null;
        }
        em.prototype.Ya = function(a, b) {
          b = b === void 0 ? false : b;
          for (var c = t(this.g.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, a > d.endTime && mm(this, d);
          b && km(this);
        };
        em.prototype.Id = function(a) {
          this.o = a;
          this.h && this.h.Id(a);
        };
        function km(a) {
          if (a.g.size) for (var b = Array.from(a.g.keys()), c = t(a.j.keys()), d = c.next(), e = {}; !d.done; e = { Mg: void 0 }, d = c.next()) e.Mg = d.value, b.some(/* @__PURE__ */ (function(f) {
            return function(g) {
              return pj(g.ba, f.Mg);
            };
          })(e)) || mm(a, e.Mg);
        }
        function om(a, b) {
          a.m = b;
          for (var c = Array.from(a.g.keys()); c.length > b; ) {
            var d = c.pop();
            d && mm(a, d);
          }
          km(a);
        }
        function pm(a, b) {
          b && b !== a.i && (nm(a), a.i = b);
        }
        function mm(a, b) {
          var c = a.g;
          b instanceof oj && (c = a.j);
          a = c.get(b);
          c.delete(b);
          a && a.abort();
        }
        function im(a) {
          this.g = a;
          this.je = this.xh = null;
        }
        function jm(a, b, c) {
          var d = new Uint8Array(0);
          a.je = a.g(b, c, function(e) {
            return Q(function(f) {
              if (f.g == 1) return d.byteLength > 0 ? d = tc(d, e) : d = e, a.xh ? F(f, a.xh(d), 3) : f.A(0);
              d = new Uint8Array(0);
              G(f);
            });
          });
          return a.je.promise.catch(function(e) {
            return e instanceof U && e.code == 7001 ? Promise.resolve() : Promise.reject(e);
          });
        }
        im.prototype.abort = function() {
          this.je && this.je.abort();
        };
        S("shaka.config.CrossBoundaryStrategy", { KEEP: "keep", RESET: "reset", RESET_TO_ENCRYPTED: "reset_to_encrypted", RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE" });
        function qm(a) {
          var b = Qe(a), c = b.split("/")[0];
          a = Re(a);
          return { type: c, mimeType: b, codecs: a, language: null, height: null, width: null, channelCount: null, sampleRate: null, closedCaptions: /* @__PURE__ */ new Map(), ve: null, colorGamut: null, frameRate: null };
        }
        function rm(a, b, c) {
          function d(A) {
            z = A.name;
            var E = A.reader;
            E.skip(24);
            var J = E.Ca(), I = E.Ca();
            E.skip(50);
            q = String(J);
            n = String(I);
            A.reader.Ia() && qh(A);
          }
          function e(A) {
            var E = Ei(A.reader);
            r = E.channelCount;
            u = E.sampleRate;
            f(A.name);
          }
          function f(A) {
            A = A.toLowerCase();
            switch (A) {
              case "avc1":
              case "avc3":
                h.push(A + ".42E01E");
                l = true;
                break;
              case "hev1":
              case "hvc1":
                h.push(A + ".1.6.L93.90");
                l = true;
                break;
              case "dvh1":
              case "dvhe":
                h.push(A + ".05.04");
                l = true;
                break;
              case "vp09":
                h.push(A + ".00.10.08");
                l = true;
                break;
              case "av01":
                h.push(A + ".0.01M.08");
                l = true;
                break;
              case "mp4a":
                g.push("mp4a.40.2");
                k2 = true;
                break;
              case "ac-3":
              case "ec-3":
              case "ac-4":
              case "opus":
              case "flac":
                g.push(A);
                k2 = true;
                break;
              case "apac":
                g.push("apac.31.00"), k2 = true;
            }
          }
          var g = [], h = [], k2 = false, l = false, m = null, n = null, q = null, r = null, u = null, v = null, w = null, z;
          new kh().box("moov", qh).box("trak", qh).box("mdia", qh).S("mdhd", function(A) {
            m = Ci(A.reader, A.version).language;
          }).box("minf", qh).box("stbl", qh).S("stsd", sh).box("mp4a", function(A) {
            var E = Ei(A.reader);
            r = E.channelCount;
            u = E.sampleRate;
            A.reader.Ia() ? qh(A) : f(A.name);
          }).box(
            "esds",
            function(A) {
              A = A.reader;
              for (var E = "mp4a", J, I; A.Ia(); ) {
                J = A.Y();
                for (var K = A.Y(); K & 128; ) K = A.Y();
                if (J == 3) A.Ca(), K = A.Y(), K & 128 && A.Ca(), K & 64 && A.skip(A.Y()), K & 32 && A.Ca();
                else if (J == 4) I = A.Y(), A.skip(12);
                else if (J == 5) break;
              }
              I && (E += "." + Hi(I), J == 5 && A.Ia() && (J = A.Y(), I = (J & 248) >> 3, I === 31 && A.Ia() && (I = 32 + ((J & 7) << 3) + ((A.Y() & 224) >> 5)), E += "." + I));
              g.push(E);
              k2 = true;
            }
          ).box("ac-3", e).box("ec-3", e).box("ac-4", e).box("Opus", e).box("fLaC", e).box("apac", e).box("avc1", d).box("avc3", d).box("hev1", d).box("hvc1", d).box("dva1", d).box(
            "dvav",
            d
          ).box("dvh1", d).box("dvhe", d).box("vp09", d).box("av01", d).box("avcC", function(A) {
            var E = z || "";
            switch (z) {
              case "dvav":
                E = "avc3";
                break;
              case "dva1":
                E = "avc1";
            }
            A = A.reader;
            A.skip(1);
            A = E + "." + Hi(A.Y()) + Hi(A.Y()) + Hi(A.Y());
            h.push(A);
            l = true;
          }).box("hvcC", function(A) {
            var E = z || "";
            switch (z) {
              case "dvh1":
                E = "hvc1";
                break;
              case "dvhe":
                E = "hev1";
            }
            var J = A.reader;
            J.skip(1);
            A = J.Y();
            var I = ["", "A", "B", "C"][A >> 6], K = A & 31, L = J.U(), O = (A & 32) >> 5 ? "H" : "L";
            A = [J.Y(), J.Y(), J.Y(), J.Y(), J.Y(), J.Y()];
            J = J.Y();
            for (var P = 0, N = 0; N < 32; N++) {
              P |= L & 1;
              if (N == 31) break;
              P <<= 1;
              L >>= 1;
            }
            E = E + ("." + I + K) + ("." + Hi(P, true));
            E += "." + O + J;
            I = "";
            for (K = A.length; K--; ) if ((O = A[K]) || I) I = "." + O.toString(16).toUpperCase() + I;
            E += I;
            h.push(E);
            l = true;
          }).box("dvcC", function(A) {
            var E = z || "";
            switch (z) {
              case "hvc1":
                E = "dvh1";
                break;
              case "hev1":
                E = "dvhe";
                break;
              case "avc1":
                E = "dva1";
                break;
              case "avc3":
                E = "dvav";
                break;
              case "av01":
                E = "dav1";
            }
            var J = A.reader;
            J.skip(2);
            A = J.Y();
            J = J.Y();
            h.push(E + "." + Ii(A >> 1 & 127) + "." + Ii(A << 5 & 32 | J >> 3 & 31));
            l = true;
          }).box("dvvC", function(A) {
            var E = z || "";
            switch (z) {
              case "hvc1":
                E = "dvh1";
                break;
              case "hev1":
                E = "dvhe";
                break;
              case "avc1":
                E = "dva1";
                break;
              case "avc3":
                E = "dvav";
                break;
              case "av01":
                E = "dav1";
            }
            var J = A.reader;
            J.skip(2);
            A = J.Y();
            J = J.Y();
            h.push(E + "." + Ii(A >> 1 & 127) + "." + Ii(A << 5 & 32 | J >> 3 & 31));
            l = true;
          }).S("vpcC", function(A) {
            var E = z || "", J = A.reader;
            A = J.Y();
            var I = J.Y();
            J = J.Y() >> 4 & 15;
            h.push(E + "." + Ii(A) + "." + Ii(I) + "." + Ii(J));
            l = true;
          }).box("av1C", function(A) {
            var E = z || "";
            switch (z) {
              case "dav1":
                E = "av01";
            }
            var J = A.reader;
            J.skip(1);
            A = J.Y();
            J = J.Y();
            var I = A >>> 5, K = (J & 64) >> 6;
            h.push(E + "." + I + "." + Ii(A & 31) + (J >>> 7 ? "H" : "M") + "." + Ii(I === 2 && K ? (J & 32) >> 5 ? 12 : 10 : K ? 10 : 8) + "." + ((J & 16) >> 4) + "." + ((J & 8) >> 3) + ((J & 4) >> 2) + (J & 3) + "." + Ii(1) + "." + Ii(1) + "." + Ii(1) + ".0");
            l = true;
          }).box("enca", uh).box("encv", th).box("sinf", qh).box("frma", function(A) {
            A = Fi(A.reader).codec;
            f(A);
          }).box("colr", function(A) {
            h = h.map(function(I) {
              if (I.startsWith("av01.")) {
                var K = A.reader, L = K.Pa(), O = K.Ub(4, false);
                var P = String.fromCharCode(O[0]);
                P += String.fromCharCode(O[1]);
                P += String.fromCharCode(O[2]);
                P += String.fromCharCode(O[3]);
                if (P === "nclx") {
                  O = K.Ca();
                  P = K.Ca();
                  var N = K.Ca(), M = K.Y() >> 7, R = I.split(".");
                  R.length == 10 && (R[6] = Ii(O), R[7] = Ii(P), R[8] = Ii(N), R[9] = String(M), I = R.join("."));
                }
                K.seek(L);
              }
              return I;
            });
            var E = Gi(A.reader), J = E.colorGamut;
            v = E.ve;
            w = J;
          }).parse(a || b, true, true);
          if (!g.length && !h.length) return null;
          var y = k2 && !l, B = /* @__PURE__ */ new Map();
          if (l && !c) {
            c = new Sc("video/mp4");
            a && c.init(a);
            try {
              c.xf(b);
              for (var C = t(c.Vf()), H = C.next(); !H.done; H = C.next()) {
                var D = H.value;
                B.set(D, D);
              }
            } catch (A) {
            }
            c.Nd();
          }
          return {
            type: y ? "audio" : "video",
            mimeType: y ? "audio/mp4" : "video/mp4",
            codecs: sm(g.concat(h)).join(", "),
            language: m,
            height: n,
            width: q,
            channelCount: r,
            sampleRate: u,
            closedCaptions: B,
            ve: v,
            colorGamut: w,
            frameRate: null
          };
        }
        function sm(a) {
          var b = /* @__PURE__ */ new Set(), c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            var e = Pe(d);
            b.has(e) || (c.push(d), b.add(e));
          }
          b = Bc("audio", c);
          d = Bc("video", c);
          a = Bc(Ac, c);
          d = tm(d);
          b = b.concat(d).concat(a);
          return c.length && !b.length ? c : b;
        }
        function tm(a) {
          if (a.length <= 1) return a;
          var b = a.find(function(c) {
            return c.startsWith("dvav.") || c.startsWith("dva1.") || c.startsWith("dvh1.") || c.startsWith("dvhe.") || c.startsWith("dav1.") || c.startsWith("dvc1.") || c.startsWith("dvi1.");
          });
          return b ? xi('video/mp4; codecs="' + b + '"') ? [b] : a.filter(function(c) {
            return c != b;
          }) : a;
        }
        function um(a) {
          var b = null;
          new kh().box("moov", qh).box("trak", qh).box("mdia", qh).box("minf", qh).box("stbl", qh).S("stsd", sh).box("encv", th).box("enca", uh).box("sinf", qh).box("schi", qh).S("tenc", function(c) {
            c = c.reader;
            c.Y();
            c.Y();
            c.Y();
            c.Y();
            c = c.Ub(16, false);
            b = sc(c);
          }).parse(a, true);
          return b;
        }
        function vm(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return d = b, d.cryptoKey ? k2.A(2) : F(k2, d.fetchKey(), 3);
            e = d.iv;
            if (!e) for (e = Vb(new ArrayBuffer(16)), f = d.firstMediaSequenceNumber + c, g = e.byteLength - 1; g >= 0; g--) e[g] = f & 255, f >>= 8;
            b.blockCipherMode == "CBC" ? h = { name: "AES-CBC", iv: e } : h = { name: "AES-CTR", counter: e, length: 64 };
            return k2.return(window2.crypto.subtle.decrypt(h, d.cryptoKey, a));
          });
        }
        ;
        function wm(a, b, c, d, e) {
          a = Ug(a, d, e);
          if (b != 0 || c != null) a.headers.Range = c ? "bytes=" + b + "-" + c : "bytes=" + b + "-";
          return a;
        }
        ;
        function xm(a, b) {
          var c = this;
          this.g = b;
          this.j = a;
          this.i = null;
          this.M = /* @__PURE__ */ new Map();
          this.C = 1;
          this.B = this.o = null;
          this.V = 0;
          this.h = /* @__PURE__ */ new Map();
          this.N = false;
          this.X = null;
          this.F = false;
          this.l = new bh(function() {
            return ym(c);
          });
          this.R = Date.now() / 1e3;
          this.m = /* @__PURE__ */ new Map();
          this.T = { projection: null, hfov: null };
          this.aa = 0;
          this.$ = Infinity;
          this.H = null;
          this.O = [];
          this.u = new gf(function() {
            if (c.j && c.g) if (c.j.presentationTimeline.W()) {
              var d = c.j.presentationTimeline.Zb(), e = c.j.presentationTimeline.Hb();
              e - d > 1 ? $k(c.g.Z, d, e) : al(c.g.Z);
            } else al(c.g.Z), c.u && c.u.stop();
            else c.u && c.u.stop();
          });
          this.I = null;
          this.J = false;
          this.K = new gf(function() {
            var d = c.g.video;
            !d.ended && c.I && (c.J = true, d.currentTime = c.I, c.I = null);
          });
          this.G = new kb();
        }
        p = xm.prototype;
        p.destroy = function() {
          return this.l.destroy();
        };
        function ym(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              a.u && a.u.stop();
              a.u = null;
              a.K && a.K.stop();
              a.K = null;
              a.G && (a.G.release(), a.G = null);
              b = [];
              c = t(a.h.values());
              for (d = c.next(); !d.done; d = c.next()) e = d.value, zm(e), b.push(Am(e)), e.ha && (nm(e.ha), e.ha = null);
              f = t(a.m.values());
              for (g = f.next(); !g.done; g = f.next()) h = g.value, nm(h);
              return F(k2, Promise.all(b), 2);
            }
            a.h.clear();
            a.m.clear();
            a.g = null;
            a.j = null;
            a.i = null;
            a.I = null;
            G(k2);
          });
        }
        p.configure = function(a) {
          this.i = a;
          this.X = new zg({ maxAttempts: Math.max(a.retryParameters.maxAttempts, 2), baseDelay: a.retryParameters.baseDelay, backoffFactor: a.retryParameters.backoffFactor, fuzzFactor: a.retryParameters.fuzzFactor, timeout: 0, stallTimeout: 0, connectionTimeout: 0 }, true);
          if (a.disableAudioPrefetch) {
            var b = this.h.get("audio");
            b && b.ha && (nm(b.ha), b.ha = null);
            b = t(this.m.keys());
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, nm(this.m.get(c)), this.m.delete(c);
          }
          a.disableTextPrefetch && (b = this.h.get(Ac)) && b.ha && (nm(b.ha), b.ha = null);
          a.disableVideoPrefetch && (b = this.h.get("video")) && b.ha && (nm(b.ha), b.ha = null);
          b = t(this.h.keys());
          for (c = b.next(); !c.done; c = b.next()) c = this.h.get(c.value), c.ha ? (om(c.ha, a.segmentPrefetchLimit), a.segmentPrefetchLimit > 0 || (nm(c.ha), c.ha = null)) : a.segmentPrefetchLimit > 0 && (c.ha = Bm(this, c.stream));
          a.disableAudioPrefetch || Cm(this);
        };
        function Dm(a, b, c) {
          a.j.presentationTimeline.W() || (a.aa = b, a.$ = c);
        }
        p.start = function(a) {
          var b = this;
          return Q(function(c) {
            if (c.g == 1) return F(c, Em(b, a || /* @__PURE__ */ new Map()), 2);
            ch(b.l);
            b.N = true;
            G(c);
          });
        };
        function Fm(a, b) {
          var c, d, e, f, g, h, k2;
          Q(function(l) {
            switch (l.g) {
              case 1:
                return c = Cc, a.V++, d = a.V, ra(l, 2), F(l, Uk(a.g.Z, c.Na), 4);
              case 4:
                ta(l, 3);
                break;
              case 2:
                if (e = Aa(l), a.g) a.g.onError(e);
              case 3:
                f = Ie(b.mimeType, b.codecs), Dk(a.g.Z, f, a.j.sequenceMode, b.external), g = a.g.Z.aa, (h = g.isTextVisible() || a.i.alwaysStreamText) && a.V == d && (k2 = Gm(a, b), a.h.set(c.Na, k2), Hm(a, k2, 0)), G(l);
            }
          });
        }
        function Im(a) {
          var b = a.h.get(Ac);
          b && (zm(b), Am(b).catch(function() {
          }), a.H = a.h.get(Ac), a.h.delete(Ac), b.stream && b.stream.closeSegmentIndex && b.stream.closeSegmentIndex());
          a.B = null;
        }
        function Jm(a, b) {
          for (var c = a.g.Pb() < 0, d = t(a.h.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.ua && e.ua.Id(c), e.ha && e.ha.Id(c);
          d = t(a.m.values());
          for (e = d.next(); !e.done; e = d.next()) e.value.Id(c);
          if (c = a.h.get("video")) {
            if (d = c.stream) {
              if (b) (b = d.trickModeVideo) && !c.Nc && (Km(a, b, false, 0, false), c.Nc = d);
              else if (b = c.Nc) c.Nc = null, Km(a, b, true, 0, false);
            }
          }
        }
        function Lm(a, b, c, d, e, f) {
          c = c === void 0 ? false : c;
          d = d === void 0 ? 0 : d;
          e = e === void 0 ? false : e;
          f = f === void 0 ? false : f;
          a.o = b;
          a.N && (b.video && Km(a, b.video, c, d, e, f), b.audio && Km(a, b.audio, c, d, e, f));
        }
        function Mm(a, b) {
          Q(function(c) {
            if (c.g == 1) return a.H = null, a.B = b, a.N ? b.segmentIndex ? c.A(2) : F(c, b.createSegmentIndex(), 2) : c.return();
            Km(a, b, true, 0, false);
            G(c);
          });
        }
        function Nm(a) {
          var b = a.h.get(Ac);
          b && Km(a, b.stream, true, 0, true);
        }
        function Om(a, b) {
          for (var c = t(a.M.entries()), d = c.next(); !d.done; d = c.next()) {
            var e = t(d.value);
            d = e.next().value;
            e = e.next().value;
            d.includes(b.type) && (e(), a.M.delete(d));
          }
        }
        function Km(a, b, c, d, e, f) {
          var g = a.h.get(b.type);
          g || b.type != Ac ? g && (g.Nc && (b.trickModeVideo ? (g.Nc = b, b = b.trickModeVideo) : g.Nc = null), g.stream != b || e) && (a.m.has(b) ? g.ha = a.m.get(b) : g.ha && pm(g.ha, b), b.type == Ac && g.stream != b && (e = Ie(b.mimeType, b.codecs), Dk(a.g.Z, e, a.j.sequenceMode, b.external)), !a.m.has(g.stream) && g.stream.closeSegmentIndex && (g.Ja ? (e = "(" + g.type + ":" + g.stream.id + ")", a.M.has(e) || a.M.set(e, g.stream.closeSegmentIndex)) : g.stream.closeSegmentIndex()), e = g.stream.isAudioMuxedInVideo != b.isAudioMuxedInVideo, g.stream = b, g.ua = null, g.cg = !!f, b.dependencyStream ? g.Fc = Gm(a, b.dependencyStream) : g.Fc = null, Pm(a), e && (g.pb = null, g.tc = null, g.sc = null, b.isAudioMuxedInVideo && (b = null, g.type === "video" ? b = a.h.get("audio") : g.type === "audio" && (b = a.h.get("video")), b && (Am(b).catch(function() {
          }), b.pb = null, b.tc = null, b.sc = null, Qm(a, b), Rm(a, b).catch(function(h) {
            if (a.g) a.g.onError(h);
          })))), c ? g.Wb ? g.Kd = true : g.Ja ? (g.jc = true, g.ld = d, g.Kd = true) : (zm(g), Sm(a, g, true, d).catch(function(h) {
            if (a.g) a.g.onError(h);
          })) : g.Ja || g.qb || Hm(a, g, 0), Rm(a, g).catch(function(h) {
            if (a.g) a.g.onError(h);
          })) : Fm(a, b);
        }
        function Rm(a, b) {
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) {
              if (!b.Va) return f.return();
              c = b.stream;
              d = b.Va;
              return c.segmentIndex ? f.A(2) : F(f, c.createSegmentIndex(), 2);
            }
            if (f.g != 4) return e = c.dependencyStream, !e || e.segmentIndex ? f.A(4) : F(f, e.createSegmentIndex(), 4);
            if (b.Va != d || b.stream != c) return f.return();
            var g = a.g.nc();
            var h = Jk(a.g.Z, b.type), k2 = b.stream.segmentIndex.find(b.La ? b.La.endTime : g), l = k2 == null ? null : b.stream.segmentIndex.get(k2);
            k2 = l ? sj(l) : null;
            l && !k2 && (k2 = (l.endTime - l.getStartTime()) * (b.stream.bandwidth || a.o.bandwidth) / 8);
            k2 ? ((l = l.ba) && (k2 += (l.endByte ? l.endByte + 1 - l.startByte : null) || 0), l = a.g.getBandwidthEstimate(), g = k2 * 8 / l < (h || 0) - g - a.i.rebufferingGoal || b.Va.h.g > k2 ? true : false) : g = true;
            g && b.Va.abort();
            G(f);
          });
        }
        p.bd = function() {
          if (this.g) {
            for (var a = this.g.nc(), b = t(this.h.keys()), c = b.next(); !c.done; c = b.next()) {
              var d = c.value;
              c = this.h.get(d);
              var e;
              if (e = !this.J) e = this.g.Z, d == Ac ? (e = e.h, e = e.g == null || e.h == null ? false : a >= e.g && a < e.h) : (e = Ik(e, d), e = yj(e, a)), e = !e;
              if (e) {
                this.R = 0;
                c.ha && (c.ha.h = null);
                if (c.type === "audio") {
                  e = t(this.m.values());
                  for (var f = e.next(); !f.done; f = e.next()) f.value.h = null;
                }
                c.ua = null;
                (Jk(this.g.Z, d) != null || c.Ja) && Qm(this, c);
                c.Va && (c.Va.abort(), c.Va = null);
                d === Ac && (d = this.g.Z, d.K && d.K.Nd());
                c.bd = true;
              }
              !this.J || c.Wb || c.Ja || c.qb || Hm(this, c, 0);
            }
            Tm(this) && Um(this);
          }
        };
        function Qm(a, b) {
          b.Wb || b.jc || (b.Ja ? (b.jc = true, b.ld = 0) : Hk(a.g.Z, b.type) == null ? b.qb == null && Hm(a, b, 0) : (zm(b), Sm(a, b, false, 0).catch(function(c) {
            if (a.g) a.g.onError(c);
          })));
        }
        function Em(a, b) {
          var c, d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              if (!a.o) throw new U(2, 5, 5006);
              c = Vm(a, true);
              d = a.g.Z;
              return F(m, d.init(c, a.j.sequenceMode, a.j.type, a.j.ignoreManifestTimestampsInSegmentsMode), 2);
            }
            ch(a.l);
            a.updateDuration();
            e = t(c.keys());
            for (f = e.next(); !f.done; f = e.next()) g = f.value, h = c.get(g), a.h.has(g) || (k2 = Gm(a, h), b.has(h.id) && (l = b.get(h.id), fm(l, function(n, q, r) {
              return Wm(n, q, r || null, a.i.retryParameters, a.g.vc);
            }), k2.ha = l), a.h.set(g, k2), Hm(a, k2, 0));
            Pm(a);
            G(m);
          });
        }
        function Gm(a, b) {
          var c = { stream: b, type: b.type, ua: null, ha: Bm(a, b), La: null, pb: null, kf: null, tc: null, sc: null, hf: null, jf: null, Nc: null, endOfStream: false, Ja: false, qb: null, jc: false, ld: 0, Kd: false, Wb: false, bd: true, cg: false, ah: false, Zd: false, Va: null, Fc: null };
          b.dependencyStream && (c.Fc = Gm(a, b.dependencyStream));
          return c;
        }
        function Bm(a, b) {
          if (b.type === "video" && a.i.disableVideoPrefetch || b.type === "audio" && a.i.disableAudioPrefetch || b.type === Ac && (b.mimeType == "application/cea-608" || b.mimeType == "application/cea-708") || b.type === Ac && a.i.disableTextPrefetch) return null;
          if (a.m.has(b)) return a.m.get(b);
          var c = a.h.get(b.type);
          return (c = c && c.ha) && b === c.i ? c : a.i.segmentPrefetchLimit > 0 ? new em(a.i.segmentPrefetchLimit, b, function(d, e, f) {
            return Wm(d, e, f || null, a.i.retryParameters, a.g.vc);
          }, a.g.Pb() < 0, a.g.$k) : null;
        }
        function Cm(a) {
          for (var b = a.i.segmentPrefetchLimit, c = a.i.prefetchAudioLanguages, d = t(a.j.variants), e = d.next(), f = {}; !e.done; f = { Nb: void 0 }, e = d.next()) if (f.Nb = e.value, f.Nb.audio) if (a.m.has(f.Nb.audio)) {
            if (e = a.m.get(f.Nb.audio), om(e, b), !(b > 0 && c.some(/* @__PURE__ */ (function(h) {
              return function(k2) {
                return nf(h.Nb.audio.language, k2);
              };
            })(f)))) {
              var g = a.h.get(f.Nb.audio.type);
              e !== (g && g.ha) && nm(e);
              a.m.delete(f.Nb.audio);
            }
          } else b <= 0 || !c.some(/* @__PURE__ */ (function(h) {
            return function(k2) {
              return nf(h.Nb.audio.language, k2);
            };
          })(f)) || !(e = Bm(a, f.Nb.audio)) || (f.Nb.audio.segmentIndex || f.Nb.audio.createSegmentIndex(), a.m.set(f.Nb.audio, e));
        }
        p.updateDuration = function() {
          var a = zi(), b = this.j.presentationTimeline.getDuration();
          b < Infinity ? (a && (this.u && this.u.stop(), al(this.g.Z)), this.g.Z.Ab(b)) : a ? (this.u && this.u.Ea(0.5), this.g.Z.Ab(Infinity)) : this.g.Z.Ab(4294967296);
        };
        function Xm(a, b) {
          var c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                ch(a.l);
                c = Cc;
                if (b.Ja || b.qb == null || b.Wb) return n.return();
                b.qb = null;
                if (!b.jc) {
                  n.A(2);
                  break;
                }
                return F(n, Sm(a, b, b.Kd, b.ld), 3);
              case 3:
                return n.return();
              case 2:
                Om(a, b);
                if (b.stream.segmentIndex) {
                  n.A(4);
                  break;
                }
                d = b.stream;
                ra(n, 5);
                return F(n, b.stream.createSegmentIndex(), 7);
              case 7:
                ta(n, 6);
                break;
              case 5:
                return e = Aa(n), F(n, Ym(a, b, e), 8);
              case 8:
                return n.return();
              case 6:
                if (d != b.stream) return d.closeSegmentIndex && d.closeSegmentIndex(), b.Ja || b.qb || Hm(a, b, 0), n.return();
              case 4:
                if (!b.Fc) {
                  n.A(9);
                  break;
                }
                if (b.Fc.stream.segmentIndex) {
                  n.A(9);
                  break;
                }
                ra(n, 11);
                return F(n, b.Fc.stream.createSegmentIndex(), 13);
              case 13:
                ta(n, 9);
                break;
              case 11:
                Aa(n);
              case 9:
                ra(n, 14);
                f = Zm(a, b);
                f != null && (Hm(a, b, f), b.Zd = false);
                ta(n, 15);
                break;
              case 14:
                return g = Aa(n), F(n, Ym(a, b, g), 16);
              case 16:
                return n.return();
              case 15:
                if (b.type === c.Na) return n.return();
                h = [];
                b.stream && !b.stream.isAudioMuxedInVideo && h.push(b);
                k2 = b.type === c.ka ? c.Aa : c.ka;
                (l = a.h.get(k2)) && l.stream && !l.stream.isAudioMuxedInVideo && h.push(l);
                if (!a.N || !h.every(function(q) {
                  return q.endOfStream;
                })) {
                  n.A(0);
                  break;
                }
                return F(n, a.g.Z.endOfStream(), 18);
              case 18:
                ch(a.l), m = a.g.Z.getDuration(), m != 0 && m < a.j.presentationTimeline.getDuration() && a.j.presentationTimeline.Ab(m), G(n);
            }
          });
        }
        function Zm(a, b) {
          if ($m(b)) return Rk(a.g.Z, b.stream.originalId || ""), null;
          b.type == Ac && Sk(a.g.Z);
          if (b.stream.isAudioMuxedInVideo && b.type == "audio") return null;
          if (b.type != Ac && Bk(a.g.Z)) return an(a, true), null;
          var c = a.i.updateIntervalSeconds / Math.max(1, Math.abs(a.g.Pb()));
          if (!Gk(a.g.Z) && b.type != Ac) return c / 2;
          var d = a.g.nc();
          if (b.type === "audio") for (var e = t(a.m.keys()), f = e.next(); !f.done; f = e.next()) f = a.m.get(f.value), f.Ya(d, true), gm(f, d);
          e = b.La ? b.La.endTime : d;
          var g = Kk(a.g.Z, b.type, d);
          f = Math.max(1, Math.max(
            a.i.rebufferingGoal,
            a.i.bufferingGoal
          ) * a.C);
          var h = a.j.presentationTimeline.getDuration() - e, k2 = Jk(a.g.Z, b.type);
          if (h < 1e-6 && k2) return b.endOfStream = true, b.type == "video" && (a = a.h.get(Ac)) && $m(a) && (a.endOfStream = true), null;
          b.endOfStream = false;
          if (g >= f) return c / 2;
          h = !b.ua;
          k2 = bn(a, b, d, k2);
          if (!k2) return c;
          g = b.pb;
          var l = k2.ba;
          g && l && pj(l, g) && (g.g = l.g);
          g = false;
          h && b.cg && (g = true, b.cg = false);
          h = Infinity;
          l = Array.from(a.h.values());
          l = t(l);
          for (var m = l.next(); !m.done; m = l.next()) m = m.value, $m(m) || m.ua && !m.ua.current() || (h = Math.min(h, m.La ? m.La.endTime : d));
          if (e >= h + a.j.presentationTimeline.h) return c;
          b.ha && b.ua && !a.m.has(b.stream) && (b.ha.Ya(k2.startTime + 1e-3), gm(b.ha, k2.startTime).catch(function() {
          }));
          if (Tm(a) && cn(a, b, k2)) return null;
          dn(a, b, d, k2, g).catch(function() {
          });
          b.Fc && en(a, b.Fc, d, f);
          return null;
        }
        function bn(a, b, c, d) {
          if (b.ua) return (c = b.ua.current()) && b.La && Math.abs(b.La.startTime - c.startTime) < 1e-3 && (c = b.ua.next().value), c;
          if (b.La || d) return c = b.La ? b.La.endTime : d, a = a.g.Pb() < 0, b.stream.segmentIndex && (b.ua = b.stream.segmentIndex.Xb(c, false, a)), b.ua && b.ua.next().value;
          d = a.j.sequenceMode || Tm(a) ? 0 : a.i.inaccurateManifestTolerance;
          var e = Math.max(c - d, 0);
          a = a.g.Pb() < 0;
          var f = null;
          d && (b.stream.segmentIndex && (b.ua = b.stream.segmentIndex.Xb(e, false, a)), f = b.ua && b.ua.next().value);
          f || (b.stream.segmentIndex && (b.ua = b.stream.segmentIndex.Xb(c, false, a)), f = b.ua && b.ua.next().value);
          return f;
        }
        function dn(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                f = Cc;
                g = b.stream;
                h = b.ua;
                b.Ja = true;
                ra(A, 2);
                if (d.Kc() == 2) throw new U(1, 1, 1011);
                return F(A, fn(a, b, d, e), 4);
              case 4:
                ch(a.l);
                if (a.F) return A.return();
                k2 = g.mimeType == "video/mp4" || g.mimeType == "audio/mp4";
                l = window2.ReadableStream;
                if ((m = a.i.lowLatencyMode && a.j.isLowLatency) && l && k2 && (a.j.type != "HLS" || d.o)) return r = new Uint8Array(0), v = u = false, z = function(E) {
                  var J, I, K, L;
                  return Q(function(O) {
                    switch (O.g) {
                      case 1:
                        if (u) return O.return();
                        v = true;
                        ch(a.l);
                        if (a.F) return O.return();
                        ra(O, 2);
                        r = tc(r, E);
                        J = false;
                        I = 0;
                        new kh().box("mdat", function(P) {
                          I = P.size + P.start;
                          J = true;
                        }).parse(r, false, true);
                        if (!J) {
                          O.A(4);
                          break;
                        }
                        K = r.subarray(0, I);
                        r = r.subarray(I);
                        return F(O, gn(a, b, c, g, d, K, true, e), 5);
                      case 5:
                        b.ha && b.ua && gm(b.ha, d.startTime, true);
                      case 4:
                        ta(O, 0);
                        break;
                      case 2:
                        w = L = Aa(O), G(O);
                    }
                  });
                }, F(A, hn(a, b, d, z), 9);
                n = hn(a, b, d);
                return F(A, n, 7);
              case 7:
                q = A.h;
                ch(a.l);
                if (a.F) return A.return();
                ch(a.l);
                return b.jc ? (b.Ja = false, Hm(a, b, 0), A.return()) : F(A, gn(a, b, c, g, d, q, false, e), 6);
              case 9:
                y = A.h;
                if (w) throw w;
                if (v) {
                  A.A(10);
                  break;
                }
                u = true;
                ch(a.l);
                return a.F ? A.return() : b.jc ? (b.Ja = false, Hm(a, b, 0), A.return()) : F(A, gn(a, b, c, g, d, y, false, e), 10);
              case 10:
                b.ha && b.ua && gm(b.ha, d.startTime, true);
              case 6:
                ch(a.l);
                if (a.F) return A.return();
                b.La = d;
                h.next();
                b.Ja = false;
                b.ah = false;
                B = a.g.Z.Gc();
                C = B[b.type];
                db(JSON.stringify(C));
                b.jc || (H = null, b.type === f.Aa ? H = a.h.get(f.ka) : b.type === f.ka && (H = a.h.get(f.Aa)), H && H.type == f.ka ? a.g.wf(d, b.stream, H.stream.isAudioMuxedInVideo) : a.g.wf(d, b.stream, b.stream.codecs.includes(",")));
                zm(b);
                Hm(a, b, 0);
                ta(A, 0);
                break;
              case 2:
                D = Aa(A);
                ch(a.l, D);
                if (a.F) return A.return();
                b.Ja = false;
                if (D.code == 7001) b.Ja = false, zm(b), Hm(a, b, 0), A.A(0);
                else if (b.type == f.Na && a.i.ignoreTextStreamFailures) a.h.delete(f.Na), A.A(0);
                else {
                  if (D.code == 3017) return F(A, jn(a, b, D), 0);
                  b.Zd = true;
                  D.category == 1 && b.ha && mm(b.ha, d);
                  D.severity = 2;
                  return F(A, Ym(a, b, D), 0);
                }
            }
          });
        }
        function en(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                e = b.stream;
                for (h = (g = (f = e.segmentIndex) && f.Xb(c)) && g.next().value; h && a.O.includes(h.startTime); ) h = g && g.next().value;
                if (!h) {
                  v.A(0);
                  break;
                }
                k2 = h.ba;
                if (!k2 || pj(k2, b.pb)) {
                  v.A(3);
                  break;
                }
                b.pb = k2;
                ra(v, 4);
                return F(v, hn(a, b, k2), 6);
              case 6:
                l = v.h;
                var w = a.g.Z;
                w.C && Fc(w.C, l, 0, e);
                a.O = [];
                ta(v, 3);
                break;
              case 4:
                throw m = Aa(v), b.pb = null, m;
              case 3:
                if (b.La && b.La == h) {
                  v.A(0);
                  break;
                }
                b.La = h;
                ra(v, 8);
                return F(v, hn(a, b, h), 10);
              case 10:
                n = v.h;
                w = a.g.Z;
                w.C && Fc(w.C, n, 0, e);
                a.O.push(h.startTime);
                ta(v, 9);
                break;
              case 8:
                throw q = Aa(v), b.La = null, q;
              case 9:
                r = Math.max.apply(Math, [0].concat(x(a.O)));
                u = a.g.nc();
                if (u + d > r) return F(v, en(a, b, h.startTime, d), 0);
                v.A(0);
            }
          });
        }
        function jn(a, b, c) {
          var d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            switch (q.g) {
              case 1:
                d = Array.from(a.h.values());
                if (e = d.some(function(r) {
                  return r != b && r.ah;
                })) {
                  q.A(2);
                  break;
                }
                if (a.i.avoidEvictionOnQuotaExceededError) {
                  f = kn(a, c);
                  if (g = a.g.disableStream(b.stream, f)) return q.return();
                  Hm(a, b, 4);
                  return q.return();
                }
                h = Math.round(100 * a.C);
                if (h > 20) {
                  a.C -= 0.2;
                  q.A(3);
                  break;
                }
                if (h > 4) {
                  a.C -= 0.04;
                  q.A(3);
                  break;
                }
                k2 = kn(a, c);
                l = a.g.disableStream(b.stream, k2);
                if (!l) {
                  b.Zd = true;
                  a.F = true;
                  a.g.onError(c);
                  q.A(5);
                  break;
                }
                a.C = 1;
                m = a.g.nc();
                return F(
                  q,
                  ln(a, b, m),
                  5
                );
              case 5:
                return q.return();
              case 3:
                return b.ah = true, n = a.g.nc(), F(q, ln(a, b, n), 2);
              case 2:
                Hm(a, b, 4), G(q);
            }
          });
        }
        function fn(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B;
          return Q(function(C) {
            switch (C.g) {
              case 1:
                e = Cc;
                f = b.La == null;
                g = [];
                h = Math.max(0, Math.max(c.appendWindowStart, a.aa) - 0.1);
                k2 = Math.min(c.appendWindowEnd, a.$) + 0.1;
                l = c.codecs || b.stream.codecs;
                m = Pe(l);
                n = Qe(c.mimeType || b.stream.mimeType);
                q = c.timestampOffset;
                if (q == b.kf && h == b.tc && k2 == b.sc && m == b.hf && n == b.jf) {
                  C.A(2);
                  break;
                }
                r = b.hf && b.jf && ml(a.g.Z, b.type, n, l, Vm(a));
                if (!r) {
                  C.A(3);
                  break;
                }
                u = null;
                b.type === e.Aa ? u = a.h.get(e.ka) : b.type === e.ka && (u = a.h.get(e.Aa));
                if (!u) {
                  C.A(3);
                  break;
                }
                return F(C, Am(u).catch(function() {
                }), 5);
              case 5:
                u.pb = null, u.tc = null, u.sc = null, Qm(a, u);
              case 3:
                return F(C, mn(a, b, q, h, k2, c, m, n), 2);
              case 2:
                return pj(c.ba, b.pb) || (b.pb = c.ba, c.l && c.ba && (v = hn(a, b, c.ba), w = function() {
                  var H, D, A, E, J, I, K, L, O, P, N;
                  return Q(function(M) {
                    switch (M.g) {
                      case 1:
                        return ra(M, 2), F(M, v, 4);
                      case 4:
                        return H = M.h, ch(a.l), D = null, A = /* @__PURE__ */ new Map(), E = { projection: null, hfov: null }, b.stream && (J = b.stream.videoLayout) && (I = J.split("/"), I.includes("PROJ-RECT") ? E.projection = "rect" : I.includes("PROJ-EQUI") ? E.projection = "equi" : I.includes("PROJ-HEQU") ? E.projection = "hequ" : I.includes("PROJ-PRIM") ? E.projection = "prim" : I.includes("PROJ-AIV") && (E.projection = "hequ")), K = new kh(), K.box("moov", qh).box("trak", qh).box("mdia", qh).S("mdhd", function(R) {
                          D = Ci(R.reader, R.version).timescale;
                        }).box("hdlr", function(R) {
                          R = R.reader;
                          R.skip(8);
                          switch (R.Yc()) {
                            case "soun":
                              A.set(e.ka, D);
                              break;
                            case "vide":
                              A.set(e.Aa, D);
                          }
                          D = null;
                        }), b.type !== e.Aa || E.projection || K.box("minf", qh).box("stbl", qh).S("stsd", sh).box("encv", th).box("avc1", th).box("avc3", th).box(
                          "hev1",
                          th
                        ).box("hvc1", th).box("dvav", th).box("dva1", th).box("dvh1", th).box("dvhe", th).box("dvc1", th).box("dvi1", th).box("vexu", qh).box("proj", qh).S("prji", function(R) {
                          R = R.reader.Yc();
                          E.projection = R;
                        }).box("hfov", function(R) {
                          R = R.reader.U() / 1e3;
                          E.hfov = R;
                        }), K.parse(H, true, true), b.type === e.Aa && nn(a, E), A.has(b.type) ? c.ba.timescale = A.get(b.type) : D != null && (c.ba.timescale = D), L = b.stream.segmentIndex, L instanceof Pl && (O = Rl(L, c.startTime)), P = b.stream.closedCaptions && b.stream.closedCaptions.size > 0, F(M, a.g.Ph(b.type, H), 5);
                      case 5:
                        return F(M, Mk(a.g.Z, b.type, H, null, b.stream, P, b.bd, d, false, false, O), 6);
                      case 6:
                        ta(M, 0);
                        break;
                      case 2:
                        throw N = Aa(M), b.pb = null, N;
                    }
                  });
                }, z = c.startTime, f && (y = Jk(a.g.Z, b.type), y != null && (z = y)), a.g.Bk(z, c.ba), g.push(w()))), B = b.La ? b.La.i : -1, c.i != B && g.push(Yk(a.g.Z, b.type, c.startTime)), F(C, Promise.all(g), 0);
            }
          });
        }
        function mn(a, b, c, d, e, f, g, h) {
          var k2, l, m, n, q;
          return Q(function(r) {
            switch (r.g) {
              case 1:
                k2 = Cc;
                l = Vm(a);
                ra(r, 2);
                b.tc = d;
                b.sc = e;
                g && (b.hf = g);
                h && (b.jf = h);
                b.kf = c;
                m = a.j.sequenceMode || a.j.type == "HLS";
                n = null;
                b.type === k2.Aa ? n = a.h.get(k2.ka) : b.type === k2.ka && (n = a.h.get(k2.Aa));
                if (!(n && n.stream && n.stream.isAudioMuxedInVideo)) {
                  r.A(4);
                  break;
                }
                return F(r, Vk(a.g.Z, n.type, c, d, e, m, n.stream.mimeType, n.stream.codecs, l), 4);
              case 4:
                return F(r, Vk(a.g.Z, b.type, c, d, e, m, f.mimeType || b.stream.mimeType, f.codecs || b.stream.codecs, l), 6);
              case 6:
                ta(
                  r,
                  0
                );
                break;
              case 2:
                throw q = Aa(r), b.tc = null, b.sc = null, b.hf = null, b.jf = null, b.kf = null, q;
            }
          });
        }
        function gn(a, b, c, d, e, f, g, h) {
          g = g === void 0 ? false : g;
          h = h === void 0 ? false : h;
          var k2, l, m, n, q;
          return Q(function(r) {
            switch (r.g) {
              case 1:
                return k2 = d.closedCaptions && d.closedCaptions.size > 0, a.i.shouldFixTimestampOffset && (l = d.mimeType == "video/mp4" || d.mimeType == "audio/mp4", m = null, e.ba && (m = e.ba.timescale), (n = l && m && d.type === "video" && a.j.type == "DASH") && new kh().box("moof", qh).box("traf", qh).S("tfdt", function(u) {
                  var v, w, z, y, B, C;
                  return Q(function(H) {
                    v = Bi(u.reader, u.version);
                    w = v.baseMediaDecodeTime;
                    if (!w) return H.return();
                    z = -w / m;
                    y = Number(b.kf) || 0;
                    if (!(y < z)) return H.A(0);
                    B = b.tc;
                    C = b.sc;
                    return F(H, mn(a, b, z, B, C, e), 0);
                  });
                }).parse(f, false, g)), F(r, ln(a, b, c), 2);
              case 2:
                return ch(a.l), q = b.bd, b.bd = false, F(r, a.g.Ph(b.type, f), 3);
              case 3:
                return F(r, Mk(a.g.Z, b.type, f, e, d, k2, q, h, g), 4);
              case 4:
                ch(a.l), G(r);
            }
          });
        }
        function ln(a, b, c) {
          var d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              a.H == b && (a.H = null);
              d = b.stream.segmentIndex;
              d instanceof Pl && (d.Ya(a.j.presentationTimeline.Ib()), e = [], Ql(d, function(r) {
                e.push(r.Te());
              }));
              f = Math.max(a.i.bufferBehind * a.C, a.j.presentationTimeline.h);
              g = Hk(a.g.Z, b.type);
              if (g == null) return q.return();
              h = c - g;
              k2 = a.i.evictionGoal;
              l = a.j.presentationTimeline.Zb();
              m = a.j.presentationTimeline.Hb();
              n = h - f;
              m - l > k2 && (n = Math.max(h - f, l - k2 - g));
              return n <= k2 ? q.return() : F(q, a.g.Z.remove(b.type, g, g + n, e), 2);
            }
            if (q.g != 4) return ch(a.l), a.H ? F(q, ln(a, a.H, c), 4) : q.A(0);
            ch(a.l);
            G(q);
          });
        }
        function $m(a) {
          return a && a.type == Ac && (a.stream.mimeType == "application/cea-608" || a.stream.mimeType == "application/cea-708");
        }
        function hn(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (e = c.$b()) return l.return(e);
                f = null;
                if (b.ha) {
                  var m = b.ha, n = m.g;
                  c instanceof oj && (n = m.j);
                  n.has(c) ? (m = n.get(c), d && (m.xh = d), f = m.je) : f = null;
                }
                f || (f = Wm(c, b.stream, d || null, a.i.retryParameters, a.g.vc));
                g = 0;
                b.ua && (g = b.ua.h);
                b.Va = f;
                return F(l, f.promise, 2);
              case 2:
                h = l.h;
                b.Va = null;
                k2 = h.data;
                if (!c.aesKey) {
                  l.A(3);
                  break;
                }
                return F(l, vm(k2, c.aesKey, g), 4);
              case 4:
                k2 = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function Wm(a, b, c, d, e, f) {
          f = f === void 0 ? false : f;
          var g = a instanceof qj ? a : void 0, h = g ? 1 : 0;
          a = wm(a.P(), a.startByte, a.endByte, d, c);
          a.contentType = b.type;
          return e.request($g, a, { type: h, stream: b, segment: g, isPreload: f });
        }
        function Sm(a, b, c, d) {
          var e, f;
          return Q(function(g) {
            if (g.g == 1) return b.jc = false, b.Kd = false, b.ld = 0, b.Wb = true, b.La = null, b.ua = null, b.ha && !a.m.has(b.stream) && nm(b.ha), d ? (e = a.g.nc(), f = a.g.Z.getDuration(), F(g, a.g.Z.remove(b.type, e + d, f), 3)) : F(g, Uk(a.g.Z, b.type), 4);
            if (g.g != 3) return ch(a.l), c ? F(g, a.g.Z.flush(b.type), 3) : g.A(3);
            ch(a.l);
            b.Wb = false;
            b.endOfStream = false;
            b.Ja || b.qb || Hm(a, b, 0);
            G(g);
          });
        }
        function Hm(a, b, c) {
          var d = b.type;
          if (d != Ac || a.h.has(d)) b.qb = new ff(function() {
            var e;
            return Q(function(f) {
              if (f.g == 1) return ra(f, 2), F(f, Xm(a, b), 4);
              if (f.g != 2) return ta(f, 0);
              e = Aa(f);
              if (a.g) a.g.onError(e);
              G(f);
            });
          }).ia(c);
        }
        function zm(a) {
          a.qb != null && (a.qb.stop(), a.qb = null);
        }
        function Am(a) {
          return Q(function(b) {
            return a.Va ? F(b, a.Va.abort(), 0) : b.A(0);
          });
        }
        function Ym(a, b, c) {
          var d;
          return Q(function(e) {
            if (e.g == 1) return c.code == 3024 ? (b.Ja = false, zm(b), Hm(a, b, 0), e.return()) : F(e, Bg(a.X), 2);
            ch(a.l);
            if (c.category === 1 && c.code != 1003) {
              if (b.Nc) return Jm(a, false), e.return();
              d = kn(a, c);
              c.handled = a.g.disableStream(b.stream, d);
              c.handled && (c.severity = 1);
            }
            if (!c.handled || c.code != 1011) a.g.onError(c);
            c.handled || a.i.failureCallback(c);
            G(e);
          });
        }
        function kn(a, b) {
          return a.i.maxDisabledTime === 0 && b.code == 1011 ? 1 : a.i.maxDisabledTime;
        }
        function an(a, b) {
          b = b === void 0 ? false : b;
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              c = Date.now() / 1e3;
              d = a.i.minTimeBetweenRecoveries;
              if (!b) {
                if (!a.i.allowMediaSourceRecoveries || c - a.R < d) return k2.return(false);
                a.R = c;
              }
              e = Cc;
              if (f = a.h.get(e.ka)) zm(f), f.Va && (f.Va.abort(), f.Va = null), f.pb = null, f.tc = null, f.sc = null, f.Ja = false, f.jc = false, f.ld = 0, f.Kd = false, f.Wb = false, f.ua && f.ua.fh();
              if (g = a.h.get(e.Aa)) zm(g), g.Va && (g.Va.abort(), g.Va = null), g.pb = null, g.tc = null, g.sc = null, g.Ja = false, g.jc = false, g.ld = 0, g.Kd = false, g.Wb = false, g.ua && g.ua.fh();
              h = a.g.video.paused;
              return F(k2, gl(a.g.Z, Vm(a)), 2);
            }
            !g || g.Wb || g.Ja || g.qb || Hm(a, g, 0);
            !f || f.Wb || f.Ja || f.qb || Hm(a, f, 0);
            h || a.g.video.play();
            return k2.return(true);
          });
        }
        function nn(a, b) {
          if (a.T.projection != b.projection || a.T.hfov != b.hfov) {
            if (b.projection != null || b.hfov != null) {
              var c = (/* @__PURE__ */ new Map()).set("detail", b);
              c = new V("spatialvideoinfo", c);
            } else c = new V("nospatialvideoinfo");
            c.cancelable = true;
            a.g.onEvent(c);
            a.T = b;
          }
        }
        function Tm(a) {
          if (a.i.crossBoundaryStrategy !== "keep") return true;
          var b = rb();
          if (!b.Bb()) {
            b = t(a.h.keys());
            for (var c = b.next(); !c.done; c = b.next()) if (c = a.h.get(c.value), c.type !== Cc.Na && (c = c.stream) && c.fullMimeTypes && c.fullMimeTypes.size > 1) return true;
          } else if (!b.Jf()) {
            for (b = t(a.h.keys()), c = b.next(); !c.done; c = b.next()) if (c = a.h.get(c.value), c.type !== Cc.Na && (c = c.stream) && c.fullMimeTypes && c.fullMimeTypes.size > 1) {
              a = /* @__PURE__ */ new Set();
              b = t(c.fullMimeTypes);
              for (c = b.next(); !c.done; c = b.next()) a.add(Me(c.value));
              return a.size > 1;
            }
          }
          return false;
        }
        function Pm(a) {
          a.G.Qa();
          Tm(a) && (a.G.D(a.g.video, "waiting", function() {
            return Um(a);
          }), a.G.D(a.g.video, "timeupdate", function() {
            return Um(a);
          }));
        }
        function Um(a) {
          if (Tm(a)) {
            a.K.stop();
            var b = a.g.nc(), c = a.h.get("video") || a.h.get("audio");
            c && (c = c.pb) && c.g !== null && (b = c.g - b, b < 0 || b > 1 || (a.I = c.g + 0.1, a.K.ia(b)));
          }
        }
        function cn(a, b, c) {
          if (b.type === Ac) return false;
          var d = b.pb;
          if (!d) return false;
          var e = c.ba;
          c = d.g !== e.g;
          a.i.crossBoundaryStrategy === "reset_to_encrypted" && (d.encrypted || e.encrypted || (c = false), d.encrypted && (a.i.crossBoundaryStrategy = "keep"));
          a.i.crossBoundaryStrategy === "RESET_ON_ENCRYPTION_CHANGE" && d.encrypted == e.encrypted && (c = false);
          if (a.i.crossBoundaryStrategy === "keep" && d.mimeType && e.mimeType) {
            var f = Ne(Re(d.mimeType)), g = Ne(Re(d.mimeType));
            d.mimeType == e.mimeType && f == g && (c = false);
          }
          c && (a.J || b.bd) && (a.J = false, an(a, true).then(function() {
            var h = (/* @__PURE__ */ new Map()).set("oldEncrypted", d.encrypted).set("newEncrypted", e.encrypted);
            a.g.onEvent(new V("boundarycrossed", h));
          }));
          return c;
        }
        function Vm(a, b) {
          function c(f) {
            if (f.fullMimeTypes && f.fullMimeTypes.size > 1 && a.h.has(f.type)) {
              var g = a.h.get(f.type), h = Jk(a.g.Z, g.type), k2 = a.g.nc();
              (g = bn(a, g, k2, h)) && g.codecs && g.mimeType && (f.codecs = g.codecs, f.mimeType = g.mimeType);
            }
          }
          b = b === void 0 ? false : b;
          var d = /* @__PURE__ */ new Map(), e = a.o.audio;
          e && (c(e), d.set("audio", e));
          if (e = a.o.video) c(e), d.set("video", e);
          b && a.B && d.set(Ac, a.B);
          return d;
        }
        ;
        function on() {
        }
        function pn(a, b, c, d, e) {
          var f = e in d;
          var g = f ? c.constructor == Object && Object.keys(d).length == 0 : c.constructor == Object && Object.keys(c).length == 0;
          var h = f || g, k2 = true, l;
          for (l in b) {
            var m = e + "." + l, n = f ? d[e] : c[l];
            h || l in c ? b[l] === void 0 ? n === void 0 || h ? delete a[l] : a[l] = jd(n) : g ? a[l] = b[l] : n.constructor == Object && b[l] && b[l].constructor == Object ? (a[l] || (a[l] = jd(n)), m = pn(a[l], b[l], n, d, m), k2 = k2 && m) : typeof b[l] != typeof n || b[l] == null || typeof b[l] != "function" && b[l].constructor != n.constructor ? (Za("Invalid config, wrong type for " + m), k2 = false) : typeof c[l] == "function" && c[l].length != b[l].length ? ($a("Unexpected number of arguments for " + m), a[l] = b[l]) : a[l] = Array.isArray(a[l]) ? b[l].slice() : b[l] : (Za("Invalid config, unrecognized key " + m), k2 = false);
          }
          return k2;
        }
        function qn(a, b) {
          for (var c = {}, d = c, e = 0, f = 0; ; ) {
            e = a.indexOf(".", e);
            if (e < 0) break;
            if (e == 0 || a[e - 1] != "\\") f = a.substring(f, e).replace(/\\\./g, "."), d[f] = {}, d = d[f], f = e + 1;
            e += 1;
          }
          d[a.substring(f).replace(/\\\./g, ".")] = b;
          return c;
        }
        function rn(a, b) {
          return a && b;
        }
        function sn(a, b) {
          function c(f) {
            for (var g = t(Object.keys(f)), h = g.next(); !h.done; h = g.next()) if (h = h.value, !(f[h] instanceof HTMLElement)) if (e(f[h]) && Object.keys(f[h]).length === 0) delete f[h];
            else {
              var k2 = f[h];
              Array.isArray(k2) && k2.length === 0 ? delete f[h] : typeof f[h] == "function" ? delete f[h] : e(f[h]) && (c(f[h]), Object.keys(f[h]).length === 0 && delete f[h]);
            }
          }
          function d(f, g) {
            return Object.keys(f).reduce(function(h, k2) {
              var l = f[k2];
              if (g.hasOwnProperty(k2)) if (l instanceof HTMLElement && g[k2] instanceof HTMLElement) l.isEqualNode(g[k2]) || (h[k2] = l);
              else if (e(l) && e(g[k2])) {
                if (l = d(l, g[k2]), Object.keys(l).length > 0 || !e(l)) h[k2] = l;
              } else Array.isArray(l) && Array.isArray(g[k2]) ? hb(l, g[k2]) || (h[k2] = l) : Number.isNaN(l) && Number.isNaN(g[k2]) || l !== g[k2] && (h[k2] = l);
              else h[k2] = l;
              return h;
            }, {});
          }
          function e(f) {
            return f && typeof f === "object" && !Array.isArray(f);
          }
          a = d(a, b);
          c(a);
          return a;
        }
        S("shaka.util.ConfigUtils", on);
        on.getDifferenceFromConfigObjects = sn;
        on.convertToConfigObject = qn;
        on.mergeConfigObjects = pn;
        S("shaka.config.RepeatMode", { OFF: 0, ALL: 1, SINGLE: 2 });
        function tn() {
        }
        function un(a) {
          a = fc(a);
          return new Cb(a).Eb;
        }
        function vn(a, b, c) {
          function d(h) {
            $b(f).setUint32(g, h.byteLength, true);
            g += 4;
            f.set(Vb(h), g);
            g += h.byteLength;
          }
          if (!c || !c.byteLength) throw new U(2, 6, 6015);
          var e;
          typeof b == "string" ? e = ic(b, true) : e = b;
          a = fc(a);
          a = ic(a, true);
          var f = new Uint8Array(12 + a.byteLength + e.byteLength + c.byteLength), g = 0;
          d(a);
          d(e);
          d(c);
          return f;
        }
        function wn(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = fc(a).split("skd://").pop();
          return vn(a, c, b);
        }
        function xn(a, b) {
          a === 2 && (a = b.drmInfo) && wg(a.keySystem) && (b.headers["Content-Type"] = "application/octet-stream");
        }
        S("shaka.drm.FairPlay", tn);
        tn.commonFairPlayResponse = function(a, b) {
          if (a === 2 && (a = b.originalRequest.drmInfo) && wg(a.keySystem)) {
            try {
              var c = cc(b.data);
            } catch (e) {
              return;
            }
            a = false;
            c = c.trim();
            c.substr(0, 5) === "<ckc>" && c.substr(-6) === "</ckc>" && (c = c.slice(5, -6), a = true);
            if (!a) try {
              var d = JSON.parse(c);
              d.ckc && (c = d.ckc, a = true);
              d.CkcMessage && (c = d.CkcMessage, a = true);
              d.License && (c = d.License, a = true);
            } catch (e) {
            }
            a && (b.data = Xb(oc(c)));
          }
        };
        tn.muxFairPlayRequest = function(a, b) {
          xn(a, b);
        };
        tn.expressplayFairPlayRequest = function(a, b) {
          if (a === 2) {
            var c = b.drmInfo;
            c && wg(c.keySystem) && xn(a, b);
          }
        };
        tn.conaxFairPlayRequest = function(a, b) {
          xn(a, b);
        };
        tn.ezdrmFairPlayRequest = function(a, b) {
          xn(a, b);
        };
        tn.verimatrixFairPlayRequest = function(a, b) {
          a === 2 && (a = b.drmInfo) && wg(a.keySystem) && (a = Vb(b.body), a = nc(a), b.headers["Content-Type"] = "application/x-www-form-urlencoded", b.body = hc("spc=" + a));
        };
        tn.muxInitDataTransform = function(a, b, c) {
          return wn(a, b, c);
        };
        tn.expressplayInitDataTransform = function(a, b, c) {
          return wn(a, b, c);
        };
        tn.conaxInitDataTransform = function(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = fc(a).split("skd://").pop().split("?").shift();
          c = window2.atob(c);
          var d = new ArrayBuffer(c.length * 2);
          d = Zb(d);
          for (var e = 0, f = c.length; e < f; e++) d[e] = c.charCodeAt(e);
          return vn(a, d, b);
        };
        tn.ezdrmInitDataTransform = function(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = fc(a).split(";").pop();
          return vn(a, c, b);
        };
        tn.verimatrixInitDataTransform = function(a, b, c) {
          return wn(a, b, c);
        };
        tn.initDataTransform = vn;
        tn.defaultGetContentId = un;
        tn.isFairPlaySupported = function() {
          var a;
          return Q(function(b) {
            if (b.g == 1) return a = { initDataTypes: ["cenc", "sinf", "skd"], videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }] }, ra(b, 2), F(b, navigator.requestMediaKeySystemAccess("com.apple.fps", [a]), 4);
            if (b.g != 2) return b.return(true);
            Aa(b);
            return b.return(false);
          });
        };
        function yn(a, b, c) {
          c = c === void 0 ? true : c;
          this.h = a;
          this.g = /* @__PURE__ */ new Set([a]);
          b = b || [];
          a = t(b);
          for (b = a.next(); !b.done; b = a.next()) this.add(b.value, c);
        }
        yn.prototype.add = function(a, b) {
          var c = this.h;
          b = b === void 0 ? true : b;
          var d;
          if (!(d = !!c.audio != !!a.audio || !!c.video != !!a.video || c.language != a.language) && (d = c.audio && a.audio)) {
            d = c.audio;
            var e = a.audio;
            d = !(!((!d.channelsCount || !e.channelsCount || d.channelsCount > 2 || e.channelsCount > 2) && d.channelsCount != e.channelsCount || d.spatialAudio !== e.spatialAudio || b && !zn(d, e)) && hb(d.roles, e.roles) && d.groupId === e.groupId);
          }
          !d && (d = c.video && a.video) && (c = c.video, d = a.video, d = !((!b || zn(c, d)) && hb(c.roles, d.roles)));
          return d ? false : (this.g.add(a), true);
        };
        yn.prototype.values = function() {
          return this.g.values();
        };
        function zn(a, b) {
          if (a.mimeType != b.mimeType) return false;
          a = a.codecs.split(",").map(function(c) {
            return Pe(c);
          });
          b = b.codecs.split(",").map(function(c) {
            return Pe(c);
          });
          return hb(a, b);
        }
        S("shaka.media.AdaptationSet", yn);
        function An() {
          this.h = this.g = null;
        }
        An.prototype.configure = function(a) {
          this.g = a;
        };
        An.prototype.getConfiguration = function() {
          return this.g;
        };
        An.prototype.create = function(a) {
          var b;
          if (this.g.language) {
            var c = Bn(a, this.g.language);
            c.length && (b = c);
          }
          b || (b = a.filter(function(f) {
            return f.primary;
          }), b = b.length ? b : a);
          a = Cn(b, this.g.role);
          a.length && (b = a);
          a = Dn(b, this.g.videoRole);
          a.length && (b = a);
          this.g.videoLayout && (a = En(b, this.g.videoLayout), a.length && (b = a));
          this.g.hdrLevel && (a = Fn(b, this.g.hdrLevel), a.length && (b = a));
          var d = [this.g.channelCount, this.g.preferredAudioChannelCount];
          a = d.filter(function(f, g) {
            return f && d.indexOf(f) === g;
          });
          if (a.length) {
            for (a = t(a), c = a.next(); !c.done; c = a.next()) if (c = Gn(b, c.value), c.length) {
              b = c;
              break;
            }
          }
          this.g.audioLabel && (a = Hn(b, this.g.audioLabel), a.length && (b = a));
          this.g.videoLabel && (a = In(b, this.g.videoLabel), a.length && (b = a));
          a = Jn(b, this.g.spatialAudio);
          a.length && (b = a);
          var e = [this.g.audioCodec, this.g.activeAudioCodec].concat(x(this.g.preferredAudioCodecs));
          a = e.filter(function(f, g) {
            return f && e.indexOf(f) === g;
          });
          if (a.length) {
            for (a = t(a), c = a.next(); !c.done; c = a.next()) if (c = Kn(b, c.value), c.length) {
              b = c;
              break;
            }
          }
          a = rb();
          a = this.g.codecSwitchingStrategy == "smooth" && a.Bb();
          return this.h = new yn(b[0], b, !a);
        };
        An.prototype.getLastAdaptationSet = function() {
          return this.h;
        };
        function Bn(a, b) {
          b = of(b);
          var c = vf(b, a.map(function(d) {
            return uf(d);
          }));
          return c ? a.filter(function(d) {
            return c == uf(d);
          }) : [];
        }
        function Cn(a, b) {
          return a.filter(function(c) {
            return c.audio ? b ? c.audio.roles.includes(b) : c.audio.roles.length == 0 : false;
          });
        }
        function Dn(a, b) {
          return a.filter(function(c) {
            return c.video ? b ? c.video.roles.includes(b) : c.video.roles.length == 0 : false;
          });
        }
        function Hn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.label ? c.audio.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function In(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.label ? c.video.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function Gn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.channelsCount && c.audio.channelsCount > b ? false : true;
          }).sort(function(c, d) {
            return c.audio || d.audio ? c.audio ? d.audio ? (d.audio.channelsCount || 0) - (c.audio.channelsCount || 0) : 1 : -1 : 0;
          });
        }
        function Fn(a, b) {
          if (b == "AUTO") {
            var c = a.some(function(d) {
              return d.video && d.video.hdr && d.video.hdr == "HLG" ? true : false;
            });
            b = rb().sd(c);
          }
          return a.filter(function(d) {
            return d.video && d.video.hdr && d.video.hdr != b ? false : true;
          });
        }
        function En(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.videoLayout && c.video.videoLayout != b ? false : true;
          });
        }
        function Jn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.spatialAudio != b ? false : true;
          });
        }
        function Kn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.codecs != b ? false : true;
          });
        }
        ;
        function Ln() {
        }
        function Mn() {
          var a = Infinity, b = rb();
          navigator.connection && navigator.connection.saveData && (a = 360);
          var c = {
            retryParameters: Ag(),
            servers: {},
            clearKeys: {},
            advanced: {},
            delayLicenseRequestUntilPlayed: false,
            persistentSessionOnlinePlayback: false,
            persistentSessionsMetadata: [],
            initDataTransform: function(h, k2, l) {
              "apple" === window2.shakaMediaKeysPolyfill && k2 == "skd" && (k2 = l.serverCertificate, l = un(h), h = vn(h, l, k2));
              return h;
            },
            logLicenseExchange: false,
            updateExpirationTime: 1,
            preferredKeySystems: [],
            keySystemsMapping: {},
            parseInbandPsshEnabled: false,
            minHdcpVersion: "",
            ignoreDuplicateInitData: true,
            defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
            defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE"
          }, d = "reload";
          b.Bb() && (d = "smooth");
          var e = {
            retryParameters: Ag(),
            availabilityWindowOverride: NaN,
            disableAudio: false,
            disableVideo: false,
            disableText: false,
            disableThumbnails: false,
            disableIFrames: false,
            defaultPresentationDelay: 0,
            segmentRelativeVttTiming: false,
            raiseFatalErrorOnManifestUpdateRequestFailure: false,
            continueLoadingWhenPaused: true,
            ignoreSupplementalCodecs: false,
            updatePeriod: -1,
            ignoreDrmInfo: false,
            enableAudioGroups: true,
            dash: { clockSyncUri: "", disableXlinkProcessing: true, xlinkFailGracefully: false, ignoreMinBufferTime: false, autoCorrectDrift: true, initialSegmentLimit: 1e3, ignoreSuggestedPresentationDelay: false, ignoreEmptyAdaptationSet: false, ignoreMaxSegmentDuration: false, keySystemsByURI: {
              "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
              "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
              "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
              "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
              "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay"
            }, manifestPreprocessor: Nn, manifestPreprocessorTXml: On, sequenceMode: false, useStreamOnceInPeriodFlattening: false, enableFastSwitching: true },
            hls: {
              ignoreTextStreamFailures: false,
              ignoreImageStreamFailures: false,
              defaultAudioCodec: "mp4a.40.2",
              defaultVideoCodec: "avc1.42E01E",
              ignoreManifestProgramDateTime: false,
              ignoreManifestProgramDateTimeForTypes: [],
              mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
              liveSegmentsDelay: 3,
              sequenceMode: b.fd(),
              ignoreManifestTimestampsInSegmentsMode: false,
              disableCodecGuessing: false,
              disableClosedCaptionsDetection: false,
              allowLowLatencyByteRangeOptimization: true,
              allowRangeRequestsToGuessMimeType: false
            },
            mss: { manifestPreprocessor: Nn, manifestPreprocessorTXml: On, sequenceMode: false, keySystemsBySystemId: { "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready", "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready" } }
          }, f = { trackSelectionCallback: function(h) {
            return Q(function(k2) {
              return k2.return(h);
            });
          }, downloadSizeCallback: function(h) {
            var k2;
            return Q(function(l) {
              if (l.g == 1) return navigator.storage && navigator.storage.estimate ? F(l, navigator.storage.estimate(), 3) : l.return(true);
              k2 = l.h;
              return l.return(k2.usage + h < k2.quota * 0.95);
            });
          }, progressCallback: function(h, k2) {
            return rn([h, k2]);
          }, usePersistentLicense: true, numberOfParallelDownloads: 5 }, g = {
            drm: c,
            manifest: e,
            streaming: {
              retryParameters: Ag(),
              failureCallback: function(h) {
                return rn([h]);
              },
              rebufferingGoal: 0,
              bufferingGoal: 10,
              bufferBehind: 30,
              evictionGoal: 1,
              ignoreTextStreamFailures: false,
              alwaysStreamText: false,
              startAtSegmentBoundary: false,
              gapDetectionThreshold: 0.5,
              gapPadding: 0,
              gapJumpTimerTime: 0.25,
              durationBackoff: 1,
              safeSeekOffset: 5,
              safeSeekEndOffset: 0,
              stallEnabled: true,
              stallThreshold: 1,
              stallSkip: 0.1,
              useNativeHlsForFairPlay: true,
              inaccurateManifestTolerance: 2,
              lowLatencyMode: true,
              preferNativeDash: false,
              preferNativeHls: false,
              updateIntervalSeconds: 1,
              observeQualityChanges: false,
              maxDisabledTime: 30,
              segmentPrefetchLimit: 1,
              prefetchAudioLanguages: [],
              disableAudioPrefetch: false,
              disableTextPrefetch: false,
              disableVideoPrefetch: false,
              liveSync: { enabled: false, targetLatency: 0.5, targetLatencyTolerance: 0.5, maxPlaybackRate: 1.1, minPlaybackRate: 0.95, panicMode: false, panicThreshold: 60, dynamicTargetLatency: { enabled: false, stabilityThreshold: 60, rebufferIncrement: 0.5, maxAttempts: 10, maxLatency: 4, minLatency: 1 } },
              allowMediaSourceRecoveries: true,
              minTimeBetweenRecoveries: 5,
              vodDynamicPlaybackRate: false,
              vodDynamicPlaybackRateLowBufferRate: 0.95,
              vodDynamicPlaybackRateBufferRatio: 0.5,
              preloadNextUrlWindow: 30,
              loadTimeout: 30,
              clearDecodingCache: false,
              dontChooseCodecs: false,
              shouldFixTimestampOffset: false,
              avoidEvictionOnQuotaExceededError: false,
              crossBoundaryStrategy: "keep",
              returnToEndOfLiveWindowWhenOutside: false
            },
            networking: { forceHTTP: false, forceHTTPS: false, minBytesForProgressEvents: 16e3 },
            mediaSource: {
              codecSwitchingStrategy: d,
              addExtraFeaturesToSourceBuffer: function(h) {
                return rn([h], "");
              },
              forceTransmux: false,
              insertFakeEncryptionInInit: true,
              correctEc3Enca: false,
              modifyCueCallback: function(h, k2, l) {
                return rn([h, k2, l]);
              },
              dispatchAllEmsgBoxes: false,
              useSourceElements: true,
              durationReductionEmitsUpdateEnd: true
            },
            offline: f,
            abrFactory: function() {
              return new ng();
            },
            adaptationSetCriteriaFactory: function() {
              return new (Function.prototype.bind.apply(An, [null].concat(x(Na.apply(0, arguments)))))();
            },
            abr: { enabled: true, useNetworkInformation: true, defaultBandwidthEstimate: 1e6, switchInterval: 8, bandwidthUpgradeTarget: 0.85, bandwidthDowngradeTarget: 0.95, restrictions: {
              minWidth: 0,
              maxWidth: Infinity,
              minHeight: 0,
              maxHeight: a,
              minPixels: 0,
              maxPixels: Infinity,
              minFrameRate: 0,
              maxFrameRate: Infinity,
              minBandwidth: 0,
              maxBandwidth: Infinity,
              minChannelsCount: 0,
              maxChannelsCount: Infinity
            }, advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 }, restrictToElementSize: false, restrictToScreenSize: false, ignoreDevicePixelRatio: false, clearBufferSwitch: false, safeMarginSwitch: 0, cacheLoadThreshold: 5, minTimeToSwitch: 0, preferNetworkInformationBandwidth: false, removeLatencyFromFirstPacketTime: true },
            autoShowText: 3,
            preferredAudioLanguage: "",
            preferredAudioLabel: "",
            preferredTextLanguage: "",
            preferredAudioRole: "",
            preferredVideoRole: "",
            preferredTextRole: "",
            preferredAudioChannelCount: 2,
            preferredVideoHdrLevel: "AUTO",
            preferredVideoLayout: "",
            preferredVideoLabel: "",
            preferredVideoCodecs: [],
            preferredAudioCodecs: [],
            preferredTextFormats: [],
            preferForcedSubs: false,
            preferSpatialAudio: false,
            preferredDecodingAttributes: [],
            restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: Infinity, minPixels: 0, maxPixels: Infinity, minFrameRate: 0, maxFrameRate: Infinity, minBandwidth: 0, maxBandwidth: Infinity, minChannelsCount: 0, maxChannelsCount: Infinity },
            playRangeStart: 0,
            playRangeEnd: Infinity,
            textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
            textDisplayFactory: function() {
              return null;
            },
            cmcd: { enabled: false, sessionId: "", contentId: "", rtpSafetyFactor: 5, useHeaders: false, includeKeys: [], version: 1, targets: [] },
            cmsd: { enabled: true, applyMaximumSuggestedBitrate: true, estimatedThroughputWeightRatio: 0.5 },
            lcevc: { enabled: false, dynamicPerformanceScaling: true, logLevel: 0, drawLogo: false, poster: true },
            ads: {
              customPlayheadTracker: false,
              skipPlayDetection: false,
              supportsMultipleMediaElements: true,
              disableHLSInterstitial: false,
              disableDASHInterstitial: false,
              allowPreloadOnDomElements: true,
              allowStartInMiddleOfInterstitial: true
            },
            ignoreHardwareResolution: false,
            queue: { preloadNextUrlWindow: Infinity, preloadPrevItem: true, repeatMode: 0 }
          };
          f.trackSelectionCallback = function(h) {
            return Q(function(k2) {
              return k2.return(Pn(h, g.preferredAudioLanguage, g.preferredVideoHdrLevel));
            });
          };
          return b.Wa(g);
        }
        function Qn() {
          return { streaming: { inaccurateManifestTolerance: 0, segmentPrefetchLimit: 2, updateIntervalSeconds: 0.1, maxDisabledTime: 1, retryParameters: { baseDelay: 100 } }, manifest: { dash: { autoCorrectDrift: false }, retryParameters: { baseDelay: 100 } }, drm: { retryParameters: { baseDelay: 100 } } };
        }
        function Rn(a, b, c) {
          var d = { ".drm.keySystemsMapping": "", ".drm.servers": "", ".drm.clearKeys": "", ".drm.advanced": { distinctiveIdentifierRequired: false, persistentStateRequired: false, videoRobustness: [], audioRobustness: [], sessionType: "", serverCertificate: new Uint8Array(0), serverCertificateUri: "", individualizationServer: "", headers: {} } };
          return pn(a, b, c || Mn(), d, "");
        }
        function Pn(a, b, c) {
          var d = c;
          d == "AUTO" && (c = a.some(function(h) {
            return h.hdr && h.hdr == "HLG" ? true : false;
          }), d = rb().sd(c));
          var e = a.filter(function(h) {
            return h.type != "variant" || h.hdr && h.hdr != d ? false : true;
          });
          c = [];
          var f = vf(b, e.map(function(h) {
            return h.language;
          }));
          f && (c = e.filter(function(h) {
            return of(h.language) == f;
          }));
          c.length == 0 && (c = e.filter(function(h) {
            return h.primary;
          }));
          c.length == 0 && (e.map(function(h) {
            return h.language;
          }), c = e);
          var g = c.filter(function(h) {
            return h.height && h.height <= 480;
          });
          g.length && (g.sort(function(h, k2) {
            return k2.height - h.height;
          }), c = g.filter(function(h) {
            return h.height == g[0].height;
          }));
          b = [];
          c.length && (e = Math.floor(c.length / 2), c.sort(function(h, k2) {
            return h.bandwidth - k2.bandwidth;
          }), b.push(c[e]));
          a = t(a);
          for (c = a.next(); !c.done; c = a.next()) c = c.value, c.type != Ac && c.type != "image" || b.push(c);
          return b;
        }
        function Nn(a) {
          return rn([a], a);
        }
        function On(a) {
          return rn([a], a);
        }
        S("shaka.util.PlayerConfiguration", Ln);
        Ln.mergeConfigObjects = Rn;
        Ln.createDefaultForLL = Qn;
        Ln.createDefault = Mn;
        function Sn() {
          this.g = null;
          this.h = [];
        }
        function Tn(a, b) {
          var c = 0;
          a.g && a.g.state == b && (c += a.g.duration);
          a = t(a.h);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, c += d.state == b ? d.duration : 0;
          return c;
        }
        function Un(a) {
          function b(f) {
            return { timestamp: f.timestamp, state: f.state, duration: f.duration };
          }
          for (var c = [], d = t(a.h), e = d.next(); !e.done; e = d.next()) c.push(b(e.value));
          a.g && c.push(b(a.g));
          return c;
        }
        ;
        function Vn() {
          this.i = this.h = null;
          this.g = [];
        }
        function Wn(a, b, c) {
          a.i != b && (a.i = b, a.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "text", fromAdaptation: c, bandwidth: null }));
        }
        ;
        function Xn() {
          this.C = this.X = NaN;
          this.l = "";
          this.j = this.pi = this.u = this.B = this.K = this.F = this.o = this.m = this.J = this.G = this.i = this.T = this.V = this.N = this.O = this.R = NaN;
          this.M = 0;
          this.H = this.I = NaN;
          this.g = new Sn();
          this.h = new Vn();
        }
        function Yn(a, b, c) {
          a.R = b;
          a.O = c;
        }
        function Zn(a, b, c) {
          a.X = b;
          a.C = c;
        }
        function $n(a, b) {
          a.i = isNaN(a.i) ? b : Math.max(a.i, b);
        }
        function ao(a, b) {
          a.j = isNaN(a.j) ? b : a.j + b;
        }
        function bo(a) {
          var b = a.X, c = a.C, d = a.l, e = a.B, f = a.O, g = a.R, h = a.N, k2 = a.V, l = a.T, m = a.u, n = a.i, q = a.G, r = a.J, u = a.m, v = Tn(a.g, "playing"), w = Tn(a.g, "paused"), z = Tn(a.g, "buffering"), y = a.o, B = a.F, C = a.K, H = a.pi, D = a.j, A = a.M, E = a.I, J = a.H, I = Un(a.g), K = [];
          a = t(a.h.g);
          for (var L = a.next(); !L.done; L = a.next()) L = L.value, K.push({ timestamp: L.timestamp, id: L.id, type: L.type, fromAdaptation: L.fromAdaptation, bandwidth: L.bandwidth });
          return {
            width: b,
            height: c,
            currentCodecs: d,
            streamBandwidth: e,
            decodedFrames: f,
            droppedFrames: g,
            corruptedFrames: h,
            stallsDetected: k2,
            gapsJumped: l,
            estimatedBandwidth: m,
            completionPercent: n,
            loadLatency: q,
            manifestTimeSeconds: r,
            drmTimeSeconds: u,
            playTime: v,
            pauseTime: w,
            bufferingTime: z,
            licenseTime: y,
            liveLatency: B,
            maxSegmentDuration: C,
            manifestSizeBytes: H,
            bytesDownloaded: D,
            nonFatalErrorCount: A,
            manifestPeriodCount: E,
            manifestGapCount: J,
            stateHistory: I,
            switchHistory: K
          };
        }
        ;
        function co(a, b, c, d) {
          Mg.call(this);
          this.N = a;
          this.V = b;
          this.Da = d.networkingEngine;
          this.o = c;
          this.C = null;
          this.ya = 0;
          this.Ta = d.md;
          this.G = d.tk;
          this.Ua = d.vk;
          this.g = d.config;
          this.m = this.H = this.h = null;
          this.oa = false;
          this.I = d.Gk;
          this.va = false;
          this.j = null;
          this.aa = false;
          this.u = null;
          this.M = /* @__PURE__ */ new Map();
          this.xa = false;
          this.Fa = d.Fk;
          this.X = new Xn();
          this.ma = new Cg();
          this.B = new Cg();
          this.O = null;
          this.l = false;
          this.$ = d.jj;
          this.T = this.i = null;
          this.R = false;
          this.K = [];
          this.J = [];
          this.F = true;
        }
        la(co, Mg);
        function eo(a, b, c) {
          (a = b ? a.J : a.K) ? a.push(c) : c();
        }
        function fo(a) {
          if (a.J) for (var b = t(a.J), c = b.next(); !c.done; c = b.next()) c = c.value, c();
          a.J = null;
        }
        function go(a, b) {
          a.O = b;
          a.R = true;
          if (a.K) {
            b = t(a.K);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c();
          }
          a.K = null;
        }
        p = co.prototype;
        p.getStartTime = function() {
          return this.o;
        };
        p.rd = function() {
          return this.N;
        };
        p.Hg = function() {
          return this.h;
        };
        function ho(a) {
          a.va = true;
          return a.I;
        }
        p.getStats = function() {
          return this.X;
        };
        function io(a) {
          a.aa = true;
          return a.j;
        }
        p.Rj = function() {
          return this.i ? Uf(this.i) : null;
        };
        p.Qj = function() {
          return this.T ? Vf(this.T) : null;
        };
        function jo(a) {
          a.xa = true;
          return a.M;
        }
        p.start = function() {
          var a = this;
          (function() {
            var b;
            return Q(function(c) {
              switch (c.g) {
                case 1:
                  return F(c, Promise.resolve(), 2);
                case 2:
                  return ra(c, 3), F(c, ko(a), 5);
                case 5:
                  lo(a);
                  if ("webkit" === window2.shakaMediaKeysPolyfill) {
                    c.A(6);
                    break;
                  }
                  return F(c, mo(a), 7);
                case 7:
                  lo(a);
                case 6:
                  return F(c, no(a), 8);
                case 8:
                  lo(a);
                  if (!a.$) {
                    c.A(9);
                    break;
                  }
                  return F(c, oo(a), 10);
                case 10:
                  lo(a);
                case 9:
                  if (!a.$ || !a.j) {
                    c.A(11);
                    break;
                  }
                  return F(c, hi(a.j), 12);
                case 12:
                  lo(a);
                case 11:
                  a.B.resolve();
                  ta(c, 0);
                  break;
                case 3:
                  b = Aa(c), b instanceof U && (b.code == 7001 || b.code == 7003) || a.B.reject(b), G(c);
              }
            });
          })();
        };
        p.dispatchEvent = function(a) {
          return this.O ? this.O.dispatchEvent(a) : Mg.prototype.dispatchEvent.call(this, a);
        };
        p.onError = function(a) {
          a.severity === 2 && (this.B.reject(a), this.destroy());
          var b = (/* @__PURE__ */ new Map()).set("detail", a);
          b = new V("error", b);
          this.dispatchEvent(b);
          b.defaultPrevented && (a.handled = true);
        };
        function lo(a) {
          if (a.l) throw new U(2, 7, 7003);
        }
        function po(a, b) {
          a.dispatchEvent(new V("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        function ko(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                po(a, "manifest-parser");
                a.m || (a.H = Oc(a.N, a.V), a.m = a.H(), a.m.configure(a.g.manifest, function() {
                  return a.F;
                }));
                b = Date.now() / 1e3;
                po(a, "manifest");
                if (a.h) {
                  h.A(2);
                  break;
                }
                return F(h, a.m.start(a.N, a.Ua), 3);
              case 3:
                return a.h = h.h, qo(a.h), F(h, ro(a), 2);
              case 2:
                return a.ma.resolve(), c = new V("manifestparsed", void 0), F(h, Promise.resolve(), 5);
              case 5:
                a.dispatchEvent(c);
                if (a.h.variants.length == 0) throw new U(2, 4, 4036);
                qo(a.h);
                d = ti(a.G, a.h);
                if (!d) {
                  h.A(6);
                  break;
                }
                e = new V("trackschanged", void 0);
                return F(h, Promise.resolve(), 7);
              case 7:
                lo(a), a.dispatchEvent(e);
              case 6:
                f = Date.now() / 1e3, g = f - b, a.X.J = g, G(h);
            }
          });
        }
        function mo(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (!a.h || a.j) return g.return();
                po(a, "drm-engine");
                a.ya = Date.now() / 1e3;
                a.j = a.Ta();
                a.G.h = a.j;
                a.j.configure(a.g.drm, function() {
                  return a.F;
                });
                c = gg(a.h.variants);
                d = true;
                a.h && a.h.presentationTimeline && (d = a.h.presentationTimeline.W());
                return F(g, Ih(a.j, c, a.h.offlineSessionIds, d), 2);
              case 2:
                lo(a);
                if (!b) {
                  g.A(3);
                  break;
                }
                return F(g, a.j.Vb(b), 4);
              case 4:
                lo(a);
              case 3:
                return F(g, ri(a.G, a.h), 5);
              case 5:
                e = g.h;
                if (!e) {
                  g.A(0);
                  break;
                }
                f = new V(
                  "trackschanged",
                  void 0
                );
                return F(g, Promise.resolve(), 7);
              case 7:
                a.dispatchEvent(f), G(g);
            }
          });
        }
        p.configure = function(a, b) {
          a = qn(a, b);
          Rn(this.g, a);
        };
        p.getConfiguration = function() {
          return jd(this.g);
        };
        function ro(a) {
          return Q(function(b) {
            a.C || (a.C = a.g.adaptationSetCriteriaFactory(), a.C.configure({
              language: a.g.preferredAudioLanguage,
              role: a.g.preferredAudioRole,
              videoRole: a.g.preferredVideoRole,
              channelCount: a.g.preferredAudioChannelCount,
              hdrLevel: a.g.preferredVideoHdrLevel,
              spatialAudio: a.g.preferSpatialAudio,
              videoLayout: a.g.preferredVideoLayout,
              audioLabel: a.g.preferredAudioLabel,
              videoLabel: a.g.preferredVideoLabel,
              codecSwitchingStrategy: a.g.mediaSource.codecSwitchingStrategy,
              audioCodec: "",
              activeAudioCodec: "",
              activeAudioChannelCount: 0,
              preferredAudioCodecs: a.g.preferredAudioCodecs,
              preferredAudioChannelCount: a.g.preferredAudioChannelCount
            }));
            if (a.i || !a.h.variants.length || a.h.variants.length != 1 && a.h.type != "HLS") return b.A(0);
            a.i = Go(a);
            return a.i ? F(b, Ho(a.i), 0) : b.A(0);
          });
        }
        function no(a) {
          return Q(function(b) {
            if (b.g == 1) return !a.i || a.h.variants.includes(a.i) ? b.A(0) : F(b, Io(a.i), 3);
            a.i = Go(a);
            return a.i ? F(b, Ho(a.i), 0) : b.A(0);
          });
        }
        function oo(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            !a.i && (b = Go(a)) && (a.i = b);
            if (!a.i) return g.A(0);
            c = a.h.presentationTimeline.W();
            d = [];
            e = a.i;
            e.video && d.push(Jo(a, e.video, c));
            e.audio && d.push(Jo(a, e.audio, c));
            (f = hg(a.h.textStreams, a.g.preferredTextLanguage, a.g.preferredTextRole, a.g.preferForcedSubs)[0] || null) && lg(e.audio, f, a.g) && (d.push(Jo(a, f, c)), a.T = f);
            return F(g, Promise.all(d), 0);
          });
        }
        function Go(a) {
          if (!a.u) {
            var b = a.g.abrFactory;
            a.u = b();
            a.u.configure(a.g.abr);
          }
          b = gg(a.h.variants);
          b = a.C.create(b);
          a.u.setVariants(Array.from(b.values()));
          return a.u.chooseVariant(true);
        }
        function Jo(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return d = a.g.streaming.segmentPrefetchLimit || 2, e = new em(d, b, function(l, m, n) {
              return Wm(l, m, n || null, a.g.streaming.retryParameters, a.Da, a.F);
            }, false), a.M.set(b.id, e), b.segmentIndex ? k2.A(2) : F(k2, b.createSegmentIndex(), 2);
            f = typeof a.o === "number" ? a.o : 0;
            g = b.segmentIndex.Xb(f);
            h = null;
            g && (h = g.current(), h || (h = g.next().value));
            h || (h = Xf(b.segmentIndex));
            return h ? c ? h.ba ? F(k2, hm(e, h.ba), 0) : k2.A(0) : F(k2, gm(e, h.startTime), 0) : k2.A(0);
          });
        }
        function Ho(a) {
          var b, c, d, e;
          return Q(function(f) {
            b = [];
            c = t([a.video, a.audio]);
            for (d = c.next(); !d.done; d = c.next()) (e = d.value) && !e.segmentIndex && b.push(e.createSegmentIndex());
            return b.length > 0 ? F(f, Promise.all(b), 0) : f.A(0);
          });
        }
        function Io(a) {
          var b, c, d, e;
          return Q(function(f) {
            b = [];
            c = t([a.video, a.audio]);
            for (d = c.next(); !d.done; d = c.next()) (e = d.value) && e.segmentIndex && e.closeSegmentIndex && b.push(e.closeSegmentIndex());
            return b.length > 0 ? F(f, Promise.all(b), 0) : f.A(0);
          });
        }
        p.kl = function() {
          return this.B;
        };
        p.destroy = function() {
          var a = this, b, c, d;
          return Q(function(e) {
            if (e.g == 1) return a.l = true, !a.m || a.oa ? e.A(2) : F(e, a.m.stop(), 2);
            if (e.g != 4) return a.u && a.u.release(), a.I && !a.va && a.I.release(), !a.j || a.aa ? e.A(4) : F(e, a.j.destroy(), 4);
            if (a.M.size > 0 && !a.xa) for (b = t(a.M.values()), c = b.next(); !c.done; c = b.next()) d = c.value, nm(d);
            G(e);
          });
        };
        function qo(a) {
          function b(c) {
            return c.video && c.audio || c.video && c.video.codecs.includes(",");
          }
          a.variants.some(b) && (a.variants = a.variants.filter(b));
        }
        S("shaka.media.PreloadManager", co);
        co.prototype.destroy = co.prototype.destroy;
        co.prototype.waitForFinish = co.prototype.kl;
        co.prototype.getPrefetchedTextTrack = co.prototype.Qj;
        co.prototype.getPrefetchedVariantTrack = co.prototype.Rj;
        function Ko(a, b) {
          Mg.call(this);
          var c = this;
          this.i = a;
          this.l = b;
          this.g = /* @__PURE__ */ new Map();
          this.m = [{ kd: null, jd: Lo, Uc: function(d, e) {
            return Mo(c, "enter", d, e);
          } }, { kd: No, jd: Lo, Uc: function(d, e) {
            return Mo(c, "enter", d, e);
          } }, { kd: Oo, jd: Lo, Uc: function(d, e) {
            return Mo(c, "enter", d, e);
          } }, { kd: Lo, jd: No, Uc: function(d, e) {
            return Mo(c, "exit", d, e);
          } }, { kd: Lo, jd: Oo, Uc: function(d, e) {
            return Mo(c, "exit", d, e);
          } }, { kd: No, jd: Oo, Uc: function(d, e) {
            e ? Mo(c, "skip", d, e) : (Mo(c, "enter", d, e), Mo(c, "exit", d, e));
          } }, { kd: Oo, jd: No, Uc: function(d, e) {
            return Mo(
              c,
              "skip",
              d,
              e
            );
          } }];
          this.h = new kb();
          this.h.D(this.i, "regionremove", function(d) {
            c.g.delete(d.region);
          });
        }
        la(Ko, Mg);
        Ko.prototype.release = function() {
          this.i = null;
          this.g.clear();
          this.h.release();
          this.h = null;
          Mg.prototype.release.call(this);
        };
        Ko.prototype.j = function(a, b) {
          if (!this.l || a != 0) {
            this.l = false;
            for (var c = t(this.i.h.values()), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = this.g.get(d), f = a < d.startTime ? No : a > d.endTime ? Oo : Lo;
              this.g.set(d, f);
              for (var g = t(this.m), h = g.next(); !h.done; h = g.next()) h = h.value, h.kd == e && h.jd == f && h.Uc(d, b);
            }
          }
        };
        function Mo(a, b, c, d) {
          b = new V(b, /* @__PURE__ */ new Map([["region", c], ["seeking", d]]));
          a.dispatchEvent(b);
        }
        var No = 1, Lo = 2, Oo = 3;
        function Po(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                d = Qo(a);
                if (e = Ro.get(d)) return m.return(e);
                f = 0;
                g = Ug([a], c);
                ra(m, 2);
                g.method = "HEAD";
                return F(m, b.request(f, g).promise, 4);
              case 4:
                h = m.h;
                e = h.headers["content-type"];
                ta(m, 3);
                break;
              case 2:
                k2 = Aa(m);
                if (!k2 || k2.code != 1002 && k2.code != 1001) {
                  m.A(3);
                  break;
                }
                g.method = "GET";
                return F(m, b.request(f, g).promise, 6);
              case 6:
                l = m.h, e = l.headers["content-type"];
              case 3:
                return m.return(e ? e.toLowerCase().split(";").shift() : "");
            }
          });
        }
        function Qo(a) {
          a = new Cb(a).Tb.split("/").pop().split(".");
          return a.length == 1 ? "" : a.pop().toLowerCase();
        }
        var Ro = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("m4v", "video/mp4").set("m4a", "audio/mp4").set("webm", "video/webm").set("weba", "audio/webm").set("mkv", "video/webm").set("ts", "video/mp2t").set("ogv", "video/ogg").set("ogg", "audio/ogg").set("mpg", "video/mpeg").set("mpeg", "video/mpeg").set("mov", "video/quicktime").set("m3u8", "application/x-mpegurl").set("mpd", "application/dash+xml").set("ism", "application/vnd.ms-sstr+xml").set("mp3", "audio/mpeg").set("aac", "audio/aac").set("flac", "audio/flac").set("wav", "audio/wav").set(
          "sbv",
          "text/x-subviewer"
        ).set("srt", "text/srt").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml").set("lrc", "application/x-subtitle-lrc").set("ssa", "text/x-ssa").set("ass", "text/x-ssa").set("jpeg", "image/jpeg").set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif").set("html", "text/html").set("htm", "text/html");
        for (var So = {
          ach: "Lwo",
          ady: "",
          af: "Afrikaans",
          "af-NA": "Afrikaans (Namibia)",
          "af-ZA": "Afrikaans (South Africa)",
          ak: "Ti",
          ar: "",
          "ar-AR": "",
          "ar-MA": "",
          "ar-SA": " ()",
          "ay-BO": "Aymar aru",
          az: "Azrbaycan dili",
          "az-AZ": "Azrbaycan dili",
          "be-BY": "",
          bg: "",
          "bg-BG": "",
          bn: "",
          "bn-IN": " ()",
          "bn-BD": "()",
          "bs-BA": "Bosanski",
          ca: "Catal",
          "ca-ES": "Catal",
          cak: "Maya Kaqchikel",
          "ck-US": " (tsalagi)",
          cs: "etina",
          "cs-CZ": "etina",
          cy: "Cymraeg",
          "cy-GB": "Cymraeg",
          da: "Dansk",
          "da-DK": "Dansk",
          de: "Deutsch",
          "de-AT": "Deutsch (sterreich)",
          "de-DE": "Deutsch (Deutschland)",
          "de-CH": "Deutsch (Schweiz)",
          dsb: "Dolnoserbina",
          el: "",
          "el-GR": "",
          en: "English",
          "en-GB": "English (UK)",
          "en-AU": "English (Australia)",
          "en-CA": "English (Canada)",
          "en-IE": "English (Ireland)",
          "en-IN": "English (India)",
          "en-PI": "English (Pirate)",
          "en-UD": "English (Upside Down)",
          "en-US": "English (US)",
          "en-ZA": "English (South Africa)",
          "en@pirate": "English (Pirate)",
          eo: "Esperanto",
          "eo-EO": "Esperanto",
          es: "Espaol",
          "es-AR": "Espaol (Argentine)",
          "es-419": "Espaol (Latinoamrica)",
          "es-CL": "Espaol (Chile)",
          "es-CO": "Espaol (Colombia)",
          "es-EC": "Espaol (Ecuador)",
          "es-ES": "Espaol (Espaa)",
          "es-LA": "Espaol (Latinoamrica)",
          "es-NI": "Espaol (Nicaragua)",
          "es-MX": "Espaol (Mxico)",
          "es-US": "Espaol (Estados Unidos)",
          "es-VE": "Espaol (Venezuela)",
          et: "eesti keel",
          "et-EE": "Eesti (Estonia)",
          eu: "Euskara",
          "eu-ES": "Euskara",
          fa: "",
          "fa-IR": "",
          "fb-LT": "Leet Speak",
          ff: "Fulah",
          fi: "Suomi",
          "fi-FI": "Suomi",
          "fo-FO": "Froyskt",
          fr: "Franais",
          "fr-CA": "Franais (Canada)",
          "fr-FR": "Franais (France)",
          "fr-BE": "Franais (Belgique)",
          "fr-CH": "Franais (Suisse)",
          "fy-NL": "Frysk",
          ga: "Gaeilge",
          "ga-IE": "Gaeilge (Gaelic)",
          gl: "Galego",
          "gl-ES": "Galego",
          "gn-PY": "Avae'",
          "gu-IN": "",
          "gx-GR": " ",
          he: "",
          "he-IL": "",
          hi: "",
          "hi-IN": "",
          hr: "Hrvatski",
          "hr-HR": "Hrvatski",
          hsb: "Hornjoserbina",
          ht: "Kreyl",
          hu: "Magyar",
          "hu-HU": "Magyar",
          "hy-AM": "",
          id: "Bahasa Indonesia",
          "id-ID": "Bahasa Indonesia",
          is: "slenska",
          "is-IS": "slenska (Iceland)",
          it: "Italiano",
          "it-IT": "Italiano",
          ja: "",
          "ja-JP": "",
          "jv-ID": "Basa Jawa",
          "ka-GE": "",
          "kk-KZ": "",
          km: "",
          "km-KH": "",
          kab: "Taqbaylit",
          kn: "",
          "kn-IN": " (India)",
          ko: "",
          "ko-KR": " ()",
          ku: "Kurd",
          "ku-TR": "Kurd",
          la: "Latin",
          "la-VA": "Latin",
          lb: "Ltzebuergesch",
          "li-NL": "Lmbrgs",
          lt: "Lietuvi",
          "lt-LT": "Lietuvi",
          lv: "Latvieu",
          "lv-LV": "Latvieu",
          mai: ", ",
          "mg-MG": "Malagasy",
          mk: "",
          "mk-MK": " ()",
          ml: "",
          "ml-IN": "",
          "mn-MN": "",
          mr: "",
          "mr-IN": "",
          ms: "Bahasa Melayu",
          "ms-MY": "Bahasa Melayu",
          mt: "Malti",
          "mt-MT": "Malti",
          my: "",
          nb: "Norsk (bokml)",
          "nb-NO": "Norsk (bokml)",
          ne: "",
          "ne-NP": "",
          nl: "Nederlands",
          "nl-BE": "Nederlands (Belgi)",
          "nl-NL": "Nederlands (Nederland)",
          "nn-NO": "Norsk (nynorsk)",
          no: "Norsk",
          oc: "Occitan",
          "or-IN": "",
          pa: "",
          "pa-IN": " ( )",
          pl: "Polski",
          "pl-PL": "Polski",
          "ps-AF": "",
          pt: "Portugus",
          "pt-BR": "Portugus (Brasil)",
          "pt-PT": "Portugus (Portugal)",
          "qu-PE": "Qhichwa",
          "rm-CH": "Rumantsch",
          ro: "Romn",
          "ro-RO": "Romn",
          ru: "",
          "ru-RU": "",
          "sa-IN": "",
          "se-NO": "Davvismegiella",
          "si-LK": "",
          sk: "Slovenina",
          "sk-SK": "Slovenina (Slovakia)",
          sl: "Slovenina",
          "sl-SI": "Slovenina",
          "so-SO": "Soomaaliga",
          sq: "Shqip",
          "sq-AL": "Shqip",
          sr: "",
          "sr-RS": " (Serbia)",
          su: "Basa Sunda",
          sv: "Svenska",
          "sv-SE": "Svenska",
          sw: "Kiswahili",
          "sw-KE": "Kiswahili",
          ta: "",
          "ta-IN": "",
          te: "",
          "te-IN": "",
          tg: " ",
          "tg-TJ": "",
          th: "",
          "th-TH": " ()",
          tl: "Filipino",
          "tl-PH": "Filipino",
          tlh: "tlhIngan-Hol",
          tr: "Trke",
          "tr-TR": "Trke",
          "tt-RU": "",
          uk: "",
          "uk-UA": "",
          ur: "",
          "ur-PK": "",
          uz: "O'zbek",
          "uz-UZ": "O'zbek",
          vi: "Ting Vit",
          "vi-VN": "Ting Vit",
          "xh-ZA": "isiXhosa",
          yi: "",
          "yi-DE": " (German)",
          zh: "",
          "zh-HANS": "",
          "zh-HANT": "",
          "zh-CN": "",
          "zh-HK": "",
          "zh-SG": "",
          "zh-TW": "",
          "zu-ZA": "isiZulu"
        }, To = t(Object.keys(So)), Uo = To.next(); !Uo.done; Uo = To.next()) {
          var Vo = Uo.value;
          So[Vo.toLowerCase()] = So[Vo];
        }
        ;
        function Wo(a, b) {
          if (a.lineBreak) return "\n";
          if (a.nestedCues.length) return a.nestedCues.map(function(g) {
            return Wo(g, a);
          }).join("");
          if (!a.payload) return a.payload;
          var c = [], d = a.fontWeight >= se, e = a.fontStyle == te, f = a.textDecoration.includes(ue);
          d && c.push(["b"]);
          e && c.push(["i"]);
          f && c.push(["u"]);
          e = a.color;
          e == "" && b && (e = b.color);
          d = "";
          (e = Xo(e)) && (d += "." + e);
          e = a.backgroundColor;
          e == "" && b && (e = b.backgroundColor);
          (b = Xo(e)) && (d += ".bg_" + b);
          d && c.push(["c", d]);
          return c.reduceRight(function(g, h) {
            var k2 = t(h);
            h = k2.next().value;
            k2 = k2.next().value;
            return "<" + h + (k2 === void 0 ? "" : k2) + ">" + g + "</" + h + ">";
          }, a.payload);
        }
        function Xo(a) {
          a = a.toLowerCase();
          var b = a.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
          b ? a = "#" + (parseInt(b[1], 10) | 256).toString(16).slice(1) + (parseInt(b[2], 10) | 256).toString(16).slice(1) + (parseInt(b[3], 10) | 256).toString(16).slice(1) : a.startsWith("#") && a.length > 7 && (a = a.slice(0, 7));
          switch (a) {
            case "white":
            case "#fff":
            case "#ffffff":
              return "white";
            case "lime":
            case "#0f0":
            case "#00ff00":
              return "lime";
            case "cyan":
            case "#0ff":
            case "#00ffff":
              return "cyan";
            case "red":
            case "#f00":
            case "#ff0000":
              return "red";
            case "yellow":
            case "#ff0":
            case "#ffff00":
              return "yellow";
            case "magenta":
            case "#f0f":
            case "#ff00ff":
              return "magenta";
            case "blue":
            case "#00f":
            case "#0000ff":
              return "blue";
            case "black":
            case "#000":
            case "#000000":
              return "black";
          }
          return null;
        }
        function Yo(a, b) {
          var c = [];
          a = t(Zo(a));
          for (var d = a.next(); !d.done; d = a.next()) if (d = d.value, d.isContainer) c.push.apply(c, x(Yo(d.nestedCues, d)));
          else {
            var e = d.clone();
            e.nestedCues = [];
            e.payload = Wo(d, b);
            c.push(e);
          }
          return c;
        }
        function Zo(a) {
          var b = [];
          a = t(a);
          for (var c = a.next(), d = {}; !c.done; d = { ig: void 0 }, c = a.next()) d.ig = c.value, b.some(/* @__PURE__ */ (function(e) {
            return function(f) {
              return ge(e.ig, f);
            };
          })(d)) || b.push(d.ig);
          return b;
        }
        function $o(a) {
          function b(d) {
            for (var e = 5381, f = d.length; f; ) e = e * 33 ^ d.charCodeAt(--f);
            return (e >>> 0).toString();
          }
          if (a.startTime >= a.endTime) return null;
          var c = new VTTCue(a.startTime, a.endTime, a.payload);
          c.id = b(a.startTime.toString()) + b(a.endTime.toString()) + b(a.payload);
          c.lineAlign = a.lineAlign;
          c.positionAlign = a.positionAlign;
          a.size && (c.size = a.size);
          try {
            c.align = a.textAlign;
          } catch (d) {
          }
          a.textAlign == "center" && c.align != "center" && (c.align = "middle");
          a.writingMode == "vertical-lr" ? c.vertical = "lr" : a.writingMode == "vertical-rl" && (c.vertical = "rl");
          a.lineInterpretation == 1 && (c.snapToLines = false);
          a.line != null && (c.line = a.line);
          a.position != null && (c.position = a.position);
          return c;
        }
        function ap(a, b) {
          var c = Yo(b), d = [];
          b = a.cues ? Array.from(a.cues) : [];
          c = t(c);
          for (var e = c.next(), f = {}; !e.done; f = { vd: void 0 }, e = c.next()) f.vd = e.value, !b.some(/* @__PURE__ */ (function(g) {
            return function(h) {
              return h.startTime == g.vd.startTime && h.endTime == g.vd.endTime && h.text == g.vd.payload ? true : false;
            };
          })(f)) && f.vd.payload && (e = $o(f.vd)) && d.push(e);
          b = d.slice().sort(function(g, h) {
            return g.startTime != h.startTime ? g.startTime - h.startTime : g.endTime != h.endTime ? g.endTime - h.startTime : "line" in VTTCue.prototype ? d.indexOf(h) - d.indexOf(g) : d.indexOf(g) - d.indexOf(h);
          });
          b = t(b);
          for (c = b.next(); !c.done; c = b.next()) a.addCue(c.value);
        }
        function bp(a, b) {
          var c = false;
          a.mode === "disabled" && (c = true, a.mode = "hidden");
          for (var d = 0; d < a.cues.length; ) {
            var e = a.cues[d];
            b(e) ? a.removeCue(e) : d++;
          }
          c && (a.mode = "disabled");
        }
        ;
        function cp(a) {
          var b = this;
          this.i = a;
          this.l = new kb();
          this.j = null;
          this.h = /* @__PURE__ */ new Map();
          this.g = -1;
          this.u = false;
          this.o = null;
          this.C = function() {
            b.l.Ma(b.i, "textchanged", b.m);
            b.l.Ma(b.j.textTracks, "change", b.B);
            for (var c = t(b.h.values()), d = c.next(); !d.done; d = c.next()) d.value.remove();
            b.h.clear();
            b.g = -1;
            b.j = null;
          };
          this.m = function() {
            var c = /* @__PURE__ */ new Map(), d = b.i.Lc();
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) {
              e = e.value;
              if (b.h.has(e.id)) {
                var f = b.h.get(e.id);
                e.active || f.track.mode === "disabled" || (f.track.mode = "disabled");
                b.h.delete(e.id);
              } else {
                f = b.j.ownerDocument.createElement("track");
                f.kind = dp(e);
                var g = f, h = void 0;
                if (e.label) h = e.label;
                else if (e.language) if (e.language in So) h = So[e.language];
                else {
                  var k2 = tf(e.language);
                  k2 in So && (h = So[k2] + " (" + e.language + ")");
                }
                h || (h = e.originalTextId, e.language && e.language !== e.originalTextId && (h += " (" + e.language + ")"));
                g.label = h;
                e.language in So && (f.srclang = e.language);
                f.src = "data:,WEBVTT";
                f.track.mode = "disabled";
                b.j.appendChild(f);
              }
              c.set(e.id, f);
              e.active && (b.g = e.id);
            }
            d = t(b.h.values());
            for (e = d.next(); !e.done; e = d.next()) e.value.remove();
            b.g > -1 && (c.has(b.g) ? (d = c.get(b.g).track, d.mode === "disabled" && (d.mode = b.u ? "showing" : "hidden")) : b.g = -1);
            b.h = c;
          };
          this.B = function() {
            if (!b.o) {
              var c = b.j;
              b.o = new gf(function() {
                b.o = null;
                if (b.j === c) {
                  var d = -1, e = false;
                  if (b.h.has(b.g)) {
                    var f = b.h.get(b.g);
                    f.track.mode === "showing" ? (d = b.g, e = true) : f.track.mode === "hidden" && (d = b.g);
                  }
                  if (!e) for (e = t(b.h), f = e.next(); !f.done; f = e.next()) {
                    var g = t(f.value);
                    f = g.next().value;
                    g = g.next().value;
                    if (g.track.mode === "showing") {
                      d = f;
                      break;
                    } else d < 0 && g.track.mode === "hidden" && (d = f);
                  }
                  e = t(b.h);
                  for (f = e.next(); !f.done; f = e.next()) g = t(f.value), f = g.next().value, g = g.next().value, f !== d && g.track.mode !== "disabled" && (g.track.mode = "disabled");
                  b.g !== d && (b.g = d, d > -1 && b.i.mh({ id: d }));
                  b.i.rh(d > -1 && b.h.get(d).track.mode === "showing");
                }
              }).ia(0);
            }
          };
          this.l.D(a, "loaded", function() {
            return b.enableTextDisplayer();
          });
          this.enableTextDisplayer();
        }
        p = cp.prototype;
        p.configure = function() {
        };
        p.remove = function(a, b) {
          if (this.i) this.h.has(this.g) && bp(this.h.get(this.g).track, function(c) {
            return c.startTime < b && c.endTime > a;
          });
          else return false;
          return true;
        };
        p.append = function(a) {
          this.h.has(this.g) && ap(this.h.get(this.g).track, a);
        };
        p.destroy = function() {
          this.i && (this.j && this.C(), this.i = null);
          this.l && (this.l.release(), this.l = null);
          return Promise.resolve();
        };
        p.isTextVisible = function() {
          return this.u;
        };
        p.setTextVisibility = function(a) {
          this.u = a;
          if (this.h.has(this.g)) {
            var b = this.h.get(this.g).track;
            b.mode !== "disabled" && (a = a ? "showing" : "hidden", b.mode !== a && (b.mode = a));
          } else if (this.i && this.i.m === 3) if (b = Array.from(this.i.h.textTracks).filter(function(d) {
            return ["captions", "subtitles", "forced"].includes(d.kind);
          }), a) {
            a = null;
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) if (c = c.value, c.mode === "showing") {
              a = null;
              break;
            } else a || c.mode !== "hidden" || (a = c);
            a && (a.mode = "showing");
          } else for (a = t(b), b = a.next(); !b.done; b = a.next()) b = b.value, b.mode === "showing" && (b.mode = "hidden");
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
          !this.j && this.i && this.i.m === 2 && (this.j = this.i.h, this.l.za(this.i, "unloading", this.C), this.l.D(this.i, "textchanged", this.m), this.l.D(this.j.textTracks, "change", this.B), this.m());
        };
        function dp(a) {
          var b = rb();
          return a.forced && b.Ha() === "WEBKIT" ? "forced" : a.kind === "caption" || a.roles && a.roles.some(function(c) {
            return c.includes("transcribes-spoken-dialog");
          }) && a.roles.some(function(c) {
            return c.includes("describes-music-and-sound");
          }) ? "captions" : "subtitles";
        }
        S("shaka.text.NativeTextDisplayer", cp);
        cp.prototype.enableTextDisplayer = cp.prototype.enableTextDisplayer;
        cp.prototype.setTextLanguage = cp.prototype.setTextLanguage;
        cp.prototype.setTextVisibility = cp.prototype.setTextVisibility;
        cp.prototype.isTextVisible = cp.prototype.isTextVisible;
        cp.prototype.destroy = cp.prototype.destroy;
        cp.prototype.append = cp.prototype.append;
        cp.prototype.remove = cp.prototype.remove;
        cp.prototype.configure = cp.prototype.configure;
        function ep(a, b) {
          xb("SimpleTextDisplayer", "Please migrate to NativeTextDisplayer");
          this.h = a;
          this.i = b;
          this.g = null;
          a = t(Array.from(this.h.textTracks));
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.kind !== "metadata" && b.kind !== "chapters" && (b.mode = "disabled", b.label == this.i && (this.g = b));
          this.g && (this.g.mode = "hidden");
        }
        p = ep.prototype;
        p.configure = function() {
        };
        p.remove = function(a, b) {
          if (!this.g) return false;
          bp(this.g, function(c) {
            return c.startTime < b && c.endTime > a;
          });
          return true;
        };
        p.append = function(a) {
          this.g && ap(this.g, a);
        };
        p.destroy = function() {
          this.g && (bp(this.g, function() {
            return true;
          }), this.g.mode = "disabled");
          this.g = this.h = null;
          return Promise.resolve();
        };
        p.isTextVisible = function() {
          return this.g ? this.g.mode == "showing" : false;
        };
        p.setTextVisibility = function(a) {
          a && !this.g && fp(this);
          this.g && (this.g.mode = a ? "showing" : "hidden");
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
          fp(this);
        };
        function fp(a) {
          a.h && !a.g && (a.g = a.h.addTextTrack("subtitles", a.i), a.g.mode = "hidden");
        }
        S("shaka.text.SimpleTextDisplayer", ep);
        ep.prototype.enableTextDisplayer = ep.prototype.enableTextDisplayer;
        ep.prototype.setTextLanguage = ep.prototype.setTextLanguage;
        ep.prototype.setTextVisibility = ep.prototype.setTextVisibility;
        ep.prototype.isTextVisible = ep.prototype.isTextVisible;
        ep.prototype.destroy = ep.prototype.destroy;
        ep.prototype.append = ep.prototype.append;
        ep.prototype.remove = ep.prototype.remove;
        ep.prototype.configure = ep.prototype.configure;
        function gp() {
        }
        p = gp.prototype;
        p.configure = function() {
        };
        p.remove = function() {
        };
        p.append = function() {
        };
        p.destroy = function() {
        };
        p.isTextVisible = function() {
          return false;
        };
        p.setTextVisibility = function() {
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
        };
        S("shaka.text.StubTextDisplayer", gp);
        gp.prototype.enableTextDisplayer = gp.prototype.enableTextDisplayer;
        gp.prototype.setTextLanguage = gp.prototype.setTextLanguage;
        gp.prototype.setTextVisibility = gp.prototype.setTextVisibility;
        gp.prototype.isTextVisible = gp.prototype.isTextVisible;
        gp.prototype.destroy = gp.prototype.destroy;
        gp.prototype.append = gp.prototype.append;
        gp.prototype.remove = gp.prototype.remove;
        gp.prototype.configure = gp.prototype.configure;
        function hp(a, b) {
          var c = this;
          this.m = false;
          this.h = [];
          this.j = a;
          this.o = b;
          this.C = this.u = null;
          this.g = document.createElement("div");
          this.g.classList.add("shaka-text-container");
          this.g.style.textAlign = "center";
          this.g.style.display = "flex";
          this.g.style.flexDirection = "column";
          this.g.style.alignItems = "center";
          this.g.style.justifyContent = "flex-end";
          this.B = new gf(function() {
            c.j.paused || ip(c);
          });
          jp(this);
          this.l = /* @__PURE__ */ new Map();
          this.i = new kb();
          this.i.D(document, "fullscreenchange", function() {
            ip(c, true);
          });
          this.i.D(
            this.j,
            "seeking",
            function() {
              ip(c, true);
            }
          );
          this.i.D(this.j, "ratechange", function() {
            jp(c);
          });
          this.i.D(this.j, "resize", function() {
            var d = c.j, e = d.videoWidth;
            d = d.videoHeight;
            e && d ? c.u = e / d : c.u = null;
          });
          this.F = null;
          "ResizeObserver" in window2 && (this.F = new ResizeObserver(function() {
            ip(c, true);
          }), this.F.observe(this.g));
          this.G = /* @__PURE__ */ new Map();
        }
        p = hp.prototype;
        p.configure = function(a) {
          this.C = a;
          jp(this);
          ip(this, true);
        };
        p.append = function(a) {
          var b = [].concat(x(this.h));
          a = t(Zo(a));
          for (var c = a.next(), d = {}; !c.done; d = { jg: void 0 }, c = a.next()) d.jg = c.value, b.some(/* @__PURE__ */ (function(e) {
            return function(f) {
              return ge(f, e.jg);
            };
          })(d)) || this.h.push(d.jg);
          this.h.length && jp(this);
          ip(this);
        };
        p.destroy = function() {
          if (!this.g) return Promise.resolve();
          this.g.parentElement && this.o.removeChild(this.g);
          this.g = null;
          this.m = false;
          this.h = [];
          this.B && (this.B.stop(), this.B = null);
          this.l.clear();
          this.i && (this.i.release(), this.i = null);
          this.F && (this.F.disconnect(), this.F = null);
          return Promise.resolve();
        };
        p.remove = function(a, b) {
          if (!this.g) return false;
          var c = this.h.length;
          this.h = this.h.filter(function(d) {
            return d.startTime < a || d.endTime >= b;
          });
          ip(this, c > this.h.length);
          this.h.length || jp(this);
          return true;
        };
        p.isTextVisible = function() {
          return this.m;
        };
        p.setTextVisibility = function(a) {
          (this.m = a) ? (this.g.parentElement || this.o.appendChild(this.g), ip(this, true)) : this.g.parentElement && this.o.removeChild(this.g);
        };
        p.setTextLanguage = function(a) {
          a && a != "und" ? this.g.setAttribute("lang", a) : this.g.setAttribute("lang", "");
        };
        p.enableTextDisplayer = function() {
        };
        function jp(a) {
          a.B && (a.h.length ? a.B.Ea((a.C ? a.C.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(a.j.playbackRate))) : a.B.stop());
        }
        function kp(a, b) {
          for (; b != null; ) {
            if (b == a.g) return true;
            b = b.parentElement;
          }
          return false;
        }
        function lp(a, b, c, d, e) {
          var f = false, g = [], h = [];
          b = t(b);
          for (var k2 = b.next(); !k2.done; k2 = b.next()) {
            k2 = k2.value;
            e.push(k2);
            var l = a.l.get(k2), m = k2.startTime <= d && k2.endTime > d, n = l ? l.hj : null;
            l && (g.push(l.kg), l.$c && g.push(l.$c), m || (f = true, a.l.delete(k2), l = null));
            m && (h.push(k2), l ? kp(a, n) || (f = true) : (mp(a, k2, e), l = a.l.get(k2), n = l.hj, f = true));
            k2.nestedCues.length > 0 && n && lp(a, k2.nestedCues, n, d, e);
            e.pop();
          }
          if (f) {
            d = t(g);
            for (e = d.next(); !e.done; e = d.next()) e = e.value, e.parentElement && e.parentElement.removeChild(e);
            h.sort(function(q, r) {
              return q.startTime != r.startTime ? q.startTime - r.startTime : q.endTime - r.endTime;
            });
            h = t(h);
            for (d = h.next(); !d.done; d = h.next()) d = a.l.get(d.value), d.$c ? (d.$c.contains(c) && d.$c.removeChild(c), c.appendChild(d.$c), d.$c.appendChild(d.kg)) : c.appendChild(d.kg);
          }
        }
        function ip(a, b) {
          if (a.g) {
            var c = a.j.currentTime;
            if (!a.m || (b === void 0 ? 0 : b)) {
              b = t(a.G.values());
              for (var d = b.next(); !d.done; d = b.next()) Fj(d.value);
              Fj(a.g);
              a.l.clear();
              a.G.clear();
            }
            a.m && lp(a, a.h, a.g, c, []);
          }
        }
        function mp(a, b, c) {
          var d = c.length > 1, e = d ? "span" : "div";
          b.lineBreak && (e = "br");
          b.rubyTag && (e = b.rubyTag);
          d = !d && b.nestedCues.length > 0;
          var f = document.createElement(e);
          e != "br" && np(a, f, b, c, d);
          c = null;
          if (b.region && b.region.id) {
            var g = b.region, h = a.u === 4 / 3 ? 2.5 : 1.9;
            c = g.id + "_" + g.width + "x" + g.height + (g.heightUnits == Zc ? "%" : "px") + "-" + g.viewportAnchorX + "x" + g.viewportAnchorY + (g.viewportAnchorUnits == Zc ? "%" : "px");
            if (a.G.has(c)) c = a.G.get(c);
            else {
              e = document.createElement("span");
              var k2 = g.heightUnits == Zc ? "%" : "px", l = g.widthUnits == Zc ? "%" : "px", m = g.viewportAnchorUnits == Zc ? "%" : "px";
              e.id = "shaka-text-region---" + c;
              e.classList.add("shaka-text-region");
              e.style.position = "absolute";
              var n = g.height, q = g.width;
              g.heightUnits === 2 && (n = g.height * 5.33, k2 = "%");
              g.widthUnits === 2 && (q = g.width * h, l = "%");
              e.style.height = n + k2;
              e.style.width = q + l;
              g.viewportAnchorUnits === 2 ? (h = g.viewportAnchorY / 75 * 100, k2 = g.viewportAnchorX / (a.u === 4 / 3 ? 160 : 210) * 100, h -= g.regionAnchorY * n / 100, k2 -= g.regionAnchorX * q / 100, e.style.top = h + "%", e.style.left = k2 + "%") : (e.style.top = g.viewportAnchorY - g.regionAnchorY * n / 100 + m, e.style.left = g.viewportAnchorX - g.regionAnchorX * q / 100 + m);
              g.heightUnits !== 0 && g.widthUnits !== 0 && g.viewportAnchorUnits !== 0 && (g = Math.max(0, Math.min(100 - (parseInt(e.style.width.slice(0, -1), 10) || 0), parseInt(e.style.left.slice(0, -1), 10) || 0)), e.style.top = Math.max(0, Math.min(100 - (parseInt(e.style.height.slice(0, -1), 10) || 0), parseInt(e.style.top.slice(0, -1), 10) || 0)) + "%", e.style.left = g + "%");
              e.style.display = "flex";
              e.style.flexDirection = "column";
              e.style.alignItems = "center";
              e.style.justifyContent = b.displayAlign == "before" ? "flex-start" : b.displayAlign == "center" ? "center" : "flex-end";
              a.G.set(c, e);
              c = e;
            }
          }
          e = f;
          d && (e = document.createElement("span"), e.classList.add("shaka-text-wrapper"), e.style.backgroundColor = b.backgroundColor, e.style.lineHeight = "normal", f.appendChild(e));
          a.l.set(b, { kg: f, hj: e, $c: c });
        }
        function op(a) {
          var b = a.direction, c = a.positionAlign;
          a = a.textAlign;
          return c !== Xd ? c : a === "left" || a === "start" && b === Zd || a === "end" && b === "rtl" ? "line-left" : a === "right" || a === "start" && b === "rtl" || a === "end" && b === Zd ? "line-right" : "center";
        }
        function np(a, b, c, d, e) {
          var f = b.style, g = c.nestedCues.length == 0, h = d.length > 1;
          f.whiteSpace = "pre-wrap";
          var k2 = c.payload.replace(/\s+$/g, function(m) {
            return "".repeat(m.length);
          });
          f.webkitTextStrokeColor = c.textStrokeColor;
          f.webkitTextStrokeWidth = c.textStrokeWidth;
          f.color = c.color;
          f.direction = c.direction;
          f.opacity = c.opacity;
          f.paddingLeft = pp(c.linePadding, c, a.o);
          f.paddingRight = pp(c.linePadding, c, a.o);
          f.textCombineUpright = c.textCombineUpright;
          f.textShadow = c.textShadow;
          if (c.backgroundImage) f.backgroundImage = "url('" + c.backgroundImage + "')", f.backgroundRepeat = "no-repeat", f.backgroundSize = "contain", f.backgroundPosition = "center", c.backgroundColor && (f.backgroundColor = c.backgroundColor), f.width = "100%", f.height = "100%";
          else {
            if (c.nestedCues.length) var l = b;
            else l = document.createElement("span"), b.appendChild(l);
            c.border && (l.style.border = c.border);
            e || ((b = qp(d, function(m) {
              return m.backgroundColor;
            })) ? l.style.backgroundColor = b : k2 && (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)"));
            k2 && (l.setAttribute("translate", "no"), l.textContent = k2);
          }
          if (h && !d[d.length - 1].isContainer) f.display = "inline";
          else {
            f.display = "flex";
            f.flexDirection = "column";
            f.alignItems = "center";
            if (c.textAlign == "left" || c.textAlign == "start") f.width = "100%", f.alignItems = "start";
            else if (c.textAlign == "right" || c.textAlign == "end") f.width = "100%", f.alignItems = "end";
            f.justifyContent = c.displayAlign == "before" ? "flex-start" : c.displayAlign == "center" ? "center" : "flex-end";
          }
          g || (f.margin = "0");
          f.fontFamily = c.fontFamily;
          f.fontWeight = c.fontWeight.toString();
          f.fontStyle = c.fontStyle;
          f.letterSpacing = c.letterSpacing;
          d = a.C ? a.C.fontScaleFactor : 1;
          if (d !== 1 || c.fontSize) f.fontSize = pp(c.fontSize || "1em", c, a.o, d);
          d = c.line;
          d != null && (g = c.lineInterpretation, g == ae && (g = 1, h = 16, a.u && a.u < 1 && (h = 32), d = d < 0 ? 100 + d / h * 100 : d / h * 100), g == 1 && (f.position = "absolute", c.writingMode == $d ? (f.width = "100%", c.lineAlign == be ? f.top = d + "%" : c.lineAlign == "end" && (f.bottom = 100 - d + "%")) : c.writingMode == "vertical-lr" ? (f.height = "100%", c.lineAlign == be ? f.left = d + "%" : c.lineAlign == "end" && (f.right = 100 - d + "%")) : (f.height = "100%", c.lineAlign == be ? f.right = d + "%" : c.lineAlign == "end" && (f.left = 100 - d + "%"))));
          f.lineHeight = c.lineHeight;
          a = op(c);
          a == "line-left" ? (f.cssFloat = "left", c.position !== null && (f.position = "absolute", c.writingMode == $d ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%")) : a == "line-right" ? (f.cssFloat = "right", c.position !== null && (f.position = "absolute", c.writingMode == $d ? (f.right = 100 - c.position + "%", f.width = "auto") : f.bottom = c.position + "%")) : c.position !== null && c.position != 50 && (f.position = "absolute", c.writingMode == $d ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%", c.size && (f.transform = "translateX(-50%)"));
          f.textAlign = c.textAlign;
          f.textDecoration = c.textDecoration.join(" ");
          f.writingMode = c.writingMode;
          "writingMode" in document.documentElement.style && f.writingMode == c.writingMode || (f.webkitWritingMode = c.writingMode);
          c.size && (c.writingMode == $d ? f.width = c.size + "%" : f.height = c.size + "%");
        }
        function pp(a, b, c, d) {
          d = d === void 0 ? 1 : d;
          var e = (e = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(a)) ? { value: Number(e[1]), unit: e[2] } : null;
          if (!e) return a;
          a = e.unit;
          d *= e.value;
          switch (a) {
            case "%":
              return d / 100 * c.clientHeight / b.cellResolution.rows + "px";
            case "c":
              return c.clientHeight * d / b.cellResolution.rows + "px";
            default:
              return d + a;
          }
        }
        function qp(a, b) {
          for (var c = a.length - 1; c >= 0; c--) {
            var d = b(a[c]);
            if (d || d === 0) return d;
          }
          return null;
        }
        S("shaka.text.UITextDisplayer", hp);
        hp.prototype.enableTextDisplayer = hp.prototype.enableTextDisplayer;
        hp.prototype.setTextLanguage = hp.prototype.setTextLanguage;
        hp.prototype.setTextVisibility = hp.prototype.setTextVisibility;
        hp.prototype.isTextVisible = hp.prototype.isTextVisible;
        hp.prototype.remove = hp.prototype.remove;
        hp.prototype.destroy = hp.prototype.destroy;
        hp.prototype.append = hp.prototype.append;
        hp.prototype.configure = hp.prototype.configure;
        function rp(a, b) {
          function c(f) {
            for (var g = f, h = t(b), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.end && k2.start < f && (g += k2.end - k2.start);
            f = Math.floor(g / 3600);
            h = Math.floor(g / 60 % 60);
            k2 = Math.floor(g % 60);
            g = Math.floor(g * 1e3 % 1e3);
            return (f < 10 ? "0" : "") + f + ":" + (h < 10 ? "0" : "") + h + ":" + (k2 < 10 ? "0" : "") + k2 + "." + (g < 100 ? g < 10 ? "00" : "0" : "") + g;
          }
          var d = Yo(a);
          a = "WEBVTT\n\n";
          d = t(d);
          for (var e = d.next(); !e.done; e = d.next()) e = e.value, a += c(e.startTime) + " --> " + c(e.endTime) + (function(f) {
            var g = [];
            switch (f.textAlign) {
              case "left":
                g.push("align:left");
                break;
              case "right":
                g.push("align:right");
                break;
              case Yd:
                g.push("align:middle");
                break;
              case "start":
                g.push("align:start");
                break;
              case "end":
                g.push("align:end");
            }
            switch (f.writingMode) {
              case "vertical-lr":
                g.push("vertical:lr");
                break;
              case "vertical-rl":
                g.push("vertical:rl");
            }
            return g.length ? " " + g.join(" ") : "";
          })(e) + "\n", a += e.payload + "\n\n";
          return a;
        }
        S("shaka.text.WebVttGenerator", function() {
        });
        function sp(a, b) {
          this.g = b;
          this.j = a;
          this.m = /* @__PURE__ */ new Map();
          this.l = void 0;
          this.F = false;
          this.J = true;
          this.u = this.I = false;
          this.C = this.B = void 0;
          this.H = 0;
          this.K = { request: false, response: false, event: false };
          this.o = {};
          this.i = new kb();
          this.G = [];
          this.h = null;
        }
        sp.prototype.setMediaElement = function(a) {
          this.h = a;
          tp(this);
        };
        sp.prototype.configure = function(a) {
          this.g = a;
          up(this);
        };
        function vp(a) {
          a.m.clear();
          a.F = false;
          a.J = true;
          a.I = false;
          a.u = false;
          a.B = 0;
          a.C = 0;
          a.H = 0;
          a.K = { request: false, response: false, event: false };
          wp(a);
          a.o = {};
          a.h = null;
          a.i.Qa();
        }
        function xp(a, b) {
          a.u = b;
          a.u ? a.l == yp ? a.l = zp : a.l == Ap && (a.l = Bp) : a.l == zp ? a.l = yp : a.l == Bp && (a.l = Ap);
        }
        function Cp(a, b) {
          if (a.g && a.g.enabled && (Dp(a, "ps", { dd: "d" }), a.h && a.h.autoplay)) {
            var c = a.h.play();
            c && c.then(function() {
              a.H = b;
            }).catch(function() {
              a.H = 0;
            });
          }
        }
        function Ep(a, b, c) {
          try {
            if (!a.g.enabled) return b;
            var d = Fp(a);
            a: {
              switch (c.toLowerCase()) {
                case "audio/mp4":
                case "audio/webm":
                case "audio/ogg":
                case "audio/mpeg":
                case "audio/aac":
                case "audio/flac":
                case "audio/wav":
                  var e = Gp;
                  break a;
                case "video/webm":
                case "video/mp4":
                case "video/mpeg":
                case "video/mp2t":
                  e = Hp;
                  break a;
                case "application/x-mpegurl":
                case "application/vnd.apple.mpegurl":
                case "application/dash+xml":
                case "video/vnd.mpeg.dash.mpd":
                case "application/vnd.ms-sstr+xml":
                  e = Ip;
                  break a;
              }
              e = void 0;
            }
            d.ot = e;
            d.su = true;
            var f = Jp(d);
            return Kp(b, f);
          } catch (g) {
            return ab("CMCD_SRC_ERROR", "Could not generate src CMCD data.", g), b;
          }
        }
        function tp(a) {
          a.i.D(a.h, "playing", function() {
            a.C || (a.C = Date.now());
            Dp(a, "ps", { dd: "p" });
          });
          a.i.D(a.h, "volumechange", function() {
            Dp(a, a.h.muted ? "m" : "um");
          });
          a.i.D(a.h, "play", function() {
            a.B || (a.B = Date.now(), Dp(a, "ps", { dd: "s" }));
          });
          a.i.D(a.h, "pause", function() {
            Dp(a, "ps", { dd: "a" });
          });
          a.i.D(a.j, "buffering", function() {
            Dp(a, "ps", { dd: "w" });
          });
          a.i.D(a.h, "seeking", function() {
            return Dp(a, "ps", { dd: "k" });
          });
          a.i.D(document, "fullscreenchange", function() {
            Dp(a, document.fullscreenElement ? "pe" : "pc");
          });
          var b = a.h;
          (b.webkitPresentationMode || b.webkitSupportsFullscreen) && a.i.D(b, "webkitpresentationmodechanged", function() {
            b.webkitPresentationMode ? Dp(a, b.webkitPresentationMode !== "inline" ? "pe" : "pc") : b.webkitSupportsFullscreen && Dp(a, b.webkitDisplayingFullscreen ? "pe" : "pc");
          });
          a.i.D(a.h, "enterpictureinpicture", function() {
            Dp(a, "pe");
          });
          a.i.D(a.h, "leavepictureinpicture", function() {
            Dp(a, "pc");
          });
          "documentPictureInPicture" in window2 && a.i.D(window2.documentPictureInPicture, "enter", function(c) {
            Dp(a, "pe");
            a.i.za(c.window, "pagehide", function() {
              Dp(a, "pc");
            });
          });
          a.i.D(document, "visibilitychange", function() {
            document.hidden ? Dp(a, "b", { bg: true }) : Dp(a, "b");
          });
          a.i.D(a.j, "complete", function() {
            Dp(a, "ps", { dd: "e" });
          });
        }
        function up(a) {
          wp(a);
          var b = Lp(a);
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) if (c = c.value.timeInterval, c === void 0 && (c = Mp), c >= 1) {
            var d = new gf(function() {
              return Dp(a, Np);
            });
            d.Ea(c);
            a.G.push(d);
          }
        }
        function wp(a) {
          if (a.G) for (var b = t(a.G), c = b.next(); !c.done; c = b.next()) c.value.stop();
          a.G = [];
        }
        function Lp(a) {
          return (a = a.g.targets) ? a.filter(function(b) {
            return b.mode === Op && b.enabled;
          }) : [];
        }
        function Pp(a) {
          return (a = a.g.targets) ? a.filter(function(b) {
            return b.mode === Qp && b.enabled === true;
          }) : [];
        }
        function Fp(a) {
          a.g.sessionId || (a.g.sessionId = window2.crypto.randomUUID());
          return { v: a.g.version, sf: a.l, sid: a.g.sessionId, cid: a.g.contentId, mtp: a.j.getBandwidthEstimate() / 1e3 };
        }
        function Dp(a, b, c) {
          c = c === void 0 ? {} : c;
          b = Object.assign({ e: b, ts: Date.now() }, c);
          b = Rp(a, b, Op);
          c = a.g.targets;
          if (!(a.g.version < Sp) && c) {
            var d = Lp(a);
            c = Array.from(new Set([].concat(x(Tp), x(Up))));
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) {
              e = e.value;
              var f = Vp(e.includeKeys || [], c);
              f.includes(Wp) || f.push(Wp);
              f = Xp(b, f);
              var g = e.events || [], h = f.e, k2 = f.sta;
              h && (!Yp.includes(h) || !(h !== "ps" || k2 && Zp.includes(k2)) || g && g.length > 0 && !g.includes(h)) || $p(a, f, e);
            }
          }
        }
        function aq(a, b, c) {
          if (a.g.enabled) {
            c = Rp(a, c, bq);
            var d = cq({ mode: bq, useHeaders: a.g.useHeaders, includeKeys: a.g.includeKeys || [] });
            a.o[d] || (a.o[d] = { request: 1, response: 1 });
            c.sn = a.o[d].request++;
            d = a.g.includeKeys || [];
            var e = a.g.version == Sp ? Array.from(new Set([].concat(x(Tp), x(dq)))) : eq;
            d = Vp(d, e);
            c = Xp(c, d);
            fq(a, c, b, a.g.useHeaders);
          }
        }
        function $p(a, b, c, d) {
          var e = Ag(), f = c.url;
          if (c.useHeaders) {
            b = gq(b);
            if (!Object.keys(b).length) return;
            d && Object.assign(d.headers, b);
            d = Ug([f], e);
            Object.assign(d.headers, b);
          } else {
            b = Jp(b);
            if (!b) return;
            f = Kp(f, b);
            d && (d.uri = f);
            d = Ug([f], e);
          }
          a.j.Yb().request(9, d);
        }
        function fq(a, b, c, d) {
          if (d) {
            b = gq(b);
            if (!Object.keys(b).length) return;
            Object.assign(c.headers, b);
          } else {
            var e = Jp(b);
            if (!e) return;
            c.uris = c.uris.map(function(f) {
              return Kp(f, e);
            });
          }
          Pp(a).length > 0 || !a.m.has(c) || a.m.delete(c);
        }
        function Vp(a, b) {
          if (!a || a.length === 0) return b;
          for (var c = t(a), d = c.next(); !d.done; d = c.next()) b.includes(d.value);
          return a = a.filter(function(e) {
            return b.includes(e);
          });
        }
        function Xp(a, b) {
          return Object.keys(a).reduce(function(c, d) {
            b.includes(d) && (c[d] = a[d]);
            return c;
          }, {});
        }
        function hq(a) {
          if (a.type === 0) return iq;
          if (a = a.stream) {
            var b = a.type;
            if (b == "video") return a.codecs && a.codecs.includes(",") ? Hp : jq;
            if (b == "audio") return Gp;
            if (b == "text") return a.mimeType === "application/mp4" ? kq : lq;
          }
        }
        function cq(a) {
          var b = Object.keys(a).sort().reduce(function(c, d) {
            d !== "enabled" && (c[d] = a[d]);
            return c;
          }, {});
          return JSON.stringify(b);
        }
        function mq(a, b) {
          b = a.j.Gc()[b];
          if (!b.length) return NaN;
          var c = a.h ? a.h.currentTime : 0;
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? (a.end - c) * 1e3 : NaN;
        }
        function nq(a, b) {
          b = a.j.Gc()[b];
          if (!b.length) return 0;
          var c = a.h ? a.h.currentTime : 0;
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? (a.end - c) * 1e3 : 0;
        }
        function oq(a, b) {
          var c = a.j.qc();
          if (!c.length) return NaN;
          a = c[0];
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.type === "variant" && d.bandwidth > a.bandwidth && (a = d);
          switch (b) {
            case jq:
              return a.videoBandwidth || NaN;
            case Gp:
              return a.audioBandwidth || NaN;
            default:
              return a.bandwidth;
          }
        }
        function pq(a, b, c) {
          var d = b.segment, e = 0;
          d && (e = d.endTime - d.startTime);
          e = { d: e * 1e3, st: a.j.W() ? qq : rq };
          e.ot = hq(b);
          var f = e.ot === jq || e.ot === Gp || e.ot === Hp || e.ot === kq;
          if (b = b.stream) {
            var g = a.j.Pb();
            if (f && (e.bl = mq(a, b.type), e.ot !== kq)) {
              var h = nq(a, b.type);
              e.dl = g ? h / Math.abs(g) : h;
            }
            b.bandwidth && (e.br = b.bandwidth / 1e3);
            if (b.segmentIndex && d) {
              if ((g = b.segmentIndex.Xb(d.endTime, true, g < 0)) && (g = g.next().value) && g != d) {
                if (c && !ib(d.P(), g.P())) {
                  var k2 = g.P()[0];
                  h = new URL(k2);
                  var l = new URL(c);
                  if (h.origin !== l.origin) c = k2;
                  else {
                    c = h.pathname.split("/").slice(1);
                    k2 = l.pathname.split("/").slice(1, -1);
                    l = Math.min(c.length, k2.length);
                    for (var m = 0; m < l && c[m] === k2[m]; m++) c.shift(), k2.shift();
                    for (; k2.length; ) k2.shift(), c.unshift("..");
                    c = c.join("/") + h.search + h.hash;
                  }
                  e.nor = c;
                }
                !g.startByte && !g.endByte || d.startByte == g.startByte && d.endByte == g.endByte || (c = g.startByte + "-", g.endByte && (c += g.endByte), e.nrr = c);
              }
              g = a.j.Pb() || 1;
              c = nq(a, b.type) || 500;
              d = (b = b.bandwidth) ? b * (d.endTime - d.startTime) / 1e3 / (c / g / 1e3) * a.g.rtpSafetyFactor : NaN;
              isNaN(d) || (e.rtp = d);
            }
          }
          f && e.ot !== kq && (e.tb = oq(a, e.ot) / 1e3);
          return e;
        }
        function Rp(a, b, c) {
          Object.assign(b, Fp(a));
          b.pr = a.j.Pb();
          var d = b.ot === jq || b.ot === Hp;
          a.I && d && (b.bs = true, b.su = true, a.I = false);
          b.su == null && (b.su = a.J);
          a.j.W() && (d = sq(a.j), b.ltc = d || void 0);
          document.hidden && (b.bg = true);
          d = a.C && a.B ? a.C - (a.H || a.B) : void 0;
          d == void 0 || a.K[c] || (b.msd = d, a.K[c] = true);
          return b;
        }
        function Jp(a) {
          function b(n) {
            return c(n / 100) * 100;
          }
          function c(n) {
            return Math.round(n);
          }
          function d(n) {
            return !Number.isNaN(n) && n != null && n !== "" && n !== false;
          }
          var e = [], f = { br: c, d: c, bl: b, dl: b, mtp: b, nor: function(n) {
            return encodeURIComponent(n);
          }, rtp: b, tb: c, ttfb: c, ttlb: c }, g = Object.keys(a || {}).sort();
          g = t(g);
          for (var h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            var k2 = a[h];
            if (d(k2) && (h !== "v" || k2 !== 1) && (h != "pr" || k2 !== 1)) {
              var l = f[h];
              l && (k2 = l(k2));
              l = typeof k2;
              var m = void 0;
              m = l === "string" && h !== "ot" && h !== "sf" && h !== "st" ? h + "=" + JSON.stringify(k2) : l === "boolean" ? h : l === "symbol" ? h + "=" + k2.description : h + "=" + k2;
              e.push(m);
            }
          }
          return e.join(",");
        }
        function gq(a) {
          var b = Object.keys(a), c = {}, d = ["Object", "Request", "Session", "Status"], e = [{}, {}, {}, {}], f = { br: 0, d: 0, ot: 0, tb: 0, url: 0, bl: 1, dl: 1, mtp: 1, nor: 1, nrr: 1, su: 1, ltc: 1, ttfb: 1, ttlb: 1, ts: 1, rc: 1, cmsdd: 1, cmsds: 1, sn: 1, cid: 2, pr: 2, sf: 2, sid: 2, st: 2, v: 2, msd: 2, bs: 3, rtp: 3, bg: 3 };
          b = t(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, e[f[g] != null ? f[g] : 1][g] = a[g];
          for (a = 0; a < e.length; a++) (f = Jp(e[a])) && (c["CMCD-" + d[a]] = f);
          return c;
        }
        function Kp(a, b) {
          if (!b || a.includes("offline:")) return a;
          a = new Cb(a);
          a.g.set("CMCD", b);
          return a.toString();
        }
        var Ip = "m", Gp = "a", jq = "v", Hp = "av", iq = "i", lq = "c", kq = "tt", Sp = 2, rq = "v", qq = "l", yp = "d", zp = "ld", Ap = "h", Bp = "lh";
        S("shaka.util.CmcdManager.StreamingFormat", { DASH: yp, Ol: zp, HLS: Ap, Pl: Bp, dm: "s", OTHER: "o" });
        var eq = "br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "), Tp = "br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "), dq = "ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "), tq = "d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "), Up = ["e", "sta"], Yp = "ps e t c b m um pe pc".split(" "), Zp = "spawkrfeqd".split(""), Mp = 10, Wp = "ts", Np = "t", bq = "request", Qp = "response", Op = "event";
        function uq(a) {
          this.h = a;
          this.g = null;
        }
        p = uq.prototype;
        p.configure = function(a) {
          this.h = a;
        };
        p.ci = function() {
          return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(vq) ? this.g.get(vq) * 1e3 : null;
        };
        p.ai = function() {
          return this.h.enabled && this.g && this.g.has(wq) ? this.g.get(wq) * 1e3 : null;
        };
        p.Tj = function() {
          return this.h.enabled && this.g && this.g.has(xq) ? this.g.get(xq) : null;
        };
        p.Uj = function() {
          return this.h.enabled && this.g && this.g.has(yq) ? this.g.get(yq) : null;
        };
        p.getBandwidthEstimate = function(a) {
          var b = this.ai();
          if (!b) return a;
          var c = this.h.estimatedThroughputWeightRatio;
          return c > 0 && c <= 1 ? a * (1 - c) + b * c : a;
        };
        function zq(a) {
          return a ? a.toLowerCase() === "false" ? false : /^[-0-9]/.test(a) ? parseInt(a, 10) : a.replace(/["]+/g, "") : true;
        }
        S("shaka.util.CmsdManager", uq);
        uq.prototype.getBandwidthEstimate = uq.prototype.getBandwidthEstimate;
        uq.prototype.getRoundTripTime = uq.prototype.Uj;
        uq.prototype.getResponseDelay = uq.prototype.Tj;
        uq.prototype.getEstimatedThroughput = uq.prototype.ai;
        uq.prototype.getMaxBitrate = uq.prototype.ci;
        var wq = "etp", vq = "mb", xq = "rd", yq = "rtt";
        function Aq() {
          this.g = null;
          this.h = [];
        }
        function Bq(a, b) {
          return Q(function(c) {
            if (c.g == 1) return a.g ? F(c, new Promise(function(d) {
              return a.h.push(d);
            }), 2) : c.A(2);
            a.g = b;
            G(c);
          });
        }
        Aq.prototype.release = function() {
          this.h.length > 0 ? this.h.shift()() : this.g = null;
        };
        function Y(a, b, c) {
          b = b === void 0 ? null : b;
          Mg.call(this);
          var d = this;
          this.m = Cq;
          this.h = null;
          this.xe = b;
          this.$ = false;
          this.Ie = new kb();
          this.ye = new kb();
          this.j = new kb();
          this.dc = new kb();
          this.Fd = new kb();
          this.G = this.H = this.F = this.N = null;
          this.Je = 0;
          this.aa = new Aq();
          this.O = this.Fa = this.X = this.i = this.zc = this.I = this.l = this.ue = this.T = this.Lh = this.va = this.K = this.kb = this.ya = this.we = this.R = this.Ta = this.M = this.ac = null;
          this.Ua = false;
          this.Ce = this.o = null;
          this.Be = 1e9;
          this.Ge = [];
          this.yc = /* @__PURE__ */ new Map();
          this.ob = [];
          this.Xf = -1;
          this.g = Dq(this);
          this.Zf = Qn();
          this.V = null;
          this.Ke = -1;
          this.cc = null;
          this.xa = { width: Infinity, height: Infinity };
          this.Ae = new qi(this.g, this.xa, null);
          this.Ee = [];
          this.B = null;
          this.J = this.g.adaptationSetCriteriaFactory();
          this.J.configure({
            language: this.g.preferredAudioLanguage,
            role: this.g.preferredAudioRole,
            videoRole: this.g.preferredVideoRole,
            channelCount: 0,
            hdrLevel: this.g.preferredVideoHdrLevel,
            spatialAudio: this.g.preferSpatialAudio,
            videoLayout: this.g.preferredVideoLayout,
            audioLabel: this.g.preferredAudioLabel,
            videoLabel: this.g.preferredVideoLabel,
            codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
            audioCodec: "",
            activeAudioCodec: "",
            activeAudioChannelCount: 0,
            preferredAudioCodecs: this.g.preferredAudioCodecs,
            preferredAudioChannelCount: this.g.preferredAudioChannelCount
          });
          this.Jd = this.g.preferredTextLanguage;
          this.Md = this.g.preferredTextRole;
          this.Ld = this.g.preferForcedSubs;
          this.ze = [];
          c && c(this);
          this.K = new sp(this, this.g.cmcd);
          this.va = new uq(this.g.cmsd);
          this.N = Eq(this);
          this.ma = this.oa = this.Da = this.C = null;
          this.ag = false;
          this.Yf = [];
          this.$f = new gf(function() {
            return Q(function(e) {
              if (e.g == 1) return d.oa ? F(e, d.Vb(d.ma, true), 3) : e.A(0);
              if (e.g != 4) return F(e, d.load(d.oa), 4);
              d.ag ? d.ma.pause() : d.ma.play();
              d.oa = null;
              d.ag = false;
              G(e);
            });
          });
          Fq && (this.C = Fq(), this.C.configure(this.g.ads), this.Fd.D(this.C, "ad-content-pause-requested", function(e) {
            var f, g;
            return Q(function(h) {
              if (h.g == 1) {
                d.$f.stop();
                if (d.oa) return h.A(0);
                d.ma = d.h;
                d.ag = d.be();
                f = e.saveLivePosition || false;
                g = true;
                d.W() && (g = f);
                return F(h, d.Vh(true, g), 3);
              }
              d.oa = h.h;
              G(h);
            });
          }), this.Fd.D(
            this.C,
            "ad-content-resume-requested",
            function(e) {
              e = e.offset || 0;
              if (d.oa) {
                var f = d.oa;
                f.o && e && (typeof f.o === "number" ? f.o += e : f.o.setTime(f.o.getTime() + e * 1e3));
              }
              d.$f.ia(0.1);
            }
          ), this.Fd.D(this.C, "ad-content-attach-requested", function() {
            return Q(function(e) {
              if (e.g == 1) return d.h || !d.ma ? e.A(0) : F(e, d.Vb(d.ma, true), 3);
              d.ma = null;
              G(e);
            });
          }));
          Gq && (this.Da = Gq(this), this.Da.configure(this.g.queue));
          this.Ie.D(window2, "online", function() {
            Hq(d);
            d.gh();
          });
          this.De = new gf(function() {
            for (var e = Date.now() / 1e3, f = false, g = true, h = t(d.i.variants), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.disabledUntilTime > 0 && k2.disabledUntilTime <= e && (k2.disabledUntilTime = 0, f = true), k2.disabledUntilTime > 0 && (g = false);
            g && d.De.stop();
            f && Iq(d, false, void 0, false, false);
          });
          this.eb = null;
          a && (xb("Player w/ mediaElement", "Please migrate from initializing Player with a mediaElement; use the attach method instead."), this.Vb(a, true));
          this.u = null;
        }
        la(Y, Mg);
        function Jq(a) {
          a.T != null && (Gc(a.T), a.T.release(), a.T = null);
        }
        function Kq(a, b, c) {
          c || b.lcevc.enabled ? (Jq(a), a.T == null && (a.T = new Ec(a.h, a.Lh, b.lcevc, c), a.H && (a.H.C = a.T))) : Jq(a);
        }
        function Lq(a, b) {
          return new V(a, b);
        }
        p = Y.prototype;
        p.destroy = function() {
          var a = this, b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.m == Mq) return c.return();
                Jq(a);
                b = a.detach();
                a.m = Mq;
                return F(c, b, 2);
              case 2:
                return F(c, a.ng(), 3);
              case 3:
                a.Ie && (a.Ie.release(), a.Ie = null);
                a.ye && (a.ye.release(), a.ye = null);
                a.j && (a.j.release(), a.j = null);
                a.dc && (a.dc.release(), a.dc = null);
                a.Fd && (a.Fd.release(), a.Fd = null);
                a.Ce = null;
                a.g = null;
                a.B = null;
                a.xe = null;
                a.K = null;
                a.va = null;
                if (!a.N) {
                  c.A(4);
                  break;
                }
                return F(c, a.N.destroy(), 5);
              case 5:
                a.N = null;
              case 4:
                a.o && (a.o.release(), a.o = null), a.Da && (a.Da.destroy(), a.Da = null), Mg.prototype.release.call(a), G(c);
            }
          });
        };
        function Nq(a, b) {
          Oq.set(a, b);
        }
        function Pq(a, b) {
          a.dispatchEvent(Lq("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        p.Vb = function(a, b) {
          b = b === void 0 ? true : b;
          var c = this, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (c.m == Mq) throw new U(2, 7, 7e3);
                d = c.h && c.h == a;
                if (!c.h || c.h == a) {
                  g.A(2);
                  break;
                }
                return F(g, c.detach(), 2);
              case 2:
                return F(g, Qq(c, "attach"), 4);
              case 4:
                if (g.h) return g.return();
                ra(g, 5, 6);
                d || (Pq(c, "attach"), e = function() {
                  var h = Rq(c, false);
                  h && Sq(c, h);
                }, c.ye.D(a, "error", e), c.h = a, c.K && c.K.setMediaElement(a));
                rb();
                if (!b || !Mc() || c.H) {
                  g.A(6);
                  break;
                }
                return F(g, Tq(c), 6);
              case 6:
                Ba(g);
                c.aa.release();
                Da(g, 0);
                break;
              case 5:
                return f = Aa(g), F(g, c.detach(), 10);
              case 10:
                throw f;
            }
          });
        };
        p.kj = function(a) {
          this.Lh = a;
        };
        p.detach = function(a) {
          a = a === void 0 ? false : a;
          var b = this;
          return Q(function(c) {
            if (c.g == 1) {
              if (b.m == Mq) throw new U(2, 7, 7e3);
              return F(c, b.Cc(false, a), 2);
            }
            if (c.g != 3) return F(c, Qq(b, "detach"), 3);
            if (c.h) return c.return();
            try {
              b.h && (b.ye.Qa(), b.h = null), Pq(b, "detach"), b.C && !a && b.C.release();
            } finally {
              b.aa.release();
            }
            G(c);
          });
        };
        function Qq(a, b) {
          var c;
          return Q(function(d) {
            return d.g == 1 ? (c = ++a.Je, F(d, Bq(a.aa, b), 2)) : c != a.Je ? (a.aa.release(), d.return(true)) : d.return(false);
          });
        }
        p.Cc = function(a, b) {
          a = a === void 0 ? true : a;
          b = b === void 0 ? false : b;
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                return c.m != Mq && (c.m = Cq), F(B, Qq(c, "unload"), 2);
              case 2:
                if (B.h) return B.return();
                sa(B, 3);
                c.Ua = false;
                Pq(c, "unload");
                Jq(c);
                d = c.ze.map(function(C) {
                  return C();
                });
                c.ze = [];
                return F(B, Promise.all(d), 5);
              case 5:
                c.dispatchEvent(Lq("unloading"));
                c.we && (c.we.release(), c.we = null);
                c.ya && (c.ya.release(), c.ya = null);
                c.kb && (c.kb.release(), c.kb = null);
                c.h && (c.j.Qa(), c.dc.Qa());
                c.De.stop();
                c.ac && (c.ac.release(), c.ac = null);
                c.Ta && (c.Ta.stop(), c.Ta = null);
                if (!c.I) {
                  B.A(6);
                  break;
                }
                return F(B, c.I.stop(), 7);
              case 7:
                c.I = null, c.zc = null;
              case 6:
                c.o && c.o.stop();
                if (!c.l) {
                  B.A(8);
                  break;
                }
                return F(B, c.l.destroy(), 9);
              case 9:
                c.l = null;
              case 8:
                c.M && (c.M.release(), c.M = null);
                c.G && (c.G.release(), c.G = null);
                if ("webkit" !== window2.shakaMediaKeysPolyfill || !c.F) {
                  B.A(10);
                  break;
                }
                return F(B, c.F.destroy(), 11);
              case 11:
                c.F = null;
              case 10:
                if (!c.H) {
                  B.A(12);
                  break;
                }
                return F(B, c.H.destroy(), 13);
              case 13:
                c.H = null;
              case 12:
                if (c.C && !b) c.C.onAssetUnload();
                c.oa && !b && (c.oa.destroy(), c.oa = null);
                b || c.$f.stop();
                c.K && vp(c.K);
                c.va && (c.va.g = null);
                if (!c.u) {
                  B.A(14);
                  break;
                }
                return F(B, c.u.destroy(), 15);
              case 15:
                c.u = null;
              case 14:
                c.$ = false;
                if (c.h) {
                  e = t(c.Yf);
                  for (f = e.next(); !f.done; f = e.next()) g = f.value, g.src.startsWith("blob:") && URL.revokeObjectURL(g.src), g.remove();
                  c.Yf = [];
                  Ej(c.h) && c.h.load();
                }
                if (!c.F) {
                  B.A(16);
                  break;
                }
                return F(B, c.F.destroy(), 17);
              case 17:
                c.F = null;
              case 16:
                c.eb && c.X != c.eb.rd() && (c.eb.l || c.eb.destroy(), c.eb = null);
                c.X = null;
                c.Fa = null;
                c.R = null;
                if (c.i) {
                  h = t(c.i.variants);
                  for (k2 = h.next(); !k2.done; k2 = h.next()) for (l = k2.value, m = t([l.audio, l.video]), n = m.next(); !n.done; n = m.next()) (q = n.value) && q.segmentIndex && q.segmentIndex.release();
                  r = t(c.i.textStreams);
                  for (u = r.next(); !u.done; u = r.next()) v = u.value, v.segmentIndex && v.segmentIndex.release();
                }
                c.g && c.g.streaming.clearDecodingCache && (Kf.clear(), yg.clear());
                c.i = null;
                c.B = new Xn();
                c.Kh = null;
                c.cc = null;
                c.V = null;
                c.Ke = -1;
                c.Ge = [];
                w = t(c.yc.values());
                for (z = w.next(); !z.done; z = w.next()) y = z.value, y.stop();
                c.yc.clear();
                c.ob = [];
                c.Xf = -1;
                c.N && c.N.Rh();
                Uq(c);
              case 3:
                Ba(B);
                c.aa.release();
                Da(B, 4);
                break;
              case 4:
                rb();
                if (a && Mc() && !c.H && c.h) return F(B, Tq(c), 0);
                B.A(0);
            }
          });
        };
        p.jl = function(a) {
          this.O = a;
        };
        p.load = function(a, b, c) {
          b = b === void 0 ? null : b;
          var d = this, e, f, g, h, k2, l, m, n, q, r, u, v, w, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                if (d.m == Mq) throw new U(2, 7, 7e3);
                if (d.h || !d.ma) {
                  y.A(2);
                  break;
                }
                return F(y, d.Vb(d.ma, true), 3);
              case 3:
                d.ma = null;
              case 2:
                e = null;
                f = "";
                if (a instanceof co) {
                  if (a.l) throw new U(2, 7, 7006);
                  e = a;
                  f = e.rd() || "";
                } else f = a || "";
                return F(y, Bq(d.aa, "load"), 4);
              case 4:
                d.aa.release();
                if (!d.h) throw new U(2, 7, 7002);
                if (!d.X) {
                  y.A(5);
                  break;
                }
                d.X = f;
                return F(y, d.Cc(false), 5);
              case 5:
                g = ++d.Je;
                h = function() {
                  return Q(function(B) {
                    if (B.g == 1) return d.Je == g ? B.A(0) : e ? F(B, e.destroy(), 3) : B.A(3);
                    throw new U(2, 7, 7e3);
                  });
                };
                k2 = function(B, C) {
                  return Q(function(H) {
                    switch (H.g) {
                      case 1:
                        return sa(H, 2), F(H, Bq(d.aa, C), 4);
                      case 4:
                        return F(H, h(), 5);
                      case 5:
                        return F(H, B(), 6);
                      case 6:
                        return F(H, h(), 7);
                      case 7:
                        e && d.g && (e.g = d.g);
                      case 2:
                        Ba(H), d.aa.release(), Da(H, 0);
                    }
                  });
                };
                ra(y, 7, 8);
                b == null && e && (b = e.getStartTime());
                d.O = b;
                d.Ua = false;
                d.dispatchEvent(Lq("loading"));
                if (e) {
                  c = e.V;
                  y.A(10);
                  break;
                }
                if (c) {
                  y.A(10);
                  break;
                }
                return F(y, k2(function() {
                  return Q(function(B) {
                    if (B.g == 1) return F(
                      B,
                      Vq(d, f),
                      2
                    );
                    c = B.h;
                    G(B);
                  });
                }, "guessMimeType_"), 10);
              case 10:
                l = !!e;
                if (e) {
                  go(e, d);
                  d.B = e.getStats();
                  y.A(13);
                  break;
                }
                return F(y, Wq(d, f, b, c, true, d.g), 14);
              case 14:
                (e = y.h) ? (e.F = false, go(e, d), d.B = e.getStats(), e.start(), e.B.catch(function() {
                })) : d.B = new Xn();
              case 13:
                m = !e;
                n = Date.now() / 1e3;
                d.B = e ? e.getStats() : new Xn();
                d.X = f;
                d.Fa = c || null;
                Uq(d);
                q = function() {
                  var B = d.h ? d.h.buffered : null;
                  return { start: wj(B) || 0, end: xj(B) || 0 };
                };
                d.ya = new bm(q);
                d.ya.addEventListener("regionadd", function(B) {
                  Xq(d, B.region, "metadataadded");
                });
                if (m) return F(
                  y,
                  k2(function() {
                    return Q(function(B) {
                      return F(B, Yq(d, c), 0);
                    });
                  }, "initializeSrcEqualsDrmInner_"),
                  25
                );
                d.kb = new bm(q);
                return F(y, k2(function() {
                  return Q(function(B) {
                    if (B.g == 1) return F(B, Promise.race([e.ma, e.B]), 2);
                    d.zc = e.H;
                    var C = e;
                    C.oa = true;
                    d.I = C.m;
                    d.i = e.Hg();
                    G(B);
                  });
                }, "waitForFinish"), 17);
              case 17:
                if (d.H) {
                  y.A(18);
                  break;
                }
                return F(y, k2(function() {
                  return Q(function(B) {
                    return F(B, Tq(d), 0);
                  });
                }, "initializeMediaSourceEngineInner_"), 18);
              case 18:
                return d.i && d.i.textStreams.length && (d.u.enableTextDisplayer ? d.u.enableTextDisplayer() : xb("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method!')), F(y, k2(function() {
                  return Q(function(B) {
                    return F(B, e.B, 0);
                  });
                }, "waitForFinish"), 20);
              case 20:
                d.g = e.getConfiguration();
                d.Ae = e.G;
                d.I && d.I.setMediaElement && d.h && d.I.setMediaElement(d.h);
                d.we = ho(e);
                d.ue = e.Fa;
                if (r = e.C) d.J = r;
                l && d.h && d.h.nodeName === "AUDIO" && (Zq(d), d.configure("manifest.disableVideo", true));
                if (e.j) {
                  y.A(21);
                  break;
                }
                return F(
                  y,
                  k2(function() {
                    return Q(function(B) {
                      return F(B, mo(e, d.h), 0);
                    });
                  }, "drmEngine_.init"),
                  21
                );
              case 21:
                return d.F = io(e), F(y, k2(function() {
                  return Q(function(B) {
                    return F(B, d.F.Vb(d.h), 0);
                  });
                }, "drmEngine_.attach"), 23);
              case 23:
                return u = d.g.abrFactory, d.o && d.Ce == u || (d.Ce = u, d.o && d.o.release(), d.o = u(), typeof d.o.setMediaElement != "function" && (xb("AbrManager w/o setMediaElement", "Please use an AbrManager with setMediaElement function."), d.o.setMediaElement = function() {
                }), typeof d.o.setCmsdManager != "function" && (xb("AbrManager w/o setCmsdManager", "Please use an AbrManager with setCmsdManager function."), d.o.setCmsdManager = function() {
                }), typeof d.o.trySuggestStreams != "function" && (xb("AbrManager w/o trySuggestStreams", "Please use an AbrManager with trySuggestStreams function."), d.o.trySuggestStreams = function() {
                }), d.o.configure(d.g.abr)), v = jo(e), w = e.i, F(y, k2(function() {
                  return Q(function(B) {
                    return F(B, $q(d, n, w, v), 0);
                  });
                }, "loadInner_"), 24);
              case 24:
                fo(e);
                d.Fa && rb().bj() && Te(d.Fa) && qk(d.H, d.X, d.Fa);
                y.A(16);
                break;
              case 25:
                return F(
                  y,
                  k2(function() {
                    return Q(function(B) {
                      return F(B, ar(d, n, c), 0);
                    });
                  }, "srcEqualsInner_"),
                  16
                );
              case 16:
                d.dispatchEvent(Lq("loaded"));
              case 8:
                Ba(y);
                if (!e) {
                  y.A(27);
                  break;
                }
                return F(y, e.destroy(), 27);
              case 27:
                d.eb = null;
                Da(y, 0);
                break;
              case 7:
                z = Aa(y);
                if (!z || z.code == 7e3) {
                  y.A(29);
                  break;
                }
                return F(y, d.Cc(false), 29);
              case 29:
                throw z;
            }
          });
        };
        function Zq(a) {
          for (var b = t(a.i.variants), c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.closeSegmentIndex(), c.video = null), c.bandwidth = c.audio && c.audio.bandwidth ? c.audio.bandwidth : 0;
          a.i.variants = a.i.variants.filter(function(d) {
            return d.audio;
          });
        }
        p.ej = function(a, b, c) {
          a = a === void 0 ? true : a;
          b = b === void 0 ? false : b;
          c = c === void 0 ? false : c;
          var d = this, e;
          return Q(function(f) {
            return f.g == 1 ? F(f, br(d, c), 2) : f.g != 3 ? (e = f.h, F(f, d.Cc(a, b), 3)) : f.return(e);
          });
        };
        p.Vh = function(a, b) {
          a = a === void 0 ? false : a;
          b = b === void 0 ? false : b;
          var c = this, d;
          return Q(function(e) {
            return e.g == 1 ? F(e, br(c, b), 2) : e.g != 3 ? (d = e.h, F(e, c.detach(a), 3)) : e.return(d);
          });
        };
        function br(a, b) {
          b = b === void 0 ? false : b;
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) {
              c = null;
              if (!(a.i && a.I && a.zc && a.X && a.g)) return f.A(2);
              d = a.h.currentTime;
              b || (d = null);
              return F(f, cr(a, a.X, d, a.Fa, a.g, true, false), 3);
            }
            if (f.g != 2) {
              c = f.h;
              a.Ee.push(c);
              a.I && a.I.setMediaElement && a.I.setMediaElement(null);
              if (e = a.l ? a.l.o : null) c.i = e;
              var g = c, h = a.I, k2 = a.zc;
              g.h = a.i;
              g.m = h;
              g.H = k2;
              c.C = a.J;
              c.start();
              a.i = null;
              a.I = null;
              a.zc = null;
              a.o = null;
              a.Ce = null;
            }
            return f.return(c);
          });
        }
        p.preload = function(a, b, c, d) {
          b = b === void 0 ? null : b;
          var e = this, f, g;
          return Q(function(h) {
            if (h.g == 1) return f = Dq(e), Rn(f, d || e.g, Dq(e)), F(h, Wq(e, a, b, c, false, f), 2);
            (g = h.h) ? g.start() : Sq(e, new U(2, 7, 7005));
            return h.return(g);
          });
        };
        p.ng = function() {
          var a = this, b, c, d, e;
          return Q(function(f) {
            b = [];
            c = t(a.Ee);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, e.l || b.push(e.destroy());
            a.Ee = [];
            return F(f, Promise.all(b), 0);
          });
        };
        function Wq(a, b, c, d, e, f) {
          e = e === void 0 ? false : e;
          var g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) return d ? m.A(2) : F(m, Vq(a, b), 3);
            m.g != 2 && (d = m.h);
            if (g = dr(a, d)) return m.return(null);
            h = f || a.g;
            k2 = false;
            e && a.h && a.h.nodeName === "AUDIO" && (k2 = true);
            l = cr(a, b, c, d || null, h, !e, k2);
            l = e ? l.then(function(n) {
              n.F = false;
              return n;
            }) : l.then(function(n) {
              a.Ee.push(n);
              return n;
            });
            return m.return(l);
          });
        }
        function cr(a, b, c, d, e, f, g) {
          f = f === void 0 ? true : f;
          g = g === void 0 ? false : g;
          var h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H;
          return Q(function(D) {
            if (D.g == 1) {
              h = null;
              k2 = jd(e);
              g && (k2.manifest.disableVideo = true);
              l = function() {
                return h.R && h.l ? null : h;
              };
              m = function() {
                return l() ? l().getConfiguration() : a.g;
              };
              if (a.xa.width != Infinity || a.xa.height != Infinity || a.g.ignoreHardwareResolution) return D.A(2);
              n = rb();
              return F(D, n.lc(), 3);
            }
            D.g != 2 && (q = D.h, a.xa.width = q.width, a.xa.height = q.height);
            r = new qi(k2, a.xa, null);
            u = { networkingEngine: a.N, filter: function(A) {
              var E, J;
              return Q(function(I) {
                if (I.g == 1) return F(I, ri(r, A), 2);
                if (I.g != 4) {
                  E = I.h;
                  if (!E) return I.A(0);
                  J = Lq("trackschanged");
                  return F(I, Promise.resolve(), 4);
                }
                h.dispatchEvent(J);
                G(I);
              });
            }, makeTextStreamsForClosedCaptions: function(A) {
              return er(a, A);
            }, onTimelineRegionAdded: function(A) {
              cm(h.I, A);
            }, onEvent: function(A) {
              return h.dispatchEvent(A);
            }, onError: function(A) {
              return h.onError(A);
            }, isLowLatencyMode: function() {
              return m().streaming.lowLatencyMode;
            }, updateDuration: function() {
              a.l && h.R && a.l.updateDuration();
            }, newDrmInfo: function(A) {
              var E = h.j, J = E ? E.g : null;
              J && E.B && ui(r, J.keySystem, A);
            }, onManifestUpdated: function() {
              var A = (/* @__PURE__ */ new Map()).set("isLive", a.W());
              h.dispatchEvent(Lq("manifestupdated", A));
              eo(h, false, function() {
                if (a.C) a.C.onManifestUpdated(a.W());
              });
            }, getBandwidthEstimate: function() {
              return a.o.getBandwidthEstimate();
            }, onMetadata: function(A, E, J, I) {
              var K = A;
              if (A == "com.apple.hls.interstitial" || A == "com.apple.hls.overlay") {
                if (K = "com.apple.quicktime.HLS", A = { startTime: E, endTime: J, values: I }, a.C) a.C.onHLSInterstitialMetadata(a, a.h, A);
              }
              I = t(I);
              A = I.next();
              for (var L = {}; !A.done; L = { Yg: void 0 }, A = I.next()) L.Yg = A.value, L.Yg.name != "ID" && eo(h, false, /* @__PURE__ */ (function(O) {
                return function() {
                  fr(a, E, J, K, O.Yg);
                };
              })(L));
            }, disableStream: function(A) {
              return a.disableStream(A, a.g.streaming.maxDisabledTime);
            }, addFont: function(A, E) {
              return a.addFont(A, E);
            } };
            v = new bm(function() {
              return a.Ra();
            });
            v.addEventListener("regionadd", function(A) {
              var E = A.region;
              gr(a, "timelineregionadded", E, h);
              eo(h, false, function() {
                a.C && (a.C.onDashTimedMetadata(E), a.C.onDASHInterstitialMetadata(a, a.h, E));
              });
            });
            w = null;
            k2.streaming.observeQualityChanges && (w = new Wl(function() {
              return a.Gc();
            }), w.addEventListener("qualitychange", function(A) {
              hr(a, A.quality, A.position);
            }), w.addEventListener("audiotrackchange", function(A) {
              hr(a, A.quality, A.position, true);
            }));
            z = true;
            y = { vc: a.N, onError: function(A) {
              return h.onError(A);
            }, vf: function(A) {
              eo(h, true, function() {
                a.F && ir(a, A);
              });
            }, onExpirationUpdated: function(A, E) {
              var J = Lq("expirationupdated");
              h.dispatchEvent(J);
              if ((J = h.m) && J.onExpirationUpdated) J.onExpirationUpdated(A, E);
            }, onEvent: function(A) {
              h.dispatchEvent(A);
              A.type == "drmsessionupdate" && z && (z = false, A = Date.now() / 1e3 - h.ya, (a.B || h.getStats()).m = A, a.T && Gc(a.T));
            } };
            B = Eq(a, l);
            Tg(a.N, B);
            C = function() {
              return a.md(y);
            };
            H = { config: k2, vk: u, Gk: v, Fk: w, md: C, tk: r, networkingEngine: B, jj: f };
            h = new co(b, d, c, H);
            return D.return(h);
          });
        }
        function Vq(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) return c = a.g.manifest.retryParameters, F(g, Po(b, a.N, c), 2);
            d = g.h;
            d == "application/x-mpegurl" && (e = rb(), e.Ha() === "WEBKIT" && (d = "application/vnd.apple.mpegurl"));
            d == "video/quicktime" && (f = rb(), f.Ha() === "CHROMIUM" && (d = "video/mp4"));
            return g.return(d);
          });
        }
        function dr(a, b) {
          if (!Mc(rb())) return true;
          if (b) {
            if ((a.h || Nc()).canPlayType(b) == "") return false;
            if (!Mc(rb()) || !Kc.has(b)) return true;
            if (Te(b)) return rb().Ha() === "WEBKIT" && (a.g.drm.servers["com.apple.fps"] || a.g.drm.servers["com.apple.fps.1_0"]) ? a.g.streaming.useNativeHlsForFairPlay : a.g.streaming.preferNativeHls;
            if (b === "application/dash+xml" || b === "video/vnd.mpeg.dash.mpd") return a.g.streaming.preferNativeDash;
          }
          return false;
        }
        function jr(a, b) {
          var c = a.g.textDisplayFactory;
          a.Kh !== c || (b === void 0 ? 0 : b) ? (b = a.u, a.u = c(), a.u.configure ? a.u.configure(a.g.textDisplayer) : xb("Text displayer w/ configure", 'Text displayer should have a "configure" method!'), a.u.setTextLanguage || xb("Text displayer w/ setTextLanguage", 'Text displayer should have a "setTextLanguage" method!'), b ? (a.u.setTextVisibility(b.isTextVisible()), b.destroy().catch(function() {
          })) : a.u.setTextVisibility(a.$), a.H && dl(a.H, a.u), a.Kh = c, a.l && Nm(a.l)) : a.u && a.u.configure && a.u.configure(a.g.textDisplayer);
        }
        function Tq(a) {
          var b, c, d;
          return Q(function(e) {
            if (e.g == 1) return rb(), Pq(a, "media-source"), a.g.mediaSource.useSourceElements && Ej(a.h), jr(a), b = kr(a.h, a.u, { Jj: function() {
              return a.keySystem();
            }, onMetadata: function(f, g, h) {
              f = t(f);
              for (var k2 = f.next(); !k2.done; k2 = f.next()) if (k2 = k2.value, k2.data && typeof k2.cueTime == "number" && k2.frames) {
                var l = k2.cueTime + g, m = h;
                m && l > m && (m = l);
                for (var n = t(k2.frames), q = n.next(); !q.done; q = n.next()) fr(a, l, m, "org.id3", q.value);
                if (a.C) a.C.onHlsTimedMetadata(k2, l);
              }
            }, Ak: function(f) {
              a.kb && cm(
                a.kb,
                { schemeIdUri: f.schemeIdUri, startTime: f.startTime, endTime: f.endTime, id: String(f.id), emsg: f }
              );
            }, onEvent: function(f) {
              return a.dispatchEvent(f);
            }, Ck: function() {
              a.I && a.I.update && a.I.update();
            } }, a.T, a.g.mediaSource), c = a.g.manifest, d = c.segmentRelativeVttTiming, b.Fa = d, F(e, b.M, 2);
            a.H = b;
            G(e);
          });
        }
        function lr(a, b, c) {
          function d() {
            return mr(a);
          }
          a.j.D(b, "playing", d);
          a.j.D(b, "pause", d);
          a.j.D(b, "ended", d);
          a.j.D(b, "ratechange", function() {
            var f = a.h.playbackRate;
            f != 0 && (a.M && (a.M.set(f), a.m == nr && a.o.playbackRateChanged(f), or(a, f)), f = Lq("ratechange"), a.dispatchEvent(f));
          });
          b.remote && (a.j.D(b.remote, "connect", function() {
            a.l && b.remote.state == "connected" && pr(a);
            qr(a);
          }), a.j.D(b.remote, "connecting", function() {
            return qr(a);
          }), a.j.D(b.remote, "disconnect", function() {
            return Q(function(f) {
              if (f.g == 1) return a.l && b.remote.state == "disconnected" ? F(f, an(a.l), 3) : f.A(2);
              f.g != 2 && pr(a);
              qr(a);
              G(f);
            });
          }));
          b.audioTracks && (a.j.D(b.audioTracks, "addtrack", function() {
            return qr(a);
          }), a.j.D(b.audioTracks, "removetrack", function() {
            return qr(a);
          }), a.j.D(b.audioTracks, "change", function() {
            return qr(a);
          }));
          b.videoTracks && (a.j.D(b.videoTracks, "addtrack", function() {
            return qr(a);
          }), a.j.D(b.videoTracks, "removetrack", function() {
            return qr(a);
          }), a.j.D(b.videoTracks, "change", function() {
            return qr(a);
          }));
          (b.webkitPresentationMode || b.webkitSupportsFullscreen) && a.j.D(b, "webkitpresentationmodechanged", function() {
            a.xe && jr(a, true);
          });
          if (b.textTracks) {
            var e = function() {
              a.m === rr && a.u instanceof cp && pr(a);
              qr(a);
            };
            a.j.D(b.textTracks, "addtrack", function(f) {
              if (f.track) switch (f = f.track, f.kind) {
                case "metadata":
                  sr(a, f);
                  break;
                case "chapters":
                  tr(a, f);
                  break;
                default:
                  e();
              }
            });
            a.j.D(b.textTracks, "removetrack", e);
            a.j.D(b.textTracks, "change", e);
          }
          b.preload != "none" && a.j.za(b, "loadedmetadata", function() {
            a.B.G = Date.now() / 1e3 - c;
          });
        }
        function $q(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                Pq(a, "load");
                e = a.h;
                a.M = new Sl({ Ye: function() {
                  return e.playbackRate;
                }, Tc: function() {
                  return e.defaultPlaybackRate;
                }, qh: function(R) {
                  e.playbackRate = R;
                }, xi: function(R) {
                  e.currentTime += R;
                } });
                lr(a, e, b);
                "onchange" in window2.screen && a.j.D(window2.screen, "change", function() {
                  if (a.J.getConfiguration) {
                    var R = a.J.getConfiguration();
                    R.hdrLevel == "AUTO" ? ur(a) : a.g.preferredVideoHdrLevel == "AUTO" && a.g.abr.enabled && (R.hdrLevel = "AUTO", a.J.configure(R), ur(a));
                  }
                });
                f = false;
                g = t(a.i.variants);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, (l = k2.video && k2.video.dependencyStream) && (f = Hc(l));
                Kq(a, a.g, f);
                a.Jd = a.g.preferredTextLanguage;
                a.Md = a.g.preferredTextRole;
                a.Ld = a.g.preferForcedSubs;
                vr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                a.o.init(function(R, T, ma) {
                  a.i && a.l && R != a.l.o && wr(a, R, true, T === void 0 ? false : T, ma === void 0 ? 0 : ma);
                });
                a.o.setMediaElement(e);
                a.o.setCmsdManager(a.va);
                a.l = xr(a);
                a.l.configure(a.g.streaming);
                a.m = nr;
                a.dispatchEvent(Lq("streaming"));
                m = c;
              case 2:
                (q = a.l.o) || m || (m = yr(a, true));
                r = [];
                n = q || m;
                u = t([n.video, n.audio]);
                for (v = u.next(); !v.done; v = u.next()) (w = v.value) && !w.segmentIndex && (r.push(w.createSegmentIndex()), w.dependencyStream && r.push(w.dependencyStream.createSegmentIndex()));
                if (!(r.length > 0)) {
                  M.A(4);
                  break;
                }
                return F(M, Promise.all(r), 4);
              case 4:
                if (!n || n.disabledUntilTime != 0) {
                  M.A(2);
                  break;
                }
                if (a.I && a.I.onInitialVariantChosen) a.I.onInitialVariantChosen(n);
                a.i.isLowLatency && (a.g.streaming.lowLatencyMode ? a.configure(a.Zf) : $a("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."));
                a.K && (xp(a.K, a.i.isLowLatency && a.g.streaming.lowLatencyMode), Cp(a.K, b * 1e3));
                vr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                Dm(a.l, a.g.playRangeStart, a.g.playRangeEnd);
                a.Ua = true;
                a.dispatchEvent(Lq("canupdatestarttime"));
                z = function(R) {
                  a.G = zr(a, R);
                  a.ac = Ar(a, R);
                  Br(a, e, false);
                };
                a.g.streaming.startAtSegmentBoundary || (y = a.O, y == null && a.i.startTime && (y = a.i.startTime), z(y));
                if (q) {
                  M.A(7);
                  break;
                }
                if (!a.g.streaming.startAtSegmentBoundary) {
                  M.A(8);
                  break;
                }
                B = a.i.presentationTimeline;
                a.O instanceof Date && (H = B.m || B.i, D = a.O.getTime() / 1e3 - H, D != null && (C = D));
                C == null && (C = typeof a.O === "number" ? a.O : a.h.currentTime);
                a.O == null && a.i.startTime && (C = a.i.startTime);
                A = B.Zb();
                E = B.Hb();
                C < A ? C = A : C > E && (C = E);
                return F(M, Cr(m, C), 9);
              case 9:
                J = M.h, z(J);
              case 8:
                wr(a, m, true, false, 0);
              case 7:
                return a.G.ready(), I = a.Lc().find(function(R) {
                  return R.active;
                }), I || ((K = hg(a.i.textStreams, a.Jd, a.Md, a.Ld)[0] || null) && Wn(a.B.h, K, true), m && (K ? (lg(m.audio, K, a.g) && (a.$ = true), a.$ && a.u.setTextVisibility(true)) : (a.$ = false, a.u.setTextVisibility(false)), Dr(a)), K && (a.g.streaming.alwaysStreamText || a.Og()) && (Mm(a.l, K), Er(a))), F(M, a.l.start(d), 10);
              case 10:
                a.g.abr.enabled && (a.o.enable(), Fr(a));
                qr(a);
                a.i.variants.some(function(R) {
                  return R.primary;
                });
                if ((L = a.W()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.i.serviceDescription || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) O = function() {
                  return Gr(a);
                }, a.j.D(e, "timeupdate", O);
                L || (P = function() {
                  return Hr(a);
                }, a.j.D(e, "timeupdate", P), Hr(a), a.i.nextUrl && (a.g.streaming.preloadNextUrlWindow > 0 && (N = function() {
                  var R;
                  return Q(function(T) {
                    if (T.g == 1) {
                      R = a.Ra().end - a.h.currentTime;
                      if (isNaN(R) || !(R <= a.g.streaming.preloadNextUrlWindow)) return T.A(0);
                      a.j.Ma(e, "timeupdate", N);
                      return F(T, a.preload(a.i.nextUrl), 4);
                    }
                    a.eb = T.h;
                    G(T);
                  });
                }, a.j.D(e, "timeupdate", N)), a.j.D(e, "ended", function() {
                  a.load(a.eb || a.i.nextUrl);
                })));
                if (a.C) a.C.onManifestUpdated(L);
                G(M);
            }
          });
        }
        function Yq(a, b) {
          var c, d, e;
          return Q(function(f) {
            return f.g == 1 ? (c = Date.now() / 1e3, d = true, a.F = a.md({ vc: a.N, onError: function(g) {
              Sq(a, g);
            }, vf: function() {
            }, onExpirationUpdated: function() {
              var g = Lq("expirationupdated");
              a.dispatchEvent(g);
            }, onEvent: function(g) {
              a.dispatchEvent(g);
              g.type == "drmsessionupdate" && d && (d = false, a.B.m = Date.now() / 1e3 - c);
            } }), a.F.configure(a.g.drm), e = mg([b]), a.F.O = true, F(f, Ih(a.F, [e], []), 2)) : F(f, a.F.Vb(a.h), 0);
          });
        }
        function ar(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                Pq(a, "src-equals");
                d = a.h;
                a.G = new El(d);
                e = false;
                a.ze.push(function() {
                  e = true;
                });
                a.dispatchEvent(Lq("canupdatestarttime"));
                a.O != null && a.G.Wf(a.O);
                a.ac = Ir(a, a.O || 0);
                a.M = new Sl({ Ye: function() {
                  return d.playbackRate;
                }, Tc: function() {
                  return d.defaultPlaybackRate;
                }, qh: function(w) {
                  d.playbackRate = w;
                }, xi: function(w) {
                  d.currentTime += w;
                } });
                Br(a, d, true);
                d.textTracks && (jr(a), f = function(w) {
                  if (!(a.u instanceof cp)) {
                    var z = Jr(a).find(function(y) {
                      return y.mode !== "disabled";
                    });
                    z && (z.mode = w ? "showing" : "hidden");
                    a.u instanceof ep && (z = Kr(a)) && (z.mode = !w && a.u.isTextVisible() ? "showing" : "hidden");
                  }
                }, a.j.D(d, "enterpictureinpicture", function() {
                  return f(true);
                }), a.j.D(d, "leavepictureinpicture", function() {
                  return f(false);
                }), d.remote ? (a.j.D(d.remote, "connect", function() {
                  return f(false);
                }), a.j.D(d.remote, "connecting", function() {
                  return f(false);
                }), a.j.D(d.remote, "disconnect", function() {
                  return f(false);
                })) : "webkitCurrentPlaybackTargetIsWireless" in d && a.j.D(
                  d,
                  "webkitcurrentplaybacktargetiswirelesschanged",
                  function() {
                    return f(false);
                  }
                ), g = d, (g.webkitPresentationMode || g.webkitSupportsFullscreen) && a.j.D(g, "webkitpresentationmodechanged", function() {
                  g.webkitPresentationMode ? f(g.webkitPresentationMode !== "inline") : g.webkitSupportsFullscreen && f(g.webkitDisplayingFullscreen);
                }));
                lr(a, d, b);
                h = Ep(a.K, a.X, c);
                !h.includes("#t=") && (a.g.playRangeStart > 0 || isFinite(a.g.playRangeEnd)) && (h += "#t=", a.g.playRangeStart > 0 && (h += a.g.playRangeStart), isFinite(a.g.playRangeEnd) && (h += "," + a.g.playRangeEnd));
                if (!a.H) {
                  v.A(2);
                  break;
                }
                return F(
                  v,
                  a.H.destroy(),
                  3
                );
              case 3:
                a.H = null;
              case 2:
                return Ej(d), d.src = h, k2 = rb(), k2.Oa() == "TV" && d.load(), d.preload != "none" && !d.autoplay && Te(c) && k2.Ha() === "WEBKIT" && d.load(), a.m = rr, a.dispatchEvent(Lq("streaming")), l = function() {
                  return new Promise(function(w) {
                    var z = new gf(w);
                    a.j.D(d.textTracks, "change", function() {
                      return z.ia(0.5);
                    });
                    z.ia(0.5);
                  });
                }, m = new Cg(), vl(d, HTMLMediaElement.HAVE_METADATA, a.j, function() {
                  return Q(function(w) {
                    if (w.g == 1) return a.G.ready(), a.Fa && Te(a.Fa) ? F(w, l(), 3) : (m.resolve(), w.A(0));
                    m.resolve();
                    G(w);
                  });
                }), vl(d, HTMLMediaElement.HAVE_CURRENT_DATA, a.j, function() {
                  var w, z, y, B, C;
                  return Q(function(H) {
                    if (H.g == 1) return F(H, l(), 2);
                    if (e) return H.return();
                    Lr(a);
                    w = Jr(a);
                    w.some(function(D) {
                      return D.mode === "showing";
                    }) && (a.$ = true, a.u.setTextVisibility(true));
                    if (!(a.u instanceof cp)) for (w.length && (a.u.enableTextDisplayer ? a.u.enableTextDisplayer() : xb("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method')), z = false, y = t(w), B = y.next(); !B.done; B = y.next()) C = B.value, C.mode !== "disabled" && (z ? (C.mode = "disabled", $a("Found more than one enabled text track, disabling it", C)) : (Mr(a, C), z = true));
                    Nr(a);
                    G(H);
                  });
                }), d.error ? m.reject(Rq(a)) : d.preload == "none" && ($a('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'), m.resolve()), a.j.za(d, "error", function() {
                  m.reject(Rq(a));
                }), F(v, lf(a.g.streaming.loadTimeout, m), 4);
              case 4:
                if ((n = a.W()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) q = function() {
                  return Gr(a);
                }, a.j.D(d, "timeupdate", q);
                n || (r = function() {
                  return Hr(a);
                }, a.j.D(d, "timeupdate", r), Hr(a));
                a.C && (a.C.onManifestUpdated(n), n && (u = a.Ra().end, a.j.D(d, "progress", function() {
                  var w = a.Ra().end;
                  u != w && (a.C.onManifestUpdated(a.W()), u = w);
                })));
                a.Ua = true;
                G(v);
            }
          });
        }
        function Lr(a) {
          var b = a.g.preferredAudioLanguage;
          b != "" && a.Oi(b, a.g.preferredAudioRole);
        }
        function Nr(a) {
          var b = a.g.preferredTextLanguage;
          b != "" && a.kh(b, a.g.preferredTextRole, a.g.preferForcedSubs);
        }
        function sr(a, b) {
          if (b.kind == "metadata") {
            b.mode = "hidden";
            a.j.D(b, "cuechange", function() {
              if (b.activeCues) {
                for (var d = t(b.activeCues), e = d.next(); !e.done; e = d.next()) if (e = e.value, fr(a, e.startTime, e.endTime, e.type, e.value), a.C) a.C.onCueMetadataChange(e.value);
              }
              if (b.cues) {
                d = [];
                e = t(b.cues);
                for (var f = e.next(), g = {}; !f.done; g = { Ec: void 0 }, f = e.next()) g.Ec = f.value, g.Ec.type == "com.apple.quicktime.HLS" && g.Ec.startTime != null && (f = d.find(/* @__PURE__ */ (function(h) {
                  return function(k2) {
                    return k2.startTime == h.Ec.startTime && k2.endTime == h.Ec.endTime;
                  };
                })(g)), f || (f = { startTime: g.Ec.startTime, endTime: g.Ec.endTime, values: [] }, d.push(f)), f.values.push(g.Ec.value));
                d = t(d);
                for (e = d.next(); !e.done; e = d.next()) e = e.value, e.values.some(function(h) {
                  return h.key == "X-ASSET-URI" || h.key == "X-ASSET-LIST";
                }) && a.C && (e.values.push({ key: "CUE", description: "", data: e.startTime != 0 || a.W() ? "ONCE" : "ONCE,PRE", mimeType: null, pictureType: null }), a.C.onHLSInterstitialMetadata(a, a.h, e));
              }
            });
            var c = new gf(function() {
              var d = Or(a);
              d = t(d);
              for (var e = d.next(); !e.done; e = d.next()) e.value.mode = "hidden";
            }).Kb().ia(0.5);
            a.ze.push(function() {
              c.stop();
            });
          }
        }
        function Xq(a, b, c) {
          b = (/* @__PURE__ */ new Map()).set("startTime", b.startTime).set("endTime", b.endTime).set("metadataType", b.schemeIdUri).set("payload", b.payload);
          a.dispatchEvent(Lq(c, b));
        }
        function fr(a, b, c, d, e) {
          a.ya && (b = { schemeIdUri: d, startTime: b, endTime: c || Infinity, id: "", payload: e }, b.id = JSON.stringify(b), cm(a.ya, b));
        }
        function tr(a, b) {
          if (b && b.kind == "chapters") {
            b.mode = "hidden";
            var c = new gf(function() {
              b.mode = "hidden";
            }).Kb().ia(0.5);
            a.ze.push(function() {
              c.stop();
            });
          }
        }
        p.Kk = function() {
          for (var a = this.aa; a.g; ) a.release();
        };
        p.md = function(a) {
          return new yh(a);
        };
        function Eq(a, b) {
          function c(f) {
            b() ? b().dispatchEvent(f) : a.dispatchEvent(f);
          }
          function d(f) {
            b() ? eo(b(), true, f) : f();
          }
          b || (b = function() {
            return null;
          });
          var e = new Pg(function(f, g, h, k2, l) {
            d(function() {
              a.o && a.o.segmentDownloaded(f, g, h, k2, l);
            });
          }, function(f, g, h) {
            g = (/* @__PURE__ */ new Map()).set("headers", f).set("request", g).set("requestType", h);
            c(Lq("downloadheadersreceived", g));
            d(function() {
              if (a.va) {
                var k2 = a.va;
                if (k2.h.enabled) {
                  var l = f["cmsd-static"];
                  if (l) try {
                    var m = /* @__PURE__ */ new Map(), n = l.split(",");
                    for (l = 0; l < n.length; l++) {
                      var q = n[l].split("=");
                      m.set(q[0], zq(q[1]));
                    }
                  } catch (z) {
                  }
                  if (m = f["cmsd-dynamic"]) {
                    a: {
                      try {
                        var r = /* @__PURE__ */ new Map(), u = m.split(";");
                        for (m = 1; m < u.length; m++) {
                          var v = u[m].split("=");
                          r.set(v[0], zq(v[1]));
                        }
                        var w = r;
                        break a;
                      } catch (z) {
                        w = null;
                        break a;
                      }
                      w = void 0;
                    }
                    w && (k2.g = w);
                  }
                }
              }
            });
          }, function(f, g) {
            f = (/* @__PURE__ */ new Map()).set("request", f).set("response", g);
            c(Lq("downloadcompleted", f));
          }, function(f, g, h, k2) {
            f = (/* @__PURE__ */ new Map()).set("request", f).set("error", g).set("httpResponseCode", h).set("aborted", k2);
            c(Lq("downloadfailed", f));
          }, function(f, g, h) {
            d(function() {
              if (a.K) {
                var k2 = a.K, l = h;
                l = l === void 0 ? {} : l;
                if (k2.g.enabled) if (g.method === "HEAD") aq(k2, g, {});
                else switch (f) {
                  case 0:
                    try {
                      if (k2.g.enabled) {
                        if (l.type) {
                          a: {
                            switch (l.type) {
                              case 4:
                                var m = k2.u ? zp : yp;
                                break a;
                              case 3:
                              case 2:
                                m = k2.u ? Bp : Ap;
                                break a;
                              case 5:
                                m = "s";
                                break a;
                            }
                            m = void 0;
                          }
                          k2.l = m;
                        }
                        aq(k2, g, { ot: Ip, su: !k2.F });
                      }
                    } catch (q) {
                      ab("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", q);
                    }
                    break;
                  case $g:
                    try {
                      if (k2.g.enabled) {
                        var n = pq(k2, l, g.uris[0]);
                        n.ts = Date.now();
                        k2.m.has(g) && k2.m.delete(g);
                        k2.m.set(g, n.ts);
                        aq(k2, g, n);
                      }
                    } catch (q) {
                      ab(
                        "CMCD_SEGMENT_ERROR",
                        "Could not generate segment CMCD data.",
                        q
                      );
                    }
                    break;
                  case 2:
                  case 5:
                  case 6:
                    aq(k2, g, { ot: "k" });
                    break;
                  case 4:
                    aq(k2, g, { ot: "o" });
                }
              }
            });
          }, function(f, g, h, k2) {
            (f = b() ? b().m : a.I) && f.banLocation && f.banLocation(k2);
          }, function(f, g, h) {
            if (g.data) {
              var k2 = g.data.byteLength, l = b() ? b().getStats() : a.B;
              l && (ao(l, k2), f === 0 && (l.pi = k2));
              k2 = a.K;
              h = h === void 0 ? {} : h;
              if (Pp(k2).length !== 0) switch (f) {
                case $g:
                  try {
                    var m = pq(k2, h, g.uri);
                    g.originalRequest && g.originalRequest.timeToFirstByte != null && (m.ttfb = g.originalRequest.timeToFirstByte);
                    g.timeMs != null && (m.ttlb = g.timeMs);
                    var n = g.originalUri || g.uri;
                    if (n.includes("CMCD=")) try {
                      var q = new URL(n);
                      q.searchParams.delete("CMCD");
                      var r = q.toString();
                    } catch (A) {
                      r = n;
                    }
                    else r = n;
                    m.url = r;
                    k2.m.has(g.originalRequest) ? (m.ts = k2.m.get(g.originalRequest), k2.m.delete(g.originalRequest)) : m.ts || (m.ts = Date.now());
                    var u = Pp(k2);
                    if (u.length !== 0) {
                      var v = k2.g.version == Sp ? Array.from(new Set([].concat(x(Tp), x(tq)))) : eq;
                      m.rc = g.status || 0;
                      var w = Rp(k2, m, Qp);
                      g.headers && g.headers["CMSD-Static"] && (w.cmsds = btoa(g.headers["CMSD-Static"]));
                      g.headers && g.headers["CMSD-Dynamic"] && (w.cmsdd = btoa(g.headers["CMSD-Dynamic"]));
                      for (var z = t(u), y = z.next(); !y.done; y = z.next()) {
                        var B = y.value, C = Vp(B.includeKeys || [], v), H = cq(B);
                        k2.o[H] || (k2.o[H] = { request: 1, response: 1 });
                        w.sn = k2.o[H].response++;
                        var D = Xp(w, C);
                        $p(k2, D, B, g);
                      }
                    }
                  } catch (A) {
                    ab("CMCD_SEGMENT_ERROR", "Could not generate response segment CMCD data.", A);
                  }
              }
            }
          });
          e.configure(a.g.networking);
          return e;
        }
        function zr(a, b) {
          return new Hl(a.h, a.i, a.g.streaming, b, function() {
            a.ac && Vl(a.ac, !a.G.Ih());
            a.l && a.l.bd();
            a.R && Pr(a, "seeking");
          }, function(c) {
            return a.dispatchEvent(c);
          });
        }
        function Ar(a, b) {
          var c = a.W() || typeof b === "number" && b > 0;
          b = new Ko(a.we, c);
          b.addEventListener("enter", function(f) {
            gr(a, "timelineregionenter", f.region);
          });
          b.addEventListener("exit", function(f) {
            gr(a, "timelineregionexit", f.region);
          });
          b.addEventListener("skip", function(f) {
            var g = f.region;
            f.seeking || (gr(a, "timelineregionenter", g), gr(a, "timelineregionexit", g));
          });
          var d = new Ko(a.ya, c);
          d.addEventListener("enter", function(f) {
            Xq(a, f.region, "metadata");
          });
          c = new Ko(a.kb, c);
          c.addEventListener("enter", function(f) {
            f = (/* @__PURE__ */ new Map()).set(
              "detail",
              f.region.emsg
            );
            a.dispatchEvent(Lq("emsg", f));
          });
          var e = new Ul(a.h);
          e.g.add(b);
          e.g.add(d);
          e.g.add(c);
          a.ue && e.g.add(a.ue);
          return e;
        }
        function Ir(a, b) {
          b = new Ko(a.ya, b instanceof Date || b > 0);
          b.addEventListener("enter", function(d) {
            Xq(a, d.region, "metadata");
          });
          var c = new Ul(a.h);
          c.g.add(b);
          return c;
        }
        function Br(a, b, c) {
          a.R = new mi();
          pi(a.R, oi);
          Qr(a);
          Uq(a);
          a.Ta = new gf(function() {
            Pr(a);
          });
          a.g.streaming.rebufferingGoal && a.Ta.Ea(0.25);
          a.j.D(b, "waiting", function() {
            return Pr(a, "waiting");
          });
          a.j.D(b, "canplaythrough", function() {
            return Pr(a, "canplaythrough");
          });
          a.j.D(b, "playing", function() {
            return Pr(a, "playing");
          });
          a.j.D(b, "seeked", function() {
            return Pr(a, "seeked");
          });
          c && (a.j.D(b, "stalled", function() {
            return Pr(a, "stalled");
          }), a.j.D(b, "progress", function() {
            return Pr(a, "progress");
          }), a.j.D(b, "timeupdate", function() {
            return Pr(
              a,
              "timeupdate"
            );
          }));
        }
        function Qr(a) {
          var b = a.g.streaming.rebufferingGoal;
          a.R.i.set(ni, Math.min(0.5, b / 2)).set(oi, b);
        }
        function Pr(a, b) {
          if (a.g.streaming.rebufferingGoal) {
            b = a.H ? Ak(a.H) : false;
            b = a.be() || b || a.G.li();
            var c = zj(a.h.buffered, a.h.currentTime), d = a.R, e = d.i.get(d.g);
            pi(d, b || c >= e && c > 0 ? ni : oi) && Uq(a);
          } else if (b) {
            c = void 0;
            switch (b) {
              case "seeking":
              case "waiting":
                c = oi;
                break;
              case "canplaythrough":
              case "playing":
              case "seeked":
                c = ni;
            }
            c !== void 0 && pi(a.R, c) && Uq(a);
          }
        }
        function kr(a, b, c, d, e) {
          return new mk(a, b, c, e, d);
        }
        function xr(a) {
          return new xm(a.i, { nc: function() {
            return a.G ? a.G.He() : 0;
          }, getBandwidthEstimate: function() {
            return a.o.getBandwidthEstimate();
          }, Pb: function() {
            return a.Pb();
          }, video: a.h, Z: a.H, vc: a.N, onError: function(b) {
            return Sq(a, b);
          }, onEvent: function(b) {
            return a.dispatchEvent(b);
          }, wf: function(b, c, d) {
            var e = b.startTime, f = b.endTime, g = c.type;
            if (g != Ac) {
              if (a.G) {
                a.G.Ai();
                var h = Hk(a.H, g);
                !a.W() && a.h.paused && !a.h.seeking && h != null && h > 0 && a.G.He() < h && a.G.Wf(h);
              }
              Pr(a);
            }
            d = (/* @__PURE__ */ new Map()).set("start", e).set("end", f).set(
              "contentType",
              g
            ).set("isMuxed", d);
            a.dispatchEvent(Lq("segmentappended", d));
            a.o && c.fastSwitching && b.Xc && b.ee && a.o.trySuggestStreams();
          }, Bk: function(b, c) {
            (c = c.xd) && a.ue && Yl(a.ue, c, b);
          }, Ph: function(b, c) {
            var d = a.F;
            if (d.h.parseInbandPsshEnabled && !d.H && ["audio", "video"].includes(b)) {
              b = new wh(Vb(c));
              c = 0;
              for (var e = t(b.data), f = e.next(); !f.done; f = e.next()) c += f.value.length;
              if (c == 0) d = Promise.resolve();
              else {
                c = new Uint8Array(c);
                e = 0;
                b = t(b.data);
                for (f = b.next(); !f.done; f = b.next()) f = f.value, c.set(f, e), e += f.length;
                Rh(d, "cenc", c);
                d = d.m;
              }
            } else d = Promise.resolve();
            return d;
          }, disableStream: function(b, c) {
            return a.disableStream(b, c);
          }, $k: function(b, c) {
            return a.g.abr.enabled && c.fastSwitching && b.Xc && b.ee ? false : true;
          } });
        }
        p.configure = function(a, b) {
          var c = this.getConfiguration();
          arguments.length == 2 && typeof a == "string" && (a = qn(a, b));
          "preferredVariantRole" in a && (xb("preferredVariantRole configuration", "Please Use preferredAudioRole instead."), a.preferredAudioRole = a.preferredVariantRole, delete a.preferredVariantRole);
          a.streaming && "forceTransmuxTS" in a.streaming && (xb("streaming.forceTransmuxTS configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.mediaSource = a.streaming.forceTransmuxTS, delete a.streaming.forceTransmuxTS);
          a.streaming && "forceTransmux" in a.streaming && (xb("streaming.forceTransmux configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.mediaSource = a.streaming.forceTransmux, delete a.streaming.forceTransmux);
          if (a.streaming && "useNativeHlsOnSafari" in a.streaming) {
            xb("streaming.useNativeHlsOnSafari configuration", "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");
            var d = rb();
            a.streaming.preferNativeHls = a.streaming.useNativeHlsOnSafari && d.Ha() === "WEBKIT";
            delete a.streaming.useNativeHlsOnSafari;
          }
          a.streaming && typeof a.streaming.liveSync == "boolean" && (xb("streaming.liveSync", "Please Use streaming.liveSync.enabled instead."), d = a.streaming.liveSync, a.streaming.liveSync = {}, a.streaming.liveSync.enabled = d);
          if (a.streaming && !(a.streaming.liveSync && "targetLatency" in a.streaming.liveSync) && ("liveSyncMinLatency" in a.streaming || "liveSyncMaxLatency" in a.streaming)) {
            d = a.streaming.liveSyncMinLatency || 0;
            var e = Math.abs((a.streaming.liveSyncMaxLatency || 1) - d) / 2;
            a.streaming.liveSync = a.streaming.liveSync || {};
            a.streaming.liveSync.targetLatency = d + e;
            a.streaming.liveSync.targetLatencyTolerance = e;
          }
          a.streaming && "liveSyncMaxLatency" in a.streaming && (xb("streaming.liveSyncMaxLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMaxLatency);
          a.streaming && "liveSyncMinLatency" in a.streaming && (xb("streaming.liveSyncMinLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMinLatency);
          a.streaming && "liveSyncTargetLatency" in a.streaming && (xb("streaming.liveSyncTargetLatency", "Please Use streaming.liveSync.targetLatency instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatency = a.streaming.liveSyncTargetLatency, delete a.streaming.liveSyncTargetLatency);
          a.streaming && "liveSyncTargetLatencyTolerance" in a.streaming && (xb("streaming.liveSyncTargetLatencyTolerance", "Please Use streaming.liveSync.targetLatencyTolerance instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatencyTolerance = a.streaming.liveSyncTargetLatencyTolerance, delete a.streaming.liveSyncTargetLatencyTolerance);
          a.streaming && "liveSyncPlaybackRate" in a.streaming && (xb("streaming.liveSyncPlaybackRate", "Please Use streaming.liveSync.maxPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.maxPlaybackRate = a.streaming.liveSyncPlaybackRate, delete a.streaming.liveSyncPlaybackRate);
          a.streaming && "liveSyncMinPlaybackRate" in a.streaming && (xb("streaming.liveSyncMinPlaybackRate", "Please Use streaming.liveSync.minPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.minPlaybackRate = a.streaming.liveSyncMinPlaybackRate, delete a.streaming.liveSyncMinPlaybackRate);
          a.streaming && "liveSyncPanicMode" in a.streaming && (xb("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicMode = a.streaming.liveSyncPanicMode, delete a.streaming.liveSyncPanicMode);
          a.streaming && "liveSyncPanicThreshold" in a.streaming && (xb("streaming.liveSyncPanicThreshold", "Please Use streaming.liveSync.panicThreshold instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicThreshold = a.streaming.liveSyncPanicThreshold, delete a.streaming.liveSyncPanicThreshold);
          if (a.mediaSource && "sourceBufferExtraFeatures" in a.mediaSource) {
            xb("mediaSource.sourceBufferExtraFeatures configuration", "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");
            var f = a.mediaSource.sourceBufferExtraFeatures;
            a.mediaSource.addExtraFeaturesToSourceBuffer = function() {
              return f;
            };
            delete a.mediaSource.sourceBufferExtraFeatures;
          }
          a.manifest && a.manifest.hls && "useSafariBehaviorForLive" in a.manifest.hls && (xb("manifest.hls.useSafariBehaviorForLive configuration", "Please Use liveSync config to keep on live Edge instead."), delete a.manifest.hls.useSafariBehaviorForLive);
          a.streaming && "parsePrftBox" in a.streaming && (xb("streaming.parsePrftBox configuration", "Now fired without needing a configuration."), delete a.streaming.parsePrftBox);
          a.manifest && a.manifest.dash && "enableAudioGroups" in a.manifest.dash && (xb("manifest.dash.enableAudioGroups configuration", "Please Use manifest.enableAudioGroups instead."), a.manifest.enableAudioGroups = a.manifest.dash.enableAudioGroups, delete a.manifest.dash.enableAudioGroups);
          a.streaming && "dispatchAllEmsgBoxes" in a.streaming && (xb("streaming.dispatchAllEmsgBoxes configuration", "Please Use mediaSource.dispatchAllEmsgBoxes instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.dispatchAllEmsgBoxes = a.streaming.dispatchAllEmsgBoxes, delete a.streaming.dispatchAllEmsgBoxes);
          a.streaming && "autoLowLatencyMode" in a.streaming && (xb("streaming.autoLowLatencyMode configuration", "Please Use streaming.lowLatencyMode instead."), a.streaming.lowLatencyMode = a.streaming.autoLowLatencyMode, delete a.streaming.autoLowLatencyMode);
          a.manifest && a.manifest.dash && "ignoreSupplementalCodecs" in a.manifest.dash && (xb("manifest.dash.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.dash.ignoreSupplementalCodecs, delete a.manifest.dash.ignoreSupplementalCodecs);
          a.manifest && a.manifest.hls && "ignoreSupplementalCodecs" in a.manifest.hls && (xb("manifest.hls.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.hls.ignoreSupplementalCodecs, delete a.manifest.hls.ignoreSupplementalCodecs);
          a.manifest && a.manifest.dash && "updatePeriod" in a.manifest.dash && (xb("manifest.dash.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.dash.updatePeriod, delete a.manifest.dash.updatePeriod);
          a.manifest && a.manifest.hls && "updatePeriod" in a.manifest.hls && (xb("manifest.hls.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.hls.updatePeriod, delete a.manifest.hls.updatePeriod);
          a.manifest && a.manifest.dash && "ignoreDrmInfo" in a.manifest.dash && (xb(
            "manifest.dash.ignoreDrmInfo configuration",
            "Please Use manifest.ignoreDrmInfo instead."
          ), a.manifest.ignoreDrmInfo = a.manifest.dash.ignoreDrmInfo, delete a.manifest.dash.ignoreDrmInfo);
          if (a.drm && a.drm.advanced) {
            d = false;
            for (var g in a.drm.advanced) {
              var h = a.drm.advanced[g];
              e = h.videoRobustness;
              h = h.audioRobustness;
              "videoRobustness" in a.drm.advanced[g] && !Array.isArray(a.drm.advanced[g].videoRobustness) && (a.drm.advanced[g].videoRobustness = [e], d = true);
              "audioRobustness" in a.drm.advanced[g] && !Array.isArray(a.drm.advanced[g].audioRobustness) && (a.drm.advanced[g].audioRobustness = [h], d = true);
            }
            d && xb("AdvancedDrmConfiguration's videoRobustness and audioRobustness", "These properties are no longer strings but array of strings, please update your usage of these properties.");
          }
          a.streaming && "forceHTTP" in a.streaming && (xb("streaming.forceHTTP configuration", "Please Use networking.forceHTTP instead."), a.networking = a.networking || {}, a.networking.forceHTTP = a.streaming.forceHTTP, delete a.streaming.forceHTTP);
          a.streaming && "forceHTTPS" in a.streaming && (xb(
            "streaming.forceHTTPS configuration",
            "Please Use networking.forceHTTP instead."
          ), a.networking = a.networking || {}, a.networking.forceHTTPS = a.streaming.forceHTTPS, delete a.streaming.forceHTTPS);
          a.streaming && "minBytesForProgressEvents" in a.streaming && (xb("streaming.minBytesForProgressEvents configuration", "Please Use networking.minBytesForProgressEvents instead."), a.networking = a.networking || {}, a.networking.minBytesForProgressEvents = a.streaming.minBytesForProgressEvents, delete a.streaming.minBytesForProgressEvents);
          g = Rn(this.g, a, Dq(this));
          Rr(this, c);
          return g;
        };
        p.sj = function(a) {
          this.Zf = a;
        };
        function Rr(a, b) {
          a.Ae = new qi(a.g, a.xa, a.F);
          if (a.I) {
            var c = jd(a.g.manifest);
            a.h && a.h.nodeName === "AUDIO" && (c.disableVideo = true);
            a.I.configure(c);
          }
          a.F && a.F.configure(a.g.drm);
          if (a.l) {
            a.l.configure(a.g.streaming);
            try {
              a.m != Mq && si(a.Ae, a.i) && qr(a);
            } catch (e) {
              Sq(a, e);
            }
            a.o && ur(a);
            c = a.l.o;
            !c || c.allowedByApplication && c.allowedByKeySystem || Iq(a);
          }
          a.N && a.N.configure(a.g.networking);
          a.H && (a.H.configure(a.g.mediaSource), a.H.Fa = a.g.manifest.segmentRelativeVttTiming);
          a.u && jr(a);
          a.o && (a.o.configure(a.g.abr), a.g.abr.enabled ? a.o.enable() : a.o.disable(), Fr(a));
          a.R && Qr(a);
          a.Ta && (a.g.streaming.rebufferingGoal ? a.Ta.Ea(0.25) : a.Ta.stop());
          a.i && vr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
          a.C && a.C.configure(a.g.ads);
          a.K && a.K.configure(a.g.cmcd);
          a.va && a.va.configure(a.g.cmsd);
          a.Da && a.Da.configure(a.g.queue);
          if (a.m == nr && a.J.getConfiguration) {
            c = a.J.getConfiguration();
            var d = false;
            b.preferredVideoHdrLevel != a.g.preferredVideoHdrLevel && c.hdrLevel != a.g.preferredVideoHdrLevel && (c.hdrLevel = a.g.preferredVideoHdrLevel, d = true);
            b.preferredVideoLayout != a.g.preferredVideoLayout && c.videoLayout != a.g.preferredVideoLayout && (c.videoLayout = a.g.preferredVideoLayout, d = true);
            b.preferSpatialAudio != a.g.preferSpatialAudio && c.spatialAudio != a.g.preferSpatialAudio && (c.spatialAudio = a.g.preferSpatialAudio, d = true);
            b.preferredVideoRole != a.g.preferredVideoRole && c.videoRole != a.g.preferredVideoRole && (c.videoRole = a.g.preferredVideoRole, d = true);
            d && (a.J.configure(c), Iq(a));
          }
        }
        p.getConfiguration = function() {
          var a = Dq(this);
          Rn(a, this.g, Dq(this));
          return a;
        };
        p.Cj = function() {
          return this.Zf;
        };
        p.di = function() {
          var a = Dq(this);
          Rn(a, this.g, Dq(this));
          return sn(this.g, Dq(this));
        };
        p.$h = function() {
          if (this.h) {
            var a = this.h.buffered.length;
            a = a ? this.h.buffered.end(a - 1) : 0;
            var b = this.getConfiguration().streaming.bufferingGoal;
            b = Math.min(this.h.currentTime + b, this.Ra().end);
            if (a >= b) return 1;
            if (!(a <= this.h.currentTime) && a < b) return (a - this.h.currentTime) / (b - this.h.currentTime);
          }
          return 0;
        };
        p.Ji = function() {
          var a = this.getConfiguration(), b;
          for (b in this.g) delete this.g[b];
          Rn(this.g, Dq(this), Dq(this));
          Rr(this, a);
        };
        p.Kj = function() {
          return this.m;
        };
        p.bi = function() {
          return this.i ? this.i.type : null;
        };
        p.Oj = function() {
          return this.h;
        };
        p.Yb = function() {
          return this.N;
        };
        p.rd = function() {
          return this.X;
        };
        p.Zh = function() {
          return this.C ? this.C : null;
        };
        p.gi = function() {
          return this.Da ? this.Da : null;
        };
        p.W = function() {
          return this.i && !this.wa() ? this.i.presentationTimeline.W() : this.h && (this.h.src || this.wa()) ? this.h.duration == Infinity : false;
        };
        p.Vc = function() {
          return this.i ? this.i.presentationTimeline.Vc() : false;
        };
        p.hk = function() {
          if (this.i && !this.wa()) {
            var a = this.i.variants;
            return a.length ? !a[0].video : false;
          }
          return this.h && (this.h.src || this.wa()) ? this.h.videoTracks ? this.h.videoTracks.length == 0 : this.h.videoHeight == 0 : false;
        };
        p.ni = function() {
          if (this.i && !this.wa()) {
            var a = this.i.variants;
            if (!a.length) return false;
            a = a[0];
            return a.audio || !a.video ? false : !a.video.codecs.includes(",");
          }
          return this.h && (this.h.src || this.wa()) && this.h.audioTracks ? this.h.audioTracks.length == 0 : false;
        };
        p.Ra = function() {
          if (this.i && !this.wa()) {
            if (!this.Ua && this.i.type == "HLS") return { start: 0, end: 0 };
            var a = this.i.presentationTimeline;
            return { start: a.Zb(), end: a.Hb() };
          }
          if (this.h && (this.h.src || this.wa()) && (a = this.h.seekable) && a.length) {
            var b = this.g ? this.g.playRangeStart : 0;
            b = Math.max(a.start(0), b);
            var c = this.g ? this.g.playRangeEnd : Infinity;
            a = Math.min(a.end(a.length - 1), c);
            return { start: b, end: a };
          }
          return { start: 0, end: 0 };
        };
        p.ek = function() {
          this.W() && (this.h.currentTime = this.Ra().end);
        };
        p.ik = function() {
          return this.Ua;
        };
        p.keySystem = function() {
          var a = this.drmInfo();
          return a ? a.keySystem : "";
        };
        p.drmInfo = function() {
          return this.F ? this.F.g : null;
        };
        p.Wd = function() {
          return this.F ? this.F.Wd() : Infinity;
        };
        p.Gg = function() {
          return this.F ? this.F.Gg() : [];
        };
        p.Xe = function() {
          return this.F ? this.F.Xe() : {};
        };
        p.Ng = function() {
          return this.R ? this.R.g == oi : !!this.X;
        };
        p.Pb = function() {
          return this.h ? this.M ? this.M.i : 1 : 0;
        };
        p.Gh = function(a) {
          this.m == nr && this.l && Jm(this.l, a);
        };
        p.se = function(a, b) {
          b = b === void 0 ? true : b;
          a == 0 ? $a("A trick play rate of 0 is unsupported!") : (this.M.set(a), this.m == nr && (this.o.playbackRateChanged(a), this.Gh(b && a != 1)), or(this, a));
        };
        p.Pd = function() {
          var a = this.M.Tc();
          this.m == rr && this.M.set(a);
          this.m == nr && (this.M.set(a), this.o.playbackRateChanged(a), this.Gh(false));
          this.dc.Qa();
        };
        p.qc = function() {
          if (this.i && !this.wa()) {
            for (var a = this.l ? this.l.o : null, b = [], c = 0, d = t(this.i.variants), e = d.next(); !e.done; e = d.next()) if (e = e.value, fg(e)) {
              var f = Uf(e);
              f.active = e == a;
              f.active || c == 1 || a == null || e.video != a.video || e.audio != a.audio || (f.active = true);
              f.active && c++;
              b.push(f);
            }
            return b;
          }
          if (this.h && this.h.audioTracks) {
            var g = Sr(this);
            a = Array.from(this.h.audioTracks);
            return a.length ? a.map(function(h) {
              return eg(h, g);
            }) : g ? [eg(null, g)] : [];
          }
          return [];
        };
        p.Lc = function() {
          if (this.i) {
            if (this.wa()) return [];
            for (var a = this.l ? this.l.B : null, b = [], c = t(this.i.textStreams), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = Vf(d);
              e.active = d == a;
              b.push(e);
            }
            return b;
          }
          return this.h && this.h.src && this.h.textTracks ? Jr(this).map(function(f) {
            return dg(f);
          }) : [];
        };
        p.Hj = function() {
          var a = this.Ge;
          this.i && (a = this.i.imageStreams);
          return a.map(function(b) {
            return Wf(b);
          });
        };
        p.vj = function(a) {
          var b = this, c, d;
          return Q(function(e) {
            if (e.g == 1) return F(e, Tr(b, a), 2);
            c = e.h;
            if (!c) return e.return(null);
            d = [];
            c.segmentIndex.Gb(function(f) {
              var g = Ur(f.tilesLayout || c.tilesLayout);
              if (g) for (var h = g.rows * g.columns, k2 = f.j - f.startTime, l = 0; l < h; l++) {
                var m = Vr(f, c, f.startTime + k2 * l / h, g);
                d.push(m);
              }
            });
            c.closeSegmentIndex && c.closeSegmentIndex();
            return e.return(d);
          });
        };
        function Ur(a) {
          return a ? (a = /(\d+)x(\d+)/.exec(a)) ? { columns: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        p.Yj = function(a, b) {
          var c = this, d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return F(l, Tr(c, a), 2);
            d = l.h;
            if (!d) return l.return(null);
            d.closeSegmentIndex && (c.yc.has(d) || (e = new gf(function() {
              d.closeSegmentIndex();
              c.yc.delete(d);
            }), c.yc.set(d, e)), f = c.yc.get(d), f.ia(5));
            g = d.segmentIndex.find(b);
            if (g == null) return l.return(null);
            h = d.segmentIndex.get(g);
            return (k2 = Ur(h.tilesLayout || d.tilesLayout)) ? l.return(Vr(h, d, b, k2)) : l.return(null);
          });
        };
        function Tr(a, b) {
          var c, d;
          return Q(function(e) {
            if (e.g == 1) {
              if (a.m != nr && a.m != rr) return e.return(null);
              c = a.Ge;
              a.i && (c = a.i.imageStreams);
              d = c[0];
              if (!d) return e.return(null);
              b != null && (d = c.find(function(f) {
                return f.id == b;
              }));
              return d ? d.segmentIndex ? e.A(2) : F(e, d.createSegmentIndex(), 2) : e.return(null);
            }
            return e.return(d);
          });
        }
        function Vr(a, b, c, d) {
          var e = b.width || 0, f = b.height || 0, g = e / d.columns, h = f / d.rows, k2 = d.columns * d.rows, l = a.j - a.startTime;
          l = a.B || l / k2;
          var m = a.startTime, n = 0, q = 0;
          k2 > 1 && (q = Math.floor((c - a.startTime) / l), m = a.startTime + q * l, n = q % d.columns * g, q = Math.floor(q / d.columns) * h);
          d = false;
          if (c = a.thumbnailSprite) d = true, h = c.height, n = c.positionX, q = c.positionY, g = c.width;
          return { segment: a, imageHeight: f, imageWidth: e, height: h, positionX: n, positionY: q, startTime: m, duration: l, uris: a.P(), startByte: a.Jc(), endByte: a.Hc(), width: g, sprite: d, mimeType: a.mimeType || b.mimeType, codecs: a.codecs || b.codecs };
        }
        p.mh = function(a) {
          function b() {
            var d = c.i.textStreams.find(function(e) {
              return e.id == a.id;
            });
            d && d != c.l.B && (Wn(c.B.h, d, false), Mm(c.l, d), pr(c), Er(c), c.Jd = d.language);
          }
          var c = this;
          if (this.i && this.G && (b(), !this.wa())) return;
          (function() {
            if (c.h && c.h.textTracks) {
              var d = Jr(c), e = d.find(function(h) {
                return bg(h) === a.id;
              });
              if (e) {
                if (c.u instanceof cp) {
                  d = t(d);
                  for (var f = d.next(); !f.done; f = d.next()) {
                    f = f.value;
                    var g = f === e ? c.$ ? "showing" : "hidden" : "disabled";
                    f.mode !== g && (f.mode = g);
                  }
                } else d = d.find(function(h) {
                  return h.mode !== "disabled";
                }), d !== e && (d && (d.mode = "disabled", c.j.Ma(d, "cuechange"), c.u.remove(0, Infinity)), e && Mr(c, e));
                pr(c);
                Er(c);
              }
            }
          })();
        };
        function Mr(a, b) {
          a.j.D(b, "cuechange", function() {
            a.u.remove(0, Math.max(0, a.h.currentTime - a.g.streaming.bufferBehind));
            var c = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, d = [], e = Array.from(b.activeCues || []);
            e = t(e);
            for (var f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              if (f.endTime === Infinity || f.endTime < f.startTime) f = null;
              else {
                var g = new Wd(f.startTime, f.endTime, f.text);
                g.line = typeof f.line === "number" ? f.line : null;
                f.lineAlign && (g.lineAlign = f.lineAlign);
                g.lineInterpretation = f.snapToLines ? ae : 1;
                g.position = typeof f.position === "number" ? f.position : null;
                f.positionAlign && (g.positionAlign = f.positionAlign);
                g.size = f.size;
                g.textAlign = f.align;
                f.vertical === "lr" ? g.writingMode = "vertical-lr" : f.vertical === "rl" && (g.writingMode = "vertical-rl");
                f.region && (g.region.id = f.region.id, g.region.height = f.region.lines, g.region.heightUnits = 2, g.region.regionAnchorX = f.region.regionAnchorX, g.region.regionAnchorY = f.region.regionAnchorY, g.region.scroll = f.region.scroll, g.region.viewportAnchorX = f.region.viewportAnchorX, g.region.viewportAnchorY = f.region.viewportAnchorY, g.region.viewportAnchorUnits = Zc, g.region.width = f.region.width, g.region.widthUnits = Zc);
                he(g);
                f = g;
              }
              f && ((g = a.g.mediaSource.modifyCueCallback) && g(f, null, c), d.push(f));
            }
            a.u.append(d);
          });
          b.mode = document.pictureInPictureElement ? "showing" : "hidden";
        }
        p.Ff = function(a, b, c) {
          function d() {
            var f = e.i.variants.find(function(h) {
              return h.id == a.id;
            });
            if (f && fg(f)) {
              var g = e.l.o;
              e.g.abr.enabled && (g.video != f.video || g.audio && f.audio && g.audio.language == f.audio.language && g.audio.channelsCount == f.audio.channelsCount && g.audio.label == f.audio.label) && $a("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().");
              e.wa() ? wr(e, f, false, false, 0) : wr(e, f, false, b || false, c || 0);
              e.J.configure({
                language: f.language,
                role: f.audio && f.audio.roles && f.audio.roles[0] || "",
                videoRole: f.video && f.video.roles && f.video.roles[0] || "",
                channelCount: f.audio && f.audio.channelsCount ? f.audio.channelsCount : 0,
                hdrLevel: f.video && f.video.hdr ? f.video.hdr : "",
                spatialAudio: f.audio && f.audio.spatialAudio ? f.audio.spatialAudio : false,
                videoLayout: f.video && f.video.videoLayout ? f.video.videoLayout : "",
                audioLabel: f.audio && f.audio.label ? f.audio.label : "",
                videoLabel: f.video && f.video.label ? f.video.label : "",
                codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy,
                audioCodec: f.audio && f.audio.codecs ? f.audio.codecs : "",
                activeAudioCodec: g.audio && g.audio.codecs ? g.audio.codecs : "",
                activeAudioChannelCount: g.audio && g.audio.channelsCount ? g.audio.channelsCount : 0,
                preferredAudioCodecs: e.g.preferredAudioCodecs,
                preferredAudioChannelCount: e.g.preferredAudioChannelCount
              });
              ur(e);
            }
          }
          var e = this;
          b = b === void 0 ? false : b;
          c = c === void 0 ? 0 : c;
          if (this.i && this.G && (d(), !this.wa())) return;
          (function() {
            if (a.originalAudioId && e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks);
              f = t(f);
              for (var g = f.next(); !g.done; g = f.next()) if (g = g.value, bg(g) == a.id) {
                Wr(e, g);
                break;
              }
            }
          })();
        };
        p.Sk = function(a, b) {
          function c() {
            var e = d.J.getConfiguration();
            e.audioCodec = a.codecs || "";
            e.audioLabel = a.label || "";
            e.channelCount = a.channelsCount || 0;
            e.language = a.language;
            e.role = a.roles[0] || "";
            e.spatialAudio = a.spatialAudio;
            d.J.configure(e);
            Iq(d, true, b, false, false);
          }
          var d = this;
          b = b === void 0 ? 0 : b;
          if (this.i && this.G && (c(), !this.wa())) return;
          (function() {
            if (d.h && d.h.audioTracks) {
              var e = of(a.language), f = Array.from(d.h.audioTracks), g = null;
              f = t(f);
              for (var h = f.next(); !h.done; h = f.next()) {
                h = h.value;
                var k2 = h.language || "und";
                if (h.label == a.label && of(k2) == e && h.kind == a.roles[0]) {
                  g = h;
                  break;
                }
              }
              g && Wr(d, g);
            }
          })();
        };
        p.getAudioTracks = function() {
          if (this.i && !this.wa()) {
            var a = this.qc();
            if (!a.length) return [];
            var b = a.find(function(f) {
              return f.active;
            });
            if (!b) return [];
            var c = a;
            this.m != nr || this.wa() || (c = a.filter(function(f) {
              return f.originalVideoId === b.originalVideoId && (f.audioCodec || Je.includes(f.audioMimeType || ""));
            }));
            if (!c.length) return [];
            a = /* @__PURE__ */ new Map();
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = d.originalAudioId;
              e || d.audioId == null || (e = String(d.audioId));
              !e && d.codecs.includes(",") && d.audioCodec && (e = "muxed-in-video");
              e && (e += [d.language, d.label, d.channelsCount, d.spatialAudio, d.audioCodec || ""].join("_"), a.set(e, { active: d.active, language: d.language, label: d.label, mimeType: d.audioMimeType, codecs: d.audioCodec, primary: d.primary, roles: d.audioRoles || [], accessibilityPurpose: d.accessibilityPurpose, channelsCount: d.channelsCount, audioSamplingRate: d.audioSamplingRate, spatialAudio: d.spatialAudio, originalLanguage: d.originalLanguage }));
            }
            return Array.from(a.values());
          }
          return this.h && this.h.audioTracks ? Array.from(this.h.audioTracks).map(function(f) {
            var g = f.language;
            g = { active: f.enabled, language: of(g || "und"), label: f.label, mimeType: null, codecs: null, primary: f.kind == "main", roles: [], accessibilityPurpose: null, channelsCount: null, audioSamplingRate: null, spatialAudio: false, originalLanguage: g };
            f.kind && (f.kind == "description" && (g.accessibilityPurpose = "visually impaired"), g.roles.push(f.kind));
            f.configuration && (f.configuration.codec && (g.codecs = f.configuration.codec), f.configuration.sampleRate && (g.audioSamplingRate = f.configuration.sampleRate), f.configuration.numberOfChannels && (g.channelsCount = f.configuration.numberOfChannels));
            return g;
          }) : [];
        };
        p.Uk = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? 0 : c;
          var d = this.qc();
          if (d.length) {
            var e = d.find(function(g) {
              return g.active;
            });
            if (e) {
              d = d.filter(function(g) {
                return (g.videoBandwidth || g.bandwidth) == a.bandwidth && g.width == a.width && g.height == a.height && g.frameRate == a.frameRate && g.pixelAspectRatio == a.pixelAspectRatio && g.hdr == a.hdr && g.colorGamut == a.colorGamut && g.videoLayout == a.videoLayout && g.videoMimeType == a.mimeType && g.videoCodec == a.codecs && ib(g.videoRoles, a.roles) && g.videoLabel == a.label;
              });
              var f;
              d.length == 1 ? f = d[0] : f = d.find(function(g) {
                return g.audioId === e.audioId;
              });
              f || (f = d.find(function(g) {
                return g.language == e.language && g.label === e.label && g.channelsCount === e.channelsCount && g.spatialAudio === e.spatialAudio && g.audioMimeType === e.audioMimeType && Ne(g.audioCodec || "") === Ne(e.audioCodec || "") && ib(g.audioRoles, e.audioRoles);
              }));
              f && !f.active && this.Ff(f, b, c);
            }
          }
        };
        p.getVideoTracks = function() {
          if (this.m == rr || this.wa()) return [];
          var a = this.qc();
          if (!a.length) return [];
          var b = a.find(function(f) {
            return f.active;
          });
          if (!b) return [];
          var c = a;
          this.ni() || (c = a.filter(function(f) {
            return f.videoCodec && f.audioGroupId === b.audioGroupId && f.originalAudioId === b.originalAudioId ? f.audioId === b.audioId ? true : f.language === b.language && f.label === b.label && f.channelsCount === b.channelsCount && f.spatialAudio === b.spatialAudio && f.audioMimeType === b.audioMimeType && Ne(f.audioCodec || "") === Ne(b.audioCodec || "") && ib(f.audioRoles, b.audioRoles) : false;
          }));
          if (!c.length) return [];
          a = /* @__PURE__ */ new Map();
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.originalVideoId;
            e || d.videoId == null || (e = String(d.videoId));
            e && a.set(e, { active: d.active, bandwidth: d.videoBandwidth || d.bandwidth, width: d.width, height: d.height, frameRate: d.frameRate, pixelAspectRatio: d.pixelAspectRatio, hdr: d.hdr, colorGamut: d.colorGamut, videoLayout: d.videoLayout, mimeType: d.videoMimeType, codecs: d.videoCodec, roles: d.videoRoles || [], label: d.videoLabel });
          }
          return Array.from(a.values());
        };
        p.xj = function() {
          return Xr(this.qc());
        };
        p.Wj = function() {
          return Xr(this.Lc());
        };
        p.wj = function() {
          return Array.from(Yr(this.qc()));
        };
        p.Vj = function() {
          return Array.from(Yr(this.Lc()));
        };
        p.Oi = function(a, b, c, d, e, f, g) {
          function h() {
            function l(u, v) {
              return u.video || v.video ? u.video && v.video ? Math.abs((u.video.height || 0) - (v.video.height || 0)) + Math.abs((u.video.width || 0) - (v.video.width || 0)) : Infinity : 0;
            }
            var m = k2.l.o;
            k2.J = k2.g.adaptationSetCriteriaFactory();
            k2.J.configure({
              language: a,
              role: b || "",
              videoRole: m.video && m.video.roles && m.video.roles[0] || "",
              channelCount: c || 0,
              hdrLevel: "",
              spatialAudio: f || false,
              videoLayout: "",
              audioLabel: g || "",
              videoLabel: "",
              codecSwitchingStrategy: k2.g.mediaSource.codecSwitchingStrategy,
              audioCodec: e || "",
              activeAudioCodec: m.audio && m.audio.codecs ? m.audio.codecs : "",
              activeAudioChannelCount: m.audio && m.audio.channelsCount ? m.audio.channelsCount : 0,
              preferredAudioCodecs: k2.g.preferredAudioCodecs,
              preferredAudioChannelCount: k2.g.preferredAudioChannelCount
            });
            var n = k2.J.create(k2.i.variants), q = null;
            n = t(n.values());
            for (var r = n.next(); !r.done; r = n.next()) r = r.value, fg(r) && (!q || l(q, m) > l(r, m)) && (q = r);
            q != m && (q ? (m = Uf(q), k2.Ff(m, true, d || 0)) : Iq(k2));
          }
          var k2 = this;
          c = c === void 0 ? 0 : c;
          d = d === void 0 ? 0 : d;
          e = e === void 0 ? "" : e;
          f = f === void 0 ? false : f;
          g = g === void 0 ? "" : g;
          if (this.i && this.G && (h(), !this.wa())) return;
          (function() {
            if (k2.h && k2.h.audioTracks) {
              var l = hg(k2.qc(), a, b || "", false)[0];
              l && k2.Ff(l);
            }
          })();
        };
        p.kh = function(a, b, c) {
          function d() {
            e.Jd = a;
            e.Md = b || "";
            e.Ld = c || false;
            var f = hg(e.i.textStreams, e.Jd, e.Md, e.Ld)[0] || null;
            f && f != e.l.B && (Wn(e.B.h, f, false), e.g.streaming.alwaysStreamText || e.Og()) && (Mm(e.l, f), pr(e), Er(e));
          }
          var e = this;
          c = c === void 0 ? false : c;
          if (this.i && this.G && (d(), !this.wa())) return;
          (function() {
            var f = hg(e.Lc(), a, b || "", c || false)[0];
            f && e.mh(f);
          })();
        };
        p.Tk = function(a, b, c) {
          function d() {
            for (var f = null, g = t(e.i.variants), h = g.next(); !h.done; h = g.next()) if (h = h.value, h.audio.label == a) {
              f = h;
              break;
            }
            f != null && (e.J = e.g.adaptationSetCriteriaFactory(), e.J.configure({ language: f.language, role: "", videoRole: "", channelCount: 0, hdrLevel: "", spatialAudio: false, videoLayout: "", videoLabel: "", audioLabel: a, codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy, audioCodec: "", activeAudioCodec: "", activeAudioChannelCount: 0, preferredAudioCodecs: e.g.preferredAudioCodecs, preferredAudioChannelCount: e.g.preferredAudioChannelCount }), Iq(e, b, c));
          }
          var e = this;
          b = b === void 0 ? true : b;
          c = c === void 0 ? 0 : c;
          if (this.i && this.G && (d(), !this.wa())) return;
          (function() {
            if (e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks), g = null;
              f = t(f);
              for (var h = f.next(); !h.done; h = f.next()) h = h.value, h.label == a && (g = h);
              g && Wr(e, g);
            }
          })();
        };
        p.Og = function() {
          var a = this.$;
          return this.u ? this.u.isTextVisible() : a;
        };
        p.Bj = function() {
          return this.ob.map(function(a) {
            return Vf(a);
          });
        };
        p.zj = function(a) {
          xb("getChapters", "Please use an getChaptersAsync.");
          if (!this.ob.length) return [];
          var b = of(a);
          a = this.ob.filter(function(f) {
            return of(f.language) == b;
          });
          if (!a.length) return [];
          var c = [], d = /* @__PURE__ */ new Set();
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) e = e.value, e.segmentIndex && e.segmentIndex.Gb(function(f) {
            var g = f.P()[0], h = f.startTime + "-" + f.endTime + "-" + g;
            f = { id: h, title: g, startTime: f.startTime, endTime: f.endTime };
            d.has(h) || (c.push(f), d.add(h));
          });
          return c;
        };
        p.Aj = function(a) {
          var b = this, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (!b.ob.length) return l.return([]);
                c = of(a);
                d = b.ob.filter(function(m) {
                  return of(m.language) == c;
                });
                if (!d.length) return l.return([]);
                e = [];
                f = /* @__PURE__ */ new Set();
                g = t(d);
                h = g.next();
              case 2:
                if (h.done) {
                  l.A(4);
                  break;
                }
                k2 = h.value;
                if (k2.segmentIndex) {
                  l.A(5);
                  break;
                }
                return F(l, k2.createSegmentIndex(), 5);
              case 5:
                k2.segmentIndex.Gb(function(m) {
                  var n = m.P()[0], q = m.startTime + "-" + m.endTime + "-" + n;
                  m = { id: q, title: n, startTime: m.startTime, endTime: m.endTime };
                  f.has(q) || (e.push(m), f.add(q));
                });
                h = g.next();
                l.A(2);
                break;
              case 4:
                return l.return(e);
            }
          });
        };
        function Jr(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return b.kind != "metadata" && b.kind != "chapters" && b.label != "Shaka Player TextTrack";
          });
        }
        function Kr(a) {
          return Array.from(a.h.textTracks).find(function(b) {
            return b.label == "Shaka Player TextTrack";
          });
        }
        function Or(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return b.kind == "metadata";
          });
        }
        p.rh = function(a) {
          a = !!a;
          this.$ != a && (this.$ = a, this.m == nr ? (this.u.setTextVisibility(a), this.g.streaming.alwaysStreamText || (a ? this.l.B || (a = hg(this.i.textStreams, this.Jd, this.Md, this.Ld), a.length > 0 && (Mm(this.l, a[0]), pr(this), Er(this))) : Im(this.l))) : this.h && this.h.src && this.h.textTracks && this.u.setTextVisibility(a), Dr(this));
        };
        p.Pj = function() {
          if (this.G) var a = this.G.He();
          else {
            if (this.O == null) return /* @__PURE__ */ new Date();
            if (this.O instanceof Date) return this.O;
            a = this.O;
          }
          if (this.i && !this.wa()) {
            var b = this.i.presentationTimeline;
            return new Date(((b.m || b.i) + a) * 1e3);
          }
          return this.h && this.h.getStartDate ? (b = this.h.getStartDate(), isNaN(b.getTime()) ? null : new Date(b.getTime() + a * 1e3)) : null;
        };
        p.ei = function() {
          if (this.i && !this.wa()) {
            var a = this.i.presentationTimeline;
            a = a.m || a.i;
            return a === null ? null : new Date(a * 1e3);
          }
          return this.h && this.h.getStartDate ? (a = this.h.getStartDate(), isNaN(a.getTime()) ? null : a) : null;
        };
        p.Ze = function() {
          return this.W() ? this.i ? this.i.presentationTimeline.Ze() : null : null;
        };
        p.Gc = function() {
          if (this.m == nr) return this.H.Gc();
          var a = { total: [], audio: [], video: [], text: [] };
          this.m == rr && (a.total = Aj(this.h.buffered));
          return a;
        };
        function sq(a) {
          if (!a.h || !a.h.currentTime) return null;
          var b = a.ei();
          return b ? Math.floor(Date.now() - (b.getTime() + a.h.currentTime * 1e3)) : null;
        }
        p.getBandwidthEstimate = function() {
          return this.o ? this.o.getBandwidthEstimate() : NaN;
        };
        p.getStats = function() {
          if (this.m != nr && this.m != rr) return {
            width: NaN,
            height: NaN,
            currentCodecs: "",
            streamBandwidth: NaN,
            decodedFrames: NaN,
            droppedFrames: NaN,
            corruptedFrames: NaN,
            stallsDetected: NaN,
            gapsJumped: NaN,
            estimatedBandwidth: NaN,
            completionPercent: NaN,
            loadLatency: NaN,
            manifestTimeSeconds: NaN,
            drmTimeSeconds: NaN,
            playTime: NaN,
            pauseTime: NaN,
            bufferingTime: NaN,
            licenseTime: NaN,
            liveLatency: NaN,
            maxSegmentDuration: NaN,
            manifestSizeBytes: NaN,
            bytesDownloaded: NaN,
            nonFatalErrorCount: NaN,
            manifestPeriodCount: NaN,
            manifestGapCount: NaN,
            switchHistory: [],
            stateHistory: []
          };
          mr(this);
          var a = this.h, b = a.currentTime / a.duration;
          isNaN(b) || this.W() || $n(this.B, Math.round(100 * b));
          this.G && (this.B.T = this.G.Hh(), this.B.V = this.G.Jh());
          a.getVideoPlaybackQuality && (b = a.getVideoPlaybackQuality(), Yn(this.B, Number(b.droppedVideoFrames), Number(b.totalVideoFrames)), this.B.N = Number(b.corruptedVideoFrames));
          this.B.o = this.F ? ai(this.F) : NaN;
          Zn(this.B, a.videoWidth || NaN, a.videoHeight || NaN);
          this.B.l = "";
          this.W() && (a = sq(this), a != null && (this.B.F = a / 1e3));
          b = this.qc().find(function(e) {
            return e.active;
          });
          a = this.Lc().find(function(e) {
            return e.active;
          });
          if (b) {
            if (b.bandwidth) {
              var c = this.M ? this.M.i : 1, d = c * b.bandwidth;
              a && a.bandwidth && (d += c * a.bandwidth);
              this.B.B = d;
            }
            b.width && b.height && Zn(this.B, b.width || NaN, b.height || NaN);
            b = b.codecs;
            a && (b += "," + (a.codecs || a.mimeType));
            b && (this.B.l = b);
          }
          this.m != nr || this.wa() || (this.i && (this.B.I = this.i.periodCount, this.B.H = this.i.gapCount, this.i.presentationTimeline && (this.B.K = this.i.presentationTimeline.h)), a = this.o.getBandwidthEstimate(), this.B.u = a);
          this.m == rr && ao(this.B, NaN);
          return bo(this.B);
        };
        p.Od = function(a, b, c, d, e, f, g) {
          g = g === void 0 ? false : g;
          var h = this, k2, l, m, n, q, r, u, v, w, z, y, B;
          return Q(function(C) {
            switch (C.g) {
              case 1:
                if (h.m != nr && h.m != rr) throw new U(1, 7, 7004);
                c != "subtitles" && c != "captions" && $a("Using a kind value different of `subtitles` or `captions` can cause unwanted issues.");
                if (d) {
                  C.A(2);
                  break;
                }
                return F(C, Zr(h, a), 3);
              case 3:
                d = C.h;
              case 2:
                k2 = [];
                h.C && (k2 = h.C.getCuePoints());
                if (h.m != rr) {
                  C.A(4);
                  break;
                }
                l = rb();
                g && l.Ha() === "WEBKIT" && (c = "forced");
                return F(C, $r(h, a, b, c, d, f || "", k2), 5);
              case 5:
                m = C.h;
                if (m.track) return qr(h), pr(h), C.return(dg(m.track));
                throw new U(1, 2, 2012);
              case 4:
                n = Cc;
                q = h.Ra();
                r = q.end - q.start;
                h.i && (r = h.i.presentationTimeline.getDuration());
                if (r == Infinity) throw new U(1, 4, 4033);
                if (!k2.length) {
                  C.A(6);
                  break;
                }
                return F(C, as(h, a), 7);
              case 7:
                u = C.h, v = bs(h, u, d, k2), w = new Blob([v], { type: "text/vtt" }), a = pk(w), d = "text/vtt";
              case 6:
                z = {
                  id: h.Be++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: Ol(0, r, [a]),
                  mimeType: d || "",
                  codecs: e || "",
                  kind: c,
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: b,
                  originalLanguage: b,
                  label: f || null,
                  type: n.Na,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: !!g,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([Ie(d || "", e || "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                };
                y = Ie(z.mimeType, z.codecs);
                B = Ye(y);
                if (!B) throw new U(2, 2, 2014, d);
                h.i.textStreams.push(z);
                qr(h);
                pr(h);
                return C.return(Vf(z));
            }
          });
        };
        p.Me = function(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C;
          return Q(function(H) {
            switch (H.g) {
              case 1:
                if (c.m != nr && c.m != rr) throw new U(1, 7, 7004);
                if (b) {
                  H.A(2);
                  break;
                }
                return F(H, Zr(c, a), 3);
              case 3:
                b = H.h;
              case 2:
                if (b != "text/vtt") throw new U(1, 2, 2017, a);
                d = Cc;
                e = c.Ra();
                f = e.end - e.start;
                c.i && (f = c.i.presentationTimeline.getDuration());
                if (f == Infinity) throw new U(1, 4, 4045);
                return F(H, as(c, a), 4);
              case 4:
                g = H.h;
                h = Xe(b);
                if (!h) throw new U(2, 2, 2014, b);
                k2 = h();
                l = { periodStart: 0, segmentStart: 0, segmentEnd: f, vttOffset: 0 };
                m = Vb(g);
                n = k2.parseMedia(m, l, a, []);
                q = [];
                r = t(n);
                u = r.next();
                for (v = {}; !u.done; v = { Sf: void 0, nd: void 0 }, u = r.next()) v.nd = u.value, v.Sf = null, w = /* @__PURE__ */ (function(D) {
                  return function() {
                    D.Sf == null && (D.Sf = uc([a], [D.nd.payload]));
                    return D.Sf || [];
                  };
                })(v), z = new qj(v.nd.startTime, v.nd.endTime, w, 0, null, null, 0, 0, Infinity), v.nd.payload.includes("#xywh") && (y = v.nd.payload.split("#xywh=")[1].split(","), y.length === 4 && z.If({ height: parseInt(y[3], 10), positionX: parseInt(y[0], 10), positionY: parseInt(y[1], 10), width: parseInt(y[2], 10) })), q.push(z);
                B = b;
                if (!q.length) {
                  H.A(5);
                  break;
                }
                return F(H, Zr(c, q[0].P()[0]), 6);
              case 6:
                B = H.h;
              case 5:
                return C = {
                  id: c.Be++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Ml(q),
                  mimeType: B || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: d.Uf,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([Ie(B || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                }, c.m == rr ? c.Ge.push(C) : c.i.imageStreams.push(C), qr(c), H.return(Wf(C));
            }
          });
        };
        p.Le = function(a, b, c) {
          var d = this, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                if (d.m != nr && d.m != rr) throw new U(1, 7, 7004);
                if (c) {
                  B.A(2);
                  break;
                }
                return F(B, Zr(d, a), 3);
              case 3:
                c = B.h;
              case 2:
                e = Cc;
                f = d.Ra();
                g = f.end - f.start;
                d.i && (g = d.i.presentationTimeline.getDuration());
                if (g == Infinity) throw new U(1, 4, 4055);
                h = Xe(c);
                if (!h) throw new U(2, 2, 2014, c);
                return F(B, as(d, a), 4);
              case 4:
                k2 = B.h;
                l = h();
                m = { periodStart: 0, segmentStart: 0, segmentEnd: g, vttOffset: 0 };
                n = Vb(k2);
                q = l.parseMedia(n, m, a, []);
                r = [];
                u = t(q);
                v = u.next();
                for (w = {}; !v.done; w = { Ue: void 0 }, v = u.next()) w.Ue = v.value, z = new qj(w.Ue.startTime, w.Ue.endTime, /* @__PURE__ */ (function(C) {
                  return function() {
                    return [C.Ue.payload];
                  };
                })(w), 0, null, null, 0, 0, Infinity), r.push(z);
                y = {
                  id: d.Be++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Ml(r),
                  mimeType: "text/plain",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: b,
                  originalLanguage: b,
                  label: null,
                  type: e.Na,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([Ie("text/plain", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                };
                d.ob.push(y);
                qr(d);
                return B.return(Vf(y));
            }
          });
        };
        function Zr(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return ra(d, 2), F(d, Po(b, a.N, a.g.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                ta(d, 3);
                break;
              case 2:
                Aa(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function $r(a, b, c, d, e, f, g) {
          var h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return e != "text/vtt" || g.length ? F(n, as(a, b), 3) : n.A(2);
            n.g != 2 && (h = n.h, k2 = bs(a, h, e, g), l = new Blob([k2], { type: "text/vtt" }), b = pk(l), e = "text/vtt");
            m = document.createElement("track");
            a: {
              var q = a.K, r = b;
              try {
                if (!q.g.enabled) {
                  var u = r;
                  break a;
                }
                var v = Fp(q);
                v.ot = lq;
                v.su = true;
                var w = Jp(v);
                u = Kp(r, w);
                break a;
              } catch (z) {
                ab("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", z);
                u = r;
                break a;
              }
              u = void 0;
            }
            m.src = u;
            m.label = f;
            m.kind = d;
            m.srclang = c;
            a.h.getAttribute("crossorigin") || a.h.setAttribute("crossorigin", "anonymous");
            a.h.appendChild(m);
            a.Yf.push(m);
            return n.return(m);
          });
        }
        function as(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              c = $g;
              d = a.g.streaming.retryParameters;
              e = Ug([b], d);
              e.method = "GET";
              var h = a.K;
              try {
                h.g.enabled && aq(h, e, { ot: lq, su: true });
              } catch (k2) {
                ab("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", k2);
              }
              return F(g, a.N.request(c, e).promise, 2);
            }
            f = g.h;
            return g.return(f.data);
          });
        }
        function bs(a, b, c, d) {
          var e = Xe(c);
          if (e) return c = e(), a = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, b = Vb(b), b = c.parseMedia(b, a, null, []), rp(b, d);
          throw new U(2, 2, 2014, c);
        }
        p.Zk = function(a, b) {
          this.xa.width = a;
          this.xa.height = b;
        };
        p.gh = function(a) {
          if (this.m == nr) {
            var b = this.l;
            a = a === void 0 ? 0.1 : a;
            if (b.l.g) b = false;
            else if (b.F) b = false;
            else {
              for (var c = t(b.h.values()), d = c.next(); !d.done; d = c.next()) d = d.value, !d.Zd || d.Ja || d.qb || (d.Zd = false, Hm(b, d, a));
              b = true;
            }
          } else b = false;
          return b;
        };
        p.Hg = function() {
          $a("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");
          return this.i;
        };
        p.Lj = function() {
          return this.zc;
        };
        p.Fj = function() {
          var a = { video: null, audio: null, text: null };
          if (this.m != nr) return a;
          var b = this.l.o, c = this.h.currentTime;
          b = t([b.video, b.audio, this.l.B]);
          for (var d = b.next(); !d.done; d = b.next()) if ((d = d.value) && d.segmentIndex) {
            var e = d.segmentIndex.find(c);
            e = d.segmentIndex.get(e);
            e = { codecs: e.codecs || d.codecs, mimeType: e.mimeType || d.mimeType, bandwidth: e.bandwidth || d.bandwidth };
            d.type == "video" ? (e.width = d.width, e.height = d.height, a.video = e) : d.type == "audio" ? a.audio = e : d.type == Ac && (a.text = e);
          }
          return a;
        };
        function Dq(a) {
          var b = Mn();
          b.streaming.failureCallback = function(c) {
            if (a.W()) {
              var d = null;
              c.code == 1001 || c.code == 1002 ? (d = 1, a.g.streaming.lowLatencyMode && (d = 0.1)) : c.code == 1003 && (d = 0.1);
              d != null && (c.severity = 1, a.gh(d));
            }
          };
          b.textDisplayFactory = function() {
            if (a.xe) {
              var c = a.h;
              c = c.webkitDisplayingFullscreen || c.webkitPresentationMode && c.webkitPresentationMode != "inline" ? false : true;
            } else c = false;
            return c ? new hp(a.h, a.xe) : "track" in document.createElement("track") ? new cp(a) : new gp();
          };
          return b;
        }
        p.Ui = function(a) {
          this.xe = a;
        };
        function er(a, b) {
          for (var c = /* @__PURE__ */ new Set(), d = t(b.textStreams), e = d.next(); !e.done; e = d.next()) e = e.value, e.mimeType != "application/cea-608" && e.mimeType != "application/cea-708" || c.add(e.originalId);
          d = t(b.variants);
          for (e = d.next(); !e.done; e = d.next()) if ((e = e.value.video) && e.closedCaptions) {
            for (var f = t(e.closedCaptions.keys()), g = f.next(); !g.done; g = f.next()) if (g = g.value, !c.has(g)) {
              var h = g.startsWith("CC") ? "application/cea-608" : "application/cea-708", k2 = new Pl(), l = e.closedCaptions.get(g);
              h = {
                id: a.Be++,
                originalId: g,
                groupId: null,
                createSegmentIndex: function() {
                  return Promise.resolve();
                },
                segmentIndex: k2,
                mimeType: h,
                codecs: "",
                kind: "caption",
                encrypted: false,
                drmInfos: [],
                keyIds: /* @__PURE__ */ new Set(),
                language: l,
                originalLanguage: l,
                label: null,
                type: Ac,
                primary: false,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: null,
                roles: e.roles,
                forced: false,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: false,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: false,
                fastSwitching: false,
                fullMimeTypes: /* @__PURE__ */ new Set([Ie(h, "")]),
                isAudioMuxedInVideo: false,
                baseOriginalId: null
              };
              b.textStreams.push(h);
              c.add(g);
            }
          }
        }
        function Cr(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) return c = a.audio, d = a.video, e = function(k2, l) {
              var m, n, q;
              return Q(function(r) {
                if (r.g == 1) return k2 ? k2.segmentIndex ? r.A(2) : F(r, k2.createSegmentIndex(), 2) : r.return(null);
                n = (m = k2.segmentIndex.Xb(l)) ? m.next().value : null;
                if (!n) return r.return(null);
                q = n.startTime;
                return r.return(q);
              });
            }, F(h, e(c, b), 2);
            if (h.g != 3) return f = h.h, F(h, e(d, b), 3);
            g = h.h;
            return g != null && f != null ? h.return(Math.max(g, f)) : g != null ? h.return(g) : f != null ? h.return(f) : h.return(b);
          });
        }
        function Uq(a) {
          var b = a.Ng();
          if (a.B && a.R && a.G) {
            if (a.g.streaming.rebufferingGoal == 0) {
              var c = a.M;
              c.j = false;
              Tl(c);
            } else c = a.M, c.j = b, Tl(c);
            a.K && (c = a.K, b || c.F || (c.F = true), c.F && b && (c.I = true, Dp(c, "ps", { dd: "r" })), c.J = b);
            mr(a);
            c = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            if (a.g.streaming.liveSync.dynamicTargetLatency.enabled && b && a.Ke < c) {
              c = a.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
              var d = a.g.streaming.liveSync.targetLatencyTolerance, e = a.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
              a.V && (a.V = Math.min(a.V + ++a.Ke * e, c - d));
            }
          }
          b = (/* @__PURE__ */ new Map()).set("buffering", b);
          a.dispatchEvent(Lq("buffering", b));
        }
        function or(a, b) {
          a.dc.Qa();
          a.dc.D(a.h, "timeupdate", function() {
            var c = a.h.currentTime, d = a.Ra(), e = a.W(), f = e ? a.g.streaming.safeSeekOffset : 0;
            b > 0 ? e && b > 1 && Math.floor(c) >= Math.floor(d.end) && a.Pd() : Math.floor(c) <= Math.floor(d.start + f) && a.Pd();
          });
        }
        function mr(a) {
          if (a.B && a.R) {
            var b = a.B.g, c = "playing";
            a.R.g == oi ? c = "buffering" : a.be() ? c = "ended" : a.h.paused && (c = "paused");
            var d = c;
            if (b.g == null) b.g = { timestamp: Date.now() / 1e3, state: d, duration: 0 }, b = true;
            else {
              var e = Date.now() / 1e3;
              b.g.duration = e - b.g.timestamp;
              b.g.state == d ? b = false : (b.h.push(b.g), b.g = { timestamp: e, state: d, duration: 0 }, b = true);
            }
            b && (c = (/* @__PURE__ */ new Map()).set("newstate", c), a.dispatchEvent(Lq("statechanged", c)));
          }
        }
        function Gr(a) {
          var b = a.h.playbackRate, c = a.W();
          if (a.g.streaming.vodDynamicPlaybackRate && !c) {
            var d = a.g.streaming.vodDynamicPlaybackRateLowBufferRate, e = a.$h();
            e <= a.g.streaming.vodDynamicPlaybackRateBufferRatio ? b != d && a.se(d, false) : e == 1 && b !== a.M.Tc() && a.Pd();
          }
          if (c && (c = a.Ra(), Number.isFinite(c.end) && !(a.h.currentTime < c.start || a.h.paused))) {
            d = a.g.streaming.liveSync.targetLatencyTolerance;
            e = a.g.streaming.liveSync.dynamicTargetLatency.enabled;
            var f = a.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
            if (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled) {
              var g = a.g.streaming.liveSync.targetLatency;
              var h = g + d;
              var k2 = Math.max(0, g - d);
              var l = a.g.streaming.liveSync.maxPlaybackRate;
              var m = a.g.streaming.liveSync.minPlaybackRate;
            } else a.i && a.i.serviceDescription && (g = a.i.serviceDescription.targetLatency, a.i.serviceDescription.targetLatency != null ? h = a.i.serviceDescription.targetLatency + d : a.i.serviceDescription.maxLatency != null && (h = a.i.serviceDescription.maxLatency), a.i.serviceDescription.targetLatency != null ? k2 = Math.max(0, a.i.serviceDescription.targetLatency - d) : a.i.serviceDescription.minLatency != null && (k2 = a.i.serviceDescription.minLatency), l = a.i.serviceDescription.maxPlaybackRate || a.g.streaming.liveSync.maxPlaybackRate, m = a.i.serviceDescription.minPlaybackRate || a.g.streaming.liveSync.minPlaybackRate);
            a.V || typeof g !== "number" || (a.V = g);
            var n = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            e && a.cc && a.V !== null && typeof g === "number" && a.Ke < n && Date.now() - a.cc > f * 1e3 && (f = a.g.streaming.liveSync.dynamicTargetLatency.minLatency, a.V = Math.max(a.V - (g - f) / 2, f + d), a.cc = Date.now());
            e && a.V !== null && (h = a.V + d, k2 = a.V - d);
            g = c.end - a.h.currentTime;
            d = 0;
            a.m == rr && (e = a.h.buffered, e.length > 0 && (d = e.end(e.length - 1), d = Math.max(l, d - c.end)));
            c = a.g.streaming.liveSync.panicMode;
            e = a.g.streaming.liveSync.panicThreshold * 1e3;
            f = Date.now() - a.R.h;
            c && !m && (m = a.g.streaming.liveSync.minPlaybackRate);
            c && m && f <= e ? b != m && a.se(m, false) : h != void 0 && l && g - d > h ? (b != l && a.se(l, false), a.cc = null) : k2 != void 0 && m && g - d < k2 ? (b != m && a.se(m, false), a.cc = null) : b !== a.M.Tc() && (a.Pd(), a.cc = Date.now());
          }
        }
        function Hr(a) {
          if (a.h) {
            var b = function(e, f) {
              var g = g === void 0 ? Number.EPSILON : g;
              if (e === f) g = true;
              else {
                var h = Math.abs(e - f);
                g = h <= g ? true : g !== Number.EPSILON ? Math.abs(h - g) <= Number.EPSILON : false;
              }
              return (g || f > e) && a.Xf < e ? (a.Xf = e, true) : false;
            }, c = a.Ra();
            c = c.end - c.start;
            c = c > 0 ? a.h.currentTime / c : 0;
            if (!isNaN(c)) {
              c *= 100;
              if (b(0, c)) var d = Lq("started");
              else if (b(25, c)) d = Lq("firstquartile");
              else if (b(50, c)) d = Lq("midpoint");
              else if (b(75, c)) d = Lq("thirdquartile");
              else {
                if (b(100, c) || c > 100) d = Lq("complete");
                a.g && a.g.playRangeEnd != Infinity && a.be() && a.h.pause();
              }
              d && a.dispatchEvent(d);
            }
          }
        }
        function ur(a) {
          try {
            vi(a.Ae, a.i);
          } catch (c) {
            return Sq(a, c), false;
          }
          var b = gg(a.i.variants);
          b = a.J.create(b);
          a = a.o.setVariants(Array.from(b.values()));
          return typeof a == "boolean" ? a : true;
        }
        function yr(a, b) {
          b = b === void 0 ? false : b;
          if (ur(a)) {
            if (!a.g.abr.enabled) {
              var c = a.J;
              typeof c.getLastAdaptationSet != "function" && (xb("AdaptationSetCriteria w/o getLastAdaptationSet", "Please use an AdaptationSetCriteria with getLastAdaptationSet."), c.getLastAdaptationSet = function() {
                return null;
              });
              if (c = c.getLastAdaptationSet()) {
                if (c = Array.from(c.values()), c.length) {
                  var d = a.l.o;
                  if (d && d.video && (c = c.find(function(e) {
                    return e.video == d.video;
                  }))) return c;
                }
              }
            }
            return a.o.chooseVariant(b);
          }
          return null;
        }
        function Iq(a, b, c, d, e) {
          b = b === void 0 ? true : b;
          c = c === void 0 ? 0 : c;
          d = d === void 0 ? false : d;
          e = e === void 0 ? true : e;
          var f = yr(a);
          f && wr(a, f, e, b, c, d);
        }
        function wr(a, b, c, d, e, f) {
          f = f === void 0 ? false : f;
          var g = a.l.o;
          if (b == g) d && Lm(a.l, b, d, e, true);
          else {
            var h = a.B.h;
            h.h != b && (h.h = b, h.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "variant", fromAdaptation: c, bandwidth: b.bandwidth }));
            Lm(a.l, b, d, e, f, c);
            d = null;
            g && (d = Uf(g));
            g = Uf(b);
            g.active = true;
            if (a.T && (e = a.T, b = b.video)) {
              b.dependencyStream && (b = b.dependencyStream);
              f = 0;
              h = -1;
              switch (b.mimeType) {
                case "video/webm":
                  f = 1;
                  break;
                case "video/mp4":
                  f = 2;
              }
              switch (a.bi()) {
                case "DASH":
                  h = 1;
                  break;
                case "HLS":
                  h = 0;
              }
              e.g && (e.g.setLevelSwitching(
                b.id,
                true
              ), e.g.setContainerFormat(f), e.j || e.g.setStreamingFormat(h));
            }
            c ? (c = (/* @__PURE__ */ new Map()).set("oldTrack", d).set("newTrack", g), c = Lq("adaptation", c), cs(a, c)) : ds(a, d, g);
            es(a, d, g);
          }
        }
        function Wr(a, b) {
          var c = Array.from(a.h.audioTracks).find(function(e) {
            return e.enabled;
          });
          b.enabled = true;
          if (c) {
            b.id !== c.id && (c.enabled = false);
            var d = Sr(a);
            c = eg(c, d);
            b = eg(b, d);
            ds(a, c, b);
            es(a, c, b);
          }
        }
        function Sr(a) {
          return a.h && a.h.videoTracks ? Array.from(a.h.videoTracks).find(function(b) {
            return b.selected;
          }) : null;
        }
        function qr(a) {
          var b = Lq("trackschanged");
          cs(a, b);
          fs(a);
        }
        function ds(a, b, c) {
          b = (/* @__PURE__ */ new Map()).set("oldTrack", b).set("newTrack", c);
          b = Lq("variantchanged", b);
          cs(a, b);
        }
        function es(a, b, c) {
          var d = false;
          b && b.audioId == c.audioId && b.audioGroupId == c.audioGroupId || (d = true);
          d && fs(a);
        }
        function fs(a) {
          var b = Lq("audiotrackschanged");
          cs(a, b);
        }
        function pr(a) {
          var b = Lq("textchanged");
          cs(a, b);
        }
        function Dr(a) {
          var b = Lq("texttrackvisibility");
          cs(a, b);
        }
        function Fr(a) {
          a.g.abr.enabled || Hq(a);
          var b = (/* @__PURE__ */ new Map()).set("newStatus", a.g.abr.enabled);
          cs(a, Lq("abrstatuschanged", b));
        }
        function Er(a) {
          var b = a.Lc().find(function(c) {
            return c.active;
          });
          b && a.u && a.u.setTextLanguage && a.u.setTextLanguage(b.language);
        }
        function Hq(a, b) {
          b = b === void 0 ? true : b;
          if (a.m == nr) {
            a.De.stop();
            for (var c = t(a.i.variants), d = c.next(); !d.done; d = c.next()) d.value.disabledUntilTime = 0;
            b && ur(a);
          }
        }
        p.disableStream = function(a, b) {
          if (!this.g.abr.enabled || this.m === Mq || !navigator.onLine || b == 0 || !this.i) return false;
          if (this.i.variants.some(function(h) {
            var k2 = h[a.type];
            return k2 && k2.id !== a.id && !h.disabledUntilTime ? a.type == "audio" ? a.language === k2.language : true : false;
          })) {
            for (var c = false, d = false, e = t(this.i.variants), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = f[a.type];
              g && (g.id === a.id ? (f.disabledUntilTime = Date.now() / 1e3 + b, c = true) : g.trickModeVideo && g.trickModeVideo.id == a.id && (d = true));
            }
            if (!c && d) return false;
            this.De.Ea(1);
            b = this.Gc().video.reduce(function(h, k2) {
              return h + k2.end - k2.start;
            }, 0);
            Iq(this, false, b, true, false);
            return true;
          }
          return false;
        };
        function Sq(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                if (a.m == Mq) return h.return();
                b.severity === 1 && a.B.M++;
                c = true;
                if (!(a.Ua && a.i && a.l) || b.code != 3016 && b.code != 3014 && b.code != 3015 && b.code != 3024 && b.code != 3018) {
                  h.A(2);
                  break;
                }
                d = rb();
                if (d.Ha() === "WEBKIT" && b.code == 3016) return h.return();
                ra(h, 3);
                return F(h, an(a.l), 5);
              case 5:
                e = h.h;
                c = !e;
                e && (f = Lq("mediasourcerecovered"), a.dispatchEvent(f));
                ta(h, 2);
                break;
              case 3:
                Aa(h), c = true;
              case 2:
                if (!c) return h.return();
                b.severity === 2 && Hq(a, false);
                g = Lq("error", (/* @__PURE__ */ new Map()).set(
                  "detail",
                  b
                ));
                a.dispatchEvent(g);
                g.defaultPrevented && (b.handled = true);
                G(h);
            }
          });
        }
        p.addFont = function(a, b) {
          return Ij(a, b);
        };
        function gr(a, b, c, d) {
          d = d === void 0 ? a : d;
          a = (/* @__PURE__ */ new Map()).set("detail", { schemeIdUri: c.schemeIdUri, value: c.value, startTime: c.startTime, endTime: c.endTime, id: c.id, timescale: c.timescale, eventElement: c.eventElement, eventNode: c.eventNode });
          d.dispatchEvent(Lq(b, a));
        }
        function hr(a, b, c, d) {
          d = d === void 0 ? false : d;
          b = (/* @__PURE__ */ new Map()).set("mediaQuality", { bandwidth: b.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate, height: b.height, mimeType: b.mimeType, channelsCount: b.channelsCount, pixelAspectRatio: b.pixelAspectRatio, width: b.width, label: b.label, roles: b.roles, language: b.language }).set("position", c);
          a.dispatchEvent(Lq(d ? "audiotrackchanged" : "mediaqualitychanged", b));
        }
        function Rq(a, b) {
          b = b === void 0 ? true : b;
          if (!a.h.error) return b ? new U(2, 3, 3016) : null;
          var c = a.h.error.code;
          if (!b && c == 1) return null;
          if (b = a.h.error.msExtendedCode) b < 0 && (b += 4294967296), b = b.toString(16);
          return new U(2, 3, 3016, c, b, a.h.error.message);
        }
        function ir(a, b) {
          var c = Lq("keystatuschanged");
          a.dispatchEvent(c);
          var d = Object.keys(b);
          d.length == 1 && d[0] == "" && (d = ["00"], b = { "00": b[""] });
          var e = d.length == 1 && d[0] == "00";
          c = false;
          if (d.length) {
            d = a.keySystem();
            for (var f = fh(a.g.drm.clearKeys), g = function(u, v) {
              u.allowedByKeySystem = true;
              v = t(v);
              for (var w = v.next(); !w.done; w = v.next()) if (w = w.value, (w = b[e ? "00" : w]) || a.F.H) u.allowedByKeySystem = u.allowedByKeySystem && !!w && !wi.includes(w);
            }, h = t(a.i.variants), k2 = h.next(); !k2.done; k2 = h.next()) {
              k2 = k2.value;
              var l = jg(k2);
              l = t(l);
              for (var m = l.next(); !m.done; m = l.next()) {
                m = m.value;
                var n = k2.allowedByKeySystem;
                if (m.keyIds.size) if (m.drmInfos.length && !f.size && a.i.type == "HLS") for (var q = t(m.drmInfos), r = q.next(); !r.done; r = q.next()) r = r.value, r.keySystem == d && (r.keyIds.size ? g(k2, r.keyIds) : g(k2, m.keyIds));
                else g(k2, m.keyIds);
                n != k2.allowedByKeySystem && (c = true);
              }
            }
          }
          if (c && (qr(a), !ur(a))) return;
          (c = a.l.o) && !c.allowedByKeySystem && Iq(a);
        }
        function vr(a, b, c) {
          b > 0 && (a.W() || a.Ti(b));
          b = a.getDuration();
          c < b && (a.W() || a.Ab(c));
        }
        function cs(a, b) {
          Q(function(c) {
            if (c.g == 1) return F(c, Promise.resolve(), 2);
            a.m != Mq && a.dispatchEvent(b);
            G(c);
          });
        }
        function Yr(a) {
          var b = /* @__PURE__ */ new Set();
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.language ? b.add(of(c.language)) : b.add("und");
          return b;
        }
        function Xr(a) {
          for (var b = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map(), d = 0; d < a.length; d++) {
            var e = a[d], f = "und", g = [];
            e.language && (f = of(e.language));
            e.type == "variant" ? g = e.audioRoles : g = e.roles;
            g && g.length || (g = [""]);
            b.has(f) || b.set(f, /* @__PURE__ */ new Set());
            g = t(g);
            for (var h = g.next(); !h.done; h = g.next()) h = h.value, b.get(f).add(h), e.label && (c.has(f) || c.set(f, /* @__PURE__ */ new Map()), c.get(f).set(h, e.label));
          }
          var k2 = [];
          b.forEach(function(l, m) {
            l = t(l);
            for (var n = l.next(); !n.done; n = l.next()) {
              n = n.value;
              var q = null;
              c.has(m) && c.get(m).has(n) && (q = c.get(m).get(n));
              k2.push({
                language: m,
                role: n,
                label: q
              });
            }
          });
          return k2;
        }
        p.wa = function() {
          return this.h && this.h.remote ? this.h.remote.state != "disconnected" : false;
        };
        p.be = function() {
          return !this.h || this.h.ended ? true : this.Ua && !this.W() && this.h.currentTime >= this.Ra().end;
        };
        S("shaka.Player", Y);
        Y.prototype.isEnded = Y.prototype.be;
        Y.prototype.isRemotePlayback = Y.prototype.wa;
        Y.prototype.addFont = Y.prototype.addFont;
        Y.prototype.setVideoContainer = Y.prototype.Ui;
        Y.prototype.getFetchedPlaybackInfo = Y.prototype.Fj;
        Y.prototype.getManifestParserFactory = Y.prototype.Lj;
        Y.prototype.getManifest = Y.prototype.Hg;
        Y.prototype.retryStreaming = Y.prototype.gh;
        Y.prototype.setMaxHardwareResolution = Y.prototype.Zk;
        Y.prototype.addChaptersTrack = Y.prototype.Le;
        Y.prototype.addThumbnailsTrack = Y.prototype.Me;
        Y.prototype.addTextTrackAsync = Y.prototype.Od;
        Y.prototype.getStats = Y.prototype.getStats;
        Y.prototype.getBufferedInfo = Y.prototype.Gc;
        Y.prototype.getSegmentAvailabilityDuration = Y.prototype.Ze;
        Y.prototype.getPresentationStartTimeAsDate = Y.prototype.ei;
        Y.prototype.getPlayheadTimeAsDate = Y.prototype.Pj;
        Y.prototype.setTextTrackVisibility = Y.prototype.rh;
        Y.prototype.getChaptersAsync = Y.prototype.Aj;
        Y.prototype.getChapters = Y.prototype.zj;
        Y.prototype.getChaptersTracks = Y.prototype.Bj;
        Y.prototype.isTextTrackVisible = Y.prototype.Og;
        Y.prototype.selectVariantsByLabel = Y.prototype.Tk;
        Y.prototype.selectTextLanguage = Y.prototype.kh;
        Y.prototype.selectAudioLanguage = Y.prototype.Oi;
        Y.prototype.getTextLanguages = Y.prototype.Vj;
        Y.prototype.getAudioLanguages = Y.prototype.wj;
        Y.prototype.getTextLanguagesAndRoles = Y.prototype.Wj;
        Y.prototype.getAudioLanguagesAndRoles = Y.prototype.xj;
        Y.prototype.getVideoTracks = Y.prototype.getVideoTracks;
        Y.prototype.selectVideoTrack = Y.prototype.Uk;
        Y.prototype.getAudioTracks = Y.prototype.getAudioTracks;
        Y.prototype.selectAudioTrack = Y.prototype.Sk;
        Y.prototype.selectVariantTrack = Y.prototype.Ff;
        Y.prototype.selectTextTrack = Y.prototype.mh;
        Y.prototype.getThumbnails = Y.prototype.Yj;
        Y.prototype.getAllThumbnails = Y.prototype.vj;
        Y.prototype.getImageTracks = Y.prototype.Hj;
        Y.prototype.getTextTracks = Y.prototype.Lc;
        Y.prototype.getVariantTracks = Y.prototype.qc;
        Y.prototype.cancelTrickPlay = Y.prototype.Pd;
        Y.prototype.trickPlay = Y.prototype.se;
        Y.prototype.useTrickPlayTrackIfAvailable = Y.prototype.Gh;
        Y.prototype.getPlaybackRate = Y.prototype.Pb;
        Y.prototype.isBuffering = Y.prototype.Ng;
        Y.prototype.getKeyStatuses = Y.prototype.Xe;
        Y.prototype.getActiveSessionsMetadata = Y.prototype.Gg;
        Y.prototype.getExpiration = Y.prototype.Wd;
        Y.prototype.drmInfo = Y.prototype.drmInfo;
        Y.prototype.keySystem = Y.prototype.keySystem;
        Y.prototype.isFullyLoaded = Y.prototype.ik;
        Y.prototype.goToLive = Y.prototype.ek;
        Y.prototype.seekRange = Y.prototype.Ra;
        Y.prototype.isVideoOnly = Y.prototype.ni;
        Y.prototype.isAudioOnly = Y.prototype.hk;
        Y.prototype.isInProgress = Y.prototype.Vc;
        Y.prototype.isLive = Y.prototype.W;
        Y.prototype.getQueueManager = Y.prototype.gi;
        Y.prototype.getAdManager = Y.prototype.Zh;
        Y.prototype.getAssetUri = Y.prototype.rd;
        Y.prototype.getNetworkingEngine = Y.prototype.Yb;
        Y.prototype.getMediaElement = Y.prototype.Oj;
        Y.prototype.getManifestType = Y.prototype.bi;
        Y.prototype.getLoadMode = Y.prototype.Kj;
        Y.prototype.resetConfiguration = Y.prototype.Ji;
        Y.prototype.getBufferFullness = Y.prototype.$h;
        Y.prototype.getNonDefaultConfiguration = Y.prototype.di;
        Y.prototype.getConfigurationForLowLatency = Y.prototype.Cj;
        Y.prototype.getConfiguration = Y.prototype.getConfiguration;
        Y.prototype.configurationForLowLatency = Y.prototype.sj;
        Y.prototype.configure = Y.prototype.configure;
        Y.prototype.releaseAllMutexes = Y.prototype.Kk;
        Y.prototype.destroyAllPreloads = Y.prototype.ng;
        Y.prototype.preload = Y.prototype.preload;
        Y.prototype.detachAndSavePreload = Y.prototype.Vh;
        Y.prototype.unloadAndSavePreload = Y.prototype.ej;
        Y.prototype.load = Y.prototype.load;
        Y.prototype.updateStartTime = Y.prototype.jl;
        Y.prototype.unload = Y.prototype.Cc;
        Y.prototype.detach = Y.prototype.detach;
        Y.prototype.attachCanvas = Y.prototype.kj;
        Y.prototype.attach = Y.prototype.Vb;
        Y.probeSupport = function(a) {
          a = a === void 0 ? true : a;
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                b = {};
                if (!a) {
                  k2.A(2);
                  break;
                }
                return F(k2, ki(), 3);
              case 3:
                b = k2.h;
              case 2:
                return c = Lc(), d = rk(), e = rb(), F(k2, e.lc(), 4);
              case 4:
                return f = k2.h, g = { manifest: c, media: d, drm: b, hardwareResolution: f }, h = Oq, h.forEach(function(l, m) {
                  g[m] = l();
                }), k2.return(g);
            }
          });
        };
        Y.isBrowserSupported = function() {
          window2.Promise || $a("A Promise implementation or polyfill is required");
          if (!(window2.Promise && window2.Uint8Array && Array.prototype.forEach) || (navigator.userAgent || "").includes("Trident/")) return false;
          rb();
          return Mc() ? true : Nc().canPlayType("application/x-mpegurl") != "";
        };
        Y.setQueueManagerFactory = function(a) {
          Gq = a;
        };
        Y.setAdManagerFactory = function(a) {
          Fq = a;
        };
        Y.registerSupportPlugin = Nq;
        Y.prototype.destroy = Y.prototype.destroy;
        var Mq = 0, Cq = 1, nr = 2, rr = 3;
        Y.LoadMode = { DESTROYED: Mq, NOT_LOADED: Cq, MEDIA_SOURCE: nr, SRC_EQUALS: rr };
        Y.version = "v4.16.8";
        var gs = ["4", "16"];
        yb = new function(a) {
          this.g = a;
          this.i = zb;
          this.h = Ab;
        }(new wb(Number(gs[0]), Number(gs[1])));
        var Oq = /* @__PURE__ */ new Map(), Fq = null, Gq = null;
        function hs() {
          this.g = [];
          this.i = this.m = this.l = this.j = this.h = 0;
        }
        function is(a) {
          return a.g.length ? a.g.reduce(function(b, c) {
            return b + c;
          }, 0) / a.g.length : 0;
        }
        ;
        function js(a, b, c) {
          var d = this;
          this.g = a;
          this.h = b;
          this.m = c;
          this.i = false;
          this.j = this.h.getVolume();
          this.l = new kb();
          this.l.D(this.h, google.ima.AdEvent.Type.PAUSED, function() {
            d.i = true;
          });
          this.l.D(this.h, google.ima.AdEvent.Type.RESUMED, function() {
            d.i = false;
          });
        }
        p = js.prototype;
        p.needsSkipUI = function() {
          return false;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return true;
        };
        p.isUsingAnotherMediaElement = function() {
          return true;
        };
        p.getDuration = function() {
          return this.g.getDuration();
        };
        p.getMinSuggestedDuration = function() {
          return this.g.getMinSuggestedDuration();
        };
        p.getRemainingTime = function() {
          return this.h.getRemainingTime();
        };
        p.isPaused = function() {
          return this.i;
        };
        p.isSkippable = function() {
          return this.g.getSkipTimeOffset() >= 0;
        };
        p.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.h.getAdSkippableState();
        };
        p.skip = function() {
          return this.h.skip();
        };
        p.pause = function() {
          return this.h.pause();
        };
        p.play = function() {
          return this.h.resume();
        };
        p.getVolume = function() {
          return this.h.getVolume();
        };
        p.setVolume = function(a) {
          this.m.volume = a;
          return this.h.setVolume(a);
        };
        p.isMuted = function() {
          return this.h.getVolume() == 0;
        };
        p.isLinear = function() {
          return this.g.isLinear();
        };
        p.resize = function(a, b) {
          this.h.resize(a, b);
        };
        p.setMuted = function(a) {
          (this.m.muted = a) ? (this.j = this.getVolume(), this.h.setVolume(0)) : this.h.setVolume(this.j);
        };
        p.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getTotalAds();
        };
        p.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getAdPosition();
        };
        p.getTitle = function() {
          return this.g.getTitle();
        };
        p.getDescription = function() {
          return this.g.getDescription();
        };
        p.getVastMediaBitrate = function() {
          return this.g.getVastMediaBitrate();
        };
        p.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        p.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.getAdId();
        };
        p.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        p.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        p.getMediaUrl = function() {
          return this.g.getMediaUrl();
        };
        p.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getTimeOffset();
        };
        p.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getPodIndex();
        };
        p.release = function() {
          this.h = this.g = null;
        };
        S("shaka.ads.ClientSideAd", js);
        js.prototype.release = js.prototype.release;
        js.prototype.getPodIndex = js.prototype.getPodIndex;
        js.prototype.getTimeOffset = js.prototype.getTimeOffset;
        js.prototype.getMediaUrl = js.prototype.getMediaUrl;
        js.prototype.getAdvertiserName = js.prototype.getAdvertiserName;
        js.prototype.getCreativeAdId = js.prototype.getCreativeAdId;
        js.prototype.getAdId = js.prototype.getAdId;
        js.prototype.getVastAdId = js.prototype.getVastAdId;
        js.prototype.getVastMediaWidth = js.prototype.getVastMediaWidth;
        js.prototype.getVastMediaHeight = js.prototype.getVastMediaHeight;
        js.prototype.getVastMediaBitrate = js.prototype.getVastMediaBitrate;
        js.prototype.getDescription = js.prototype.getDescription;
        js.prototype.getTitle = js.prototype.getTitle;
        js.prototype.getPositionInSequence = js.prototype.getPositionInSequence;
        js.prototype.getSequenceLength = js.prototype.getSequenceLength;
        js.prototype.setMuted = js.prototype.setMuted;
        js.prototype.resize = js.prototype.resize;
        js.prototype.isLinear = js.prototype.isLinear;
        js.prototype.isMuted = js.prototype.isMuted;
        js.prototype.setVolume = js.prototype.setVolume;
        js.prototype.getVolume = js.prototype.getVolume;
        js.prototype.play = js.prototype.play;
        js.prototype.pause = js.prototype.pause;
        js.prototype.skip = js.prototype.skip;
        js.prototype.canSkipNow = js.prototype.canSkipNow;
        js.prototype.getTimeUntilSkippable = js.prototype.getTimeUntilSkippable;
        js.prototype.isSkippable = js.prototype.isSkippable;
        js.prototype.isPaused = js.prototype.isPaused;
        js.prototype.getRemainingTime = js.prototype.getRemainingTime;
        js.prototype.getMinSuggestedDuration = js.prototype.getMinSuggestedDuration;
        js.prototype.getDuration = js.prototype.getDuration;
        js.prototype.isUsingAnotherMediaElement = js.prototype.isUsingAnotherMediaElement;
        js.prototype.hasCustomClick = js.prototype.hasCustomClick;
        js.prototype.isClientRendering = js.prototype.isClientRendering;
        js.prototype.needsSkipUI = js.prototype.needsSkipUI;
        function ks() {
        }
        function ls(a, b) {
          var c = [];
          a = t(wd(a, "Ad"));
          for (var d = a.next(); !d.done; d = a.next()) if (d = Ad(d.value, "InLine")) {
            if (d = Ad(d, "Creatives")) {
              d = t(wd(d, "Creative"));
              for (var e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = Ad(e, "Linear");
                f && ms(c, b, f);
                if (e = Ad(e, "NonLinearAds")) {
                  e = wd(e, "NonLinear");
                  e = t(e);
                  for (var g = e.next(); !g.done; g = e.next()) a: {
                    f = c;
                    var h = b, k2 = g.value, l = Ad(k2, "StaticResource");
                    if (l) g = l.attributes.creativeType;
                    else {
                      l = Ad(k2, "HTMLResource");
                      if (!l) break a;
                      g = "text/html";
                    }
                    if (l = yd(l)) {
                      g === "text/html" && (l = "data:text/html;charset=UTF-8," + encodeURIComponent(l));
                      var m = Dd(k2, "width", Jd) || Dd(k2, "expandedWidth", Jd), n = Dd(k2, "height", Jd) || Dd(k2, "expandedHeight", Jd);
                      if (m || n) {
                        var q = null, r = Ad(k2, "NonLinearClickThrough");
                        r && (r = yd(r)) && (q = r);
                        r = null;
                        (k2 = k2.attributes.minSuggestedDuration) && (r = hd(k2));
                        k2 = 0;
                        h != null && (k2 = h);
                        f.push({ id: null, groupId: null, startTime: k2, endTime: null, uri: l, mimeType: g, isSkippable: false, skipOffset: null, skipFor: null, canJump: false, resumeOffset: 0, playoutLimit: r, once: true, pre: h == null, post: h == Infinity, timelineRange: false, loop: false, overlay: { viewport: {
                          x: 0,
                          y: 0
                        }, topLeft: { x: 0, y: 0 }, size: { x: m || 0, y: n || 0 } }, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: q });
                      }
                    }
                  }
                }
              }
            }
          }
          return c;
        }
        function ms(a, b, c) {
          var d = 0;
          b != null && (d = b);
          var e = null;
          c.attributes.skipoffset && (e = hd(c.attributes.skipoffset), isNaN(e) && (e = null));
          var f = Ad(c, "MediaFiles");
          if (f) {
            var g = null;
            (c = Ad(c, "VideoClicks")) && (c = Ad(c, "ClickThrough")) && (c = yd(c)) && (g = c);
            f = c = wd(f, "MediaFile");
            c = c.filter(function(k2) {
              return k2.attributes.delivery == "streaming";
            });
            c.length && (f = c);
            f = f.sort(function(k2, l) {
              return (parseInt(l.attributes.height, 10) || 0) - (parseInt(k2.attributes.height, 10) || 0);
            });
            f = t(f);
            for (c = f.next(); !c.done; c = f.next()) if (c = c.value, !c.attributes.apiFramework) {
              var h = yd(c);
              if (h) {
                a.push({ id: null, groupId: null, startTime: d, endTime: null, uri: h, mimeType: c.attributes.type || null, isSkippable: e != null, skipOffset: e, skipFor: null, canJump: false, resumeOffset: 0, playoutLimit: null, once: true, pre: b == null, post: b == Infinity, timelineRange: false, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: g });
                break;
              }
            }
          }
        }
        function ns(a) {
          var b = [];
          a = t(wd(a, "vmap:AdBreak"));
          for (var c = a.next(); !c.done; c = a.next()) {
            var d = c.value, e = d.attributes.timeOffset;
            e && (c = null, e == "start" ? c = null : e == "end" ? c = Infinity : c = hd(e), (d = Ad(d, "vmap:AdSource")) && (d = Ad(d, "vmap:AdTagURI")) && (d = xd(d)) && b.push({ time: c, uri: d }));
          }
          return b;
        }
        S("shaka.ads.Utils", ks);
        ks.ADS_LOADED = "ads-loaded";
        ks.AD_STARTED = "ad-started";
        ks.AD_FIRST_QUARTILE = "ad-first-quartile";
        ks.AD_MIDPOINT = "ad-midpoint";
        ks.AD_THIRD_QUARTILE = "ad-third-quartile";
        ks.AD_COMPLETE = "ad-complete";
        ks.AD_STOPPED = "ad-stopped";
        ks.AD_SKIPPED = "ad-skipped";
        ks.AD_VOLUME_CHANGED = "ad-volume-changed";
        ks.AD_MUTED = "ad-muted";
        ks.AD_PAUSED = "ad-paused";
        ks.AD_RESUMED = "ad-resumed";
        ks.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        ks.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        ks.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        ks.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        ks.AD_CLICKED = "ad-clicked";
        ks.AD_PROGRESS = "ad-progress";
        ks.AD_BUFFERING = "ad-buffering";
        ks.AD_IMPRESSION = "ad-impression";
        ks.AD_DURATION_CHANGED = "ad-duration-changed";
        ks.AD_CLOSED = "ad-closed";
        ks.AD_LOADED = "ad-loaded";
        ks.ALL_ADS_COMPLETED = "all-ads-completed";
        ks.AD_LINEAR_CHANGED = "ad-linear-changed";
        ks.AD_METADATA = "ad-metadata";
        ks.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        ks.AD_ERROR = "ad-error";
        ks.AD_BREAK_READY = "ad-break-ready";
        ks.AD_INTERACTION = "ad-interaction";
        ks.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        ks.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        ks.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        function os(a, b, c, d, e) {
          var f = this;
          this.u = a;
          this.i = b;
          this.G = false;
          this.B = this.o = null;
          this.H = NaN;
          this.l = e;
          this.j = null;
          this.h = new kb();
          google.ima.settings.setLocale(c);
          google.ima.settings.setDisableCustomPlaybackForIOS10Plus(true);
          this.F = new google.ima.AdDisplayContainer(this.u, this.i);
          this.F.initialize();
          this.m = new google.ima.AdsLoader(this.F);
          this.m.getSettings().setPlayerType("shaka-player");
          this.m.getSettings().setPlayerVersion("v4.16.8");
          this.g = null;
          this.C = d || new google.ima.AdsRenderingSettings();
          this.h.D(
            this.m,
            google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
            function(g) {
              ps(f, g);
            }
          );
          this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function(g) {
            qs(f, g);
          });
          this.h.D(this.i, "ended", function() {
            f.m.contentComplete();
          });
          this.h.za(this.i, "play", function() {
            f.G = true;
          });
        }
        os.prototype.configure = function(a) {
          this.o = a;
        };
        os.prototype.stop = function() {
          this.g && this.g.stop();
          this.u && Fj(this.u);
        };
        os.prototype.release = function() {
          this.stop();
          this.B && this.B.disconnect();
          this.h && this.h.release();
          this.g && this.g.destroy();
          this.m.destroy();
          this.F.destroy();
        };
        function qs(a, b) {
          b.getError();
          b = (/* @__PURE__ */ new Map()).set("originalEvent", b);
          a.l(new V("ad-error", b));
          rs(a, null);
          a.l(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", [])));
        }
        function ps(a, b) {
          a.l(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.H)));
          if (a.o.customPlayheadTracker) {
            var c = { currentTime: a.i.currentTime };
            a.g = b.getAdsManager(c, a.C);
            a.i.muted ? a.g.setVolume(0) : a.g.setVolume(a.i.volume);
            a.h.D(a.i, "timeupdate", function() {
              a.i.duration && (c.currentTime = a.i.currentTime);
            });
            a.h.D(a.i, "volumechange", function() {
              a.j && (a.j.setVolume(a.i.volume), a.i.muted && a.j.setMuted(true));
            });
          } else a.g = b.getAdsManager(a.i, a.C);
          a.l(new V("ima-ad-manager-loaded", (/* @__PURE__ */ new Map()).set(
            "imaAdManager",
            a.g
          )));
          var d = a.g.getCuePoints();
          if (d.length) {
            b = [];
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) b.push({ start: e.value, end: null });
            a.l(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b)));
          }
          ss(a);
          try {
            a.g.init(a.i.offsetWidth, a.i.offsetHeight), a.h.D(a.i, "loadeddata", function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight);
            }), "ResizeObserver" in window2 ? (a.B = new ResizeObserver(function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight);
            }), a.B.observe(a.i)) : a.h.D(document, "fullscreenchange", function() {
              a.g.resize(
                a.i.offsetWidth,
                a.i.offsetHeight
              );
            }), a.G || a.o.skipPlayDetection ? a.g.start() : a.h.za(a.i, "play", function() {
              a.G = true;
              a.g.start();
            });
          } catch (f) {
            rs(a, null);
          }
        }
        function ss(a) {
          function b(c, d) {
            c = (/* @__PURE__ */ new Map()).set("originalEvent", c);
            a.l(new V(d, c));
          }
          a.h.D(a.g, google.ima.AdErrorEvent.Type.AD_ERROR, function(c) {
            qs(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function(c) {
            ts(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.STARTED, function(c) {
            ts(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function(c) {
            b(c, "ad-first-quartile");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.MIDPOINT, function(c) {
            b(c, "ad-midpoint");
          });
          a.h.D(
            a.g,
            google.ima.AdEvent.Type.THIRD_QUARTILE,
            function(c) {
              b(c, "ad-third-quartile");
            }
          );
          a.h.D(a.g, google.ima.AdEvent.Type.COMPLETE, function(c) {
            b(c, "ad-complete");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function(c) {
            rs(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            rs(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.SKIPPED, function(c) {
            b(c, "ad-skipped");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function(c) {
            b(c, "ad-volume-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_MUTED, function(c) {
            b(c, "ad-muted");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.PAUSED, function(c) {
            a.j && (a.j.i = true, b(c, "ad-paused"));
          });
          a.h.D(a.g, google.ima.AdEvent.Type.RESUMED, function(c) {
            a.j && (a.j.i = false, b(c, "ad-resumed"));
          });
          a.h.D(a.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function(c) {
            a.j && b(c, "ad-skip-state-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CLICK, function(c) {
            b(c, "ad-clicked");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_PROGRESS, function(c) {
            b(c, "ad-progress");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_BUFFERING, function(c) {
            b(c, "ad-buffering");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.IMPRESSION, function(c) {
            b(c, "ad-impression");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.DURATION_CHANGE, function(c) {
            b(c, "ad-duration-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.USER_CLOSE, function(c) {
            b(c, "ad-closed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.LOADED, function(c) {
            b(c, "ad-loaded");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            b(c, "all-ads-completed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function(c) {
            b(c, "ad-linear-changed");
          });
          a.h.D(
            a.g,
            google.ima.AdEvent.Type.AD_METADATA,
            function(c) {
              b(c, "ad-metadata");
            }
          );
          a.h.D(a.g, google.ima.AdEvent.Type.LOG, function(c) {
            b(c, "ad-recoverable-error");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_BREAK_READY, function(c) {
            b(c, "ad-break-ready");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.INTERACTION, function(c) {
            b(c, "ad-interaction");
          });
        }
        function ts(a, b) {
          var c = b.getAd();
          c ? (a.j = new js(c, a.g, a.i), b.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED || a.o.supportsMultipleMediaElements || a.l(new V("ad-content-pause-requested")), b = (/* @__PURE__ */ new Map()).set("ad", a.j).set("sdkAdObject", c).set("originalEvent", b), a.l(new V("ad-started", b)), a.j.isLinear() && (a.u.setAttribute("ad-active", "true"), a.o.customPlayheadTracker || a.i.pause(), a.i.muted ? (b = a.j, b.j = a.i.volume, b.h.setVolume(0)) : a.j.setVolume(a.i.volume))) : $a("The IMA SDK fired a " + b.type + " event with no associated ad. Unable to play ad!");
        }
        function rs(a, b) {
          b && b.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED && !a.o.supportsMultipleMediaElements && a.l(new V("ad-content-resume-requested"));
          a.l(new V("ad-stopped", (/* @__PURE__ */ new Map()).set("originalEvent", b)));
          a.j && a.j.isLinear() && (a.u.removeAttribute("ad-active"), a.o.customPlayheadTracker || a.i.ended || a.i.play());
        }
        ;
        function us(a, b, c, d, e, f) {
          this.g = a;
          this.h = b;
          this.j = (this.i = b.isSkippable) ? b.skipOffset || 0 : b.skipOffset;
          this.l = b.skipFor;
          this.B = c;
          this.o = d;
          this.m = e;
          this.u = f;
          this.C = b.overlay;
        }
        p = us.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return this.h.clickThroughUrl != null;
        };
        p.isUsingAnotherMediaElement = function() {
          return this.u;
        };
        p.getDuration = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a - this.g.currentTime;
        };
        p.isPaused = function() {
          return this.g.paused;
        };
        p.isSkippable = function() {
          return this.i && this.l != null ? this.getDuration() - this.getRemainingTime() < this.j + this.l : this.i;
        };
        p.getTimeUntilSkippable = function() {
          if (this.isSkippable()) {
            var a = this.getRemainingTime() + this.j - this.getDuration();
            return Math.max(a, 0);
          }
          return Math.max(this.getRemainingTime(), 0);
        };
        p.canSkipNow = function() {
          return this.i && this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.canSkipNow() && this.B();
        };
        p.pause = function() {
          return this.g.pause();
        };
        p.play = function() {
          return this.g.play();
        };
        p.getVolume = function() {
          return this.g.volume;
        };
        p.setVolume = function(a) {
          this.g.volume = a;
        };
        p.isMuted = function() {
          return this.g.muted;
        };
        p.isLinear = function() {
          return this.C == null;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.g.muted = a;
        };
        p.getSequenceLength = function() {
          return this.o;
        };
        p.getPositionInSequence = function() {
          return this.m;
        };
        p.getTitle = function() {
          return "";
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.h.id || "";
        };
        p.getCreativeAdId = function() {
          return "";
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return this.h.uri;
        };
        p.getTimeOffset = function() {
          return this.h.pre ? 0 : this.h.post ? -1 : this.h.startTime;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
          this.g = null;
        };
        S("shaka.ads.InterstitialAd", us);
        us.prototype.release = us.prototype.release;
        us.prototype.getPodIndex = us.prototype.getPodIndex;
        us.prototype.getTimeOffset = us.prototype.getTimeOffset;
        us.prototype.getMediaUrl = us.prototype.getMediaUrl;
        us.prototype.getAdvertiserName = us.prototype.getAdvertiserName;
        us.prototype.getCreativeAdId = us.prototype.getCreativeAdId;
        us.prototype.getAdId = us.prototype.getAdId;
        us.prototype.getVastAdId = us.prototype.getVastAdId;
        us.prototype.getVastMediaWidth = us.prototype.getVastMediaWidth;
        us.prototype.getVastMediaHeight = us.prototype.getVastMediaHeight;
        us.prototype.getVastMediaBitrate = us.prototype.getVastMediaBitrate;
        us.prototype.getDescription = us.prototype.getDescription;
        us.prototype.getTitle = us.prototype.getTitle;
        us.prototype.getPositionInSequence = us.prototype.getPositionInSequence;
        us.prototype.getSequenceLength = us.prototype.getSequenceLength;
        us.prototype.setMuted = us.prototype.setMuted;
        us.prototype.resize = us.prototype.resize;
        us.prototype.isLinear = us.prototype.isLinear;
        us.prototype.isMuted = us.prototype.isMuted;
        us.prototype.setVolume = us.prototype.setVolume;
        us.prototype.getVolume = us.prototype.getVolume;
        us.prototype.play = us.prototype.play;
        us.prototype.pause = us.prototype.pause;
        us.prototype.skip = us.prototype.skip;
        us.prototype.canSkipNow = us.prototype.canSkipNow;
        us.prototype.getTimeUntilSkippable = us.prototype.getTimeUntilSkippable;
        us.prototype.isSkippable = us.prototype.isSkippable;
        us.prototype.isPaused = us.prototype.isPaused;
        us.prototype.getRemainingTime = us.prototype.getRemainingTime;
        us.prototype.getMinSuggestedDuration = us.prototype.getMinSuggestedDuration;
        us.prototype.getDuration = us.prototype.getDuration;
        us.prototype.isUsingAnotherMediaElement = us.prototype.isUsingAnotherMediaElement;
        us.prototype.hasCustomClick = us.prototype.hasCustomClick;
        us.prototype.isClientRendering = us.prototype.isClientRendering;
        us.prototype.needsSkipUI = us.prototype.needsSkipUI;
        function vs(a, b, c) {
          this.g = a;
          this.j = b;
          this.h = c;
          this.i = a.overlay == null;
        }
        p = vs.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return this.g.clickThroughUrl != null;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return -1;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return -1;
        };
        p.isPaused = function() {
          return false;
        };
        p.isSkippable = function() {
          return false;
        };
        p.getTimeUntilSkippable = function() {
          return 0;
        };
        p.canSkipNow = function() {
          return false;
        };
        p.skip = function() {
        };
        p.pause = function() {
        };
        p.play = function() {
        };
        p.getVolume = function() {
          return 1;
        };
        p.setVolume = function() {
        };
        p.isMuted = function() {
          return false;
        };
        p.isLinear = function() {
          return this.i;
        };
        p.resize = function() {
        };
        p.setMuted = function() {
        };
        p.getSequenceLength = function() {
          return this.j;
        };
        p.getPositionInSequence = function() {
          return this.h;
        };
        p.getTitle = function() {
          return "";
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.id || "";
        };
        p.getCreativeAdId = function() {
          return "";
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return this.g.uri;
        };
        p.getTimeOffset = function() {
          return this.g.pre ? 0 : this.g.post ? -1 : this.g.startTime;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
        };
        S("shaka.ads.InterstitialStaticAd", vs);
        vs.prototype.release = vs.prototype.release;
        vs.prototype.getPodIndex = vs.prototype.getPodIndex;
        vs.prototype.getTimeOffset = vs.prototype.getTimeOffset;
        vs.prototype.getMediaUrl = vs.prototype.getMediaUrl;
        vs.prototype.getAdvertiserName = vs.prototype.getAdvertiserName;
        vs.prototype.getCreativeAdId = vs.prototype.getCreativeAdId;
        vs.prototype.getAdId = vs.prototype.getAdId;
        vs.prototype.getVastAdId = vs.prototype.getVastAdId;
        vs.prototype.getVastMediaWidth = vs.prototype.getVastMediaWidth;
        vs.prototype.getVastMediaHeight = vs.prototype.getVastMediaHeight;
        vs.prototype.getVastMediaBitrate = vs.prototype.getVastMediaBitrate;
        vs.prototype.getDescription = vs.prototype.getDescription;
        vs.prototype.getTitle = vs.prototype.getTitle;
        vs.prototype.getPositionInSequence = vs.prototype.getPositionInSequence;
        vs.prototype.getSequenceLength = vs.prototype.getSequenceLength;
        vs.prototype.setMuted = vs.prototype.setMuted;
        vs.prototype.resize = vs.prototype.resize;
        vs.prototype.isLinear = vs.prototype.isLinear;
        vs.prototype.isMuted = vs.prototype.isMuted;
        vs.prototype.setVolume = vs.prototype.setVolume;
        vs.prototype.getVolume = vs.prototype.getVolume;
        vs.prototype.play = vs.prototype.play;
        vs.prototype.pause = vs.prototype.pause;
        vs.prototype.skip = vs.prototype.skip;
        vs.prototype.canSkipNow = vs.prototype.canSkipNow;
        vs.prototype.getTimeUntilSkippable = vs.prototype.getTimeUntilSkippable;
        vs.prototype.isSkippable = vs.prototype.isSkippable;
        vs.prototype.isPaused = vs.prototype.isPaused;
        vs.prototype.getRemainingTime = vs.prototype.getRemainingTime;
        vs.prototype.getMinSuggestedDuration = vs.prototype.getMinSuggestedDuration;
        vs.prototype.getDuration = vs.prototype.getDuration;
        vs.prototype.isUsingAnotherMediaElement = vs.prototype.isUsingAnotherMediaElement;
        vs.prototype.hasCustomClick = vs.prototype.hasCustomClick;
        vs.prototype.isClientRendering = vs.prototype.isClientRendering;
        vs.prototype.needsSkipUI = vs.prototype.needsSkipUI;
        function ws(a, b, c, d) {
          var e = this;
          this.M = null;
          this.m = a;
          this.C = b;
          this.g = c;
          this.G = null;
          this.u = true;
          this.h = this.g;
          this.va = d;
          this.ma = /* @__PURE__ */ new Set();
          this.T = /* @__PURE__ */ new Set();
          this.H = /* @__PURE__ */ new Set();
          this.F = /* @__PURE__ */ new Map();
          this.K = /* @__PURE__ */ new Map();
          this.i = new Y();
          xs(this);
          this.I = new kb();
          this.j = new kb();
          this.J = false;
          this.$ = this.o = this.B = this.l = null;
          this.aa = false;
          this.O = -1;
          this.X = function() {
            if (!e.J && e.l && !e.C.wa()) {
              e.l = e.g.currentTime;
              var f = ys(e);
              f && f && (f.overlay || !e.g.paused) && zs(e, f, 1, 1, Date.now());
            }
          };
          this.V = function() {
            if (!(e.J || e.l || e.C.wa())) {
              e.g.paused || (e.l = e.g.currentTime);
              var f = ys(e, true);
              f || (f = ys(e));
              f && f && (f.overlay || !e.g.paused) && zs(e, f, 1, 1, Date.now());
            }
          };
          this.oa = function() {
            if (!e.J && e.l && !e.C.wa()) {
              var f = e.g.currentTime;
              e.B && !e.B.pre && !e.B.post && f < (e.B.endTime || e.B.startTime) && (e.B = null);
            }
          };
          this.R = new gf(this.X);
          this.N = new gf(function() {
            var f, g, h, k2, l, m, n, q, r, u, v;
            return Q(function(w) {
              switch (w.g) {
                case 1:
                  if (!e.H.size || e.l == null) {
                    w.A(0);
                    break;
                  }
                  f = e.C.m;
                  if (f == Mq || f == Cq) return w.return();
                  g = false;
                  h = Array.from(e.H);
                  k2 = e.C.Ra();
                  l = t(h);
                  m = l.next();
                case 3:
                  if (m.done) {
                    w.A(5);
                    break;
                  }
                  n = m.value;
                  if (n == e.B) {
                    w.A(4);
                    break;
                  }
                  q = n.endTime || n.startTime;
                  if (!(k2.start - q >= 1)) {
                    r = n.startTime - e.l;
                    r > 0 && r <= 10 && (!e.F.has(n) && As(n) && e.F.set(n, e.i.preload(n.uri, null, n.mimeType || void 0)), Bs(e, n));
                    w.A(4);
                    break;
                  }
                  if (!e.F.has(n)) {
                    w.A(7);
                    break;
                  }
                  return F(w, e.F.get(n), 8);
                case 8:
                  (u = w.h) && u.destroy(), e.F.delete(n);
                case 7:
                  Cs(e, n), v = n.id || JSON.stringify(n), e.T.has(v) && e.T.delete(v), e.H.delete(n), Ds(e), n.overlay || (g = true);
                case 4:
                  m = l.next();
                  w.A(3);
                  break;
                case 5:
                  g && Es(e), G(w);
              }
            });
          });
          this.configure(this.C.getConfiguration().ads);
        }
        p = ws.prototype;
        p.configure = function(a) {
          this.M = a;
          Fs(this);
        };
        function Gs(a) {
          if (!a.aa && a.H.size) {
            a.I.D(a.g, "playing", a.V);
            a.I.D(a.g, "timeupdate", a.V);
            a.I.D(a.g, "seeked", a.oa);
            a.I.D(a.g, "ended", a.X);
            if ("requestVideoFrameCallback" in a.g && !Hs()) {
              var b = a.g, c = function() {
                a.O != -1 && (a.X(), a.O != -1 && (a.O = b.requestVideoFrameCallback(c)));
              };
              a.O = b.requestVideoFrameCallback(c);
            } else a.R.Ea(0.025);
            a.N && a.N.Ea(1);
            a.aa = true;
          }
        }
        function Ds(a) {
          a.aa && !a.H.size && (a.I.Ma(a.g, "playing", a.V), a.I.Ma(a.g, "timeupdate", a.V), a.I.Ma(a.g, "seeked", a.oa), a.I.Ma(a.g, "ended", a.X), a.O != -1 && (a.g.cancelVideoFrameCallback(a.O), a.O = -1), a.R && a.R.stop(), a.N && a.N.stop(), a.aa = false);
        }
        function Fs(a) {
          if (a.m && a.M) {
            var b = a.M.supportsMultipleMediaElements, c = a.g;
            c.controls ? b = false : c.webkitPresentationMode && c.webkitPresentationMode !== "inline" ? b = false : c.webkitDisplayingFullscreen && (b = false);
            a.u == b && (a.u = !b, a.u ? (a.h = a.g, a.G && (a.G.parentElement && a.m.removeChild(a.G), a.G = null)) : (a.G || (b = document.createElement(a.g.tagName), b.autoplay = true, b.style.position = "absolute", b.style.top = "0", b.style.left = "0", b.style.width = "100%", b.style.height = "100%", b.style.display = "none", b.setAttribute("playsinline", ""), a.G = b), a.h = a.G));
          } else a.u = true;
        }
        p.stop = function() {
          this.j && this.j.Qa();
          this.ma.clear();
          this.T.clear();
          this.H.clear();
          this.i.ng();
          if (this.F.size) {
            var a = Array.from(this.F.values());
            a = t(a);
            for (var b = a.next(); !b.done; b = a.next()) (b = b.value) && b.then(function(c) {
              c && c.destroy();
            });
          }
          this.F.clear();
          if (this.K.size) for (a = Array.from(this.K.keys()), a = t(a), b = a.next(); !b.done; b = a.next()) Cs(this, b.value);
          this.K.clear();
          this.i.detach();
          this.J = false;
          this.B = this.l = null;
          this.u = true;
          this.h = this.g;
          this.G = null;
          Is(this);
          Ds(this);
          this.m && Fj(this.m);
          this.o && (this.o.stop(), this.o = null);
        };
        p.release = function() {
          this.stop();
          this.I && this.I.release();
          this.j && this.j.release();
          this.R && (this.R.stop(), this.R = null);
          this.N && (this.N.stop(), this.N = null);
          this.i.destroy();
        };
        p.td = function() {
          return this.i;
        };
        function Js(a, b) {
          var c, d, e;
          Q(function(f) {
            if (f.g == 1) {
              c = null;
              if (d = b.values.find(function(g) {
                return g.key == "ID";
              })) c = d.data;
              if (c) {
                if (a.ma.has(c)) return f.return();
                a.ma.add(c);
              }
              xs(a);
              e = [];
              return b && b.values.find(function(g) {
                return g.key == "X-OVERLAY-ID";
              }) ? (e = Ks(b), f.A(2)) : F(f, Ls(a, b), 3);
            }
            f.g != 2 && (e = f.h);
            e.length ? Ms(a, e) : $a("Unsupported HLS interstitial", b);
            G(f);
          });
        }
        function Ns(a, b) {
          var c = Ad(b.eventNode, "OverlayEvent"), d = c.attributes.uri, e = c.attributes.mimeType, f = c.attributes.loop == "true", g = Dd(c, "z", Jd);
          if (d && g != 0) {
            var h = null, k2 = Ad(c, "Background");
            if (k2) {
              var l = k2.attributes.uri;
              l ? h = "center / contain no-repeat url('" + l + "')" : h = yd(k2);
            }
            k2 = 1920;
            l = 1080;
            var m = Ad(c, "Viewport");
            if (m) {
              k2 = Dd(m, "x", Jd);
              if (k2 == null) return;
              l = Dd(m, "y", Jd);
              if (l == null) return;
            }
            var n = { viewport: { x: k2, y: l }, topLeft: { x: 0, y: 0 }, size: { x: k2, y: l } }, q = Ad(c, "Overlay");
            if (m && q) {
              var r = Ad(q, "TopLeft"), u = Ad(q, "Size");
              if (r && u) {
                q = Dd(r, "x", Jd);
                if (q == null) return;
                r = Dd(r, "y", Jd);
                if (r == null) return;
                var v = Dd(u, "x", Jd);
                if (v == null) return;
                u = Dd(u, "y", Jd);
                if (u == null) return;
                n.topLeft.x = q;
                n.topLeft.y = r;
                n.size.x = v;
                n.size.y = u;
              }
            }
            q = null;
            c = Ad(c, "Squeeze");
            if (m && c && (u = Ad(c, "TopLeft"), c = Ad(c, "Size"), u && c)) {
              m = Dd(u, "x", Jd);
              if (m == null) return;
              q = Dd(u, "y", Jd);
              if (q == null) return;
              u = Dd(c, "x", Jd);
              if (u == null) return;
              c = Dd(c, "y", Jd);
              if (c == null) return;
              q = { viewport: { x: k2, y: l }, topLeft: { x: m, y: q }, size: { x: u, y: c } };
            }
            Ms(a, [{
              id: b.id,
              groupId: null,
              startTime: b.startTime,
              endTime: b.endTime,
              uri: d,
              mimeType: e,
              isSkippable: false,
              skipOffset: null,
              skipFor: null,
              canJump: true,
              resumeOffset: null,
              playoutLimit: null,
              once: false,
              pre: false,
              post: false,
              timelineRange: true,
              loop: f,
              overlay: n,
              displayOnBackground: g == -1,
              currentVideo: q,
              background: h,
              clickThroughUrl: null
            }]);
          }
        }
        p.addAdUrlInterstitial = function(a) {
          var b = this, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return c = { type: 12 }, F(n, Os(b, a, c), 2);
            if (n.g != 3) {
              d = n.h;
              e = nd(d, "VAST,vmap:VMAP");
              if (!e) throw new U(2, 10, 10007);
              f = [];
              if (e.tagName == "VAST") return f = ls(e, b.l), n.A(3);
              if (e.tagName != "vmap:VMAP") return n.A(3);
              g = function(q) {
                var r, u;
                return Q(function(v) {
                  if (v.g == 1) return F(v, Os(b, q.uri, c), 2);
                  r = v.h;
                  u = nd(r, "VAST");
                  if (!u) throw new U(2, 10, 10007);
                  f.push.apply(f, x(ls(u, q.time)));
                  G(v);
                });
              };
              h = [];
              k2 = t(ns(e));
              for (l = k2.next(); !l.done; l = k2.next()) m = l.value, h.push(g(m));
              return h.length ? F(n, Promise.all(h), 3) : n.A(3);
            }
            Ms(b, f);
            G(n);
          });
        };
        function Ms(a, b) {
          var c, d, e, f, g, h, k2, l;
          Q(function(m) {
            switch (m.g) {
              case 1:
                c = false, d = t(b), e = d.next();
              case 2:
                if (e.done) {
                  m.A(4);
                  break;
                }
                f = e.value;
                if (!f.uri) {
                  $a("Missing URL in interstitial", f);
                  m.A(3);
                  break;
                }
                if (f.mimeType) {
                  m.A(5);
                  break;
                }
                ra(m, 6);
                g = a.i.Yb();
                return F(m, Po(f.uri, g, a.C.getConfiguration().streaming.retryParameters), 8);
              case 8:
                f.mimeType = m.h;
                ta(m, 5);
                break;
              case 6:
                Aa(m);
              case 5:
                h = f.id || JSON.stringify(f);
                if (a.T.has(h)) {
                  m.A(3);
                  break;
                }
                f.loop && !f.overlay && $a("Loop is only supported in overlay interstitials", f);
                f.overlay || (c = true);
                a.T.add(h);
                a.H.add(f);
                k2 = false;
                f.pre && a.l == null ? k2 = true : f.startTime != 0 || f.canJump ? a.l != null && (l = f.startTime - a.l, l > 0 && l <= 10 && (k2 = true)) : k2 = true;
                k2 && (!a.F.has(f) && As(f) && a.F.set(f, a.i.preload(f.uri, null, f.mimeType || void 0)), Bs(a, f));
              case 3:
                e = d.next();
                m.A(2);
                break;
              case 4:
                c && Es(a), Gs(a), G(m);
            }
          });
        }
        function ys(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? null : c;
          var d = 0, e = null;
          if (a.H.size && a.l != null) {
            var f = a.g.ended, g = Array.from(a.H).sort(function(n, q) {
              return q.startTime - n.startTime;
            }), h = g;
            h = b ? g.filter(function(n) {
              return n.pre;
            }) : f ? g.filter(function(n) {
              return n.post;
            }) : g.filter(function(n) {
              return !n.pre && !n.post;
            });
            g = t(h);
            for (h = g.next(); !h.done; h = g.next()) {
              h = h.value;
              var k2 = false;
              if (b) k2 = h.pre;
              else if (f) k2 = h.post;
              else if (!h.pre && !h.post) {
                var l = a.l - Math.round(h.startTime * 1e3) / 1e3, m = 1;
                a.M.allowStartInMiddleOfInterstitial && h.endTime && h.endTime != Infinity && (m = h.endTime - h.startTime);
                (l > 0 || l == 0 && a.l == 0) && (l <= m || !h.canJump) && (k2 = c == null && a.B && !a.B.pre && !a.B.post && a.B.startTime >= h.startTime ? false : true);
              }
              k2 && (!a.B || h.startTime >= a.B.startTime) && (d == (c || 0) ? e = h : e && !h.canJump && Math.round(h.startTime * 1e3) / 1e3 - Math.round(e.startTime * 1e3) / 1e3 > 1e-3 && (e = h, d = 0), d++);
            }
          }
          return e;
        }
        function zs(a, b, c, d, e, f) {
          f = f === void 0 ? 0 : f;
          a.B = b;
          Fs(a);
          a.u || !a.m || a.h.parentElement || a.m.appendChild(a.h);
          d == 1 && c == 1 && (c = Array.from(a.H).filter(function(g) {
            return b.pre ? g.pre == b.pre : b.post ? g.post == b.post : Math.abs(g.startTime - b.startTime) < 1e-3;
          }).length);
          b.once && (f++, a.H.delete(b), Ds(a), b.overlay || Es(a));
          b.mimeType && (b.mimeType.startsWith("image/") || b.mimeType === "text/html") ? b.overlay ? Ps(a, b, c, d, f) : $a("Unsupported interstitial", b) : a.u && b.overlay ? $a("Unsupported interstitial", b) : Qs(a, b, c, d, e, f);
        }
        function Ps(a, b, c, d, e) {
          function f() {
            a.o && (a.o.stop(), a.o = null);
            a.m.removeChild(k2);
            Is(a, b);
            Rs(a, "ad-stopped");
            a.j.Qa();
            var q = ys(a, b.pre, d - e);
            q ? zs(a, q, c, ++d, Date.now(), e) : a.J = false;
          }
          a.J = true;
          var g = b.overlay, h = b.mimeType == "text/html" ? "iframe" : "img", k2 = document.createElement(h);
          k2.style.objectFit = "contain";
          k2.style.position = "absolute";
          k2.style.border = "none";
          Ss(a, b);
          var l = new vs(b, c, d);
          Rs(a, "ad-impression");
          Rs(a, "ad-started", (/* @__PURE__ */ new Map()).set("ad", l));
          h == "iframe" ? k2.src = b.uri : (k2.src = b.uri, k2.onerror = function(q) {
            Rs(
              a,
              "ad-error",
              (/* @__PURE__ */ new Map()).set("originalEvent", q)
            );
            f();
          });
          l = g.viewport;
          var m = g.topLeft;
          g = g.size;
          l.x == 0 && l.y == 0 ? (k2.width = b.overlay.size.x, k2.height = b.overlay.size.y, k2.style.bottom = "10%", k2.style.left = "0", k2.style.right = "0", k2.style.width = "100%", b.overlay.size.y || h != "iframe" || (k2.style.height = "auto")) : (k2.style.height = g.y / l.y * 100 + "%", k2.style.left = m.x / l.x * 100 + "%", k2.style.top = m.y / l.y * 100 + "%", k2.style.width = g.x / l.x * 100 + "%");
          a.m.appendChild(k2);
          var n = Date.now();
          a.o && a.o.stop();
          a.o = new gf(function() {
            b.playoutLimit && (Date.now() - n) / 1e3 > b.playoutLimit ? (Rs(a, "ad-complete"), f()) : b.endTime && a.g.currentTime > b.endTime ? (Rs(a, "ad-complete"), f()) : a.g.currentTime < b.startTime && (Rs(a, "ad-skipped"), f());
          });
          b.playoutLimit && !b.endTime ? a.o.ia(b.playoutLimit) : b.endTime && a.o.Ea(0.025);
          a.j.D(a.g, "seeked", function() {
            var q = a.g.currentTime;
            if (q < b.startTime || b.endTime && q > b.endTime) a.o && a.o.stop(), Rs(a, "ad-skipped"), f();
          });
          b.clickThroughUrl && a.j.D(k2, "click", function() {
            b.clickThroughUrl && window2.open(b.clickThroughUrl, "_blank");
          });
        }
        function Qs(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I;
          Q(function(K) {
            switch (K.g) {
              case 1:
                g = Date.now();
                a.J = true;
                h = false;
                k2 = function() {
                  if (!a.u && !b.overlay && b.resumeOffset == null) if (b.timelineRange && b.endTime && b.endTime != Infinity) a.g.currentTime != b.endTime && (a.g.currentTime = b.endTime);
                  else {
                    var L = Date.now();
                    a.g.currentTime += (L - e) / 1e3;
                    e = L;
                  }
                };
                l = function(L) {
                  var O, P;
                  return Q(function(N) {
                    if (N.g == 1) {
                      k2();
                      O = ys(a, b.pre, d - f);
                      if (L && b.groupId) for (; O && O.groupId == b.groupId; ) d++, O = ys(a, b.pre, d - f);
                      a.o && (!b.groupId || O && O.groupId != b.groupId) && (a.o.stop(), a.o = null);
                      Is(a, b);
                      if (O && !O.overlay) return N.A(2);
                      b.post && (a.l = null, a.B = null);
                      return a.u ? F(N, a.i.detach(), 4) : F(N, a.i.Cc(), 4);
                    }
                    N.g != 2 && (a.u && (P = b.resumeOffset, P == null && (P = b.timelineRange && b.endTime && b.endTime != Infinity ? b.endTime - (a.l || 0) : (Date.now() - e) / 1e3), Rs(a, "ad-content-resume-requested", (/* @__PURE__ */ new Map()).set("offset", P))), Rs(a, "ad-stopped"), a.j.Qa(), a.J = false, a.u ? Es(a) : (a.h.style.display = "none", k2(), a.g.ended || a.g.play()));
                    Fs(a);
                    O && (Rs(a, "ad-stopped"), a.j.Qa(), zs(
                      a,
                      O,
                      c,
                      ++d,
                      e,
                      f
                    ));
                    G(N);
                  });
                };
                m = function(L) {
                  return Q(function(O) {
                    if (h) return O.return();
                    h = true;
                    Rs(a, "ad-error", (/* @__PURE__ */ new Map()).set("originalEvent", L));
                    return F(O, l(false), 0);
                  });
                };
                n = function() {
                  return Q(function(L) {
                    if (L.g == 1) {
                      if (h) return L.return();
                      h = true;
                      return F(L, l(false), 2);
                    }
                    Rs(a, "ad-complete");
                    G(L);
                  });
                };
                a.$ = function() {
                  return Q(function(L) {
                    if (h) return L.return();
                    h = true;
                    Rs(a, "ad-skipped");
                    return F(L, l(true), 0);
                  });
                };
                q = new us(a.h, b, a.$, c, d, !a.u);
                a.u || (q.setMuted(a.g.muted), q.setVolume(a.g.volume));
                Rs(a, "ad-started", (/* @__PURE__ */ new Map()).set("ad", q));
                (r = q.canSkipNow()) && Rs(a, "ad-skip-state-changed");
                a.j.za(a.i, "error", m);
                a.j.D(a.h, "timeupdate", function() {
                  if (a.h.duration) {
                    var L = q.canSkipNow();
                    r != L && q.getRemainingTime() > 0 && q.getDuration() > 0 && Rs(a, "ad-skip-state-changed");
                    r = L;
                    !a.u && !b.overlay && b.resumeOffset == null && b.timelineRange && b.endTime && b.endTime != Infinity && a.g.currentTime != b.endTime && a.C.Ra().end >= b.endTime && (a.g.currentTime = b.endTime);
                  }
                });
                a.j.za(a.i, "firstquartile", function() {
                  k2();
                  Rs(a, "ad-first-quartile");
                });
                a.j.za(a.i, "midpoint", function() {
                  k2();
                  Rs(a, "ad-midpoint");
                });
                a.j.za(a.i, "thirdquartile", function() {
                  k2();
                  Rs(a, "ad-third-quartile");
                });
                a.j.za(a.i, "complete", n);
                a.j.D(a.h, "play", function() {
                  Rs(a, "ad-resumed");
                });
                a.j.D(a.h, "pause", function() {
                  var L = a.i.getConfiguration();
                  a.h.currentTime >= L.playRangeEnd ? n() : Rs(a, "ad-paused");
                });
                a.j.D(a.h, "volumechange", function() {
                  a.h.muted ? Rs(a, "ad-muted") : Rs(a, "ad-volume-changed");
                });
                b.clickThroughUrl && (u = a.m || a.h, a.j.D(u, "click", function() {
                  b.clickThroughUrl && (q.isPaused() || q.pause(), window2.open(
                    b.clickThroughUrl,
                    "_blank"
                  ));
                }));
                if (!a.u || d != 1) {
                  K.A(2);
                  break;
                }
                Rs(a, "ad-content-pause-requested", (/* @__PURE__ */ new Map()).set("saveLivePosition", true));
                v = new Cg();
                w = function(L) {
                  return Q(function(O) {
                    if (O.g == 1) return L.state != "detach" ? O.A(0) : Hs() ? F(O, new Promise(function(P) {
                      return new gf(P).ia(0.1);
                    }), 3) : O.A(3);
                    v.resolve();
                    a.j.Ma(a.C, "onstatechange", w);
                    G(O);
                  });
                };
                a.j.D(a.C, "onstatechange", w);
                return F(K, v, 2);
              case 2:
                return Ss(a, b), a.u || (a.h.style.display = "", b.overlay ? (a.h.loop = b.loop, z = b.overlay.viewport, y = b.overlay.topLeft, B = b.overlay.size, a.h.style.height = B.y / z.y * 100 + "%", a.h.style.left = y.x / z.x * 100 + "%", a.h.style.top = y.y / z.y * 100 + "%", a.h.style.width = B.x / z.x * 100 + "%") : (a.g.pause(), b.resumeOffset != null && b.resumeOffset != 0 && (a.g.currentTime += b.resumeOffset), a.h.loop = false, a.h.style.height = "100%", a.h.style.left = "0", a.h.style.top = "0", a.h.style.width = "100%")), ra(K, 4), xs(a), b.startTime && b.endTime && b.endTime != Infinity && b.startTime != b.endTime && (C = b.endTime - b.startTime, C > 0 && a.i.configure("playRangeEnd", C)), b.playoutLimit && !a.o && (a.o = new gf(function() {
                  a.$();
                }).ia(b.playoutLimit), a.i.configure("playRangeEnd", b.playoutLimit)), F(K, a.i.Vb(a.h), 6);
              case 6:
                return H = null, a.M.allowStartInMiddleOfInterstitial && a.l != null && (D = a.l - b.startTime, Math.abs(D) > 0.25 && (H = D)), a.F.has(b) ? F(K, a.F.get(b), 10) : F(K, a.i.load(b.uri, H, b.mimeType || void 0), 8);
              case 10:
                return A = K.h, a.F.delete(b), A ? F(K, a.i.load(A), 8) : F(K, a.i.load(b.uri, H, b.mimeType || void 0), 8);
              case 8:
                b.overlay && a.g.paused ? a.h.pause() : a.h.play();
                E = (Date.now() - g) / 1e3;
                Rs(a, "ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", E));
                a.u && a.g.play();
                b.overlay && (b.pre || b.post || a.C.W() && !(b.startTime > 0) || (J = function() {
                  var L = a.g.currentTime - b.startTime;
                  Math.abs(L - a.h.currentTime) > 0.1 && (a.h.currentTime = L);
                }, a.j.za(a.h, "playing", J), a.j.D(a.g, "seeking", J)), a.j.D(a.g, "seeked", function() {
                  var L = a.g.currentTime;
                  (L < b.startTime || b.endTime && L > b.endTime) && a.$();
                }));
                ta(K, 0);
                break;
              case 4:
                I = Aa(K);
                if (!a.J) return K.return();
                m(I);
                G(K);
            }
          });
        }
        function Ss(a, b) {
          b.displayOnBackground && (a.g.style.zIndex = "1");
          if (b.currentVideo != null) {
            var c = b.currentVideo;
            a.g.style.transformOrigin = "top left";
            var d = true, e = [], f = c.topLeft.x / c.viewport.x * 100;
            f > 0 && f <= 100 && (e.push("translateX(" + f + "%)"), d = false);
            f = c.topLeft.y / c.viewport.y * 100;
            f > 0 && f <= 100 && (e.push("translateY(" + f + "%)"), d = false);
            f = c.size.x / c.viewport.x;
            f < 1 && e.push("scaleX(" + f + ")");
            c = c.size.y / c.viewport.y;
            f < 1 && e.push("scaleY(" + c + ")");
            e.length && (a.g.style.transform = e.join(" "));
            d && (a.g.style.transition = "transform 250ms");
          }
          a.m && (b.clickThroughUrl ? (a.m.setAttribute("ad-active", "true"), a.m.style.pointerEvents = "") : a.m.style.pointerEvents = "none", b.background && (a.m.style.background = b.background));
          a.G && (a.G.style.background = b.overlay ? "" : "rgb(0, 0, 0)");
        }
        function Is(a, b) {
          if (!b || b.displayOnBackground) a.g.style.zIndex = "";
          b && b.currentVideo == null || (a.g.style.transformOrigin = "", a.g.style.transition = "", a.g.style.transform = "");
          a.m && (a.m.removeAttribute("ad-active"), a.m.style.pointerEvents = "", !b || b.background) && (a.m.style.background = "");
          a.G && (a.G.style.background = "");
        }
        function Ls(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya, va, xa, Ga;
          return Q(function(Ca) {
            switch (Ca.g) {
              case 1:
                c = [];
                if (!b) return Ca.return(c);
                d = b.values.find(function(wa) {
                  return wa.key == "X-ASSET-URI";
                });
                e = b.values.find(function(wa) {
                  return wa.key == "X-ASSET-LIST";
                });
                if (!d && !e) return Ca.return(c);
                f = null;
                if (g = b.values.find(function(wa) {
                  return wa.key == "ID";
                })) f = g.data;
                h = f == null ? Math.floor(b.startTime * 10) / 10 : b.startTime;
                (k2 = b.endTime) && b.endTime != Infinity && typeof b.endTime == "number" && (k2 = f == null ? Math.floor(b.endTime * 10) / 10 : b.endTime);
                l = b.values.find(function(wa) {
                  return wa.key == "X-RESTRICT";
                });
                n = m = true;
                l && l.data && (q = l.data, m = !q.includes("SKIP"), n = !q.includes("JUMP"));
                r = m ? 0 : null;
                if (u = b.values.find(function(wa) {
                  return wa.key == "X-ENABLE-SKIP-AFTER";
                })) v = u.data, r = parseFloat(v), isNaN(r) && (r = m ? 0 : null);
                w = null;
                if (z = b.values.find(function(wa) {
                  return wa.key == "X-ENABLE-SKIP-FOR";
                })) y = z.data, w = parseFloat(y), isNaN(r) && (w = null);
                B = null;
                if (C = b.values.find(function(wa) {
                  return wa.key == "X-RESUME-OFFSET";
                })) H = C.data, B = parseFloat(H), isNaN(B) && (B = null);
                D = null;
                if (A = b.values.find(function(wa) {
                  return wa.key == "X-PLAYOUT-LIMIT";
                })) E = A.data, D = parseFloat(E), isNaN(D) && (D = null);
                K = I = J = false;
                if (L = b.values.find(function(wa) {
                  return wa.key == "CUE";
                })) O = L.data, J = O.includes("ONCE"), I = O.includes("PRE"), K = O.includes("POST");
                P = false;
                (N = b.values.find(function(wa) {
                  return wa.key == "X-TIMELINE-OCCUPIES";
                })) ? (M = N.data, P = M.includes("RANGE")) : !C && a.C.W() && (P = !I && !K);
                if (d) {
                  R = d.data;
                  if (!R) return Ca.return(c);
                  c.push({
                    id: f,
                    groupId: null,
                    startTime: h,
                    endTime: k2,
                    uri: R,
                    mimeType: null,
                    isSkippable: m,
                    skipOffset: r,
                    skipFor: w,
                    canJump: n,
                    resumeOffset: B,
                    playoutLimit: D,
                    once: J,
                    pre: I,
                    post: K,
                    timelineRange: P,
                    loop: false,
                    overlay: null,
                    displayOnBackground: false,
                    currentVideo: null,
                    background: null,
                    clickThroughUrl: null
                  });
                  Ca.A(2);
                  break;
                }
                if (!e) {
                  Ca.A(2);
                  break;
                }
                T = e.data;
                if (!T) return Ca.return(c);
                ra(Ca, 4);
                ma = { type: 11 };
                return F(Ca, Os(a, T, ma), 6);
              case 6:
                W = Ca.h;
                Ia = cc(W);
                ua = JSON.parse(Ia);
                if (Ea = ua["SKIP-CONTROL"]) ya = Ea["ENABLE-SKIP-AFTER"], typeof ya == "number" && (r = parseFloat(ya), isNaN(ya) && (r = m ? 0 : null)), va = Ea["ENABLE-SKIP-FOR"], typeof va == "number" && (w = parseFloat(va), isNaN(va) && (w = null));
                for (xa = 0; xa < ua.ASSETS.length; xa++) Ga = ua.ASSETS[xa], Ga.URI && c.push({ id: f + "_shaka_asset_" + xa, groupId: f, startTime: h, endTime: k2, uri: Ga.URI, mimeType: null, isSkippable: m, skipOffset: r, skipFor: w, canJump: n, resumeOffset: B, playoutLimit: D, once: J, pre: I, post: K, timelineRange: P, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: null });
                ta(Ca, 2);
                break;
              case 4:
                Aa(Ca);
              case 2:
                return Ca.return(c);
            }
          });
        }
        function Ks(a) {
          var b = [];
          if (!a) return b;
          var c = a.values.find(function(w) {
            return w.key == "X-ASSET-URI";
          });
          if (!c) return b;
          c = c.data;
          if (!c) return b;
          var d = null, e = a.values.find(function(w) {
            return w.key == "X-OVERLAY-ID";
          });
          e && (d = e.data);
          e = d == null ? Math.floor(a.startTime * 10) / 10 : a.startTime;
          var f = a.endTime;
          a.endTime && a.endTime != Infinity && typeof a.endTime == "number" && (f = d == null ? Math.floor(a.endTime * 10) / 10 : a.endTime);
          var g = false, h = false, k2 = false, l = a.values.find(function(w) {
            return w.key == "CUE";
          });
          l && (k2 = l.data, g = k2.includes("ONCE"), h = k2.includes("PRE"), k2 = k2.includes("POST"));
          l = null;
          var m = a.values.find(function(w) {
            return w.key == "X-ASSET-MIMETYPE";
          });
          m && (l = m.data);
          m = false;
          var n = a.values.find(function(w) {
            return w.key == "X-LOOP";
          });
          n && (m = n.data == "YES");
          n = 1;
          var q = a.values.find(function(w) {
            return w.key == "X-DEPTH";
          });
          q && (n = parseFloat(q.data), isNaN(n) && (n = 1));
          q = null;
          var r = a.values.find(function(w) {
            return w.key == "X-BACKGROUND";
          });
          r && (q = r.data);
          r = 1920;
          var u = 1080, v = a.values.find(function(w) {
            return w.key == "X-VIEWPORT";
          });
          if (v) {
            u = v.data.split("x");
            if (u.length != 2) return b;
            r = parseFloat(u[0]);
            u = parseFloat(u[1]);
          }
          r = { viewport: { x: r, y: u }, topLeft: { x: 0, y: 0 }, size: { x: r, y: u } };
          if (u = a.values.find(function(w) {
            return w.key == "X-OVERLAY-POSITION";
          })) {
            u = u.data.split("x");
            if (u.length != 2) return b;
            r.topLeft.x = parseFloat(u[0]);
            r.topLeft.y = parseFloat(u[1]);
          }
          if (u = a.values.find(function(w) {
            return w.key == "X-OVERLAY-SIZE";
          })) {
            u = u.data.split("x");
            if (u.length != 2) return b;
            r.size.x = parseFloat(u[0]);
            r.size.y = parseFloat(u[1]);
          }
          u = null;
          if (v = a.values.find(function(w) {
            return w.key == "X-SQUEEZECURRENT";
          })) {
            if (u = parseFloat(v.data), isNaN(u) && (u = 1), u = { viewport: { x: 1920, y: 1080 }, topLeft: { x: 0, y: 0 }, size: { x: 1920 * u, y: 1080 * u } }, a = a.values.find(function(w) {
              return w.key == "X-SQUEEZECURRENT-POSITION";
            })) {
              a = a.data.split("x");
              if (a.length != 2) return b;
              u.topLeft.x = parseFloat(a[0]);
              u.topLeft.y = parseFloat(a[1]);
            }
          }
          b.push({
            id: d,
            groupId: null,
            startTime: e,
            endTime: f,
            uri: c,
            mimeType: l,
            isSkippable: false,
            skipOffset: null,
            skipFor: null,
            canJump: true,
            resumeOffset: null,
            playoutLimit: null,
            once: g,
            pre: h,
            post: k2,
            timelineRange: true,
            loop: m,
            overlay: r,
            displayOnBackground: n == -1,
            currentVideo: u,
            background: q,
            clickThroughUrl: null
          });
          return b;
        }
        function Es(a) {
          for (var b = [], c = t(a.H), d = c.next(), e = {}; !d.done; e = { Bc: void 0 }, d = c.next()) d = d.value, d.overlay || (e.Bc = { start: d.startTime, end: null }, d.pre ? (e.Bc.start = 0, e.Bc.end = null) : d.post ? (e.Bc.start = -1, e.Bc.end = null) : d.timelineRange && (e.Bc.end = d.endTime), b.find(/* @__PURE__ */ (function(f) {
            return function(g) {
              return f.Bc.start == g.start && f.Bc.end == g.end;
            };
          })(e)) || b.push(e.Bc));
          Rs(a, "ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b));
        }
        function xs(a) {
          a.i.configure(a.C.di());
          a.i.configure("ads.disableHLSInterstitial", true);
          a.i.configure("ads.disableDASHInterstitial", true);
          a.i.configure("playRangeEnd", Infinity);
          Tg(a.C.Yb(), a.i.Yb());
        }
        function Os(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (g.g == 1) return d = Ug([b], Ag()), e = a.C.Yb().request(7, d, c), F(g, e.promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        function As(a) {
          return (a = a.mimeType) ? !a.startsWith("image/") && a !== "text/html" : true;
        }
        function Hs() {
          var a = rb().Oa();
          return a == "TV" || a == "CONSOLE" || a == "CAST" ? true : false;
        }
        function Bs(a, b) {
          if (!(a.K.has(b) || a.M && !a.M.allowPreloadOnDomElements)) {
            var c = function(f) {
              var g = document.createElement("link");
              g.rel = "preload";
              g.href = f;
              g.as = "image";
              document.head.appendChild(g);
              return g;
            }, d = [];
            if (b.background) {
              var e = b.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
              e && d.push(c(e[2]));
            }
            b.mimeType && b.mimeType.startsWith("image/") && d.push(c(b.uri));
            a.K.set(b, d);
          }
        }
        function Cs(a, b) {
          if (a.K.has(b)) {
            var c = a.K.get(b);
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.parentNode.removeChild(d);
            a.K.delete(b);
          }
        }
        function Rs(a, b, c) {
          a.va(new V(b, c));
        }
        ;
        function Ts(a, b, c, d, e) {
          this.h = a;
          this.j = hd(this.h.skipOffset);
          this.g = e;
          this.i = b;
          this.l = c;
          this.o = d;
          this.m = false;
        }
        p = Ts.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return false;
        };
        p.hasCustomClick = function() {
          return false;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return this.h.durationInSeconds;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
        };
        p.isPaused = function() {
          return this.g.paused;
        };
        p.isSkippable = function() {
          return typeof this.j == "number" ? true : false;
        };
        p.getTimeUntilSkippable = function() {
          if (typeof this.j != "number") return this.getRemainingTime();
          var a = this.getRemainingTime() + this.j - this.getDuration();
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.m = true;
          this.g.currentTime += this.getRemainingTime();
        };
        p.pause = function() {
          return this.g.pause();
        };
        p.play = function() {
          return this.g.play();
        };
        p.getVolume = function() {
          return this.g.volume;
        };
        p.setVolume = function(a) {
          this.g.volume = a;
        };
        p.isMuted = function() {
          return this.g.muted;
        };
        p.isLinear = function() {
          return this.o;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.g.muted = a;
        };
        p.getSequenceLength = function() {
          return this.l ? this.l : 1;
        };
        p.getPositionInSequence = function() {
          return this.i ? this.i : 1;
        };
        p.getTitle = function() {
          return this.h.adTitle;
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return this.h.vastAdId || "";
        };
        p.getAdId = function() {
          return this.h.adId;
        };
        p.getCreativeAdId = function() {
          return this.h.creativeId;
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return null;
        };
        p.getTimeOffset = function() {
          return 0;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
          this.l = this.i = this.g = this.h = null;
        };
        S("shaka.ads.MediaTailorAd", Ts);
        Ts.prototype.release = Ts.prototype.release;
        Ts.prototype.getPodIndex = Ts.prototype.getPodIndex;
        Ts.prototype.getTimeOffset = Ts.prototype.getTimeOffset;
        Ts.prototype.getMediaUrl = Ts.prototype.getMediaUrl;
        Ts.prototype.getAdvertiserName = Ts.prototype.getAdvertiserName;
        Ts.prototype.getCreativeAdId = Ts.prototype.getCreativeAdId;
        Ts.prototype.getAdId = Ts.prototype.getAdId;
        Ts.prototype.getVastAdId = Ts.prototype.getVastAdId;
        Ts.prototype.getVastMediaWidth = Ts.prototype.getVastMediaWidth;
        Ts.prototype.getVastMediaHeight = Ts.prototype.getVastMediaHeight;
        Ts.prototype.getVastMediaBitrate = Ts.prototype.getVastMediaBitrate;
        Ts.prototype.getDescription = Ts.prototype.getDescription;
        Ts.prototype.getTitle = Ts.prototype.getTitle;
        Ts.prototype.getPositionInSequence = Ts.prototype.getPositionInSequence;
        Ts.prototype.getSequenceLength = Ts.prototype.getSequenceLength;
        Ts.prototype.setMuted = Ts.prototype.setMuted;
        Ts.prototype.resize = Ts.prototype.resize;
        Ts.prototype.isLinear = Ts.prototype.isLinear;
        Ts.prototype.isMuted = Ts.prototype.isMuted;
        Ts.prototype.setVolume = Ts.prototype.setVolume;
        Ts.prototype.getVolume = Ts.prototype.getVolume;
        Ts.prototype.play = Ts.prototype.play;
        Ts.prototype.pause = Ts.prototype.pause;
        Ts.prototype.skip = Ts.prototype.skip;
        Ts.prototype.canSkipNow = Ts.prototype.canSkipNow;
        Ts.prototype.getTimeUntilSkippable = Ts.prototype.getTimeUntilSkippable;
        Ts.prototype.isSkippable = Ts.prototype.isSkippable;
        Ts.prototype.isPaused = Ts.prototype.isPaused;
        Ts.prototype.getRemainingTime = Ts.prototype.getRemainingTime;
        Ts.prototype.getMinSuggestedDuration = Ts.prototype.getMinSuggestedDuration;
        Ts.prototype.getDuration = Ts.prototype.getDuration;
        Ts.prototype.isUsingAnotherMediaElement = Ts.prototype.isUsingAnotherMediaElement;
        Ts.prototype.hasCustomClick = Ts.prototype.hasCustomClick;
        Ts.prototype.isClientRendering = Ts.prototype.isClientRendering;
        Ts.prototype.needsSkipUI = Ts.prototype.needsSkipUI;
        function Us(a, b, c, d) {
          this.C = a;
          this.K = b;
          this.h = c;
          this.l = null;
          this.R = NaN;
          this.i = d;
          this.J = false;
          this.B = null;
          this.j = [];
          this.N = [];
          this.M = this.F = this.g = null;
          this.G = /* @__PURE__ */ new Map();
          this.m = [];
          this.u = [];
          this.H = "";
          this.O = true;
          this.I = "";
          this.o = new kb();
        }
        Us.prototype.stop = function() {
          for (var a = t(this.m), b = a.next(); !b.done; b = a.next()) b = b.value, this.o.Ma(b.target, b.type, b.listener);
          Vs(this);
          this.m = [];
          this.u = [];
          this.H = "";
          this.O = true;
          this.I = "";
          this.B = null;
          this.j = [];
          this.N = [];
          this.G.clear();
        };
        Us.prototype.release = function() {
          this.stop();
          this.o && this.o.release();
        };
        Us.prototype.onManifestUpdated = function(a) {
          this.J = a;
          this.H != "" && (Ws(this, this.H, this.O), this.O = false);
        };
        Us.prototype.getCuePoints = function() {
          for (var a = [], b = t(this.j), c = b.next(); !c.done; c = b.next()) {
            c = t(c.value.ads);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, a.push({ start: d.startTimeInSeconds, end: d.startTimeInSeconds + d.durationInSeconds });
          }
          return a;
        };
        function Xs(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u;
          Q(function(v) {
            if (v.g == 1) return d = { type: 7 }, e = Ug([b], Ag()), e.method = "POST", c && (f = JSON.stringify(c), e.body = hc(f)), g = a.K.request(7, e, d), ra(v, 2), F(v, g.promise, 4);
            if (v.g != 2) {
              h = v.h;
              k2 = cc(h.data);
              l = JSON.parse(k2);
              if (l.manifestUrl && l.trackingUrl) m = new Cb(b), n = new Cb(l.trackingUrl), a.H = m.resolve(n).toString(), q = Date.now() / 1e3, r = q - a.R, a.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", r))), u = new Cb(l.manifestUrl), a.l.resolve(m.resolve(u).toString()), a.l = null;
              else throw Error("Insufficient data from MediaTailor.");
              return ta(v, 0);
            }
            Aa(v);
            if (!a.I.length) return a.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."), a.l = null, v.return();
            a.l.resolve(a.I);
            a.l = null;
            G(v);
          });
        }
        function Ws(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y;
          Q(function(B) {
            if (B.g == 1) return d = { type: 8 }, e = Ug([b], Ag()), f = a.K.request(7, e, d), ra(B, 2), F(B, f.promise, 4);
            if (B.g != 2) {
              g = B.h;
              h = [];
              k2 = cc(g.data);
              l = JSON.parse(k2);
              if (l.avails.length > 0) {
                if (JSON.stringify(a.j) != JSON.stringify(l.avails)) {
                  a.j = l.avails;
                  m = t(a.j);
                  for (n = m.next(); !n.done; n = m.next()) for (q = n.value, r = t(q.nonLinearAdsList), u = r.next(); !u.done; u = r.next()) for (v = u.value, w = t(v.nonLinearAdList), z = w.next(); !z.done; z = w.next()) y = z.value, Ys(a, y);
                  h = a.getCuePoints();
                  a.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h)));
                }
              } else a.j.length && a.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h))), Vs(a), a.j = [];
              c && (a.J || h.length > 0) && Zs(a);
              return ta(B, 0);
            }
            Aa(B);
            G(B);
          });
        }
        function Ys(a, b) {
          var c, d, e, f, g, h, k2, l, m;
          Q(function(n) {
            if (n.g == 1) {
              if (!b.staticResource) return n.return();
              c = $s(b);
              if (d = a.G.get(c)) return n.return();
              e = { type: 9 };
              f = Ug([b.staticResource], Ag());
              g = a.K.request(7, f, e);
              ra(n, 2);
              a.G.set(c, []);
              return F(n, g.promise, 4);
            }
            if (n.g != 2) return h = n.h, k2 = cc(h.data), l = JSON.parse(k2), m = l.apps, a.G.set(c, m), ta(n, 0);
            Aa(n);
            a.G.delete(c);
            G(n);
          });
        }
        function $s(a) {
          return [a.adId, a.adParameters, a.adSystem, a.adTitle, a.creativeAdId, a.creativeId, a.creativeSequence, a.height, a.width, a.staticResource].join("");
        }
        function Zs(a) {
          at(a);
          a.J || (bt(a), a.o.D(a.h, "seeked", function() {
            bt(a);
          }), a.o.D(a.h, "ended", function() {
            Vs(a);
          }));
          a.o.D(a.h, "timeupdate", function() {
            at(a);
          });
        }
        function bt(a) {
          var b = a.h.currentTime;
          if (b != 0 && a.B == null) {
            for (var c, d, e = t(a.j), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              for (var g = t(f.ads), h = g.next(); !h.done; h = g.next()) if (h = h.value, !d) h.startTimeInSeconds < b && (d = h, c = f);
              else if (h.startTimeInSeconds < b && h.startTimeInSeconds > d.startTimeInSeconds + d.durationInSeconds) {
                d = h;
                c = f;
                break;
              }
            }
            c && d && !a.N.includes(d.adId) && (a.B = b, a.h.currentTime = c.startTimeInSeconds);
          }
        }
        function at(a) {
          if (a.h.duration && (a.g || a.j.length)) {
            var b = a.h.currentTime, c = false;
            if (a.g) {
              c = true;
              var d = a.F, e = d.startTimeInSeconds + 0.5 * d.durationInSeconds, f = d.startTimeInSeconds + 0.75 * d.durationInSeconds;
              b >= d.startTimeInSeconds + 0.25 * d.durationInSeconds && !a.u.includes("firstQuartile") ? (a.u.push("firstQuartile"), ct(a, "firstQuartile")) : b >= e && !a.u.includes("midpoint") ? (a.u.push("midpoint"), ct(a, "midpoint")) : b >= f && !a.u.includes("thirdQuartile") && (a.u.push("thirdQuartile"), ct(a, "thirdQuartile"));
              d = a.g.getRemainingTime();
              e = a.g.getDuration();
              a.g.canSkipNow() && d > 0 && e > 0 && ct(a, "skipStateChanged");
              e > 0 && (d <= 0 || d > e) && Vs(a);
            }
            if (!a.g || !a.g.isLinear()) {
              a: for (d = t(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g && a.g.isLinear()) break;
                for (f = 0; f < e.ads.length; f++) {
                  var g = e.ads[f], h = g.startTimeInSeconds + g.durationInSeconds;
                  if (g.startTimeInSeconds <= b && h > b) {
                    if (a.N.includes(g.adId)) {
                      if (a.h.ended) continue;
                      a.h.currentTime = h;
                      break a;
                    }
                    Vs(a);
                    a.M = e;
                    a.g = new Ts(g, f + 1, e.ads.length, true, a.h);
                    a.F = g;
                    f === 0 && ct(a, "breakStart");
                    dt(a);
                    break;
                  }
                }
              }
              if (!a.g) for (d = t(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g) break;
                for (f = 0; f < e.nonLinearAdsList.length; f++) if (g = e.nonLinearAdsList[f], g.nonLinearAdList.length) {
                  h = e.startTimeInSeconds;
                  var k2 = a.G.get($s(g.nonLinearAdList[0]));
                  if (h <= b && k2 && k2.length) {
                    Vs(a);
                    h = a;
                    k2 = t(k2);
                    for (var l = k2.next(); !l.done; l = k2.next()) if (l = l.value, l.data.source.length) {
                      var m = document.createElement("img");
                      m.src = l.data.source[0].url;
                      m.style.top = (l.placeholder.top || 0) + "%";
                      m.style.height = 100 - (l.placeholder.top || 0) + "%";
                      m.style.left = (l.placeholder.left || 0) + "%";
                      m.style.maxWidth = 100 - (l.placeholder.left || 0) + "%";
                      m.style.objectFit = "contain";
                      m.style.position = "absolute";
                      h.C.appendChild(m);
                    }
                    a.M = e;
                    a.g = new Ts(g, f + 1, e.ads.length, false, a.h);
                    a.F = g;
                    f === 0 && ct(a, "breakStart");
                    dt(a);
                    break;
                  }
                }
              }
              c && !a.g && (b = a.h.currentTime, a.B && a.B > b && (a.h.currentTime = a.B), a.B = null);
            }
          }
        }
        function Vs(a) {
          if (a.g) {
            for (; a.C.lastChild; ) a.C.removeChild(a.C.firstChild);
            a.J || a.N.push(a.F.adId);
            var b = a.g.m;
            (b === void 0 ? 0 : b) ? ct(a, "skip") : ct(a, "complete");
            b = t(a.m);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, a.o.Ma(c.target, c.type, c.listener);
            a.m = [];
            a.u = [];
            b = a.g.getPositionInSequence();
            c = a.g.getSequenceLength();
            b === c && ct(a, "breakEnd");
            a.g = null;
            a.F = null;
            a.M = null;
          }
        }
        function dt(a) {
          var b = false;
          a.h.paused ? b = true : (ct(a, "impression"), ct(a, "start"));
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted && ct(a, "mute");
          } });
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted || ct(a, "unmute");
          } });
          a.m.push({ target: a.h, type: "play", listener: function() {
            b ? (ct(a, "impression"), ct(a, "start"), b = false) : ct(a, "resume");
          } });
          a.m.push({ target: a.h, type: "pause", listener: function() {
            ct(a, "pause");
          } });
          for (var c = t(a.m), d = c.next(); !d.done; d = c.next()) d = d.value, a.o.D(
            d.target,
            d.type,
            d.listener
          );
        }
        function ct(a, b) {
          var c = a.F.trackingEvents.find(function(f) {
            return f.eventType == b;
          });
          c || (c = a.M.adBreakTrackingEvents.find(function(f) {
            return f.eventType == b;
          }));
          if (c) {
            var d = { type: 10 };
            c = t(c.beaconUrls);
            for (var e = c.next(); !e.done; e = c.next()) (e = e.value) && e != "" && (e = Ug([e], Ag()), e.method = "POST", a.K.request(7, e, d));
          }
          switch (b) {
            case "impression":
              a.i(new V("ad-impression"));
              break;
            case "start":
              a.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", a.g)));
              break;
            case "mute":
              a.i(new V("ad-muted"));
              break;
            case "unmute":
              a.i(new V("ad-volume-changed"));
              break;
            case "resume":
              a.i(new V("ad-resumed"));
              break;
            case "pause":
              a.i(new V("ad-paused"));
              break;
            case "firstQuartile":
              a.i(new V("ad-first-quartile"));
              break;
            case "midpoint":
              a.i(new V("ad-midpoint"));
              break;
            case "thirdQuartile":
              a.i(new V("ad-third-quartile"));
              break;
            case "complete":
              a.i(new V("ad-complete"));
              a.i(new V("ad-stopped"));
              break;
            case "skip":
              a.i(new V("ad-skipped"));
              a.i(new V("ad-stopped"));
              break;
            case "breakStart":
              a.C.setAttribute("ad-active", "true");
              break;
            case "breakEnd":
              a.C.removeAttribute("ad-active");
              break;
            case "skipStateChanged":
              a.i(new V("ad-skip-state-changed"));
          }
        }
        ;
        function et(a, b) {
          this.g = a;
          this.i = null;
          this.h = b;
        }
        p = et.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return false;
        };
        p.hasCustomClick = function() {
          return true;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return this.i ? this.i.duration : -1;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return this.i ? this.i.duration - this.i.currentTime : -1;
        };
        p.isPaused = function() {
          return this.h.paused;
        };
        p.isSkippable = function() {
          return this.g.isSkippable();
        };
        p.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.h.currentTime += this.getRemainingTime();
        };
        p.pause = function() {
          return this.h.pause();
        };
        p.play = function() {
          return this.h.play();
        };
        p.getVolume = function() {
          return this.h.volume;
        };
        p.setVolume = function(a) {
          this.h.volume = a;
        };
        p.isMuted = function() {
          return this.h.muted;
        };
        p.isLinear = function() {
          return true;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.h.muted = a;
        };
        p.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getTotalAds();
        };
        p.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getAdPosition();
        };
        p.getTitle = function() {
          return this.g.getTitle();
        };
        p.getDescription = function() {
          return this.g.getDescription();
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        p.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.getAdId();
        };
        p.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        p.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        p.getMediaUrl = function() {
          return null;
        };
        p.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getTimeOffset();
        };
        p.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getPodIndex();
        };
        p.release = function() {
          this.h = this.i = this.g = null;
        };
        S("shaka.ads.ServerSideAd", et);
        et.prototype.release = et.prototype.release;
        et.prototype.getPodIndex = et.prototype.getPodIndex;
        et.prototype.getTimeOffset = et.prototype.getTimeOffset;
        et.prototype.getMediaUrl = et.prototype.getMediaUrl;
        et.prototype.getAdvertiserName = et.prototype.getAdvertiserName;
        et.prototype.getCreativeAdId = et.prototype.getCreativeAdId;
        et.prototype.getAdId = et.prototype.getAdId;
        et.prototype.getVastAdId = et.prototype.getVastAdId;
        et.prototype.getVastMediaWidth = et.prototype.getVastMediaWidth;
        et.prototype.getVastMediaHeight = et.prototype.getVastMediaHeight;
        et.prototype.getVastMediaBitrate = et.prototype.getVastMediaBitrate;
        et.prototype.getDescription = et.prototype.getDescription;
        et.prototype.getTitle = et.prototype.getTitle;
        et.prototype.getPositionInSequence = et.prototype.getPositionInSequence;
        et.prototype.getSequenceLength = et.prototype.getSequenceLength;
        et.prototype.setMuted = et.prototype.setMuted;
        et.prototype.resize = et.prototype.resize;
        et.prototype.isLinear = et.prototype.isLinear;
        et.prototype.isMuted = et.prototype.isMuted;
        et.prototype.setVolume = et.prototype.setVolume;
        et.prototype.getVolume = et.prototype.getVolume;
        et.prototype.play = et.prototype.play;
        et.prototype.pause = et.prototype.pause;
        et.prototype.skip = et.prototype.skip;
        et.prototype.canSkipNow = et.prototype.canSkipNow;
        et.prototype.getTimeUntilSkippable = et.prototype.getTimeUntilSkippable;
        et.prototype.isSkippable = et.prototype.isSkippable;
        et.prototype.isPaused = et.prototype.isPaused;
        et.prototype.getRemainingTime = et.prototype.getRemainingTime;
        et.prototype.getMinSuggestedDuration = et.prototype.getMinSuggestedDuration;
        et.prototype.getDuration = et.prototype.getDuration;
        et.prototype.isUsingAnotherMediaElement = et.prototype.isUsingAnotherMediaElement;
        et.prototype.hasCustomClick = et.prototype.hasCustomClick;
        et.prototype.isClientRendering = et.prototype.isClientRendering;
        et.prototype.needsSkipUI = et.prototype.needsSkipUI;
        function ft(a, b, c, d) {
          var e = this;
          this.u = a;
          this.l = b;
          this.j = null;
          this.G = NaN;
          this.i = d;
          this.H = false;
          this.B = this.m = this.o = null;
          this.C = "";
          this.F = [];
          this.h = new kb();
          a = new google.ima.dai.api.UiSettings();
          a.setLocale(c);
          this.g = new google.ima.dai.api.StreamManager(this.l, this.u, a);
          this.i(new V("ima-stream-manager-loaded", (/* @__PURE__ */ new Map()).set("imaStreamManager", this.g)));
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function(f) {
            gt(e, f);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function() {
            e.C.length ? e.j.resolve(e.C) : e.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");
            e.j = null;
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function() {
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function(f) {
            f = f.getAd();
            e.m = new et(f, e.l);
            e.B && (e.m.i = e.B);
            e.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", e.m)));
            e.u.setAttribute("ad-active", "true");
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function() {
            e.u.removeAttribute("ad-active");
            var f = e.l.currentTime;
            e.o && e.o > f && (e.l.currentTime = e.o, e.o = null);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function(f) {
            e.B = f.getStreamData().adProgressData;
            e.m && (e.m.i = e.B);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function() {
            e.i(new V("ad-first-quartile"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function() {
            e.i(new V("ad-midpoint"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function() {
            e.i(new V("ad-third-quartile"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function() {
            e.i(new V("ad-complete"));
            e.i(new V("ad-stopped"));
            e.u.removeAttribute("ad-active");
            e.m = null;
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function() {
            e.i(new V("ad-skipped"));
            e.i(new V("ad-stopped"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function(f) {
            var g = f.getStreamData();
            f = [];
            g = t(g.cuepoints);
            for (var h = g.next(); !h.done; h = g.next()) h = h.value, f.push({ start: h.start, end: h.end });
            e.F = f;
            e.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", f)));
          });
        }
        p = ft.prototype;
        p.configure = function() {
        };
        p.stop = function() {
          this.C = "";
          this.o = null;
          this.F = [];
        };
        p.release = function() {
          this.stop();
          this.h && this.h.release();
        };
        p.onCueMetadataChange = function(a) {
          if (a.key && a.data) {
            var b = {};
            b[a.key] = a.data;
            this.g.onTimedMetadata(b);
          }
        };
        p.getCuePoints = function() {
          return this.F;
        };
        function gt(a, b) {
          a.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.G)));
          b = b.getStreamData().url;
          a.j.resolve(b);
          a.j = null;
          a.H || a.h.D(a.l, "seeked", function() {
            var c = a.l.currentTime;
            if (c != 0) {
              a.g.streamTimeForContentTime(c);
              var d = a.g.previousCuePointForStreamTime(c);
              d && !d.played && (a.o = c, a.l.currentTime = d.start);
            }
          });
        }
        ;
        function Z() {
          Mg.call(this);
          this.h = this.i = this.j = this.g = null;
          this.m = new hs();
          this.o = navigator.language;
          this.l = null;
        }
        la(Z, Mg);
        p = Z.prototype;
        p.setLocale = function(a) {
          this.o = a;
        };
        p.configure = function(a) {
          this.l = a;
          this.g && this.g.configure(this.l);
          this.j && this.j.configure(this.l);
          this.h && this.h.configure(this.l);
        };
        p.initInterstitial = function(a, b, c) {
          var d = this;
          this.g && this.g.release();
          this.g = new ws(a, b, c, function(e) {
            return ht(d, e);
          });
          this.g.configure(this.l);
        };
        p.initClientSide = function(a, b, c) {
          var d = this;
          if (!window2.google || !google.ima || !google.ima.AdsLoader) throw new U(2, 10, 1e4);
          this.j && this.j.release();
          this.j = new os(a, b, this.o, c, function(e) {
            return ht(d, e);
          });
          this.j.configure(this.l);
        };
        p.release = function() {
          this.g && (this.g.release(), this.g = null);
          this.j && (this.j.release(), this.j = null);
          this.i && (this.i.release(), this.i = null);
          this.h && (this.h.release(), this.h = null);
          Mg.prototype.release.call(this);
        };
        p.onAssetUnload = function() {
          this.g && this.g.stop();
          this.j && this.j.stop();
          this.i && this.i.stop();
          this.h && this.h.stop();
          this.dispatchEvent(new V("ad-stopped"));
          this.dispatchEvent(new V("ad-content-attach-requested"));
          this.m = new hs();
        };
        p.requestClientSideAds = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.g && b.g.destroy();
          b.m && b.m.contentComplete();
          b.H = Date.now() / 1e3;
          b.m.requestAds(a);
        };
        p.updateClientSideAdsRenderingSettings = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.C = a;
          b.g && b.g.updateAdsRenderingSettings(b.C);
        };
        p.initMediaTailor = function(a, b, c) {
          var d = this;
          this.i && this.i.release();
          this.i = new Us(a, b, c, function(e) {
            return ht(d, e);
          });
        };
        p.requestMediaTailorStream = function(a, b, c) {
          if (!this.i) throw new U(1, 10, 10005);
          var d = this.i;
          c = c === void 0 ? "" : c;
          d.l ? a = Promise.reject(new U(1, 10, 10004)) : (d.l = new Cg(), Xs(d, a, b), d.I = c || "", d.R = Date.now() / 1e3, a = d.l);
          return a;
        };
        p.addMediaTailorTrackingUrl = function(a) {
          if (!this.i) throw new U(1, 10, 10005);
          var b = this.i;
          b.H = a;
          b.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", 0)));
        };
        p.initServerSide = function(a, b) {
          var c = this;
          if (!window2.google || !google.ima || !google.ima.dai) throw new U(2, 10, 10002);
          this.h && this.h.release();
          this.h = new ft(a, b, this.o, function(d) {
            return ht(c, d);
          });
          this.h.configure(this.l);
        };
        p.requestServerSideStream = function(a, b) {
          b = b === void 0 ? "" : b;
          if (!this.h) throw new U(1, 10, 10003);
          a.adTagParameters || (a.adTagParameters = {});
          var c = a.adTagParameters;
          (c.mpt || c.mpv) && $a('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.adTagParameters.mpt = "shaka-player";
          a.adTagParameters.mpv = "v4.16.8";
          c = this.h;
          c.j ? a = Promise.reject(new U(1, 10, 10004)) : (a instanceof google.ima.dai.api.LiveStreamRequest && (c.H = true), c.j = new Cg(), c.g.requestStream(a), c.C = b || "", c.G = Date.now() / 1e3, a = c.j);
          return a;
        };
        p.replaceServerSideAdTagParameters = function(a) {
          if (!this.h) throw new U(1, 10, 10003);
          (a.mpt || a.mpv) && $a('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.mpt = "Shaka Player";
          a.mpv = "v4.16.8";
          this.h.g.replaceAdTagParameters(a);
        };
        p.getServerSideCuePoints = function() {
          xb("AdManager.getServerSideCuePoints", "Please use getCuePoints function.");
          return this.getCuePoints();
        };
        p.getCuePoints = function() {
          var a = [];
          this.h && (a = a.concat(this.h.getCuePoints()));
          this.i && (a = a.concat(this.i.getCuePoints()));
          return a;
        };
        p.getStats = function() {
          var a = this.m;
          return { loadTimes: a.g, averageLoadTime: is(a), started: a.h, overlayAds: a.j, playedCompletely: a.l, skipped: a.m, errors: a.i };
        };
        p.onManifestUpdated = function(a) {
          if (this.i) this.i.onManifestUpdated(a);
        };
        p.onDashTimedMetadata = function(a) {
          this.h && a.schemeIdUri == "urn:google:dai:2018" && this.h.g.processMetadata(a.schemeIdUri, a.eventNode ? a.eventNode.attributes.messageData : null, a.startTime);
        };
        p.onHlsTimedMetadata = function(a, b) {
          this.h && this.h.g.processMetadata("ID3", a.data, b);
        };
        p.onCueMetadataChange = function(a) {
          if (this.h) this.h.onCueMetadataChange(a);
        };
        p.onHLSInterstitialMetadata = function(a, b, c) {
          this.l && this.l.disableHLSInterstitial || (this.g || this.initInterstitial(null, a, b), this.g && Js(this.g, c));
        };
        p.onDASHInterstitialMetadata = function(a, b, c) {
          if (!this.l || !this.l.disableDASHInterstitial) {
            var d = c.schemeIdUri;
            if (d == "urn:mpeg:dash:event:alternativeMPD:insert:2025" || d == "urn:mpeg:dash:event:alternativeMPD:replace:2025") {
              if (this.g || this.initInterstitial(null, a, b), this.g && (a = this.g, b = c.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:replace:2025", d = c.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:insert:2025", b || d)) {
                for (var e = c.startTime, f = c.endTime, g = null, h = 0, k2, l = t(c.eventNode.children), m = l.next(); !m.done; m = l.next()) if (m = m.value, m.tagName == "AlternativeMPD") {
                  if (m = m.attributes.uri) {
                    k2 = m;
                    break;
                  }
                } else if (m.tagName == "InsertPresentation" || m.tagName == "ReplacePresentation") {
                  var n = m.attributes.url;
                  if (n) {
                    k2 = kc(n);
                    (l = Dd(m, "maxDuration", Jd)) && (g = l / c.timescale);
                    (l = Dd(m, "returnOffset", Jd)) && (h = l / c.timescale);
                    b && h && (f = e + h);
                    break;
                  }
                }
                k2 && Ms(a, [{ id: c.id, groupId: null, startTime: e, endTime: f, uri: k2, mimeType: null, isSkippable: false, skipOffset: null, skipFor: null, canJump: true, resumeOffset: d ? h : null, playoutLimit: g, once: false, pre: false, post: false, timelineRange: b && !d, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: null }]);
              }
            } else (d == "urn:mpeg:dash:event:2012" || d == "urn:scte:dash:scte214-events") && c.eventNode && Ad(c.eventNode, "OverlayEvent") && (this.g || this.initInterstitial(null, a, b), this.g && Ns(this.g, c));
          }
        };
        p.addCustomInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          Ms(this.g, [a]);
        };
        p.addAdUrlInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.addAdUrlInterstitial(a);
        };
        p.getInterstitialPlayer = function() {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.td();
        };
        function ht(a, b) {
          if (b && b.type) switch (b.type) {
            case "ads-loaded":
              a.m.g.push(b.loadTime);
              break;
            case "ad-started":
              a.m.h++;
              var c = b.ad;
              c && !c.isLinear() && a.m.j++;
              break;
            case "ad-complete":
              a.m.l++;
              break;
            case "ad-skipped":
              a.m.m++;
              break;
            case "ad-error":
              a.m.i++;
          }
          a.dispatchEvent(b);
        }
        S("shaka.ads.AdManager", Z);
        Z.prototype.getInterstitialPlayer = Z.prototype.getInterstitialPlayer;
        Z.prototype.addAdUrlInterstitial = Z.prototype.addAdUrlInterstitial;
        Z.prototype.addCustomInterstitial = Z.prototype.addCustomInterstitial;
        Z.prototype.onDASHInterstitialMetadata = Z.prototype.onDASHInterstitialMetadata;
        Z.prototype.onHLSInterstitialMetadata = Z.prototype.onHLSInterstitialMetadata;
        Z.prototype.onCueMetadataChange = Z.prototype.onCueMetadataChange;
        Z.prototype.onHlsTimedMetadata = Z.prototype.onHlsTimedMetadata;
        Z.prototype.onDashTimedMetadata = Z.prototype.onDashTimedMetadata;
        Z.prototype.onManifestUpdated = Z.prototype.onManifestUpdated;
        Z.prototype.getStats = Z.prototype.getStats;
        Z.prototype.getCuePoints = Z.prototype.getCuePoints;
        Z.prototype.getServerSideCuePoints = Z.prototype.getServerSideCuePoints;
        Z.prototype.replaceServerSideAdTagParameters = Z.prototype.replaceServerSideAdTagParameters;
        Z.prototype.requestServerSideStream = Z.prototype.requestServerSideStream;
        Z.prototype.initServerSide = Z.prototype.initServerSide;
        Z.prototype.addMediaTailorTrackingUrl = Z.prototype.addMediaTailorTrackingUrl;
        Z.prototype.requestMediaTailorStream = Z.prototype.requestMediaTailorStream;
        Z.prototype.initMediaTailor = Z.prototype.initMediaTailor;
        Z.prototype.updateClientSideAdsRenderingSettings = Z.prototype.updateClientSideAdsRenderingSettings;
        Z.prototype.requestClientSideAds = Z.prototype.requestClientSideAds;
        Z.prototype.onAssetUnload = Z.prototype.onAssetUnload;
        Z.prototype.release = Z.prototype.release;
        Z.prototype.initClientSide = Z.prototype.initClientSide;
        Z.prototype.initInterstitial = Z.prototype.initInterstitial;
        Z.prototype.configure = Z.prototype.configure;
        Z.prototype.setLocale = Z.prototype.setLocale;
        Z.ADS_LOADED = "ads-loaded";
        Z.AD_STARTED = "ad-started";
        Z.AD_FIRST_QUARTILE = "ad-first-quartile";
        Z.AD_MIDPOINT = "ad-midpoint";
        Z.AD_THIRD_QUARTILE = "ad-third-quartile";
        Z.AD_COMPLETE = "ad-complete";
        Z.AD_STOPPED = "ad-stopped";
        Z.AD_SKIPPED = "ad-skipped";
        Z.AD_VOLUME_CHANGED = "ad-volume-changed";
        Z.AD_MUTED = "ad-muted";
        Z.AD_PAUSED = "ad-paused";
        Z.AD_RESUMED = "ad-resumed";
        Z.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        Z.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        Z.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        Z.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        Z.AD_CLICKED = "ad-clicked";
        Z.AD_PROGRESS = "ad-progress";
        Z.AD_BUFFERING = "ad-buffering";
        Z.AD_IMPRESSION = "ad-impression";
        Z.AD_DURATION_CHANGED = "ad-duration-changed";
        Z.AD_CLOSED = "ad-closed";
        Z.AD_LOADED = "ad-loaded";
        Z.ALL_ADS_COMPLETED = "all-ads-completed";
        Z.AD_LINEAR_CHANGED = "ad-linear-changed";
        Z.AD_METADATA = "ad-metadata";
        Z.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        Z.AD_ERROR = "ad-error";
        Z.AD_BREAK_READY = "ad-break-ready";
        Z.AD_INTERACTION = "ad-interaction";
        Z.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        Z.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        Z.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        Fq = function() {
          return new Z();
        };
        function it(a) {
          return JSON.stringify(a, function(b, c) {
            if (typeof c != "function") {
              b = c instanceof V;
              if (c instanceof Event || b) {
                var d = {};
                for (f in c) {
                  var e = c[f];
                  e && typeof e == "object" ? f == "detail" ? d[f] = e : e instanceof Event || e instanceof V ? d[f] = { __type__: "Event", event: it(e) } : b && Array.isArray(e) && (d[f] = e) : f in Event || (d[f] = e);
                }
                return d;
              }
              if (c instanceof Error) {
                var f = /* @__PURE__ */ new Set(["name", "message", "stack"]);
                for (d in c) f.add(d);
                b = t(Object.getOwnPropertyNames(c));
                for (d = b.next(); !d.done; d = b.next()) f.add(d.value);
                b = {};
                f = t(f);
                for (d = f.next(); !d.done; d = f.next()) d = d.value, b[d] = c[d];
                c = { __type__: "Error", contents: b };
              } else if (c instanceof TimeRanges) {
                f = { __type__: "TimeRanges", length: c.length, start: [], end: [] };
                c = t(Aj(c));
                for (b = c.next(); !b.done; b = c.next()) b = b.value, d = b.end, f.start.push(b.start), f.end.push(d);
                c = f;
              } else c = ArrayBuffer.isView(c) && c.BYTES_PER_ELEMENT === 1 ? { __type__: "Uint8Array", entries: Array.from(c) } : typeof c == "number" ? isNaN(c) ? "NaN" : isFinite(c) ? c : c < 0 ? "-Infinity" : "Infinity" : c;
              return c;
            }
          });
        }
        function jt(a) {
          return JSON.parse(a, function(b, c) {
            if (c == "NaN") var d = NaN;
            else if (c == "-Infinity") d = -Infinity;
            else if (c == "Infinity") d = Infinity;
            else if (c && typeof c == "object" && c.__type__ == "TimeRanges") d = kt(c);
            else if (c && typeof c == "object" && c.__type__ == "Uint8Array") d = new Uint8Array(c.entries);
            else if (c && typeof c == "object" && c.__type__ == "Error") {
              b = c.contents;
              c = Error(b.message);
              for (d in b) c[d] = b[d];
              d = c;
            } else d = c && typeof c == "object" && c.__type__ == "Event" ? jt(c.event) : c;
            return d;
          });
        }
        function kt(a) {
          return { length: a.length, start: function(b) {
            return a.start[b];
          }, end: function(b) {
            return a.end[b];
          } };
        }
        var lt = "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "), mt = "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "), nt = ["loop", "playbackRate"], ot = ["pause", "play"], pt = (/* @__PURE__ */ new Map()).set("getAssetUri", 2).set("getAudioLanguages", 4).set("getAudioLanguagesAndRoles", 4).set("getBufferFullness", 1).set("getBufferedInfo", 2).set("getExpiration", 2).set("getKeyStatuses", 2).set("getPlaybackRate", 2).set(
          "getTextLanguages",
          4
        ).set("getTextLanguagesAndRoles", 4).set("isAudioOnly", 10).set("isBuffering", 1).set("isInProgress", 1).set("isLive", 10).set("isTextTrackVisible", 1).set("isVideoOnly", 10).set("keySystem", 10).set("seekRange", 1).set("getLoadMode", 10).set("getManifestType", 10).set("isFullyLoaded", 1).set("isEnded", 1).set("getBandwidthEstimate", 1).set("isRemotePlayback", 1), qt = (/* @__PURE__ */ new Map()).set("getConfiguration", 4).set("getConfigurationForLowLatency", 4).set("getStats", 5).set("getAudioTracks", 2).set("getChaptersTracks", 2).set(
          "getImageTracks",
          2
        ).set("getVideoTracks", 2).set("getTextTracks", 2).set("getVariantTracks", 2), rt = (/* @__PURE__ */ new Map()).set("getPlayheadTimeAsDate", 1).set("getPresentationStartTimeAsDate", 20).set("getSegmentAvailabilityDuration", 20), st = [["getConfiguration", "configure", "getConfigurationForLowLatency", "configurationForLowLatency"]], tt = [["isTextTrackVisible", "setTextTrackVisibility"]], ut = "cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "), vt = "addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");
        function wt(a, b, c, d, e, f, g) {
          var h = this;
          this.H = a;
          this.K = g;
          this.l = new gf(b);
          this.M = c;
          this.u = false;
          this.B = d;
          this.G = e;
          this.N = f;
          this.i = this.m = false;
          this.J = "";
          this.o = null;
          this.C = function() {
            return xt(h);
          };
          this.F = function(k2, l) {
            k2 = jt(l);
            switch (k2.type) {
              case "event":
                var m = k2.targetName, n = Kg(k2.event);
                h.B(m, n);
                break;
              case "update":
                m = k2.update;
                for (n in m) {
                  k2 = h.g[n] || {};
                  for (var q in m[n]) k2[q] = m[n][q];
                }
                h.u && (h.M(), h.u = false);
                break;
              case "asyncComplete":
                if (q = k2.id, n = k2.error, l = k2.res, k2 = h.h.get(q), h.h.delete(q), k2) if (n) {
                  q = new U(
                    n.severity,
                    n.category,
                    n.code
                  );
                  for (m in n) q[m] = n[m];
                  k2.reject(q);
                } else k2.resolve(l);
            }
          };
          this.g = { video: {}, player: {} };
          this.I = 0;
          this.h = /* @__PURE__ */ new Map();
          this.j = null;
          yt.add(this);
        }
        p = wt.prototype;
        p.destroy = function() {
          yt.delete(this);
          zt(this);
          At && Bt(this);
          this.l && (this.l.stop(), this.l = null);
          this.G = this.B = null;
          this.i = this.m = false;
          this.F = this.C = this.j = this.h = this.g = this.o = null;
          return Promise.resolve();
        };
        p.wb = function() {
          return this.i;
        };
        p.$g = function() {
          return this.J;
        };
        p.init = function() {
          if (this.H.length) if (window2.chrome && chrome.cast && chrome.cast.isAvailable) {
            this.m = true;
            this.l.Kb();
            var a = new chrome.cast.SessionRequest(this.H, [], null, this.K, null);
            a = new chrome.cast.ApiConfig(a, function(b) {
              for (var c = t(yt), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = b;
                d.j = new Cg();
                d.u = true;
                Ct(d, e);
              }
            }, function(b) {
              for (var c = t(yt), d = c.next(); !d.done; d = c.next()) d = d.value, Dt = b == "available", d.l.Kb();
            }, "origin_scoped");
            chrome.cast.initialize(a, function() {
            }, function() {
            });
            Dt && this.l.ia(Et);
            (a = At) && a.status != chrome.cast.SessionStatus.STOPPED ? (this.j = new Cg(), this.u = true, Ct(this, a)) : At = null;
          } else window2.__onGCastApiAvailable !== Ft && (Gt = window2.__onGCastApiAvailable || null, window2.__onGCastApiAvailable = Ft);
        };
        p.nh = function(a) {
          this.o = a;
          this.i && Ht(this, { type: "appData", appData: this.o });
        };
        p.cast = function() {
          var a = this;
          return Q(function(b) {
            if (!a.m) throw new U(1, 8, 8e3);
            if (!Dt) throw new U(1, 8, 8001);
            if (a.i) throw new U(1, 8, 8002);
            a.j = new Cg();
            chrome.cast.requestSession(function(c) {
              return Ct(a, c);
            }, function(c) {
              return It(a, c);
            });
            return F(b, a.j, 0);
          });
        };
        function Jt(a) {
          a.i && chrome.cast.requestSession(function(b) {
            return Ct(a, b);
          }, function(b) {
            return It(a, b);
          });
        }
        p.qd = function() {
          if (this.i) {
            zt(this);
            if (At) {
              Bt(this);
              try {
                At.stop(function() {
                }, function() {
                });
              } catch (a) {
              }
              At = null;
            }
            xt(this);
          }
        };
        p.get = function(a, b) {
          var c = this;
          if (a == "video") {
            if (ot.includes(b)) return function() {
              return c.Hi.apply(c, [a, b].concat(x(Na.apply(0, arguments))));
            };
          } else if (a == "player") {
            if (rt.has(b) && !this.get("player", "isLive")()) return function() {
            };
            if (ut.includes(b)) return function() {
              return c.Hi.apply(c, [a, b].concat(x(Na.apply(0, arguments))));
            };
            if (vt.includes(b)) return function() {
              return c.Lk.apply(c, [a, b].concat(x(Na.apply(0, arguments))));
            };
            if (pt.has(b) || qt.has(b)) return function() {
              return c.g[a][b];
            };
          }
          return this.g[a][b];
        };
        p.set = function(a, b, c) {
          this.g[a][b] = c;
          Ht(this, { type: "set", targetName: a, property: b, value: c });
        };
        function Ct(a, b) {
          var c = a.N();
          At = b;
          b.addUpdateListener(a.C);
          b.addMessageListener("urn:x-cast:com.google.shaka.v2", a.F);
          xt(a);
          Ht(a, { type: "init", initState: c, appData: a.o });
          a.j.resolve();
        }
        function It(a, b) {
          var c = 8003;
          switch (b.code) {
            case "cancel":
              c = 8004;
              break;
            case "timeout":
              c = 8005;
              break;
            case "receiver_unavailable":
              c = 8006;
          }
          a.j.reject(new U(2, 8, c, b));
        }
        p.Hi = function(a, b) {
          Ht(this, { type: "call", targetName: a, methodName: b, args: Na.apply(2, arguments) });
        };
        p.Lk = function(a, b) {
          var c = Na.apply(2, arguments), d = new Cg(), e = this.I.toString();
          this.I++;
          this.h.set(e, d);
          try {
            Ht(this, { type: "asyncCall", targetName: a, methodName: b, args: c, id: e });
          } catch (f) {
            d.reject(f);
          }
          return d;
        };
        function Bt(a) {
          var b = At;
          b.removeUpdateListener(a.C);
          b.removeMessageListener("urn:x-cast:com.google.shaka.v2", a.F);
        }
        function xt(a) {
          var b = At ? At.status == "connected" : false;
          if (a.i && !b) {
            a.G();
            for (var c in a.g) a.g[c] = {};
            zt(a);
          }
          a.i = b;
          a.J = b ? At.receiver.friendlyName : "";
          a.l.Kb();
        }
        function zt(a) {
          if (a.h) for (var b = t(a.h.keys()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = a.h.get(c);
            a.h.delete(c);
            d.reject(new U(1, 7, 7e3));
          }
        }
        function Ht(a, b) {
          b = it(b);
          var c = At;
          try {
            c.sendMessage("urn:x-cast:com.google.shaka.v2", b, function() {
            }, cb);
          } catch (d) {
            throw b = new U(2, 8, 8005, d), c = new V("error", (/* @__PURE__ */ new Map()).set("detail", b)), a.B("player", c), a.qd(), b;
          }
        }
        var Et = 0.02, Dt = false, At = null, Gt = null, yt = /* @__PURE__ */ new Set();
        function Ft(a) {
          Gt ? window2.__onGCastApiAvailable = Gt : delete window2.__onGCastApiAvailable;
          Gt = null;
          if (a) for (var b = t(yt), c = b.next(); !c.done; c = b.next()) c.value.init();
          typeof window2.__onGCastApiAvailable === "function" && window2.__onGCastApiAvailable(a);
        }
        ;
        function Kt(a, b, c, d) {
          d = d === void 0 ? false : d;
          Mg.call(this);
          var e = this;
          this.i = a;
          this.h = b;
          this.l = this.o = this.m = this.u = this.j = null;
          this.I = c;
          this.H = d;
          this.F = [];
          this.C = [];
          this.B = [];
          this.G = /* @__PURE__ */ new Map();
          this.g = null;
          window2.chrome && rb().Oa() != "CAST" ? (this.g = new wt(c, function() {
            return Lt(e);
          }, function() {
            return Mt(e);
          }, function(f, g) {
            return Nt(e, f, g);
          }, function() {
            return Ot(e);
          }, function() {
            return Pt(e);
          }, d), Qt(this)) : (this.j = this.i, this.u = this.h);
        }
        la(Kt, Mg);
        p = Kt.prototype;
        p.destroy = function(a) {
          this.g && (a === void 0 ? 0 : a) && this.g.qd();
          this.l && (this.l.release(), this.l = null);
          a = [];
          this.h && (a.push(this.h.destroy()), this.h = null);
          this.g && (a.push(this.g.destroy()), this.g = null);
          this.u = this.j = this.i = null;
          Mg.prototype.release.call(this);
          return Promise.all(a);
        };
        p.ck = function() {
          return this.j;
        };
        p.td = function() {
          return this.u;
        };
        p.mj = function() {
          return this.g ? this.g.m && Dt : false;
        };
        p.wb = function() {
          return this.g ? this.g.wb() : false;
        };
        p.$g = function() {
          return this.g ? this.g.$g() : "";
        };
        p.cast = function() {
          var a = this;
          return Q(function(b) {
            return b.g == 1 ? a.g ? F(b, a.g.cast(), 2) : b.return() : a.h ? F(b, a.h.Cc(), 0) : b.return();
          });
        };
        p.nh = function(a) {
          this.g && this.g.nh(a);
        };
        p.al = function() {
          this.g && Jt(this.g);
        };
        p.qd = function() {
          this.g && this.g.qd();
        };
        p.nj = function(a, b) {
          b = b === void 0 ? false : b;
          var c = this;
          return Q(function(d) {
            if (d.g == 1) {
              if (a == c.I && b == c.H) return d.return();
              c.I = a;
              c.H = b;
              if (!c.g) return d.return();
              c.g.qd();
              return F(d, c.g.destroy(), 2);
            }
            c.g = null;
            c.g = new wt(a, function() {
              return Lt(c);
            }, function() {
              return Mt(c);
            }, function(e, f) {
              return Nt(c, e, f);
            }, function() {
              return Ot(c);
            }, function() {
              return Pt(c);
            }, b);
            c.g.init();
            G(d);
          });
        };
        function Qt(a) {
          a.g.init();
          a.l = new kb();
          for (var b = t(lt), c = b.next(); !c.done; c = b.next()) a.l.D(a.i, c.value, function(f) {
            a.g.wb() || (f = Kg(f), a.m.dispatchEvent(f));
          });
          for (var d in Lg) a.l.D(a.h, Lg[d], function(f) {
            a.g.wb() || a.o.dispatchEvent(f);
          });
          a.j = {};
          b = {};
          for (var e in a.i) b = { ce: b.ce }, b.ce = e, Object.defineProperty(a.j, b.ce, { configurable: false, enumerable: true, get: /* @__PURE__ */ (function(f) {
            return function() {
              return Rt(a, f.ce);
            };
          })(b), set: /* @__PURE__ */ (function(f) {
            return function(g) {
              var h = f.ce;
              a.g.wb() ? a.g.set("video", h, g) : a.i[h] = g;
            };
          })(b) });
          a.u = {};
          St(
            a,
            function(f) {
              Object.defineProperty(a.u, f, { configurable: false, enumerable: true, get: function() {
                return Tt(a, f);
              } });
            }
          );
          Ut(a);
          a.m = new Mg();
          a.m.Fe = a.j;
          a.o = new Mg();
          a.o.Fe = a.u;
          a.l.D(a.h, "unloading", function() {
            a.g && a.g.wb() || Vt(a);
          });
        }
        function Ut(a) {
          var b = /* @__PURE__ */ new Map();
          St(a, function(c, d) {
            b.has(d) ? (d = b.get(d), c.length < d.length ? a.G.set(c, d) : a.G.set(d, c)) : b.set(d, c);
          });
        }
        function St(a, b) {
          function c(k2) {
            return k2 == "constructor" || typeof d[k2] != "function" ? false : !e.has(k2);
          }
          var d = a.h, e = /* @__PURE__ */ new Set(), f;
          for (f in d) c(f) && (e.add(f), b(f, d[f]));
          a = Object.getPrototypeOf(d);
          for (f = Object.getPrototypeOf({}); a && a != f; ) {
            for (var g = t(Object.getOwnPropertyNames(a)), h = g.next(); !h.done; h = g.next()) h = h.value, c(h) && (e.add(h), b(h, d[h]));
            a = Object.getPrototypeOf(a);
          }
        }
        function Pt(a) {
          var b = { video: {}, player: {}, playerAfterLoad: {}, manifest: a.h.rd(), startTime: null, addThumbnailsTrackCalls: a.F, addTextTrackAsyncCalls: a.C, addChaptersTrackCalls: a.B };
          a.i.pause();
          for (var c = t(nt), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.i[d];
          a.i.ended || (b.startTime = a.i.currentTime);
          c = t(st);
          for (d = c.next(); !d.done; d = c.next()) {
            var e = d.value;
            d = e[1];
            e = a.h[e[0]]();
            b.player[d] = e;
          }
          c = t(tt);
          for (d = c.next(); !d.done; d = c.next()) e = d.value, d = e[1], e = a.h[e[0]](), b.playerAfterLoad[d] = e;
          return b;
        }
        function Lt(a) {
          var b = new V("caststatuschanged");
          a.dispatchEvent(b);
        }
        function Mt(a) {
          var b = new V(a.j.paused ? "pause" : "play");
          a.m.dispatchEvent(b);
        }
        function Ot(a) {
          for (var b = t(st), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = d[1];
            d = a.g.get("player", d[0])();
            a.h[c](d);
          }
          var e = a.F, f = a.C, g = a.B;
          Vt(a);
          var h = a.g.get("player", "getAssetUri")();
          d = a.g.get("video", "ended");
          b = Promise.resolve();
          var k2 = a.i.autoplay;
          c = null;
          d || (c = a.g.get("video", "currentTime"));
          var l;
          (d = a.g.get("player", "getTextTracks")()) && d.length && (l = d.find(function(q) {
            return q.active;
          }));
          var m = a.g.get("player", "isTextTrackVisible")();
          h && (a.i.autoplay = false, b = a.h.load(h, c));
          var n = {};
          c = t(nt);
          for (d = c.next(); !d.done; d = c.next()) d = d.value, n[d] = a.g.get("video", d);
          b.then(function() {
            if (a.i) {
              for (var q = t(e), r = q.next(); !r.done; r = q.next()) {
                r = r.value;
                var u;
                (u = a.td()).Me.apply(u, x(r));
              }
              q = t(f);
              for (u = q.next(); !u.done; u = q.next()) {
                u = u.value;
                var v;
                (v = a.td()).Od.apply(v, x(u));
              }
              v = t(g);
              for (q = v.next(); !q.done; q = v.next()) {
                q = q.value;
                var w;
                (w = a.td()).Le.apply(w, x(q));
              }
              w = t(nt);
              for (v = w.next(); !v.done; v = w.next()) v = v.value, a.i[v] = n[v];
              w = t(tt);
              for (v = w.next(); !v.done; v = w.next()) q = v.value, v = q[1], q = a.g.get("player", q[0])(), a.h[v](q);
              a.h.rh(m);
              l && a.h.kh(l.language, l.roles, l.forced);
              a.i.autoplay = k2;
              h && a.i.play();
            }
          }, function(q) {
            q = (/* @__PURE__ */ new Map()).set("detail", q);
            q = new V("error", q);
            a.h.dispatchEvent(q);
          });
        }
        function Rt(a, b) {
          if (b == "addEventListener") return function(d, e, f) {
            return a.m.addEventListener(d, e, f);
          };
          if (b == "removeEventListener") return function(d, e, f) {
            return a.m.removeEventListener(d, e, f);
          };
          if (a.g.wb() && Object.keys(a.g.g.video).length == 0) {
            var c = a.i[b];
            if (typeof c != "function") return c;
          }
          return a.g.wb() ? a.g.get("video", b) : (b = a.i[b], typeof b == "function" && (b = b.bind(a.i)), b);
        }
        function Tt(a, b, c) {
          c = c === void 0 ? false : c;
          a.G.has(b) && (b = a.G.get(b));
          if (b == "addEventListener") return function(d, e, f) {
            return a.o.addEventListener(d, e, f);
          };
          if (b == "removeEventListener") return function(d, e, f) {
            return a.o.removeEventListener(d, e, f);
          };
          if (b == "getMediaElement") return function() {
            return a.j;
          };
          if (b == "getSharedConfiguration") return a.g.get("player", "getConfiguration");
          if (b == "getNetworkingEngine") return function() {
            return a.h.Yb();
          };
          if (b == "getDrmEngine") return function() {
            return a.h.F;
          };
          if (b == "getAdManager") return function() {
            return a.h.Zh();
          };
          if (b == "getQueueManager") return function() {
            return a.h.gi();
          };
          if (b == "setVideoContainer") return function(d) {
            return a.h.Ui(d);
          };
          if (!c) {
            if (b == "addThumbnailsTrack") return function() {
              var d = Na.apply(0, arguments);
              a.F.push(d);
              return Tt(a, b, true).apply(null, x(d));
            };
            if (b == "addTextTrackAsync") return function() {
              var d = Na.apply(0, arguments);
              a.C.push(d);
              return Tt(a, b, true).apply(null, x(d));
            };
            if (b == "addChaptersTrack") return function() {
              var d = Na.apply(0, arguments);
              a.B.push(d);
              return Tt(a, b, true).apply(null, x(d));
            };
          }
          if (a.g.wb()) {
            if (b == "getManifest" || b == "drmInfo") return function() {
              $a(b + "() does not work while casting!");
              return null;
            };
            if (b == "attach" || b == "detach") return function() {
              $a(b + "() does not work while casting!");
              return Promise.resolve();
            };
            if (b == "getChapters") return function() {
              $a(b + "() does not work while casting!");
              return [];
            };
          }
          return a.g.wb() && Object.keys(a.g.g.video).length == 0 && (pt.has(b) || qt.has(b)) || !a.g.wb() ? a.h[b].bind(a.h) : a.g.get("player", b);
        }
        function Nt(a, b, c) {
          a.g.wb() && (b == "video" ? a.m.dispatchEvent(c) : b == "player" && (c.type == "unloading" && Vt(a), a.o.dispatchEvent(c)));
        }
        function Vt(a) {
          a.F = [];
          a.C = [];
          a.B = [];
        }
        S("shaka.cast.CastProxy", Kt);
        Kt.prototype.changeReceiverId = Kt.prototype.nj;
        Kt.prototype.forceDisconnect = Kt.prototype.qd;
        Kt.prototype.suggestDisconnect = Kt.prototype.al;
        Kt.prototype.setAppData = Kt.prototype.nh;
        Kt.prototype.cast = Kt.prototype.cast;
        Kt.prototype.receiverName = Kt.prototype.$g;
        Kt.prototype.isCasting = Kt.prototype.wb;
        Kt.prototype.canCast = Kt.prototype.mj;
        Kt.prototype.getPlayer = Kt.prototype.td;
        Kt.prototype.getVideo = Kt.prototype.ck;
        Kt.prototype.destroy = Kt.prototype.destroy;
        function Wt(a, b, c, d) {
          Mg.call(this);
          var e = this;
          this.h = a;
          this.g = b;
          this.j = new kb();
          this.I = { video: a, player: b };
          this.G = c || function() {
          };
          this.J = d || function(f) {
            return f;
          };
          this.i = null;
          this.H = false;
          this.o = true;
          this.m = 0;
          this.C = false;
          this.B = true;
          this.u = this.l = null;
          this.F = new gf(function() {
            Xt(e);
          });
          Yt(this);
        }
        la(Wt, Mg);
        p = Wt.prototype;
        p.isConnected = function() {
          return this.H;
        };
        p.jk = function() {
          return this.o;
        };
        p.Xk = function(a) {
          this.i = a;
        };
        p.rj = function() {
          this.i = null;
        };
        p.Yk = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.title = a;
        };
        p.Wk = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.images = [{ url: a }];
        };
        p.Vk = function(a) {
          this.i || (this.i = {});
          this.i.artist = a;
          this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK;
        };
        p.destroy = function() {
          var a = this, b, c;
          return Q(function(d) {
            if (d.g == 1) return a.j && (a.j.release(), a.j = null), b = [], a.g && (b.push(a.g.destroy()), a.g = null), a.F && (a.F.stop(), a.F = null), a.h = null, a.I = null, a.G = null, a.H = false, a.o = true, a.l = null, a.u = null, Mg.prototype.release.call(a), F(d, Promise.all(b), 2);
            c = cast.receiver.CastReceiverManager.getInstance();
            c.stop();
            G(d);
          });
        };
        function Yt(a) {
          var b = cast.receiver.CastReceiverManager.getInstance();
          b.onSenderConnected = function() {
            return Zt(a);
          };
          b.onSenderDisconnected = function() {
            return Zt(a);
          };
          b.onSystemVolumeChanged = function() {
            var e = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
            e && $t(a, { type: "update", update: { video: { volume: e.level, muted: e.muted } } }, a.l);
            $t(a, { type: "event", targetName: "video", event: { type: "volumechange" } }, a.l);
          };
          a.u = b.getCastMessageBus("urn:x-cast:com.google.cast.media");
          a.u.onMessage = function(e) {
            return au(
              a,
              e
            );
          };
          a.l = b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");
          a.l.onMessage = function(e) {
            return bu(a, e);
          };
          b.start();
          b = t(lt);
          for (var c = b.next(); !c.done; c = b.next()) a.j.D(a.h, c.value, function(e) {
            return cu(a, "video", e);
          });
          for (var d in Lg) a.j.D(a.g, Lg[d], function(e) {
            return cu(a, "player", e);
          });
          a.j.D(a.h, "loadeddata", function() {
            a.C = true;
          });
          a.j.D(a.g, "loading", function() {
            a.o = false;
            du(a);
          });
          a.j.D(a.h, "playing", function() {
            a.o = false;
            du(a);
          });
          a.j.D(a.h, "pause", function() {
            du(a);
          });
          a.j.D(a.g, "unloading", function() {
            a.o = true;
            du(a);
          });
          a.j.D(a.h, "ended", function() {
            new gf(function() {
              a.h && a.h.ended && (a.o = true, du(a));
            }).ia(eu);
          });
        }
        function Zt(a) {
          a.m = 0;
          a.B = true;
          a.H = cast.receiver.CastReceiverManager.getInstance().getSenders().length != 0;
          du(a);
        }
        function du(a) {
          var b;
          Q(function(c) {
            if (c.g == 1) return F(c, Promise.resolve(), 2);
            if (!a.g) return c.return();
            b = new V("caststatuschanged");
            a.dispatchEvent(b);
            fu(a) || gu(a);
            G(c);
          });
        }
        function hu(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H;
          Q(function(D) {
            switch (D.g) {
              case 1:
                for (d in b.player) e = b.player[d], a.g[d](e);
                a.G(c);
                f = a.h.autoplay;
                return b.manifest ? (a.h.autoplay = false, ra(D, 5), F(D, a.g.load(b.manifest, b.startTime), 7)) : F(D, Promise.resolve(), 3);
              case 7:
                if (b.addThumbnailsTrackCalls) for (g = t(b.addThumbnailsTrackCalls), h = g.next(); !h.done; h = g.next()) k2 = h.value, a.g.Me.apply(a.g, x(k2));
                if (b.addTextTrackAsyncCalls) for (l = t(b.addTextTrackAsyncCalls), m = l.next(); !m.done; m = l.next()) n = m.value, a.g.Od.apply(a.g, x(n));
                if (b.addChaptersTrackCalls) for (q = t(b.addChaptersTrackCalls), r = q.next(); !r.done; r = q.next()) u = r.value, a.g.Le.apply(a.g, x(u));
                ta(D, 3);
                break;
              case 5:
                return v = Aa(D), w = (/* @__PURE__ */ new Map()).set("detail", v), z = new V("error", w), a.g && a.g.dispatchEvent(z), D.return();
              case 3:
                if (!a.g) return D.return();
                for (y in b.video) B = b.video[y], a.h[y] = B;
                for (C in b.playerAfterLoad) H = b.playerAfterLoad[C], a.g[C](H);
                a.h.autoplay = f;
                b.manifest && (a.h.play(), gu(a));
                G(D);
            }
          });
        }
        function cu(a, b, c) {
          a.g && (Xt(a), $t(a, { type: "event", targetName: b, event: c }, a.l));
        }
        function Xt(a) {
          a.F.ia(iu);
          for (var b = { video: {}, player: {} }, c = t(mt), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.h[d];
          a.g.W() && rt.forEach(function(e, f) {
            a.m % e == 0 && (b.player[f] = a.g[f]());
          });
          pt.forEach(function(e, f) {
            a.m % e == 0 && (b.player[f] = a.g[f]());
          });
          if (c = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) b.video.volume = c.level, b.video.muted = c.muted;
          $t(a, { type: "update", update: b }, a.l);
          qt.forEach(function(e, f) {
            a.m % e == 0 && (e = { player: {} }, e.player[f] = a.g[f](), $t(
              a,
              { type: "update", update: e },
              a.l
            ));
          });
          a.C && (a.m += 1);
          fu(a);
        }
        function fu(a) {
          return a.B && (a.h.duration || a.g.W()) ? (ju(a), a.B = false, true) : false;
        }
        function ju(a, b) {
          var c = { contentId: a.g.rd(), streamType: a.g.W() ? "LIVE" : "BUFFERED", contentType: "" };
          a.g.W() || (c.duration = a.h.duration);
          a.i && (c.metadata = a.i);
          gu(a, b === void 0 ? 0 : b, c);
        }
        function bu(a, b) {
          var c = jt(b.data);
          switch (c.type) {
            case "init":
              a.m = 0;
              a.C = false;
              a.B = true;
              hu(a, c.initState, c.appData);
              Xt(a);
              break;
            case "appData":
              a.G(c.appData);
              break;
            case "set":
              var d = c.targetName, e = c.property;
              c = c.value;
              if (d == "video") {
                if (b = cast.receiver.CastReceiverManager.getInstance(), e == "volume") {
                  b.setSystemVolumeLevel(c);
                  break;
                } else if (e == "muted") {
                  b.setSystemVolumeMuted(c);
                  break;
                }
              }
              a.I[d][e] = c;
              break;
            case "call":
              d = a.I[c.targetName];
              d[c.methodName].apply(d, c.args);
              break;
            case "asyncCall":
              d = c.targetName;
              e = c.methodName;
              d == "player" && e == "load" && (a.m = 0, a.C = false);
              var f = c.id, g = b.senderId;
              b = a.I[d];
              c = b[e].apply(b, c.args);
              d == "player" && e == "load" && (c = c.then(function() {
                a.B = true;
              }));
              c.then(function(h) {
                return ku(a, g, f, null, h);
              }, function(h) {
                return ku(a, g, f, h, null);
              });
          }
        }
        function au(a, b) {
          var c = jt(b.data);
          switch (c.type) {
            case "PLAY":
              a.h.play();
              gu(a);
              break;
            case "PAUSE":
              a.h.pause();
              gu(a);
              break;
            case "SEEK":
              b = c.currentTime;
              var d = c.resumeState;
              b != null && (a.h.currentTime = Number(b));
              d && d == "PLAYBACK_START" ? (a.h.play(), gu(a)) : d && d == "PLAYBACK_PAUSE" && (a.h.pause(), gu(a));
              break;
            case "STOP":
              a.g.Cc().then(function() {
                a.g && gu(a);
              });
              break;
            case "GET_STATUS":
              ju(a, Number(c.requestId));
              break;
            case "VOLUME":
              d = c.volume;
              b = d.level;
              d = d.muted;
              var e = a.h.volume, f = a.h.muted;
              b != null && (a.h.volume = Number(b));
              d != null && (a.h.muted = d);
              e == a.h.volume && f == a.h.muted || gu(a);
              break;
            case "LOAD":
              a.m = 0;
              a.C = false;
              a.B = false;
              b = c.media;
              d = c.currentTime;
              e = a.J(b.contentId);
              f = c.autoplay || true;
              a.G(b.customData);
              f && (a.h.autoplay = true);
              a.g.load(e, d).then(function() {
                a.g && ju(a);
              }).catch(function(g) {
                var h = "LOAD_FAILED";
                g.category == 7 && g.code == 7e3 && (h = "LOAD_CANCELLED");
                $t(a, { requestId: Number(c.requestId), type: h }, a.u);
              });
              break;
            default:
              $t(a, { requestId: Number(c.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND" }, a.u);
          }
        }
        function ku(a, b, c, d, e) {
          a.g && $t(a, { type: "asyncComplete", id: c, error: d, res: e }, a.l, b);
        }
        function $t(a, b, c, d) {
          a.H && (a = it(b), d ? c.getCastChannel(d).send(a) : c.broadcast(a));
        }
        function gu(a, b, c) {
          c = c === void 0 ? null : c;
          var d = { mediaSessionId: 0, playbackRate: a.h.playbackRate, playerState: a.o ? lu : a.g.Ng() ? mu : a.h.paused ? nu : ou, currentTime: a.h.currentTime, supportedMediaCommands: 63, volume: { level: a.h.volume, muted: a.h.muted } };
          c && (d.media = c);
          $t(a, { requestId: b === void 0 ? 0 : b, type: "MEDIA_STATUS", status: [d] }, a.u);
        }
        S("shaka.cast.CastReceiver", Wt);
        Wt.prototype.destroy = Wt.prototype.destroy;
        Wt.prototype.setContentArtist = Wt.prototype.Vk;
        Wt.prototype.setContentImage = Wt.prototype.Wk;
        Wt.prototype.setContentTitle = Wt.prototype.Yk;
        Wt.prototype.clearContentMetadata = Wt.prototype.rj;
        Wt.prototype.setContentMetadata = Wt.prototype.Xk;
        Wt.prototype.isIdle = Wt.prototype.jk;
        Wt.prototype.isConnected = Wt.prototype.isConnected;
        var iu = 0.5, eu = 5, lu = "IDLE", ou = "PLAYING", mu = "BUFFERING", nu = "PAUSED";
        function pu(a, b, c, d, e) {
          if (d >= e) return null;
          for (var f = -1, g = -1, h = 0; h < c.length; h++) if (c[h].some(function(C) {
            return C != null && C.g.trim() != "";
          })) {
            f = h;
            break;
          }
          for (h = c.length - 1; h >= 0; h--) if (c[h].some(function(C) {
            return C != null && C.g.trim() != "";
          })) {
            g = h;
            break;
          }
          if (f === -1 || g === -1) return null;
          for (var k2 = h = false, l = "white", m = "black", n = qu(d, e, h, k2, l, m); f <= g; f++) {
            for (var q = c[f], r = -1, u = -1, v = 0; v < q.length; v++) if (q[v] != null && q[v].g.trim() !== "") {
              r = v;
              break;
            }
            for (v = q.length - 1; v >= 0; v--) if (q[v] != null && q[v].g.trim() !== "") {
              u = v;
              break;
            }
            if (r === -1 || u === -1) q = ru(d, e), a.nestedCues.push(q);
            else {
              for (; r <= u; r++) if (v = q[r]) {
                var w = v.l, z = v.i, y = v.j, B = v.h;
                if (w != h || z != k2 || y != l || B != m) n.payload && a.nestedCues.push(n), n = qu(d, e, w, z, y, B), h = w, k2 = z, l = y, m = B;
                n.payload += v.g;
              } else n.payload += " ";
              n.payload && a.nestedCues.push(n);
              f !== g && (n = ru(d, e), a.nestedCues.push(n));
              n = qu(d, e, h, k2, l, m);
            }
          }
          return a.nestedCues.length ? { cue: a, stream: b } : null;
        }
        function qu(a, b, c, d, e, f) {
          a = new Wd(a, b, "");
          c && a.textDecoration.push(ue);
          d && (a.fontStyle = te);
          a.color = e;
          a.backgroundColor = f;
          return a;
        }
        function ru(a, b) {
          a = new Wd(a, b, "");
          a.lineBreak = true;
          return a;
        }
        function su(a, b, c, d, e) {
          this.g = a;
          this.l = b;
          this.i = c;
          this.h = d;
          this.j = e;
        }
        ;
        function tu(a, b) {
          this.i = [];
          this.g = 1;
          this.h = 0;
          this.F = a;
          this.C = b;
          this.j = this.m = false;
          this.l = "white";
          this.o = "black";
          this.u = this.B = null;
          uu(this);
        }
        function vu(a, b, c) {
          var d = "CC" + ((a.F << 1 | a.C) + 1), e = new Wd(b, c, "");
          e.lineInterpretation = 1;
          var f = wu.get(a.g);
          f && (e.line = f);
          a.u != null && a.B != null && (e.position = 10 + Math.min(70, a.u * 10) + a.B * 2.5);
          (b = pu(e, d, a.i, b, c)) && a.g + b.cue.nestedCues.length - 3 > 15 && (f = wu.get(a.g + 3 - b.cue.nestedCues.length)) && (e.line = f);
          return b;
        }
        function uu(a) {
          xu(a, 0, 15);
          a.g = 1;
        }
        function yu(a, b, c) {
          if (!(c < 32 || c > 127)) {
            var d = "";
            switch (b) {
              case 0:
                d = zu.has(c) ? zu.get(c) : String.fromCharCode(c);
                break;
              case 1:
                d = Au.get(c);
                break;
              case 2:
                a.i[a.g].pop();
                d = Bu.get(c);
                break;
              case 3:
                a.i[a.g].pop(), d = Cu.get(c);
            }
            d && a.i[a.g].push(new su(d, a.m, a.j, a.o, a.l));
          }
        }
        function Du(a, b, c, d) {
          if (!(c < 0 || b < 0)) if (b >= c) for (--d; d >= 0; d--) a.i[b + d] = a.i[c + d].map(function(f) {
            return f;
          });
          else for (var e = 0; e < d; e++) a.i[b + e] = a.i[c + e].map(function(f) {
            return f;
          });
        }
        function xu(a, b, c) {
          for (var d = 0; d <= c; d++) a.i[b + d] = [];
        }
        var zu = /* @__PURE__ */ new Map([[39, ""], [42, ""], [92, ""], [92, ""], [94, ""], [95, ""], [96, ""], [123, ""], [124, ""], [125, ""], [126, ""], [127, ""]]), Au = /* @__PURE__ */ new Map([[48, ""], [49, ""], [50, ""], [51, ""], [52, ""], [53, ""], [54, ""], [55, ""], [56, ""], [57, " "], [58, ""], [59, ""], [60, ""], [61, ""], [62, ""], [63, ""]]), Bu = /* @__PURE__ */ new Map([
          [32, ""],
          [33, ""],
          [34, ""],
          [35, ""],
          [36, ""],
          [37, ""],
          [38, ""],
          [39, ""],
          [40, "*"],
          [41, "'"],
          [42, ""],
          [43, ""],
          [44, ""],
          [45, ""],
          [46, ""],
          [47, ""],
          [48, ""],
          [49, ""],
          [50, ""],
          [51, ""],
          [52, ""],
          [53, ""],
          [54, ""],
          [55, ""],
          [56, ""],
          [57, ""],
          [58, ""],
          [59, ""],
          [60, ""],
          [61, ""],
          [62, ""],
          [63, ""]
        ]), Cu = /* @__PURE__ */ new Map([
          [32, ""],
          [33, ""],
          [34, ""],
          [35, ""],
          [36, ""],
          [37, ""],
          [38, ""],
          [39, ""],
          [40, ""],
          [41, "{"],
          [42, "}"],
          [43, "\\"],
          [44, "^"],
          [45, "_"],
          [46, "|"],
          [47, "~"],
          [48, ""],
          [49, ""],
          [50, ""],
          [51, ""],
          [52, ""],
          [53, ""],
          [54, ""],
          [55, ""],
          [56, ""],
          [57, ""],
          [58, ""],
          [59, ""],
          [60, ""],
          [61, ""],
          [62, ""],
          [63, ""]
        ]), wu = /* @__PURE__ */ new Map([[1, 10], [2, 15.33], [3, 20.66], [4, 26], [5, 31.33], [6, 36.66], [7, 42], [8, 47.33], [9, 52.66], [10, 58], [11, 63.33], [12, 68.66], [13, 74], [14, 79.33], [15, 84.66]]);
        function Eu(a, b) {
          this.h = 0;
          this.o = new tu(a, b);
          this.i = new tu(a, b);
          this.g = this.j = new tu(a, b);
          this.l = 0;
          this.m = null;
        }
        function Fu(a, b, c) {
          a.g = a.i;
          var d = a.g, e = null;
          a.h !== 3 && a.h !== 4 && (e = vu(d, a.l, c), c = a.i, c.g = c.h > 0 ? c.h : 0, xu(c, 0, 15), c = a.j, c.g = c.h > 0 ? c.h : 0, xu(c, 0, 15), d.g = 15);
          a.h = 3;
          d.h = b;
          return e;
        }
        function Gu(a) {
          a.h = 1;
          a.g = a.j;
          a.g.h = 0;
        }
        function Hu(a) {
          ab("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported");
          a.g = a.o;
          a.h = 4;
        }
        var Iu = "black green blue cyan red yellow magenta black".split(" "), Ju = "white green blue cyan red yellow magenta white_italics".split(" ");
        function Ku(a, b) {
          this.J = b;
          this.N = a;
          this.K = this.l = false;
          this.m = this.o = this.H = this.M = this.I = 0;
          this.G = 2;
          this.i = [];
          this.g = this.h = this.j = 0;
          this.F = this.B = false;
          this.C = "white";
          this.u = "black";
          Lu(this);
        }
        function Lu(a) {
          a.i = [];
          for (var b = 0; b < 16; b++) a.i.push(Mu());
        }
        function Mu() {
          for (var a = [], b = 0; b < 42; b++) a.push(null);
          return a;
        }
        function Nu(a, b) {
          Ou(a) && (a.i[a.h][a.g] = new su(b, a.F, a.B, a.u, a.C), a.g++);
        }
        function Ou(a) {
          var b = a.g < a.m && a.g >= 0;
          return a.h < a.o && a.h >= 0 && b;
        }
        Ku.prototype.isVisible = function() {
          return this.l;
        };
        function Pu(a) {
          for (var b = 0, c = 1; c < 16; c++, b++) a.i[b] = a.i[c];
          for (c = 0; c < 1; c++, b++) a.i[b] = Mu();
        }
        function Qu(a, b, c) {
          var d = new Wd(a.j, b, "");
          d.textAlign = a.G === 0 ? "left" : a.G === 1 ? "right" : Yd;
          var e = d.region;
          a.J && (e.id += "svc" + a.J);
          e.id += "win" + a.N;
          e.height = a.o;
          e.width = a.m;
          e.heightUnits = 2;
          e.widthUnits = 2;
          e.viewportAnchorX = a.I;
          e.viewportAnchorY = a.M;
          e.viewportAnchorUnits = a.K ? Zc : 2;
          switch (a.H) {
            case 0:
              e.regionAnchorX = 0;
              e.regionAnchorY = 0;
              break;
            case 1:
              e.regionAnchorX = 50;
              e.regionAnchorY = 0;
              break;
            case 2:
              e.regionAnchorX = 100;
              e.regionAnchorY = 0;
              break;
            case 3:
              e.regionAnchorX = 0;
              e.regionAnchorY = 50;
              break;
            case 4:
              e.regionAnchorX = 50;
              e.regionAnchorY = 50;
              break;
            case 5:
              e.regionAnchorX = 100;
              e.regionAnchorY = 50;
              break;
            case 6:
              e.regionAnchorX = 0;
              e.regionAnchorY = 100;
              break;
            case 7:
              e.regionAnchorX = 50;
              e.regionAnchorY = 100;
              break;
            case 8:
              e.regionAnchorX = 100, e.regionAnchorY = 100;
          }
          if (c = pu(d, "svc" + c, a.i, a.j, b)) a.j = b;
          return c;
        }
        Ku.prototype.display = function() {
          this.l = true;
        };
        function Ru() {
          this.i = [];
          this.h = null;
          this.g = 0;
        }
        function Su(a, b) {
          b.type === 3 ? (a.g = (b.value & 63) * 2 - 1, a.h = []) : a.h && (a.g > 0 && (a.h.push(b), a.g--), a.g === 0 && (a.i.push(new Tu(a.h)), a.h = null, a.g = 0));
        }
        function Tu(a) {
          this.g = 0;
          this.h = a;
        }
        Tu.prototype.Ia = function() {
          return this.g < this.h.length;
        };
        Tu.prototype.Pa = function() {
          return this.g;
        };
        function Uu(a) {
          if (!a.Ia()) throw new U(2, 2, 3e3);
          return a.h[a.g++];
        }
        Tu.prototype.skip = function(a) {
          if (this.g + a > this.h.length) throw new U(2, 2, 3e3);
          this.g += a;
        };
        Tu.prototype.Li = function(a) {
          if (this.g - a < 0) throw new U(2, 2, 3e3);
          this.g -= a;
        };
        function Vu(a) {
          this.i = a;
          this.h = [null, null, null, null, null, null, null, null];
          this.g = null;
        }
        function Wu(a, b, c, d) {
          if (!a.g) return [];
          if (c == 24) return c = Uu(b).value, d = Uu(b).value, c = (function(f) {
            return f.map(function(g) {
              return ("0" + (g & 255).toString(16)).slice(-2);
            }).join("");
          })([c, d]), Nu(a.g, String.fromCharCode(parseInt(c, 16))), [];
          b = a.g;
          var e = null;
          switch (c) {
            case 8:
              !Ou(b) || b.g <= 0 && b.h <= 0 || (b.g <= 0 ? (b.g = b.m - 1, b.h--) : b.g--, b.i[b.h][b.g] = null);
              break;
            case 13:
              b.isVisible() && (e = Qu(b, d, a.i));
              b.h + 1 >= b.o ? Pu(b) : b.h++;
              b.g = 0;
              break;
            case 14:
              b.isVisible() && (e = Qu(b, d, a.i));
              b.i[b.h] = Mu();
              b.g = 0;
              break;
            case 12:
              b.isVisible() && (e = Qu(b, d, a.i)), Lu(b), b.h = 0, b.g = 0;
          }
          return e ? [e] : [];
        }
        function Xu(a, b, c, d) {
          if (c >= 128 && c <= 135) d = c & 7, a.h[d] && (a.g = a.h[d]);
          else {
            if (c === 136) {
              c = Uu(b).value;
              b = [];
              c = t(Yu(a, c));
              for (var e = c.next(); !e.done; e = c.next()) {
                e = a.h[e.value];
                if (e.isVisible()) {
                  var f = Qu(e, d, a.i);
                  f && b.push(f);
                }
                Lu(e);
              }
              return b;
            }
            if (c === 137) for (b = Uu(b).value, b = t(Yu(a, b)), c = b.next(); !c.done; c = b.next()) c = a.h[c.value], c.isVisible() || (c.j = d), c.display();
            else {
              if (c === 138) {
                c = Uu(b).value;
                b = null;
                c = t(Yu(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() && (b = Qu(e, d, a.i)), e.l = false;
                return b ? [b] : [];
              }
              if (c === 139) {
                c = Uu(b).value;
                b = null;
                c = t(Yu(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() ? b = Qu(e, d, a.i) : e.j = d, e.l = !e.l;
                return b ? [b] : [];
              }
              if (c === 140) return b = Uu(b).value, Zu(a, b, d);
              if (c === 143) return d = Zu(a, 255, d), $u(a), d;
              if (c === 144) b.skip(1), d = Uu(b).value, a.g && (a.g.B = (d & 128) > 0, a.g.F = (d & 64) > 0);
              else if (c === 145) d = Uu(b).value, c = Uu(b).value, b.skip(1), a.g && (b = av((c & 48) >> 4, (c & 12) >> 2, c & 3), a.g.C = av((d & 48) >> 4, (d & 12) >> 2, d & 3), a.g.u = b);
              else if (c === 146) d = Uu(b).value, b = Uu(b).value, a.g && (a = a.g, a.h = d & 15, a.g = b & 63);
              else if (c === 151) b.skip(1), b.skip(1), d = Uu(b).value, b.skip(1), a.g && (a.g.G = d & 3);
              else if (c >= 152 && c <= 159) {
                c = (c & 15) - 8;
                e = a.h[c] !== null;
                e || (f = new Ku(c, a.i), f.j = d, a.h[c] = f);
                d = Uu(b).value;
                f = Uu(b).value;
                var g = Uu(b).value, h = Uu(b).value, k2 = Uu(b).value;
                b = Uu(b).value;
                e && (b & 7) === 0 || (b = a.h[c], b.h = 0, b.g = 0, b.F = false, b.B = false, b.C = "white", b.u = "black");
                b = a.h[c];
                b.l = (d & 32) > 0;
                b.M = f & 127;
                b.I = g;
                b.H = (h & 240) >> 4;
                b.K = (f & 128) > 0;
                b.o = (h & 15) + 1;
                b.m = (k2 & 63) + 1;
                a.g = a.h[c];
              }
            }
          }
          return [];
        }
        function Yu(a, b) {
          for (var c = [], d = 0; d < 8; d++) (b & 1) === 1 && a.h[d] && c.push(d), b >>= 1;
          return c;
        }
        function Zu(a, b, c) {
          var d = [];
          b = t(Yu(a, b));
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = a.h[e];
            f.isVisible() && (f = Qu(f, c, a.i)) && d.push(f);
            a.h[e] = null;
          }
          return d;
        }
        function $u(a) {
          a.g = null;
          a.h = [null, null, null, null, null, null, null, null];
        }
        function av(a, b, c) {
          var d = { 0: 0, 1: 0, 2: 1, 3: 1 };
          a = d[a];
          b = d[b];
          c = d[c];
          return bv[a << 2 | b << 1 | c];
        }
        var cv = /* @__PURE__ */ new Map([[32, " "], [33, ""], [37, ""], [42, ""], [44, ""], [48, ""], [49, ""], [50, ""], [51, ""], [52, ""], [53, ""], [57, ""], [58, ""], [60, ""], [61, ""], [63, ""], [118, ""], [119, ""], [120, ""], [121, ""], [122, ""], [123, ""], [124, ""], [125, ""], [126, ""], [127, ""]]), bv = "black blue green cyan red magenta yellow white".split(" ");
        function dv() {
          this.h = [];
          this.g = [];
          this.i = new Ru();
          this.l = 0;
          this.m = /* @__PURE__ */ new Map([["CC1", new Eu(0, 0)], ["CC2", new Eu(0, 1)], ["CC3", new Eu(1, 0)], ["CC4", new Eu(1, 1)]]);
          this.u = this.o = 0;
          this.j = /* @__PURE__ */ new Map();
          this.C = true;
          this.B = /* @__PURE__ */ new Set();
          ev(this);
        }
        dv.prototype.clear = function() {
          this.l = 0;
          this.h = [];
          this.g = [];
          var a = this.i;
          a.i = [];
          a.h = [];
          a.g = 0;
          ev(this);
          a = t(this.j.values());
          for (var b = a.next(); !b.done; b = a.next()) $u(b.value);
        };
        function ev(a) {
          a.o = 0;
          a.u = 0;
          for (var b = t(a.m.values()), c = b.next(); !c.done; c = b.next()) c = c.value, c.h = 0, c.g = c.j, c.m = null, uu(c.i), uu(c.j), uu(c.o);
          a.C = true;
        }
        dv.prototype.extract = function(a, b) {
          if (this.C) {
            for (var c = t(this.m.values()), d = c.next(); !d.done; d = c.next()) d.value.l = b;
            this.C = false;
          }
          a = new hh(a, 0);
          if (!(a.getLength() < 8) && a.Y() === 181 && a.Ca() === 49 && a.U() === 1195456820 && a.Y() === 3 && (c = a.Y(), (c & 64) !== 0)) for (c &= 31, a.skip(1), d = 0; d < c; d++) {
            var e = a.Y(), f = (e & 4) >> 2, g = a.Y(), h = a.Y();
            f && (e &= 3, e === 0 || e === 1 ? this.h.push({ pts: b, type: e, Db: g, kc: h, order: this.h.length }) : (this.g.push({ pts: b, type: e, value: g, order: this.g.length }), this.g.push({ pts: b, type: 2, value: h, order: this.g.length })));
          }
        };
        dv.prototype.decode = function() {
          function a(e, f) {
            return e.pts - f.pts || e.order - f.order;
          }
          var b = [];
          this.h.sort(a);
          this.g.sort(a);
          for (var c = t(this.h), d = c.next(); !d.done; d = c.next()) (d = fv(this, d.value)) && b.push(d);
          c = t(this.g);
          for (d = c.next(); !d.done; d = c.next()) Su(this.i, d.value);
          c = t(this.i.i);
          for (d = c.next(); !d.done; d = c.next()) d = gv(this, d.value), b.push.apply(b, x(d));
          this.i.i = [];
          this.h = [];
          this.g = [];
          return b;
        };
        function fv(a, b) {
          var c = b.type;
          if ((b.Db & 112) === 16) {
            var d = b.Db >> 3 & 1;
            c === 0 ? a.o = d : a.u = d;
          }
          d = "CC" + ((c << 1 | (c ? a.u : a.o)) + 1);
          c = a.m.get(d);
          if (b.Db === 255 && b.kc === 255 || !b.Db && !b.kc || !hv(b.Db) || !hv(b.kc)) return ++a.l >= 45 && ev(a), null;
          a.l = 0;
          b.Db &= 127;
          b.kc &= 127;
          var e = b.Db;
          if (e >= 1 && e <= 15 || !b.Db && !b.kc) return null;
          e = null;
          if ((b.Db & 112) === 16) a: {
            a.B.add(d), d = b.Db;
            a = b.kc;
            if (c.m === (d << 8 | a)) c.m = null;
            else if (c.m = d << 8 | a, (d & 240) === 16 && (a & 192) === 64) {
              b = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][(d & 7) << 1 | a >> 5 & 1];
              d = "white";
              e = false;
              var f = null;
              var g = a > 95 ? a - 96 : a - 64;
              g <= 13 ? d = Ju[Math.floor(g / 2)] : g <= 15 ? e = true : f = Math.floor((g - 16) / 2);
              a = (a & 1) === 1;
              c.h !== 4 && (g = c.g, c.h === 3 && b !== g.g && (c = 1 + b - g.h, Du(g, c, 1 + g.g - g.h, g.h), xu(g, 0, c - 1), xu(g, b + 1, 15 - b)), g.g = b, g.m = a, g.j = e, g.l = d, g.u = f, g.o = "black");
            } else if ((d & 247) === 17 && (a & 240) === 32) c.g.m = false, c.g.j = false, c.g.l = "white", yu(c.g, 0, 32), d = false, b = Ju[(a & 14) >> 1], b === "white_italics" && (b = "white", d = true), c.g.m = (a & 1) === 1, c.g.j = d, c.g.l = b;
            else if ((d & 247) === 16 && (a & 240) === 32 || (d & 247) === 23 && (a & 255) === 45) b = "black", (d & 7) === 0 && (b = Iu[(a & 14) >> 1]), c.g.o = b;
            else if ((d & 247) === 17 && (a & 240) === 48) yu(c.g, 1, a);
            else if ((d & 246) === 18 && (a & 224) === 32) yu(c.g, d & 1 ? 3 : 2, a);
            else {
              if ((d & 246) === 20 && (a & 240) === 32) {
                a = b.pts;
                d = null;
                switch (b.kc) {
                  case 32:
                    Gu(c);
                    break;
                  case 33:
                    c = c.g;
                    c.i[c.g].pop();
                    break;
                  case 37:
                    d = Fu(c, 2, a);
                    break;
                  case 38:
                    d = Fu(c, 3, a);
                    break;
                  case 39:
                    d = Fu(c, 4, a);
                    break;
                  case 40:
                    yu(c.g, 0, 32);
                    break;
                  case 41:
                    c.h = 2;
                    c.g = c.i;
                    c.g.h = 0;
                    c.l = a;
                    break;
                  case 42:
                    uu(c.o);
                    Hu(c);
                    break;
                  case 43:
                    Hu(c);
                    break;
                  case 44:
                    b = c.i;
                    d = null;
                    c.h !== 4 && (d = vu(b, c.l, a));
                    xu(b, 0, 15);
                    break;
                  case 45:
                    b = c.g;
                    c.h !== 3 ? d = null : (d = vu(b, c.l, a), e = b.g - b.h + 1, Du(b, e - 1, e, b.h), xu(b, 0, e - 1), xu(b, b.g, 15 - b.g), c.l = a);
                    break;
                  case 46:
                    xu(c.j, 0, 15);
                    break;
                  case 47:
                    b = null, c.h !== 4 && (b = vu(c.i, c.l, a)), d = c.j, c.j = c.i, c.i = d, Gu(c), c.l = a, d = b;
                }
                e = d;
                break a;
              }
              (d == 23 || d == 31) && a >= 33 && a <= 35 && (c.g.B = a - 32);
            }
            e = null;
          }
          else a = b.kc, yu(c.g, 0, b.Db), yu(c.g, 0, a);
          return e;
        }
        function gv(a, b) {
          var c = [];
          try {
            for (; b.Ia(); ) {
              var d = Uu(b).value, e = (d & 224) >> 5, f = d & 31;
              e === 7 && f != 0 && (e = Uu(b).value & 63);
              if (e != 0) {
                a.B.add("svc" + e);
                a.j.has(e) || a.j.set(e, new Vu(e));
                for (var g = a.j.get(e), h = b.Pa(); b.Pa() - h < f; ) {
                  e = g;
                  var k2 = b, l = Uu(k2), m = l.value, n = l.pts;
                  if (m === 16) {
                    var q = Uu(k2);
                    m = m << 16 | q.value;
                  }
                  if (m >= 0 && m <= 31) var r = Wu(e, k2, m, n);
                  else if (m >= 128 && m <= 159) r = Xu(e, k2, m, n);
                  else {
                    if (m >= 4096 && m <= 4127) e = k2, k2 = m & 255, k2 >= 8 && k2 <= 15 ? e.skip(1) : k2 >= 16 && k2 <= 23 ? e.skip(2) : k2 >= 24 && k2 <= 31 && e.skip(3);
                    else if (m >= 4224 && m <= 4255) e = k2, k2 = m & 255, k2 >= 128 && k2 <= 135 ? e.skip(4) : k2 >= 136 && k2 <= 143 && e.skip(5);
                    else if (m >= 32 && m <= 127) k2 = m, e.g && (k2 === 127 ? Nu(e.g, "") : Nu(e.g, String.fromCharCode(k2)));
                    else if (m >= 160 && m <= 255) e.g && Nu(e.g, String.fromCharCode(m));
                    else if (m >= 4128 && m <= 4223) {
                      if (k2 = m & 255, e.g) if (cv.has(k2)) {
                        var u = cv.get(k2);
                        Nu(e.g, u);
                      } else Nu(e.g, "_");
                    } else m >= 4256 && m <= 4351 && e.g && ((m & 255) != 160 ? Nu(e.g, "_") : Nu(e.g, "[CC]"));
                    r = [];
                  }
                  c.push.apply(c, x(r));
                }
              }
            }
          } catch (v) {
            if (v instanceof U && v.code === 3e3) ab("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
            else throw v;
          }
          return c;
        }
        function hv(a) {
          for (var b = 0; a; ) b ^= a & 1, a >>= 1;
          return b === 1;
        }
        dv.prototype.getStreams = function() {
          return Array.from(this.B);
        };
        S("shaka.cea.CeaDecoder", dv);
        Uc = function() {
          return new dv();
        };
        function iv(a) {
          for (var b = [], c = a, d = a = 0; d < c.length; ) a == 2 && c[d] == 3 ? (a = 0, c = [].concat(x(c)), c.splice(d, 1), c = new Uint8Array(c)) : c[d] == 0 ? a++ : a = 0, d++;
          a = c;
          for (d = 0; d < a.length; ) {
            for (c = 0; a[d] == 255; ) c += 255, d++;
            c += a[d++];
            for (var e = 0; a[d] == 255; ) e += 255, d++;
            e += a[d++];
            c == 4 && b.push(a.subarray(d, d + e));
            d += e;
          }
          return b;
        }
        ;
        function jv() {
          this.j = /* @__PURE__ */ new Map();
          this.i = this.h = 0;
          this.g = kv;
        }
        jv.prototype.init = function(a) {
          function b(f) {
            f = f.name;
            lv.has(f) && (c.g = lv.get(f));
          }
          var c = this, d = [], e = [];
          new kh().box("moov", qh).box("mvex", qh).S("trex", function(f) {
            var g = f.reader;
            g.skip(4);
            g.skip(4);
            f = g.U();
            g = g.U();
            c.h = f;
            c.i = g;
          }).box("trak", qh).S("tkhd", function(f) {
            var g = f.reader;
            f = f.version;
            f == 1 ? (g.skip(8), g.skip(8)) : (g.skip(4), g.skip(4));
            var h = g.U();
            f == 1 ? g.skip(8) : g.skip(4);
            g.skip(4);
            g.skip(8);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(36);
            g.Ca();
            g.Ca();
            g.Ca();
            g.Ca();
            d.push(h);
          }).box("mdia", qh).S(
            "mdhd",
            function(f) {
              f = Ci(f.reader, f.version);
              e.push(f.timescale);
            }
          ).box("minf", qh).box("stbl", qh).S("stsd", sh).box("avc1", b).box("avc3", b).box("dvav", b).box("dva1", b).box("hev1", b).box("hvc1", b).box("dvh1", b).box("dvhe", b).box("vvc1", b).box("vvi1", b).box("dvc1", b).box("dvi1", b).box("encv", th).box("sinf", qh).box("frma", function(f) {
            f = Fi(f.reader).codec;
            lv.has(f) && (c.g = lv.get(f));
          }).parse(a, true, true);
          if (!d.length || !e.length || d.length != e.length) throw new U(2, 2, 2010);
          this.g == kv && $a("Unable to determine bitstream format for CEA parsing!");
          d.forEach(function(f, g) {
            c.j.set(f, e[g]);
          });
        };
        jv.prototype.parse = function(a) {
          var b = this;
          if (this.g == kv) return [];
          var c = [], d = 0, e = [];
          new kh().box("moof", function(f) {
            d = f.start;
            e = [];
            qh(f);
          }).box("traf", function(f) {
            e.push({ baseMediaDecodeTime: null, Td: b.h, Ud: b.i, Di: [], timescale: 9e4 });
            qh(f);
          }).S("trun", function(f) {
            var g = e[e.length - 1];
            f = Di(f.reader, f.version, f.flags);
            g.Di.push(f);
          }).S("tfhd", function(f) {
            var g = e[e.length - 1];
            f = Ai(f.reader, f.flags);
            g.Td = f.Td || b.h;
            g.Ud = f.Ud || b.i;
            f = f.trackId;
            b.j.has(f) && (g.timescale = b.j.get(f));
          }).S("tfdt", function(f) {
            var g = e[e.length - 1];
            f = Bi(f.reader, f.version);
            g.baseMediaDecodeTime = f.baseMediaDecodeTime;
          }).box("mdat", function(f) {
            for (var g = d - f.start - 8, h = f.reader.Pa(), k2 = t(e), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.baseMediaDecodeTime === null ? $a("Unable to find base media decode time for CEA captions!") : (f.reader.seek(h), mv(b, f.reader, l.baseMediaDecodeTime, l.timescale, l.Td, l.Ud, g, l.Di, c));
          }).parse(a, false, true);
          return c;
        };
        function mv(a, b, c, d, e, f, g, h, k2) {
          var l = 0, m = f, n = h.map(function(u) {
            return u.ih;
          });
          n = [].concat.apply([], x(n));
          n.length && (m = n[0].sampleSize || f);
          for (b.skip(g + h[0].mg); b.Ia(); ) {
            g = b.U();
            var q = b.Y(), r = null;
            r = false;
            h = 1;
            switch (a.g) {
              case nv:
                r = q & 31;
                r = r == 6;
                break;
              case ov:
                h = 2;
                b.skip(1);
                r = q >> 1 & 63;
                r = r == 39 || r == 40;
                break;
              case pv:
                h = 2;
                b.skip(1);
                r = q >> 1 & 63;
                r = r == 23 || r == 24;
                break;
              default:
                return;
            }
            if (r) for (q = 0, l < n.length && (q = n[l].Cf || 0), q = (c + q) / d, h = b.Ub(g - h, false), h = t(iv(h)), r = h.next(); !r.done; r = h.next()) k2.push({ packet: r.value, pts: q });
            else try {
              b.skip(g - h);
            } catch (u) {
              break;
            }
            m -= g + 4;
            m == 0 && (c = l < n.length ? c + (n[l].jh || e) : c + e, l++, l < n.length ? m = n[l].sampleSize || f : m = f);
          }
        }
        S("shaka.cea.Mp4CeaParser", jv);
        var kv = 0, nv = 1, ov = 2, pv = 3, lv = (/* @__PURE__ */ new Map()).set("avc1", nv).set("avc3", nv).set("dvav", nv).set("dva1", nv).set("hev1", ov).set("hvc1", ov).set("dvh1", ov).set("dvhe", ov).set("vvc1", pv).set("vvi1", pv).set("dvc1", pv).set("dvi1", pv);
        Vc("video/mp4", function() {
          return new jv();
        });
        function qv() {
          this.g = null;
        }
        qv.prototype.init = function() {
        };
        qv.prototype.parse = function(a) {
          this.g ? this.g.clearData() : this.g = new dk();
          var b = [];
          a = Vb(a);
          if (!lk(a)) return b;
          a = this.g.parse(a);
          var c = a.Vd(), d = a.$e();
          a = [];
          switch (c.video) {
            case "avc":
              a.push(6);
              break;
            case "hvc":
              a.push(39), a.push(40);
          }
          if (!a.length) return b;
          c = t(d);
          for (d = c.next(); !d.done; d = c.next()) if (d = d.value, a.includes(d.type) && d.time != null) for (var e = t(iv(d.data)), f = e.next(); !f.done; f = e.next()) b.push({ packet: f.value, pts: d.time });
          return b;
        };
        S("shaka.cea.TsCeaParser", qv);
        Vc("video/mp2t", function() {
          return new qv();
        });
        function rv(a) {
          var b = 0, c = $b(a), d = c.getUint32(b, true);
          if (d != a.byteLength) return [];
          a: {
            a = b + 4 + 2;
            for (b = []; a < c.byteLength - 1; ) {
              d = c.getUint16(a, true);
              a += 2;
              var e = c.getUint16(a, true);
              a += 2;
              if ((e & 1) != 0 || e + a > c.byteLength) {
                c = [];
                break a;
              }
              var f = Vb(c, a, e);
              b.push({ type: d, value: f });
              a += e;
            }
            c = b;
          }
          return c;
        }
        function sv(a) {
          a = oc(xd(a));
          a = rv(a).filter(function(b) {
            return b.type === tv;
          })[0];
          if (!a) return null;
          a = dc(a.value, true);
          return (a = pd(a, "WRMHEADER")) ? a : null;
        }
        function uv(a) {
          try {
            var b = sv(a);
            if (b) a: {
              for (var c = t(zd(b, "DATA")), d = c.next(); !d.done; d = c.next()) {
                var e = d.value;
                if (e.children) for (var f = t(e.children), g = f.next(); !g.done; g = f.next()) {
                  var h = g.value;
                  if (h.tagName == "LA_URL") {
                    var k2 = xd(h);
                    break a;
                  }
                }
              }
              k2 = "";
            }
            else k2 = "";
            return k2;
          } catch (l) {
            return "";
          }
        }
        var tv = 1;
        function vv() {
          this.g = /* @__PURE__ */ new Map();
        }
        vv.prototype.release = function() {
          this.g.clear();
        };
        function wv(a, b, c, d) {
          var e = xv(a, b), f = null;
          a = [];
          var g = [];
          b = null;
          var h = new Set(e.map(function(l) {
            return l.keyId;
          }));
          h.delete(null);
          var k2 = "cenc";
          if (h.size > 1) throw new U(2, 4, 4010);
          if (!c) {
            g = e.filter(function(l) {
              return l.Gd == "urn:mpeg:dash:sea:2012";
            });
            if (g.length > 1) throw new U(2, 4, 4050);
            g.length && (b = yv(g[0]));
            (g = e.find(function(l) {
              return l.Gd == "urn:mpeg:dash:mp4protection:2011";
            })) && g.encryptionScheme && (k2 = g.encryptionScheme);
            g = e.filter(function(l) {
              return l.Gd == "urn:mpeg:dash:mp4protection:2011" ? (f = l.init || f, false) : l.Gd != "urn:mpeg:dash:sea:2012";
            });
            g.length && (a = zv(f, k2, g, d, h), a.length == 0 && (a = [vc("", k2, f)]));
          }
          if (e.length && !b && (c || !g.length)) for (a = [], c = t(Object.values(d)), d = c.next(); !d.done; d = c.next()) d = d.value, d != "org.w3.clearkey" && a.push(vc(d, k2, f));
          if (h = Array.from(h)[0] || null) for (k2 = t(a), c = k2.next(); !c.done; c = k2.next()) for (c = t(c.value.initData), d = c.next(); !d.done; d = c.next()) d.value.keyId = h;
          return { Th: h, Am: f, drmInfos: a, dg: b, Yh: true };
        }
        function Av(a, b, c, d, e) {
          var f = wv(a, b, d, e);
          if (c.Yh) {
            a = c.drmInfos.length == 1 && !c.drmInfos[0].keySystem;
            b = f.drmInfos.length == 0;
            if (c.drmInfos.length == 0 || a && !b) c.drmInfos = f.drmInfos;
            c.Yh = false;
          } else if (f.drmInfos.length > 0 && (c.drmInfos = c.drmInfos.filter(function(g) {
            return f.drmInfos.some(function(h) {
              return h.keySystem == g.keySystem;
            });
          }), c.drmInfos.length == 0)) throw new U(2, 4, 4008);
          return f.Th || c.Th;
        }
        function Bv(a) {
          var b = Bd(a.node, "https://dashif.org/CPS", "Laurl");
          if (b && (b = xd(b))) return b;
          if ((b = Bd(a.node, "urn:microsoft:playready", "pro")) && xd(b)) return uv(b);
          if (a = Bd(a.node, "urn:mpeg:cenc:2013", "pssh")) {
            if (a = xd(a)) {
              b = oc(a);
              a = 8;
              b = $b(b);
              var c = b.getUint8(a);
              a += 20;
              c > 0 && (a += 4 + 16 * b.getUint32(a));
              a = Vb(b, a + 4);
              a = mc(a);
              a = pd("<pro>" + a + "</pro>");
              return uv(a);
            }
          }
          return "";
        }
        function zv(a, b, c, d, e) {
          var f = [];
          c = t(c);
          for (var g = c.next(); !g.done; g = c.next()) {
            g = g.value;
            var h = d[g.Gd];
            if (h) {
              var k2;
              if ((k2 = Bd(g.node, "urn:microsoft:playready", "pro")) && xd(k2)) {
                k2 = xd(k2);
                k2 = oc(k2);
                var l = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                k2 = [{ initData: xh(k2, l, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: g.keyId }];
              } else k2 = null;
              l = null;
              if (g.Gd === "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e") {
                l = g;
                var m = e;
                if (m.size == 0) l = null;
                else {
                  var n = new Uint8Array([
                    16,
                    119,
                    239,
                    236,
                    192,
                    178,
                    77,
                    2,
                    172,
                    227,
                    60,
                    30,
                    82,
                    226,
                    251,
                    75
                  ]), q = new Uint8Array([]);
                  l = [{ initData: xh(q, n, m, 1), initDataType: "cenc", keyId: l.keyId }];
                }
              }
              k2 = vc(h, b, g.init || a || k2 || l);
              if (h = Cv.get(h)) k2.licenseServerUri = h(g);
              a: {
                if (g = Bd(g.node, "https://dashif.org/CPS", "Certurl")) {
                  if (g = xd(g)) break a;
                }
                g = "";
              }
              k2.serverCertificateUri = g;
              f.push(k2);
            }
          }
          return f;
        }
        function xv(a, b) {
          var c = [];
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) (d = Dv(a, d.value)) && c.push(d);
          return c;
        }
        function Dv(a, b) {
          var c = b.attributes.schemeIdUri, d = Ed(b, "urn:mpeg:cenc:2013", "default_KID"), e = Cd(b, "urn:mpeg:cenc:2013", "pssh").map(yd), f = b.attributes.value;
          if (!c) return null;
          c = c.toLowerCase();
          if (d && (d = d.replace(/-/g, "").toLowerCase(), d.includes(" "))) throw new U(2, 4, 4009);
          var g = [];
          try {
            g = e.map(function(h) {
              if (!a.g.has(h)) {
                var k2 = oc(h);
                a.g.set(h, k2);
              }
              return { initDataType: "cenc", initData: a.g.get(h), keyId: null };
            });
          } catch (h) {
            throw new U(2, 4, 4007);
          }
          return { node: b, Gd: c, keyId: d, init: g.length > 0 ? g : null, encryptionScheme: f };
        }
        function yv(a) {
          if (!window2.crypto || !window2.crypto.subtle) throw $a("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var b = Bd(a.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
          if (!b) throw new U(2, 4, 4051);
          if (b.attributes.schemeIdUri != "urn:mpeg:dash:sea:aes128-cbc:2013") throw new U(2, 4, 4051);
          b = Bd(a.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod");
          if (!b) throw new U(2, 4, 4051);
          a = b.attributes.IV;
          b = kc(b.attributes.keyUriTemplate);
          if (!a || !b) throw new U(2, 4, 4051);
          a = rc(a.substr(2));
          if (a.byteLength != 16) throw new U(2, 4, 4048);
          return { qk: b, iv: a };
        }
        var Cv = (/* @__PURE__ */ new Map()).set("com.apple.fps", function(a) {
          if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4054);
          if (a = Bd(a.node, "https://dashif.org/CPS", "Laurl")) {
            if (a = xd(a)) return a;
          }
          return "";
        }).set("com.widevine.alpha", function(a) {
          var b = Bd(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = xd(b)) ? b : (a = Bd(a.node, "urn:microsoft", "laurl")) ? kc(a.attributes.licenseUrl) || "" : "";
        }).set("com.microsoft.playready", Bv).set("com.microsoft.playready.recommendation", Bv).set(
          "com.microsoft.playready.software",
          Bv
        ).set("com.microsoft.playready.hardware", Bv).set("org.w3.clearkey", function(a) {
          var b = Bd(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = xd(b)) ? b : (a = Bd(a.node, "http://dashif.org/guidelines/clearKey", "Laurl")) && a.attributes.Lic_type === "EME-1.0" && a && (a = xd(a)) ? a : "";
        });
        function Ev(a, b, c, d, e, f) {
          var g = (/* @__PURE__ */ new Map()).set("RepresentationID", b).set("Number", c).set("SubNumber", d).set("Bandwidth", e).set("Time", f);
          return a.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g, function(h, k2, l, m) {
            if (h == "$$") return "$";
            var n = g.get(k2);
            if (n == null) return h;
            k2 == "RepresentationID" && l && (l = void 0);
            k2 == "Time" && typeof n != "bigint" && (Math.abs(n - Math.round(n)) >= 0.2 && $a("Calculated $Time$ values must be close to integers"), n = Math.round(n));
            switch (m) {
              case void 0:
              case "d":
              case "i":
              case "u":
                h = n.toString();
                break;
              case "o":
                h = n.toString(8);
                break;
              case "x":
                h = n.toString(16);
                break;
              case "X":
                h = n.toString(16).toUpperCase();
                break;
              default:
                h = n.toString();
            }
            l = window2.parseInt(l, 10) || 1;
            return Array(Math.max(0, l - h.length) + 1).join("0") + h;
          });
        }
        function Fv(a, b) {
          var c = Gv(a, b, "timescale"), d = 1;
          c && (d = Kd(c) || 1);
          c = Gv(a, b, "duration");
          var e = (c = Kd(c || "")) ? c / d : null, f = Gv(a, b, "startNumber"), g = Number(Gv(a, b, "presentationTimeOffset")) || 0, h = Ld(f || "");
          if (f == null || h == null) h = 1;
          f = null;
          if (b = Hv(a, b, "SegmentTimeline")) {
            b = wd(b, "S");
            f = d;
            a = a.na.duration || Infinity;
            for (var k2 = h, l = [], m = -g, n = 0; n < b.length; ++n) {
              var q = b[n], r = b[n + 1], u = Dd(q, "t", Ld), v = Dd(q, "d", Ld), w = Dd(q, "r", Jd);
              q = Dd(q, "k", Jd) || 0;
              u != null && (u -= g);
              if (v) {
                u = u != null ? u : m;
                w = w || 0;
                if (w < 0) if (r) {
                  r = Dd(r, "t", Ld);
                  if (r == null) break;
                  else if (u >= r) break;
                  w = Math.ceil((r - u) / v) - 1;
                } else {
                  if (a == Infinity) break;
                  else if (u / f >= a) break;
                  w = Math.ceil((a * f - u) / v) - 1;
                }
                l.length > 0 && u != m && (l[l.length - 1].end = u / f);
                for (r = 0; r <= w; ++r) m = u + v, l.push({ start: u / f, end: m / f, Fh: u, wc: q, Rk: l.length + k2 }), u = m;
              }
            }
            f = l;
          }
          return { timescale: d, Mf: c, gb: e, qe: h, Jb: g / d || 0, gd: g, timeline: f };
        }
        function Iv(a, b) {
          return [b(a.L), b(a.qa), b(a.sa)].filter(kf);
        }
        function Gv(a, b, c) {
          b = Iv(a, b);
          a = null;
          b = t(b);
          for (var d = b.next(); !d.done && !(a = d.value.attributes[c]); d = b.next()) ;
          return a;
        }
        function Hv(a, b, c) {
          b = Iv(a, b);
          a = null;
          b = t(b);
          for (var d = b.next(); !d.done && !(a = Ad(d.value, c)); d = b.next()) ;
          return a;
        }
        function Jv(a, b, c, d, e, f) {
          for (var g = Ed(a, "http://www.w3.org/1999/xlink", "href"), h = Ed(a, "http://www.w3.org/1999/xlink", "actuate") || "onRequest", k2 = t(Object.keys(a.attributes)), l = k2.next(); !l.done; l = k2.next()) {
            l = l.value;
            var m = l.split(":"), n = rd("http://www.w3.org/1999/xlink");
            m[0] == n && delete a.attributes[l];
          }
          if (f >= 5) return Eg(new U(2, 4, 4028));
          if (h != "onLoad") return Eg(new U(2, 4, 4027));
          var q = uc([d], [g]);
          return e.request(0, Ug(q, b)).Xa(function(r) {
            r = nd(r.data, a.tagName);
            if (!r) return Eg(new U(2, 4, 4001, g));
            for (a.children = []; r.children.length; ) {
              var u = r.children.shift();
              a.children.push(u);
            }
            u = t(Object.keys(r.attributes));
            for (var v = u.next(); !v.done; v = u.next()) v = v.value, a.attributes[v] = r.attributes[v];
            return Kv(a, b, c, q[0], e, f + 1);
          });
        }
        function Kv(a, b, c, d, e, f) {
          f = f === void 0 ? 0 : f;
          if (Ed(a, "http://www.w3.org/1999/xlink", "href")) {
            var g = Jv(a, b, c, d, e, f);
            c && (g = g.Xa(void 0, function() {
              return Kv(a, b, c, d, e, f);
            }));
            return g;
          }
          g = [];
          for (var h = t(vd(a)), k2 = h.next(), l = {}; !k2.done; l = { Qd: void 0 }, k2 = h.next()) l.Qd = k2.value, Ed(l.Qd, "http://www.w3.org/1999/xlink", "href") == "urn:mpeg:dash:resolve-to-zero:2013" ? a.children = a.children.filter(/* @__PURE__ */ (function(m) {
            return function(n) {
              return n !== m.Qd;
            };
          })(l)) : l.Qd.tagName != "SegmentTimeline" && g.push(Kv(l.Qd, b, c, d, e, f));
          return Ig(g).Xa(function() {
            return a;
          });
        }
        ;
        function Lv(a, b, c, d, e, f, g) {
          var h, k2 = new kh().S("sidx", function(l) {
            h = Mv(b, d, e, f, g, c, l);
          });
          a && k2.parse(a);
          if (h) return h;
          throw new U(2, 3, 3004);
        }
        function Mv(a, b, c, d, e, f, g) {
          var h = [];
          g.reader.skip(4);
          var k2 = g.reader.U();
          if (k2 == 0) throw new U(2, 3, 3005);
          if (g.version == 0) {
            var l = g.reader.U();
            var m = g.reader.U();
          } else l = g.reader.Dd(), m = g.reader.Dd();
          g.reader.skip(2);
          var n = g.reader.Ca();
          a = a + g.size + m;
          for (m = 0; m < n; m++) {
            var q = g.reader.U(), r = (q & 2147483648) >>> 31;
            q &= 2147483647;
            var u = g.reader.U();
            g.reader.skip(4);
            if (r == 1) throw new U(2, 3, 3006);
            h.push(new qj(l / k2 + c, (l + u) / k2 + c, function() {
              return f;
            }, a, a + q - 1, b, c, d, e));
            l += u;
            a += q;
          }
          g.parser.stop();
          return h;
        }
        ;
        function Nv(a) {
          this.h = $b(a);
          this.g = new hh(this.h, 0);
        }
        Nv.prototype.Ia = function() {
          return this.g.Ia();
        };
        function Ov(a) {
          var b = Pv(a);
          if (b.length > 7) throw new U(2, 3, 3002);
          var c = 0;
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) c = 256 * c + d.value;
          b = Pv(a);
          a: {
            d = t(Qv);
            for (var e = d.next(); !e.done; e = d.next()) if (Tb(b, new Uint8Array(e.value))) {
              d = true;
              break a;
            }
            d = false;
          }
          if (d) b = a.h.byteLength - a.g.Pa();
          else {
            if (b.length == 8 && b[1] & 224) throw new U(2, 3, 3001);
            for (e = d = 0; e < b.length; e++) {
              var f = b[e];
              d = e == 0 ? f & (1 << 8 - b.length) - 1 : 256 * d + f;
            }
            b = d;
          }
          b = a.g.Pa() + b <= a.h.byteLength ? b : a.h.byteLength - a.g.Pa();
          d = $b(a.h, a.g.Pa(), b);
          a.g.skip(b);
          return new Rv(
            c,
            d
          );
        }
        function Pv(a) {
          var b = a.g.Pa(), c = a.g.Y();
          if (c == 0) throw new U(2, 3, 3002);
          c = 8 - Math.floor(Math.log2(c));
          a.g.skip(c - 1);
          return Vb(a.h, b, c);
        }
        var Qv = [[255], [127, 255], [63, 255, 255], [31, 255, 255, 255], [15, 255, 255, 255, 255], [7, 255, 255, 255, 255, 255], [3, 255, 255, 255, 255, 255, 255], [1, 255, 255, 255, 255, 255, 255, 255]];
        function Rv(a, b) {
          this.id = a;
          this.g = b;
        }
        function Sv(a) {
          if (a.g.byteLength > 8) throw new U(2, 3, 3002);
          if (a.g.byteLength == 8 && a.g.getUint8(0) & 224) throw new U(2, 3, 3001);
          for (var b = 0, c = 0; c < a.g.byteLength; c++) {
            var d = a.g.getUint8(c);
            b = 256 * b + d;
          }
          return b;
        }
        ;
        function Tv(a, b, c, d, e, f, g, h, k2) {
          function l() {
            return e;
          }
          var m = [];
          a = new Nv(a.g);
          for (var n = null, q = null; a.Ia(); ) {
            var r = Ov(a);
            if (r.id == 187) {
              var u = Uv(r);
              u && (r = c * u.il, u = b + u.Jk, n != null && m.push(new qj(n + g, r + g, l, q, u - 1, f, g, h, k2)), n = r, q = u);
            }
          }
          n != null && m.push(new qj(n + g, d + g, l, q, null, f, g, h, k2));
          return m;
        }
        function Uv(a) {
          var b = new Nv(a.g);
          a = Ov(b);
          if (a.id != 179) throw new U(2, 3, 3013);
          a = Sv(a);
          b = Ov(b);
          if (b.id != 183) throw new U(2, 3, 3012);
          b = new Nv(b.g);
          for (var c = 0; b.Ia(); ) {
            var d = Ov(b);
            if (d.id == 241) {
              c = Sv(d);
              break;
            }
          }
          return { il: a, Jk: c };
        }
        ;
        function Vv(a, b, c) {
          b = Hv(a, b, "Initialization");
          if (!b) return null;
          var d = a.L.cb(), e = b.attributes.sourceURL;
          e && (d = uc(d, [kc(e)], a.Mb()));
          e = 0;
          var f = null;
          if (b = Dd(b, "range", Id)) e = b.start, f = b.end;
          c = new oj(function() {
            return d;
          }, e, f, Wv(a), null, null, c, a.qa.encrypted);
          c.codecs = a.L.codecs;
          c.mimeType = a.L.mimeType;
          a.na && !a.na.ef && (c.g = a.na.start + a.na.duration);
          return c;
        }
        function Xv(a, b, c) {
          var d = Number(Gv(a, Yv, "presentationTimeOffset")) || 0, e = Gv(a, Yv, "timescale"), f = 1;
          e && (f = Kd(e) || 1);
          var g = d / f || 0, h = Vv(a, Yv, c);
          Zv(a, h);
          var k2 = kd(a);
          return { endTime: -1, timeline: -1, Sc: function() {
            var l = Hv(k2, Yv, "RepresentationIndex");
            var m = k2.L.cb();
            l && (l = kc(l.attributes.sourceURL)) && (m = uc(m, [l], k2.Mb()));
            l = $v(k2);
            return aw(k2, b, h, m, l.start, l.end, g);
          }, timescale: f };
        }
        function aw(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E;
          return Q(function(J) {
            if (J.g == 1) return h = a.presentationTimeline, k2 = !a.Fb || !a.na.ef, l = a.na.start, m = a.na.duration, n = a.L.mimeType.split("/")[1], q = b, r = null, u = [q(d, e, f, false), n == "webm" ? q(c.P(), c.startByte, c.endByte, true) : null], q = null, F(J, Promise.all(u), 2);
            v = J.h;
            w = v[0];
            z = v[1] || null;
            y = null;
            B = l - g;
            C = l;
            H = m ? l + m : Infinity;
            if (n == "mp4") var I = Lv(w, e, d, c, B, C, H);
            else {
              I = w;
              var K = new Nv(z);
              if (Ov(K).id != 440786851) throw new U(2, 3, 3008);
              var L = Ov(K);
              if (L.id != 408125543) throw new U(
                2,
                3,
                3009
              );
              K = L.g.byteOffset;
              L = new Nv(L.g);
              for (var O = null; L.Ia(); ) {
                var P = Ov(L);
                if (P.id == 357149030) {
                  O = P;
                  break;
                }
              }
              if (!O) throw new U(2, 3, 3010);
              O = new Nv(O.g);
              P = 1e6;
              for (L = null; O.Ia(); ) {
                var N = Ov(O);
                if (N.id == 2807729) P = Sv(N);
                else if (N.id == 17545) if (N.g.byteLength == 4) L = N.g.getFloat32(0);
                else if (N.g.byteLength == 8) L = N.g.getFloat64(0);
                else throw new U(2, 3, 3003);
              }
              if (L == null) throw new U(2, 3, 3011);
              O = P / 1e9;
              L *= O;
              I = Ov(new Nv(I));
              if (I.id != 475249515) throw new U(2, 3, 3007);
              I = Tv(I, K, O, L, d, c, B, C, H);
            }
            y = I;
            D = t(y);
            for (A = D.next(); !A.done; A = D.next()) E = A.value, E.codecs = a.L.codecs, E.mimeType = a.L.mimeType, E.bandwidth = a.bandwidth;
            h.ie(y);
            r = new Ml(y);
            k2 && r.pd(C, H, true);
            return J.return(r);
          });
        }
        function Yv(a) {
          return a.Hd;
        }
        function $v(a) {
          var b = Hv(a, Yv, "RepresentationIndex");
          a = Gv(a, Yv, "indexRange");
          a = Id(a || "");
          b && (a = Dd(b, "range", Id, a));
          return a;
        }
        function Zv(a, b) {
          bw(a, b);
          if (!$v(a)) throw new U(2, 4, 4002);
        }
        function bw(a, b) {
          var c = a.L.mimeType.split("/")[1];
          if (a.L.contentType != Ac && c != "mp4" && c != "webm") throw new U(2, 4, 4006);
          if (c == "webm" && !b) throw new U(2, 4, 4005);
        }
        function Wv(a) {
          var b = a.L;
          return { bandwidth: a.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate || null, height: b.height || null, mimeType: b.mimeType, channelsCount: b.uf, pixelAspectRatio: b.pixelAspectRatio || null, width: b.width || null, label: a.qa.label || null, roles: a.roles || null, language: a.qa.language || null };
        }
        ;
        function cw(a, b, c) {
          var d = Vv(a, dw, c), e = ew(a);
          if (!e.gb && !e.timeline && e.yd.length > 1) throw new U(2, 4, 4002);
          if (!e.gb && !a.na.duration && !e.timeline && e.yd.length == 1) throw new U(2, 4, 4002);
          if (e.timeline && e.timeline.length == 0) throw new U(2, 4, 4002);
          var f = null, g = null;
          a.sa.id && a.L.id && (g = b.get(a.sa.id + "," + a.L.id)) && (f = g.segmentIndex);
          var h = fw(a.na.start, a.na.duration, a.L.cb, e, d, c, a.L.mimeType, a.L.codecs, a.bandwidth, a.Mb);
          b = !f;
          f ? f.fe(h, a.presentationTimeline.Ib()) : f = new Ml(h);
          a.presentationTimeline.ie(h);
          a.Fb && a.na.ef || f.pd(a.na.start, a.na.duration ? a.na.start + a.na.duration : Infinity, b);
          g && (g.segmentIndex = f);
          return { endTime: -1, timeline: -1, Sc: function() {
            f && f.getNumReferences() != 0 || f.nf(h);
            return Promise.resolve(f);
          }, timescale: e.timescale };
        }
        function dw(a) {
          return a.Ac;
        }
        function ew(a) {
          var b = gw(a);
          a = Fv(a, dw);
          var c = a.qe;
          c == 0 && (c = 1);
          var d = 0;
          a.gb ? d = a.gb * (c - 1) : a.timeline && a.timeline.length > 0 && (d = a.timeline[0].start);
          return { gb: a.gb, startTime: d, qe: c, Jb: a.Jb, timescale: a.timescale, timeline: a.timeline, yd: b };
        }
        function fw(a, b, c, d, e, f, g, h, k2, l) {
          var m = d.yd.length;
          d.timeline && d.timeline.length != d.yd.length && (m = Math.min(d.timeline.length, d.yd.length));
          for (var n = a - d.Jb, q = b ? a + b : Infinity, r = [], u = d.startTime, v = {}, w = 0; w < m; v = { Of: void 0, Df: void 0 }, w++) {
            v.Df = d.yd[w];
            var z = u;
            u = void 0;
            u = d.gb != null ? z + d.gb : d.timeline ? d.timeline[w].end : z + b;
            v.Of = null;
            v = new qj(a + z, a + u, /* @__PURE__ */ (function(y) {
              return function() {
                y.Of == null && (y.Of = uc(c(), [y.Df.yk], l()));
                return y.Of;
              };
            })(v), v.Df.start, v.Df.end, e, n, a, q, [], "", null, null, rj, f);
            v.codecs = h;
            v.mimeType = g;
            v.bandwidth = k2;
            r.push(v);
          }
          return r;
        }
        function gw(a) {
          return [a.L.Ac, a.qa.Ac, a.sa.Ac].filter(kf).map(function(b) {
            return wd(b, "SegmentURL");
          }).reduce(function(b, c) {
            return b.length > 0 ? b : c;
          }).map(function(b) {
            b.attributes.indexRange && !a.Kg && (a.Kg = true);
            var c = kc(b.attributes.media);
            b = Dd(b, "mediaRange", Id, { start: 0, end: null });
            return { yk: c, start: b.start, end: b.end };
          });
        }
        ;
        function hw(a, b, c, d, e, f, g, h, k2, l) {
          k2 || a.L.cf || (a.L.cf = Gv(a, iw, "initialization"));
          var m = a.L.cf ? jw(a, g) : null, n = kw(a);
          lw(n);
          var q = kd(a);
          if (n.ae) return bw(a, m), { endTime: -1, timeline: -1, Sc: function() {
            var z = Ev(n.ae, q.L.originalId, null, null, q.bandwidth || null, null);
            z = uc(q.L.cb(), [z]);
            return aw(q, b, m, z, 0, null, n.Jb);
          }, timescale: n.timescale };
          if (n.gb) return d || a.qa.contentType === "image" || a.qa.contentType === "text" || (d = a.na.start, l = a.sa.id, c = a.na.duration, l = (l = l != null && f.get(l) || c) ? d + l : Infinity, a.presentationTimeline.Sg(n.gb), a.presentationTimeline.Bi(d, l)), { endTime: -1, timeline: -1, Sc: function() {
            return mw(q, n, e, m, f, g, h, a.L.Ef);
          }, timescale: n.timescale };
          var r = null;
          d = d = null;
          a.sa.id && a.L.id && (d = a.sa.id + "," + a.L.id, d = c.get(d)) && (r = d.segmentIndex);
          var u = a.na.start, v = a.na.duration ? u + a.na.duration : Infinity;
          if (r) l = r, nw(l, n, u, v, m, a.Fb), l.Ya(a.presentationTimeline.Ib());
          else {
            c = 0;
            k2 = -1;
            if (a.sa.id != null && a.L.id != null) {
              var w = l.get(a.sa.id);
              if (w) k2 = w.timeline;
              else for (l = t(l.values()), w = l.next(); !w.done; w = l.next()) if (w = w.value, Math.abs(n.Jb - w.endTime) <= Dc && w.bh.includes(a.L.id)) {
                k2 = w.timeline;
                break;
              } else w.timeline >= c && (c = w.timeline + 1);
            }
            k2 == -1 && (k2 = c);
            r = new ow(a.Fb, n, a.L.originalId, a.bandwidth, a.L.cb, a.Mb, u, v, m, g, a.L.Ef, k2);
          }
          n.timeline && a.qa.contentType !== "image" && a.qa.contentType !== "text" && a.presentationTimeline.Ci(r.h ? r.h.timeline : [], u);
          d && a.Fb && (d.segmentIndex = r);
          d = (d = (d = n.timeline) && d[d.length - 1]) ? d.end + n.Jb : -1;
          l = -1;
          r instanceof ow && (l = r.Te());
          return { endTime: d, timeline: l, Sc: function() {
            r instanceof ow && r.getNumReferences() == 0 && nw(
              r,
              n,
              u,
              v,
              m,
              a.Fb
            );
            return Promise.resolve(r);
          }, timescale: n.timescale };
        }
        function iw(a) {
          return a.Oc;
        }
        function kw(a) {
          var b = Fv(a, iw), c = Gv(a, iw, "media"), d = Gv(a, iw, "index"), e = Gv(a, iw, "k"), f = 0;
          e && (f = parseInt(e, 10));
          return { Mf: b.Mf, gb: b.gb, timescale: b.timescale, qe: b.qe, Jb: b.Jb, gd: b.gd, timeline: b.timeline, bc: c && kc(c), ae: d, mimeType: a.L.mimeType, codecs: a.L.codecs, bandwidth: a.bandwidth, zk: f };
        }
        function lw(a) {
          var b = a.ae ? 1 : 0;
          b += a.timeline ? 1 : 0;
          b += a.gb ? 1 : 0;
          if (b == 0) throw new U(2, 4, 4002);
          b != 1 && (a.ae && (a.timeline = null), a.Mf = null, a.gb = null);
          if (!a.ae && !a.bc) throw new U(2, 4, 4002);
        }
        function mw(a, b, c, d, e, f, g, h) {
          function k2(L) {
            var O = L - w, P = O * v, N = b.Mf, M = O * N;
            "BigInt" in window2 && M > Number.MAX_SAFE_INTEGER && (M = BigInt(O) * BigInt(N));
            P += q;
            O = P + v;
            N = Math.min(O, m());
            var R = [], T = b.zk;
            if (T) for (var ma = (N - P) / T, W = {}, Ia = 0; Ia < T; W = { Xi: void 0 }, Ia++) {
              var ua = P + ma * Ia, Ea = ua + ma;
              W.Xi = Ia;
              W = new qj(ua, Ea, /* @__PURE__ */ (function(ya) {
                return function() {
                  var va = Ev(z, B, L, ya.Xi, y, M);
                  return uc(C(), [va], H());
                };
              })(W), 0, null, d, D, q, m(), [], "", null, null, rj, f);
              W.codecs = a.L.codecs;
              W.mimeType = a.L.mimeType;
              h == 0 ? Ia > 0 && W.wd() : Ia % h != 0 && W.wd();
              R.push(W);
            }
            P = new qj(P, N, function() {
              if (T) return [];
              var ya = Ev(z, B, L, null, y, M);
              return uc(C(), [ya], H());
            }, 0, null, d, D, q, m(), R, "", null, null, rj, f, R.length > 0);
            P.codecs = a.L.codecs;
            P.mimeType = a.L.mimeType;
            P.bandwidth = a.bandwidth;
            P.j = O;
            return P;
          }
          function l() {
            var L = [Math.max(n.Ib(), q), Math.min(n.Ic(), m())].map(function(O) {
              return O - q;
            });
            L = [Math.ceil(L[0] / v), Math.ceil(L[1] / v) - 1];
            a.L.rb && L[1]++;
            return L.map(function(O) {
              return O + w;
            });
          }
          function m() {
            var L = r != null && e.get(r) || u;
            return L ? q + L : Infinity;
          }
          var n = a.presentationTimeline, q = a.na.start, r = a.sa.id, u = a.na.duration, v = b.gb, w = b.qe, z = b.bc, y = a.bandwidth || null, B = a.L.originalId, C = a.L.cb, H = a.Mb, D = q - b.Jb, A = l();
          c = a.Fb ? Math.max(A[0], A[1] - c + 1) : A[0];
          g = g || A[1];
          A = [];
          for (var E = c; E <= g; ++E) {
            var J = k2(E);
            A.push(J);
          }
          var I = new Ml(A);
          A = n.Ic() < m();
          E = n.W();
          if (A || E) {
            var K = Math.max(c, g + 1);
            c = v;
            a.L.rb && (c = 0.1);
            I.Nf(c, function() {
              var L = n.Ib();
              I.Ya(L);
              var O = t(l());
              O.next();
              O = O.next().value;
              for (var P = []; K <= O; ) {
                var N = k2(K);
                P.push(N);
                K++;
              }
              return L > m() && !P.length ? null : P;
            });
          }
          return Promise.resolve(I);
        }
        function jw(a, b) {
          var c = a.L.cf;
          c || (c = Gv(a, iw, "initialization"));
          if (!c) return null;
          c = kc(c);
          var d = a.L.originalId, e = a.bandwidth || null, f = a.L.cb, g = a.Mb;
          b = new oj(function() {
            var h = Ev(c, d, null, null, e, null);
            return uc(f(), [h], g());
          }, 0, null, Wv(a), null, null, b, a.qa.encrypted);
          b.codecs = a.L.codecs;
          b.mimeType = a.L.mimeType;
          a.na && !a.na.ef && (b.g = a.na.start + a.na.duration);
          return b;
        }
        function ow(a, b, c, d, e, f, g, h, k2, l, m, n) {
          Ml.call(this, []);
          this.F = a;
          this.h = b;
          this.H = c;
          this.C = d;
          this.G = e;
          this.J = f;
          this.j = g;
          this.l = h;
          this.u = k2;
          this.B = l;
          this.I = m;
          this.K = n;
          pw(this);
        }
        la(ow, Ml);
        p = ow.prototype;
        p.getNumReferences = function() {
          return this.h ? this.h.timeline.length : 0;
        };
        p.release = function() {
          Ml.prototype.release.call(this);
          this.h = null;
        };
        p.Ya = function(a) {
          if (this.h) {
            for (var b = 0, c = this.h.timeline, d = 0; d < c.length; d += 1) if (c[d].end + this.j <= a) b += 1;
            else break;
            b > 0 && (this.h.timeline = c.slice(b), this.g.length >= b && (this.g = this.g.slice(b)), this.i += b, this.getNumReferences() === 0 && this.release());
          }
        };
        function nw(a, b, c, d, e, f) {
          qw(a, e);
          a.F = f;
          if (a.h) {
            a.h.gd !== b.gd && (a.h.timeline = b.timeline, a.h.gd = b.gd, a.h.Jb = b.Jb);
            a.h.bc !== b.bc && (a.h.bc = b.bc);
            c = a.h.timeline;
            if (c.length) {
              var g = c[c.length - 1];
              b = b.timeline.filter(function(h) {
                return h.end > g.end;
              });
            } else b = b.timeline.slice();
            b.length > 0 && a.h.timeline.push.apply(a.h.timeline, x(b));
            a.l !== d && (a.l = d);
          } else a.h = b, a.j = c, a.l = d;
          pw(a);
        }
        function qw(a, b) {
          if (a.u !== b) {
            a.u = b;
            a = t(a.g);
            for (var c = a.next(); !c.done; c = a.next()) (c = c.value) && uj(c, b);
          }
        }
        function pw(a) {
          if (a.h && !a.o) {
            for (var b = [], c = t(a.h.timeline), d = c.next(); !d.done; d = c.next()) d = d.value, d.start >= a.l || d.end <= 0 || b.push(d);
            a.h.timeline = b;
            a.Ya(a.j);
          }
        }
        p.find = function(a) {
          if (this.h && this.h.timeline && this.h.timeline.length && a < this.h.timeline[0].start + this.j) return this.i;
          if (!this.h) return null;
          var b = this.h.timeline;
          if (a < this.j || a >= this.l) return null;
          for (var c = b.length - 1, d = 0; d < b.length; d++) {
            var e = b[d], f = e.start + this.j;
            e = d < c ? b[d + 1].start + this.j : this.l === Infinity ? e.end + this.j : this.l;
            if (a >= f && a < e) return d + this.i;
          }
          return null;
        };
        p.get = function(a) {
          var b = this;
          a -= this.i;
          if (a < 0 || a >= this.getNumReferences() || !this.h) return null;
          var c = this.g[a];
          if (!c) {
            c = this.h.timeline[a];
            var d = c.Rk, e = c.Fh + this.h.gd, f = this.j - this.h.Jb, g = this.j + c.end, h = g;
            a === this.getNumReferences() - 1 && this.l !== Infinity && (h = this.F && Math.abs(h - this.l) > 0.1 ? Math.min(h, this.l) : this.l);
            var k2 = this.h.codecs, l = this.h.mimeType, m = this.h.bandwidth, n = [], q = false;
            c.wc && this.h && this.h.bc && (q = this.h.bc.includes("$SubNumber$"));
            if (q) {
              q = (c.end - c.start) / c.wc;
              for (var r = {}, u = 0; u < c.wc; r = {
                Pf: void 0,
                Yi: void 0
              }, u++) {
                var v = c.start + q * u, w = v + q;
                r.Yi = u;
                r.Pf = null;
                r = new qj(this.j + v, this.j + w, /* @__PURE__ */ (function(z) {
                  return function() {
                    if (!b.h) return [];
                    z.Pf == null && (z.Pf = rw(b.h.bc, b.H, d, b.C, e, z.Yi, b.G, b.J));
                    return z.Pf;
                  };
                })(r), 0, null, this.u, f, this.j, this.l, [], "", null, null, rj, this.B);
                r.codecs = k2;
                r.mimeType = l;
                r.bandwidth = m;
                this.I == 0 ? u > 0 && r.wd() : u % this.I != 0 && r.wd();
                n.push(r);
              }
            }
            c = new qj(
              this.j + c.start,
              h,
              function() {
                return n.length > 0 || !b.h ? [] : rw(b.h.bc, b.H, d, b.C, e, null, b.G, b.J);
              },
              0,
              null,
              this.u,
              f,
              this.j,
              this.l,
              n,
              "",
              null,
              null,
              rj,
              this.B,
              n.length > 0
            );
            c.codecs = k2;
            c.mimeType = l;
            c.j = g;
            c.bandwidth = m;
            this.g[a] = c;
          }
          return c;
        };
        p.Gb = function(a) {
          pw(this);
          for (var b = 0; b < this.getNumReferences(); b++) {
            var c = this.get(b + this.i);
            c && a(c);
          }
        };
        function rw(a, b, c, d, e, f, g, h) {
          a = Ev(a, b, c, f, d || null, e);
          return uc(g(), [a], h()).map(function(k2) {
            return k2.toString();
          });
        }
        p.Te = function() {
          return this.K;
        };
        function sw(a) {
          this.o = null;
          this.B = a;
          this.H = new Ng();
          this.i = [];
          this.h = null;
          this.m = [];
          this.C = null;
          this.G = [];
          this.F = 300;
          this.l = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.g = null;
          this.u = "UNKNOWN";
        }
        sw.prototype.configure = function(a) {
          this.o = a;
        };
        sw.prototype.destroy = function() {
          this.B = this.o = null;
          this.i = [];
          this.h = null;
          this.m = [];
          this.G = [];
          this.l.clear();
          this.g != null && (this.g.stop(), this.g = null);
          return this.H.destroy();
        };
        sw.prototype.setManifestType = function(a) {
          this.u = a;
        };
        function tw(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return c = uc(a.i, [uw(a, b)]), d = Ug(c, a.o.retryParameters), e = a.B.networkingEngine.request(8, d), Og(a.H, e), ra(l, 2), F(l, e.promise, 4);
            if (l.g != 2) return f = l.h, g = cc(f.data), h = JSON.parse(g), h.VERSION == 1 && vw(a, h, f.uri), ta(l, 0);
            if ((k2 = Aa(l)) && k2.code == 7001) return l.return();
            a.g != null && (a.g.stop(), a.g = null);
            a.g = new gf(function() {
              tw(a, b);
            });
            a.g.ia(a.F);
            G(l);
          });
        }
        function uw(a, b) {
          if (!a.m.length) return b;
          b = new Cb(b);
          var c = a.C || a.m[0], d = Math.round(a.B.getBandwidthEstimate()), e = b.g;
          a.u == "DASH" ? (e.add("_DASH_pathway", c), e.add("_DASH_throughput", String(d))) : a.u == "HLS" && (e.add("_HLS_pathway", c), e.add("_HLS_throughput", String(d)));
          Rb(e) && Gb(b, e);
          return b.toString();
        }
        function vw(a, b, c) {
          a.g != null && (a.g.stop(), a.g = null);
          var d = b["RELOAD-URI"] || c;
          a.g = new gf(function() {
            tw(a, d);
          });
          if (c = b.TTL) a.F = c;
          a.g.ia(a.F);
          a.m = b["PATHWAY-PRIORITY"] || [];
          a.G = b["PATHWAY-CLONES"] || [];
        }
        function ww(a, b, c, d) {
          var e = a.l.get(b);
          e || (e = /* @__PURE__ */ new Map());
          e.set(c, d);
          a.l.set(b, e);
        }
        sw.prototype.banLocation = function(a) {
          this.j.set(a, Date.now() + 6e4);
        };
        function xw(a, b, c) {
          c = c === void 0 ? false : c;
          b = a.l.get(b) || /* @__PURE__ */ new Map();
          for (var d = [], e = t(a.m), f = e.next(), g = {}; !f.done; g = { Bd: void 0 }, f = e.next()) if (g.Bd = f.value, f = b.get(g.Bd)) d.push({ Xg: g.Bd, location: f });
          else if (f = a.G.find(/* @__PURE__ */ (function(k2) {
            return function(l) {
              return l.Kl == k2.Bd;
            };
          })(g))) {
            var h = b.get(f["BASE-ID"]);
            h && (f["URI-REPLACEMENT"].ij ? (h = new Cb(h), Eb(h, f["URI-REPLACEMENT"].ij), d.push({ Xg: g.Bd, location: h.toString() })) : d.push({ Xg: g.Bd, location: h }));
          }
          e = Date.now();
          g = t(a.j.keys());
          for (f = g.next(); !f.done; f = g.next()) f = f.value, h = a.j.get(f), e > h && a.j.delete(f);
          d = d.filter(function(k2) {
            for (var l = t(a.j.keys()), m = l.next(); !m.done; m = l.next()) if (m.value.includes(new Cb(k2.location).Eb)) return false;
            return true;
          });
          d.length && (a.C = d[0].Xg);
          d = d.map(function(k2) {
            return k2.location;
          });
          if (!d.length && a.h) {
            for (e = t(a.h.split(",")), g = e.next(); !g.done; g = e.next()) if (g = b.get(g.value)) a.C = a.h, d.push(g);
          }
          if (!d.length) for (b = t(b.values()), e = b.next(); !e.done; e = b.next()) d.push(e.value);
          return c ? d : uc(a.i, d);
        }
        ;
        function yw() {
          this.l = [];
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.o = false;
          this.m = /* @__PURE__ */ new Set();
        }
        p = yw.prototype;
        p.release = function() {
          for (var a = t(this.h.concat(this.g, this.j, this.i)), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.l = [];
          this.o = false;
          this.m.clear();
        };
        p.bk = function() {
          return this.l;
        };
        p.Ig = function() {
          return this.j.slice();
        };
        p.Gj = function() {
          return this.i;
        };
        p.Uh = function(a, b) {
          if (a) {
            if (a.type == "audio") for (var c = t(this.h), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if (a.type == "video") for (c = t(this.g), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            }), d.trickModeVideo && (d.trickModeVideo.matchedStreams = d.trickModeVideo.matchedStreams.filter(function(e) {
              return e !== a;
            })), d.dependencyStream && (d.dependencyStream.matchedStreams = d.dependencyStream.matchedStreams.filter(function(e) {
              return e !== a;
            }));
            else if (a.type == Ac) for (c = t(this.j), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if (a.type == "image") for (c = t(this.i), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            a.segmentIndex && a.closeSegmentIndex();
            this.m.delete(b);
          }
        };
        function zw(a, b) {
          var c = [], d = [], e = [], f = [];
          a = t(a);
          for (var g = a.next(); !g.done; g = a.next()) {
            var h = g.value;
            g = new Map(h.audioStreams.map(function(n) {
              return [Aw(n), n];
            }));
            var k2 = new Map(h.videoStreams.map(function(n) {
              return [Bw(n), n];
            })), l = new Map(h.textStreams.map(function(n) {
              return [Cw(n), n];
            }));
            h = new Map(h.imageStreams.map(function(n) {
              return [Dw(n), n];
            }));
            if (b) {
              var m = Ew(Ac);
              l.set(Cw(m), m);
              m = Ew("image");
              h.set(Dw(m), m);
            }
            c.push(g);
            d.push(k2);
            e.push(l);
            f.push(h);
          }
          return { Nh: c, gj: d, cj: e, ki: f };
        }
        p.hg = function(a, b, c) {
          c = c === void 0 ? false : c;
          var d = this, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma;
          return Q(function(W) {
            if (W.g == 1) {
              e = Cc;
              if (!b && a.length == 1) return f = zw(a, false), g = f.Nh, h = f.gj, k2 = f.cj, l = f.ki, d.h = Array.from(g[0].values()), d.g = Array.from(h[0].values()), d.j = Array.from(k2[0].values()), d.i = Array.from(l[0].values()), W.A(2);
              m = c ? d.m.size : 0;
              n = -1;
              for (q = 0; q < a.length; q++) r = a[q], d.m.has(r.id) || (d.m.add(r.id), n == -1 && (n = q));
              if (n == -1) return W.return();
              u = zw(a, true);
              v = u.Nh;
              w = u.gj;
              z = u.cj;
              y = u.ki;
              return F(W, Promise.all([Fw(d, d.h, v, n, Gw, Hw, m), Fw(d, d.g, w, n, Gw, Hw, m), Fw(d, d.j, z, n, Gw, Hw, m), Fw(d, d.i, y, n, Gw, Hw, m)]), 2);
            }
            B = 0;
            C = [];
            if (d.g.length && d.h.length) for (K = t(d.h), L = K.next(); !L.done; L = K.next()) for (O = L.value, P = t(d.g), N = P.next(); !N.done; N = P.next()) M = N.value, R = ug(O.drmInfos, M.drmInfos), O.drmInfos.length && M.drmInfos.length && !R.length || (T = (O.bandwidth || 0) + (M.bandwidth || 0), O.dependencyStream && (T += O.dependencyStream.bandwidth || 0), M.dependencyStream && (T += M.dependencyStream.bandwidth || 0), ma = B++, C.push({
              id: ma,
              language: O.language,
              disabledUntilTime: 0,
              primary: O.primary,
              audio: O,
              video: M,
              bandwidth: T,
              drmInfos: R,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            }));
            else for (H = d.g.length ? d.g : d.h, D = t(H), A = D.next(); !A.done; A = D.next()) E = A.value, J = B++, I = E.bandwidth || 0, E.dependencyStream && (I += E.dependencyStream.bandwidth || 0), C.push({
              id: J,
              language: E.language,
              disabledUntilTime: 0,
              primary: E.primary,
              audio: E.type == e.ka ? E : null,
              video: E.type == e.Aa ? E : null,
              bandwidth: I,
              drmInfos: E.drmInfos,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            });
            d.l = C;
            G(W);
          });
        };
        function Iw(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P;
          return Q(function(N) {
            switch (N.g) {
              case 1:
                b = Cc;
                if (a.length == 1) return N.return(a[0]);
                c = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.ka;
                  }).map(function(R) {
                    return [Aw(R), R];
                  }));
                });
                d = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.Aa;
                  }).map(function(R) {
                    return [Bw(R), R];
                  }));
                });
                e = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.Na;
                  }).map(function(R) {
                    return [Cw(R), R];
                  }));
                });
                f = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.Uf;
                  }).map(function(R) {
                    return [Dw(R), R];
                  }));
                });
                g = t(e);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = Jw(b.Na), k2.set(Cw(l), l);
                m = t(f);
                for (n = m.next(); !n.done; n = m.next()) q = n.value, r = Jw(b.Uf), q.set(Dw(r), r);
                u = new yw();
                return F(N, Fw(u, [], c, 0, Kw, Lw, 0), 2);
              case 2:
                return v = N.h, F(N, Fw(u, [], d, 0, Kw, Lw, 0), 3);
              case 3:
                return w = N.h, F(N, Fw(u, [], e, 0, Kw, Lw, 0), 4);
              case 4:
                return z = N.h, F(N, Fw(u, [], f, 0, Kw, Lw, 0), 5);
              case 5:
                y = N.h;
                B = 0;
                if (w.length && v.length) for (E = t(v), J = E.next(); !J.done; J = E.next()) for (I = J.value, K = t(w), L = K.next(); !L.done; L = K.next()) O = L.value, P = B++, O.variantIds.push(P), I.variantIds.push(P);
                else for (C = w.concat(v), H = t(C), D = H.next(); !D.done; D = H.next()) A = D.value, A.variantIds = [B++];
                return N.return(w.concat(v).concat(z).concat(y));
            }
          });
        }
        function Fw(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I;
          return Q(function(K) {
            switch (K.g) {
              case 1:
                h = [];
                for (k2 = 0; k2 < c.length; k2++) k2 >= d ? h.push(new Set(c[k2].values())) : h.push(/* @__PURE__ */ new Set());
                l = t(b);
                m = l.next();
              case 2:
                if (m.done) {
                  K.A(4);
                  break;
                }
                n = m.value;
                return F(K, Zw(a, n, c, d, f, h, g), 5);
              case 5:
                q = K.h;
                if (!q) throw new U(2, 4, 4037);
                m = l.next();
                K.A(2);
                break;
              case 4:
                r = t(h);
                for (u = r.next(); !u.done; u = r.next()) for (v = u.value, w = t(v), z = w.next(); !z.done; z = w.next()) y = z.value, (B = $w(a, b, y, c, e, f, h)) && b.push(B);
                C = t(h);
                for (H = C.next(); !H.done; H = C.next()) for (D = H.value, A = t(D), E = A.next(), J = {}; !E.done; J = { uh: void 0 }, E = A.next()) if (J.uh = E.value, !ax(J.uh) && (I = b.some(/* @__PURE__ */ (function(L) {
                  return function(O) {
                    return bx(L.uh, O);
                  };
                })(J)))) throw new U(2, 4, 4037);
                return K.return(b);
            }
          });
        }
        function Zw(a, b, c, d, e, f, g) {
          return Q(function(h) {
            if (h.g == 1) return cx(a, c, b, g > 0), b.matchedStreams ? b.segmentIndex ? F(h, dx(b, d + g), 2) : h.A(2) : h.return(false);
            ex(b, d, e, f, g);
            return h.return(true);
          });
        }
        function dx(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              c = [];
              d = a.matchedStreams;
              for (e = b; e < d.length; e++) f = d[e], c.push(f.createSegmentIndex()), f.trickModeVideo && !f.trickModeVideo.segmentIndex && c.push(f.trickModeVideo.createSegmentIndex()), f.dependencyStream && !f.dependencyStream.segmentIndex && c.push(f.dependencyStream.createSegmentIndex());
              return F(k2, Promise.all(c), 2);
            }
            if (a.segmentIndex instanceof Pl) for (g = b; g < d.length; g++) h = d[g], h.segmentIndex && a.segmentIndex.h.push(h.segmentIndex);
            G(k2);
          });
        }
        function $w(a, b, c, d, e, f, g) {
          if (ax(c)) return null;
          var h = e(c);
          cx(a, d, h);
          h.createSegmentIndex && (h.createSegmentIndex = function() {
            return Q(function(k2) {
              if (h.segmentIndex) return k2.A(0);
              h.segmentIndex = new Pl();
              return F(k2, dx(h, 0), 0);
            });
          }, h.closeSegmentIndex = function() {
            h.segmentIndex && (h.segmentIndex.release(), h.segmentIndex = null);
            if (h.matchedStreams) for (var k2 = t(h.matchedStreams), l = k2.next(); !l.done; l = k2.next()) {
              l = l.value;
              var m;
              if (m = l.segmentIndex) {
                a: {
                  m = t(b);
                  for (var n = m.next(); !n.done; n = m.next()) if (n = n.value, n !== h && n.segmentIndex && n.matchedStreams && n.matchedStreams.includes(l)) {
                    m = true;
                    break a;
                  }
                  m = false;
                }
                m = !m;
              }
              m && (l.segmentIndex.release(), l.segmentIndex = null);
            }
          });
          if (!h.matchedStreams || !h.matchedStreams.length) return null;
          ex(h, 0, f, g, 0);
          return h;
        }
        function ex(a, b, c, d, e) {
          var f = a.matchedStreams;
          for (b += e; b < f.length; b++) {
            var g = f[b];
            c(a, g);
            var h = true;
            a.type == "audio" && sf(a.language, g.language) == 0 && (h = false);
            if (h && ((h = d[b - e]) && h.delete(g), g.fullMimeTypes)) for (g = t(g.fullMimeTypes.values()), h = g.next(); !h.done; h = g.next()) a.fullMimeTypes.add(h.value);
          }
        }
        function Gw(a) {
          var b = Object.assign({}, a);
          b.originalId = null;
          b.createSegmentIndex = function() {
            return Promise.resolve();
          };
          b.closeSegmentIndex = function() {
          };
          b.roles = b.roles.slice();
          b.segmentIndex = null;
          b.emsgSchemeIdUris = [];
          b.keyIds = new Set(a.keyIds);
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          b.trickModeVideo = null;
          b.dependencyStream = null;
          return b;
        }
        function Kw(a) {
          var b = Object.assign({}, a);
          b.roles = b.roles.slice();
          b.keyIds = new Set(a.keyIds);
          b.segments = [];
          b.variantIds = [];
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          return b;
        }
        function Hw(a, b) {
          function c(g, h) {
            g || (g = []);
            h = t(h);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, g.includes(k2) || g.push(k2);
            return g;
          }
          a.roles = c(a.roles, b.roles);
          b.emsgSchemeIdUris && (a.emsgSchemeIdUris = c(a.emsgSchemeIdUris, b.emsgSchemeIdUris));
          for (var d = t(b.keyIds), e = d.next(); !e.done; e = d.next()) a.keyIds.add(e.value);
          a.originalId == null ? a.originalId = b.originalId : (d = b.originalId || "") && !a.originalId.endsWith(d) && (a.originalId += "," + d);
          d = ug(a.drmInfos, b.drmInfos);
          if (b.drmInfos.length && a.drmInfos.length && !d.length) throw new U(
            2,
            4,
            4038
          );
          a.drmInfos = d;
          a.encrypted = a.encrypted || b.encrypted;
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), d = t(b.closedCaptions), e = d.next(); !e.done; e = d.next()) {
            var f = t(e.value);
            e = f.next().value;
            f = f.next().value;
            a.closedCaptions.set(e, f);
          }
          a.bandwidth && b.bandwidth && (a.bandwidth = Math.max(a.bandwidth, b.bandwidth));
          b.trickModeVideo ? (a.trickModeVideo || (a.trickModeVideo = Gw(b.trickModeVideo), a.trickModeVideo.matchedStreams = [], a.trickModeVideo.createSegmentIndex = function() {
            if (a.trickModeVideo.segmentIndex) return Promise.resolve();
            for (var g = new Pl(), h = t(a.trickModeVideo.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.trickModeVideo.segmentIndex = g;
            return Promise.resolve();
          }), a.trickModeVideo.matchedStreams.push(b.trickModeVideo), Hw(a.trickModeVideo, b.trickModeVideo)) : a.trickModeVideo && (a.trickModeVideo.matchedStreams.push(b), Hw(a.trickModeVideo, b));
          b.dependencyStream ? (a.dependencyStream || (a.dependencyStream = Gw(b.dependencyStream), a.dependencyStream.matchedStreams = [], a.dependencyStream.createSegmentIndex = function() {
            if (a.dependencyStream.segmentIndex) return Promise.resolve();
            for (var g = new Pl(), h = t(a.dependencyStream.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.dependencyStream.segmentIndex = g;
            return Promise.resolve();
          }), a.dependencyStream.matchedStreams.push(b.dependencyStream), Hw(a.dependencyStream, b.dependencyStream)) : a.dependencyStream && (a.dependencyStream.matchedStreams.push(b), Hw(a.dependencyStream, b));
        }
        function Lw(a, b) {
          var c = a.roles;
          c || (c = []);
          for (var d = t(b.roles), e = d.next(); !e.done; e = d.next()) e = e.value, c.includes(e) || c.push(e);
          a.roles = c;
          c = t(b.keyIds);
          for (d = c.next(); !d.done; d = c.next()) a.keyIds.add(d.value);
          a.encrypted = a.encrypted && b.encrypted;
          a.segments.push.apply(a.segments, x(b.segments));
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), b = t(b.closedCaptions), c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, a.closedCaptions.set(c, d);
        }
        function cx(a, b, c, d) {
          d = (d === void 0 ? 0 : d) ? c.matchedStreams : [];
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = fx(a, e.value, c);
            if (!e) return;
            d.push(e);
          }
          c.matchedStreams = d;
        }
        function fx(a, b, c) {
          var d = { audio: Aw, video: Bw, text: Cw, image: Dw }[c.type], e = null, f = d(c);
          if (b.has(f)) e = b.get(f);
          else {
            f = { audio: function(l, m) {
              return bx(l, m);
            }, video: function(l, m) {
              return bx(l, m);
            }, text: gx, image: hx }[c.type];
            for (var g = { audio: ix, video: jx, text: kx, image: lx }[c.type], h = t(b.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, !f(c, k2) || c.fastSwitching != k2.fastSwitching || e && !g(c, e, k2) || (e = k2);
          }
          a.o && !ax(e) && b.delete(d(e));
          return e;
        }
        function mx(a, b) {
          return a.mimeType != b.mimeType ? false : nx(a.codecs) === nx(b.codecs);
        }
        p.Si = function(a) {
          this.o = a;
        };
        function bx(a, b) {
          return a.drmInfos && !sg(a.drmInfos, b.drmInfos) ? false : true;
        }
        function gx(a, b) {
          return b.language ? a.forced !== b.forced || sf(a.language, b.language) == 0 || b.kind != a.kind ? false : true : true;
        }
        function hx() {
          return true;
        }
        function ix(a, b, c) {
          var d = ox(a, b, c);
          if (d === px) return true;
          if (d === qx) return false;
          d = sf(a.language, b.language);
          var e = sf(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
            if (c.roles.length !== b.roles.length) return c.roles.length < b.roles.length;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          d = rx(a.channelsCount, b.channelsCount, c.channelsCount);
          if (d == px) return true;
          if (d == qx) return false;
          d = rx(a.audioSamplingRate, b.audioSamplingRate, c.audioSamplingRate);
          return d == px ? true : d == qx ? false : a.bandwidth && sx(a.bandwidth, b.bandwidth, c.bandwidth) == px ? true : false;
        }
        function jx(a, b, c) {
          var d = ox(a, b, c);
          if (d === px) return true;
          if (d === qx) return false;
          d = rx(a.width * a.height, b.width * b.height, c.width * c.height);
          if (d == px) return true;
          if (d == qx) return false;
          if (a.frameRate) {
            d = rx(a.frameRate, b.frameRate, c.frameRate);
            if (d == px) return true;
            if (d == qx) return false;
          }
          return a.bandwidth && sx(a.bandwidth, b.bandwidth, c.bandwidth) == px ? true : false;
        }
        function kx(a, b, c) {
          var d = sf(a.language, b.language), e = sf(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          return c.mimeType != a.mimeType || c.codecs != a.codecs || b.mimeType == a.mimeType && b.codecs == a.codecs ? false : true;
        }
        function lx(a, b, c) {
          return rx(a.width * a.height, b.width * b.height, c.width * c.height) == px ? true : false;
        }
        function Jw(a) {
          return { id: 0, originalId: "", groupId: null, primary: false, type: a, mimeType: "", codecs: "", language: "", originalLanguage: null, label: null, width: null, height: null, encrypted: false, keyIds: /* @__PURE__ */ new Set(), segments: [], variantIds: [], roles: [], forced: false, channelsCount: null, audioSamplingRate: null, spatialAudio: false, closedCaptions: null, external: false, fastSwitching: false, isAudioMuxedInVideo: false, baseOriginalId: null };
        }
        function Ew(a) {
          return {
            id: 0,
            originalId: "",
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: new Ml([]),
            mimeType: "",
            codecs: "",
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: "",
            originalLanguage: null,
            label: null,
            type: a,
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            roles: [],
            forced: false,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            closedCaptions: null,
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
        }
        function rx(a, b, c) {
          if (b == a && a != c) return qx;
          if (c == a && a != b) return px;
          if (b > a) {
            if (c <= a || c - a < b - a) return px;
            if (c - a > b - a) return qx;
          } else {
            if (c > a) return qx;
            if (a - c < a - b) return px;
            if (a - c > a - b) return qx;
          }
          return tx;
        }
        function ox(a, b, c) {
          var d = a.mimeType === b.mimeType && a.codecs === b.codecs, e = a.mimeType === c.mimeType && a.codecs === c.codecs;
          if (d && !e) return qx;
          if (!d && e) return px;
          b = mx(a, b);
          a = mx(a, c);
          return b && !a ? qx : !b && a ? px : tx;
        }
        function sx(a, b, c) {
          b = Math.abs(a - b);
          a = Math.abs(a - c);
          return a < b ? px : b < a ? qx : tx;
        }
        function ax(a) {
          switch (a.type) {
            case Ac:
              return !a.language;
            case "image":
              return !a.tilesLayout;
            default:
              return false;
          }
        }
        function Bw(a) {
          return ux([a.fastSwitching, a.width, a.frameRate, a.codecs, a.mimeType, a.label, a.roles, a.closedCaptions ? Array.from(a.closedCaptions.entries()) : null, a.bandwidth, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function Aw(a) {
          return ux([a.fastSwitching, a.channelsCount, a.language, a.bandwidth, a.label, a.codecs, a.mimeType, a.roles, a.audioSamplingRate, a.primary, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function Cw(a) {
          return ux([a.language, a.label, a.codecs, a.mimeType, a.bandwidth, a.roles]);
        }
        function Dw(a) {
          return ux([a.width, a.codecs, a.mimeType]);
        }
        function ux(a) {
          return JSON.stringify(a);
        }
        function nx(a) {
          if (!vx.has(a)) {
            var b = Ne(a);
            vx.set(a, b);
          }
          return vx.get(a);
        }
        S("shaka.util.PeriodCombiner", yw);
        yw.prototype.setUseStreamOnce = yw.prototype.Si;
        yw.prototype.combinePeriods = yw.prototype.hg;
        yw.prototype.deleteStream = yw.prototype.Uh;
        yw.prototype.getImageStreams = yw.prototype.Gj;
        yw.prototype.getTextStreams = yw.prototype.Ig;
        yw.prototype.getVariants = yw.prototype.bk;
        var px = 1, tx = 0, qx = -1, vx = /* @__PURE__ */ new Map();
        function wx(a, b) {
          var c = new DOMParser(), d = xx.value()(a);
          a = null;
          try {
            a = c.parseFromString(d, "text/xml");
          } catch (e) {
            return null;
          }
          c = a.documentElement;
          if (!c || c.getElementsByTagName("parsererror").length || c.tagName != b) return null;
          if (!("createNodeIterator" in document)) return c;
          for (b = document.createNodeIterator(a, NodeFilter.SHOW_ALL); a = b.nextNode(); ) if (a instanceof HTMLElement || a instanceof SVGElement) return null;
          return c;
        }
        function yx(a, b) {
          try {
            var c = fc(a);
            return wx(c, b);
          } catch (d) {
            return null;
          }
        }
        var xx = new qb(function() {
          if (typeof trustedTypes !== "undefined") {
            var a = trustedTypes.createPolicy("shaka-player#xml", { createHTML: function(b) {
              return b;
            } });
            return function(b) {
              return a.createHTML(b);
            };
          }
          return function(b) {
            return b;
          };
        });
        function zx() {
          var a = this;
          this.j = this.g = null;
          this.B = [];
          this.h = null;
          this.Fa = 1;
          this.H = [];
          this.l = { qf: "", type: "", profiles: [], uc: null, rb: 0, cb: null, le: 0 };
          this.u = /* @__PURE__ */ new Map();
          this.C = /* @__PURE__ */ new Map();
          this.o = /* @__PURE__ */ new Map();
          this.F = /* @__PURE__ */ new Map();
          this.ya = /* @__PURE__ */ new Map();
          this.m = new yw();
          this.K = 0;
          this.Da = new Va(5);
          this.M = new gf(function() {
            if (a.J && !a.g.continueLoadingWhenPaused && (a.I.Ma(a.J, "timeupdate"), a.J.paused)) {
              a.I.za(a.J, "timeupdate", function() {
                return Ax(a);
              });
              return;
            }
            Ax(a);
          });
          this.R = new Ng();
          this.O = null;
          this.G = [];
          this.aa = Infinity;
          this.va = false;
          this.i = null;
          this.N = 0;
          this.T = false;
          this.I = new kb();
          this.J = null;
          this.V = false;
          this.$ = "";
          this.oa = function() {
            return false;
          };
          this.X = [];
          this.ma = /* @__PURE__ */ new Set();
          this.xa = new vv();
        }
        p = zx.prototype;
        p.configure = function(a, b) {
          var c = this.j && a.updatePeriod != this.g.updatePeriod && a.updatePeriod >= 0;
          this.g = a;
          b && (this.oa = b);
          c && this.h && this.h.presentationTimeline.W() && this.M.Kb();
          this.i && this.i.configure(this.g);
          this.m && this.m.Si(this.g.dash.useStreamOnceInPeriodFlattening);
        };
        p.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            if (e.g == 1) return c.va = b.isLowLatencyMode(), c.B = [a], c.j = b, F(e, Bx(c), 2);
            d = e.h;
            c.j && Cx(c, d);
            if (!c.j) throw new U(2, 7, 7001);
            return e.return(c.h);
          });
        };
        p.stop = function() {
          for (var a = t(this.o.values()), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.m && this.m.release();
          this.g = this.j = null;
          this.B = [];
          this.h = null;
          this.o.clear();
          this.F.clear();
          this.u.clear();
          this.C.clear();
          this.l = { qf: "", type: "", profiles: [], uc: null, rb: 0, cb: null, le: 0 };
          this.m = null;
          this.M != null && (this.M.stop(), this.M = null);
          this.i && this.i.destroy();
          this.I && (this.I.release(), this.I = null);
          this.ma.clear();
          this.xa.release();
          return this.R.destroy();
        };
        p.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (c.g == 1) return ra(c, 2), F(c, Bx(a), 4);
            if (c.g != 2) return ta(c, 0);
            b = Aa(c);
            if (!a.j || !b) return c.return();
            a.j.onError(b);
            G(c);
          });
        };
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function(a) {
          if (this.h && this.h.presentationTimeline.W()) {
            var b = a.video || a.audio;
            if (b && b.segmentIndex) {
              a = this.h.presentationTimeline.Ic();
              var c = b.segmentIndex.find(a);
              c != null && (b = b.segmentIndex.get(c)) && (this.K = b.endTime - a, Cx(this, 0));
            }
          }
        };
        p.banLocation = function(a) {
          this.i && this.i.banLocation(a);
        };
        p.setMediaElement = function(a) {
          this.J = a;
        };
        function Bx(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) return b = 4, c = "MPD", d = Dx(a), e = a.B, d.length ? (e = d, c = "Patch", b = 6) : a.B.length > 1 && a.i && (f = xw(a.i, "Location", true), f.length && (e = f)), g = Ug(e, a.g.retryParameters), h = Date.now(), F(q, Ex(a, g, 0, { type: b }), 2);
            if (q.g != 3) {
              k2 = q.h;
              if (!a.j) return q.return(0);
              k2.uri && k2.uri != k2.originalUri && !a.B.includes(k2.uri) && a.B.unshift(k2.uri);
              l = new Cb(k2.uri);
              a.$ = l.g.toString();
              return F(q, Fx(a, k2.data, k2.uri, c), 3);
            }
            m = Date.now();
            n = (m - h) / 1e3;
            a.Da.sample(1, n);
            a.ma.clear();
            return q.return(n);
          });
        }
        function Fx(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u;
          return Q(function(v) {
            if (v.g == 1) {
              e = b;
              f = a.g.dash.manifestPreprocessor;
              g = Nn;
              if (f != g) {
                xb("manifest.dash.manifestPreprocessor configuration", "Please Use manifest.dash.manifestPreprocessorTXml instead.");
                h = yx(e, d);
                if (!h) throw new U(2, 4, 4001, c);
                f(h);
                e = hc(h.outerHTML);
              }
              k2 = nd(e, d);
              if (!k2) throw new U(2, 4, 4001, c);
              l = a.g.dash.manifestPreprocessorTXml;
              m = On;
              l != m && l(k2);
              if (d === "Patch") return v.return(Gx(a, k2));
              if (n = a.g.dash.disableXlinkProcessing) return v.return(Hx(a, k2, c));
              q = a.g.dash.xlinkFailGracefully;
              r = Kv(k2, a.g.retryParameters, q, c, a.j.networkingEngine);
              Og(a.R, r);
              return F(v, r.promise, 2);
            }
            u = v.h;
            return v.return(Hx(a, u, c));
          });
        }
        function Hx(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya, va, xa, Ga, Ca, wa, za, ub, pb, pc, qc, Ub, Rf, dd, me, md, Sf, Jj, oh;
          return Q(function(Wc) {
            switch (Wc.g) {
              case 1:
                a.i && a.i.l.clear();
                d = [c];
                e = [];
                f = /* @__PURE__ */ new Map();
                g = wd(b, "Location");
                h = t(g);
                for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = l.attributes.serviceLocation, n = yd(l)) q = uc(d, [n])[0], m && (a.i ? ww(a.i, "Location", m, q) : f.set(m, q)), e.push(q);
                a.i ? (r = xw(a.i, "Location", true), r.length > 0 && (d = a.B = r)) : e.length && (d = a.B = e);
                a.l.qf = b.attributes.id || "";
                a.l.le = Dd(b, "publishTime", Gd) || 0;
                a.H = wd(b, "PatchLocation");
                u = Promise.resolve();
                if ((v = Ad(b, "ContentSteering")) && a.j) {
                  w = v.attributes.defaultServiceLocation;
                  if (a.i) a.i.i = d, a.i.h = w;
                  else if (a.i = new sw(a.j), a.i.configure(a.g), a.i.setManifestType("DASH"), a.i.i = d, a.i.h = w, z = yd(v)) (y = Dd(v, "queryBeforeStart", Nd, false)) ? u = tw(a.i, z) : tw(a.i, z);
                  B = t(f.keys());
                  for (C = B.next(); !C.done; C = B.next()) H = C.value, D = f.get(H), ww(a.i, "Location", H, D);
                }
                A = wd(b, "BaseURL");
                E = false;
                if (a.i) for (J = t(A), I = J.next(); !I.done; I = J.next()) K = I.value, L = K.attributes.serviceLocation, O = yd(K), L && O && (ww(a.i, "BaseURL", L, O), E = true);
                a.X.splice(0);
                E && a.i || (P = A.map(yd), a.X.push.apply(a.X, x(uc(d, P))));
                N = a.i;
                M = a.X;
                R = function() {
                  return N && E ? xw(N, "BaseURL") : M.slice();
                };
                a.l.cb = R;
                T = 0;
                A && A.length && (T = Dd(A[0], "availabilityTimeOffset", Md) || 0);
                a.l.rb = T;
                a.K = Dd(b, "minimumUpdatePeriod", Hd, -1);
                ma = Dd(b, "availabilityStartTime", Gd);
                W = Dd(b, "timeShiftBufferDepth", Hd);
                Ia = a.g.dash.ignoreSuggestedPresentationDelay;
                ua = null;
                Ia || (ua = Dd(b, "suggestedPresentationDelay", Hd));
                Ea = a.g.dash.ignoreMaxSegmentDuration;
                ya = null;
                Ea || (ya = Dd(b, "maxSegmentDuration", Hd));
                va = b.attributes.type || "static";
                a.h && a.h.presentationTimeline && (a.V = a.h.presentationTimeline.W() && va == "static");
                a.l.type = va;
                if (a.h) for (xa = a.h.presentationTimeline, Ga = xa.Ib(), Ca = t(a.o.values()), wa = Ca.next(); !wa.done; wa = Ca.next()) za = wa.value, za.segmentIndex && za.segmentIndex.Ya(Ga);
                else ub = a.g.dash.ignoreMinBufferTime, pb = 0, ub || (pb = Dd(b, "minBufferTime", Hd) || 0), pc = 0, pc = ua != null ? Math.min(ua, W || Infinity) : a.g.defaultPresentationDelay > 0 ? a.g.defaultPresentationDelay : Math.min(pb * 1.5, W || Infinity), xa = new nl(ma, pc, a.g.dash.autoCorrectDrift);
                xa.cd(va == "static");
                (qc = xa.W()) && !isNaN(a.g.availabilityWindowOverride) && (W = a.g.availabilityWindowOverride);
                W == null && (W = Infinity);
                xa.Hf(W);
                Ub = b.attributes.profiles || "";
                a.l.profiles = Ub.split(",");
                Rf = { Fb: va != "static", presentationTimeline: xa, sa: null, na: null, qa: null, L: null, bandwidth: 0, Kg: false, rb: T, uc: null, profiles: Ub.split(","), roles: null, Mb: function() {
                  return "";
                } };
                return F(Wc, u, 2);
              case 2:
                a.N = 0;
                dd = Ix(a, Rf, R, b, false);
                me = dd.duration;
                md = dd.periods;
                (va != "static" || a.V) && dd.Wh || xa.Ab(me || Infinity);
                a.T && a.va && xa.Pi(a.aa);
                xa.Sg(ya || 1);
                a.T && a.va && (Sf = ua != null ? ua : a.g.defaultPresentationDelay, xa.oh(Sf));
                if (!a.h) return F(Wc, a.m.hg(md, Rf.Fb), 6);
                a.h.periodCount = md.length;
                a.h.gapCount = a.N;
                return F(Wc, Jx(a, md, false), 4);
              case 6:
                a.h = {
                  presentationTimeline: xa,
                  variants: a.m.l,
                  textStreams: a.m.Ig(),
                  imageStreams: a.m.i,
                  offlineSessionIds: [],
                  sequenceMode: a.g.dash.sequenceMode,
                  ignoreManifestTimestampsInSegmentsMode: false,
                  type: "DASH",
                  serviceDescription: Kx(b),
                  nextUrl: Lx(b),
                  periodCount: md.length,
                  gapCount: a.N,
                  isLowLatency: a.T,
                  startTime: null
                };
                if (!xa.fj()) {
                  Wc.A(7);
                  break;
                }
                Jj = wd(b, "UTCTiming");
                return F(Wc, Mx(a, R, Jj), 8);
              case 8:
                oh = Wc.h;
                if (!a.j) return Wc.return();
                xa.Qi(oh);
              case 7:
                xa.lf(), a.m && !a.h.presentationTimeline.W() && a.m.release();
              case 4:
                a.j.makeTextStreamsForClosedCaptions(a.h), Nx(a), Ox(a, md), G(Wc);
            }
          });
        }
        function Jx(a, b, c) {
          var d;
          return Q(function(e) {
            if (e.g == 1) return F(e, a.m.hg(b, true, c), 2);
            a.h.variants = a.m.l;
            d = a.m.Ig();
            d.length > 0 && (a.h.textStreams = d);
            a.h.imageStreams = a.m.i;
            a.j.filter(a.h);
            G(e);
          });
        }
        function Gx(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L;
          return Q(function(O) {
            if (O.g == 1) {
              c = b.attributes.mpdId;
              d = Dd(b, "originalPublishTime", Gd);
              if (!c || c !== a.l.qf || d !== a.l.le) throw a.H = [], new U(1, 4, 4052);
              e = [];
              f = [];
              g = /* @__PURE__ */ new Set();
              h = t(vd(b));
              for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = Qd(l.attributes.sel || ""), n = m[m.length - 1], q = yd(l) || "", n.name === "MPD") if (n.Dc === "mediaPresentationDuration") {
                r = yd(l) || "";
                var P = Hd(r);
                if (P != null) {
                  a.l.uc = P;
                  for (var N = t(a.u.values()), M = N.next(); !M.done; M = N.next()) M.value.uc = P;
                }
              } else if (n.Dc === "type") {
                a.h.presentationTimeline.cd(q == "static");
                a.l.type = q;
                P = t(a.u.values());
                for (N = P.next(); !N.done; N = P.next()) N.value.Fb = q == "dynamic";
                q == "static" && (a.K = -1);
              } else n.Dc === "publishTime" ? a.l.le = Gd(q) || 0 : n.Dc === null && l.tagName === "add" && f.push(l);
              else if (n.name === "PatchLocation") Rd(a.H, l);
              else if (n.name === "Period") l.tagName === "add" ? f.push(l) : l.tagName === "remove" && n.id && Px(a, n.id);
              else if (n.name === "SegmentTemplate") {
                N = Qd(l.attributes.sel || "");
                P = N[N.length - 1];
                if (P.Dc) {
                  N = Qx(a, N);
                  M = yd(l) || "";
                  for (var R = t(N), T = R.next(); !T.done; T = R.next()) T = a.u.get(T.value), Td(T.L.Oc, l.tagName, P.Dc, M);
                  P = N;
                } else P = [];
                u = P;
                v = t(u);
                for (w = v.next(); !w.done; w = v.next()) z = w.value, g.add(z);
              } else if (n.name === "SegmentTimeline" || n.name === "S") {
                P = Qd(l.attributes.sel || "");
                P = Qx(a, P);
                N = t(P);
                for (M = N.next(); !M.done; M = N.next()) M = a.u.get(M.value), M = Hv(M, iw, "SegmentTimeline"), R = wd(M, "S"), Rd(R, l), M.children = R;
                y = P;
                B = t(y);
                for (C = B.next(); !C.done; C = B.next()) H = C.value, g.add(H);
              }
              D = t(g);
              for (A = D.next(); !A.done; A = D.next()) E = A.value, Rx(
                a,
                E
              );
              J = t(f);
              for (I = J.next(); !I.done; I = J.next()) K = I.value, e.push.apply(e, x(Sx(a, K)));
              if (!e.length) return O.A(2);
              a.h.periodCount += e.length;
              a.h.gapCount = a.N;
              return F(O, Jx(a, e, true), 2);
            }
            a.l.type == "static" && (L = a.l.uc, a.h.presentationTimeline.Ab(L || Infinity));
            G(O);
          });
        }
        function Sx(a, b) {
          return Ix(a, { Fb: a.l.type == "dynamic", presentationTimeline: a.h.presentationTimeline, sa: null, na: null, qa: null, L: null, bandwidth: 0, Kg: false, rb: a.l.rb, profiles: a.l.profiles, uc: a.l.uc, roles: null, Mb: function() {
            return "";
          } }, a.l.cb, b, true).periods;
        }
        function Px(a, b) {
          a.h.periodCount--;
          for (var c = t(a.u.keys()), d = c.next(); !d.done; d = c.next()) if (d = d.value, d.startsWith(b)) {
            var e = a.u.get(d);
            Hv(e, iw, "SegmentTimeline").children = [];
            Rx(a, d);
            a.u.delete(d);
          }
          a.G = a.G.filter(function(f) {
            return f !== b;
          });
        }
        function Qx(a, b) {
          var c = "", d = "", e = -1, f = "";
          b = t(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, g.name === "Period" ? c = g.id : g.name === "AdaptationSet" ? (d = g.id, g.position !== null && (e = g.position)) : g.name === "Representation" && (f = g.id);
          b = [];
          if (f) b.push(c + "," + f);
          else if (d) for (e = t(a.u.values()), a = e.next(); !a.done; a = e.next()) a = a.value, a.sa.id === c && a.qa.id === d && a.L.id && b.push(c + "," + a.L.id);
          else if (e > -1) for (d = t(a.u.values()), a = d.next(); !a.done; a = d.next()) a = a.value, a.sa.id === c && a.qa.position === e && a.L.id && b.push(c + "," + a.L.id);
          return b;
        }
        function Rx(a, b) {
          var c = a.u.get(b), d = a.o.get(b);
          d.segmentIndex && d.segmentIndex.Ya(a.h.presentationTimeline.Ib());
          try {
            var e = hw(c, function(f, g, h, k2) {
              return Tx(a, f, g, h, k2);
            }, a.o, true, a.g.dash.initialSegmentLimit, a.ya, c.L.aesKey, null, true, a.C);
            d.createSegmentIndex = function() {
              return Q(function(f) {
                if (f.g == 1) return d.segmentIndex ? f.A(0) : F(f, e.Sc(), 3);
                d.segmentIndex = f.h;
                G(f);
              });
            };
          } catch (f) {
            if (b = c.L.contentType, b != Ac && b != "application" && b != "image" || f.code != 4002) throw f;
          }
        }
        function Kx(a) {
          var b = Ad(a, "ServiceDescription");
          if (!b) return null;
          a = Ad(b, "Latency");
          b = Ad(b, "PlaybackRate");
          if (!a && !b) return null;
          var c = {};
          a && ("target" in a.attributes && (c.targetLatency = parseInt(a.attributes.target, 10) / 1e3), "max" in a.attributes && (c.maxLatency = parseInt(a.attributes.max, 10) / 1e3), "min" in a.attributes && (c.minLatency = parseInt(a.attributes.min, 10) / 1e3));
          b && ("max" in b.attributes && (c.maxPlaybackRate = parseFloat(b.attributes.max)), "min" in b.attributes && (c.minPlaybackRate = parseFloat(b.attributes.min)));
          return c;
        }
        function Lx(a) {
          a = wd(a, "SupplementalProperty");
          if (!a.length) return null;
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b.attributes.schemeIdUri == "urn:mpeg:dash:chaining:2016") return b.attributes.value;
          return null;
        }
        function Ix(a, b, c, d, e) {
          var f = b.uc;
          f || (f = Dd(d, "mediaPresentationDuration", Hd), a.l.uc = f);
          var g = 0;
          a.h && a.h.presentationTimeline && a.V && (g = a.h.presentationTimeline.Zb());
          var h = [], k2 = g;
          d = wd(d, "Period");
          for (var l = 0; l < d.length; l++) {
            var m = d[l], n = d[l + 1], q = Dd(m, "start", Hd, k2), r = m.attributes.id, u = Dd(m, "duration", Hd);
            q = l == 0 && q == 0 && a.V ? g : q;
            var v = null;
            if (n) {
              var w = Dd(n, "start", Hd);
              w != null && (v = w - q + g);
            } else f != null && (v = f - q + g);
            w = Dc;
            v && u && Math.abs(v - u) > w && v > u && a.N++;
            v == null && (v = u);
            if (!(a.O !== null && r !== null && q !== null && q < a.O) || a.G.includes(r) || l + 1 == d.length) {
              q !== null && (a.O === null || q > a.O) && (a.O = q);
              k2 = Ux(a, b, c, { start: q, duration: v, node: m, ef: v == null || !n });
              h.push(k2);
              b.sa.id && v && a.ya.set(b.sa.id, v);
              if (v == null) {
                k2 = null;
                break;
              }
              k2 = q + v;
            }
          }
          if (e) for (b = t(h), c = b.next(); !c.done; c = b.next()) c = c.value.id, a.G.includes(c) || a.G.push(c);
          else a.G = h.map(function(z) {
            return z.id;
          });
          return f != null ? { periods: h, duration: f + g, Wh: false } : { periods: h, duration: k2, Wh: true };
        }
        function Nx(a) {
          var b = Array.from(a.F.keys()).filter(function(h) {
            return !a.G.includes(h);
          });
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            for (var d = true, e = t(a.F.get(c)), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = a.o.get(f);
              g && (g.segmentIndex && g.segmentIndex.getNumReferences() != 0 ? d = false : (a.m && a.m.Uh(g, c), a.o.delete(f)));
            }
            d && a.F.delete(c);
          }
        }
        function Ox(a, b) {
          b = new Set(b.map(function(e) {
            return e.id;
          }));
          for (var c = t(a.C.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, b.has(d) || a.C.delete(d);
        }
        function Ux(a, b, c, d) {
          b.sa = Vx(a, d.node, null, c);
          b.na = d;
          b.sa.rb = b.rb;
          b.sa.id || (b.sa.id = "__shaka_period_" + d.start);
          var e = wd(d.node, "EventStream");
          c = b.presentationTimeline.Ib();
          e = t(e);
          for (var f = e.next(); !f.done; f = e.next()) Wx(a, d.start, d.duration, f.value, c);
          c = wd(d.node, "SupplementalProperty");
          c = t(c);
          for (e = c.next(); !e.done; e = c.next()) if (e = e.value, e.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014" && (e = Xx(a, e))) b.Mb = e;
          c = wd(d.node, "AdaptationSet").map(function(r, u) {
            return Yx(a, b, u, r);
          }).filter(kf);
          if (b.Fb) {
            e = [];
            f = t(c);
            for (var g = f.next(); !g.done; g = f.next()) {
              g = t(g.value.Nk);
              for (var h = g.next(); !h.done; h = g.next()) e.push(h.value);
            }
            if (e.length != new Set(e).size) throw new U(2, 4, 4018);
          }
          e = /* @__PURE__ */ new Map();
          f = t(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = t(g.value.uj), h = g.next(); !h.done; h = g.next()) {
            var k2 = t(h.value);
            h = k2.next().value;
            k2 = k2.next().value;
            e.set(h, k2);
          }
          if (e.size) for (f = null, g = t(c), h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            k2 = [];
            for (var l = t(h.streams), m = l.next(), n = {}; !m.done; n = { wh: void 0 }, m = l.next()) if (n.wh = m.value, e.has(n.wh.originalId)) {
              f || (f = wd(d.node, "AdaptationSet").map(function(r, u) {
                return Yx(a, b, u, r);
              }).filter(kf));
              m = t(f);
              for (var q = m.next(); !q.done; q = m.next()) if (q = q.value.streams.find(/* @__PURE__ */ (function(r) {
                return function(u) {
                  return u.originalId == r.wh.originalId;
                };
              })(n))) q.dependencyStream = e.get(q.originalId), q.originalId += q.dependencyStream.originalId, k2.push(q);
            }
            k2.length && h.streams.push.apply(h.streams, x(k2));
          }
          d = c.filter(function(r) {
            return !r.Eh;
          });
          c = c.filter(function(r) {
            return r.Eh;
          });
          if (!a.g.disableIFrames) {
            for (c = t(c), e = c.next(); !e.done; e = c.next()) for (e = e.value, f = e.Eh.split(" "), g = t(d), h = g.next(); !h.done; h = g.next()) if (h = h.value, f.includes(h.id)) for (h = t(h.streams), k2 = h.next(); !k2.done; k2 = h.next()) kg(k2.value, e.streams);
          }
          c = Zx(a.g.disableAudio, d, "audio");
          e = Zx(a.g.disableVideo, d, "video");
          f = Zx(a.g.disableText, d, Ac);
          d = Zx(a.g.disableThumbnails, d, "image");
          if (e.length === 0 && c.length === 0) throw new U(2, 4, 4004);
          return { id: b.sa.id, audioStreams: c, videoStreams: e, textStreams: f, imageStreams: d };
        }
        function Zx(a, b, c) {
          return a || !b.length ? [] : b.reduce(function(d, e) {
            if (e.contentType != c) return d;
            d.push.apply(d, x(e.streams));
            return d;
          }, []);
        }
        function Yx(a, b, c, d) {
          function e(L) {
            var O = L.attributes["dvb:fontFamily"];
            L = L.attributes["dvb:url"];
            O && L && (L = uc(b.qa.cb(), [L], b.Mb()), a.j.addFont(O, L[0]));
          }
          function f(L) {
            switch (L) {
              case 1:
              case 5:
              case 6:
              case 7:
                return "srgb";
              case 9:
                return "rec2020";
              case 11:
              case 12:
                return "p3";
            }
          }
          function g(L) {
            switch (L) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                return "SDR";
              case 16:
                return "PQ";
              case 18:
                return "HLG";
            }
          }
          b.qa = Vx(a, d, b.sa, null);
          b.qa.position = c;
          var h = false;
          c = wd(d, "Role");
          var k2 = c.map(function(L) {
            return L.attributes.value;
          }).filter(kf), l = void 0, m = b.qa.contentType == Ac;
          m && (l = "subtitle");
          c = t(c);
          for (var n = c.next(); !n.done; n = c.next()) {
            n = n.value;
            var q = n.attributes.schemeIdUri;
            if (q == null || q == "urn:mpeg:dash:role:2011") switch (n = n.attributes.value, n) {
              case "main":
                h = true;
                break;
              case "caption":
              case "subtitle":
                l = n;
            }
          }
          var r = wd(d, "EssentialProperty");
          c = null;
          var u = false;
          n = null;
          q = false;
          r = t(r);
          for (var v = r.next(); !v.done; v = r.next()) {
            v = v.value;
            var w = v.attributes.schemeIdUri;
            if (w == "http://dashif.org/guidelines/trickmode") c = v.attributes.value;
            else if (w == "urn:mpeg:mpegB:cicp:TransferCharacteristics") var z = g(parseInt(v.attributes.value, 10));
            else if (w == "urn:mpeg:mpegB:cicp:ColourPrimaries") var y = f(parseInt(v.attributes.value, 10));
            else w != "urn:mpeg:mpegB:cicp:MatrixCoefficients" && (w == "urn:mpeg:dash:ssr:2023" && a.g.dash.enableFastSwitching ? u = true : w == "urn:dvb:dash:fontdownload:2014" ? e(v) : w == "urn:mpeg:dash:urlparam:2014" ? (n = Xx(a, v)) || (q = true) : q = true);
          }
          if (q) return null;
          var B = null;
          q = wd(d, "SupplementalProperty");
          q = t(q);
          for (r = q.next(); !r.done; r = q.next()) r = r.value, v = r.attributes.schemeIdUri, v == "http://dashif.org/guidelines/last-segment-number" ? B = parseInt(r.attributes.value, 10) - 1 : v == "urn:mpeg:mpegB:cicp:TransferCharacteristics" ? z = g(parseInt(r.attributes.value, 10)) : v == "urn:mpeg:mpegB:cicp:ColourPrimaries" ? y = f(parseInt(r.attributes.value, 10)) : v == "urn:dvb:dash:fontdownload:2014" ? e(r) : v == "urn:mpeg:dash:urlparam:2014" && (n = Xx(a, r));
          n && (b.Mb = n);
          n = wd(d, "Accessibility");
          var C = /* @__PURE__ */ new Map(), H;
          n = t(n);
          for (q = n.next(); !q.done; q = n.next()) if (r = q.value, q = r.attributes.schemeIdUri, r = r.attributes.value, q != "urn:scte:dash:cc:cea-608:2015" || a.g.disableText) if (q != "urn:scte:dash:cc:cea-708:2015" || a.g.disableText) q == "urn:mpeg:dash:role:2011" ? r != null && (k2.push(r), r == "captions" && (l = "caption")) : q == "urn:tva:metadata:cs:AudioPurposeCS:2007" && (r == "1" ? H = "visually impaired" : r == "2" ? H = "hard of hearing" : r == "9" && (H = "spoken subtitles"));
          else if (q = 1, r != null) for (r = t(r.split(";")), v = r.next(); !v.done; v = r.next()) {
            w = v.value;
            var D = v = void 0;
            w.includes("=") ? (w = w.split("="), v = "svc" + w[0], D = w[1].split(",")[0].split(":").pop()) : (v = "svc" + q, q++, D = w);
            C.set(v, of(D));
          }
          else C.set("svc1", "und");
          else if (q = 1, r != null) for (r = r.split(";"), v = t(r), w = v.next(); !w.done; w = v.next()) {
            D = w.value;
            var A = w = void 0;
            D.includes("=") ? (D = D.split("="), w = D[0].startsWith("CC") ? D[0] : "CC" + D[0], A = D[1] || "und") : (w = "CC" + q, r.length == 2 ? q += 2 : q++, A = D);
            C.set(w, of(A));
          }
          else C.set("CC1", "und");
          n = wd(d, "ContentProtection");
          var E = wv(a.xa, n, a.g.ignoreDrmInfo, a.g.dash.keySystemsByURI);
          b.qa.encrypted = n.length > 0;
          var J = of(b.qa.language || "und"), I = b.qa.label, K = /* @__PURE__ */ new Map();
          d = wd(d, "Representation");
          if (!a.g.ignoreSupplementalCodecs) {
            n = [];
            q = t(d);
            for (r = q.next(); !r.done; r = q.next()) if (v = r.value, r = Ed(v, "urn:scte:dash:scte214-extensions", "supplementalCodecs")) v = jd(v), v.attributes.codecs = r.split(" ").join(","), v.attributes.id && (v.attributes.supplementalId = v.attributes.id + "_supplementalCodecs"), n.push(v);
            d.push.apply(d, x(n));
          }
          n = d.map(function(L) {
            var O = $x(a, b, E, l, J, I, h, k2, C, L, H, B);
            return O && (O.hdr = O.hdr || z, O.colorGamut = O.colorGamut || y, O.fastSwitching = u, L = L.attributes.dependencyId) ? (O.baseOriginalId = L, K.set(L, O), null) : O;
          }).filter(function(L) {
            return !!L;
          });
          if (n.length == 0 && K.size == 0) {
            c = b.qa.contentType == "image";
            if (a.g.dash.ignoreEmptyAdaptationSet || m || c) return null;
            throw new U(2, 4, 4003);
          }
          if (!b.qa.contentType || b.qa.contentType == "application") for (b.qa.contentType = ay(n[0].mimeType, n[0].codecs), m = t(n), q = m.next(); !q.done; q = m.next()) q.value.type = b.qa.contentType;
          m = b.qa.id || "__fake__" + a.Fa++;
          q = t(n);
          for (r = q.next(); !r.done; r = q.next()) {
            r = r.value;
            v = t(E.drmInfos);
            for (w = v.next(); !w.done; w = v.next()) w = w.value, w.keyIds = w.keyIds && r.keyIds ? new Set([].concat(x(w.keyIds), x(r.keyIds))) : w.keyIds || r.keyIds;
            a.g.enableAudioGroups && (r.groupId = m);
          }
          d = d.map(function(L) {
            return L.attributes.supplementalId || L.attributes.id;
          }).filter(kf);
          return { id: m, contentType: b.qa.contentType, language: J, Bm: h, streams: n, drmInfos: E.drmInfos, Eh: c, Nk: d, uj: K };
        }
        function Xx(a, b) {
          if ((b = Bd(b, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) && Dd(b, "useMPDUrlQuery", Nd, false)) {
            var c = b.attributes.queryTemplate;
            if (c) return function() {
              return c == "$querypart$" ? a.$ : c.split("&").map(function(d) {
                if (d == "$querypart$") return a.$;
                var e = /\$query:(.*?)\$/g.exec(d);
                if (e && e.length == 2) {
                  e = e[1];
                  var f = new Ib(a.$).get(e);
                  if (f.length) return e + "=" + f[0];
                }
                return d;
              }).join("&");
            };
          }
          return null;
        }
        function $x(a, b, c, d, e, f, g, h, k2, l, m, n) {
          b.L = Vx(a, l, b.qa, null);
          var q = b.L.id;
          a.aa = Math.min(a.aa, b.L.rb);
          a.T = a.aa > 0;
          if (!by(b.L)) return null;
          var r = b.na.start;
          b.bandwidth = Dd(l, "bandwidth", Kd) || 0;
          b.roles = h;
          var u = wd(l, "SupplementalProperty"), v = wd(l, "EssentialProperty"), w = wd(l, "ContentProtection");
          l = null;
          var z = v.find(function(N) {
            return N.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
          });
          z ? l = Xx(a, z) : (z = u.find(function(N) {
            return N.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
          })) && (l = Xx(a, z));
          l && (b.Mb = l);
          z = b.L.contentType;
          l = z == Ac || z == "application";
          z = z == "image";
          w.length && (b.qa.encrypted = true);
          try {
            var y = void 0;
            if (c.dg) {
              var B = b.L.cb, C = b.Mb, H = uc(B(), [c.dg.qk], C()), D = Ug(H, a.g.retryParameters);
              y = { bitsKey: 128, blockCipherMode: "CBC", iv: c.dg.iv, firstMediaSequenceNumber: 0, fetchKey: function() {
                var N, M, R;
                return Q(function(T) {
                  if (T.g == 1) return F(T, Ex(a, D, 6), 2);
                  if (T.g != 3) {
                    N = T.h;
                    if (!N.data || N.data.byteLength != 16) throw new U(2, 4, 4049);
                    M = { name: "AES-CBC" };
                    R = y;
                    return F(T, window2.crypto.subtle.importKey(
                      "raw",
                      N.data,
                      M,
                      true,
                      ["decrypt"]
                    ), 3);
                  }
                  R.cryptoKey = T.h;
                  y.fetchKey = void 0;
                  G(T);
                });
              } };
            }
            b.L.aesKey = y;
            B = function(N, M, R, T) {
              return Tx(a, N, M, R, T);
            };
            if (b.L.Hd) var A = Xv(b, B, y);
            else if (b.L.Ac) A = cw(b, a.o, y);
            else if (b.L.Oc) A = hw(b, B, a.o, !!a.h, a.g.dash.initialSegmentLimit, a.ya, y, n, false, a.C);
            else {
              var E = b.na.duration || 0, J = b.L.cb, I = b.L.mimeType, K = b.L.codecs;
              A = { endTime: -1, timeline: -1, Sc: function() {
                var N = Ol(r, E, J());
                N.Gb(function(M) {
                  M.mimeType = I;
                  M.codecs = K;
                });
                return Promise.resolve(N);
              }, timescale: 1 };
            }
          } catch (N) {
            if ((l || z) && N.code == 4002) return null;
            throw N;
          }
          n = Av(a.xa, w, c, a.g.ignoreDrmInfo, a.g.dash.keySystemsByURI);
          n = new Set(n ? [n] : []);
          w = false;
          u.some(function(N) {
            return N.attributes.schemeIdUri == "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" && N.attributes.value == "JOC";
          }) && (w = true);
          u = false;
          l && (u = h.includes("forced_subtitle") || h.includes("forced-subtitle"));
          var L;
          if (z && ((v = v.find(function(N) {
            return ["http://dashif.org/thumbnail_tile", "http://dashif.org/guidelines/thumbnail_tile"].includes(N.attributes.schemeIdUri);
          })) && (L = v.attributes.value), !L)) return null;
          var O;
          l = b.L.codecs;
          b.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") && (l.includes("hvc1.2.4.L153.B0") || l.includes("hev1.2.4.L153.B0")) && (O = "PQ");
          v = b.L.id ? b.sa.id + "," + b.L.id : "";
          a.H.length && q && a.u.set(b.sa.id + "," + q, cy(b));
          b.L.zf && dy(a, b.L.zf, A, b.presentationTimeline);
          A.endTime != -1 && b.sa.id != null && b.L.id != null && ((q = a.C.get(b.sa.id)) ? (q.endTime = A.endTime, q.bh.includes(b.L.id) || q.bh.push(b.L.id), a.C.set(b.sa.id, q)) : a.C.set(b.sa.id, { endTime: A.endTime, timeline: A.timeline, bh: [b.L.id] }));
          var P = v && a.o.has(v) ? a.o.get(v) : {
            id: a.Fa++,
            originalId: b.L.id,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              P.segmentIndex && (P.segmentIndex.release(), P.segmentIndex = null);
            },
            segmentIndex: null,
            mimeType: b.L.mimeType,
            codecs: l,
            frameRate: b.L.frameRate,
            pixelAspectRatio: b.L.pixelAspectRatio,
            bandwidth: b.bandwidth,
            width: b.L.width,
            height: b.L.height,
            kind: d,
            encrypted: c.drmInfos.length > 0,
            drmInfos: c.drmInfos,
            keyIds: n,
            language: e,
            originalLanguage: b.qa.language,
            label: f,
            type: b.qa.contentType,
            primary: g,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: b.L.emsgSchemeIdUris,
            roles: h,
            forced: u,
            channelsCount: b.L.uf,
            audioSamplingRate: b.L.audioSamplingRate,
            spatialAudio: w,
            closedCaptions: k2,
            hdr: O,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: L,
            accessibilityPurpose: m,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set([Ie(b.L.mimeType, b.L.codecs)]),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          P.createSegmentIndex = function() {
            var N;
            return Q(function(M) {
              if (M.g == 1) {
                if (P.segmentIndex) return M.A(0);
                N = P;
                return F(M, A.Sc(), 3);
              }
              N.segmentIndex = M.h;
              G(M);
            });
          };
          v && b.Fb && !a.o.has(v) && (b = b.sa.id || "", a.F.has(b) || a.F.set(b, []), a.o.set(v, P), a.F.get(b).push(v));
          return P;
        }
        function dy(a, b, c, d) {
          if (!a.ma.has(b)) {
            a.ma.add(b);
            var e = Dd(b, "presentationTime", Ld) || 0, f = Ad(b, "UTCTiming"), g;
            if (g = f && f.attributes.schemeIdUri) f = f.attributes.schemeIdUri, g = !(f === "urn:mpeg:dash:utc:http-ntp:2014" || f === "urn:mpeg:dash:utc:ntp:2014" || f === "urn:mpeg:dash:utc:sntp:2014");
            g ? b = (Dd(b, "wallClockTime", Gd) || 0) * 1e3 : (b = Dd(b, "wallClockTime", Ld) || 0, b = Rj(b));
            c = new Date(b - e / c.timescale * 1e3);
            e = c.getTime() / 1e3;
            isNaN(e) || (d.o || d.ph(e), d = (/* @__PURE__ */ new Map()).set("detail", { wallClockTime: b, programStartDate: c }), d = new V(
              "prft",
              d
            ), a.j.onEvent(d));
          }
        }
        function cy(a) {
          function b(c) {
            if (!c) return null;
            c = kd(c);
            c.Hd = null;
            c.Ac = null;
            c.Oc = Vd(c.Oc);
            c.zf = null;
            return c;
          }
          a = kd(a);
          a.sa = b(a.sa);
          a.qa = b(a.qa);
          a.L = b(a.L);
          a.na && (a.na = kd(a.na), a.na.node = null);
          return a;
        }
        function Ax(a) {
          var b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return b = 0, ra(d, 2), F(d, Bx(a), 4);
              case 4:
                b = d.h;
                ta(d, 3);
                break;
              case 2:
                if (c = Aa(d), a.j) {
                  if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.j.onError(c), d.return();
                  c.severity = 1;
                  a.j.onError(c);
                }
              case 3:
                if (!a.j) return d.return();
                a.j.onManifestUpdated();
                Cx(a, b);
                G(d);
            }
          });
        }
        function Cx(a, b) {
          if (!(a.K < 0)) {
            var c = a.K;
            a.g.updatePeriod >= 0 && (c = a.g.updatePeriod);
            a.M.ia(Math.max(c - b, Wa(a.Da)));
          }
        }
        function Vx(a, b, c, d) {
          c = c || { contentType: "", mimeType: "", codecs: "", emsgSchemeIdUris: [], frameRate: void 0, pixelAspectRatio: void 0, uf: null, audioSamplingRate: null, rb: 0, Ef: 1, encrypted: false };
          d = d || c.cb;
          var e = b.attributes.id, f = b.attributes.supplementalId, g = wd(b, "BaseURL"), h, k2 = false;
          if (a.i) for (var l = t(g), m = l.next(); !m.done; m = l.next()) {
            var n = m.value;
            m = n.attributes.serviceLocation;
            n = yd(n);
            m && n && (ww(a.i, e, m, n), k2 = true);
          }
          k2 && a.i || (h = g.map(yd));
          var q = a.i;
          a = b.attributes.contentType || c.contentType;
          l = b.attributes.mimeType || c.mimeType;
          m = sm([b.attributes.codecs || c.codecs]).join(",");
          n = Dd(b, "frameRate", Od) || c.frameRate;
          var r = b.attributes.sar || c.pixelAspectRatio, u = ey(wd(b, "InbandEventStream"), c.emsgSchemeIdUris), v = wd(b, "AudioChannelConfiguration");
          v = fy(v) || c.uf;
          var w = Dd(b, "audioSamplingRate", Ld) || c.audioSamplingRate;
          a || (a = ay(l, m));
          var z = Ad(b, "SegmentBase"), y = Ad(b, "SegmentTemplate"), B = z ? Dd(z, "availabilityTimeOffset", Md) || 0 : 0, C = y ? Dd(y, "availabilityTimeOffset", Md) || 0 : 0, H = g && g.length ? Dd(g[0], "availabilityTimeOffset", Md) || 0 : 0;
          B = c.rb + H + B + C;
          C = null;
          (H = Ad(b, "SegmentSequenceProperties")) && (H = Dd(H, "cadence", Kd)) && (C = H);
          H = b.attributes.label;
          var D = wd(b, "Label");
          D && D.length && (D = D[0], xd(D) && (H = xd(D)));
          return {
            cb: function() {
              return uc(d(), g.length ? q && k2 ? xw(q, e) : h ? h : [] : []);
            },
            Hd: z || c.Hd,
            Ac: Ad(b, "SegmentList") || c.Ac,
            Oc: y || c.Oc,
            zf: Ad(b, "ProducerReferenceTime") || c.zf,
            width: Dd(b, "width", Ld) || c.width,
            height: Dd(b, "height", Ld) || c.height,
            contentType: a,
            mimeType: l,
            codecs: m,
            frameRate: n,
            pixelAspectRatio: r,
            emsgSchemeIdUris: u,
            id: f || e,
            originalId: e,
            language: b.attributes.lang,
            uf: v,
            audioSamplingRate: w,
            rb: B,
            cf: null,
            Ef: C || c.Ef,
            label: H || null,
            encrypted: false
          };
        }
        function ey(a, b) {
          b = b.slice();
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value.attributes.schemeIdUri, b.includes(c) || b.push(c);
          return b;
        }
        function fy(a) {
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = b.attributes.schemeIdUri;
            if (c && (b = b.attributes.value)) switch (c) {
              case "urn:mpeg:dash:outputChannelPositionList:2012":
                return b.trim().split(/ +/).length;
              case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
              case "urn:dts:dash:audio_channel_configuration:2012":
                b = parseInt(b, 10);
                if (!b) continue;
                return b;
              case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                c = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2];
                b = parseInt(
                  b,
                  16
                );
                if (!b) continue;
                for (var d = 0, e = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
              case "urn:dolby:dash:audio_channel_configuration:2011":
                c = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse();
                b = parseInt(b, 16);
                if (!b) continue;
                for (e = d = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                if (c = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14], (b = parseInt(b, 10)) && b > 0 && b < c.length) return c[b];
            }
          }
          return null;
        }
        function by(a) {
          var b = a.Hd ? 1 : 0;
          b += a.Ac ? 1 : 0;
          b += a.Oc ? 1 : 0;
          if (b == 0) return a.contentType == Ac || a.contentType == "application" ? true : false;
          b != 1 && (a.Hd && (a.Ac = null), a.Oc = null);
          return true;
        }
        function gy(a, b, c, d) {
          var e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return e = [kc(c)], f = uc(b(), e), g = Ug(f, a.g.retryParameters), g.method = d, h = a.j.networkingEngine.request(4, g, { isPreload: a.oa() }), Og(a.R, h), F(n, h.promise, 2);
            k2 = n.h;
            if (d == "HEAD") {
              if (!k2.headers || !k2.headers.date) return n.return(0);
              l = k2.headers.date;
            } else l = cc(k2.data);
            m = Date.parse(l);
            return isNaN(m) ? n.return(0) : n.return(m - Date.now());
          });
        }
        function Mx(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                d = c.map(function(q) {
                  return { scheme: q.attributes.schemeIdUri, value: q.attributes.value };
                }), e = a.g.dash.clockSyncUri, !d.length && e && d.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: e }), f = t(d), g = f.next();
              case 2:
                if (g.done) {
                  n.A(4);
                  break;
                }
                h = g.value;
                ra(n, 5);
                k2 = h.scheme;
                l = h.value;
                switch (k2) {
                  case "urn:mpeg:dash:utc:http-head:2014":
                  case "urn:mpeg:dash:utc:http-head:2012":
                    return n.A(7);
                  case "urn:mpeg:dash:utc:http-xsdate:2014":
                  case "urn:mpeg:dash:utc:http-iso:2014":
                  case "urn:mpeg:dash:utc:http-xsdate:2012":
                  case "urn:mpeg:dash:utc:http-iso:2012":
                    return n.A(8);
                  case "urn:mpeg:dash:utc:direct:2014":
                  case "urn:mpeg:dash:utc:direct:2012":
                    return m = Date.parse(l), n.return(isNaN(m) ? 0 : m - Date.now());
                  case "urn:mpeg:dash:utc:http-ntp:2014":
                  case "urn:mpeg:dash:utc:ntp:2014":
                  case "urn:mpeg:dash:utc:sntp:2014":
                    $a("NTP UTCTiming scheme is not supported");
                    break;
                  default:
                    $a("Unrecognized scheme in UTCTiming element", k2);
                }
                n.A(9);
                break;
              case 7:
                return F(n, gy(a, b, l, "HEAD"), 10);
              case 10:
                return n.return(n.h);
              case 8:
                return F(n, gy(a, b, l, "GET"), 11);
              case 11:
                return n.return(n.h);
              case 9:
                ta(
                  n,
                  3
                );
                break;
              case 5:
                Aa(n);
              case 3:
                g = f.next();
                n.A(2);
                break;
              case 4:
                return $a("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"), n.return(0);
            }
          });
        }
        function Wx(a, b, c, d, e) {
          var f = d.attributes.schemeIdUri || "", g = d.attributes.value || "", h = Dd(d, "timescale", Ld) || 1, k2 = Dd(d, "presentationTimeOffset", Ld) || 0;
          d = t(wd(d, "Event"));
          for (var l = d.next(); !l.done; l = d.next()) {
            l = l.value;
            var m = Dd(l, "presentationTime", Ld) || 0, n = Dd(l, "duration", Ld) || 0;
            m = Math.max((m - k2) / h + b, b);
            n = m + n / h;
            c != null && (m = Math.min(m, b + c), n = Math.min(n, b + c));
            n < e || (l = { schemeIdUri: f, value: g, startTime: m, endTime: n, id: l.attributes.id || "", timescale: h, eventElement: Ud(l), eventNode: Vd(l) }, a.j.onTimelineRegionAdded(l));
          }
        }
        function Tx(a, b, c, d, e) {
          var f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return f = $g, g = e ? 0 : 1, h = wm(b, c, d, a.g.retryParameters), F(l, Ex(a, h, f, { type: g }), 2);
            k2 = l.h;
            return l.return(k2.data);
          });
        }
        function ay(a, b) {
          b = Ie(a, b);
          return Ye(b) ? Ac : a.split("/")[0];
        }
        function Ex(a, b, c, d) {
          d || (d = {});
          d.isPreload = a.oa();
          b = a.j.networkingEngine.request(c, b, d);
          Og(a.R, b);
          return b.promise;
        }
        function Dx(a) {
          var b = a.l.le;
          if (!a.l.qf || !b || !a.H.length) return [];
          var c = Date.now() / 1e3, d = a.H.filter(function(e) {
            e = Ld(e.attributes.ttl);
            return !e || b + e > c;
          }).map(yd).filter(kf);
          return d.length ? uc(a.B, d) : [];
        }
        S("shaka.dash.DashParser", zx);
        Jc("application/dash+xml", function() {
          return new zx();
        });
        Jc("video/vnd.mpeg.dash.mpd", function() {
          return new zx();
        });
        function hy() {
        }
        S("shaka.dependencies", hy);
        hy.has = function(a) {
          return iy.has(a);
        };
        hy.add = function(a, b) {
          if (!jy[a]) throw Error(a + " is not supported");
          a == ky ? xb("mux.js", "mux.js is no longer used in Shaka Player.") : iy.set(a, function() {
            return b;
          });
        };
        var ky = "muxjs", jy = { Cm: ky, ISOBoxer: "ISOBoxer" };
        hy.Allowed = jy;
        var iy = /* @__PURE__ */ new Map([["ISOBoxer", function() {
          return window2.ISOBoxer;
        }]]);
        function ly() {
          this.j = new qb(function() {
            return ["Oculus", "Quest"].some(function(a) {
              return navigator.userAgent.includes(a.toLowerCase());
            }) ? "VR" : navigator.userAgent.match(/Smart( ?|_)TV/i) || navigator.userAgent.match(/Android ?TV/i) ? "TV" : navigator.userAgentData ? navigator.userAgentData.mobile ? "MOBILE" : "DESKTOP" : /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ? "MOBILE" : navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "android" ? "MOBILE" : "DESKTOP" : navigator.userAgent.includes("Android") ? "MOBILE" : "DESKTOP";
          });
          this.l = new qb(function() {
            return navigator.vendor.includes("Apple") && (navigator.userAgent.includes("Version/") || navigator.userAgent.includes("OS/")) ? "WEBKIT" : navigator.userAgent.includes("Edge/") ? "EDGE" : navigator.userAgent.includes("Chrome/") ? "CHROMIUM" : navigator.userAgent.includes("Firefox/") ? "GECKO" : "UNKNOWN";
          });
        }
        function Mc() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.isTypeSupported ? true : false;
        }
        p = ly.prototype;
        p.fc = function() {
          return !!navigator.mediaCapabilities;
        };
        p.Oa = function() {
          return this.j.value();
        };
        p.Ha = function() {
          return this.l.value();
        };
        p.Ed = function() {
          return false;
        };
        p.eh = function() {
          return false;
        };
        p.df = function() {
          return false;
        };
        p.Ii = function() {
          return false;
        };
        p.oe = function() {
          return false;
        };
        p.fd = function() {
          return true;
        };
        p.Bb = function() {
          var a = window2.ManagedSourceBuffer || window2.SourceBuffer;
          return !!a && !!a.prototype && !!a.prototype.changeType;
        };
        p.re = function() {
          return true;
        };
        p.Ni = function() {
          return 0;
        };
        p.lc = function() {
          return Promise.resolve({ width: Infinity, height: Infinity });
        };
        p.Vi = function() {
          return false;
        };
        p.sh = function() {
          return false;
        };
        p.Wa = function(a) {
          var b = this.Oa();
          if (b === "TV" || b === "CONSOLE" || b === "CAST") a.ads.customPlayheadTracker = true, a.ads.skipPlayDetection = true, a.ads.supportsMultipleMediaElements = false;
          return a;
        };
        p.yh = function() {
          return !!window2.indexedDB;
        };
        p.Gi = function() {
          return [];
        };
        p.sd = function(a) {
          return window2.matchMedia !== void 0 && window2.matchMedia("(color-gamut: p3)").matches ? a ? "HLG" : "PQ" : "SDR";
        };
        p.bj = function() {
          return false;
        };
        p.ui = function() {
          return false;
        };
        p.hh = function() {
          return false;
        };
        p.Kf = function() {
          return true;
        };
        p.wi = function() {
          return false;
        };
        p.aj = function() {
          return true;
        };
        p.ed = function() {
          return false;
        };
        p.Rg = function(a) {
          return a === "com.apple.fps";
        };
        p.Jf = function() {
          return true;
        };
        p.toString = function() {
          return "Device: " + this.Ob() + " v" + this.Ba() + "; Type: " + this.Oa();
        };
        function my() {
          ly.call(this);
          this.g = new qb(function() {
            var a = navigator.userAgent.match(/Version\/(\d+)/);
            return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null;
          });
          this.h = new qb(function() {
            return /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 ? "xr" in navigator ? "APPLE_VR" : "MOBILE" : "xr" in navigator ? "APPLE_VR" : "DESKTOP";
          });
        }
        la(my, ly);
        p = my.prototype;
        p.Ba = function() {
          return this.g.value();
        };
        p.Ob = function() {
          return "Apple Browser";
        };
        p.Oa = function() {
          return this.h.value();
        };
        p.Ha = function() {
          return "WEBKIT";
        };
        p.fc = function() {
          return false;
        };
        p.Ed = function(a, b) {
          return b === "audio";
        };
        p.df = function() {
          return true;
        };
        p.Ii = function(a) {
          return a === "audio";
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          a.abr.minTimeToSwitch = 0.5;
          return a;
        };
        p.bj = function() {
          return true;
        };
        p.Jf = function() {
          return false;
        };
        (navigator.vendor || "").includes("Apple") && (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 || navigator.userAgentData && navigator.userAgentData.platform && navigator.userAgentData.platform.toLowerCase() == "macos" || navigator.platform && navigator.platform.toLowerCase().includes("mac")) && (tb = function() {
          return new my();
        });
        function ny() {
          if (!oy()) throw Error("Not a Chromecast device!");
          ly.call(this);
          this.h = new qb(function() {
            var a = navigator.userAgent.match(/Chrome\/(\d+)/);
            return a ? parseInt(a[1], 10) : null;
          });
          this.g = new qb(function() {
            var a = navigator.userAgentData && navigator.userAgentData.platform || navigator.userAgent;
            a = a.toLowerCase();
            return a.includes("android") ? py : a.includes("fuchsia") ? qy : ry;
          });
        }
        la(ny, ly);
        p = ny.prototype;
        p.Ba = function() {
          return this.h.value();
        };
        p.Ob = function() {
          return "Chromecast with " + this.g.value();
        };
        p.Oa = function() {
          return "CAST";
        };
        p.Ha = function() {
          return "CHROMIUM";
        };
        p.fc = function() {
          return ly.prototype.fc.call(this) && this.g.value() !== ry;
        };
        p.Bb = function() {
          return ly.prototype.Bb.call(this) && this.g.value() !== ry;
        };
        p.Ni = function() {
          switch (this.g.value()) {
            case py:
              return 0;
            case qy:
              return 3;
            default:
              return 1;
          }
        };
        p.lc = function() {
          var a, b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                a = window2.cast && cast.__platform__ && cast.__platform__.canDisplayType;
                b = { width: 1280, height: 720 };
                ra(f, 2);
                if (!(c = a)) {
                  f.A(4);
                  break;
                }
                return F(f, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'), 5);
              case 5:
                c = f.h;
              case 4:
                if (c) {
                  b.width = 3840;
                  b.height = 2160;
                  f.A(6);
                  break;
                }
                if (!(d = a)) {
                  f.A(7);
                  break;
                }
                return F(f, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'), 8);
              case 8:
                d = f.h;
              case 7:
                d && (b.width = 1920, b.height = 1080);
              case 6:
                ta(f, 3);
                break;
              case 2:
                e = Aa(f), Za("Failed to check canDisplayType:", e);
              case 3:
                return f.return(b);
            }
          });
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          a.streaming.stallSkip = 0;
          return a;
        };
        p.yh = function() {
          return false;
        };
        p.ed = function() {
          return true;
        };
        function oy() {
          return navigator.userAgent.includes("CrKey") && !navigator.userAgent.includes("VIZIO SmartCast");
        }
        var py = "Android", qy = "Fuchsia", ry = "Linux";
        oy() && (tb = function() {
          return new ny();
        });
        function sy() {
          ly.call(this);
          var a = this;
          this.i = new qb(function() {
            var b = navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);
            return b ? parseInt(b[2], 10) : null;
          });
          this.g = new qb(function() {
            return navigator.userAgent.match(/Edge?\//) ? "Edge" : navigator.userAgent.includes("Chrome") ? "Chrome" : navigator.userAgent.includes("Firefox") ? "Firefox" : "Unknown";
          });
          this.h = new qb(function() {
            return navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "windows" : navigator.platform ? navigator.platform.toLowerCase().includes("win32") : false;
          });
          this.u = new qb(function() {
            return ly.prototype.Bb.call(a) ? navigator.userAgent.match(/Edge?\//) ? !a.h.value() : true : false;
          });
          this.o = new qb(function() {
            return navigator.userAgent.includes("sony.hbbtv.tv");
          });
          this.m = new qb(function() {
            return navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "android" : navigator.userAgent.includes("Android") ? true : false;
          });
        }
        la(sy, ly);
        p = sy.prototype;
        p.Ba = function() {
          return this.i.value();
        };
        p.Ob = function() {
          return this.g.value();
        };
        p.Ed = function(a) {
          return vg(a) ? this.g.value() === "Edge" && this.h.value() : false;
        };
        p.eh = function() {
          return this.g.value() === "Edge" && this.h.value();
        };
        p.df = function() {
          return this.g.value() === "Edge" && this.h.value();
        };
        p.Bb = function() {
          return this.u.value();
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          if (this.h.value()) switch (this.g.value()) {
            case "Firefox":
              a.drm.keySystemsMapping = { "com.microsoft.playready": "com.microsoft.playready.recommendation" };
              break;
            case "Chrome":
              a.drm.keySystemsMapping = { "com.microsoft.playready": "com.microsoft.playready.recommendation.3000", "com.microsoft.playready.recommendation": "com.microsoft.playready.recommendation.3000" };
          }
          this.m.value() && (a.drm.defaultAudioRobustnessForWidevine = "", a.drm.defaultVideoRobustnessForWidevine = "");
          return a;
        };
        p.hh = function() {
          return this.g.value() === "Edge" || this.o.value();
        };
        p.ed = function() {
          if (this.Ha() === "GECKO") {
            var a = this.Ba();
            return a !== null ? a >= 100 : ly.prototype.ed.call(this);
          }
          return ly.prototype.ed.call(this);
        };
        p.Rg = function(a) {
          return this.Ha() === "GECKO" ? a.startsWith("com.microsoft.playready.recommendation") : ly.prototype.Rg.call(this, a);
        };
        vb = function() {
          return new sy();
        };
        function ty() {
          ly.apply(this, arguments);
        }
        la(ty, ly);
        p = ty.prototype;
        p.Ba = function() {
          return null;
        };
        p.Ob = function() {
          return "Hisense";
        };
        p.Oa = function() {
          return "TV";
        };
        p.fc = function() {
          return false;
        };
        p.lc = function() {
          var a = { width: 1920, height: 1080 }, b = null;
          if (window2.Hisense_Get4KSupportState) try {
            b = window2.Hisense_Get4KSupportState();
          } catch (c) {
          }
          b == null && (b = navigator.userAgent.includes("UHD"));
          b && (a.width = 3840, a.height = 2160);
          return Promise.resolve(a);
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          a.streaming.stallSkip = 0;
          return a;
        };
        if (navigator.userAgent.includes("Hisense") || navigator.userAgent.includes("VIDAA")) tb = function() {
          return new ty();
        };
        function uy() {
          ly.call(this);
          this.g = new qb(function() {
            var a = navigator.userAgent.match(/PlayStation (\d+)/);
            return a ? parseInt(a[1], 10) : null;
          });
        }
        la(uy, ly);
        p = uy.prototype;
        p.Ob = function() {
          return "PlayStation";
        };
        p.Oa = function() {
          return "CONSOLE";
        };
        p.Ha = function() {
          return "WEBKIT";
        };
        p.Ba = function() {
          return this.g.value();
        };
        p.fc = function() {
          return false;
        };
        p.fd = function() {
          return false;
        };
        p.Bb = function() {
          return false;
        };
        p.sh = function() {
          return this.Ba() === 4;
        };
        p.lc = function() {
          var a, b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return a = { width: 1920, height: 1080 }, b = false, ra(f, 2), F(f, window2.msdk.device.getDisplayInfo(), 4);
              case 4:
                c = f.h;
                b = c.resolution === "4K";
                ta(f, 3);
                break;
              case 2:
                return Aa(f), ra(f, 5), F(f, window2.msdk.device.getDisplayInfoImmediate(), 7);
              case 7:
                d = f.h;
                b = d.resolution === "4K";
                ta(f, 3);
                break;
              case 5:
                e = Aa(f), $a("PlayStation: Failed to get the display info:", e);
              case 3:
                return b && (a.width = 3840, a.height = 2160), f.return(a);
            }
          });
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          this.Ba() === 4 && a.drm.preferredKeySystems.push("com.microsoft.playready");
          a.streaming.clearDecodingCache = true;
          return a;
        };
        p.hh = function() {
          return this.Ba() === 4;
        };
        p.Kf = function() {
          return this.Ba() !== 4;
        };
        navigator.userAgent.includes("PlayStation") && (tb = function() {
          return new uy();
        });
        function vy() {
          ly.call(this);
          var a = navigator.userAgent.match(/Tizen (\d+).(\d+)/);
          this.g = a ? parseInt(a[1], 10) : null;
          this.h = a ? parseInt(a[2], 10) : null;
        }
        la(vy, ly);
        p = vy.prototype;
        p.Ba = function() {
          return this.g;
        };
        p.Ob = function() {
          return "Tizen";
        };
        p.Ha = function() {
          return "CHROMIUM";
        };
        p.Oa = function() {
          return "TV";
        };
        p.Ed = function() {
          return true;
        };
        p.oe = function() {
          return this.Ba() === 3;
        };
        p.fc = function() {
          return false;
        };
        p.fd = function() {
          var a = this.Ba();
          return a !== null ? a >= 4 : ly.prototype.fd.call(this);
        };
        p.Bb = function() {
          return false;
        };
        p.re = function() {
          return this.g && this.h ? this.g === 5 ? this.h >= 5 : this.g > 5 : ly.prototype.re.call(this);
        };
        p.lc = function() {
          var a = window2.devicePixelRatio;
          a = { width: window2.screen.width * a > 1920 ? 3840 : 1920, height: window2.screen.height * a > 1080 ? 2160 : 1080 };
          try {
            if (webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution) {
              var b = webapis.systeminfo.getMaxVideoResolution();
              a.width = b.width;
              a.height = b.height;
            } else webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported() ? (a.width = 7680, a.height = 4320) : webapis.productinfo.isUdPanelSupported && webapis.productinfo.isUdPanelSupported() && (a.width = 3840, a.height = 2160);
          } catch (c) {
            $a("Tizen: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          a.drm.ignoreDuplicateInitData = this.Ba() !== 2;
          this.Ba() === 3 && (a.streaming.crossBoundaryStrategy = "reset_to_encrypted");
          a.streaming.shouldFixTimestampOffset = true;
          a.streaming.stallSkip = 0;
          a.streaming.gapPadding = 2;
          return a;
        };
        p.Gi = function() {
          var a = [];
          this.g !== null && this.g < 5 && a.push("opus");
          return a;
        };
        p.sd = function(a) {
          try {
            if (webapis.avinfo.isHdrTvSupport()) return a ? "HLG" : "PQ";
          } catch (b) {
            return ly.prototype.sd.call(this, a);
          }
          return "SDR";
        };
        p.ui = function() {
          return true;
        };
        p.wi = function() {
          return this.Ba() === 3;
        };
        navigator.userAgent.includes("Tizen") && (tb = function() {
          return new vy();
        });
        function wy() {
          ly.apply(this, arguments);
        }
        la(wy, ly);
        wy.prototype.Ba = function() {
          return null;
        };
        wy.prototype.Ob = function() {
          return "Vizio";
        };
        wy.prototype.Oa = function() {
          return "TV";
        };
        wy.prototype.fc = function() {
          return false;
        };
        navigator.userAgent.includes("VIZIO SmartCast") && (tb = function() {
          return new wy();
        });
        function xy() {
          ly.call(this);
          this.i = new qb(function() {
            return navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB");
          });
          this.h = new qb(function() {
            return navigator.userAgent.includes("SOPOpenBrowser");
          });
          this.g = new qb(function() {
            if (navigator.userAgent.includes("DT_STB_BCM")) return 11;
            var a = navigator.userAgent.match(/Version\/(\d+)/);
            return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null;
          });
        }
        la(xy, ly);
        p = xy.prototype;
        p.Ba = function() {
          return this.g.value();
        };
        p.Ob = function() {
          return "WebKit STB";
        };
        p.Oa = function() {
          return "TV";
        };
        p.Ha = function() {
          return "WEBKIT";
        };
        p.fc = function() {
          return false;
        };
        p.fd = function() {
          var a = this.g.value();
          return a !== null ? a >= 15 : true;
        };
        p.Ed = function() {
          return this.h.value();
        };
        p.lc = function() {
          return Promise.resolve({ width: window2.screen.width * window2.devicePixelRatio, height: window2.screen.height * window2.devicePixelRatio });
        };
        p.Kf = function() {
          return !this.i.value();
        };
        p.Jf = function() {
          return false;
        };
        if (navigator.userAgent.includes("SOPOpenBrowser") || navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB") || !(!(navigator.vendor || "").includes("Apple") || /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 || navigator.userAgentData && navigator.userAgentData.platform && navigator.userAgentData.platform.toLowerCase() == "macos" || navigator.platform && navigator.platform.toLowerCase().includes("mac"))) tb = function() {
          return new xy();
        };
        function yy() {
          ly.call(this);
          var a = this;
          this.h = zy();
          this.g = null;
          try {
            var b = new PalmServiceBridge();
            b.onservicecallback = function(c) {
              c = JSON.parse(c);
              a.g = c.configs["tv.model.supportHDR"] || c.configs["tv.config.supportDolbyHDRContents"] || false;
            };
            b.call("luna://com.webos.service.config/getConfigs", JSON.stringify({ configNames: ["tv.model.supportHDR", "tv.config.supportDolbyHDRContents"] }));
          } catch (c) {
            $a("WebOS: getConfigs call failed", c);
          }
        }
        la(yy, ly);
        p = yy.prototype;
        p.Ba = function() {
          return this.h;
        };
        p.Ob = function() {
          return "WebOS";
        };
        p.Oa = function() {
          return "TV";
        };
        p.Ha = function() {
          return "CHROMIUM";
        };
        p.fc = function() {
          return false;
        };
        p.fd = function() {
          var a = this.Ba();
          return a !== null ? a > 3 : ly.prototype.fd.call(this);
        };
        p.Bb = function() {
          return false;
        };
        p.re = function() {
          var a = this.Ba();
          return a !== null ? a > 3 : ly.prototype.re.call(this);
        };
        p.lc = function() {
          var a = { width: 1920, height: 1080 };
          try {
            var b = JSON.parse(window2.PalmSystem.deviceInfo);
            a.width = Math.max(1920, b.screenWidth);
            a.height = Math.max(1080, b.screenHeight);
          } catch (c) {
            $a("WebOS: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          this.Ba() === 3 && (a.streaming.crossBoundaryStrategy = "reset");
          a.streaming.shouldFixTimestampOffset = true;
          a.streaming.stallSkip = 0;
          return a;
        };
        p.sd = function(a) {
          return this.g == null ? ($a("WebOS: getConfigs call haven't finished"), ly.prototype.sd.call(this, a)) : this.g ? a ? "HLG" : "PQ" : "SDR";
        };
        function zy() {
          var a = null, b = navigator.userAgent.match(/Chrome\/(\d+)/);
          b && (a = parseInt(b[1], 10));
          switch (a) {
            case 38:
              return 3;
            case 53:
              return 4;
            case 68:
              return 5;
            case 79:
              return 6;
            case 87:
              return 22;
            case 94:
              return 23;
            case 108:
              return 24;
            case 120:
              return 25;
            default:
              return null;
          }
        }
        p.aj = function() {
          return false;
        };
        p.ed = function() {
          var a = this.Ba();
          return a !== null ? a >= 6 : ly.prototype.ed.call(this);
        };
        if (navigator.userAgent.includes("Web0S")) {
          var Ay = new yy();
          tb = function() {
            return Ay;
          };
        }
        ;
        function By() {
          ly.call(this);
          this.g = navigator.userAgent.includes("Edge/");
          var a = navigator.userAgent.match(/Edge?\/(\d+)/);
          this.h = a ? parseInt(a[1], 10) : null;
        }
        la(By, ly);
        p = By.prototype;
        p.Ba = function() {
          return this.h;
        };
        p.Ob = function() {
          return "Xbox";
        };
        p.Oa = function() {
          return "CONSOLE";
        };
        p.Ha = function() {
          return this.g ? "EDGE" : "CHROMIUM";
        };
        p.Ed = function() {
          return true;
        };
        p.eh = function() {
          return true;
        };
        p.df = function() {
          return true;
        };
        p.Vi = function() {
          return this.g;
        };
        p.lc = function() {
          var a = { width: 1920, height: 1080 }, b = Cy();
          if (b) try {
            var c = new b.Media.Protection.ProtectionCapabilities(), d = b.Media.Protection.ProtectionCapabilityResult;
            b = null;
            do
              b = c.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"', "com.microsoft.playready.recommendation");
            while (b === d.maybe);
            b === d.probably && (a.width = 3840, a.height = 2160);
          } catch (e) {
            $a("Xbox: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.Wa = function(a) {
          ly.prototype.Wa.call(this, a);
          a.drm.parseInbandPsshEnabled = this.g;
          a.drm.preferredKeySystems.push("com.microsoft.playready");
          this.g && (a.streaming.gapPadding = 0.01);
          return a;
        };
        p.yh = function() {
          return false;
        };
        function Cy() {
          var a = null;
          try {
            a = typeof Windows !== "undefined" ? Windows : chrome.webview.hostObjects.sync.Windows;
          } catch (b) {
          }
          return a;
        }
        if (navigator.userAgent.includes("Xbox One") || Cy() !== null) tb = function() {
          return new By();
        };
        function Dy(a, b, c) {
          this.type = a;
          this.ea = b;
          this.segments = c || null;
        }
        function Ey(a, b, c, d) {
          this.id = a;
          this.name = b;
          this.attributes = c;
          this.value = d === void 0 ? null : d;
        }
        Ey.prototype.toString = function(a) {
          function b(e) {
            return e.name + "=" + (isNaN(Number(e.value)) ? '"' + e.value + '"' : e.value);
          }
          var c = "#" + this.name, d = this.attributes ? this.attributes.filter(function(e) {
            return a ? !a.has(e.name) : true;
          }).map(b) : [];
          this.value && d.unshift(this.value);
          d.length > 0 && (c += ":" + d.join(","));
          return c;
        };
        function Fy(a, b) {
          if (b) return a.toString();
          b = (/* @__PURE__ */ new Set()).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");
          return a.toString(b);
        }
        function Gy(a, b) {
          a = a.attributes.filter(function(c) {
            return c.name == b;
          });
          return a.length ? a[0] : null;
        }
        function Hy(a, b, c) {
          return (a = Gy(a, b)) ? a.value : c || null;
        }
        function Iy(a, b) {
          a = Gy(a, b);
          if (!a) throw new U(2, 4, 4023, b);
          return a.value;
        }
        function Jy(a, b, c) {
          c = c === void 0 ? [] : c;
          this.ea = b;
          this.g = a;
          this.wc = c;
        }
        function Ky(a, b) {
          this.name = a;
          this.value = b;
        }
        ;
        function Ly(a, b) {
          return a.filter(function(c) {
            return c.name == b;
          });
        }
        function My(a, b) {
          return a.filter(function(c) {
            return Iy(c, "TYPE") == b;
          });
        }
        function Ny(a, b) {
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.name === b) return c;
          return null;
        }
        function Oy(a, b, c) {
          c = c === void 0 ? 0 : c;
          return (a = Ny(a, b)) ? Number(a.value) : c;
        }
        function Py(a, b, c) {
          return b ? Qy(a, [b], c) : [];
        }
        function Qy(a, b, c) {
          if (!b.length) return [];
          var d = b;
          c && c.size && (d = b.map(function(e) {
            return Ry(e, c);
          }));
          return uc(a, d);
        }
        function Ry(a, b) {
          if (!b || !b.size) return a;
          a = String(a).replace(/%7B/g, "{").replace(/%7D/g, "}");
          var c = a.match(/{\$\w*}/g);
          if (c) {
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = d.slice(2, d.length - 1), f = b.get(e);
              if (f) a = a.replace(d, f);
              else throw new U(2, 4, 4039, e);
            }
          }
          return a;
        }
        ;
        function Sy() {
          this.g = 0;
        }
        function Ty(a, b) {
          b = cc(b);
          b = b.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim();
          var c = b.split(/\n+/m);
          if (!Uy.test(c[0])) throw new U(2, 4, 4015);
          b = 0;
          for (var d = false, e = [], f = true, g = 0; g < c.length; g++) {
            var h = c[g], k2 = c[g + 1];
            if (h.startsWith("#") && !h.startsWith("#EXT") || f) f = false;
            else {
              h = Vy(a, h);
              d || (Wy.has(h.name) ? (b = 1, d = true) : h.name == "EXT-X-STREAM-INF" || h.name == "EXT-X-MEDIA" ? d = true : Xy.has(h.name) && (b = 1, d = true));
              if (Xy.has(h.name)) {
                if (b != 1) throw new U(2, 4, 4017);
                f = a;
                a = Array(Math.max(100, Math.floor((c.length - g) / 2)));
                d = 0;
                h = [];
                var l = [];
                for (k2 = null; g < c.length; g++) {
                  var m = c[g];
                  if (m.startsWith("#EXT")) m = Vy(f, m), Wy.has(m.name) ? e.push(m) : m.name == "EXT-X-MAP" ? k2 = m : m.name == "EXT-X-PART" ? l.push(m) : m.name == "EXT-X-PRELOAD-HINT" ? Hy(m, "TYPE") == "PART" ? l.push(m) : Hy(m, "TYPE") == "MAP" && (m.name = "EXT-X-MAP", k2 = m) : h.push(m);
                  else if (!m.startsWith("#") || m.startsWith("#EXT")) m = m.trim(), k2 && h.push(k2), h = new Jy(m, h, l), d < a.length ? a[d++] = h : (a.push(h), d++), h = [], l = [];
                }
                l.length && (k2 && h.push(k2), c = new Jy("", h, l), d < a.length ? a[d++] = c : (a.push(c), d++));
                return new Dy(b, e, d < a.length ? a.slice(0, d) : a);
              }
              e.push(h);
              h.name == "EXT-X-STREAM-INF" && (h.attributes.push(new Ky("URI", k2)), f = true);
            }
          }
          return new Dy(b, e);
        }
        function Vy(a, b) {
          a = a.g++;
          var c = b.match(Yy);
          if (!c) throw new U(2, 4, 4016, b);
          b = c[1];
          var d = c[2];
          c = [];
          var e;
          if (d) {
            d = new ad(d);
            var f;
            Zy.lastIndex = 0;
            (f = cd(d, Zy)) && (e = f[1]);
            $y.lastIndex = 0;
            for (f = cd(d, $y); f; ) c.push(new Ky(f[1], f[2] || f[3])), bd(d), f = cd(d, $y);
          }
          return new Ey(a, b, c, e);
        }
        var Yy = /^#(EXT[^:]*)(?::(.*))?$/, Uy = /^#EXTM3U($|[ \t\n])/m, Zy = /^([^,=]+)(?:,|$)/g, $y = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g, Wy = new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")), Xy = new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));
        function az() {
        }
        function bz(a, b) {
          try {
            var c = cz(a);
            return Gg({ uri: a, originalUri: a, data: c.data, headers: { "content-type": c.contentType }, originalRequest: b });
          } catch (d) {
            return Eg(d);
          }
        }
        function cz(a) {
          var b = a.split(":");
          if (b.length < 2 || b[0] != "data") throw new U(2, 1, 1004, a);
          b = b.slice(1).join(":").split(",");
          if (b.length < 2) throw new U(2, 1, 1004, a);
          var c = b[0];
          a = window2.decodeURIComponent(b.slice(1).join(","));
          b = c.split(";");
          c = b[0];
          var d = false;
          b.length > 1 && b[b.length - 1] == "base64" && (d = true, b.pop());
          var e;
          d ? e = oc(a) : e = hc(a);
          return { data: e, contentType: c };
        }
        S("shaka.net.DataUriPlugin", az);
        az.parse = bz;
        Qg("data", bz);
        function dz() {
          var a = this;
          this.g = this.h = null;
          this.G = 1;
          this.B = /* @__PURE__ */ new Map();
          this.M = /* @__PURE__ */ new Map();
          this.C = /* @__PURE__ */ new Map();
          this.C.set("video", /* @__PURE__ */ new Map());
          this.C.set("audio", /* @__PURE__ */ new Map());
          this.C.set(Ac, /* @__PURE__ */ new Map());
          this.C.set("image", /* @__PURE__ */ new Map());
          this.dc = (/* @__PURE__ */ new Map()).set("com.apple.streamingkeydelivery", function(b, c, d) {
            return ez(a, b, c, d);
          }).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function(b) {
            var c = Iy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              var e = Iy(b, "URI");
              c = cz(e.split("?")[0]);
              e = e.split("?")[0];
              a.I.has(e) || (c = Vb(c.data), a.I.set(e, c));
              d = vc("com.widevine.alpha", d, [{ initDataType: "cenc", initData: a.I.get(e) }]);
              (b = Hy(b, "KEYID")) && d.keyIds.add(b.toLowerCase().substr(2));
              b = Promise.resolve(d);
            } else b = Promise.resolve(null);
            return b;
          }).set("com.microsoft.playready", function(b) {
            var c = Iy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              b = Iy(b, "URI");
              b = cz(b.split("?")[0]);
              b = Vb(b.data);
              c = new Uint8Array([
                154,
                4,
                240,
                121,
                152,
                64,
                66,
                134,
                171,
                146,
                230,
                91,
                224,
                136,
                95,
                149
              ]);
              c = xh(b, c, /* @__PURE__ */ new Set(), 0);
              d = vc("com.microsoft.playready", d, [{ initDataType: "cenc", initData: c }]);
              if (b = pd(["<PLAYREADY>", nc(b), "</PLAYREADY>"].join("\n"))) d.licenseServerUri = uv(b);
              d = Promise.resolve(d);
            } else d = Promise.resolve(null);
            return d;
          }).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function(b) {
            var c = Iy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              var e = Iy(b, "URI");
              c = cz(e.split("?")[0]);
              e = e.split("?")[0];
              a.I.has(e) || (c = Vb(c.data), a.I.set(e, c));
              d = vc("com.huawei.wiseplay", d, [{ initDataType: "cenc", initData: a.I.get(e) }]);
              (b = Hy(b, "KEYID")) && d.keyIds.add(b.toLowerCase().substr(2));
              b = Promise.resolve(d);
            } else b = Promise.resolve(null);
            return b;
          });
          this.ob = /* @__PURE__ */ new Set();
          this.i = /* @__PURE__ */ new Map();
          this.l = null;
          this.H = "";
          this.ab = new Sy();
          this.N = -1;
          this.ma = Infinity;
          this.aa = this.zc = this.kb = false;
          this.F = new gf(function() {
            if (a.X && !a.g.continueLoadingWhenPaused && (a.V.Ma(a.X, "timeupdate"), a.X.paused)) {
              a.V.za(a.X, "timeupdate", function() {
                return fz(a);
              });
              return;
            }
            fz(a);
          });
          this.Fa = gz;
          this.m = null;
          this.eb = 0;
          this.o = Infinity;
          this.Ua = this.Ta = this.T = 0;
          this.$ = new Ng();
          this.J = /* @__PURE__ */ new Map();
          this.K = /* @__PURE__ */ new Map();
          this.Da = /* @__PURE__ */ new Map();
          this.va = /* @__PURE__ */ new Map();
          this.O = /* @__PURE__ */ new Map();
          this.xa = /* @__PURE__ */ new Map();
          this.ya = /* @__PURE__ */ new Map();
          this.yc = this.oa = false;
          this.ac = new Va(5);
          this.j = null;
          this.R = true;
          this.V = new kb();
          this.u = this.X = null;
          this.cc = function() {
            return false;
          };
          this.I = /* @__PURE__ */ new Map();
        }
        p = dz.prototype;
        p.configure = function(a, b) {
          var c = this.h && a.updatePeriod != this.g.updatePeriod && a.updatePeriod >= 0;
          this.g = a;
          b && (this.cc = b);
          this.j && this.j.configure(this.g);
          c && this.m && this.m.presentationTimeline.W() && this.F.Kb();
        };
        p.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            return e.g == 1 ? (c.h = b, c.oa = b.isLowLatencyMode(), F(e, hz(c, [a]).promise, 2)) : e.g != 3 ? (d = e.h, c.H = d.uri, F(e, iz(c, d.data), 3)) : e.return(c.m);
          });
        };
        p.stop = function() {
          this.F && (this.F.stop(), this.F = null);
          var a = [];
          this.$ && (a.push(this.$.destroy()), this.$ = null);
          this.g = this.h = null;
          this.ob.clear();
          this.m = null;
          this.i.clear();
          this.M.clear();
          this.K.clear();
          this.B.clear();
          this.Da.clear();
          this.va.clear();
          this.O.clear();
          this.xa.clear();
          this.ya.clear();
          this.I.clear();
          this.j && this.j.destroy();
          this.V && (this.V.release(), this.V = null);
          return Promise.all(a);
        };
        p.update = function() {
          var a = this, b, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) {
              if (!jz(a)) return n.return();
              b = [];
              c = Array.from(a.i.values());
              a.o = Infinity;
              a.m.gapCount = 0;
              d = c.filter(function(q) {
                return !q.stream.isAudioMuxedInVideo && q.stream.segmentIndex;
              });
              e = t(d);
              for (f = e.next(); !f.done; f = e.next()) g = f.value, b.push(kz(a, g));
              return F(n, Promise.all(b), 2);
            }
            lz(a, d.map(function(q) {
              return q.stream;
            }));
            h = d.some(function(q) {
              return q.Yd == 0;
            });
            d.length && !h && (mz(a, gz), nz(a));
            h && nz(a);
            k2 = t(d);
            for (l = k2.next(); !l.done; l = k2.next()) m = l.value, m.stream.isAudioMuxedInVideo || !m.stream.segmentIndex || Xf(m.stream.segmentIndex) || a.h.disableStream(m.stream);
            G(n);
          });
        };
        function oz(a, b) {
          return jz(a) ? a.C.get(b.type) : b.mf;
        }
        function kz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua;
          return Q(function(Ea) {
            switch (Ea.g) {
              case 1:
                if (b.stream.isAudioMuxedInVideo) return Ea.return();
                c = [];
                d = t(b.P());
                for (e = d.next(); !e.done; e = d.next()) f = e.value, g = new Cb(f), h = g.g, b.Re && (b.Rb >= 0 && h.add("_HLS_msn", String(b.Rb)), b.Sb >= 0 && h.add("_HLS_part", String(b.Sb))), b.Se && h.add("_HLS_skip", "YES"), Rb(h) && Gb(g, Hb(h.toString())), c.push(g.toString());
                ra(Ea, 2);
                return F(Ea, hz(a, c, true).promise, 4);
              case 4:
                k2 = Ea.h;
                ta(
                  Ea,
                  3
                );
                break;
              case 2:
                throw l = Aa(Ea), a.h && a.h.disableStream(b.stream), l;
              case 3:
                if (!b.stream.segmentIndex) return Ea.return();
                m = Ty(a.ab, k2.data);
                if (m.type != 1) throw new U(2, 4, 4017);
                n = k2.uri;
                n == k2.originalUri || b.P().includes(n) || b.Af.push(n);
                q = Ly(m.ea, "EXT-X-DEFINE");
                r = pz(a, q, n);
                u = b.stream;
                v = oz(a, b);
                return F(Ea, qz(a, m, u.mimeType, b.P, r), 5);
              case 5:
                w = Ea.h;
                z = w.keyIds;
                y = w.drmInfos;
                B = w.encrypted;
                C = w.Mh;
                u.encrypted || !B || C || (u.encrypted = true);
                H = function(ya, va) {
                  return ya.size === va.size && [].concat(x(ya)).every(function(xa) {
                    return va.has(xa);
                  });
                };
                H(u.keyIds, z) || (u.keyIds = z, u.drmInfos = y, a.h.newDrmInfo(u));
                D = rz(a, m, v, r, b.P, b.type);
                A = D.segments;
                if (E = D.bandwidth) u.bandwidth = E;
                J = am(u);
                I = t(A);
                for (K = I.next(); !K.done; K = I.next()) L = K.value, L.ba && (L.ba.xd = J);
                u.segmentIndex.fe(A, a.l.Ib());
                A.length && (O = Oy(m.ea, "EXT-X-MEDIA-SEQUENCE", 0), N = (P = Ny(m.ea, "EXT-X-SKIP")) ? Number(Hy(P, "SKIPPED-SEGMENTS")) : 0, M = sz(O, A), R = M.Rb, T = M.Sb, b.Rb = R + N, b.Sb = T, ma = v.get(O), u.segmentIndex.Ya(ma));
                if (W = Xf(u.segmentIndex)) b.Wc = W.startTime, Ia = A[A.length - 1], b.Mc = Ia.endTime;
                if (ua = Ny(
                  m.ea,
                  "EXT-X-ENDLIST"
                )) b.Yd = true;
                tz(a, m);
                uz(a, m.ea, u.type, r, b.P);
                G(Ea);
            }
          });
        }
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function(a) {
          this.j && this.j.banLocation(a);
        };
        p.setMediaElement = function(a) {
          this.X = a;
        };
        function vz(a, b, c) {
          c = c === void 0 ? false : c;
          for (var d = a.N == -1, e = t(b), f = e.next(); !f.done; f = e.next()) {
            f = f.value;
            var g = f.stream.segmentIndex, h = oz(a, f);
            if (g = Xf(g)) {
              h = t(h);
              for (var k2 = h.next(); !k2.done; k2 = h.next()) {
                k2 = t(k2.value);
                var l = k2.next().value;
                if (k2.next().value == g.startTime) {
                  d && (a.N = Math.max(a.N, l));
                  f.og = l;
                  break;
                }
              }
            }
          }
          if (!(a.N < 0)) {
            for (b = t(b), d = b.next(); !d.done; d = b.next()) if (d = d.value, wz(a, d.type) || c) {
              if (e = d.stream.segmentIndex) {
                if (f = a.N - d.og, f > 0 && (e.g.splice(0, f), e = Xf(e))) e = -e.startTime, d.stream.segmentIndex.offset(e), xz(a, d, e);
              }
            }
          }
        }
        function yz(a, b) {
          if (a.ma == Infinity) {
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = Xf(c.value.stream.segmentIndex), c != null && c.h != null && (a.ma = Math.min(a.ma, c.h));
          }
          b = a.ma;
          if (b != Infinity) {
            c = t(a.i.values());
            for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, !wz(a, d.type)) {
              var e = d.stream.segmentIndex;
              if (e != null) {
                var f = Xf(e);
                if (f) if (f.h == null) Za("Missing EXT-X-PROGRAM-DATE-TIME for stream", d.P(), "Expect AV sync issues!");
                else for (xz(a, d, f.h - b - f.startTime), d = t(e), e = d.next(); !e.done; e = d.next()) e.value.Ah(b);
              }
            }
          }
        }
        function xz(a, b, c) {
          if (!(Math.abs(c) < 1e-3)) {
            b.Wc += c;
            b.Mc += c;
            a = oz(a, b);
            for (var d = t(a), e = d.next(); !e.done; e = d.next()) {
              var f = t(e.value);
              e = f.next().value;
              f = f.next().value;
              a.set(e, f + c);
            }
            b.P();
          }
        }
        function iz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya, va, xa, Ga, Ca;
          return Q(function(wa) {
            switch (wa.g) {
              case 1:
                c = Cc;
                d = Ty(a.ab, b);
                e = Ly(d.ea, "EXT-X-DEFINE");
                f = [];
                g = [];
                h = [];
                a.l = new nl(null, 0);
                a.l.cd(true);
                k2 = function() {
                  return [a.H];
                };
                l = null;
                m = /* @__PURE__ */ new Map();
                if (d.type == 1) return a.R = false, R = Ly(d.ea, "EXT-X-DEFINE"), m = pz(a, R, a.H), l = c.Aa, T = "", ma = /* @__PURE__ */ new Map(), F(wa, zz(a, a.G++, m, d, k2, "", l, T, true, "Media Playlist", null, ma, null, false, null, false), 7);
                Az(a, e);
                n = Ly(d.ea, "EXT-X-MEDIA");
                q = Ly(d.ea, "EXT-X-STREAM-INF");
                r = Ly(d.ea, "EXT-X-IMAGE-STREAM-INF");
                u = Ly(d.ea, "EXT-X-I-FRAME-STREAM-INF");
                v = Ly(d.ea, "EXT-X-SESSION-KEY");
                w = Ly(d.ea, "EXT-X-SESSION-DATA");
                z = Ly(d.ea, "EXT-X-CONTENT-STEERING");
                Bz(a, w);
                return F(wa, Cz(a, z), 4);
              case 4:
                if (!a.g.ignoreSupplementalCodecs) {
                  y = [];
                  B = t(q);
                  C = B.next();
                  for (H = {}; !C.done; H = { Zi: void 0 }, C = B.next()) if (D = C.value, A = Hy(D, "SUPPLEMENTAL-CODECS")) H.Zi = A.split(/\s*,\s*/).map(function(za) {
                    return za.split("/")[0];
                  }), E = D.attributes.map(/* @__PURE__ */ (function(za) {
                    return function(ub) {
                      var pb = ub.name, pc = ub.value;
                      pb == "CODECS" && (pc = za.Zi.join(","), ub = ub.value.split(","), ub.length > 1 && (ub = yc("audio", ub)) && (pc += "," + ub));
                      return new Ky(pb, pc);
                    };
                  })(H)), y.push(new Ey(D.id, D.name, E, null));
                  q.push.apply(q, x(y));
                  J = [];
                  I = t(u);
                  K = I.next();
                  for (L = {}; !K.done; L = { $i: void 0 }, K = I.next()) if (O = K.value, P = Hy(O, "SUPPLEMENTAL-CODECS")) L.$i = P.split(/\s*,\s*/).map(function(za) {
                    return za.split("/")[0];
                  }), N = O.attributes.map(/* @__PURE__ */ (function(za) {
                    return function(ub) {
                      var pb = ub.name;
                      ub = ub.value;
                      pb == "CODECS" && (ub = za.$i.join(","));
                      return new Ky(pb, ub);
                    };
                  })(L)), J.push(new Ey(
                    O.id,
                    O.name,
                    N,
                    null
                  ));
                  u.push.apply(u, x(J));
                }
                Dz(a, q);
                Ez(a, n);
                M = Fz(a, u);
                return F(wa, Gz(a, q, v, n, k2, a.B, M), 5);
              case 5:
                return f = wa.h, g = Hz(a, n), F(wa, Iz(a, r, u), 6);
              case 6:
                h = wa.h;
                wa.A(3);
                break;
              case 7:
                W = wa.h, a.i.set(a.H, W), W.stream && (Ia = am(W.stream), W.stream.segmentIndex.Gb(function(za) {
                  za.ba && (za.ba.xd = Ia);
                })), l = W.stream.type, ua = true, a.g.disableAudio && W.type == "audio" ? ua = false : a.g.disableVideo && W.type == "video" && !W.stream.codecs.includes(",") && (ua = false), ua && f.push({ id: 0, language: of(T || "und"), disabledUntilTime: 0, primary: true, audio: W.type == "audio" ? W.stream : null, video: W.type == "video" ? W.stream : null, bandwidth: W.stream.bandwidth || 0, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] });
              case 3:
                if (!a.h) throw new U(2, 7, 7001);
                Jz(a, d);
                d.type == 1 && (jz(a) && (Kz(a, d), Ea = a.o, a.F.ia(Ea)), ya = Array.from(a.i.values()), Lz(a, ya), nz(a), uz(a, d.ea, l, m, k2));
                a.m = {
                  presentationTimeline: a.l,
                  variants: f,
                  textStreams: g,
                  imageStreams: h,
                  offlineSessionIds: [],
                  sequenceMode: a.g.hls.sequenceMode,
                  ignoreManifestTimestampsInSegmentsMode: a.g.hls.ignoreManifestTimestampsInSegmentsMode,
                  type: "HLS",
                  serviceDescription: null,
                  nextUrl: null,
                  periodCount: 1,
                  gapCount: 0,
                  isLowLatency: false,
                  startTime: a.u
                };
                if (a.aa || !a.g.hls.disableCodecGuessing) {
                  wa.A(8);
                  break;
                }
                va = [];
                xa = t(a.m.variants);
                for (Ga = xa.next(); !Ga.done; Ga = xa.next()) Ca = Ga.value, Ca.audio && Ca.audio.codecs === "" && va.push(Ca.audio.createSegmentIndex()), Ca.video && Ca.video.codecs === "" && va.push(Ca.video.createSegmentIndex());
                return F(wa, Promise.all(va), 8);
              case 8:
                a.h.makeTextStreamsForClosedCaptions(a.m), G(wa);
            }
          });
        }
        function Mz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z;
          return Q(function(y) {
            if (y.g == 1) {
              c = qm(a.g.hls.mediaPlaylistFullMimeType);
              if (!b.length) return y.return(c);
              d = Nz(a, b);
              e = d.segment;
              f = d.segmentIndex;
              g = e.P();
              if (h = Qo(g[0])) {
                if (k2 = Oz.get(h)) return y.return(qm(k2));
              }
              return F(y, Promise.all([Pz(a, e.ba, 0), Pz(a, e, f)]), 2);
            }
            l = y.h;
            m = l[1].mimeType;
            n = l[0].data;
            q = l[1].data;
            r = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ");
            u = ["audio/mp4", "video/mp4", "video/iso.segment"];
            v = e.ba || u.includes(m);
            if (!v && lk(Vb(q))) {
              var B = q, C = a.g.disableAudio, H = a.g.disableVideo, D = a.g.disableText;
              var A = Vb(B);
              var E = new dk().parse(A), J = E.Vd();
              A = E.Jg();
              var I = [], K = false, L = false;
              if (!C) switch (J.audio) {
                case "aac":
                case "aac-loas":
                  E.ub().length && (I.push("mp4a.40.2"), K = true);
                  break;
                case "mp3":
                  E.ub().length && (I.push("mp4a.40.34"), K = true);
                  break;
                case "ac3":
                  E.ub().length && (I.push("ac-3"), K = true);
                  break;
                case "ec3":
                  E.ub().length && (I.push("ec-3"), K = true);
                  break;
                case "opus":
                  E.ub().length && (I.push("opus"), K = true);
              }
              if (!H) switch (J.video) {
                case "avc":
                  A.codec ? I.push(A.codec) : I.push("avc1.42E01E");
                  L = true;
                  break;
                case "hvc":
                  A.codec ? I.push(A.codec) : I.push("hvc1.1.6.L93.90");
                  L = true;
                  break;
                case "av1":
                  I.push("av01.0.01M.08"), L = true;
              }
              if (I.length) {
                C = K && !L;
                H = /* @__PURE__ */ new Map();
                if (L && !D) {
                  D = new Sc("video/mp2t");
                  D.xf(B);
                  B = t(D.Vf());
                  for (L = B.next(); !L.done; L = B.next()) L = L.value, H.set(L, L);
                  D.Nd();
                }
                A = { type: C ? "audio" : "video", mimeType: "video/mp2t", codecs: I.join(", "), language: null, height: A.height, width: A.width, channelCount: null, sampleRate: null, closedCaptions: H, ve: null, colorGamut: null, frameRate: A.frameRate };
              } else A = null;
              if (w = A) return y.return(w);
            } else if (v || r.includes(h)) {
              if (z = rm(n, q, a.g.disableText)) return y.return(z);
            }
            return m ? y.return(qm(m)) : y.return(c);
          });
        }
        function Pz(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (!b) return l.return({ mimeType: null, data: null });
                d = $g;
                e = wm(b.P(), b.Jc(), b.Hc(), a.g.retryParameters);
                f = b instanceof qj ? 1 : 0;
                return F(l, Qz(a, e, d, { type: f }).promise, 2);
              case 2:
                g = l.h;
                h = g.data;
                if (!b.aesKey) {
                  l.A(3);
                  break;
                }
                return F(l, vm(h, b.aesKey, c), 4);
              case 4:
                h = l.h;
              case 3:
                return b instanceof qj ? b.pe(h, true) : b.pe(h), (k2 = g.headers["content-type"]) && (k2 = k2.split(";")[0].toLowerCase()), l.return({ mimeType: k2, data: h });
            }
          });
        }
        function nz(a) {
          if (jz(a)) {
            if (a.Fa == Rz) {
              for (var b = Infinity, c = Infinity, d = t(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.stream.segmentIndex && e.stream.type != "text" && !e.stream.isAudioMuxedInVideo && (b = Math.min(b, e.Mc), c = Math.min(c, e.Wc));
              b = b - c || 0;
              isNaN(a.g.availabilityWindowOverride) || (b = a.g.availabilityWindowOverride);
              a.l.Hf(b);
            }
          } else a.l.Ab(Sz(a));
          if (!a.l.o) for (b = t(a.i.values()), c = b.next(); !c.done; c = b.next()) c = c.value, !c.stream.segmentIndex || c.type != "audio" && c.type != "video" || (c = Xf(c.stream.segmentIndex)) && c.h && a.l.ph(c.h);
          a.l.lf();
        }
        function Az(a, b) {
          var c = new Cb(a.H).g;
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) {
            var e = d.value;
            d = Hy(e, "NAME");
            var f = Hy(e, "VALUE");
            e = Hy(e, "QUERYPARAM");
            d && f && (a.B.has(d) || a.B.set(d, f));
            e && (d = c.get(e)[0]) && !a.B.has(d) && a.B.set(e, d);
          }
        }
        function pz(a, b, c) {
          c = new Cb(c).g;
          var d = /* @__PURE__ */ new Map();
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            var f = e.value, g = Hy(f, "NAME"), h = Hy(f, "VALUE");
            e = Hy(f, "QUERYPARAM");
            f = Hy(f, "IMPORT");
            g && h && (d.has(g) || d.set(g, h));
            e && (g = c.get(e)[0]) && !d.has(g) && d.set(e, g);
            f && (e = a.B.get(f)) && d.set(f, e);
          }
          return d;
        }
        function Dz(a, b) {
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Hy(d, "AUDIO");
            c = Hy(d, "VIDEO");
            var f = Hy(d, "SUBTITLES");
            d = Tz(a, d);
            if (f) {
              var g = yc(Ac, d);
              a.K.set(f, g);
              gb(d, g);
            }
            e && (f = yc("audio", d), f || (f = a.g.hls.defaultAudioCodec), a.K.set(e, f));
            c && (e = yc("video", d), e || (e = a.g.hls.defaultVideoCodec), a.K.set(c, e));
          }
        }
        function Bz(a, b) {
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Hy(d, "DATA-ID");
            c = Hy(d, "URI");
            var f = Hy(d, "LANGUAGE");
            d = Hy(d, "VALUE");
            e = (/* @__PURE__ */ new Map()).set("id", e);
            c && e.set("uri", Py([a.H], c, a.B)[0]);
            f && e.set("language", f);
            d && e.set("value", d);
            c = new V("sessiondata", e);
            if (a.h) a.h.onEvent(c);
          }
        }
        function Cz(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (!a.h || !a.g) return k2.return();
            d = t(b);
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, g = Hy(f, "PATHWAY-ID"), h = Hy(f, "SERVER-URI"), g && h) {
              a.j = new sw(a.h);
              a.j.configure(a.g);
              a.j.i = [a.H];
              a.j.setManifestType("HLS");
              a.j.h = g;
              c = tw(a.j, h);
              break;
            }
            return F(k2, c, 0);
          });
        }
        function Hz(a, b) {
          var c = My(b, "SUBTITLES");
          b = c.map(function(g) {
            if (a.g.disableText) return null;
            try {
              return Uz(a, [g], /* @__PURE__ */ new Map()).stream;
            } catch (h) {
              if (a.g.hls.ignoreTextStreamFailures) return null;
              throw h;
            }
          });
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            var e = Iy(d.value, "GROUP-ID");
            if (d = a.K.get(e)) {
              if (e = a.M.get(e)) {
                e = t(e);
                for (var f = e.next(); !f.done; f = e.next()) f = f.value, f.stream.codecs = d, f.stream.mimeType = Vz(Ac, d) || Wz(Ac), Xz(f.stream);
              }
            }
          }
          return b.filter(function(g) {
            return g;
          });
        }
        function Xz(a) {
          var b = /* @__PURE__ */ new Set([Ie(a.mimeType, a.codecs)]);
          a.segmentIndex && a.segmentIndex.Gb(function(c) {
            c.mimeType && b.add(Ie(c.mimeType, a.codecs));
          });
          a.fullMimeTypes = b;
        }
        function Iz(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (f.g == 1) return d = b.map(function(g) {
              var h, k2, l;
              return Q(function(m) {
                if (m.g == 1) {
                  if (h = a.g.disableThumbnails) return m.return(null);
                  ra(m, 2);
                  return F(m, Yz(a, g), 4);
                }
                if (m.g != 2) return k2 = m.h, m.return(k2.stream);
                l = Aa(m);
                if (a.g.hls.ignoreImageStreamFailures) return m.return(null);
                throw l;
              });
            }).concat(c.map(function(g) {
              if (a.g.disableThumbnails) return null;
              try {
                var h = Zz(a, g);
                return h.stream.type !== "image" ? null : h.stream;
              } catch (k2) {
                if (a.g.hls.ignoreImageStreamFailures) return null;
                throw k2;
              }
            })), F(f, Promise.all(d), 2);
            e = f.h;
            return f.return(e.filter(function(g) {
              return g;
            }));
          });
        }
        function $z(a, b, c) {
          b = b.filter(function(h) {
            var k2 = Hy(h, "URI") || "";
            h = Hy(h, "TYPE");
            return h != "SUBTITLES" && (k2 != "" || h == "AUDIO");
          });
          var d = {};
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = Fy(e, !a.j);
            d[f] ? d[f].push(e) : d[f] = [e];
          }
          for (var g in d) Uz(a, d[g], c, false);
        }
        function Fz(a, b) {
          return b.map(function(c) {
            c = Zz(a, c);
            return c.stream.type !== "video" ? null : c.stream;
          }).filter(function(c) {
            return c;
          });
        }
        function Gz(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya, va, xa;
          return Q(function(Ga) {
            switch (Ga.g) {
              case 1:
                h = [];
                k2 = /* @__PURE__ */ new Set();
                if (a.g.ignoreDrmInfo || !(c.length > 0)) {
                  Ga.A(2);
                  break;
                }
                l = t(c);
                m = l.next();
              case 3:
                if (m.done) {
                  Ga.A(2);
                  break;
                }
                n = m.value;
                q = Iy(n, "METHOD");
                r = Hy(n, "KEYFORMAT") || "identity";
                u = null;
                if (q == "NONE") {
                  Ga.A(4);
                  break;
                }
                if (aA(q)) {
                  v = Py(e(), Iy(n, "URI"), f);
                  w = v.sort().join("");
                  a.O.has(w) || (z = Ug(v, a.g.retryParameters), y = Qz(a, z, 6).promise, a.O.set(w, y));
                  Ga.A(4);
                  break;
                }
                if (r == "identity") return F(Ga, bA(a, n, "", e, null, f), 12);
                B = a.dc.get(r);
                if (!B) {
                  C = null;
                  Ga.A(10);
                  break;
                }
                return F(Ga, B(n, "", null), 11);
              case 11:
                C = Ga.h;
              case 10:
                u = C;
                Ga.A(6);
                break;
              case 12:
                u = Ga.h;
              case 6:
                if (u) {
                  if (u.keyIds) for (H = t(u.keyIds), D = H.next(); !D.done; D = H.next()) A = D.value, k2.add(A);
                  h.push(u);
                }
              case 4:
                m = l.next();
                Ga.A(3);
                break;
              case 2:
                E = {};
                J = t(b);
                for (I = J.next(); !I.done; I = J.next()) K = I.value, L = Fy(K, !a.j), E[L] ? E[L].push(K) : E[L] = [K];
                O = [];
                for (P in E) N = E[P], M = N[0], R = Hy(M, "FRAME-RATE"), T = Number(Iy(M, "BANDWIDTH")) || Number(Hy(
                  M,
                  "AVERAGE-BANDWIDTH"
                )), ma = Hy(M, "RESOLUTION"), W = t(ma ? ma.split("x") : [null, null]), Ia = W.next().value, ua = W.next().value, Ea = Hy(M, "VIDEO-RANGE"), (ya = Hy(M, "REQ-VIDEO-LAYOUT")) && ya.includes(",") && (va = ya.split(",").filter(function(Ca) {
                  return Ca == "CH-STEREO" || Ca == "CH-MONO";
                }), ya = va[0]), ya = ya || "CH-MONO", xa = cA(a, N, d), O.push.apply(O, x(dA(a, xa.audio, xa.video, T, Ia, ua, R, Ea, ya, h, k2, g)));
                return Ga.return(O.filter(function(Ca) {
                  return Ca != null;
                }));
            }
          });
        }
        function cA(a, b, c) {
          for (var d = { audio: [], video: [] }, e = /* @__PURE__ */ new Map(), f = [], g = false, h = false, k2 = t(b), l = k2.next(); !l.done; l = k2.next()) {
            var m = l.value;
            l = Hy(m, "AUDIO");
            var n = Hy(m, "VIDEO"), q = l || n;
            q && (f.includes(q) || f.push(q), (m = Hy(m, "PATHWAY-ID")) && e.set(q, m), l ? g = true : n && (h = true));
          }
          f.length && c.length && (c = c.filter(function(u) {
            return f.includes(Iy(u, "GROUP-ID"));
          }), $z(a, c, e));
          c = (e = f.sort().join(",")) && a.M.has(e) ? a.M.get(e) : [];
          g ? d.audio.push.apply(d.audio, x(c)) : h && d.video.push.apply(d.video, x(c));
          h = false;
          var r = b.map(function(u) {
            return Iy(
              u,
              "URI"
            );
          });
          g = d.audio.find(function(u) {
            return u && u.P().find(function(v) {
              return r.includes(v);
            });
          });
          c = Tz(a, b[0]);
          k2 = yc("video", c);
          (l = yc("audio", c)) && !k2 ? (g = "audio", h = d.audio.length > 0 && !d.audio.some(function(u) {
            return u.stream.isAudioMuxedInVideo;
          })) : !d.audio.length && !d.video.length && l && k2 ? (g = "video", c = [[k2, l].join()]) : d.audio.length && g ? (g = "audio", h = true) : g = d.video.length && !d.audio.length ? "audio" : "video";
          h || (b = eA(a, b, c, g), e && a.g.enableAudioGroups && (b.stream.groupId = e), b.stream.type == "audio" && g === "audio" && d.audio.some(function(u) {
            return u.stream.isAudioMuxedInVideo;
          }) && (a = d.audio[0].stream, b.stream.language = a.language, b.stream.channelsCount = a.channelsCount, b.stream.label = a.label, b.stream.audioSamplingRate = a.audioSamplingRate, b.stream.originalId = a.originalId, b.stream.originalLanguage = a.originalLanguage), d[b.stream.type] = [b]);
          return d;
        }
        function Tz(a, b) {
          b = Hy(b, "CODECS") || "";
          a.aa = b.length > 0;
          a.aa || a.g.hls.disableCodecGuessing || (b = [], a.g.disableVideo || b.push(a.g.hls.defaultVideoCodec), a.g.disableAudio || b.push(a.g.hls.defaultAudioCodec), b = b.join(","));
          return sm(b.split(/\s*,\s*/));
        }
        function fA(a) {
          return (a = Hy(a, "CHANNELS")) ? parseInt(a.split("/")[0], 10) : null;
        }
        function gA(a) {
          return (a = Hy(a, "SAMPLE-RATE")) ? parseInt(a, 10) : null;
        }
        function hA(a) {
          a = Hy(a, "CHANNELS");
          if (!a) return false;
          a = a.split("/");
          return a.length != 2 ? false : a[1] === "JOC" || a[1].includes("ATMOS");
        }
        function iA(a) {
          a = Iy(a, "TYPE").toLowerCase();
          a == "subtitles" && (a = Ac);
          return a;
        }
        function dA(a, b, c, d, e, f, g, h, k2, l, m, n) {
          for (var q = t(c), r = q.next(); !r.done; r = q.next()) jA(r.value.stream, e, f, g, h, k2, null);
          e = a.g.disableVideo;
          if (!c.length || e) c = [null];
          e && (b = b.filter(function(z) {
            return !z.stream.isAudioMuxedInVideo;
          }));
          e = a.g.disableAudio;
          if (!b.length || e) b = [null];
          e = [];
          b = t(b);
          for (f = b.next(); !f.done; f = b.next()) for (f = f.value, g = t(c), h = g.next(); !h.done; h = g.next()) {
            var u = h.value;
            if (h = f ? f.stream : null) h.drmInfos = l, h.keyIds = m;
            if (k2 = u ? u.stream : null) k2.drmInfos = l, k2.keyIds = m, a.g.disableIFrames || kg(k2, n);
            k2 && !h && (k2.bandwidth = d);
            !k2 && h && (h.bandwidth = d);
            q = f ? f.stream.drmInfos : null;
            r = u ? u.stream.drmInfos : null;
            u = u ? u.P().sort().join(",") : "";
            var v = f ? f.P().sort().join(",") : "", w = [];
            h && h.codecs && w.push(h.codecs);
            k2 && k2.codecs && w.push(k2.codecs);
            u = [u, v, w.sort()].join("-");
            h && k2 && !sg(q, r) || a.ob.has(u) || (h = { id: a.G++, language: h ? h.language : "und", disabledUntilTime: 0, primary: !!h && h.primary || !!k2 && k2.primary, audio: h, video: k2, bandwidth: d, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, e.push(h), a.ob.add(u));
          }
          return e;
        }
        function Ez(a, b) {
          b = My(b, "CLOSED-CAPTIONS");
          a.R = b.length == 0;
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Hy(d, "LANGUAGE");
            c = of(e || "und");
            e || (e = Hy(d, "NAME")) && (c = e);
            e = Iy(d, "GROUP-ID");
            d = Iy(d, "INSTREAM-ID").replace("SERVICE", "svc");
            a.J.get(e) || a.J.set(e, /* @__PURE__ */ new Map());
            a.J.get(e).set(d, c);
          }
        }
        function Uz(a, b, c, d) {
          d = d === void 0 ? true : d;
          for (var e = [], f = [], g = /* @__PURE__ */ new Map(), h = t(b), k2 = h.next(), l = {}; !k2.done; l = { ji: void 0 }, k2 = h.next()) k2 = k2.value, l.ji = ++a.G, l = /* @__PURE__ */ (function(v) {
            return function() {
              return "shaka://hls-muxed" + v.ji;
            };
          })(l), l = d ? Iy(k2, "URI") : Hy(k2, "URI") || l(), k2 = Iy(k2, "GROUP-ID"), e.push(l), f.push(k2), g.set(k2, l);
          d = f.sort().join(",");
          k2 = b[0];
          b = "";
          h = iA(k2);
          if (h == Ac) b = Hy(k2, "CODECS") || "";
          else for (f = t(f), l = f.next(); !l.done; l = f.next()) if (l = l.value, a.K.has(l)) {
            b = a.K.get(l);
            break;
          }
          f = e.sort().join(",");
          h == "audio" && d && (f += d);
          if (a.i.has(f)) return a.i.get(f);
          l = a.G++;
          if (a.j) {
            g = t(g);
            for (var m = g.next(); !m.done; m = g.next()) {
              var n = t(m.value);
              m = n.next().value;
              n = n.next().value;
              (m = c.get(m)) && ww(a.j, l, m, n);
            }
          }
          c = Hy(k2, "LANGUAGE");
          g = Hy(k2, "NAME");
          m = Hy(k2, "DEFAULT") == "YES";
          n = h == "audio" ? fA(k2) : null;
          var q = h == "audio" ? hA(k2) : false, r = Hy(k2, "CHARACTERISTICS"), u = Hy(k2, "FORCED") == "YES";
          k2 = h == "audio" ? gA(k2) : null;
          e = kA(a, l, e, b, h, c, m, g, n, null, r, u, k2, q);
          e.stream && a.g.enableAudioGroups && (e.stream.groupId = d);
          a.M.has(d) ? a.M.get(d).push(e) : a.M.set(d, [e]);
          a.i.set(f, e);
          return e;
        }
        function Yz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              c = Iy(b, "URI");
              d = Hy(b, "CODECS", "jpeg") || "";
              if (a.i.has(c)) return q.return(a.i.get(c));
              e = Hy(b, "LANGUAGE");
              f = Hy(b, "NAME");
              g = Hy(b, "CHARACTERISTICS");
              h = kA(a, a.G++, [c], d, "image", e, false, f, null, null, g, false, null, false);
              return (k2 = Hy(b, "RESOLUTION")) ? F(q, h.stream.createSegmentIndex(), 3) : q.A(2);
            }
            if (q.g != 2) {
              l = Xf(h.stream.segmentIndex);
              if (m = l.tilesLayout) h.stream.width = Number(k2.split("x")[0]) * Number(m.split("x")[0]), h.stream.height = Number(k2.split("x")[1]) * Number(m.split("x")[1]);
              h.stream.closeSegmentIndex();
            }
            if (n = Hy(b, "BANDWIDTH")) h.stream.bandwidth = Number(n);
            a.i.set(c, h);
            return q.return(h);
          });
        }
        function Zz(a, b) {
          var c = "video", d = Iy(b, "URI"), e = Hy(b, "CODECS") || "";
          e == "mjpg" && (c = "image");
          if (a.i.has(d)) return a.i.get(d);
          var f = Hy(b, "LANGUAGE"), g = Hy(b, "NAME"), h = Hy(b, "CHARACTERISTICS");
          c = kA(a, a.G++, [d], e, c, f, false, g, null, null, h, false, null, false);
          e = Hy(b, "RESOLUTION");
          f = t(e ? e.split("x") : [null, null]);
          e = f.next().value;
          f = f.next().value;
          c.stream.width = Number(e) || void 0;
          c.stream.height = Number(f) || void 0;
          if (b = Hy(b, "BANDWIDTH")) c.stream.bandwidth = Number(b);
          a.i.set(d, c);
          return c;
        }
        function eA(a, b, c, d) {
          for (var e = a.G++, f = [], g = t(b), h = g.next(); !h.done; h = g.next()) {
            var k2 = h.value;
            h = Iy(k2, "URI");
            k2 = Hy(k2, "PATHWAY-ID");
            a.j && k2 && ww(a.j, e, k2, h);
            f.push(h);
          }
          g = f.sort().join(",") + c.sort().join(",");
          if (a.i.has(g)) return a.i.get(g);
          h = f.join(",");
          a: {
            b = Hy(b[0], "CLOSED-CAPTIONS");
            if (d == "video") {
              if (a.g.disableText) {
                a.R = false;
                b = null;
                break a;
              }
              if (b) {
                if (b != "NONE") {
                  b = a.J.get(b);
                  break a;
                }
                a.R = false;
              } else if (!b && a.J.size) for (b = t(a.J.keys()), b = b.next(); !b.done; b = b.next()) {
                b = a.J.get(b.value);
                break a;
              }
            }
            b = null;
          }
          c = xc(d, c);
          d = kA(a, e, f, c, d, null, false, h, null, b, null, false, null, false);
          a.i.set(g, d);
          return d;
        }
        function kA(a, b, c, d, e, f, g, h, k2, l, m, n, q, r) {
          function u(C) {
            var H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya;
            return Q(function(va) {
              switch (va.g) {
                case 1:
                  return H = Cc, ra(va, 2), F(va, C.promise, 4);
                case 4:
                  D = va.h;
                  if (C.aborted) return va.return();
                  A = D.uri;
                  A != D.originalUri && (E = z.P(), E.includes(A) || z.Af.push(A));
                  J = Ty(a.ab, D.data);
                  if (J.type != 1) throw new U(2, 4, 4017);
                  I = Ly(J.ea, "EXT-X-DEFINE");
                  K = pz(a, I, A);
                  L = false;
                  (!a.aa && a.g.hls.disableCodecGuessing || a.R && e == H.Aa && !a.g.hls.disableClosedCaptionsDetection) && J.segments.length > 0 && (a.R = false, L = true);
                  O = !a.aa && a.g.hls.disableCodecGuessing;
                  P = jz(a);
                  return F(va, zz(a, 0, K, J, v, d, e, f, g, h, k2, l, m, n, q, r, void 0, L, O), 5);
                case 5:
                  N = va.h;
                  if (C.aborted) return va.return();
                  M = N.stream;
                  Jz(a, J);
                  jz(a) && !P && Kz(a, J);
                  z.Wc = N.Wc;
                  z.Mc = N.Mc;
                  z.Se = N.Se;
                  z.Re = N.Re;
                  z.Yd = N.Yd;
                  z.mf = N.mf;
                  z.Rb = N.Rb;
                  z.Sb = N.Sb;
                  w.segmentIndex = M.segmentIndex;
                  w.encrypted = M.encrypted;
                  w.drmInfos = M.drmInfos;
                  w.keyIds = M.keyIds;
                  w.mimeType = M.mimeType;
                  w.bandwidth = w.bandwidth || M.bandwidth;
                  w.codecs = w.codecs || M.codecs;
                  w.closedCaptions = w.closedCaptions || M.closedCaptions;
                  w.width = w.width || M.width;
                  w.height = w.height || M.height;
                  w.hdr = w.hdr || M.hdr;
                  w.colorGamut = w.colorGamut || M.colorGamut;
                  w.frameRate = w.frameRate || M.frameRate;
                  w.language == "und" && M.language != "und" && (w.language = M.language);
                  w.language = w.language || M.language;
                  w.channelsCount = w.channelsCount || M.channelsCount;
                  w.audioSamplingRate = w.audioSamplingRate || M.audioSamplingRate;
                  Xz(w);
                  w.drmInfos.length && a.h.newDrmInfo(w);
                  R = false;
                  if (!l && w.closedCaptions || l && w.closedCaptions && l.size != w.closedCaptions.size) R = true;
                  a.m && R && a.h.makeTextStreamsForClosedCaptions(a.m);
                  e == H.Na && (T = Xf(M.segmentIndex)) && T.ba && (w.mimeType = "application/mp4", Xz(w));
                  ma = am(w);
                  w.segmentIndex.Gb(function(xa) {
                    xa.ba && (xa.ba.xd = ma);
                  });
                  lA(a) && (a.zc ? Lz(a, [z]) : (a.zc = true, W = Array.from(a.i.values()), Ia = W.filter(function(xa) {
                    return xa.stream.segmentIndex;
                  }), Lz(a, Ia), nz(a), ua = a.o, ua > 0 && a.F.ia(ua)));
                  uz(a, J.ea, w.type, K, v);
                  a.m && (a.m.startTime = a.u);
                  ta(va, 0);
                  break;
                case 2:
                  Ea = Aa(va);
                  w.closeSegmentIndex();
                  if (Ea.code === 7001) return va.return();
                  ya = a.h.disableStream(w);
                  if (!ya) throw Ea;
                  G(va);
              }
            });
          }
          function v() {
            return a.j && c.length > 1 ? xw(a.j, b) : z.Af.concat(Qy([a.H], c, a.B));
          }
          var w = mA(a, d, e, f, g, h, k2, l, m, n, q, r);
          c.some(function(C) {
            return C.startsWith("shaka://hls-muxed");
          }) && (w.isAudioMuxedInVideo = true, w.mimeType = "video/mp2t", Xz(w));
          var z = { stream: w, type: e, Af: [], Wc: 0, Mc: 0, mf: /* @__PURE__ */ new Map(), Se: false, Re: false, Yd: false, og: -1, Rb: -1, Sb: -1, P: v }, y = null, B;
          w.createSegmentIndex = function() {
            if (y) return y;
            if (w.isAudioMuxedInVideo) return w.segmentIndex = new Ml([]), Promise.resolve();
            B = hz(a, z.P(), true);
            return y = new Promise(function(C) {
              C(u(B));
            });
          };
          w.closeSegmentIndex = function() {
            y && !w.segmentIndex && B.abort();
            w.segmentIndex && (w.segmentIndex.release(), w.segmentIndex = null);
            y = null;
          };
          return z;
        }
        function Sz(a) {
          var b = Infinity;
          a = t(a.i.values());
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.stream.segmentIndex && c.stream.type != "text" && !c.stream.isAudioMuxedInVideo && (b = Math.min(b, c.Mc));
          return b;
        }
        function lz(a, b) {
          var c = [];
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) d = d.value, d.segmentIndex && d.segmentIndex.Gb(function(e) {
            c.push(e);
          });
          a.l.ie(c);
        }
        function Lz(a, b) {
          if (!jz(a)) for (var c = Sz(a), d = t(b), e = d.next(); !e.done; e = d.next()) e.value.stream.segmentIndex.pd(0, c);
          lz(a, b.map(function(f) {
            return f.stream;
          }));
          d = Array.from(a.i.values()).filter(function(f) {
            return f.stream.segmentIndex;
          });
          c = d.some(function(f) {
            return f.stream.type == "audio";
          });
          e = d.some(function(f) {
            return f.stream.type == "video";
          });
          d = jz(a) && !a.kb;
          c = !jz(a) && a.kb && !(c && e);
          a.g.hls.ignoreManifestProgramDateTime || d || c ? vz(a, b, d) : (yz(a, b), a.g.hls.ignoreManifestProgramDateTimeForTypes.length > 0 && vz(
            a,
            b
          ));
        }
        function wz(a, b) {
          return a.g.hls.ignoreManifestProgramDateTime ? true : a.g.hls.ignoreManifestProgramDateTimeForTypes.includes(b);
        }
        function lA(a) {
          if (!a.m) return false;
          var b = [], c = [];
          a = t(a.m.variants);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && b.push(d.video), d.audio && c.push(d.audio);
          return b.length > 0 && !b.some(function(e) {
            return e.segmentIndex;
          }) || c.length > 0 && !c.some(function(e) {
            return e.segmentIndex;
          }) ? false : true;
        }
        function zz(a, b, c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y) {
          z = z === void 0 ? true : z;
          y = y === void 0 ? true : y;
          var B, C, H, D, A, E, J, I, K, L, O, P, N, M, R, T, ma, W, Ia, ua, Ea, ya, va, xa, Ga, Ca, wa, za, ub;
          return Q(function(pb) {
            switch (pb.g) {
              case 1:
                B = d.segments || [];
                C = B.every(function(pc) {
                  return Ny(pc.ea, "EXT-X-GAP") ? true : false;
                });
                if (!B.length || C) throw new U(2, 4, 4053);
                nA(a, d);
                jz(a) && tz(a, d);
                H = jz(a) ? a.C.get(g) : /* @__PURE__ */ new Map();
                D = rz(a, d, H, c, e, g);
                A = D.segments;
                E = D.bandwidth;
                O = L = K = I = J = null;
                if (!(A.length > 0 && z)) {
                  pb.A(2);
                  break;
                }
                return F(pb, Mz(a, A), 3);
              case 3:
                P = pb.h, g != P.type && jz(a) && (a.C.set(P.type, a.C.get(g)), a.C.set(g, /* @__PURE__ */ new Map())), g = P.type, h = P.language, m = P.channelCount, u = P.sampleRate, a.g.disableText || (n = P.closedCaptions), I = P.height, J = P.width, K = P.ve, L = P.colorGamut, O = P.frameRate, y && (w = P.mimeType, f = P.codecs);
              case 2:
                if (w) {
                  pb.A(4);
                  break;
                }
                return F(pb, oA(a, g, f, A), 5);
              case 5:
                w = pb.h, g != Ac || f || w != "application/mp4" || !A[0] || A[0].ba || (w = "text/vtt");
              case 4:
                return F(pb, qz(a, d, w, e, c), 6);
              case 6:
                N = pb.h;
                M = N.drmInfos;
                R = N.keyIds;
                T = N.encrypted;
                ma = N.Mh;
                if (T && !M.length && !ma) throw new U(
                  2,
                  4,
                  4026
                );
                W = mA(a, f, g, h, k2, l, m, n, q, r, u, v);
                W.encrypted = T && !ma;
                W.drmInfos = M;
                W.keyIds = R;
                W.mimeType = w;
                E && (W.bandwidth = E);
                Xz(W);
                g == "video" && (J || I || K || L) && jA(W, J, I, O, K, null, L);
                jz(a) && tz(a, d);
                Ia = A[0].startTime;
                ua = A[A.length - 1];
                Ea = ua.endTime;
                ya = new Ml(A);
                W.segmentIndex = ya;
                xa = (va = Ny(d.ea, "EXT-X-SERVER-CONTROL")) ? Gy(va, "CAN-SKIP-UNTIL") != null : false;
                Ga = va ? Gy(va, "CAN-BLOCK-RELOAD") != null : false;
                Ca = Oy(d.ea, "EXT-X-MEDIA-SEQUENCE", 0);
                wa = sz(Ca, A);
                za = wa.Rb;
                ub = wa.Sb;
                return pb.return({
                  stream: W,
                  type: g,
                  Af: [],
                  P: e,
                  Wc: Ia,
                  Mc: Ea,
                  Se: xa,
                  Re: Ga,
                  Yd: false,
                  og: -1,
                  Rb: za,
                  Sb: ub,
                  mf: H
                });
            }
          });
        }
        function sz(a, b) {
          a = a + b.length - 1;
          var c = -1;
          if (!b.length) return a++, { Rb: a, Sb: c };
          b = b[b.length - 1];
          var d = b.g;
          if (!b.g.length) return a++, b.o && (c = 0), { Rb: a, Sb: c };
          c = d.length - 1;
          d[d.length - 1].isPreload() || (a++, c = 0);
          return { Rb: a, Sb: c };
        }
        function mA(a, b, c, d, e, f, g, h, k2, l, m, n) {
          var q = Vz(c, b) || Wz(c), r = [];
          if (k2) {
            k2 = t(k2.split(","));
            for (var u = k2.next(); !u.done; u = k2.next()) r.push(u.value);
          }
          u = void 0;
          k2 = null;
          c == Ac ? u = r.includes("public.accessibility.transcribes-spoken-dialog") && r.includes("public.accessibility.describes-music-and-sound") ? "caption" : "subtitle" : r.includes("public.accessibility.describes-video") && (k2 = "visually impaired");
          r.length || u !== "subtitle" || r.push("subtitle");
          u = null;
          c != "video" && (u = f);
          a = {
            id: a.G++,
            originalId: f,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: q,
            codecs: b,
            kind: c == Ac ? "subtitle" : void 0,
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: of(d || "und"),
            originalLanguage: d,
            label: u,
            type: c,
            primary: e,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            frameRate: void 0,
            pixelAspectRatio: void 0,
            width: void 0,
            height: void 0,
            bandwidth: void 0,
            roles: r,
            forced: l,
            channelsCount: g,
            audioSamplingRate: m,
            spatialAudio: n,
            closedCaptions: h,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            accessibilityPurpose: k2,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          Xz(a);
          return a;
        }
        function qz(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R;
          return Q(function(T) {
            switch (T.g) {
              case 1:
                f = /* @__PURE__ */ new Map();
                if (!a.g.ignoreDrmInfo && b.segments) {
                  for (g = t(b.segments), h = g.next(); !h.done; h = g.next()) if (k2 = h.value, l = Ly(k2.ea, "EXT-X-KEY"), m = null, l.length) for (m = pA(a, b, k2.ea, d, e), n = t(l), q = n.next(); !q.done; q = n.next()) r = q.value, f.set(r, m);
                }
                v = u = false;
                w = [];
                z = /* @__PURE__ */ new Set();
                y = t(f);
                B = y.next();
              case 2:
                if (B.done) {
                  T.A(4);
                  break;
                }
                C = B.value;
                H = t(C);
                D = H.next().value;
                A = H.next().value;
                E = D;
                J = A;
                I = Iy(E, "METHOD");
                if (I == "NONE") {
                  T.A(3);
                  break;
                }
                u = true;
                K = Hy(E, "KEYFORMAT") || "identity";
                L = null;
                if (aA(I)) {
                  v = true;
                  T.A(3);
                  break;
                }
                if (K == "identity") return F(T, bA(a, E, c, d, J, e), 11);
                O = a.dc.get(K);
                if (!O) {
                  P = null;
                  T.A(9);
                  break;
                }
                return F(T, O(E, c, J), 10);
              case 10:
                P = T.h;
              case 9:
                L = P;
                T.A(6);
                break;
              case 11:
                L = T.h;
              case 6:
                if (L) {
                  if (L.keyIds) for (N = t(L.keyIds), M = N.next(); !M.done; M = N.next()) R = M.value, z.add(R);
                  w.push(L);
                }
              case 3:
                B = y.next();
                T.A(2);
                break;
              case 4:
                return T.return({ drmInfos: w, keyIds: z, encrypted: u, Mh: v });
            }
          });
        }
        function qA(a, b, c, d, e) {
          if (!window2.crypto || !window2.crypto.subtle) throw $a("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var f = 0, g = Hy(b, "IV", "");
          if (g) {
            var h = rc(g.substr(2));
            if (h.byteLength != 16) throw new U(2, 4, 4048);
          } else f = Oy(c.ea, "EXT-X-MEDIA-SEQUENCE", 0);
          var k2 = Py(d(), Iy(b, "URI"), e), l = k2.sort().join("");
          c = b.toString() + "-" + f + "-" + l;
          if (!a.va.has(c)) {
            var m = { bitsKey: 128, blockCipherMode: "CBC", iv: h, firstMediaSequenceNumber: f };
            switch (Iy(
              b,
              "METHOD"
            )) {
              case "AES-256":
                m.bitsKey = 256;
                break;
              case "AES-256-CTR":
                m.bitsKey = 256, m.blockCipherMode = "CTR";
            }
            m.fetchKey = function() {
              var n, q, r, u;
              return Q(function(v) {
                if (v.g == 1) return a.O.has(l) || (n = Ug(k2, a.g.retryParameters), q = Qz(a, n, 6).promise, a.O.set(l, q)), F(v, a.O.get(l), 2);
                if (v.g != 3) {
                  r = v.h;
                  if (!r.data || r.data.byteLength != m.bitsKey / 8) throw new U(2, 4, 4049);
                  u = { name: m.blockCipherMode == "CTR" ? "AES-CTR" : "AES-CBC", length: m.bitsKey };
                  return F(v, window2.crypto.subtle.importKey("raw", r.data, u, true, ["decrypt"]), 3);
                }
                m.cryptoKey = v.h;
                m.fetchKey = void 0;
                G(v);
              });
            };
            a.va.set(c, m);
          }
          return a.va.get(c);
        }
        function Jz(a, b) {
          a.u == null && (b = Ny(b.ea, "EXT-X-START")) && (a.u = Number(Iy(b, "TIME-OFFSET")));
        }
        function nA(a, b) {
          var c = Ny(b.ea, "EXT-X-PLAYLIST-TYPE");
          b = Ny(b.ea, "EXT-X-ENDLIST");
          b = c && c.value == "VOD" || b;
          c = c && c.value == "EVENT" && !b;
          c = !b && !c;
          b ? mz(a, gz) : c ? mz(a, Rz) : mz(a, rA);
        }
        function tz(a, b) {
          var c = Infinity, d = b.segments;
          if (d.length) for (var e = d.length - 1; e >= 0; ) {
            var f = Ny(d[e].ea, "EXTINF");
            if (f) {
              c = Number(f.value.split(",")[0]);
              break;
            }
            e--;
          }
          d = Ny(b.ea, "EXT-X-TARGETDURATION");
          if (!d) throw new U(2, 4, 4024, "EXT-X-TARGETDURATION");
          d = Number(d.value);
          if (e = Ny(b.ea, "EXT-X-PART-INF")) a.T = Number(Iy(e, "PART-TARGET"));
          b = Ny(b.ea, "EXT-X-SERVER-CONTROL");
          a.oa && a.T ? (a.o = a.yc ? a.T * 5 <= c ? Math.min(a.T, a.o) : Math.min(c, a.o) : Math.min(a.T, a.o), a.Ua = b ? Number(Iy(b, "PART-HOLD-BACK")) : 0) : (a.o = Math.min(c, a.o), c = b ? Gy(b, "HOLD-BACK") : null, a.Ta = c ? Number(c.value) : 0);
          a.eb = Math.max(d, a.eb);
        }
        function Kz(a, b) {
          var c = 0;
          if (a.g.defaultPresentationDelay) c = a.g.defaultPresentationDelay;
          else if (a.Ua) c = a.Ua;
          else if (a.Ta) c = a.Ta;
          else for (var d = b.segments.length, e = d - Math.min(d, a.g.hls.liveSegmentsDelay); e < d; e++) {
            var f = Ny(b.segments[e].ea, "EXTINF");
            c = f ? c + Number(f.value.split(",")[0]) : c + a.eb;
          }
          a.u && a.u < 0 && (c = Math.min(-a.u, c), a.u += c);
          a.l.Ri(0);
          a.l.oh(c);
          a.l.cd(false);
        }
        function pA(a, b, c, d, e) {
          var f = Ny(c, "EXT-X-MAP");
          if (!f) return null;
          var g = Iy(f, "URI"), h = Py(d(), g, e);
          g = [h.toString(), Hy(f, "BYTERANGE", "")].join("-");
          if (!a.Da.has(g)) {
            var k2 = void 0, l = null, m = false;
            c = t(c);
            for (var n = c.next(); !n.done; n = c.next()) n = n.value, n.name == "EXT-X-KEY" ? (m = Iy(n, "METHOD"), aA(m) && n.id < f.id ? (m = false, k2 = qA(a, n, b, d, e)) : m = m != "NONE") : n.name == "EXT-X-BYTERANGE" && n.id < f.id && (l = n);
            b = sA(h, f, l, k2, m);
            a.Da.set(g, b);
          }
          return a.Da.get(g);
        }
        function sA(a, b, c, d, e) {
          var f = 0, g = null;
          b = Hy(b, "BYTERANGE");
          !b && c && (b = c.value);
          b && (f = b.split("@"), g = Number(f[0]), f = Number(f[1]), g = f + g - 1, d && (c = g + 1 - f, c % 16 && (g += 16 - c % 16)));
          return new oj(function() {
            return a;
          }, f, g, null, null, null, d, e);
        }
        function tA(a, b, c, d, e, f, g, h, k2, l) {
          var m = d.ea, n = Ny(m, "EXTINF"), q = 0, r = 0, u = null;
          d.wc.length && (a.m.isLowLatency = true);
          var v = null;
          if (c && c.h) v = c.h + c.endTime - c.startTime;
          else if (!a.g.hls.ignoreManifestProgramDateTime) {
            var w = Ny(m, "EXT-X-PROGRAM-DATE-TIME");
            w && w.value && (v = Gd(w.value), a.kb = true);
          }
          var z = rj;
          Ny(m, "EXT-X-GAP") && (a.m.gapCount++, z = 2);
          if (!n) {
            if (d.wc.length == 0) throw new U(2, 4, 4024, "EXTINF");
            if (!a.oa) return null;
          }
          var y = [];
          w = false;
          var B = null, C = false, H = false;
          if (a.oa && d.wc.length) {
            q = b && window2.ReadableStream && a.g.hls.allowLowLatencyByteRangeOptimization;
            for (var D = v, A = {}, E = 0; E < d.wc.length; A = { Qf: void 0, ke: void 0 }, E++) {
              var J = d.wc[E], I = E == 0 ? c : y[y.length - 1], K = E == 0 ? e : I.endTime, L = Number(Hy(J, "DURATION")) || a.T;
              if (L) {
                var O = K + L, P = 0, N = null;
                J.name == "EXT-X-PRELOAD-HINT" ? (P = (P = Hy(J, "BYTERANGE-START")) ? Number(P) : 0, (I = Hy(J, "BYTERANGE-LENGTH")) ? N = P + Number(I) - 1 : P && (N = Number.MAX_SAFE_INTEGER)) : (P = Hy(J, "BYTERANGE"), N = t(uA(I, P)), P = N.next().value, N = N.next().value);
                A.ke = Hy(J, "URI");
                if (A.ke) {
                  I = rj;
                  Hy(J, "GAP") == "YES" && (a.m.gapCount++, I = 2, C = true);
                  A.Qf = null;
                  var M = /* @__PURE__ */ (function(T) {
                    return function() {
                      T.Qf == null && (T.Qf = Py(h(), T.ke, f));
                      return T.Qf;
                    };
                  })(A);
                  q && P >= 0 && N != null && (B = M, w = true);
                  K = new qj(K, O, M, P, N, b, 0, 0, Infinity, [], "", null, D, I, l);
                  J.name == "EXT-X-PRELOAD-HINT" && (K.Qg(), H = true);
                  Hy(J, "INDEPENDENT") != "YES" && E > 0 && K.wd();
                  J = k2;
                  J || (y.length && y[0].mimeType ? J = y[0].mimeType : A.ke && (A = Qo(A.ke), J = vA.get(g).get(A) || null));
                  J && (K.mimeType = J, wA.has(J) && (K.ba = null));
                  y.push(K);
                  D && (D += L);
                }
              }
            }
          }
          if (n) {
            n = Number(n.value.split(",")[0]);
            if (n == 0) return null;
            q = e + n;
          } else if (y.length) q = y[y.length - 1].endTime;
          else return null;
          w && (C || y[0].startByte != 0 ? (w = false, B = null) : y = []);
          (n = Ny(m, "EXT-X-BYTERANGE")) ? (u = t(uA(c, n.value)), r = u.next().value, u = u.next().value) : y.length && (r = y[0].startByte, u = y[y.length - 1].endByte);
          c = "";
          n = null;
          g == "image" && (c = "1x1", g = Ny(m, "EXT-X-TILES")) && (c = Iy(g, "LAYOUT"), (g = Hy(g, "DURATION")) && (n = Number(g)));
          var R = null;
          b = new qj(e, q, function() {
            if (B) return B();
            R == null && (R = Py(h(), d.g, f));
            return R || [];
          }, r, u, b, 0, 0, Infinity, y, c, n, v, z, l, y.length > 0 && !!d.g);
          k2 && (b.mimeType = k2, wA.has(k2) && (b.ba = null));
          w && (a.yc = true, b.ri(), H && b.Qg());
          return b;
        }
        function uA(a, b) {
          var c = 0, d = null;
          b && (c = b.split("@"), b = Number(c[0]), c = c[1] ? Number(c[1]) : a.endByte + 1, d = c + b - 1);
          return [c, d];
        }
        function uz(a, b, c, d, e) {
          if (c == "video" || c == "audio") {
            var f = a.l.m;
            if (f && !wz(a, c)) for (b = Ly(b, "EXT-X-DATERANGE"), b = b.filter(function(I) {
              return Gy(I, "START-DATE") != null;
            }).sort(function(I, K) {
              I = Iy(I, "START-DATE");
              K = Iy(K, "START-DATE");
              return I < K ? -1 : I > K ? 1 : 0;
            }), c = 0; c < b.length; c++) {
              var g = b[c];
              try {
                var h = Iy(g, "START-DATE"), k2 = Gd(h);
                if (!isNaN(k2)) {
                  var l = Math.max(0, k2 - f), m = null, n = Hy(g, "END-DATE");
                  if (n) {
                    var q = Gd(n);
                    if (!isNaN(q) && (m = q - f, m < 0)) continue;
                  }
                  if (m == null) {
                    var r = Hy(g, "DURATION") || Hy(g, "PLANNED-DURATION");
                    if (r) {
                      var u = parseFloat(r);
                      isNaN(u) || (m = l + u);
                      if (k2 - f + u < 0) continue;
                    }
                  }
                  var v = Hy(g, "CLASS") || "com.apple.quicktime.HLS", w = Hy(g, "END-ON-NEXT") == "YES";
                  if (m == null && w) {
                    for (var z = c + 1; z < b.length; z++) {
                      var y = Hy(b[z], "CLASS") || "com.apple.quicktime.HLS";
                      if (v == y) {
                        var B = Iy(b[z], "START-DATE"), C = Gd(B);
                        if (!isNaN(C) && C && C > k2) {
                          m = Math.max(0, C - f);
                          break;
                        }
                      }
                    }
                    if (m == null) continue;
                  }
                  z = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                  for (var H = [], D = t(g.attributes), A = D.next(); !A.done; A = D.next()) {
                    var E = A.value;
                    if (!z.includes(E.name)) {
                      var J = Ry(E.value, d);
                      if (E.name == "X-ASSET-URI" || E.name == "X-ASSET-LIST") J = Py(e(), E.value, d)[0];
                      H.push({ key: E.name, description: "", data: J, mimeType: null, pictureType: null });
                    }
                  }
                  if (H.length > 1) a.h.onMetadata(v, l, m, H);
                }
              } catch (I) {
              }
            }
          }
        }
        function rz(a, b, c, d, e, f) {
          function g(I) {
            I = Qo(I);
            if (!I) return null;
            var K = vA.get(f).get(I);
            K || (K = Oz.get(I));
            return K;
          }
          var h = b.segments, k2 = null, l = null, m = null, n = null, q = void 0, r = Oy(b.ea, "EXT-X-DISCONTINUITY-SEQUENCE", -1), u = Oy(b.ea, "EXT-X-MEDIA-SEQUENCE", 0), v = Ny(b.ea, "EXT-X-SKIP"), w = v ? Number(Hy(v, "SKIPPED-SEGMENTS")) : 0, z = u + w, y = 0;
          jz(a) && c.has(z) && (y = c.get(z));
          y === 0 && a.Fa == Rz && c.size > 0 && !c.has(z) && a.l.i != null && (y = a.l.Ib());
          var B = [], C = null;
          v = [];
          for (var H = 0; H < h.length; H++) {
            var D = h[H];
            (z = Ny(D.ea, "EXT-X-MAP")) && z.id !== l && (k2 = pA(a, b, D.ea, e, d), l = z.id);
            z = D.g;
            var A = "";
            z && (A = Qo(z));
            A !== n && (m = g(z), n = A);
            A = H == 0 ? y : C.endTime;
            z = u + w + H;
            Ny(D.ea, "EXT-X-DISCONTINUITY") && (r++, C && C.ba && (C.ba.g = A));
            for (var E = t(D.ea), J = E.next(); !J.done; J = E.next()) J = J.value, J.name == "EXT-X-KEY" && (aA(Iy(J, "METHOD")) ? q = qA(a, J, b, e, d) : q = void 0);
            c.set(z, A);
            if (A = tA(a, k2, C, D, A, d, f, e, m, q)) {
              if (C = Oy(D.ea, "EXT-X-BITRATE")) v.push({ bitrate: C, duration: A.endTime - A.startTime }), A.bandwidth = C;
              else if (A.endByte) {
                if (D = sj(A)) C = A.endTime - A.startTime, D = D * 8 / C / 1e3, v.push({
                  bitrate: D,
                  duration: C
                }), A.bandwidth = D;
              } else v.length && (C = v.pop(), C.duration += A.endTime - A.startTime, v.push(C), A.bandwidth = C.bitrate);
              if (A.bandwidth) for (C = t(A.g), D = C.next(); !D.done; D = C.next()) D.value.bandwidth = A.bandwidth;
              C = A;
              A.i = r;
              wz(a, f) && a.N != null && z < a.N || B.push(A);
            }
          }
          b = void 0;
          v.length && (b = v.reduce(function(I, K) {
            return I + K.duration;
          }, 0), b = Math.round(v.reduce(function(I, K) {
            return I + K.bitrate * K.duration;
          }, 0) / b * 1e3));
          if (v = B.some(function(I) {
            return I.h != null;
          })) {
            for (c = {}, d = 0; d < B.length; c = {
              We: void 0,
              Ve: void 0,
              Oe: void 0,
              Zc: void 0,
              Ne: void 0
            }, d++) if (c.Zc = B[d], c.Zc.h == null) for (c.Ve = 0, c.We = d, e = /* @__PURE__ */ (function(I) {
              return function() {
                var K = B[I.We];
                if (K) {
                  if (K.h != null) return K.h + I.Ve;
                  I.Ve -= K.endTime - K.startTime;
                  I.We += 1;
                }
                return null;
              };
            })(c), c.Ne = 0, c.Oe = d, h = /* @__PURE__ */ (function(I) {
              return function() {
                var K = B[I.Oe];
                if (K) {
                  K != I.Zc && (I.Ne += K.endTime - K.startTime);
                  if (K.h != null) return K.h + I.Ne;
                  --I.Oe;
                }
                return null;
              };
            })(c); c.Zc.h == null; ) c.Zc.h = h(), c.Zc.h == null && (c.Zc.h = e());
          }
          if (v) for (c = t(B), d = c.next(); !d.done; d = c.next()) for (e = d.value, d = e.h, e = t(e.g), h = e.next(); !h.done; h = e.next()) h = h.value, h.h = d, d += h.endTime - h.startTime;
          c = a.ma;
          if (v && c != Infinity && !wz(a, f)) for (a = t(B), v = a.next(); !v.done; v = a.next()) v.value.Ah(c);
          return { segments: B, bandwidth: b };
        }
        function Vz(a, b) {
          if (a == Ac) {
            if (b == "vtt" || b == "wvtt") return "text/vtt";
            if (b && b !== "") return "application/mp4";
          }
          return a != "image" || b && b != "jpeg" ? a == "audio" && b == "mp4a.40.34" ? "audio/mpeg" : b == "mjpg" ? "application/mp4" : null : "image/jpeg";
        }
        function Wz(a) {
          return a == Ac ? "text/vtt" : vA.get(a).get("mp4");
        }
        function Nz(a, b) {
          a = jz(a) ? Math.trunc((b.length - 1) / 2) : 0;
          for (var c = b[a]; c.Kc() == 2 && a + 1 < b.length; ) a++, c = b[a];
          return { segment: c, segmentIndex: a };
        }
        function oA(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u, v, w;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                e = $g;
                f = Nz(a, d);
                g = f.segment;
                if (g.status == 2) return z.return(Wz(b));
                k2 = g.P();
                if (l = Qo(k2[0])) {
                  if (m = vA.get(b), (n = m.get(l)) || (n = Oz.get(l))) return z.return(n);
                }
                if (h = Vz(b, c)) return z.return(h);
                r = 1;
                u = Ug(k2, a.g.retryParameters);
                ra(z, 2);
                u.method = "HEAD";
                return F(z, Qz(a, u, e, { type: r }).promise, 4);
              case 4:
                v = z.h;
                q = v.headers["content-type"];
                ta(z, 3);
                break;
              case 2:
                w = Aa(z);
                if (!w || w.code != 1002 && w.code != 1001) {
                  z.A(3);
                  break;
                }
                u.method = "GET";
                a.g.hls.allowRangeRequestsToGuessMimeType && (u.headers.Range = "bytes=0-0");
                return F(z, Qz(a, u, e, { type: r }).promise, 6);
              case 6:
                v = z.h, q = v.headers["content-type"];
              case 3:
                if (!q) {
                  z.A(7);
                  break;
                }
                h = q.toLowerCase().split(";")[0];
                if (h != "application/octet-stream") {
                  z.A(8);
                  break;
                }
                if (v.data.byteLength) {
                  z.A(9);
                  break;
                }
                u.method = "GET";
                return F(z, Qz(a, u, e, { type: r }).promise, 10);
              case 10:
                v = z.h;
              case 9:
                lk(Vb(v.data)) && (h = "video/mp2t");
              case 8:
                if (h != "application/octet-stream") return z.return(h);
              case 7:
                return z.return(Wz(b));
            }
          });
        }
        function jA(a, b, c, d, e, f, g) {
          a && (a.width = Number(b) || void 0, a.height = Number(c) || void 0, a.frameRate = Number(d) || void 0, a.hdr = e || void 0, a.videoLayout = f || void 0, a.colorGamut = g || void 0);
        }
        function hz(a, b, c) {
          return Qz(a, Ug(b, a.g.retryParameters), 0, { type: c ? 2 : 3 });
        }
        function fz(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                if (!a.h) return h.return();
                ra(h, 2);
                b = Date.now();
                return F(h, a.update(), 4);
              case 4:
                c = Date.now();
                jz(a) && (d = (c - b) / 1e3, a.ac.sample(1, d), e = a.g.updatePeriod > 0 ? a.g.updatePeriod : a.o, f = Math.max(0, e - Wa(a.ac)), a.F.ia(f));
                ta(h, 3);
                break;
              case 2:
                g = Aa(h);
                if (!a.h) return h.return();
                if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.h.onError(g), h.return();
                g.severity = 1;
                a.h.onError(g);
                a.F.ia(0.1);
              case 3:
                if (!a.h) return h.return();
                a.h.onManifestUpdated();
                G(h);
            }
          });
        }
        function jz(a) {
          return a.Fa != gz;
        }
        function mz(a, b) {
          a.Fa = b;
          a.l && a.l.cd(!jz(a));
          jz(a) || a.F.stop();
        }
        function Qz(a, b, c, d) {
          if (!a.$) throw new U(2, 7, 7001);
          d || (d = {});
          d.isPreload = a.cc();
          b = a.h.networkingEngine.request(c, b, d);
          Og(a.$, b);
          return b;
        }
        function aA(a) {
          return a == "AES-128" || a == "AES-256" || a == "AES-256-CTR";
        }
        function ez(a, b, c, d) {
          var e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              if (c == "video/mp2t") throw new U(2, 4, 4040);
              if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
              e = Iy(b, "METHOD");
              f = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
              if (!f.includes(e)) return m.return(null);
              g = "cenc";
              e == "SAMPLE-AES" && (g = "cbcs");
              h = Iy(b, "URI");
              k2 = vc("com.apple.fps", g, [{ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }], h);
              var n = new Cb(h).Eb.replace(/-/g, "").toLowerCase();
              return (l = n.length === 32 && /^[0-9a-f]+$/.test(n) ? n : null) || !d ? m.A(2) : F(m, xA(a, d), 3);
            }
            m.g != 2 && (l = m.h);
            l && k2.keyIds.add(l);
            return m.return(k2);
          });
        }
        function bA(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, u, v, w, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                if (c == "video/mp2t") throw new U(2, 4, 4040);
                if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
                g = Iy(b, "METHOD");
                h = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
                if (!h.includes(g)) return y.return(null);
                k2 = Py(d(), Iy(b, "URI"), f);
                if (k2[0].startsWith("data:text/plain;base64,")) {
                  l = sc(oc(k2[0].split("data:text/plain;base64,").pop()));
                  y.A(2);
                  break;
                }
                m = k2.sort().join("");
                a.xa.has(m) || (n = Ug(k2, a.g.retryParameters), q = Qz(a, n, 6).promise, a.xa.set(m, q));
                return F(y, a.xa.get(m), 3);
              case 3:
                r = y.h, l = sc(r.data);
              case 2:
                u = "00000000000000000000000000000000";
                if (!e) {
                  y.A(4);
                  break;
                }
                return F(y, xA(a, e), 5);
              case 5:
                (v = y.h) && (u = v);
              case 4:
                return w = /* @__PURE__ */ new Map(), w.set(u, l), z = "cenc", g == "SAMPLE-AES" && (z = "cbcs"), y.return(wc(w, z));
            }
          });
        }
        function xA(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              c = null;
              if (a.ya.has(b)) return c = a.ya.get(b), g.A(2);
              d = wm(b.P(), b.Jc(), b.Hc(), a.g.retryParameters);
              e = $g;
              return F(g, Qz(a, d, e, { type: 0 }).promise, 3);
            }
            g.g != 2 && (f = g.h, b.pe(f.data), c = um(f.data), a.ya.set(b, c));
            return g.return(c);
          });
        }
        S("shaka.hls.HlsParser", dz);
        var Oz = (/* @__PURE__ */ new Map()).set("aac", "audio/aac").set("ac3", "audio/ac3").set("ec3", "audio/ec3").set("mp3", "audio/mpeg"), yA = (/* @__PURE__ */ new Map()).set("mp4", "audio/mp4").set("mp4a", "audio/mp4").set("m4s", "audio/mp4").set("m4i", "audio/mp4").set("m4a", "audio/mp4").set("m4f", "audio/mp4").set("cmfa", "audio/mp4").set("ts", "video/mp2t").set("tsa", "video/mp2t"), zA = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("mp4v", "video/mp4").set("m4s", "video/mp4").set("m4i", "video/mp4").set("m4v", "video/mp4").set("m4f", "video/mp4").set("cmfv", "video/mp4").set(
          "ts",
          "video/mp2t"
        ).set("tsv", "video/mp2t"), AA = (/* @__PURE__ */ new Map()).set("mp4", "application/mp4").set("m4s", "application/mp4").set("m4i", "application/mp4").set("m4f", "application/mp4").set("cmft", "application/mp4").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml"), BA = (/* @__PURE__ */ new Map()).set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif"), vA = (/* @__PURE__ */ new Map()).set("audio", yA).set("video", zA).set("text", AA).set("image", BA), wA = new Set(["video/mp2t"].concat(x(Je))), gz = "VOD", rA = "EVENT", Rz = "LIVE";
        Jc("application/x-mpegurl", function() {
          return new dz();
        });
        Jc("application/vnd.apple.mpegurl", function() {
          return new dz();
        });
        function CA(a) {
          return uv(a);
        }
        var DA = (/* @__PURE__ */ new Map()).set("com.microsoft.playready", CA).set("com.microsoft.playready.recommendation", CA).set("com.microsoft.playready.software", CA).set("com.microsoft.playready.hardware", CA);
        function EA() {
          var a = this;
          this.h = this.g = null;
          this.l = [];
          this.j = null;
          this.u = 1;
          this.i = null;
          this.F = new Va(5);
          this.o = new gf(function() {
            FA(a);
          });
          this.C = new Ng();
          this.m = /* @__PURE__ */ new Map();
          this.B = function() {
            return false;
          };
        }
        p = EA.prototype;
        p.configure = function(a, b) {
          this.g = a;
          b && (this.B = b);
        };
        p.start = function(a, b) {
          var c = this;
          return Q(function(d) {
            if (d.g == 1) return c.l = [a], c.h = b, F(d, GA(c), 2);
            if (!c.h) throw new U(2, 7, 7001);
            return d.return(c.j);
          });
        };
        function FA(a) {
          var b;
          Q(function(c) {
            switch (c.g) {
              case 1:
                return ra(c, 2), F(c, GA(a), 4);
              case 4:
                ta(c, 3);
                break;
              case 2:
                b = Aa(c), a.h && (b.severity = 1, a.h.onError(b));
              case 3:
                if (!a.h) return c.return();
                G(c);
            }
          });
        }
        p.stop = function() {
          this.g = this.h = null;
          this.l = [];
          this.j = null;
          this.o != null && (this.o.stop(), this.o = null);
          this.m.clear();
          return this.C.destroy();
        };
        p.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (c.g == 1) return ra(c, 2), F(c, GA(a), 4);
            if (c.g != 2) return ta(c, 0);
            b = Aa(c);
            if (!a.h || !b) return c.return();
            a.h.onError(b);
            G(c);
          });
        };
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function() {
        };
        p.setMediaElement = function() {
        };
        function GA(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return b = Ug(a.l, a.g.retryParameters), c = a.h.networkingEngine, d = Date.now(), e = c.request(0, b, { type: 5, isPreload: a.B() }), Og(a.C, e), F(k2, e.promise, 2);
            f = k2.h;
            if (!a.h) return k2.return();
            f.uri && !a.l.includes(f.uri) && a.l.unshift(f.uri);
            var l = f.uri, m = f.data, n = a.g.mss.manifestPreprocessor;
            if (n != Nn) {
              xb("manifest.mss.manifestPreprocessor configuration", "Please Use manifest.mss.manifestPreprocessorTXml instead.");
              m = yx(m, "SmoothStreamingMedia");
              if (!m) throw new U(
                2,
                4,
                4046,
                l
              );
              n(m);
              m = hc(m.outerHTML);
            }
            var q = nd(m, "SmoothStreamingMedia");
            if (!q) throw new U(2, 4, 4046, l);
            l = a.g.mss.manifestPreprocessorTXml;
            l != On && l(q);
            a.i || (a.i = new nl(null, 0));
            if (l = Dd(q, "IsLive", Nd, false)) throw new U(2, 4, 4047);
            a.i.cd(!l);
            n = Dd(q, "TimeScale", Ld, 1e7);
            m = Dd(q, "DVRWindowLength", Ld);
            l && (m === 0 || isNaN(m)) && (m = Infinity);
            var r = Dd(q, "CanSeek", Nd, false);
            m === 0 && r && (m = Infinity);
            r = null;
            m && m > 0 && (r = m / n);
            l && !isNaN(a.g.availabilityWindowOverride) && (r = a.g.availabilityWindowOverride);
            r == null && (r = Infinity);
            a.i.Hf(r);
            m = Dd(q, "Duration", Ld, Infinity);
            l || a.i.Ab(m / n);
            l = { variants: [], textStreams: [], timescale: n, duration: m / n };
            var u;
            r = wd(q, "Protection");
            n = a.g.mss.keySystemsBySystemId;
            m = [];
            r = t(r);
            for (u = r.next(); !u.done; u = r.next()) m = m.concat(wd(u.value, "ProtectionHeader"));
            if (m.length) {
              r = [];
              for (u = 0; u < m.length; u++) {
                var v = m[u], w = v.attributes.SystemID.toLowerCase(), z = n[w];
                if (z) {
                  var y;
                  a: {
                    if (y = sv(v)) {
                      y = t(zd(y, "DATA"));
                      for (var B = y.next(); !B.done; B = y.next()) if (B = Ad(B.value, "KID")) {
                        y = oc(xd(B));
                        y = new Uint8Array([
                          y[3],
                          y[2],
                          y[1],
                          y[0],
                          y[5],
                          y[4],
                          y[7],
                          y[6]
                        ].concat(x(y.slice(8))));
                        y = sc(y);
                        break a;
                      }
                    }
                    y = null;
                  }
                  B = oc(xd(v));
                  w = rc(w.replace(/-/g, ""));
                  w = [{ initData: xh(B, w, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: y }];
                  w = vc(z, "cenc", w);
                  y && w.keyIds.add(y);
                  if (z = DA.get(z)) w.licenseServerUri = z(v);
                  r.push(w);
                }
              }
              n = r;
            } else n = [];
            u = n;
            r = [];
            n = [];
            m = [];
            q = wd(q, "StreamIndex");
            q = t(q);
            for (v = q.next(); !v.done; v = q.next()) {
              v = v.value;
              z = wd(v, "QualityLevel");
              w = l.timescale;
              y = l.duration;
              B = wd(v, "c");
              for (var C = [], H = 0, D = 0; D < B.length; ++D) {
                var A = B[D], E = B[D + 1], J = Dd(A, "t", Ld), I = Dd(
                  A,
                  "d",
                  Ld
                );
                A = Dd(A, "r", Jd);
                if (!I) break;
                J = J != null ? J : H;
                (A = A || 0) && A--;
                if (A < 0) if (E) {
                  E = Dd(E, "t", Ld);
                  if (E == null) break;
                  else if (J >= E) break;
                  A = Math.ceil((E - J) / I) - 1;
                } else {
                  if (y == Infinity) break;
                  else if (J / w >= y) break;
                  A = Math.ceil((y * w - J) / I) - 1;
                }
                for (E = 0; E <= A; ++E) H = J + I, C.push({ start: J / w, end: H / w, Fh: J }), J = H;
              }
              w = C;
              z = t(z);
              for (y = z.next(); !y.done; y = z.next()) (y = HA(a, v, y.value, w, u, l)) && (y.type != "audio" || a.g.disableAudio ? y.type != "video" || a.g.disableVideo ? y.type != Ac || a.g.disableText || m.push(y) : n.push(y) : r.push(y));
            }
            q = [];
            r = t(r.length > 0 ? r : [null]);
            for (u = r.next(); !u.done; u = r.next()) for (u = u.value, v = t(n.length > 0 ? n : [null]), C = v.next(); !C.done; C = v.next()) z = q, w = z.push, y = a, B = u, C = C.value, D = 0, B && B.bandwidth && B.bandwidth > 0 && (D += B.bandwidth), C && C.bandwidth && C.bandwidth > 0 && (D += C.bandwidth), y = { id: y.u++, language: B ? B.language : "und", disabledUntilTime: 0, primary: !!B && B.primary || !!C && C.primary, audio: B, video: C, bandwidth: D, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, w.call(z, y);
            l.variants = q;
            l.textStreams = m;
            a.j ? (a.j.variants = l.variants, a.j.textStreams = l.textStreams, a.h.filter(a.j)) : (a.j = { presentationTimeline: a.i, variants: l.variants, textStreams: l.textStreams, imageStreams: [], offlineSessionIds: [], sequenceMode: a.g.mss.sequenceMode, ignoreManifestTimestampsInSegmentsMode: false, type: "MSS", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null }, a.i.lf());
            Promise.resolve();
            g = Date.now();
            h = (g - d) / 1e3;
            a.F.sample(1, h);
            G(k2);
          });
        }
        function HA(a, b, c, d, e, f) {
          var g = b.attributes.Type;
          if (g !== "audio" && g !== "video" && g !== "text") return $a("Ignoring unrecognized type:", g), null;
          var h = b.attributes.Language, k2 = a.u++, l = Dd(c, "Bitrate", Kd), m = Dd(c, "MaxWidth", Kd), n = Dd(c, "MaxHeight", Kd), q = Dd(c, "Channels", Kd), r = Dd(c, "SamplingRate", Kd), u = f.duration;
          d.length && (u = d[d.length - 1].end - d[0].start);
          var v = a.i.getDuration();
          a.i.Ab(Math.min(u, v));
          (v = b.attributes.Name) && (v += c.attributes.Index);
          v || (v = String(k2));
          var w = {
            id: k2,
            originalId: v,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: "",
            codecs: "",
            frameRate: void 0,
            pixelAspectRatio: void 0,
            bandwidth: l || 0,
            width: m || void 0,
            height: n || void 0,
            kind: "",
            encrypted: e.length > 0,
            drmInfos: e,
            keyIds: /* @__PURE__ */ new Set(),
            language: of(h || "und"),
            originalLanguage: h,
            label: "",
            type: "",
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: [],
            roles: [],
            forced: false,
            channelsCount: q,
            audioSamplingRate: r,
            spatialAudio: false,
            closedCaptions: null,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            matchedStreams: [],
            mssPrivateData: { duration: u, timescale: f.timescale, codecPrivateData: null },
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          if (e = b.attributes.Subtype) (e = IA.get(e)) && w.roles.push(e), e === "main" && (w.primary = true);
          e = c.attributes.FourCC;
          if (e === null || e === "") e = b.attributes.FourCC;
          if (!e) {
            if (g === "audio") e = "AAC";
            else if (g === "video") return $a('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'), null;
          }
          if (!JA.includes(e.toUpperCase())) return $a("Codec not supported:", e), null;
          c = KA(c, g, e, w);
          w.mssPrivateData.codecPrivateData = c;
          switch (g) {
            case "audio":
              if (!c) return $a("Quality unsupported without CodecPrivateData", g), null;
              w.type = "audio";
              w.mimeType = "mss/audio/mp4";
              w.codecs = LA(e, c);
              break;
            case "video":
              if (!c) return $a("Quality unsupported without CodecPrivateData", g), null;
              w.type = "video";
              w.mimeType = "mss/video/mp4";
              w.codecs = MA(c);
              break;
            case "text":
              if (w.type = Ac, w.mimeType = "application/mp4", e === "TTML" || e === "DFXP") w.codecs = "stpp";
          }
          w.fullMimeTypes.add(Ie(w.mimeType, w.codecs));
          w.createSegmentIndex = function() {
            if (w.segmentIndex) return Promise.resolve();
            if (a.m.has(w.id)) var z = a.m.get(w.id);
            else z = [], w.type == "video" && (z = w.mssPrivateData.codecPrivateData.split("00000001").slice(1)), z = { id: w.id, type: w.type, codecs: w.codecs, encrypted: w.encrypted, timescale: w.mssPrivateData.timescale, duration: w.mssPrivateData.duration, Cb: z, Ga: new Uint8Array([]), Sa: new Uint8Array([]), Za: 0, $a: 0, data: null, stream: w }, z = Ki(new Ji([z])), a.m.set(w.id, z);
            z = NA(a, new oj(function() {
              return [];
            }, 0, null, am(w), w.mssPrivateData.timescale, z, null, w.encrypted), w, b, d);
            w.segmentIndex = new Ml(z);
            return Promise.resolve();
          };
          w.closeSegmentIndex = function() {
            w.segmentIndex && (w.segmentIndex.release(), w.segmentIndex = null);
          };
          return w;
        }
        function KA(a, b, c, d) {
          if (a = a.attributes.CodecPrivateData) return a;
          if (b !== "audio") return null;
          b = d.channelsCount || 2;
          a = d.audioSamplingRate || 44100;
          var e = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
          d = e[a];
          if (c === "AACH") return c = new Uint8Array(4), a = e[a * 2], c[0] = 40 | d >> 1, c[1] = d << 7 | b << 3 | a >> 1, c[2] = a << 7 | 8, c[3] = 0, b = new Uint16Array(2), b[0] = (c[0] << 8) + c[1], b[1] = (c[2] << 8) + c[3], b[0].toString(16) + b[1].toString(16);
          c = new Uint8Array(2);
          c[0] = 16 | d >> 1;
          c[1] = d << 7 | b << 3;
          b = new Uint16Array(1);
          b[0] = (c[0] << 8) + c[1];
          return b[0].toString(16);
        }
        function LA(a, b) {
          var c = 0;
          a === "AACH" && (c = 5);
          b ? c === 0 && (c = (parseInt(b.substr(0, 2), 16) & 248) >> 3) : (c = 2, a === "AACH" && (c = 5));
          return "mp4a.40." + c;
        }
        function MA(a) {
          var b = /00000001[0-9]7/.exec(a);
          return b.length && a ? "avc1." + a.substr(a.indexOf(b[0]) + 10, 6) : "";
        }
        function NA(a, b, c, d, e) {
          var f = d.attributes.Url.replace("{bitrate}", String(c.bandwidth));
          d = [];
          e = t(e);
          for (var g = e.next(), h = {}; !g.done; h = { Lf: void 0 }, g = e.next()) h.Lf = g.value, d.push(new qj(h.Lf.start, h.Lf.end, /* @__PURE__ */ (function(k2) {
            return function() {
              return uc(a.l, [f.replace("{start time}", String(k2.Lf.Fh))]);
            };
          })(h), 0, null, b, 0, 0, c.mssPrivateData.duration));
          return d;
        }
        S("shaka.mss.MssParser", EA);
        var JA = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "), IA = (/* @__PURE__ */ new Map()).set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
        Jc("application/vnd.ms-sstr+xml", function() {
          return new EA();
        });
        function OA(a, b, c, d, e, f, g) {
          if (c >= 200 && c <= 299 && c != 202 || c == 304) return { uri: e || d, originalUri: d, data: b, status: c, headers: a, fromCache: !!a["x-shaka-from-cache"], originalRequest: f };
          f = null;
          try {
            f = fc(b);
          } catch (h) {
          }
          throw new U(c == 401 || c == 403 ? 2 : 1, 1, 1001, d, c, f, a, g, e || d);
        }
        ;
        function PA() {
        }
        function QA(a, b, c, d, e, f) {
          var g = new RA();
          try {
            fh(b.headers).forEach(function(m, n) {
              g.append(n, m);
            });
          } catch (m) {
            return Eg(new U(1, 1, 1002, a, m, c));
          }
          var h = new SA(), k2 = { Qh: false, dj: false };
          a = TA(a, b, c, { body: b.body || void 0, headers: g, method: b.method, signal: h.signal, credentials: b.allowCrossSiteCredentials ? "include" : void 0 }, k2, d, e, b.streamDataCallback, f.minBytesForProgressEvents || 0);
          a = new Dg(a, function() {
            k2.Qh = true;
            h.abort();
            return Promise.resolve();
          });
          if (b = b.retryParameters.timeout) {
            var l = new gf(function() {
              k2.dj = true;
              h.abort();
            });
            l.ia(b / 1e3);
            a.finally(function() {
              l.stop();
            });
          }
          return a;
        }
        function TA(a, b, c, d, e, f, g, h, k2) {
          var l, m, n, q, r, u, v, w, z, y, B, C, H, D, A;
          return Q(function(E) {
            switch (E.g) {
              case 1:
                return l = UA, m = VA, q = new ArrayBuffer(0), u = r = 0, v = {}, w = Date.now(), ra(E, 2), F(E, l(a, d), 4);
              case 4:
                n = E.h;
                v = WA(n.headers);
                g(v);
                if (d.method == "HEAD") {
                  E.A(5);
                  break;
                }
                y = (z = n.headers.get("Content-Length")) ? parseInt(z, 10) : 0;
                if (!n.body) return F(E, n.arrayBuffer(), 9);
                B = n.clone().body.getReader();
                C = function(J) {
                  function I() {
                    var K, L, O, P;
                    return Q(function(N) {
                      switch (N.g) {
                        case 1:
                          return ra(N, 2), F(N, B.read(), 4);
                        case 4:
                          K = N.h;
                          ta(N, 3);
                          break;
                        case 2:
                          return Aa(N), N.return();
                        case 3:
                          if (K.done) {
                            N.A(5);
                            break;
                          }
                          r += K.value.byteLength;
                          if (!h) {
                            N.A(5);
                            break;
                          }
                          return F(N, h(K.value), 5);
                        case 5:
                          L = Date.now();
                          O = r - u;
                          if (L - w > 100 && O >= k2 || K.done) P = K.done ? 0 : y - r, f(L - w, O, P), u = r, w = L;
                          K.done ? J.close() : (J.enqueue(K.value), I());
                          G(N);
                      }
                    });
                  }
                  I();
                };
                new m({ start: C });
                return F(E, n.arrayBuffer(), 8);
              case 8:
                q = E.h;
                E.A(5);
                break;
              case 9:
                q = E.h, H = Date.now(), f(H - w, q.byteLength, 0);
              case 5:
                b.headers.Range && (D = b.headers.Range.replace("bytes=", "").split("-").filter(function(J) {
                  return J;
                }).map(function(J) {
                  return parseInt(
                    J,
                    10
                  );
                }), D.length == 2 && q.byteLength != D[1] - D[0] + 1 && $a("Payload length does not match range requested bytes", b, n));
                ta(E, 3);
                break;
              case 2:
                A = Aa(E);
                if (e.Qh) throw new U(1, 1, 7001, a, c);
                if (e.dj) throw new U(1, 1, 1003, a, c);
                throw new U(1, 1, 1002, a, A, c);
              case 3:
                return E.return(OA(v, q, n.status, a, n.url, b, c));
            }
          });
        }
        function WA(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d.trim()] = c;
          });
          return b;
        }
        function XA() {
          if (window2.ReadableStream) try {
            new ReadableStream({});
          } catch (a) {
            return false;
          }
          else return false;
          if (window2.Response) {
            if (!new Response("").body) return false;
          } else return false;
          return !(!window2.fetch || "polyfill" in window2.fetch || !window2.AbortController);
        }
        S("shaka.net.HttpFetchPlugin", PA);
        PA.isSupported = XA;
        PA.parse = QA;
        var UA = window2.fetch, SA = window2.AbortController, VA = window2.ReadableStream, RA = window2.Headers;
        XA() && (Qg("http", QA, 2, true), Qg("https", QA, 2, true), Qg("blob", QA, 2, true));
        function YA() {
        }
        function ZA(a, b, c, d, e, f) {
          var g = new $A(), h = Date.now(), k2 = 0, l = new Promise(function(m, n) {
            g.open(b.method, a, true);
            g.responseType = "arraybuffer";
            g.timeout = b.retryParameters.timeout;
            g.withCredentials = b.allowCrossSiteCredentials;
            var q = {};
            g.onabort = function() {
              n(new U(1, 1, 7001, a, c));
            };
            g.onreadystatechange = function() {
              if (g.readyState === XMLHttpRequest.HEADERS_RECEIVED) {
                var u = g.getAllResponseHeaders().trim().split("\r\n"), v = {};
                u = t(u);
                for (var w = u.next(); !w.done; w = u.next()) w = w.value.split(": "), v[w[0].toLowerCase()] = w.slice(1).join(": ");
                q = v;
                e(q);
              }
            };
            g.onload = function(u) {
              var v = g.response;
              try {
                d(Date.now() - h, u.loaded - k2, 0);
                var w = OA(q, v, g.status, a, g.responseURL, b, c);
                m(w);
              } catch (z) {
                n(z);
              }
            };
            g.onerror = function(u) {
              n(new U(1, 1, 1002, a, u, c));
            };
            g.ontimeout = function() {
              n(new U(1, 1, 1003, a, c));
            };
            g.onprogress = function(u) {
              var v = Date.now(), w = f.minBytesForProgressEvents || 0, z = u.loaded - k2;
              if (v - h > 100 && z >= w || u.lengthComputable && u.loaded == u.total) d(v - h, z, g.readyState == 4 ? 0 : u.total - u.loaded), k2 = u.loaded, h = v;
            };
            for (var r in b.headers) try {
              g.setRequestHeader(
                r.toLowerCase(),
                b.headers[r]
              );
            } catch (u) {
              throw new U(1, 1, 1002, a, u, c);
            }
            g.send(b.body);
          });
          return new Dg(l, function() {
            g.abort();
            return Promise.resolve();
          });
        }
        S("shaka.net.HttpXHRPlugin", YA);
        YA.parse = ZA;
        var $A = window2.XMLHttpRequest;
        Qg("http", ZA, 1, true);
        Qg("https", ZA, 1, true);
        Qg("blob", ZA, 1, true);
        function aB(a, b, c, d, e) {
          this.g = a;
          this.i = b;
          this.groupId = c;
          this.h = d;
          this.j = e;
        }
        function bB(a) {
          var b = a.$b(false);
          return b ? nc(b) : a.P().map(function(c) {
            return "{" + encodeURI(c.split("#xywh=")[0]) + "}";
          }).join("") + ":" + a.startByte + ":" + a.endByte;
        }
        function cB(a, b) {
          return wm(a.g.P(), a.g.startByte, a.g.endByte, b.streaming.retryParameters);
        }
        ;
        function dB() {
          this.g = this.j = this.i = 0;
          this.h = /* @__PURE__ */ new Map();
          this.l = 0;
        }
        function eB(a, b) {
          a.i += b;
          var c = a.l;
          a.l++;
          a.h.set(c, b);
          return c;
        }
        dB.prototype.close = function(a, b) {
          if (this.h.has(a)) {
            var c = this.h.get(a);
            this.h.delete(a);
            this.j += c;
            this.g += b;
          }
        };
        function fB(a) {
          return a.i == 0 ? 0 : a.j / a.i;
        }
        ;
        function gB(a) {
          var b = this;
          this.u = a;
          this.i = /* @__PURE__ */ new Map();
          this.h = new bh(function() {
            return hB(b).catch(function() {
            });
          });
          this.j = [];
          this.o = function() {
          };
          this.m = function() {
          };
          this.g = new dB();
          this.l = false;
        }
        gB.prototype.destroy = function() {
          return this.h.destroy();
        };
        function iB(a, b, c) {
          a.o = b;
          a.m = c;
        }
        function hB(a) {
          a.l = true;
          var b = a.j.map(function(c) {
            return c();
          });
          a.j = [];
          return Promise.all(b);
        }
        gB.prototype.queue = function(a, b, c, d, e) {
          var f = this;
          ch(this.h);
          var g = (this.i.get(a) || Promise.resolve()).then(function() {
            var h, k2, l, m, n, q, r;
            return Q(function(u) {
              if (u.g == 1) return F(u, jB(f, b), 2);
              h = u.h;
              if (f.h.g) throw new U(2, 9, 7001);
              if (d) for (m in k2 = Vb(h), l = new wh(k2), l.data) n = Number(m), q = l.data[n], r = l.g[n], f.m(q, r);
              f.g.close(c, h.byteLength);
              f.o(fB(f.g), f.g.g);
              return u.return(e(h));
            });
          });
          this.i.set(a, g);
          return g;
        };
        function kB(a, b, c, d, e, f) {
          ch(a.h);
          var g = (a.i.get(b) || Promise.resolve()).then(function() {
            if (a.h.g) throw new U(2, 9, 7001);
            if (e) {
              var h = Vb(c);
              h = new wh(h);
              for (var k2 in h.data) {
                var l = Number(k2);
                a.m(h.data[l], h.g[l]);
              }
            }
            a.g.close(d, c.byteLength);
            a.o(fB(a.g), a.g.g);
            return f(c);
          });
          a.i.set(b, g);
        }
        function lB(a) {
          return Q(function(b) {
            return b.g == 1 ? F(b, Promise.all(a.i.values()), 2) : b.return(a.g.g);
          });
        }
        function jB(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) return c = $g, d = a.u.request(c, b), e = function() {
              return d.abort();
            }, a.j.push(e), F(g, d.promise, 2);
            f = g.h;
            gb(a.j, e);
            return g.return(f.data);
          });
        }
        ;
        function mB(a, b) {
          var c = this;
          this.i = a;
          this.h = a.objectStore(b);
          this.g = new Cg();
          a.onabort = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.onerror = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.oncomplete = function() {
            c.g.resolve();
          };
        }
        mB.prototype.abort = function() {
          var a = this;
          return Q(function(b) {
            if (b.g == 1) {
              try {
                a.i.abort();
              } catch (c) {
              }
              ra(b, 2);
              return F(b, a.g, 4);
            }
            if (b.g != 2) return ta(b, 0);
            Aa(b);
            G(b);
          });
        };
        function nB(a, b) {
          return new Promise(function(c, d) {
            var e = a.h.openCursor();
            e.onerror = d;
            e.onsuccess = function() {
              var f;
              return Q(function(g) {
                if (g.g == 1) {
                  if (e.result == null) return c(), g.return();
                  f = e.result;
                  return F(g, b(f.key, f.value, f), 2);
                }
                f.continue();
                G(g);
              });
            };
          });
        }
        mB.prototype.store = function() {
          return this.h;
        };
        mB.prototype.promise = function() {
          return this.g;
        };
        function oB(a) {
          this.h = a;
          this.g = [];
        }
        oB.prototype.destroy = function() {
          return Promise.all(this.g.map(function(a) {
            return a.abort();
          }));
        };
        function pB(a, b) {
          return qB(a, b, "readwrite");
        }
        function qB(a, b, c) {
          c = a.h.transaction([b], c);
          var d = new mB(c, b);
          a.g.push(d);
          d.promise().then(function() {
            gb(a.g, d);
          }, function() {
            gb(a.g, d);
          });
          return d;
        }
        ;
        function rB(a, b, c) {
          this.h = new oB(a);
          this.i = b;
          this.g = c;
        }
        p = rB.prototype;
        p.destroy = function() {
          return this.h.destroy();
        };
        p.hasFixedKeySpace = function() {
          return true;
        };
        p.addSegments = function() {
          return sB(this.i);
        };
        p.removeSegments = function(a, b) {
          return tB(this, this.i, a, b);
        };
        p.getSegments = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (d.g == 1) return F(d, uB(b, b.i, a), 2);
            c = d.h;
            return d.return(c.map(function(e) {
              return b.Sh(e);
            }));
          });
        };
        p.addManifests = function() {
          return sB(this.g);
        };
        p.updateManifest = function() {
          return Promise.reject(new U(2, 9, 9016, "Cannot modify values in " + this.g));
        };
        function vB(a, b, c) {
          a = pB(a.h, a.g);
          var d = a.store();
          d.get(b).onsuccess = function() {
            d.put(c, b);
          };
          return a.promise();
        }
        p.updateManifestExpiration = function(a, b) {
          var c = pB(this.h, this.g), d = c.store();
          d.get(a).onsuccess = function(e) {
            if (e = e.target.result) e.expiration = b, d.put(e, a);
          };
          return c.promise();
        };
        p.removeManifests = function(a, b) {
          return tB(this, this.g, a, b);
        };
        p.getManifests = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (d.g == 1) return F(d, uB(b, b.g, a), 2);
            c = d.h;
            return d.return(Promise.all(c.map(function(e) {
              return b.Rd(e);
            })));
          });
        };
        p.getAllManifests = function() {
          var a = this, b, c;
          return Q(function(d) {
            return d.g == 1 ? (b = qB(a.h, a.g, "readonly"), c = /* @__PURE__ */ new Map(), F(d, nB(b, function(e, f) {
              var g;
              return Q(function(h) {
                if (h.g == 1) return F(h, a.Rd(f), 2);
                g = h.h;
                c.set(e, g);
                G(h);
              });
            }), 2)) : d.g != 3 ? F(d, b.promise(), 3) : d.return(c);
          });
        };
        p.Sh = function(a) {
          return a;
        };
        p.Rd = function(a) {
          return Promise.resolve(a);
        };
        function sB(a) {
          return Promise.reject(new U(2, 9, 9011, "Cannot add new value to " + a));
        }
        p.add = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              d = pB(c.h, a);
              e = d.store();
              f = [];
              g = t(b);
              h = g.next();
              for (k2 = {}; !h.done; k2 = { dh: void 0 }, h = g.next()) l = h.value, k2.dh = e.add(l), k2.dh.onsuccess = /* @__PURE__ */ (function(n) {
                return function() {
                  f.push(n.dh.result);
                };
              })(k2);
              return F(m, d.promise(), 2);
            }
            return m.return(f);
          });
        };
        function tB(a, b, c, d) {
          a = pB(a.h, b);
          b = a.store();
          c = t(c);
          for (var e = c.next(), f = {}; !e.done; f = { Pg: void 0 }, e = c.next()) f.Pg = e.value, b.delete(f.Pg).onsuccess = /* @__PURE__ */ (function(g) {
            return function() {
              return d(g.Pg);
            };
          })(f);
          return a.promise();
        }
        function uB(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              d = qB(a.h, b, "readonly");
              e = d.store();
              f = {};
              g = [];
              h = t(c);
              k2 = h.next();
              for (l = {}; !k2.done; l = { Bf: void 0, gf: void 0 }, k2 = h.next()) l.gf = k2.value, l.Bf = e.get(l.gf), l.Bf.onsuccess = /* @__PURE__ */ (function(n) {
                return function() {
                  n.Bf.result == void 0 && g.push(n.gf);
                  f[n.gf] = n.Bf.result;
                };
              })(l);
              return F(m, d.promise(), 2);
            }
            if (g.length) throw new U(2, 9, 9012, "Could not find values for " + g);
            return m.return(c.map(function(n) {
              return f[n];
            }));
          });
        }
        ;
        function wB(a) {
          this.g = new oB(a);
        }
        wB.prototype.destroy = function() {
          return this.g.destroy();
        };
        wB.prototype.getAll = function() {
          var a = this, b, c;
          return Q(function(d) {
            return d.g == 1 ? (b = qB(a.g, "session-ids", "readonly"), c = [], F(d, nB(b, function(e, f) {
              c.push(f);
            }), 2)) : d.g != 3 ? F(d, b.promise(), 3) : d.return(c);
          });
        };
        wB.prototype.add = function(a) {
          var b = pB(this.g, "session-ids"), c = b.store();
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) c.add(d.value);
          return b.promise();
        };
        wB.prototype.remove = function(a) {
          var b = this, c;
          return Q(function(d) {
            return d.g == 1 ? (c = pB(b.g, "session-ids"), F(d, nB(c, function(e, f, g) {
              a.includes(f.sessionId) && g.delete();
            }), 2)) : F(d, c.promise(), 0);
          });
        };
        function xB() {
          this.g = /* @__PURE__ */ new Map();
        }
        xB.prototype.destroy = function() {
          for (var a = [], b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) a.push(c.value.destroy());
          this.g.clear();
          return Promise.all(a);
        };
        xB.prototype.init = function() {
          var a = this;
          yB.forEach(function(e, f) {
            (e = e()) && a.g.set(f, e);
          });
          for (var b = [], c = t(this.g.values()), d = c.next(); !d.done; d = c.next()) b.push(d.value.init());
          return Promise.all(b);
        };
        function zB(a) {
          var b = null;
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              e.hasFixedKeySpace() || b || (b = { path: { Qb: d, bb: f }, bb: e });
            });
          });
          if (b) return b;
          throw new U(2, 9, 9013, "Could not find a cell that supports add-operations");
        }
        function AB(a, b) {
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              b({ Qb: d, bb: f }, e);
            });
          });
        }
        function BB(a, b, c) {
          a = a.g.get(b);
          if (!a) throw new U(2, 9, 9013, "Could not find mechanism with name " + b);
          b = a.getCells().get(c);
          if (!b) throw new U(2, 9, 9013, "Could not find cell with name " + c);
          return b;
        }
        function CB(a, b) {
          a.g.forEach(function(c) {
            b(c.getEmeSessionCell());
          });
        }
        function DB(a) {
          var b = Array.from(a.g.keys());
          if (!b.length) throw new U(2, 9, 9e3, "No supported storage mechanisms found");
          return a.g.get(b[0]).getEmeSessionCell();
        }
        function EB(a) {
          var b, c, d;
          return Q(function(e) {
            return e.g == 1 ? (b = Array.from(a.g.values()), c = b.length > 0, c || (d = yB, d.forEach(function(f) {
              (f = f()) && b.push(f);
            })), F(e, Promise.all(b.map(function(f) {
              return f.erase();
            })), 2)) : c ? e.A(0) : F(e, Promise.all(b.map(function(f) {
              return f.destroy();
            })), 0);
          });
        }
        function FB(a, b) {
          yB.set(a, b);
        }
        S("shaka.offline.StorageMuxer", xB);
        xB.unregister = function(a) {
          yB.delete(a);
        };
        xB.register = FB;
        xB.prototype.destroy = xB.prototype.destroy;
        var yB = /* @__PURE__ */ new Map();
        function GB() {
          rB.apply(this, arguments);
        }
        la(GB, rB);
        GB.prototype.updateManifestExpiration = function(a, b) {
          var c = this, d, e, f;
          return Q(function(g) {
            d = pB(c.h, c.g);
            e = d.store();
            f = new Cg();
            e.get(a).onsuccess = function(h) {
              (h = h.target.result) ? (h.expiration = b, e.put(h), f.resolve()) : f.reject(new U(2, 9, 9012, "Could not find values for " + a));
            };
            return F(g, Promise.all([d.promise(), f]), 0);
          });
        };
        GB.prototype.Rd = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime, e = d - a.periods[c].startTime, f = HB(a.periods[c], e), b.push(f);
              return F(h, Iw(b), 2);
            }
            g = h.h;
            return h.return({ creationTime: 0, originalManifestUri: a.originalManifestUri, duration: a.duration, size: a.size, expiration: a.expiration == null ? Infinity : a.expiration, streams: g, sessionIds: a.sessionIds, drmInfo: a.drmInfo, appMetadata: a.appMetadata, sequenceMode: false });
          });
        };
        function HB(a, b) {
          IB(a);
          for (var c = t(a.streams), d = c.next(); !d.done; d = c.next()) ;
          return a.streams.map(function(e) {
            return JB(e, a.startTime, b);
          });
        }
        function JB(a, b, c) {
          var d = a.initSegmentUri ? KB(a.initSegmentUri) : null, e = b + a.presentationTimeOffset, f = b + c;
          return { id: a.id, originalId: null, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: void 0, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, initSegmentKey: d, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(g) {
            var h = KB(g.uri);
            return { startTime: b + g.startTime, endTime: b + g.endTime, dataKey: h, initSegmentKey: d, appendWindowStart: b, appendWindowEnd: f, timestampOffset: e, tilesLayout: "", mimeType: null, codecs: null, thumbnailSprite: null };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        GB.prototype.Sh = function(a) {
          return { data: a.data };
        };
        function KB(a) {
          var b;
          if ((b = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)) || (b = /^offline:segment\/([0-9]+)$/.exec(a))) return Number(b[1]);
          throw new U(2, 9, 9004, "Could not parse uri " + a);
        }
        function IB(a) {
          var b = a.streams.filter(function(h) {
            return h.contentType == "audio";
          });
          a = a.streams.filter(function(h) {
            return h.contentType == "video";
          });
          if (!b.every(function(h) {
            return h.variantIds;
          }) || !a.every(function(h) {
            return h.variantIds;
          })) {
            for (var c = t(b), d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = t(a);
            for (d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = 0;
            if (a.length && !b.length) {
              d = c++;
              for (var e = t(a), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            }
            if (!a.length && b.length) for (d = c++, e = t(b), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            if (a.length && b.length) for (b = t(b), d = b.next(); !d.done; d = b.next()) for (d = d.value, e = t(a), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = c++;
              d.variantIds.push(g);
              f.variantIds.push(g);
            }
          }
        }
        ;
        function LB() {
          rB.apply(this, arguments);
        }
        la(LB, rB);
        LB.prototype.Rd = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) {
                d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime;
                e = d - a.periods[c].startTime;
                for (var k2 = a.periods[c], l = [], m = t(k2.streams), n = m.next(); !n.done; n = m.next()) n = n.value, n.variantIds.length != 0 && l.push(MB(n, k2.startTime, k2.startTime + e));
                f = l;
                b.push(f);
              }
              return F(h, Iw(b), 2);
            }
            g = h.h;
            return h.return({ appMetadata: a.appMetadata, creationTime: 0, drmInfo: a.drmInfo, duration: a.duration, expiration: a.expiration == null ? Infinity : a.expiration, originalManifestUri: a.originalManifestUri, sessionIds: a.sessionIds, size: a.size, streams: g, sequenceMode: false });
          });
        };
        function MB(a, b, c) {
          return { id: a.id, originalId: a.originalId, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: a.pixelAspectRatio, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(d) {
            return {
              startTime: b + d.startTime,
              endTime: b + d.endTime,
              initSegmentKey: a.initSegmentKey,
              appendWindowStart: b,
              appendWindowEnd: c,
              timestampOffset: b - a.presentationTimeOffset,
              dataKey: d.dataKey,
              tilesLayout: "",
              mimeType: null,
              codecs: null,
              thumbnailSprite: null
            };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        ;
        function NB() {
          rB.apply(this, arguments);
        }
        la(NB, rB);
        p = NB.prototype;
        p.hasFixedKeySpace = function() {
          return false;
        };
        p.addSegments = function(a) {
          return this.add(this.i, a);
        };
        p.addManifests = function(a) {
          return this.add(this.g, a);
        };
        p.updateManifest = function(a, b) {
          return vB(this, a, b);
        };
        p.Rd = function(a) {
          a.expiration == null && (a.expiration = Infinity);
          return Promise.resolve(a);
        };
        function OB() {
          this.m = this.j = this.i = this.h = this.g = this.l = null;
        }
        p = OB.prototype;
        p.init = function() {
          var a = this, b = new Cg(), c = false, d = new gf(function() {
            c = true;
            b.reject(new U(2, 9, 9017));
          });
          typeof PB === "number" && PB > 0 && d.ia(PB);
          var e = window2.indexedDB.open("shaka_offline_db", 5);
          e.onsuccess = function() {
            if (!c) {
              d.stop();
              var f = e.result;
              a.l = f;
              var g = f.objectStoreNames;
              g = g.contains("manifest") && g.contains("segment") ? new GB(f, "segment", "manifest") : null;
              a.g = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v2") && g.contains("segment-v2") ? new LB(f, "segment-v2", "manifest-v2") : null;
              a.h = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v3") && g.contains("segment-v3") ? new LB(f, "segment-v3", "manifest-v3") : null;
              a.i = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v5") && g.contains("segment-v5") ? new NB(f, "segment-v5", "manifest-v5") : null;
              a.j = g;
              f = f.objectStoreNames.contains("session-ids") ? new wB(f) : null;
              a.m = f;
              b.resolve();
            }
          };
          e.onupgradeneeded = function() {
            for (var f = e.result, g = t(["segment-v5", "manifest-v5", "session-ids"]), h = g.next(); !h.done; h = g.next()) h = h.value, f.objectStoreNames.contains(h) || f.createObjectStore(h, { autoIncrement: true });
          };
          e.onerror = function(f) {
            c || (d.stop(), b.reject(new U(2, 9, 9001, e.error)), f.preventDefault());
          };
          return b;
        };
        p.destroy = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.A(2);
                  break;
                }
                return F(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.A(4);
                  break;
                }
                return F(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.A(6);
                  break;
                }
                return F(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.A(8);
                  break;
                }
                return F(b, a.j.destroy(), 8);
              case 8:
                if (!a.m) {
                  b.A(10);
                  break;
                }
                return F(b, a.m.destroy(), 10);
              case 10:
                a.l && a.l.close(), G(b);
            }
          });
        };
        p.getCells = function() {
          var a = /* @__PURE__ */ new Map();
          this.g && a.set("v1", this.g);
          this.h && a.set("v2", this.h);
          this.i && a.set("v3", this.i);
          this.j && a.set("v5", this.j);
          return a;
        };
        p.getEmeSessionCell = function() {
          return this.m;
        };
        p.erase = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.A(2);
                  break;
                }
                return F(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.A(4);
                  break;
                }
                return F(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.A(6);
                  break;
                }
                return F(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.A(8);
                  break;
                }
                return F(b, a.j.destroy(), 8);
              case 8:
                return a.l && a.l.close(), F(b, QB(), 10);
              case 10:
                return a.l = null, a.g = null, a.h = null, a.i = null, a.j = null, F(b, a.init(), 0);
            }
          });
        };
        function QB() {
          var a = new Cg(), b = window2.indexedDB.deleteDatabase("shaka_offline_db");
          b.onblocked = function() {
          };
          b.onsuccess = function() {
            a.resolve();
          };
          b.onerror = function(c) {
            a.reject(new U(2, 9, 9001, b.error));
            c.preventDefault();
          };
          return a;
        }
        var PB = 5;
        S("shaka.offline.indexeddb.StorageMechanismOpenTimeout", PB);
        FB("idb", function() {
          return rb().yh() ? new OB() : null;
        });
        function RB(a, b, c, d) {
          this.g = a;
          this.i = b;
          this.h = c;
          this.l = d;
          this.j = ["offline:", a, "/", b, "/", c, "/", d].join("");
        }
        RB.prototype.Qb = function() {
          return this.i;
        };
        RB.prototype.bb = function() {
          return this.h;
        };
        RB.prototype.key = function() {
          return this.l;
        };
        RB.prototype.toString = function() {
          return this.j;
        };
        function SB(a) {
          a = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);
          if (a == null) return null;
          var b = a[1];
          if (b != "manifest" && b != "segment") return null;
          var c = a[2];
          if (!c) return null;
          var d = a[3];
          return d && b != null ? new RB(b, c, d, Number(a[4])) : null;
        }
        ;
        function TB(a, b) {
          this.h = a;
          this.g = b;
        }
        function UB(a, b) {
          var c = new nl(null, 0);
          c.Ab(b.duration);
          var d = b.streams.filter(function(l) {
            return l.type == "audio";
          }), e = b.streams.filter(function(l) {
            return l.type == "video";
          });
          d = VB(a, d, e, c);
          e = b.streams.filter(function(l) {
            return l.type == Ac;
          }).map(function(l) {
            return WB(a, l, c);
          });
          var f = b.streams.filter(function(l) {
            return l.type == "image";
          }).map(function(l) {
            return WB(a, l, c);
          }), g = b.drmInfo ? [b.drmInfo] : [];
          if (b.drmInfo) for (var h = t(d.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.audio && k2.audio.encrypted && (k2.audio.drmInfos = g), k2.video && k2.video.encrypted && (k2.video.drmInfos = g);
          return { presentationTimeline: c, offlineSessionIds: b.sessionIds, variants: Array.from(d.values()), textStreams: e, imageStreams: f, sequenceMode: b.sequenceMode || false, ignoreManifestTimestampsInSegmentsMode: false, type: b.type || "UNKNOWN", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null };
        }
        function VB(a, b, c, d) {
          for (var e = /* @__PURE__ */ new Set(), f = t(b), g = f.next(); !g.done; g = f.next()) {
            g = t(g.value.variantIds);
            for (var h = g.next(); !h.done; h = g.next()) e.add(h.value);
          }
          f = t(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = t(g.value.variantIds), h = g.next(); !h.done; h = g.next()) e.add(h.value);
          f = /* @__PURE__ */ new Map();
          e = t(e);
          for (g = e.next(); !g.done; g = e.next()) g = g.value, f.set(g, { id: g, language: "", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 0, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] });
          b = t(b);
          for (e = b.next(); !e.done; e = b.next()) for (g = e.value, e = WB(a, g, d), g = t(g.variantIds), h = g.next(); !h.done; h = g.next()) h = f.get(h.value), h.language = e.language, h.primary = h.primary || e.primary, h.audio = e;
          c = t(c);
          for (b = c.next(); !b.done; b = c.next()) for (e = b.value, b = WB(a, e, d), e = t(e.variantIds), g = e.next(); !g.done; g = e.next()) g = f.get(g.value), g.primary = g.primary || b.primary, g.video = b;
          return f;
        }
        function WB(a, b, c) {
          var d = b.segments.map(function(e) {
            return XB(a, e, b);
          });
          c.ie(d);
          return { id: b.id, originalId: b.originalId, groupId: b.groupId, createSegmentIndex: function() {
            return Promise.resolve();
          }, segmentIndex: new Ml(d), mimeType: b.mimeType, codecs: b.codecs, width: b.width || void 0, height: b.height || void 0, frameRate: b.frameRate, pixelAspectRatio: b.pixelAspectRatio, hdr: b.hdr, colorGamut: b.colorGamut, videoLayout: b.videoLayout, kind: b.kind, encrypted: b.encrypted, drmInfos: [], keyIds: b.keyIds, language: b.language, originalLanguage: b.originalLanguage || null, label: b.label, type: b.type, primary: b.primary, trickModeVideo: null, dependencyStream: null, emsgSchemeIdUris: null, roles: b.roles, forced: b.forced, channelsCount: b.channelsCount, audioSamplingRate: b.audioSamplingRate, spatialAudio: b.spatialAudio, closedCaptions: b.closedCaptions, tilesLayout: b.tilesLayout, mssPrivateData: b.mssPrivateData, accessibilityPurpose: null, external: b.external, fastSwitching: b.fastSwitching, fullMimeTypes: /* @__PURE__ */ new Set([Ie(b.mimeType, b.codecs)]), isAudioMuxedInVideo: b.isAudioMuxedInVideo || false, baseOriginalId: null };
        }
        function XB(a, b, c) {
          var d = new RB("segment", a.h, a.g, b.dataKey);
          a = new qj(b.startTime, b.endTime, function() {
            return [d.toString()];
          }, 0, null, b.initSegmentKey != null ? YB(a, b.initSegmentKey) : null, b.timestampOffset, b.appendWindowStart, b.appendWindowEnd, [], b.tilesLayout || "");
          a.mimeType = b.mimeType || c.mimeType || "";
          a.codecs = b.codecs || c.codecs || "";
          b.thumbnailSprite && a.If(b.thumbnailSprite);
          return a;
        }
        function YB(a, b) {
          var c = new RB("segment", a.h, a.g, b);
          return new oj(function() {
            return [c.toString()];
          }, 0, null);
        }
        ;
        function ZB() {
          this.g = null;
        }
        p = ZB.prototype;
        p.configure = function() {
        };
        p.start = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                d = SB(a);
                c.g = d;
                if (d == null || d.g != "manifest") throw new U(2, 1, 9004, a);
                e = new xB();
                sa(m, 2);
                return F(m, e.init(), 4);
              case 4:
                return F(m, BB(e, d.Qb(), d.bb()), 5);
              case 5:
                return f = m.h, F(m, f.getManifests([d.key()]), 6);
              case 6:
                return g = m.h, h = g[0], k2 = new TB(d.Qb(), d.bb()), l = UB(k2, h), b.makeTextStreamsForClosedCaptions(l), m.return(l);
              case 2:
                return Ba(m), F(m, e.destroy(), 7);
              case 7:
                Da(m, 0);
            }
          });
        };
        p.stop = function() {
          return Promise.resolve();
        };
        p.update = function() {
        };
        p.onExpirationUpdated = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                return d = c.g, e = new xB(), ra(m, 2, 3), F(m, e.init(), 5);
              case 5:
                return F(m, BB(e, d.Qb(), d.bb()), 6);
              case 6:
                return f = m.h, F(m, f.getManifests([d.key()]), 7);
              case 7:
                g = m.h;
                h = g[0];
                k2 = h.sessionIds.includes(a);
                l = h.expiration == void 0 || h.expiration > b;
                if (!k2 || !l) {
                  m.A(3);
                  break;
                }
                return F(m, f.updateManifestExpiration(d.key(), b), 3);
              case 3:
                return Ba(m), F(m, e.destroy(), 10);
              case 10:
                Da(m, 0);
                break;
              case 2:
                Aa(m), m.A(3);
            }
          });
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function() {
        };
        p.setMediaElement = function() {
        };
        Jc("application/x-offline-manifest", function() {
          return new ZB();
        });
        function $B() {
        }
        function aC(a, b) {
          var c = SB(a);
          c && c.g == "manifest" ? (a = { uri: a, originalUri: a, data: new ArrayBuffer(0), headers: { "content-type": "application/x-offline-manifest" }, originalRequest: b }, a = Gg(a)) : a = c && c.g == "segment" ? bC(c.key(), c, b) : Eg(new U(2, 1, 9004, a));
          return a;
        }
        function bC(a, b, c) {
          var d = new xB();
          return Gg(void 0).Xa(function() {
            return d.init();
          }).Xa(function() {
            return BB(d, b.Qb(), b.bb());
          }).Xa(function(e) {
            return e.getSegments([b.key()]);
          }).Xa(function(e) {
            return { uri: b, data: e[0].data, headers: {}, originalRequest: c };
          }).finally(function() {
            return d.destroy();
          });
        }
        S("shaka.offline.OfflineScheme", $B);
        $B.plugin = aC;
        Qg("offline", aC);
        function cC(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                d = [];
                for (var m = [], n = t(c), q = n.next(); !q.done; q = n.next()) {
                  q = q.value;
                  for (var r = false, u = t(m), v = u.next(); !v.done; v = u.next()) if (v = v.value, dC(v.info, q)) {
                    v.sessionIds.push(q.sessionId);
                    r = true;
                    break;
                  }
                  r || m.push({ info: q, sessionIds: [q.sessionId] });
                }
                e = t(m);
                f = e.next();
              case 2:
                if (f.done) {
                  l.A(4);
                  break;
                }
                g = f.value;
                h = eC(a, b, g);
                return F(l, h, 5);
              case 5:
                k2 = l.h;
                d = d.concat(k2);
                f = e.next();
                l.A(2);
                break;
              case 4:
                return l.return(d);
            }
          });
        }
        function eC(a, b, c) {
          var d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return d = new yh({ vc: b, onError: function() {
                }, vf: function() {
                }, onExpirationUpdated: function() {
                }, onEvent: function() {
                } }), ra(f, 2), d.configure(a), F(f, Jh(d, c.info.keySystem, c.info.licenseUri, c.info.serverCertificate, c.info.audioCapabilities, c.info.videoCapabilities), 4);
              case 4:
                ta(f, 3);
                break;
              case 2:
                return Aa(f), F(f, d.destroy(), 5);
              case 5:
                return f.return([]);
              case 3:
                return e = [], F(f, Promise.all(c.sessionIds.map(function(g) {
                  return Q(function(h) {
                    if (h.g == 1) return ra(h, 2), F(h, Vh(d, g), 4);
                    if (h.g != 2) return e.push(g), ta(h, 0);
                    Aa(h);
                    G(h);
                  });
                })), 6);
              case 6:
                return F(f, d.destroy(), 7);
              case 7:
                return f.return(e);
            }
          });
        }
        function dC(a, b) {
          function c(d, e) {
            return d.robustness == e.robustness && d.contentType == e.contentType;
          }
          return a.keySystem == b.keySystem && a.licenseUri == b.licenseUri && hb(a.audioCapabilities, b.audioCapabilities, c) && hb(a.videoCapabilities, b.videoCapabilities, c);
        }
        ;
        function fC(a, b, c) {
          var d = b.presentationTimeline.getDuration();
          b = gC(b);
          return { offlineUri: null, originalManifestUri: a, duration: d, size: 0, expiration: Infinity, tracks: b, appMetadata: c, isIncomplete: false };
        }
        function hC(a, b) {
          var c = UB(new TB(a.Qb(), a.bb()), b), d = b.appMetadata || {};
          c = gC(c);
          return { offlineUri: a.toString(), originalManifestUri: b.originalManifestUri, duration: b.duration, size: b.size, expiration: b.expiration, tracks: c, appMetadata: d, isIncomplete: b.isIncomplete || false };
        }
        function gC(a) {
          var b = [], c = gg(a.variants);
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) b.push(Uf(d.value));
          a = t(a.textStreams);
          for (c = a.next(); !c.done; c = a.next()) b.push(Vf(c.value));
          return b;
        }
        ;
        function iC() {
          this.g = /* @__PURE__ */ new Map();
        }
        function jC(a, b) {
          var c = b.audio, d = b.video;
          c && !d && a.g.set(c.id, c.bandwidth || b.bandwidth);
          !c && d && a.g.set(d.id, d.bandwidth || b.bandwidth);
          if (c && d) {
            var e = c.bandwidth || 393216, f = d.bandwidth || b.bandwidth - e;
            f <= 0 && (f = b.bandwidth);
            a.g.set(c.id, e);
            a.g.set(d.id, f);
          }
        }
        function kC(a, b) {
          a.g.set(b.id, b.bandwidth || 2048);
        }
        function lC(a, b) {
          a = a.g.get(b);
          a == null && (a = 0);
          return a;
        }
        ;
        function mC(a) {
          var b = this;
          if (a && a.constructor != Y) throw new U(2, 9, 9008);
          this.g = this.h = null;
          a ? (this.h = a.g, this.g = a.Yb()) : (this.h = Mn(), this.g = new Pg(), this.g.configure(this.h.networking));
          this.i = [];
          this.l = [];
          var c = !a;
          this.j = new bh(function() {
            var d, e, f, g, h;
            return Q(function(k2) {
              switch (k2.g) {
                case 1:
                  return F(k2, Promise.all(b.l.map(function(l) {
                    return hB(l);
                  })), 2);
                case 2:
                  d = function() {
                  };
                  e = [];
                  f = t(b.i);
                  for (g = f.next(); !g.done; g = f.next()) h = g.value, e.push(h.then(d, d));
                  return F(k2, Promise.all(e), 3);
                case 3:
                  if (!c) {
                    k2.A(4);
                    break;
                  }
                  return F(k2, b.g.destroy(), 4);
                case 4:
                  b.h = null, b.g = null, G(k2);
              }
            });
          });
          this.m = 1e9;
        }
        function nC() {
          if (Mc(rb())) a: {
            var a = t(yB.values());
            for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b = b()) {
              b.destroy();
              a = true;
              break a;
            }
            a = false;
          }
          else a = false;
          return a;
        }
        p = mC.prototype;
        p.destroy = function() {
          return this.j.destroy();
        };
        p.configure = function(a, b) {
          arguments.length == 2 && typeof a == "string" && (a = qn(a, b));
          return Rn(this.h, a);
        };
        p.getConfiguration = function() {
          var a = Mn();
          Rn(a, this.h, Mn());
          return a;
        };
        p.Yb = function() {
          return this.g;
        };
        p.store = function(a, b, c, d, e) {
          var f = this, g = this.getConfiguration(), h = new gB(this.g);
          this.l.push(h);
          b = oC(this, a, b || {}, d || [], e || [], function() {
            var k2;
            return Q(function(l) {
              if (l.g == 1) return c ? l.A(2) : F(l, Po(a, f.g, g.manifest.retryParameters), 3);
              l.g != 2 && (c = l.h);
              k2 = Oc(a, c || null);
              return l.return(k2());
            });
          }, g, h);
          b = new Dg(b, function() {
            return hB(h);
          });
          b.finally(function() {
            gb(f.l, h);
          });
          return pC(this, b);
        };
        function oC(a, b, c, d, e, f, g, h) {
          var k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                return qC(), l = k2 = null, m = new xB(), r = q = n = null, ra(M, 2, 3), F(M, f(), 5);
              case 5:
                return k2 = M.h, F(M, rC(a, b, k2, g), 6);
              case 6:
                u = M.h;
                sC(a);
                v = !u.presentationTimeline.W() && !u.presentationTimeline.Vc();
                if (!v) throw new U(2, 9, 9005, b);
                w = t(d);
                z = w.next();
              case 7:
                if (z.done) {
                  M.A(9);
                  break;
                }
                y = z.value;
                return F(M, tC(a, y, u), 10);
              case 10:
                B = M.h;
                u.imageStreams.push(B);
                sC(a);
                z = w.next();
                M.A(7);
                break;
              case 9:
                C = t(e), H = C.next();
              case 11:
                if (H.done) return Lh(g.drm.clearKeys, u.variants), E = u.variants.some(function(R) {
                  if (R.audio) {
                    for (var T = t(R.audio.drmInfos), ma = T.next(); !ma.done; ma = T.next()) if (ma.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  if (R.video) {
                    for (R = t(R.video.drmInfos), T = R.next(); !T.done; T = R.next()) if (T.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  return false;
                }), J = g.offline.usePersistentLicense, E && (J = false), F(M, a.md(u, function(R) {
                  r = r || R;
                }, g, J), 15);
                D = H.value;
                return F(
                  M,
                  uC(a, u, D.uri, D.language, D.kind, D.mime, D.codecs),
                  14
                );
              case 14:
                A = M.h;
                u.textStreams.push(A);
                sC(a);
                H = C.next();
                M.A(11);
                break;
              case 15:
                l = M.h;
                sC(a);
                if (r) throw r;
                return F(M, vC(u, l, g, J), 16);
              case 16:
                return F(M, m.init(), 17);
              case 17:
                return sC(a), F(M, zB(m), 18);
              case 18:
                return n = M.h, sC(a), I = wC(l, u, b, c, g, h, J), K = I.rk, L = I.Dh, F(M, n.bb.addManifests([K]), 19);
              case 19:
                O = M.h;
                sC(a);
                q = O[0];
                sC(a);
                if (r) throw r;
                return F(M, xC(a, L, q, K, h, g, n.bb, u, l, J), 20);
              case 20:
                return sC(a), yC(u, K, l, J), F(M, n.bb.updateManifest(q, K), 21);
              case 21:
                return sC(a), P = new RB(
                  "manifest",
                  n.path.Qb,
                  n.path.bb,
                  q
                ), M.return(hC(P, K));
              case 3:
                return Ba(M), F(M, m.destroy(), 22);
              case 22:
                if (!k2) {
                  M.A(23);
                  break;
                }
                return F(M, k2.stop(), 23);
              case 23:
                if (!l) {
                  M.A(25);
                  break;
                }
                return F(M, l.destroy(), 25);
              case 25:
                Da(M, 0);
                break;
              case 2:
                N = Aa(M);
                if (q == null) {
                  M.A(27);
                  break;
                }
                return F(M, zC(q), 27);
              case 27:
                throw r || N;
            }
          });
        }
        function xC(a, b, c, d, e, f, g, h, k2, l) {
          var m, n, q, r, u, v, w, z, y, B, C;
          return Q(function(H) {
            switch (H.g) {
              case 1:
                m = {};
                n = 0;
                q = function() {
                  if (a.j.g || e.l) throw new U(2, 9, 7001);
                };
                r = function(D, A) {
                  var E, J, I, K, L, O, P, N, M;
                  return Q(function(R) {
                    if (R.g == 1) {
                      E = t(D);
                      J = E.next();
                      for (I = {}; !J.done; I = { mc: void 0 }, J = E.next()) I.mc = J.value, q(), K = cB(I.mc, f), L = I.mc.i, O = I.mc.h, P = /* @__PURE__ */ (function(T) {
                        return function(ma) {
                          var W, Ia, ua, Ea;
                          return Q(function(ya) {
                            switch (ya.g) {
                              case 1:
                                W = T.mc.g;
                                Ia = W.$b(false);
                                if (!W.aesKey || Ia) {
                                  ya.A(2);
                                  break;
                                }
                                return F(ya, vm(
                                  ma,
                                  W.aesKey,
                                  T.mc.j
                                ), 3);
                              case 3:
                                ma = ya.h;
                              case 2:
                                return ua = bB(W), F(ya, g.addSegments([{ data: ma }]), 4);
                              case 4:
                                Ea = ya.h, q(), m[ua] = Ea[0], n += ma.byteLength, G(ya);
                            }
                          });
                        };
                      })(I), N = I.mc.g, (M = N.$b(false)) ? kB(e, I.mc.groupId, M, L, O, P) : e.queue(I.mc.groupId, K, L, O, P);
                      return F(R, lB(e), 2);
                    }
                    q();
                    if (!A || e.l) return R.A(0);
                    yC(h, d, k2, l);
                    return F(R, g.updateManifest(c, d), 0);
                  });
                };
                u = false;
                ra(H, 2);
                if (!AC(h) || !u || BC(h)) {
                  H.A(4);
                  break;
                }
                return F(H, r(b.filter(function(D) {
                  return D.h;
                }), true), 5);
              case 5:
                return q(), b = b.filter(function(D) {
                  return !D.h;
                }), v = m, w = n, m = {}, n = 0, F(
                  H,
                  CC(g, c, d, v, w, function() {
                    return sC(a);
                  }),
                  6
                );
              case 6:
                q();
              case 4:
                if (u) {
                  H.A(7);
                  break;
                }
                return F(H, r(b, false), 8);
              case 8:
                return q(), z = m, y = n, m = {}, n = 0, F(H, CC(g, c, d, z, y, function() {
                  return q();
                }), 9);
              case 9:
                q();
              case 7:
                ta(H, 0);
                break;
              case 2:
                return B = Aa(H), C = Object.values(m), F(H, g.removeSegments(C, function() {
                }), 10);
              case 10:
                throw B;
            }
          });
        }
        function zC(a) {
          var b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return b = new xB(), F(f, b.init(), 2);
              case 2:
                return F(f, zB(b), 3);
              case 3:
                return c = f.h, d = new RB("manifest", c.path.Qb, c.path.bb, a), F(f, b.destroy(), 4);
              case 4:
                return e = new mC(), F(f, e.remove(d.toString()), 0);
            }
          });
        }
        function CC(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, u, v, w;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                g = false;
                ra(z, 2);
                h = true;
                k2 = t(c.streams);
                for (l = k2.next(); !l.done; l = k2.next()) for (m = l.value, n = t(m.segments), q = n.next(); !q.done; q = n.next()) r = q.value, u = r.pendingSegmentRefId ? d[r.pendingSegmentRefId] : null, u != null && (r.dataKey = u, r.pendingSegmentRefId = void 0), u = r.pendingInitSegmentRefId ? d[r.pendingInitSegmentRefId] : null, u != null && (r.initSegmentKey = u, r.pendingInitSegmentRefId = void 0), r.pendingSegmentRefId && (h = false), r.pendingInitSegmentRefId && (h = false);
                c.size += e;
                h && (c.isIncomplete = false);
                return F(z, a.updateManifest(b, c), 4);
              case 4:
                g = true;
                f();
                ta(z, 0);
                break;
              case 2:
                return v = Aa(z), F(z, zC(b), 5);
              case 5:
                if (g) {
                  z.A(6);
                  break;
                }
                w = Object.values(d);
                return F(z, a.removeSegments(w, function() {
                }), 6);
              case 6:
                throw v;
            }
          });
        }
        function vC(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y, B, C, H, D, A, E, J, I, K, L, O, P, N, M, R;
          return Q(function(T) {
            switch (T.g) {
              case 1:
                return e = { width: Infinity, height: Infinity }, zf(a, c.restrictions, e), F(T, Cf(b, a, d, c.drm.preferredKeySystems, c.drm.keySystemsMapping), 2);
              case 2:
                f = [];
                g = c.preferredDecodingAttributes;
                h = c.preferredVideoCodecs;
                k2 = c.preferredAudioCodecs;
                l = c.preferredTextFormats;
                xf(a, h, k2, g, l);
                m = t(a.variants);
                for (n = m.next(); !n.done; n = m.next()) q = n.value, f.push(Uf(q));
                r = t(a.textStreams);
                for (u = r.next(); !u.done; u = r.next()) v = u.value, f.push(Vf(v));
                w = t(a.imageStreams);
                for (z = w.next(); !z.done; z = w.next()) y = z.value, f.push(Wf(y));
                return F(T, c.offline.trackSelectionCallback(f), 3);
              case 3:
                B = T.h;
                C = a.presentationTimeline.getDuration();
                H = 0;
                D = t(B);
                for (A = D.next(); !A.done; A = D.next()) E = A.value, J = E.bandwidth * C / 8, H += J;
                ra(T, 4);
                return F(T, c.offline.downloadSizeCallback(H), 6);
              case 6:
                I = T.h;
                if (!I) throw new U(2, 9, 9014);
                ta(T, 5);
                break;
              case 4:
                K = Aa(T);
                if (K instanceof U) throw K;
                throw new U(2, 9, 9015);
              case 5:
                L = /* @__PURE__ */ new Set();
                O = /* @__PURE__ */ new Set();
                P = /* @__PURE__ */ new Set();
                N = t(B);
                for (M = N.next(); !M.done; M = N.next()) R = M.value, R.type == "variant" && L.add(R.id), R.type == "text" && O.add(R.id), R.type == "image" && P.add(R.id);
                a.variants = a.variants.filter(function(ma) {
                  return L.has(ma.id);
                });
                a.textStreams = a.textStreams.filter(function(ma) {
                  return O.has(ma.id);
                });
                a.imageStreams = a.imageStreams.filter(function(ma) {
                  return P.has(ma.id);
                });
                DC(a);
                G(T);
            }
          });
        }
        function wC(a, b, c, d, e, f, g) {
          var h = fC(c, b, d), k2 = e.offline.progressCallback;
          iB(f, function(u, v) {
            h.size = v;
            k2(h, u);
          }, function(u, v) {
            l && g && m == v && Rh(a, "cenc", u);
          });
          var l = AC(b) && !BC(b), m = null;
          l && (m = EC.get(a.g.keySystem));
          for (var n = new iC(), q = t(b.textStreams), r = q.next(); !r.done; r = q.next()) n.g.set(r.value.id, 52);
          q = t(b.imageStreams);
          for (r = q.next(); !r.done; r = q.next()) kC(n, r.value);
          q = t(b.variants);
          for (r = q.next(); !r.done; r = q.next()) jC(n, r.value);
          f = FC(f, n, b, e);
          e = f.streams;
          f = f.Dh;
          (n = a.g) && g && (n.initData = []);
          return { rk: {
            creationTime: Date.now(),
            originalManifestUri: c,
            duration: b.presentationTimeline.getDuration(),
            size: 0,
            expiration: a.Wd(),
            streams: e,
            sessionIds: g ? $h(a) : [],
            drmInfo: n,
            appMetadata: d,
            isIncomplete: true,
            sequenceMode: b.sequenceMode,
            type: b.type
          }, Dh: f };
        }
        function AC(a) {
          return a.variants.some(function(b) {
            var c = b.audio && b.audio.encrypted;
            return b.video && b.video.encrypted || c;
          });
        }
        function BC(a) {
          return a.variants.some(function(b) {
            return (b.video ? b.video.drmInfos : []).concat(b.audio ? b.audio.drmInfos : []).some(function(c) {
              return c.initData && c.initData.length;
            });
          });
        }
        function yC(a, b, c, d) {
          b.expiration = c.Wd();
          c = $h(c);
          b.sessionIds = d ? c : [];
          if (AC(a) && d && !c.length) throw new U(2, 9, 9007);
        }
        p.remove = function(a) {
          return GC(this, HC(this, a));
        };
        function HC(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                qC();
                c = SB(b);
                if (c == null || c.g != "manifest") throw new U(2, 9, 9004, b);
                d = c;
                e = new xB();
                sa(k2, 2);
                return F(k2, e.init(), 4);
              case 4:
                return F(k2, BB(e, d.Qb(), d.bb()), 5);
              case 5:
                return f = k2.h, F(k2, f.getManifests([d.key()]), 6);
              case 6:
                return g = k2.h, h = g[0], F(k2, Promise.all([IC(a, h, e), JC(f, d, h)]), 2);
              case 2:
                return Ba(k2), F(k2, e.destroy(), 8);
              case 8:
                Da(k2, 0);
            }
          });
        }
        function KC(a, b) {
          for (var c = [], d = t(a.streams), e = d.next(); !e.done; e = d.next()) e = e.value, b && e.type == "video" ? c.push({ contentType: Ie(e.mimeType, e.codecs), robustness: a.drmInfo.videoRobustness }) : b || e.type != "audio" || c.push({ contentType: Ie(e.mimeType, e.codecs), robustness: a.drmInfo.audioRobustness });
          return c;
        }
        function IC(a, b, c) {
          return Q(function(d) {
            return F(d, LC(a.g, a.h.drm, c, b), 0);
          });
        }
        function JC(a, b, c) {
          function d() {
          }
          var e = MC(c);
          hC(b, c);
          return Promise.all([a.removeSegments(e, d), a.removeManifests([b.key()], d)]);
        }
        p.Mk = function() {
          return GC(this, NC(this));
        };
        function NC(a) {
          var b, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                return qC(), b = a.g, c = a.h.drm, d = new xB(), e = false, sa(n, 2), F(n, d.init(), 4);
              case 4:
                f = [], CB(d, function(q) {
                  return f.push(q);
                }), g = t(f), h = g.next();
              case 5:
                if (h.done) {
                  n.A(2);
                  break;
                }
                k2 = h.value;
                return F(n, k2.getAll(), 8);
              case 8:
                return l = n.h, F(n, cC(c, b, l), 9);
              case 9:
                return m = n.h, F(n, k2.remove(m), 10);
              case 10:
                m.length != l.length && (e = true);
                h = g.next();
                n.A(5);
                break;
              case 2:
                return Ba(n), F(n, d.destroy(), 11);
              case 11:
                Da(n, 3);
                break;
              case 3:
                return n.return(!e);
            }
          });
        }
        p.list = function() {
          return GC(this, OC());
        };
        function OC() {
          var a, b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return qC(), a = [], b = new xB(), sa(d, 2), F(d, b.init(), 4);
              case 4:
                return c = Promise.resolve(), AB(b, function(e, f) {
                  c = c.then(function() {
                    var g;
                    return Q(function(h) {
                      if (h.g == 1) return F(h, f.getAllManifests(), 2);
                      g = h.h;
                      g.forEach(function(k2, l) {
                        k2 = hC(new RB("manifest", e.Qb, e.bb, l), k2);
                        a.push(k2);
                      });
                      G(h);
                    });
                  });
                }), F(d, c, 2);
              case 2:
                return Ba(d), F(d, b.destroy(), 6);
              case 6:
                Da(d, 3);
                break;
              case 3:
                return d.return(a);
            }
          });
        }
        function rC(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return e = null, f = a.g, g = {
              networkingEngine: f,
              filter: function() {
                return Promise.resolve();
              },
              makeTextStreamsForClosedCaptions: function() {
              },
              onTimelineRegionAdded: function() {
              },
              onEvent: function() {
              },
              onError: function(m) {
                e = m;
              },
              isLowLatencyMode: function() {
                return false;
              },
              updateDuration: function() {
              },
              newDrmInfo: function() {
              },
              onManifestUpdated: function() {
              },
              getBandwidthEstimate: function() {
                return d.abr.defaultBandwidthEstimate;
              },
              onMetadata: function() {
              },
              disableStream: function() {
              },
              addFont: function() {
              }
            }, c.configure(d.manifest), sC(a), F(l, c.start(b, g), 2);
            if (l.g != 3) return h = l.h, sC(a), k2 = PC(h), F(l, Promise.all(dh(k2, function(m) {
              return m.createSegmentIndex();
            })), 3);
            sC(a);
            if (e) throw e;
            return l.return(h);
          });
        }
        function tC(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                return F(y, QC(a, b), 2);
              case 2:
                d = y.h;
                if (d != "text/vtt") throw new U(1, 2, 2017, b);
                return F(y, RC(b, a.g, a.h.streaming.retryParameters), 3);
              case 3:
                e = y.h;
                f = Xe(d);
                if (!f) throw new U(2, 2, 2014, d);
                g = f();
                h = { periodStart: 0, segmentStart: 0, segmentEnd: c.presentationTimeline.getDuration(), vttOffset: 0 };
                k2 = Vb(e);
                l = g.parseMedia(k2, h, b, []);
                m = [];
                n = t(l);
                q = n.next();
                for (r = {}; !q.done; r = { Rf: void 0, od: void 0 }, q = n.next()) r.od = q.value, r.Rf = null, u = /* @__PURE__ */ (function(B) {
                  return function() {
                    B.Rf == null && (B.Rf = uc([b], [B.od.payload]));
                    return B.Rf || [];
                  };
                })(r), v = new qj(r.od.startTime, r.od.endTime, u, 0, null, null, 0, 0, Infinity), r.od.payload.includes("#xywh") && (w = r.od.payload.split("#xywh=")[1].split(","), w.length === 4 && v.If({ height: parseInt(w[3], 10), positionX: parseInt(w[0], 10), positionY: parseInt(w[1], 10), width: parseInt(w[2], 10) })), m.push(v);
                z = d;
                if (!m.length) {
                  y.A(4);
                  break;
                }
                return F(y, Po(m[0].P()[0], a.g, a.h.manifest.retryParameters), 5);
              case 5:
                z = y.h;
              case 4:
                return y.return({
                  id: a.m++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Ml(m),
                  mimeType: z || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: "image",
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([Ie(z || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                });
            }
          });
        }
        function uC(a, b, c, d, e, f, g) {
          var h, k2, l;
          return Q(function(m) {
            if (m.g == 1) return f ? m.A(2) : F(m, QC(a, c), 3);
            m.g != 2 && (f = m.h);
            h = {
              id: a.m++,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: Ol(0, b.presentationTimeline.getDuration(), [c]),
              mimeType: f || "",
              codecs: g || "",
              kind: e,
              encrypted: false,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: d,
              originalLanguage: d,
              label: null,
              type: Ac,
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: true,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set([Ie(f || "", g || "")]),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            };
            k2 = Ie(h.mimeType, h.codecs);
            l = Ye(k2);
            if (!l) throw new U(2, 2, 2014, f);
            return m.return(h);
          });
        }
        function QC(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return ra(d, 2), F(d, Po(b, a.g, a.h.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                ta(d, 3);
                break;
              case 2:
                Aa(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function RC(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (g.g == 1) return d = $g, e = Ug([a], c), e.method = "GET", F(g, b.request(d, e).promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        p.md = function(a, b, c, d) {
          var e = this, f;
          return Q(function(g) {
            return g.g == 1 ? (f = new yh({ vc: e.g, onError: b, vf: function() {
            }, onExpirationUpdated: function() {
            }, onEvent: function() {
            } }), f.configure(c.drm), F(g, Gh(f, a.variants, d), 2)) : g.g != 3 ? F(g, Th(f), 3) : g.return(f);
          });
        };
        function FC(a, b, c, d) {
          var e = /* @__PURE__ */ new Map(), f = PC(c), g = /* @__PURE__ */ new Map();
          f = t(f);
          for (var h = f.next(); !h.done; h = f.next()) {
            h = h.value;
            var k2 = SC(a, b, c, h, d, e);
            g.set(h.id, k2);
          }
          a = t(c.variants);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.audio && g.get(b.audio.id).variantIds.push(b.id), b.video && g.get(b.video.id).variantIds.push(b.id);
          return { streams: Array.from(g.values()), Dh: Array.from(e.values()) };
        }
        function SC(a, b, c, d, e, f) {
          var g = {
            id: d.id,
            originalId: d.originalId,
            groupId: d.groupId,
            primary: d.primary,
            type: d.type,
            mimeType: d.mimeType,
            codecs: d.codecs,
            frameRate: d.frameRate,
            pixelAspectRatio: d.pixelAspectRatio,
            hdr: d.hdr,
            colorGamut: d.colorGamut,
            videoLayout: d.videoLayout,
            kind: d.kind,
            language: d.language,
            originalLanguage: d.originalLanguage,
            label: d.label,
            width: d.width || null,
            height: d.height || null,
            encrypted: d.encrypted,
            keyIds: d.keyIds,
            segments: [],
            variantIds: [],
            roles: d.roles,
            forced: d.forced,
            channelsCount: d.channelsCount,
            audioSamplingRate: d.audioSamplingRate,
            spatialAudio: d.spatialAudio,
            closedCaptions: d.closedCaptions,
            tilesLayout: d.tilesLayout,
            mssPrivateData: d.mssPrivateData,
            external: d.external,
            fastSwitching: d.fastSwitching,
            isAudioMuxedInVideo: d.isAudioMuxedInVideo
          }, h = e.offline.numberOfParallelDownloads, k2 = h === 0 ? d.id : 0;
          TC(d, c.presentationTimeline.Ib(), function(l, m) {
            var n = bB(l), q = void 0;
            if (!f.has(n)) {
              var r = l.endTime - l.startTime;
              r = lC(b, d.id) * r;
              r = eB(a.g, r);
              f.set(n, new aB(l, r, k2, false, m));
            }
            l.ba && (q = bB(l.ba), f.has(q) || (r = lC(
              b,
              d.id
            ) * 0.5, r = eB(a.g, r), f.set(q, new aB(l.ba, r, k2, true, m))));
            g.segments.push({ pendingInitSegmentRefId: q, initSegmentKey: q ? 0 : null, startTime: l.startTime, endTime: l.endTime, appendWindowStart: l.appendWindowStart, appendWindowEnd: l.appendWindowEnd, timestampOffset: l.timestampOffset, tilesLayout: l.tilesLayout, pendingSegmentRefId: n, dataKey: 0, mimeType: l.mimeType, codecs: l.codecs, thumbnailSprite: l.thumbnailSprite });
            h !== 0 && (k2 = (k2 + 1) % h);
          });
          return g;
        }
        function TC(a, b, c) {
          b = a.segmentIndex.find(b);
          if (b != null) for (var d = a.segmentIndex.get(b); d; ) c(d, b), d = a.segmentIndex.get(++b);
        }
        function sC(a) {
          if (a.j.g) throw new U(2, 9, 7001);
        }
        function qC() {
          if (!nC()) throw new U(2, 9, 9e3);
        }
        function GC(a, b) {
          return Q(function(c) {
            if (c.g == 1) return a.i.push(b), sa(c, 2), F(c, b, 4);
            if (c.g != 2) return c.return(c.h);
            Ba(c);
            gb(a.i, b);
            return Da(c, 0);
          });
        }
        function pC(a, b) {
          var c = b.promise;
          a.i.push(c);
          return b.finally(function() {
            gb(a.i, c);
          });
        }
        function MC(a) {
          var b = /* @__PURE__ */ new Set();
          a = t(a.streams);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = t(c.value.segments);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.initSegmentKey != null && b.add(d.initSegmentKey), b.add(d.dataKey);
          }
          return Array.from(b);
        }
        function LC(a, b, c, d) {
          var e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              if (!d.drmInfo) return h.return();
              e = DB(c);
              f = d.sessionIds.map(function(k2) {
                return { sessionId: k2, keySystem: d.drmInfo.keySystem, licenseUri: d.drmInfo.licenseServerUri, serverCertificate: d.drmInfo.serverCertificate, audioCapabilities: KC(d, false), videoCapabilities: KC(d, true) };
              });
              return F(h, cC(b, a, f), 2);
            }
            return h.g != 3 ? (g = h.h, F(h, e.remove(g), 3)) : F(h, e.add(f.filter(function(k2) {
              return !g.includes(k2.sessionId);
            })), 0);
          });
        }
        function PC(a) {
          for (var b = /* @__PURE__ */ new Set(), c = t(a.variants), d = c.next(); !d.done; d = c.next()) d = d.value, d.audio && b.add(d.audio), d.video && b.add(d.video);
          c = t(a.textStreams);
          for (d = c.next(); !d.done; d = c.next()) b.add(d.value);
          a = t(a.imageStreams);
          for (c = a.next(); !c.done; c = a.next()) b.add(c.value);
          return b;
        }
        function DC(a) {
          a.variants.map(function(f) {
            return f.video;
          });
          var b = new Set(a.variants.map(function(f) {
            return f.audio;
          }));
          a = a.textStreams;
          for (var c = t(b), d = c.next(); !d.done; d = c.next()) {
            d = t(b);
            for (var e = d.next(); !e.done; e = d.next()) ;
          }
          b = t(a);
          for (c = b.next(); !c.done; c = b.next()) for (c = t(a), d = c.next(); !d.done; d = c.next()) ;
        }
        S("shaka.offline.Storage", mC);
        mC.deleteAll = function() {
          var a;
          return Q(function(b) {
            return b.g == 1 ? (a = new xB(), sa(b, 2), F(b, EB(a), 2)) : b.g != 5 ? (Ba(b), F(b, a.destroy(), 5)) : Da(b, 0);
          });
        };
        mC.prototype.list = mC.prototype.list;
        mC.prototype.removeEmeSessions = mC.prototype.Mk;
        mC.prototype.remove = mC.prototype.remove;
        mC.prototype.store = mC.prototype.store;
        mC.prototype.getNetworkingEngine = mC.prototype.Yb;
        mC.prototype.getConfiguration = mC.prototype.getConfiguration;
        mC.prototype.configure = mC.prototype.configure;
        mC.prototype.destroy = mC.prototype.destroy;
        mC.support = nC;
        var EC = (/* @__PURE__ */ new Map()).set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
        Nq("offline", nC);
        function UC() {
        }
        function VC(a, b) {
          a = { priority: b || 0, callback: a };
          for (b = 0; b < WC.length; b++) if (WC[b].priority < a.priority) {
            WC.splice(b, 0, a);
            return;
          }
          WC.push(a);
        }
        S("shaka.polyfill", UC);
        UC.register = VC;
        UC.installAll = function() {
          for (var a = t(WC), b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            try {
              b.callback();
            } catch (c) {
              $a("Error installing polyfill!", c);
            }
          }
        };
        var WC = [];
        function XC(a, b, c) {
          this.g = a;
          this.i = b || null;
          this.h = c || null;
          this.keySystem = a.keySystem;
        }
        XC.prototype.getConfiguration = function() {
          var a = this.g.getConfiguration();
          if (a.videoCapabilities) for (var b = t(a.videoCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.i;
          if (a.audioCapabilities) for (b = t(a.audioCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.h;
          return a;
        };
        XC.prototype.createMediaKeys = function() {
          return this.g.createMediaKeys();
        };
        function YC(a) {
          if (a.startsWith("com.apple")) return "cbcs";
          if (a.startsWith("com.widevine") || a.startsWith("com.microsoft") || a.startsWith("com.chromecast") || a.startsWith("org.w3") || a.startsWith("com.huawei")) return "cenc";
          $a("EmeEncryptionSchemePolyfill: Unknown key system:", a, "Please contribute!");
          return null;
        }
        function ZC(a) {
          if (!a) return false;
          a = a.getConfiguration();
          var b = a.audioCapabilities && a.audioCapabilities[0];
          return (a = a.videoCapabilities && a.videoCapabilities[0] || b) && a.encryptionScheme !== void 0 ? true : false;
        }
        function $C(a, b) {
          return !a || a == b || (a == "cbcs" || a == "cbcs-1-9") && rb().ed() ? true : false;
        }
        ;
        function aD() {
        }
        var bD;
        function cD() {
          rb().Kf() && !bD && !navigator.emeEncryptionSchemePolyfilled && navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration && (bD = navigator.requestMediaKeySystemAccess, navigator.requestMediaKeySystemAccess = dD, navigator.emeEncryptionSchemePolyfilled = true);
        }
        function dD(a, b) {
          var c = this, d, e;
          return Q(function(f) {
            if (f.g == 1) return F(f, bD.call(c, a, b), 2);
            d = f.h;
            if (e = ZC(d)) return navigator.requestMediaKeySystemAccess = bD, f.return(d);
            navigator.requestMediaKeySystemAccess = eD;
            return f.return(eD.call(c, a, b));
          });
        }
        function eD(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, u;
          return Q(function(v) {
            if (v.g == 1) {
              d = YC(a);
              e = [];
              f = t(b);
              for (g = f.next(); !g.done; g = f.next()) h = g.value, k2 = fD(h.videoCapabilities, d), l = fD(h.audioCapabilities, d), h.videoCapabilities && h.videoCapabilities.length && !k2.length || h.audioCapabilities && h.audioCapabilities.length && !l.length || (m = Object.assign({}, h), m.videoCapabilities = k2, m.audioCapabilities = l, e.push(m));
              if (!e.length) throw n = Error("Unsupported keySystem or supportedConfigurations."), n.name = "NotSupportedError", n.code = DOMException.NOT_SUPPORTED_ERR, n;
              return F(v, bD.call(c, a, e), 2);
            }
            q = v.h;
            u = r = null;
            e[0] && (e[0].videoCapabilities && (r = e[0].videoCapabilities[0].encryptionScheme), e[0].audioCapabilities && (u = e[0].audioCapabilities[0].encryptionScheme));
            return v.return(new XC(q, r, u));
          });
        }
        function fD(a, b) {
          return a ? a.filter(function(c) {
            return $C(c.encryptionScheme, b);
          }) : a;
        }
        UC.EmeEncryptionScheme = aD;
        aD.install = cD;
        VC(cD);
        function gD() {
        }
        var hD;
        function iD() {
          rb().Kf() && !hD && !navigator.mediaCapabilitiesEncryptionSchemePolyfilled && navigator.mediaCapabilities && (hD = navigator.mediaCapabilities.decodingInfo, navigator.mediaCapabilities.decodingInfo = jD, navigator.mediaCapabilitiesEncryptionSchemePolyfilled = true);
        }
        function jD(a) {
          var b = this, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return F(f, hD.call(b, a), 2);
              case 2:
                c = f.h;
                if (!c.supported || !a.keySystemConfiguration) return f.return(c);
                d = c.keySystemAccess;
                if (e = ZC(d)) return navigator.mediaCapabilities.decodingInfo = hD, f.return(c);
                navigator.mediaCapabilities.decodingInfo = kD;
                if (d) {
                  f.A(3);
                  break;
                }
                return F(f, lD(a), 4);
              case 4:
                return c.keySystemAccess = f.h, f.return(c);
              case 3:
                return f.return(kD.call(b, a));
            }
          });
        }
        function kD(a) {
          var b = this, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                return d = c = null, !a.keySystemConfiguration || (e = a.keySystemConfiguration, f = e.keySystem, d = e.audio && e.audio.encryptionScheme, c = e.video && e.video.encryptionScheme, g = YC(f), h = { powerEfficient: false, smooth: false, supported: false, keySystemAccess: null, configuration: a }, $C(d, g) && $C(c, g)) ? F(l, hD.call(b, a), 2) : l.return(h);
              case 2:
                k2 = l.h;
                if (k2.keySystemAccess) {
                  k2.keySystemAccess = new XC(k2.keySystemAccess, c, d);
                  l.A(3);
                  break;
                }
                if (!a.keySystemConfiguration) {
                  l.A(3);
                  break;
                }
                return F(l, lD(a), 5);
              case 5:
                k2.keySystemAccess = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function lD(a) {
          var b, c;
          return Q(function(d) {
            if (d.g == 1) {
              var e = a.keySystemConfiguration, f = [], g = [];
              e.audio && f.push({ robustness: e.audio.robustness || "", contentType: a.audio.contentType, encryptionScheme: e.audio.encryptionScheme });
              e.video && g.push({ robustness: e.video.robustness || "", contentType: a.video.contentType, encryptionScheme: e.video.encryptionScheme });
              e = { initDataTypes: e.initDataType ? [e.initDataType] : [], distinctiveIdentifier: e.distinctiveIdentifier, persistentState: e.persistentState, sessionTypes: e.sessionTypes };
              f.length && (e.audioCapabilities = f);
              g.length && (e.videoCapabilities = g);
              b = e;
              return F(d, navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem, [b]), 2);
            }
            c = d.h;
            return d.return(c);
          });
        }
        UC.MCapEncryptionScheme = gD;
        gD.install = iD;
        VC(iD, -2);
        function mD() {
        }
        function nD() {
          rb().fc() || (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}), mD.originalMcap = navigator.mediaCapabilities, navigator.mediaCapabilities.decodingInfo = oD);
        }
        function oD(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            switch (q.g) {
              case 1:
                b = { supported: false, powerEfficient: true, smooth: true, keySystemAccess: null, configuration: a };
                rb();
                c = a.video;
                d = a.audio;
                if (a.type != "media-source") {
                  if (a.type == "file") {
                    if (c && (e = c.contentType, f = Nc().canPlayType(e) != "", !f) || d && (g = d.contentType, h = Nc().canPlayType(g) != "", !h)) return q.return(b);
                  } else return q.return(b);
                  q.A(2);
                  break;
                }
                if (!Mc()) return q.return(b);
                if (!c) {
                  q.A(3);
                  break;
                }
                return F(q, pD(c), 4);
              case 4:
                if (k2 = q.h, !k2) return q.return(b);
              case 3:
                if (d) {
                  var r = rb().Oa(), u = d.contentType;
                  r === "CAST" && d.spatialRendering && (u += "; spatialRendering=true");
                  l = xi(u);
                  if (!l) return q.return(b);
                }
              case 2:
                if (!a.keySystemConfiguration) return b.supported = true, q.return(b);
                m = a.keySystemConfiguration;
                return F(q, qD(c, d, m), 6);
              case 6:
                if (n = q.h) b.supported = true, b.keySystemAccess = n;
              case 5:
                return q.return(b);
            }
          });
        }
        function pD(a) {
          var b, c, d;
          return Q(function(e) {
            return e.g == 1 ? (b = rb(), c = b.Oa(), c !== "CAST" ? e.A(2) : F(e, rD(a), 3)) : e.g != 2 ? (d = e.h, e.return(d)) : e.return(xi(a.contentType));
          });
        }
        function qD(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r;
          return Q(function(u) {
            switch (u.g) {
              case 1:
                d = [];
                e = [];
                c.audio && (f = { robustness: c.audio.robustness || "", contentType: b.contentType }, rb().ui() && b.contentType.includes('codecs="ac-3"') && (f.contentType = 'audio/mp4; codecs="ec-3"'), c.audio.encryptionScheme && (f.encryptionScheme = c.audio.encryptionScheme), d.push(f));
                c.video && (g = { robustness: c.video.robustness || "", contentType: a.contentType }, c.video.encryptionScheme && (g.encryptionScheme = c.video.encryptionScheme), e.push(g));
                h = { initDataTypes: [c.initDataType], distinctiveIdentifier: c.distinctiveIdentifier, persistentState: c.persistentState, sessionTypes: c.sessionTypes };
                d.length && (h.audioCapabilities = d);
                e.length && (h.videoCapabilities = e);
                k2 = a ? a.contentType : "";
                l = b ? b.contentType : "";
                m = Qe(k2) + ";" + Pe(k2);
                n = Qe(l) + ";" + Pe(l);
                q = c.keySystem;
                r = null;
                ra(u, 2);
                if (yg.has(m + "#" + n + "#" + q)) {
                  r = yg.get(m + "#" + n + "#" + q) || null;
                  u.A(4);
                  break;
                }
                return F(u, navigator.requestMediaKeySystemAccess(c.keySystem, [h]), 5);
              case 5:
                r = u.h, yg.set(m + "#" + n + "#" + q, r);
              case 4:
                ta(
                  u,
                  3
                );
                break;
              case 2:
                Aa(u);
              case 3:
                return u.return(r);
            }
          });
        }
        function rD(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              if (!(window2.cast && cast.__platform__ && cast.__platform__.canDisplayType)) return g.return(xi(a.contentType));
              b = a.contentType;
              a.width && a.height && a.width > 1280 && a.height > 720 && (b += "; width=" + a.width + "; height=" + a.height);
              a.framerate && (c = Math.round(a.framerate), c < 24 || c > 30) && (b += "; framerate=" + a.framerate);
              d = a.transferFunction || "";
              switch (d) {
                case "":
                case "srgb":
                  break;
                case "pq":
                  b += "; eotf=smpte2084";
                  break;
                case "hlg":
                  b += "; eotf=arib-std-b67";
                  break;
                default:
                  return g.return(false);
              }
              e = false;
              f = sD;
              return f.has(b) ? (e = f.get(b), g.A(2)) : F(g, cast.__platform__.canDisplayType(b), 3);
            }
            g.g != 2 && (e = g.h, f.set(b, e));
            return g.return(e);
          });
        }
        UC.MediaCapabilities = mD;
        mD.install = nD;
        mD.originalMcap = null;
        var sD = /* @__PURE__ */ new Map();
        VC(nD, -1);
        function tD() {
        }
        function uD() {
          var a = rb(), b = a.Ha() === "WEBKIT" ? a.Ba() : null;
          (window2.MediaSource || window2.ManagedMediaSource) && b && window2.MediaSource && (b <= 12 ? (vD(), wD()) : b <= 15 && vD());
          a = t(a.Gi());
          for (b = a.next(); !b.done; b = a.next()) xD(b.value);
          (window2.MediaSource || window2.ManagedMediaSource) && yD();
          window2.MediaSource && MediaSource.isTypeSupported('video/webm; codecs="vp9"') && !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') && zD();
        }
        function vD() {
          var a = MediaSource.prototype.addSourceBuffer;
          MediaSource.prototype.addSourceBuffer = function() {
            var b = a.apply(this, Na.apply(0, arguments));
            b.abort = function() {
            };
            return b;
          };
        }
        function wD() {
          var a = SourceBuffer.prototype.remove;
          SourceBuffer.prototype.remove = function(b, c) {
            return a.call(this, b, c - 1e-3);
          };
        }
        function yD() {
          if (window2.MediaSource) {
            var a = MediaSource.isTypeSupported.bind(MediaSource);
            MediaSource.isTypeSupported = function(c) {
              return Me(c) != "mp2t" && a(c);
            };
          }
          if (window2.ManagedMediaSource) {
            var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(c) {
              return Me(c) != "mp2t" && b(c);
            };
          }
        }
        function xD(a) {
          var b = MediaSource.isTypeSupported.bind(MediaSource);
          MediaSource.isTypeSupported = function(d) {
            return Pe(d) != a && b(d);
          };
          if (window2.ManagedMediaSource) {
            var c = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(d) {
              return Pe(d) != a && c(d);
            };
          }
        }
        function zD() {
          var a = MediaSource.isTypeSupported;
          rb().aj() && (MediaSource.isTypeSupported = function(b) {
            var c = b.split(/ *; */), d = c.findIndex(function(g) {
              return g.startsWith("codecs=");
            });
            if (d < 0) return a(b);
            var e = c[d].replace("codecs=", "").replace(/"/g, "").split(/\s*,\s*/), f = e.findIndex(function(g) {
              return g.startsWith("vp09");
            });
            f >= 0 && (e[f] = "vp9", c[d] = 'codecs="' + e.join(",") + '"', b = c.join("; "));
            return a(b);
          });
        }
        UC.MediaSource = tD;
        tD.install = uD;
        VC(uD);
        function AD() {
        }
        var BD, CD, DD, ED, FD, GD;
        function HD(a) {
          if (window2.HTMLVideoElement && window2.WebKitMediaKeys && window2.shakaMediaKeysPolyfill != ID) {
            if (a === void 0 ? 0 : a) BD = true, CD = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys"), DD = HTMLMediaElement.prototype.setMediaKeys, ED = window2.MediaKeys, FD = window2.MediaKeySystemAccess, GD = navigator.requestMediaKeySystemAccess;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = JD;
            window2.MediaKeys = KD;
            window2.MediaKeySystemAccess = LD;
            navigator.requestMediaKeySystemAccess = MD;
            window2.shakaMediaKeysPolyfill = ID;
            Kf.clear();
            yg.clear();
          }
        }
        function MD(a, b) {
          try {
            var c = new LD(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function JD(a) {
          var b = this.mediaKeys;
          b && b != a && ND(b, null);
          delete this.mediaKeys;
          return (this.mediaKeys = a) ? ND(a, this) : Promise.resolve();
        }
        function OD(a) {
          a = Vb(a.initData);
          if ($b(a).getUint32(0, true) + 4 != a.byteLength) throw new RangeError("Malformed FairPlay init data");
          a = dc(a.subarray(4), true);
          a = hc(a);
          var b = new Event("encrypted");
          b.initDataType = "skd";
          b.initData = Xb(a);
          this.dispatchEvent(b);
        }
        UC.PatchedMediaKeysApple = AD;
        AD.uninstall = function() {
          window2.shakaMediaKeysPolyfill == ID && BD && (BD = false, Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", CD), HTMLMediaElement.prototype.setMediaKeys = DD, window2.MediaKeys = ED, window2.MediaKeySystemAccess = FD, navigator.requestMediaKeySystemAccess = GD, CD = GD = DD = FD = ED = null, window2.shakaMediaKeysPolyfill = "", Kf.clear(), yg.clear());
        };
        AD.install = HD;
        function LD(a, b) {
          this.keySystem = a;
          if (a.startsWith("com.apple.fps")) for (a = t(b), b = a.next(); !b.done; b = a.next()) {
            var c = b.value;
            if (c.persistentState == "required") b = null;
            else {
              b = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: c.initDataTypes, sessionTypes: ["temporary"], label: c.label };
              var d = false, e = false;
              if (c.audioCapabilities) for (var f = t(c.audioCapabilities), g = f.next(); !g.done; g = f.next()) g = g.value, g.contentType && (d = true, WebKitMediaKeys.isTypeSupported(
                this.keySystem,
                g.contentType.split(";")[0]
              ) && (b.audioCapabilities.push(g), e = true));
              if (c.videoCapabilities) for (c = t(c.videoCapabilities), f = c.next(); !f.done; f = c.next()) f = f.value, f.contentType && (d = true, WebKitMediaKeys.isTypeSupported(this.keySystem, f.contentType.split(";")[0]) && (b.videoCapabilities.push(f), e = true));
              d || (e = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
              b = e ? b : null;
            }
            if (b) {
              this.g = b;
              return;
            }
          }
          a = Error("Unsupported keySystem");
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        LD.prototype.createMediaKeys = function() {
          var a = new KD(this.keySystem);
          return Promise.resolve(a);
        };
        LD.prototype.getConfiguration = function() {
          return this.g;
        };
        function KD(a) {
          this.h = new WebKitMediaKeys(a);
          this.g = new kb();
        }
        KD.prototype.createSession = function(a) {
          a = a || "temporary";
          if (a != "temporary") throw new TypeError("Session type " + a + " is unsupported on this platform.");
          return new PD(this.h, a);
        };
        KD.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        function ND(a, b) {
          a.g.Qa();
          if (!b) return Promise.resolve();
          a.g.D(b, "webkitneedkey", OD);
          try {
            return vl(b, HTMLMediaElement.HAVE_METADATA, a.g, function() {
              b.webkitSetMediaKeys(a.h);
            }), Promise.resolve();
          } catch (c) {
            return Promise.reject(c);
          }
        }
        KD.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function PD(a) {
          Mg.call(this);
          this.i = null;
          this.l = a;
          this.g = this.h = null;
          this.j = new kb();
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Cg();
          this.keyStatuses = new QD();
          this.onkeystatuseschange = null;
        }
        la(PD, Mg);
        p = PD.prototype;
        p.generateRequest = function(a, b) {
          var c = this;
          this.h = new Cg();
          try {
            var d = this.l.createSession("video/mp4", Vb(b));
            this.i = d;
            this.sessionId = d.sessionId || "";
            this.j.D(this.i, "webkitkeymessage", function(e) {
              c.h && (c.h.resolve(), c.h = null);
              e = (/* @__PURE__ */ new Map()).set("messageType", c.keyStatuses.Kc() == void 0 ? "license-request" : "license-renewal").set("message", Xb(e.message));
              e = new V("message", e);
              c.dispatchEvent(e);
            });
            this.j.D(d, "webkitkeyadded", function() {
              c.g && (RD(c, "usable"), c.g.resolve(), c.g = null);
            });
            this.j.D(
              d,
              "webkitkeyerror",
              function() {
                var e = Error("EME PatchedMediaKeysApple key error");
                e.errorCode = c.i.error;
                if (c.h != null) c.h.reject(e), c.h = null;
                else if (c.g != null) c.g.reject(e), c.g = null;
                else switch (c.i.error.code) {
                  case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                  case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                    RD(c, "output-not-allowed");
                    break;
                  default:
                    RD(c, "internal-error");
                }
              }
            );
            RD(this, "status-pending");
          } catch (e) {
            this.h.reject(e);
          }
          return this.h;
        };
        p.load = function() {
          return Promise.reject(Error("MediaKeySession.load not yet supported"));
        };
        p.update = function(a) {
          this.g = new Cg();
          try {
            this.i.update(Vb(a));
          } catch (b) {
            this.g.reject(b);
          }
          return this.g;
        };
        p.close = function() {
          try {
            this.i.close(), this.closed.resolve(), this.j.Qa();
          } catch (a) {
            this.closed.reject(a);
          }
          return this.closed;
        };
        p.remove = function() {
          return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));
        };
        function RD(a, b) {
          var c = a.keyStatuses;
          c.size = b == void 0 ? 0 : 1;
          c.g = b;
          b = new V("keystatuseschange");
          a.dispatchEvent(b);
          if (a.onkeystatuseschange) a.onkeystatuseschange(b);
        }
        function QD() {
          this.size = 0;
          this.g = void 0;
        }
        p = QD.prototype;
        p.Kc = function() {
          return this.g;
        };
        p.forEach = function(a) {
          this.g && a(this.g, xg.value());
        };
        p.get = function(a) {
          if (this.has(a)) return this.g;
        };
        p.has = function(a) {
          var b = xg.value();
          return this.g && Tb(a, b) ? true : false;
        };
        p.entries = function() {
        };
        p.keys = function() {
        };
        p.values = function() {
        };
        var ID = "apple";
        VC(function() {
          window2.HTMLVideoElement && window2.WebKitMediaKeys && (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || HD());
        });
        function SD() {
        }
        function TD() {
          if (window2.MediaKeys) {
            var a = rb();
            MediaKeys.prototype.setServerCertificate && a.re() || (MediaKeys.prototype.setServerCertificate = UD);
          }
        }
        function UD() {
          return Promise.resolve(false);
        }
        UC.PatchedMediaKeysCert = SD;
        SD.install = TD;
        VC(TD);
        function VD() {
        }
        function WD() {
          if (!(!window2.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)) {
            if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) XD = "webkit";
            else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
            navigator.requestMediaKeySystemAccess = YD;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = ZD;
            window2.MediaKeys = $D;
            window2.MediaKeySystemAccess = aE;
            window2.shakaMediaKeysPolyfill = bE;
          }
        }
        function cE(a) {
          var b = XD;
          return b ? b + a.charAt(0).toUpperCase() + a.slice(1) : a;
        }
        function YD(a, b) {
          try {
            var c = new aE(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function ZD(a) {
          var b = this.mediaKeys;
          b && b != a && dE(b, null);
          delete this.mediaKeys;
          (this.mediaKeys = a) && dE(a, this);
          return Promise.resolve();
        }
        UC.PatchedMediaKeysWebkit = VD;
        VD.install = WD;
        function aE(a, b) {
          this.g = this.keySystem = a;
          var c = false;
          a == "org.w3.clearkey" && (this.g = "webkit-org.w3.clearkey", c = false);
          var d = false;
          var e = document.getElementsByTagName("video");
          e = e.length ? e[0] : document.createElement("video");
          b = t(b);
          for (var f = b.next(); !f.done; f = b.next()) {
            f = f.value;
            var g = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: f.initDataTypes, sessionTypes: ["temporary"], label: f.label }, h = false;
            if (f.audioCapabilities) for (var k2 = t(f.audioCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType.split(";")[0], this.g) && (g.audioCapabilities.push(l), d = true));
            if (f.videoCapabilities) for (k2 = t(f.videoCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType, this.g) && (g.videoCapabilities.push(l), d = true));
            h || (d = e.canPlayType("video/mp4", this.g) || e.canPlayType("video/webm", this.g));
            f.persistentState == "required" && (c ? (g.persistentState = "required", g.sessionTypes = ["persistent-license"]) : d = false);
            if (d) {
              this.h = g;
              return;
            }
          }
          c = "Unsupported keySystem";
          if (a == "org.w3.clearkey" || a == "com.widevine.alpha") c = "None of the requested configurations were supported.";
          a = Error(c);
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        aE.prototype.createMediaKeys = function() {
          var a = new $D(this.g);
          return Promise.resolve(a);
        };
        aE.prototype.getConfiguration = function() {
          return this.h;
        };
        function $D(a) {
          this.l = a;
          this.h = null;
          this.g = new kb();
          this.i = [];
          this.j = /* @__PURE__ */ new Map();
        }
        function dE(a, b) {
          a.h = b;
          a.g.Qa();
          var c = XD;
          b && (a.g.D(b, c + "needkey", function(d) {
            var e = new CustomEvent("encrypted");
            e.initDataType = "cenc";
            e.initData = Xb(d.initData);
            a.h.dispatchEvent(e);
          }), a.g.D(b, c + "keymessage", function(d) {
            var e = eE(a, d.sessionId);
            e && (d = (/* @__PURE__ */ new Map()).set("messageType", e.keyStatuses.Kc() == void 0 ? "licenserequest" : "licenserenewal").set("message", d.message), d = new V("message", d), e.h && (e.h.resolve(), e.h = null), e.dispatchEvent(d));
          }), a.g.D(b, c + "keyadded", function(d) {
            (d = eE(a, d.sessionId)) && d.ready();
          }), a.g.D(b, c + "keyerror", function(d) {
            var e = eE(a, d.sessionId);
            if (e) {
              var f = Error("EME v0.1b key error"), g = d.errorCode;
              g.systemCode = d.systemCode;
              f.errorCode = g;
              !d.sessionId && e.h ? (d.systemCode == 45 && (f.message = "Unsupported session type."), e.h.reject(f), e.h = null) : d.sessionId && e.g ? (e.g.reject(f), e.g = null) : (f = d.systemCode, d.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? fE(e, "output-restricted") : f == 1 ? fE(e, "expired") : fE(e, "internal-error"));
            }
          }));
        }
        $D.prototype.createSession = function(a) {
          a = a || "temporary";
          if (a != "temporary" && a != "persistent-license") throw new TypeError("Session type " + a + " is unsupported on this platform.");
          var b = this.h || document.createElement("video");
          b.src || (b.src = "about:blank");
          a = new gE(b, this.l, a);
          this.i.push(a);
          return a;
        };
        $D.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        $D.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function eE(a, b) {
          var c = a.j.get(b);
          return c ? c : (c = a.i.shift()) ? (c.sessionId = b, a.j.set(b, c), c) : null;
        }
        function gE(a, b, c) {
          Mg.call(this);
          this.j = a;
          this.m = false;
          this.g = this.h = null;
          this.i = b;
          this.l = c;
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Cg();
          this.keyStatuses = new hE();
          this.onkeystatuseschange = null;
        }
        la(gE, Mg);
        p = gE.prototype;
        p.ready = function() {
          fE(this, "usable");
          this.g && this.g.resolve();
          this.g = null;
        };
        function iE(a, b, c) {
          if (a.m) return Promise.reject(Error("The session is already initialized."));
          a.m = true;
          try {
            if (a.l == "persistent-license") if (c) var d = Vb(hc("LOAD_SESSION|" + c));
            else {
              var e = hc("PERSISTENT|");
              d = tc(e, b);
            }
            else d = Vb(b);
          } catch (g) {
            return Promise.reject(g);
          }
          a.h = new Cg();
          var f = cE("generateKeyRequest");
          try {
            a.j[f](a.i, d);
          } catch (g) {
            if (g.name != "InvalidStateError") return a.h = null, Promise.reject(g);
            new gf(function() {
              try {
                a.j[f](a.i, d);
              } catch (h) {
                a.h.reject(h), a.h = null;
              }
            }).ia(0.01);
          }
          return a.h;
        }
        function jE(a, b, c) {
          if (a.g) a.g.then(function() {
            return jE(a, b, c);
          }).catch(function() {
            return jE(a, b, c);
          });
          else {
            a.g = b;
            if (a.i == "webkit-org.w3.clearkey") {
              var d = cc(c);
              var e = JSON.parse(d);
              e.keys[0].kty != "oct" && (a.g.reject(Error("Response is not a valid JSON Web Key Set.")), a.g = null);
              d = oc(e.keys[0].k);
              e = oc(e.keys[0].kid);
            } else d = Vb(c), e = null;
            var f = cE("addKey");
            try {
              a.j[f](a.i, d, e, a.sessionId);
            } catch (g) {
              a.g.reject(g), a.g = null;
            }
          }
        }
        function fE(a, b) {
          var c = a.keyStatuses;
          c.size = b == void 0 ? 0 : 1;
          c.g = b;
          b = new V("keystatuseschange");
          a.dispatchEvent(b);
          if (a.onkeystatuseschange) a.onkeystatuseschange(b);
        }
        p.generateRequest = function(a, b) {
          return iE(this, b, null);
        };
        p.load = function(a) {
          return this.l == "persistent-license" ? iE(this, null, a) : Promise.reject(Error("Not a persistent session."));
        };
        p.update = function(a) {
          var b = new Cg();
          jE(this, b, a);
          return b;
        };
        p.close = function() {
          if (this.l != "persistent-license") {
            if (!this.sessionId) return this.closed.reject(Error("The session is not callable.")), this.closed;
            var a = cE("cancelKeyRequest");
            try {
              this.j[a](this.i, this.sessionId);
            } catch (b) {
            }
          }
          this.closed.resolve();
          return this.closed;
        };
        p.remove = function() {
          return this.l != "persistent-license" ? Promise.reject(Error("Not a persistent session.")) : this.close();
        };
        function hE() {
          this.size = 0;
          this.g = void 0;
        }
        p = hE.prototype;
        p.Kc = function() {
          return this.g;
        };
        p.forEach = function(a) {
          this.g && a(this.g, xg.value());
        };
        p.get = function(a) {
          if (this.has(a)) return this.g;
        };
        p.has = function(a) {
          var b = xg.value();
          return this.g && Tb(a, b) ? true : false;
        };
        p.entries = function() {
        };
        p.keys = function() {
        };
        p.values = function() {
        };
        var XD = "", bE = "webkit";
        VC(WD);
        function kE() {
        }
        function lE() {
          window2.crypto && ("randomUUID" in window2.crypto || (window2.crypto.randomUUID = mE));
        }
        function mE() {
          var a = URL.createObjectURL(new Blob()), b = a.toString();
          URL.revokeObjectURL(a);
          return b.substr(b.lastIndexOf("/") + 1);
        }
        UC.RandomUUID = kE;
        kE.install = lE;
        VC(lE);
        function nE() {
        }
        function oE() {
          var a = Symbol.prototype;
          "description" in a || Object.defineProperty(a, "description", { get: pE });
        }
        function pE() {
          var a = /\((.*)\)/.exec(this.toString());
          return a ? a[1] : void 0;
        }
        UC.Symbol = nE;
        nE.install = oE;
        VC(oE);
        function qE() {
        }
        function rE() {
          for (var a = t([Uint8Array, Uint8ClampedArray, Uint16Array, Uint32Array, Int8Array, Int16Array, Int32Array, Float32Array, Float64Array]), b = a.next(); !b.done; b = a.next()) b = b.value, b.prototype.indexOf || (b.prototype.indexOf = sE), b.prototype.lastIndexOf || (b.prototype.lastIndexOf = tE), b.prototype.includes || (b.prototype.includes = uE);
        }
        function sE(a, b) {
          return Array.prototype.indexOf.call(this, a, b);
        }
        function tE(a, b) {
          return Array.prototype.lastIndexOf.call(this, a, b);
        }
        function uE(a, b) {
          return this.indexOf(a, b) !== -1;
        }
        UC.TypedArray = qE;
        qE.install = rE;
        VC(rE);
        function vE() {
        }
        function wE() {
          if (window2.HTMLMediaElement) {
            var a = HTMLMediaElement.prototype.play;
            HTMLMediaElement.prototype.play = function() {
              var b = a.apply(this);
              b && b.catch(function() {
              });
              return b;
            };
          }
        }
        UC.VideoPlayPromise = vE;
        vE.install = wE;
        VC(wE);
        function xE() {
        }
        function yE() {
          if (window2.HTMLVideoElement) {
            var a = HTMLVideoElement.prototype;
            !a.getVideoPlaybackQuality && ("webkitDroppedFrameCount" in a || typeof Nc().webkitDroppedFrameCount === "number") && (a.getVideoPlaybackQuality = zE);
          }
        }
        function zE() {
          return { droppedVideoFrames: this.webkitDroppedFrameCount, totalVideoFrames: this.webkitDecodedFrameCount, corruptedVideoFrames: 0, creationTime: NaN, totalFrameDelay: 0 };
        }
        UC.VideoPlaybackQuality = xE;
        xE.install = yE;
        VC(yE);
        function AE() {
        }
        function BE() {
          if (!window2.VTTCue && window2.TextTrackCue) {
            var a = null, b = TextTrackCue.length;
            if (b == 3) a = CE;
            else if (b == 6) a = DE;
            else {
              try {
                var c = !!CE(1, 2, "");
              } catch (d) {
                c = false;
              }
              c && (a = CE);
            }
            a && (window2.VTTCue = function(d, e, f) {
              return a(d, e, f);
            });
          }
        }
        function CE(a, b, c) {
          return new window2.TextTrackCue(a, b, c);
        }
        function DE(a, b, c) {
          return new window2.TextTrackCue(a + "-" + b + "-" + c, a, b, c);
        }
        UC.VTTCue = AE;
        AE.install = BE;
        VC(BE);
        function EE(a) {
          Mg.call(this);
          this.g = a;
          this.m = null;
          this.h = [];
          this.j = -1;
          this.i = this.l = null;
          this.o = new kb();
        }
        la(EE, Mg);
        p = EE.prototype;
        p.destroy = function() {
          var a = this;
          return Q(function(b) {
            if (b.g == 1) return F(b, a.removeAllItems(), 2);
            a.g = null;
            a.o && (a.o.release(), a.o = null);
            Mg.prototype.release.call(a);
            G(b);
          });
        };
        p.configure = function(a) {
          this.m = a;
        };
        p.getConfiguration = function() {
          return this.m;
        };
        p.getCurrentItem = function() {
          return this.h.length && this.j >= 0 && this.j < this.h.length ? this.h[this.j] : null;
        };
        p.getCurrentItemIndex = function() {
          return this.j;
        };
        p.getItems = function() {
          return this.h.slice();
        };
        p.insertItems = function(a) {
          this.h.push.apply(this.h, x(a));
          this.dispatchEvent(new V("itemsinserted"));
        };
        p.removeAllItems = function() {
          var a = this, b, c, d, e;
          return Q(function(f) {
            if (f.g == 1) return a.o.Qa(), a.h.length && a.j >= 0 ? F(f, a.g.Cc(), 2) : f.A(2);
            if (f.g != 4) {
              b = [];
              a.i && (a.i.preloadManager.l || b.push(a.i.preloadManager.destroy()), a.i = null);
              a.l && (a.l.preloadManager.l || b.push(a.l.preloadManager.destroy()), a.l = null);
              c = t(a.h);
              for (d = c.next(); !d.done; d = c.next()) e = d.value, e.preloadManager && !e.preloadManager.l && b.push(e.preloadManager.destroy());
              return b.length ? F(f, Promise.all(b), 4) : f.A(4);
            }
            a.h = [];
            a.j = -1;
            a.dispatchEvent(new V("itemsremoved"));
            G(f);
          });
        };
        p.playItem = function(a) {
          var b = this, c, d, e, f, g, h, k2, l, m, n, q, r, u, v, w, z, y;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                b.o.Qa();
                if (!b.h.length || a >= b.h.length) throw new U(2, 7, 7007);
                c = b.getCurrentItem();
                d = b.h[a];
                b.j != a && (b.j = a, b.dispatchEvent(new V("currentitemchanged")));
                e = b.g.h;
                f = b.m ? b.m.preloadNextUrlWindow : 0;
                f > 0 && (g = false, b.o.D(e, "timeupdate", function() {
                  var C, H, D, A;
                  return Q(function(E) {
                    switch (E.g) {
                      case 1:
                        if (b.l || b.h.length <= 1 || g || b.g.W() || !e.duration) return E.return();
                        C = b.g.Ra().end - e.currentTime;
                        if (isNaN(C)) {
                          E.A(0);
                          break;
                        }
                        if (!(C <= f)) {
                          E.A(0);
                          break;
                        }
                        H = b.m && b.m.repeatMode;
                        D = null;
                        b.j + 1 < b.h.length ? D = b.h[b.j + 1] : H == 1 && (D = b.h[0]);
                        if (!D || D.preloadManager && !D.preloadManager.l) {
                          E.A(0);
                          break;
                        }
                        g = true;
                        A = null;
                        ra(E, 5);
                        return F(E, b.g.preload(D.manifestUri, D.startTime, D.mimeType, D.config), 7);
                      case 7:
                        A = E.h;
                        ta(E, 6);
                        break;
                      case 5:
                        Aa(E), A = null;
                      case 6:
                        b.l = { item: D, preloadManager: A }, g = false, G(E);
                    }
                  });
                }));
                b.o.D(b.g, "complete", function() {
                  var C = b.m && b.m.repeatMode, H = false;
                  if (C == 2) H = true;
                  else {
                    var D = b.j + 1;
                    D < b.h.length ? b.playItem(D) : C == 1 && (b.h.length == 1 ? H = true : b.playItem(0));
                  }
                  H && (e.paused ? (e.currentTime = b.g.Ra().start, e.play()) : b.o.D(e, "paused", function() {
                    e.currentTime = b.g.Ra().start;
                    e.play();
                  }));
                });
                h = d.manifestUri;
                d.preloadManager && !d.preloadManager.l && (h = d.preloadManager);
                k2 = false;
                b.l && b.l.item == d && b.l.preloadManager ? h = b.l.preloadManager : b.i && b.i.item == d && b.i.preloadManager && (h = b.i.preloadManager, k2 = true);
                if (!b.i) {
                  B.A(2);
                  break;
                }
                if (k2 || b.i.preloadManager.l) {
                  B.A(3);
                  break;
                }
                return F(B, b.i.preloadManager.destroy(), 3);
              case 3:
                b.i = null;
              case 2:
                if (!(b.m && b.m.preloadPrevItem && c && b.g.m === nr)) {
                  B.A(5);
                  break;
                }
                l = null;
                ra(B, 6);
                return F(B, b.g.ej(), 8);
              case 8:
                l = B.h;
                ta(B, 7);
                break;
              case 6:
                Aa(B), l = null;
              case 7:
                b.i = { item: c, preloadManager: l };
              case 5:
                return d.config && (b.g.Ji(), b.g.configure(d.config)), F(B, b.g.load(h, d.startTime, d.mimeType), 9);
              case 9:
                b.l = null;
                if (d.extraText) for (m = t(d.extraText), n = m.next(); !n.done; n = m.next()) q = n.value, q.mime ? b.g.Od(q.uri, q.language, q.kind, q.mime, q.codecs) : b.g.Od(q.uri, q.language, q.kind);
                if (d.extraThumbnail) for (r = t(d.extraThumbnail), u = r.next(); !u.done; u = r.next()) v = u.value, b.g.Me(v);
                if (d.extraChapter) for (w = t(d.extraChapter), z = w.next(); !z.done; z = w.next()) y = z.value, b.g.Le(y.uri, y.language, y.mime);
                G(B);
            }
          });
        };
        S("shaka.queue.QueueManager", EE);
        EE.prototype.playItem = EE.prototype.playItem;
        EE.prototype.removeAllItems = EE.prototype.removeAllItems;
        EE.prototype.insertItems = EE.prototype.insertItems;
        EE.prototype.getItems = EE.prototype.getItems;
        EE.prototype.getCurrentItemIndex = EE.prototype.getCurrentItemIndex;
        EE.prototype.getCurrentItem = EE.prototype.getCurrentItem;
        EE.prototype.getConfiguration = EE.prototype.getConfiguration;
        EE.prototype.configure = EE.prototype.configure;
        EE.prototype.destroy = EE.prototype.destroy;
        Gq = function(a) {
          return new EE(a);
        };
        function FE() {
        }
        FE.prototype.parseInit = function() {
        };
        FE.prototype.setSequenceMode = function() {
        };
        FE.prototype.setManifestType = function() {
        };
        FE.prototype.parseMedia = function(a, b) {
          var c = null, d = [];
          a = cc(a).split(/\r?\n/);
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) if ((e = e.value) && !/^\s+$/.test(e) && (e = GE.exec(e))) {
            var f = HE.exec(e[1]);
            f = parseInt(f[1], 10) * 60 + parseFloat(f[2].replace(",", "."));
            e = new Wd(f, b.segmentEnd ? b.segmentEnd : f + 2, e[2]);
            c && (c.endTime = f, d.push(c));
            c = e;
          }
          c && d.push(c);
          return d;
        };
        S("shaka.text.LrcTextParser", FE);
        FE.prototype.parseMedia = FE.prototype.parseMedia;
        FE.prototype.setManifestType = FE.prototype.setManifestType;
        FE.prototype.setSequenceMode = FE.prototype.setSequenceMode;
        FE.prototype.parseInit = FE.prototype.parseInit;
        var GE = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/, HE = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
        Ve("application/x-subtitle-lrc", function() {
          return new FE();
        });
        function IE() {
          this.g = "UNKNOWN";
        }
        IE.prototype.parseInit = function() {
        };
        IE.prototype.setSequenceMode = function() {
        };
        IE.prototype.setManifestType = function(a) {
          this.g = a;
        };
        IE.prototype.parseMedia = function(a, b, c, d) {
          var e = cc(a);
          a = [];
          if (e == "") return a;
          var f = pd(e, "tt", true);
          if (!f) throw new U(2, 2, 2005, "Failed to parse TTML.");
          e = zd(f, "body")[0];
          if (!e) return [];
          var g = Fd(f, JE, "frameRate"), h = Fd(f, JE, "subFrameRate"), k2 = Fd(f, JE, "frameRateMultiplier"), l = Fd(f, JE, "tickRate"), m = Fd(f, JE, "cellResolution"), n = f.attributes["xml:space"] || "default", q = Fd(f, KE, "extent");
          if (n != "default" && n != "preserve") throw new U(2, 2, 2005, "Invalid xml:space value: " + n);
          n = n == "default";
          g = new LE(g, h, k2, l);
          m = ME(m);
          h = zd(f, "metadata")[0];
          h = (h ? h.children : []).filter(function(v) {
            return v != "\n";
          });
          k2 = zd(f, "style");
          f = zd(f, "region");
          l = [];
          for (var r = t(f), u = r.next(); !u.done; u = r.next()) (u = NE(this, u.value, k2, q)) && l.push(u);
          if (wd(e, "p").length) throw new U(2, 2, 2001, "<p> can only be inside <div> in TTML");
          q = t(wd(e, "div"));
          for (r = q.next(); !r.done; r = q.next()) if (wd(r.value, "span").length) throw new U(2, 2, 2001, "<span> can only be inside <p> in TTML");
          if (b = OE(this, e, b, g, h, k2, f, l, n, m, null, false, c, d)) b.backgroundColor || (b.backgroundColor = "transparent"), a.push(b);
          return a;
        };
        function OE(a, b, c, d, e, f, g, h, k2, l, m, n, q, r) {
          var u = m;
          if (ud(b)) {
            if (!n) return null;
            var v = { tagName: "span", children: [xd(b)], attributes: {}, parent: null };
          } else v = b;
          for (var w = null, z = t(PE), y = z.next(); !y.done && !(w = QE(v, "backgroundImage", e, "#", y.value)[0]); y = z.next()) ;
          z = null;
          y = Fd(v, PE, "backgroundImage");
          var B = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
          if (y && B.test(y)) {
            z = parseInt(y.split(":").pop(), 10) - 1;
            if (z >= r.length) return null;
            z = r[z];
          } else q && y && !y.startsWith("#") && (B = new Cb(q), y = new Cb(y), (y = B.resolve(y).toString()) && (z = y));
          if (b.tagName == "p" || w || z) n = true;
          b = n;
          y = (v.attributes["xml:space"] || (k2 ? "default" : "preserve")) == "default";
          B = v.children.every(ud);
          k2 = [];
          if (!B) for (var C = t(v.children), H = C.next(); !H.done; H = C.next()) (H = OE(a, H.value, c, d, e, f, g, h, y, l, v, n, q, r)) && k2.push(H);
          e = m != null;
          q = xd(v);
          q = v.children.length && q && /\S/.test(q);
          C = v.attributes.begin || v.attributes.end || v.attributes.dur;
          if (!(C || q || v.tagName == "br" || k2.length != 0 || e && !y)) return null;
          r = RE(v, d);
          q = r.start;
          for (r = r.end; u && u.tagName && u.tagName != "tt"; ) r = SE(u, d, q, r), q = r.start, r = r.end, u = u.parent;
          q == null && (q = 0);
          q += c.periodStart;
          r = r == null ? Infinity : r + c.periodStart;
          a.g !== "HLS" && (q = Math.max(q, c.segmentStart), r = Math.min(r, c.segmentEnd));
          if (!C && k2.length > 0) for (q = Infinity, r = 0, c = t(k2), d = c.next(); !d.done; d = c.next()) d = d.value, q = Math.min(q, d.startTime), r = Math.max(r, d.endTime);
          if (v.tagName == "br") return a = new Wd(q, r, ""), a.lineBreak = true, a;
          c = "";
          B && (c = kc(xd(v) || ""), y && (c = c.replace(/\s+/g, " ")));
          c = new Wd(q, r, c);
          c.nestedCues = k2;
          n || (c.isContainer = true);
          l && (c.cellResolution = l);
          l = QE(
            v,
            "region",
            g,
            ""
          )[0];
          if (v.attributes.region && l && l.attributes["xml:id"]) {
            var D = l.attributes["xml:id"];
            c.region = h.filter(function(A) {
              return A.id == D;
            })[0];
          }
          h = l;
          m && e && !v.attributes.region && !v.attributes.style && (h = QE(m, "region", g, "")[0]);
          TE(a, c, v, h, w, z, f, b, k2.length == 0);
          return c;
        }
        function NE(a, b, c, d) {
          var e = new Yc(), f = b.attributes["xml:id"];
          if (!f) return null;
          e.id = f;
          f = null;
          d && (f = UE.exec(d) || VE.exec(d));
          d = f ? Number(f[1]) : null;
          f = f ? Number(f[2]) : null;
          var g, h = WE(a, b, c, "extent");
          if (h) {
            var k2 = (g = UE.exec(h)) || VE.exec(h);
            k2 != null && (e.width = Number(k2[1]), e.height = Number(k2[2]), g || (d != null && (e.width = e.width * 100 / d), f != null && (e.height = e.height * 100 / f)), e.widthUnits = g || d != null ? Zc : 0, e.heightUnits = g || f != null ? Zc : 0);
          }
          if (a = WE(a, b, c, "origin")) {
            if (k2 = (g = UE.exec(a)) || VE.exec(a), k2 != null) e.viewportAnchorX = Number(k2[1]), e.viewportAnchorY = Number(k2[2]), g ? h || (e.width = 100 - e.viewportAnchorX, e.widthUnits = Zc, e.height = 100 - e.viewportAnchorY, e.heightUnits = Zc) : (f != null && (e.viewportAnchorY = e.viewportAnchorY * 100 / f), d != null && (e.viewportAnchorX = e.viewportAnchorX * 100 / d)), e.viewportAnchorUnits = g || d != null ? Zc : 0;
          }
          return e;
        }
        function XE(a) {
          var b = a.match(/rgba\(([^)]+)\)/);
          return b && (b = b[1].split(","), b.length == 4) ? (b[3] = String(Number(b[3]) / 255), "rgba(" + b.join(",") + ")") : a;
        }
        function TE(a, b, c, d, e, f, g, h, k2) {
          h = h || k2;
          YE(a, c, d, g, "direction", h) == "rtl" && (b.direction = "rtl");
          k2 = YE(a, c, d, g, "writingMode", h);
          k2 == "tb" || k2 == "tblr" ? b.writingMode = "vertical-lr" : k2 == "tbrl" ? b.writingMode = "vertical-rl" : k2 == "rltb" || k2 == "rl" ? b.direction = "rtl" : k2 && (b.direction = Zd);
          (k2 = YE(a, c, d, g, "textAlign", true)) ? (b.positionAlign = ZE.get(k2), b.lineAlign = $E.get(k2), b.textAlign = ve[k2.toUpperCase()]) : b.textAlign = Yd;
          if (k2 = YE(a, c, d, g, "displayAlign", true)) b.displayAlign = we[k2.toUpperCase()];
          if (k2 = YE(a, c, d, g, "color", h)) b.color = XE(k2);
          if (k2 = YE(a, c, d, g, "backgroundColor", h)) b.backgroundColor = XE(k2);
          if (k2 = YE(a, c, d, g, "border", h)) b.border = k2;
          if (k2 = YE(a, c, d, g, "fontFamily", h)) switch (k2) {
            case "monospaceSerif":
              b.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
              break;
            case "proportionalSansSerif":
              b.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
              break;
            case "sansSerif":
              b.fontFamily = "sans-serif";
              break;
            case "monospaceSansSerif":
              b.fontFamily = "Consolas,monospace";
              break;
            case "proportionalSerif":
              b.fontFamily = "serif";
              break;
            default:
              b.fontFamily = k2.split(",").filter(function(l) {
                return l != "default";
              }).join(",");
          }
          (k2 = YE(a, c, d, g, "fontWeight", h)) && k2 == "bold" && (b.fontWeight = se);
          k2 = YE(a, c, d, g, "wrapOption", h);
          b.wrapLine = k2 && k2 == "noWrap" ? false : true;
          (k2 = YE(a, c, d, g, "lineHeight", h)) && k2.match(aF) && (b.lineHeight = k2);
          (k2 = YE(a, c, d, g, "fontSize", h)) && (k2.match(aF) || k2.match(bF)) && (b.fontSize = k2);
          if (k2 = YE(a, c, d, g, "fontStyle", h)) b.fontStyle = ye[k2.toUpperCase()];
          e ? (f = e.attributes.imageType || e.attributes.imagetype, k2 = e.attributes.encoding, e = xd(e).trim(), f == "PNG" && k2 == "Base64" && e && (b.backgroundImage = "data:image/png;base64," + e)) : f && (b.backgroundImage = f);
          if (e = YE(a, c, d, g, "textOutline", h)) e = e.split(" "), e[0].match(aF) ? b.textStrokeColor = b.color : (b.textStrokeColor = XE(e[0]), e.shift()), e[0] && e[0].match(aF) ? b.textStrokeWidth = e[0] : b.textStrokeColor = "";
          (e = YE(a, c, d, g, "letterSpacing", h)) && e.match(aF) && (b.letterSpacing = e);
          (e = YE(a, c, d, g, "linePadding", h)) && e.match(aF) && (b.linePadding = e);
          if (e = YE(a, c, d, g, "opacity", h)) b.opacity = parseFloat(e);
          (e = WE(a, d, g, "textDecoration")) && cF(b, e);
          (e = dF(
            a,
            c,
            g,
            "textDecoration"
          )) && cF(b, e);
          if (e = YE(a, c, d, g, "textCombine", h)) b.textCombineUpright = e;
          switch (YE(a, c, d, g, "ruby", h)) {
            case "container":
              b.rubyTag = "ruby";
              break;
            case "text":
              b.rubyTag = "rt";
          }
        }
        function cF(a, b) {
          b = t(b.split(" "));
          for (var c = b.next(); !c.done; c = b.next()) switch (c.value) {
            case "underline":
              a.textDecoration.includes(ue) || a.textDecoration.push(ue);
              break;
            case "noUnderline":
              a.textDecoration.includes(ue) && gb(a.textDecoration, ue);
              break;
            case "lineThrough":
              a.textDecoration.includes("lineThrough") || a.textDecoration.push("lineThrough");
              break;
            case "noLineThrough":
              a.textDecoration.includes("lineThrough") && gb(a.textDecoration, "lineThrough");
              break;
            case "overline":
              a.textDecoration.includes("overline") || a.textDecoration.push("overline");
              break;
            case "noOverline":
              a.textDecoration.includes("overline") && gb(a.textDecoration, "overline");
          }
        }
        function YE(a, b, c, d, e, f) {
          f = f === void 0 ? true : f;
          return (b = dF(a, b, d, e)) ? b : f ? WE(a, c, d, e) : null;
        }
        function WE(a, b, c, d) {
          if (!b) return null;
          var e = Fd(b, KE, d);
          return e ? e : eF(a, b, c, d);
        }
        function dF(a, b, c, d) {
          var e = Fd(b, KE, d);
          return e ? e : eF(a, b, c, d);
        }
        function eF(a, b, c, d) {
          b = QE(b, "style", c, "");
          for (var e = null, f = 0; f < b.length; f++) {
            var g = Ed(b[f], "urn:ebu:tt:style", d);
            g || (g = Fd(b[f], KE, d));
            g || (g = dF(a, b[f], c, d));
            g && (e = g);
          }
          return e;
        }
        function QE(a, b, c, d, e) {
          var f = [];
          if (!a || c.length < 1) return f;
          var g = a;
          for (a = null; !a && !(a = e ? Ed(g, e, b) : g.attributes[b]) && (g = g.parent, g); ) ;
          if (b = a) {
            for (b = t(b.split(" ")), e = b.next(); !e.done; e = b.next()) for (e = e.value, a = t(c), g = a.next(); !g.done; g = a.next()) if (g = g.value, d + g.attributes["xml:id"] == e) {
              f.push(g);
              break;
            }
          }
          return f;
        }
        function SE(a, b, c, d) {
          a = RE(a, b);
          c == null ? c = a.start : a.start != null && (c += a.start);
          d == null ? d = a.end : a.start != null && (d += a.start);
          return { start: c, end: d };
        }
        function RE(a, b) {
          var c = fF(a.attributes.begin, b), d = fF(a.attributes.end, b);
          a = fF(a.attributes.dur, b);
          d == null && a != null && (d = c + a);
          return { start: c, end: d };
        }
        function fF(a, b) {
          var c = null;
          if (gF.test(a)) {
            a = gF.exec(a);
            c = Number(a[1]);
            var d = Number(a[2]), e = Number(a[3]), f = Number(a[4]);
            f += (Number(a[5]) || 0) / b.h;
            e += f / b.frameRate;
            c = e + d * 60 + c * 3600;
          } else if (hF.test(a)) c = iF(hF, a);
          else if (jF.test(a)) c = iF(jF, a);
          else if (kF.test(a)) a = kF.exec(a), c = Number(a[1]) / b.frameRate;
          else if (lF.test(a)) a = lF.exec(a), c = Number(a[1]) / b.g;
          else if (mF.test(a)) c = iF(mF, a);
          else if (a) throw new U(2, 2, 2001, "Could not parse cue time range in TTML");
          return c;
        }
        function iF(a, b) {
          a = a.exec(b);
          return a == null || a[0] == "" ? null : (Number(a[4]) || 0) / 1e3 + (Number(a[3]) || 0) + (Number(a[2]) || 0) * 60 + (Number(a[1]) || 0) * 3600;
        }
        function ME(a) {
          return a ? (a = /^(\d+) (\d+)$/.exec(a)) ? { columns: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        S("shaka.text.TtmlTextParser", IE);
        IE.prototype.parseMedia = IE.prototype.parseMedia;
        IE.prototype.setManifestType = IE.prototype.setManifestType;
        IE.prototype.setSequenceMode = IE.prototype.setSequenceMode;
        IE.prototype.parseInit = IE.prototype.parseInit;
        function LE(a, b, c, d) {
          this.frameRate = Number(a) || 30;
          this.h = Number(b) || 1;
          this.g = Number(d);
          this.g == 0 && (this.g = a ? this.frameRate * this.h : 1);
          c && (a = /^(\d+) (\d+)$/g.exec(c)) && (this.frameRate *= Number(a[1]) / Number(a[2]));
        }
        var UE = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/, bF = /^(\d{1,4}(?:\.\d+)?|100)%$/, aF = /^(\d+px|\d+em|\d*\.?\d+c)$/, VE = /^(\d+)px (\d+)px$/, gF = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, hF = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/, jF = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/, kF = /^(\d*(?:\.\d*)?)f$/, lF = /^(\d*(?:\.\d*)?)t$/, mF = RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"), $E = (/* @__PURE__ */ new Map()).set("left", be).set("center", "center").set(
          "right",
          "end"
        ).set("start", be).set("end", "end"), ZE = (/* @__PURE__ */ new Map()).set("left", "line-left").set("center", "center").set("right", "line-right"), JE = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"], KE = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"], PE = ["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt", "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];
        Ve("application/ttml+xml", function() {
          return new IE();
        });
        function nF() {
          this.g = new IE();
        }
        nF.prototype.parseInit = function(a) {
          var b = false;
          new kh().box("moov", qh).box("trak", qh).box("mdia", qh).box("minf", qh).box("stbl", qh).S("stsd", sh).box("stpp", function(c) {
            b = true;
            c.parser.stop();
          }).parse(a);
          if (!b) throw new U(2, 2, 2007);
        };
        nF.prototype.setSequenceMode = function(a) {
          this.g.setSequenceMode(a);
        };
        nF.prototype.setManifestType = function(a) {
          this.g.setManifestType(a);
        };
        nF.prototype.parseMedia = function(a, b, c) {
          var d = [], e = null, f = [], g = /* @__PURE__ */ new Map(), h = [];
          new kh().box("moof", qh).box("traf", qh).S("tfhd", function(z) {
            e = Ai(z.reader, z.flags).Ud;
          }).S("trun", function(z) {
            z = Di(z.reader, z.version, z.flags);
            z = t(z.ih);
            for (var y = z.next(); !y.done; y = z.next()) h.push(y.value.sampleSize || e || 0);
          }).S("subs", function(z) {
            for (var y = z.reader, B = y.U(), C = -1, H = 0; H < B; H++) {
              var D = y.U();
              C += D;
              D = y.Ca();
              for (var A = [], E = 0; E < D; E++) z.version == 1 ? A.push(y.U()) : A.push(y.Ca()), y.Y(), y.Y(), y.U();
              g.set(C, A);
            }
          }).box(
            "mdat",
            vh(function(z) {
              f.push(z);
            }, false)
          ).parse(a, false);
          if (f.length == 0) throw new U(2, 2, 2007);
          for (var k2 = tc.apply(lc, x(f)), l = 0, m = 0; m < h.length; m++) {
            var n = Vb(k2, l, h[m]);
            l += h[m];
            var q = g.get(m);
            if (q && q.length) {
              n = Vb(n, 0, q[0]);
              for (var r = [], u = q[0], v = 1; v < q.length; v++) {
                var w = Vb(a, u, q[v]);
                w = mc(w);
                r.push("data:image/png;base64," + w);
                u += q[v];
              }
              d = d.concat(this.g.parseMedia(n, b, c, r));
            } else d = d.concat(this.g.parseMedia(n, b, c, []));
          }
          return d;
        };
        S("shaka.text.Mp4TtmlParser", nF);
        nF.prototype.parseMedia = nF.prototype.parseMedia;
        nF.prototype.setManifestType = nF.prototype.setManifestType;
        nF.prototype.setSequenceMode = nF.prototype.setSequenceMode;
        nF.prototype.parseInit = nF.prototype.parseInit;
        Ve('application/mp4; codecs="stpp"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.im1i"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.im1t"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.im2i"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.im2t"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.etd1"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.etd1|im1t"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.ttml.im1t|etd1"', function() {
          return new nF();
        });
        Ve('application/mp4; codecs="stpp.TTML.im1t"', function() {
          return new nF();
        });
        function oF() {
          this.g = "UNKNOWN";
        }
        oF.prototype.parseInit = function() {
        };
        oF.prototype.setSequenceMode = function() {
        };
        oF.prototype.setManifestType = function(a) {
          this.g = a;
        };
        oF.prototype.parseMedia = function(a, b) {
          a = cc(a);
          a = a.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n");
          var c = a.split(/\n{2,}/m);
          if (!/^WEBVTT($|[ \t\n])/m.test(c[0])) throw new U(2, 2, 2e3);
          a = b.vttOffset;
          if (this.g == "HLS" && c[0].includes("X-TIMESTAMP-MAP")) {
            var d = c[0];
            a = d.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m);
            d = d.match(/MPEGTS:(\d+)/m);
            if (!a || !d) throw new U(2, 2, 2e3);
            a = hd(a[1]);
            if (a == null) throw new U(2, 2, 2e3);
            d = Number(d[1]);
            for (var e = b.segmentStart - b.periodStart; e >= 95443.7176888889; ) e -= 95443.7176888889, d += 8589934592;
            a = b.periodStart + d / 9e4 - a;
          }
          b = [];
          d = t(c[0].split("\n"));
          for (e = d.next(); !e.done; e = d.next()) if (e = e.value, /^Region:/.test(e)) {
            e = new ad(e);
            var f = new Yc();
            ed(e);
            bd(e);
            for (var g = ed(e); g; ) {
              var h = f, k2 = g;
              (g = /^id=(.*)$/.exec(k2)) ? h.id = g[1] : (g = /^width=(\d{1,2}|100)%$/.exec(k2)) ? h.width = Number(g[1]) : (g = /^lines=(\d+)$/.exec(k2)) ? (h.height = Number(g[1]), h.heightUnits = 2) : (g = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.regionAnchorX = Number(g[1]), h.regionAnchorY = Number(g[2])) : (g = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.viewportAnchorX = Number(g[1]), h.viewportAnchorY = Number(g[2])) : /^scroll=up$/.exec(k2) && (h.scroll = "up");
              bd(e);
              g = ed(e);
            }
            b.push(f);
          }
          d = /* @__PURE__ */ new Map();
          ie(d);
          e = [];
          c = t(c.slice(1));
          for (f = c.next(); !f.done; f = c.next()) {
            f = f.value.split("\n");
            if ((f.length != 1 || f[0]) && !/^NOTE($|[ \t])/.test(f[0]) && f[0] == "STYLE") {
              h = [];
              g = -1;
              for (k2 = 1; k2 < f.length; k2++) f[k2].includes("::cue") && (h.push([]), g = h.length - 1), g != -1 && (h[g].push(f[k2]), f[k2].includes("}") && (g = -1));
              h = t(h);
              for (g = h.next(); !g.done; g = h.next()) {
                var l = g.value;
                g = "global";
                (k2 = l[0].match(/\((.*)\)/)) && (g = k2.pop());
                k2 = l.slice(1, -1);
                l[0].includes("}") && (l = /\{(.*?)\}/.exec(l[0])) && (k2 = l[1].split(";"));
                (l = d.get(g)) || (l = new Wd(0, 0, ""));
                for (var m = false, n = 0; n < k2.length; n++) {
                  var q = /^\s*([^:]+):\s*(.*)/.exec(k2[n]);
                  if (q) {
                    var r = q[2].trim().replace(";", "");
                    switch (q[1].trim()) {
                      case "background-color":
                      case "background":
                        m = true;
                        l.backgroundColor = r;
                        break;
                      case "color":
                        m = true;
                        l.color = r;
                        break;
                      case "font-family":
                        m = true;
                        l.fontFamily = r;
                        break;
                      case "font-size":
                        m = true;
                        l.fontSize = r;
                        break;
                      case "font-weight":
                        if (parseInt(r, 10) >= 700 || r == "bold") m = true, l.fontWeight = se;
                        break;
                      case "font-style":
                        switch (r) {
                          case "normal":
                            m = true;
                            l.fontStyle = ee;
                            break;
                          case "italic":
                            m = true;
                            l.fontStyle = te;
                            break;
                          case "oblique":
                            m = true, l.fontStyle = "oblique";
                        }
                        break;
                      case "opacity":
                        m = true;
                        l.opacity = parseFloat(r);
                        break;
                      case "text-combine-upright":
                        m = true;
                        l.textCombineUpright = r;
                        break;
                      case "text-shadow":
                        m = true;
                        l.textShadow = r;
                        break;
                      case "white-space":
                        m = true, l.wrapLine = r != "noWrap";
                    }
                  }
                }
                m && d.set(g, l);
              }
            }
            l = f;
            m = a;
            if (l.length == 1 && !l[0] || /^NOTE($|[ \t])/.test(l[0]) || l[0] == "STYLE" || l[0] == "REGION") f = null;
            else if (f = null, l[0].includes("-->") || (f = l[0], l.splice(0, 1)), h = new ad(l[0]), g = fd(h), n = cd(h, /[ \t]+--\x3e[ \t]+/g), k2 = fd(h), g == null || n == null || k2 == null) $a("Failed to parse VTT time code. Cue skipped:", f, l), f = null;
            else {
              g += m;
              k2 += m;
              g < 0 && (g = 0);
              m = l.slice(1).join("\n").trim();
              d.has("global") ? (l = d.get("global").clone(), l.startTime = g, l.endTime = k2, l.payload = m) : l = new Wd(g, k2, m);
              bd(h);
              for (g = ed(h); g; ) pF(l, g, b), bd(h), g = ed(h);
              he(l, d);
              f != null && (l.id = f);
              f = l;
            }
            f && e.push(f);
          }
          return e;
        };
        function pF(a, b, c) {
          var d;
          if (d = /^align:(start|middle|center|end|left|right)$/.exec(b)) b = d[1], b == "middle" ? a.textAlign = Yd : a.textAlign = ve[b.toUpperCase()];
          else if (d = /^vertical:(lr|rl)$/.exec(b)) a.writingMode = d[1] == "lr" ? "vertical-lr" : "vertical-rl";
          else if (d = /^size:([\d.]+)%$/.exec(b)) a.size = Number(d[1]);
          else if (d = /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(b)) a.position = Number(d[1]), d[2] && (b = d[2], a.positionAlign = b == "line-left" || b == "start" ? "line-left" : b == "line-right" || b == "end" ? "line-right" : b == "center" || b == "middle" ? "center" : Xd);
          else if (d = /^region:(.*)$/.exec(b)) {
            if (b = qF(c, d[1])) a.region = b;
          } else if (c = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = 1, a.line = Number(c[1]), c[2] && (a.lineAlign = xe[c[2].toUpperCase()]);
          else if (c = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = ae, a.line = Number(c[1]), c[2] && (a.lineAlign = xe[c[2].toUpperCase()]);
        }
        function qF(a, b) {
          a = a.filter(function(c) {
            return c.id == b;
          });
          return a.length ? a[0] : null;
        }
        S("shaka.text.VttTextParser", oF);
        oF.prototype.parseMedia = oF.prototype.parseMedia;
        oF.prototype.setManifestType = oF.prototype.setManifestType;
        oF.prototype.setSequenceMode = oF.prototype.setSequenceMode;
        oF.prototype.parseInit = oF.prototype.parseInit;
        Ve("text/vtt", function() {
          return new oF();
        });
        Ve('text/vtt; codecs="vtt"', function() {
          return new oF();
        });
        Ve('text/vtt; codecs="wvtt"', function() {
          return new oF();
        });
        function rF() {
          this.g = null;
        }
        rF.prototype.parseInit = function(a) {
          var b = this, c = false;
          new kh().box("moov", qh).box("trak", qh).box("mdia", qh).S("mdhd", function(d) {
            d = Ci(d.reader, d.version);
            b.g = d.timescale;
          }).box("minf", qh).box("stbl", qh).S("stsd", sh).box("wvtt", function() {
            c = true;
          }).parse(a);
          if (!this.g) throw new U(2, 2, 2008);
          if (!c) throw new U(2, 2, 2008);
        };
        rF.prototype.setSequenceMode = function() {
        };
        rF.prototype.setManifestType = function() {
        };
        rF.prototype.parseMedia = function(a, b) {
          if (!a.length) return [];
          if (!this.g) throw new U(2, 2, 2008);
          var c = 0, d = [], e, f = [], g = false, h = false, k2 = false, l = null;
          new kh().box("moof", qh).box("traf", qh).S("tfdt", function(B) {
            g = true;
            c = Bi(B.reader, B.version).baseMediaDecodeTime;
          }).S("tfhd", function(B) {
            l = Ai(B.reader, B.flags).Td;
          }).S("trun", function(B) {
            h = true;
            d = Di(B.reader, B.version, B.flags).ih;
          }).box("mdat", vh(function(B) {
            k2 = true;
            e = B;
          }, false)).parse(a, false);
          if (!k2 && !g && !h) throw new U(2, 2, 2008);
          a = c;
          for (var m = new hh(e, 0), n = t(d), q = n.next(); !q.done; q = n.next()) {
            q = q.value;
            var r = q.jh || l, u = q.Cf ? c + q.Cf : a;
            a = u + (r || 0);
            var v = 0;
            do {
              var w = m.U();
              v += w;
              var z = m.U(), y = null;
              ph(z) == "vttc" ? w > 8 && (y = m.Ub(w - 8, false)) : m.skip(w - 8);
              r && y && (w = sF(y, b.periodStart + u / this.g, b.periodStart + a / this.g), f.push(w));
            } while (q.sampleSize && v < q.sampleSize);
          }
          return f.filter(kf);
        };
        function sF(a, b, c) {
          var d, e, f;
          new kh().box("payl", vh(function(g) {
            d = cc(g);
          }, false)).box("iden", vh(function(g) {
            e = cc(g);
          }, false)).box("sttg", vh(function(g) {
            f = cc(g);
          }, false)).parse(a);
          return d ? tF(d, e, f, b, c) : null;
        }
        function tF(a, b, c, d, e) {
          a = new Wd(d, e, a);
          he(a);
          b && (a.id = b);
          if (c) for (b = new ad(c), c = ed(b); c; ) pF(a, c, []), bd(b), c = ed(b);
          return a;
        }
        S("shaka.text.Mp4VttParser", rF);
        rF.prototype.parseMedia = rF.prototype.parseMedia;
        rF.prototype.setManifestType = rF.prototype.setManifestType;
        rF.prototype.setSequenceMode = rF.prototype.setSequenceMode;
        rF.prototype.parseInit = rF.prototype.parseInit;
        Ve('application/mp4; codecs="wvtt"', function() {
          return new rF();
        });
        function uF() {
        }
        uF.prototype.parseInit = function() {
        };
        uF.prototype.setSequenceMode = function() {
        };
        uF.prototype.setManifestType = function() {
        };
        uF.prototype.parseMedia = function(a) {
          var b = cc(a).replace(/\r+/g, "");
          b = b.trim();
          a = [];
          if (b == "") return a;
          b = t(b.split("\n\n"));
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value.split("\n");
            var d = new ad(c[0]), e = fd(d), f = cd(d, /,/g);
            d = fd(d);
            if (e == null || f == null || d == null) throw new U(2, 2, 2001, "Could not parse cue time range in SubViewer");
            a.push(new Wd(e, d, c.slice(1).join("\n").trim()));
          }
          return a;
        };
        S("shaka.text.SbvTextParser", uF);
        uF.prototype.parseMedia = uF.prototype.parseMedia;
        uF.prototype.setManifestType = uF.prototype.setManifestType;
        uF.prototype.setSequenceMode = uF.prototype.setSequenceMode;
        uF.prototype.parseInit = uF.prototype.parseInit;
        Ve("text/x-subviewer", function() {
          return new uF();
        });
        function vF() {
          this.g = new oF();
        }
        vF.prototype.parseInit = function() {
        };
        vF.prototype.setSequenceMode = function() {
        };
        vF.prototype.setManifestType = function() {
        };
        vF.prototype.parseMedia = function(a, b, c) {
          var d = cc(a);
          a = "WEBVTT\n\n";
          if (d != "") {
            d = d.replace(/\r+/g, "");
            d = d.trim();
            d = t(d.split("\n\n"));
            for (var e = d.next(); !e.done; e = d.next()) e = e.value.split(/\n/), e[0].match(/\d+/) && e.shift(), e[0] = e[0].replace(/,/g, "."), a += e.join("\n").replace(/{b}/g, "<b>").replace(/{\/b}/g, "</b>").replace(/{i}/g, "<i>").replace(/{\/i}/g, "</i>").replace(/{u}/g, "<u>").replace(/{\/u}/g, "</u>") + "\n\n";
          }
          a = Vb(hc(a));
          return this.g.parseMedia(a, b, c, []);
        };
        S("shaka.text.SrtTextParser", vF);
        vF.prototype.parseMedia = vF.prototype.parseMedia;
        vF.prototype.setManifestType = vF.prototype.setManifestType;
        vF.prototype.setSequenceMode = vF.prototype.setSequenceMode;
        vF.prototype.parseInit = vF.prototype.parseInit;
        Ve("text/srt", function() {
          return new vF();
        });
        function wF() {
        }
        wF.prototype.parseInit = function() {
        };
        wF.prototype.setSequenceMode = function() {
        };
        wF.prototype.setManifestType = function() {
        };
        wF.prototype.parseMedia = function(a) {
          var b = "", c = "", d = null, e = null;
          e = cc(a).split(/\r?\n\s*\r?\n/);
          a = t(e);
          for (e = a.next(); !e.done; e = a.next()) {
            var f = e.value;
            e = f;
            if (f = xF.exec(f)) d = f[1], e = f[2];
            d == "V4 Styles" || d == "V4+ Styles" ? (b = e, b = c ? b + ("\n" + e) : e) : d == "Events" && (c = c ? c + ("\n" + e) : e);
          }
          d = [];
          e = null;
          b = t(b.split(/\r?\n/));
          for (a = b.next(); !a.done; a = b.next()) if (a = a.value, !/^\s*;/.test(a) && (f = yF.exec(a))) {
            if (a = f[1].trim(), f = f[2].trim(), a == "Format") e = f.split(zF);
            else if (a == "Style") {
              a = f.split(zF);
              f = {};
              for (var g = 0; g < e.length && g < a.length; g++) f[e[g]] = a[g];
              d.push(f);
            }
          }
          e = [];
          b = null;
          c = t(c.split(/\r?\n/));
          f = c.next();
          for (a = {}; !f.done; a = { Wi: void 0 }, f = c.next()) if (f = f.value, !/^\s*;/.test(f) && (g = yF.exec(f))) {
            if (f = g[1].trim(), g = g[2].trim(), f == "Format") b = g.split(zF);
            else if (f == "Dialogue") {
              g = g.split(zF);
              f = {};
              for (var h = 0; h < b.length && h < g.length; h++) f[b[h]] = g[h];
              h = AF(f.Start);
              var k2 = AF(f.End);
              g = new Wd(h, k2, g.slice(b.length - 1).join(",").replace(/\\N/g, "\n").replace(/\{[^}]+\}/g, ""));
              a.Wi = f.Style;
              (a = d.find(/* @__PURE__ */ (function(l) {
                return function(m) {
                  return m.Name == l.Wi;
                };
              })(a))) && BF(g, a);
              e.push(g);
            }
          }
          return e;
        };
        function BF(a, b) {
          var c = b.Fontname;
          c && (a.fontFamily = c);
          if (c = b.Fontsize) a.fontSize = c + "px";
          if (c = b.PrimaryColour) {
            if (c = CF(c)) a.color = c;
          }
          if (c = b.BackColour) {
            if (c = CF(c)) a.backgroundColor = c;
          }
          b.Bold && (a.fontWeight = se);
          b.Italic && (a.fontStyle = te);
          b.Underline && a.textDecoration.push(ue);
          if (c = b.Spacing) a.letterSpacing = c + "px";
          if (c = b.Alignment) switch (parseInt(c, 10)) {
            case 1:
              a.displayAlign = ce;
              a.textAlign = "start";
              break;
            case 2:
              a.displayAlign = ce;
              a.textAlign = Yd;
              break;
            case 3:
              a.displayAlign = ce;
              a.textAlign = "end";
              break;
            case 5:
              a.displayAlign = "before";
              a.textAlign = "start";
              break;
            case 6:
              a.displayAlign = "before";
              a.textAlign = Yd;
              break;
            case 7:
              a.displayAlign = "before";
              a.textAlign = "end";
              break;
            case 9:
              a.displayAlign = "center";
              a.textAlign = "start";
              break;
            case 10:
              a.displayAlign = "center";
              a.textAlign = Yd;
              break;
            case 11:
              a.displayAlign = "center", a.textAlign = "end";
          }
          if (b = b.AlphaLevel) a.opacity = parseFloat(b);
        }
        function CF(a) {
          a = parseInt(a.replace("&H", ""), 16);
          return a >= 0 ? "rgba(" + (a & 255) + "," + (a >> 8 & 255) + "," + (a >> 16 & 255) + "," + (a >> 24 & 255 ^ 255) / 255 + ")" : null;
        }
        function AF(a) {
          a = DF.exec(a);
          return (a[1] ? parseInt(a[1].replace(":", ""), 10) : 0) * 3600 + parseInt(a[2], 10) * 60 + parseFloat(a[3]);
        }
        S("shaka.text.SsaTextParser", wF);
        wF.prototype.parseMedia = wF.prototype.parseMedia;
        wF.prototype.setManifestType = wF.prototype.setManifestType;
        wF.prototype.setSequenceMode = wF.prototype.setSequenceMode;
        wF.prototype.parseInit = wF.prototype.parseInit;
        var xF = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/, yF = /^\s*([^:]+):\s*(.*)/, zF = /\s*,\s*/, DF = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
        Ve("text/x-ssa", function() {
          return new wF();
        });
        function EF(a, b) {
          var c = a[b + 1] & 1 ? 7 : 9;
          return b + c <= a.length && (a = ((a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5) - c, a > 0) ? { $d: c, ra: a } : null;
        }
        function FF(a, b) {
          var c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], d = (a[b + 2] & 60) >>> 2;
          if (d > c.length - 1) return null;
          var e = ((a[b + 2] & 192) >>> 6) + 1, f = (a[b + 2] & 1) << 2;
          f |= (a[b + 3] & 192) >>> 6;
          return { sampleRate: c[d], channelCount: f, codec: "mp4a.40." + e };
        }
        function GF(a, b) {
          if (b + 1 < a.length && a[b] === 255 && (a[b + 1] & 246) === 240) {
            var c = a[b + 1] & 1 ? 7 : 9;
            if (b + c >= a.length) return false;
            var d = (a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5;
            if (d <= c) return false;
            b += d;
            return b === a.length || b + 1 < a.length && a[b] === 255 && (a[b + 1] & 246) === 240;
          }
          return false;
        }
        function HF(a, b) {
          switch (a) {
            case "mp4a.40.2":
              if (b === 1) return new Uint8Array([0, 200, 0, 128, 35, 128]);
              if (b === 2) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
              if (b === 3) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
              if (b === 4) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
              if (b === 5) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
              if (b === 6) return new Uint8Array([
                0,
                200,
                0,
                128,
                32,
                132,
                1,
                38,
                64,
                8,
                100,
                0,
                130,
                48,
                4,
                153,
                0,
                33,
                144,
                2,
                0,
                178,
                0,
                32,
                8,
                224
              ]);
              break;
            default:
              if (b === 1) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
              if (b === 2 || b === 3) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
          }
          return null;
        }
        ;
        function IF(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = IF.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/aac" ? xi(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/aac" ? 'audio/mp4; codecs="' + (Re(b) || "mp4a.40.2") + '"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          for (var e = Vb(a), f = Qj(e), g = f.length; g < e.length && !GF(e, g); g++) ;
          a = c.endTime * 1e3;
          f = Pj(f);
          f.length && c && (f = f.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (a = f.data);
          f = FF(e, g);
          if (!f) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
          b.audioSamplingRate = f.sampleRate;
          b.channelsCount = f.channelCount;
          for (var h = []; g < e.length; ) {
            var k2 = EF(e, g);
            if (!k2) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
            var l = k2.$d + k2.ra;
            g + l <= e.length && h.push({ data: e.subarray(g + k2.$d, g + l), size: k2.ra, duration: 1024, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } });
            g += l;
          }
          e = f.sampleRate;
          a = Math.floor(a * e / 1e3);
          d = { id: b.id, type: "audio", codecs: f.codec, encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Cb: [], Ga: new Uint8Array([]), Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, zb: h }, stream: b };
          d = new Ji([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Ki(d), this.g.set(c, b));
          c = this.i !== b;
          d = ej(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.AacTransmuxer", IF);
        IF.prototype.transmux = IF.prototype.transmux;
        IF.prototype.getOriginalMimeType = IF.prototype.getOriginalMimeType;
        IF.prototype.convertCodecs = IF.prototype.convertCodecs;
        IF.prototype.isSupported = IF.prototype.isSupported;
        IF.prototype.destroy = IF.prototype.destroy;
        Ae("audio/aac", function() {
          return new IF("audio/aac");
        }, Ge);
        function JF(a, b) {
          if (b + 8 > a.length || a[b] !== 11 || a[b + 1] !== 119) return null;
          var c = a[b + 4] >> 6;
          if (c >= 3) return null;
          var d = a[b + 4] & 63, e = [
            64,
            69,
            96,
            64,
            70,
            96,
            80,
            87,
            120,
            80,
            88,
            120,
            96,
            104,
            144,
            96,
            105,
            144,
            112,
            121,
            168,
            112,
            122,
            168,
            128,
            139,
            192,
            128,
            140,
            192,
            160,
            174,
            240,
            160,
            175,
            240,
            192,
            208,
            288,
            192,
            209,
            288,
            224,
            243,
            336,
            224,
            244,
            336,
            256,
            278,
            384,
            256,
            279,
            384,
            320,
            348,
            480,
            320,
            349,
            480,
            384,
            417,
            576,
            384,
            418,
            576,
            448,
            487,
            672,
            448,
            488,
            672,
            512,
            557,
            768,
            512,
            558,
            768,
            640,
            696,
            960,
            640,
            697,
            960,
            768,
            835,
            1152,
            768,
            836,
            1152,
            896,
            975,
            1344,
            896,
            976,
            1344,
            1024,
            1114,
            1536,
            1024,
            1115,
            1536,
            1152,
            1253,
            1728,
            1152,
            1254,
            1728,
            1280,
            1393,
            1920,
            1280,
            1394,
            1920
          ][d * 3 + c] * 2;
          if (b + e > a.length) return null;
          var f = a[b + 6] >> 5, g = 0;
          f === 2 ? g += 2 : (f & 1 && f !== 1 && (g += 2), f & 4 && (g += 2));
          g = (a[b + 6] << 8 | a[b + 7]) >> 12 - g & 1;
          var h = a[b + 5] & 7;
          a = new Uint8Array([c << 6 | a[b + 5] >> 3 << 1 | h >> 2, (h & 3) << 6 | f << 3 | g << 2 | d >> 4, d << 4 & 224]);
          return { sampleRate: [48e3, 44100, 32e3][c], channelCount: [2, 1, 2, 3, 3, 4, 4, 5][f] + g, Ga: a, ra: e };
        }
        function KF(a, b) {
          if (a[b] === 11 && a[b + 1] === 119) {
            var c = 0, d = 5;
            b += d;
            for (var e, f; d > 0; ) {
              f = a[b];
              var g = Math.min(d, 8), h = 8 - g;
              e = 4278190080 >>> 24 + h << h;
              e = (f & e) >> h;
              c = c ? c << g | e : e;
              b += 1;
              d -= g;
            }
            if (c < 16) return true;
          }
          return false;
        }
        ;
        function LF(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = LF.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/ac3" ? xi(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/ac3" ? rb().oe() ? 'audio/mp4; codecs="ec-3"' : 'audio/mp4; codecs="ac-3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          a = Vb(a);
          for (var e = Qj(a), f = e.length; f < a.length && !KF(a, f); f++) ;
          var g = c.endTime * 1e3;
          e = Pj(e);
          e.length && c && (e = e.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = JF(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.Ga;
            k2.push({
              data: a.subarray(f, f + l.ra),
              size: l.ra,
              duration: 1536,
              sb: 0,
              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 }
            });
            f += l.ra;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Cb: [], Ga: h, Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, zb: k2 }, stream: b };
          d = new Ji([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Ki(d), this.g.set(c, b));
          c = this.i !== b;
          d = ej(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Ac3Transmuxer", LF);
        LF.prototype.transmux = LF.prototype.transmux;
        LF.prototype.getOriginalMimeType = LF.prototype.getOriginalMimeType;
        LF.prototype.convertCodecs = LF.prototype.convertCodecs;
        LF.prototype.isSupported = LF.prototype.isSupported;
        LF.prototype.destroy = LF.prototype.destroy;
        Ae("audio/ac3", function() {
          return new LF("audio/ac3");
        }, Ge);
        function MF(a, b) {
          if (b + 8 > a.length || (a[b] << 8 | a[b + 1] << 0) !== 2935) return null;
          var c = new Sj(a.subarray(b + 2));
          Uj(c, 2);
          Uj(c, 3);
          var d = Vj(c, 11) + 1 << 1, e = Vj(c, 2);
          if (e == 3) {
            e = Vj(c, 2);
            e = [24e3, 22060, 16e3][e];
            var f = 3;
          } else e = [48e3, 44100, 32e3][e], f = Vj(c, 2);
          var g = Vj(c, 3), h = Vj(c, 1);
          c = Vj(c, 5);
          if (b + d > a.byteLength) return null;
          a = Math.floor(d * e / ([1, 2, 3, 6][f] * 16));
          a = new Uint8Array([(a & 8160) >> 5, (a & 31) << 3, e << 6 | c << 1 | 0, 0 | g << 1 | h << 0, 0]);
          return { sampleRate: e, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][g] + h, Ga: a, ra: d };
        }
        ;
        function NF(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = NF.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/ec3" ? xi(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/ec3" ? 'audio/mp4; codecs="ec-3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          a = Vb(a);
          for (var e = Qj(a), f = e.length; f < a.length && (a[f] << 8 | a[f + 1] << 0) !== 2935; f++) ;
          var g = c.endTime * 1e3;
          e = Pj(e);
          e.length && c && (e = e.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = MF(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.Ga;
            k2.push({
              data: a.subarray(f, f + l.ra),
              size: l.ra,
              duration: 1536,
              sb: 0,
              flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 }
            });
            f += l.ra;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Cb: [], Ga: h, Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, zb: k2 }, stream: b };
          d = new Ji([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Ki(d), this.g.set(c, b));
          c = this.i !== b;
          d = ej(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Ec3Transmuxer", NF);
        NF.prototype.transmux = NF.prototype.transmux;
        NF.prototype.getOriginalMimeType = NF.prototype.getOriginalMimeType;
        NF.prototype.convertCodecs = NF.prototype.convertCodecs;
        NF.prototype.isSupported = NF.prototype.isSupported;
        NF.prototype.destroy = NF.prototype.destroy;
        Ae("audio/ec3", function() {
          return new NF("audio/ec3");
        }, Ge);
        function OF(a) {
          if (!a.length) return null;
          var b = a.find(function(v) {
            return v.type == 7;
          });
          a = a.find(function(v) {
            return v.type == 8;
          });
          if (!b || !a) return null;
          var c = new Sj(b.data), d = ak(c);
          ak(c);
          ak(c);
          Xj(c);
          if (PF.includes(d) && (d = X(c), d === 3 && Uj(c, 1), Xj(c), Xj(c), Uj(c, 1), Zj(c))) {
            d = d !== 3 ? 8 : 12;
            for (var e = 0; e < d; e++) Zj(c) && (e < 6 ? bk(c, 16) : bk(c, 64));
          }
          Xj(c);
          d = X(c);
          if (d === 0) X(c);
          else if (d === 1) for (Uj(c, 1), Xj(c), Xj(c), d = X(c), e = 0; e < d; e++) Xj(c);
          Xj(c);
          Uj(c, 1);
          var f = X(c), g = X(c), h = Vj(c, 1);
          h === 0 && Uj(c, 1);
          Uj(c, 1);
          var k2 = 0, l = 0, m = 0, n = 0;
          Zj(c) && (k2 = X(c), l = X(c), m = X(c), n = X(c));
          e = d = 1;
          if (Zj(c) && Zj(c)) {
            var q = ak(c), r = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2], u = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
            q > 0 && q <= 16 ? (d = r[q - 1], e = u[q - 1]) : q === 255 && (d = Vj(c, 16), e = Vj(c, 16));
          }
          c = (2 - h) * (g + 1) * 16 - m * 2 - n * 2;
          f = (f + 1) * 16 - k2 * 2 - l * 2;
          k2 = [];
          b = b.fullData;
          k2.push(b.byteLength >>> 8 & 255);
          k2.push(b.byteLength & 255);
          k2 = k2.concat.apply(k2, x(b));
          b = [];
          a = a.fullData;
          b.push(a.byteLength >>> 8 & 255);
          b.push(a.byteLength & 255);
          b = b.concat.apply(b, x(a));
          a = new Uint8Array([
            1,
            k2[3],
            k2[4],
            k2[5],
            255,
            225
          ].concat(k2, [1], b));
          return { height: c, width: f, Sa: a, Za: d, $a: e };
        }
        function QF(a) {
          function b(u) {
            e = { data: new Uint8Array([]), frame: false, isKeyframe: false, pts: u.pts, dts: u.dts, nalus: [] };
          }
          function c() {
            if (e && e.nalus.length && e.frame) {
              for (var u = [], v = t(e.nalus), w = v.next(); !w.done; w = v.next()) {
                w = w.value;
                var z = w.fullData.byteLength, y = new Uint8Array(4);
                y[0] = z >> 24 & 255;
                y[1] = z >> 16 & 255;
                y[2] = z >> 8 & 255;
                y[3] = z & 255;
                u.push(y);
                u.push(w.fullData);
              }
              e.data = tc.apply(lc, x(u));
              d.push(e);
            }
          }
          for (var d = [], e = null, f = false, g = 0; g < a.length; g++) {
            var h = a[g], k2 = h.nalus, l = false;
            e && k2.length && !f && (c(), b(h));
            k2 = t(h.nalus);
            for (var m = k2.next(); !m.done; m = k2.next()) {
              m = m.value;
              var n = false;
              switch (m.type) {
                case 1:
                  var q = false;
                  n = true;
                  var r = m.data;
                  l && r.length > 4 && (r = ck(new Sj(r)), r === 2 || r === 4 || r === 7 || r === 9) && (q = true);
                  q && e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = q;
                  break;
                case 5:
                  n = true;
                  e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = true;
                  break;
                case 6:
                  n = true;
                  break;
                case 7:
                  l = n = true;
                  break;
                case 8:
                  n = true;
                  break;
                case 9:
                  f = n = true;
                  e && e.frame && (c(), e = null);
                  e || b(h);
                  break;
                case 12:
                  n = true;
                  break;
                default:
                  n = false;
              }
              e && n && e.nalus.push(m);
            }
          }
          c();
          return d;
        }
        var PF = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function RF(a) {
          if (!a.length) return null;
          var b = a.find(function(g) {
            return g.type == 32;
          }), c = a.find(function(g) {
            return g.type == 33;
          }), d = a.find(function(g) {
            return g.type == 34;
          });
          if (!b || !c || !d) return null;
          var e = SF(b.fullData);
          a = TF(c.fullData);
          var f = UF(d.fullData);
          b = VF(b.fullData, c.fullData, d.fullData, { Tg: e.Tg, Bh: e.Bh, Eg: a.Eg, Fg: a.Fg, yg: a.yg, Dg: a.Dg, zg: a.zg, Ag: a.Ag, Bg: a.Bg, Cg: a.Cg, rg: a.rg, sg: a.sg, ug: a.ug, vg: a.vg, wg: a.wg, xg: a.xg, pf: a.pf, gg: a.gg, fg: a.fg, eg: a.eg, Vg: f.Vg, qg: a.qg, pg: a.pg });
          return {
            height: a.height,
            width: a.width,
            Sa: b,
            Za: a.Qk,
            $a: a.Pk
          };
        }
        function SF(a) {
          var b = new Sj(a, true);
          ak(b);
          ak(b);
          Vj(b, 4);
          Vj(b, 2);
          Vj(b, 6);
          a = Vj(b, 3);
          b = Zj(b);
          return { Tg: a + 1, Bh: b };
        }
        function TF(a) {
          a = new Sj(a, true);
          ak(a);
          ak(a);
          var b = 0, c = 0, d = 0, e = 0;
          Vj(a, 4);
          var f = Vj(a, 3);
          Zj(a);
          for (var g = Vj(a, 2), h = Vj(a, 1), k2 = Vj(a, 5), l = ak(a), m = ak(a), n = ak(a), q = ak(a), r = ak(a), u = ak(a), v = ak(a), w = ak(a), z = ak(a), y = ak(a), B = ak(a), C = [], H = [], D = 0; D < f; D++) C.push(Zj(a)), H.push(Zj(a));
          if (f > 0) for (D = f; D < 8; D++) Vj(a, 2);
          for (D = 0; D < f; D++) C[D] && Vj(a, 88), H[D] && ak(a);
          X(a);
          C = X(a);
          C == 3 && Vj(a, 1);
          H = X(a);
          D = X(a);
          Zj(a) && (b += X(a), c += X(a), d += X(a), e += X(a));
          var A = X(a), E = X(a), J = X(a);
          if (Zj(a)) for (var I = 0; I <= f; I++) X(a), X(a), X(a);
          else X(a), X(a), X(a);
          X(a);
          X(a);
          X(a);
          X(a);
          X(a);
          X(a);
          if (Zj(a) && Zj(a)) for (I = 0; I < 4; I++) for (var K = 0; K < (I === 3 ? 2 : 6); K++) if (Zj(a)) {
            var L = Math.min(64, 1 << 4 + (I << 1));
            I > 1 && Yj(a);
            for (var O = 0; O < L; O++) Yj(a);
          } else X(a);
          Zj(a);
          Zj(a);
          Zj(a) && (ak(a), X(a), X(a), Zj(a));
          I = X(a);
          for (L = K = 0; L < I; L++) if (O = false, L !== 0 && (O = Zj(a)), O) {
            L === I && X(a);
            Zj(a);
            X(a);
            for (var P = O = 0; P <= K; P++) {
              var N = Zj(a), M = false;
              N || (M = Zj(a));
              (N || M) && O++;
            }
            K = O;
          } else {
            P = X(a);
            O = X(a);
            K = P + O;
            for (N = 0; N < P; N++) X(a), Zj(a);
            for (P = 0; P < O; P++) X(a), Zj(a);
          }
          if (Zj(a)) for (I = X(a), K = 0; K < I; K++) {
            for (L = 0; L < J + 4; L++) Vj(a, 1);
            Vj(a, 1);
          }
          I = J = 1;
          K = true;
          L = 1;
          P = O = 0;
          Zj(a);
          Zj(a);
          if (Zj(a)) {
            if (Zj(a)) {
              N = ak(a);
              M = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];
              var R = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
              N > 0 && N <= 16 ? (J = M[N - 1], I = R[N - 1]) : N === 255 && (J = Vj(a, 16), I = Vj(a, 16));
            }
            Zj(a) && Zj(a);
            Zj(a) && (Vj(a, 3), Zj(a), Zj(a) && (ak(a), ak(a), ak(a)));
            Zj(a) && (X(a), X(a));
            Zj(a);
            Zj(a);
            Zj(a);
            if (N = Zj(a)) Xj(a), Xj(a), Xj(a), Xj(a);
            if (Zj(a) && (L = Vj(a, 32), O = Vj(a, 32), Zj(a) && X(a), Zj(a))) {
              R = false;
              N = Zj(a);
              M = Zj(a);
              if (N || M) {
                if (R = Zj(a)) ak(a), Vj(a, 5), Zj(a), Vj(
                  a,
                  5
                );
                Vj(a, 4);
                Vj(a, 4);
                R && Vj(a, 4);
                Vj(a, 5);
                Vj(a, 5);
                Vj(a, 5);
              }
              for (var T = 0; T <= f; T++) {
                K = Zj(a);
                var ma = true, W = 1;
                K || (ma = Zj(a));
                var Ia = false;
                ma ? X(a) : Ia = Zj(a);
                Ia || (W = X(a) + 1);
                if (N) {
                  for (ma = 0; ma < W; ma++) X(a), X(a), R && (X(a), X(a));
                  Zj(a);
                }
                if (M) {
                  for (ma = 0; ma < W; ma++) X(a), X(a), R && (X(a), X(a));
                  Zj(a);
                }
              }
            }
            Zj(a) && (Zj(a), Zj(a), Zj(a), P = X(a), X(a), X(a), X(a), X(a));
          }
          return { yg: B, Eg: g, Fg: h, Dg: k2, zg: l, Ag: m, Bg: n, Cg: q, rg: r, sg: u, ug: v, vg: w, wg: z, xg: y, pf: P, gg: C, fg: A, eg: E, width: H - (b + c) * (C === 1 || C === 2 ? 2 : 1), height: D - (d + e) * (C === 1 ? 2 : 1), Qk: J, Pk: I, qg: O / L, pg: K };
        }
        function UF(a) {
          var b = new Sj(a, true);
          ak(b);
          ak(b);
          X(b);
          X(b);
          Zj(b);
          Zj(b);
          Vj(b, 3);
          Zj(b);
          Zj(b);
          X(b);
          X(b);
          Yj(b);
          Zj(b);
          Zj(b);
          Zj(b) && X(b);
          Yj(b);
          Yj(b);
          Zj(b);
          Zj(b);
          Zj(b);
          Zj(b);
          a = Zj(b);
          b = Zj(b);
          var c = 1;
          b && a ? c = 0 : b ? c = 3 : a && (c = 2);
          return { Vg: c };
        }
        function VF(a, b, c, d) {
          var e = new Uint8Array(23 + (5 + a.byteLength) + (5 + b.byteLength) + (5 + c.byteLength));
          e[0] = 1;
          e[1] = (d.Eg & 3) << 6 | (d.Fg ? 1 : 0) << 5 | d.Dg & 31;
          e[2] = d.zg;
          e[3] = d.Ag;
          e[4] = d.Bg;
          e[5] = d.Cg;
          e[6] = d.rg;
          e[7] = d.sg;
          e[8] = d.ug;
          e[9] = d.vg;
          e[10] = d.wg;
          e[11] = d.xg;
          e[12] = d.yg;
          e[13] = 240 | (d.pf & 3840) >> 8;
          e[14] = d.pf & 255;
          e[15] = 252 | d.Vg & 3;
          e[16] = 252 | d.gg & 3;
          e[17] = 248 | d.fg & 7;
          e[18] = 248 | d.eg & 7;
          e[19] = 0;
          e[20] = parseInt(d.qg, 10);
          e[21] = ((d.pg ? 1 : 0) & 3) << 6 | (d.Tg & 7) << 3 | (d.Bh ? 1 : 0) << 2 | 3;
          e[22] = 3;
          a = [a, b, c];
          b = 23;
          c = a.length - 1;
          for (d = 0; d < a.length; d += 1) e.set(new Uint8Array([32 + d | (d === c ? 128 : 0), 0, 1]), b), b += 3, e.set(new Uint8Array([a[d].byteLength >> 8, a[d].byteLength & 255]), b), b += 2, e.set(a[d], b), b += a[d].byteLength;
          return e;
        }
        ;
        function WF(a, b) {
          var c = a[b + 1] >> 3 & 3, d = a[b + 1] >> 1 & 3, e = a[b + 2] >> 4 & 15, f = a[b + 2] >> 2 & 3;
          if (c !== 1 && e !== 0 && e !== 15 && f !== 3) {
            var g = a[b + 3] >> 6;
            e = XF[(c === 3 ? 3 - d : d === 3 ? 3 : 4) * 14 + e - 1] * 1e3;
            f = YF[(c === 3 ? 0 : c === 2 ? 1 : 2) * 3 + f];
            c = ZF[c][d];
            var h = $F[d], k2 = Math.floor(c * e / f + (a[b + 2] >> 1 & 1)) * h, l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
            (l = l ? parseInt(l[1], 10) : 0) && l <= 87 && d === 2 && e >= 224e3 && g === 0 && (a[b + 3] |= 128);
            return { sampleRate: f, channelCount: g === 3 ? 1 : 2, ra: k2, Ok: c * 8 * h };
          }
          return null;
        }
        function aG(a, b) {
          return a[b] === 255 && (a[b + 1] & 224) === 224 && (a[b + 1] & 6) !== 0;
        }
        function bG(a, b) {
          if (b + 1 < a.length && aG(a, b)) {
            var c = WF(a, b), d = 4;
            c && c.ra && (d = c.ra);
            b += d;
            return b === a.length || b + 1 < a.length && aG(a, b);
          }
          return false;
        }
        var XF = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160], YF = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3], ZF = [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]], $F = [0, 1, 1, 4];
        function cG(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = cG.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/mpeg" ? xi(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/mpeg" ? 'audio/mp4; codecs="mp3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          for (var e = Vb(a), f = Qj(e).length; f < e.length && !bG(e, f); f++) ;
          var g;
          for (a = []; f < e.length; ) {
            var h = WF(e, f);
            if (!h) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
            g || (g = h);
            f + h.ra <= e.length && a.push({ data: e.subarray(f, f + h.ra), size: h.ra, duration: 1152, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } });
            f += h.ra;
          }
          if (!g) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
          e = g.Ok * 9e4 / g.sampleRate * this.h;
          d = {
            id: b.id,
            type: "audio",
            codecs: "mp3",
            encrypted: b.encrypted && b.drmInfos.length > 0,
            timescale: g.sampleRate,
            duration: d,
            Cb: [],
            Ga: new Uint8Array([]),
            Sa: new Uint8Array([]),
            Za: 0,
            $a: 0,
            data: { sequenceNumber: this.h, baseMediaDecodeTime: e, zb: a },
            stream: b
          };
          d = new Ji([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Ki(d), this.g.set(c, b));
          c = this.i !== b;
          d = ej(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Mp3Transmuxer", cG);
        cG.prototype.transmux = cG.prototype.transmux;
        cG.prototype.getOriginalMimeType = cG.prototype.getOriginalMimeType;
        cG.prototype.convertCodecs = cG.prototype.convertCodecs;
        cG.prototype.isSupported = cG.prototype.isSupported;
        cG.prototype.destroy = cG.prototype.destroy;
        Ae("audio/mpeg", function() {
          return new cG("audio/mpeg");
        }, Ge);
        function dG(a) {
          this.h = a;
          this.g = null;
        }
        p = dG.prototype;
        p.destroy = function() {
        };
        p.isSupported = function(a) {
          if (a.toLowerCase().split(";")[0] != "video/mp2t") return false;
          var b = Re(a).split(","), c = yc("audio", b);
          b = yc("video", b);
          return !c || b || Ne(c) != "mp3" ? false : xi(this.convertCodecs("audio", a));
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "video/mp2t" ? "audio/mpeg" : b;
        };
        p.getOriginalMimeType = function() {
          return this.h;
        };
        p.transmux = function(a, b, c, d, e) {
          this.g ? this.g.clearData() : this.g = new dk();
          this.g.Gf(c.i);
          a = Vb(a);
          a = this.g.parse(a);
          if (a.Vd().audio != "mp3" || e != "audio") return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
          c = new Uint8Array([]);
          e = t(a.ub());
          for (a = e.next(); !a.done; a = e.next()) if (a = a.value.data) for (b = 0; b < a.length; ) (d = WF(a, b)) ? (b + d.ra <= a.length && (c = tc(c, a.subarray(b, b + d.ra))), b += d.ra) : b++;
          return Promise.resolve(c);
        };
        S("shaka.transmuxer.MpegTsTransmuxer", dG);
        dG.prototype.transmux = dG.prototype.transmux;
        dG.prototype.getOriginalMimeType = dG.prototype.getOriginalMimeType;
        dG.prototype.convertCodecs = dG.prototype.convertCodecs;
        dG.prototype.isSupported = dG.prototype.isSupported;
        dG.prototype.destroy = dG.prototype.destroy;
        Ae("video/mp2t", function() {
          return new dG("video/mp2t");
        }, Fe);
        function eG(a) {
          this.h = a;
          (this.g = iy.get("ISOBoxer")()) && fG(this);
        }
        function fG(a) {
          function b() {
            this._procFullBox();
            this.flags & 1 && (this._procField("AlgorithmID", "uint", 24), this._procField("IV_size", "uint", 8), this._procFieldArray("KID", 16, "uint", 8));
            this._procField("sample_count", "uint", 32);
            this._procEntries("entry", this.sample_count, function(c) {
              this._procEntryField(c, "InitializationVector", "data", 8);
              this.flags & 2 && (this._procEntryField(c, "NumberOfEntries", "uint", 16), this._procSubEntries(c, "clearAndCryptedData", c.NumberOfEntries, function(d) {
                this._procEntryField(
                  d,
                  "BytesOfClearData",
                  "uint",
                  16
                );
                this._procEntryField(d, "BytesOfEncryptedData", "uint", 32);
              }));
            });
          }
          a.g.addBoxProcessor("saio", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField("aux_info_type_parameter", "uint", 32));
            this._procField("entry_count", "uint", 32);
            this._procFieldArray("offset", this.entry_count, "uint", this.version === 1 ? 64 : 32);
          });
          a.g.addBoxProcessor("saiz", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField(
              "aux_info_type_parameter",
              "uint",
              32
            ));
            this._procField("default_sample_info_size", "uint", 8);
            this._procField("sample_count", "uint", 32);
            this.default_sample_info_size === 0 && this._procFieldArray("sample_info_size", this.sample_count, "uint", 8);
          });
          a.g.addBoxProcessor("senc", b);
          a.g.addBoxProcessor("uuid", function() {
            for (var c = true, d = 0; d < 16; d++) this.usertype[d] !== gG[d] && (c = false);
            c && (this._parsing && (this.type = "sepiff"), b.call(this));
          });
        }
        p = eG.prototype;
        p.destroy = function() {
        };
        p.isSupported = function(a, b) {
          var c = a.startsWith("mss/");
          if (!this.g || !c) return false;
          if (b) return xi(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return xi(b) || xi(a);
        };
        p.convertCodecs = function(a, b) {
          return b.replace("mss/", "");
        };
        p.getOriginalMimeType = function() {
          return this.h;
        };
        p.transmux = function(a, b, c) {
          if (!c) return Promise.resolve(Vb(a));
          if (!b.mssPrivateData) return Promise.reject(new U(2, 3, 3020, c ? c.P()[0] : null));
          try {
            var d, e = this.g.parseBuffer(a), f = e.fetch("tfhd");
            f.track_ID = b.id + 1;
            var g = e.fetch("tfdt"), h = e.fetch("traf");
            g === null && (g = this.g.createFullBox("tfdt", h, f), g.version = 1, g.flags = 0, g.baseMediaDecodeTime = Math.floor(c.startTime * b.mssPrivateData.timescale));
            var k2 = e.fetch("trun"), l = e.fetch("tfxd");
            l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
            var m = e.fetch("tfrf");
            m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
            var n = e.fetch("sepiff");
            if (n !== null) {
              n.type = "senc";
              n.usertype = void 0;
              var q = e.fetch("saio");
              if (q === null) {
                q = this.g.createFullBox("saio", h);
                q.version = 0;
                q.flags = 0;
                q.entry_count = 1;
                q.offset = [0];
                var r = this.g.createFullBox("saiz", h);
                r.version = 0;
                r.flags = 0;
                r.sample_count = n.sample_count;
                r.default_sample_info_size = 0;
                r.sample_info_size = [];
                if (n.flags & 2) for (d = 0; d < n.sample_count; d += 1) r.sample_info_size[d] = 10 + 6 * n.entry[d].NumberOfEntries;
                else r.default_sample_info_size = 8;
              }
            }
            f.flags &= 16777214;
            f.flags |= 131072;
            k2.flags |= 1;
            var u = e.fetch("moof");
            k2.data_offset = u.getLength() + 8;
            var v = e.fetch("saio");
            v !== null && (v.offset[0] = hG(u, "traf") + hG(h, "senc") + 16);
            var w = Vb(e.write());
            return Promise.resolve(w);
          } catch (z) {
            return z instanceof U ? Promise.reject(z) : Promise.reject(new U(2, 3, 3022, c ? c.P()[0] : null));
          }
        };
        function hG(a, b) {
          for (var c = 8, d = 0; d < a.boxes.length && a.boxes[d].type !== b; d++) c += a.boxes[d].size;
          return c;
        }
        S("shaka.transmuxer.MssTransmuxer", eG);
        eG.prototype.transmux = eG.prototype.transmux;
        eG.prototype.getOriginalMimeType = eG.prototype.getOriginalMimeType;
        eG.prototype.convertCodecs = eG.prototype.convertCodecs;
        eG.prototype.isSupported = eG.prototype.isSupported;
        eG.prototype.destroy = eG.prototype.destroy;
        var gG = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
        Ae("mss/audio/mp4", function() {
          return new eG("mss/audio/mp4");
        }, Ge);
        Ae("mss/video/mp4", function() {
          return new eG("mss/video/mp4");
        }, Ge);
        function iG(a) {
          this.m = a;
          this.g = 0;
          this.j = /* @__PURE__ */ new Map();
          this.l = this.i = this.h = null;
        }
        p = iG.prototype;
        p.destroy = function() {
          this.j.clear();
          this.i && this.i.destroy();
        };
        p.isSupported = function(a, b) {
          if (a.toLowerCase().split(";")[0] != "video/mp2t") return false;
          var c = a;
          b && (c = this.convertCodecs(b, a));
          var d = Re(c).split(",");
          c = yc("audio", d);
          d = yc("video", d);
          if (c && (c = Ne(c), !jG.includes(c)) || d && (c = Ne(d), !kG.includes(c))) return false;
          if (b) return xi(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return xi(b) || xi(a);
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "video/mp2t" ? (b = Re(b).replace("mp4a.40.34", "mp3").split(",").map(function(c) {
            return Nf(c, "audio/mp4");
          }).map(Of).join(","), a == "audio" ? 'audio/mp4; codecs="' + b + '"' : 'video/mp4; codecs="' + b + '"') : b;
        };
        p.getOriginalMimeType = function() {
          return this.m;
        };
        p.transmux = function(a, b, c, d, e) {
          var f = Vb(a);
          if (e == "audio" && !lk(f)) {
            for (var g = Qj(f), h = g.length; h < f.length; h++) if (bG(f, h)) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
            for (h = g.length; h < f.length; h++) if (GF(f, h)) return this.i || (this.i = new IF("audio/aac")), this.i.transmux(a, b, c, d, e);
            return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
          }
          this.h ? this.h.clearData() : this.h = new dk();
          this.h.Gf(c.i);
          var k2 = this.h.parse(f), l = [], m = k2.Vd();
          try {
            var n = null;
            if (e == "video") {
              switch (m.video) {
                case "avc":
                  var q = [], r = null, u = k2.ud(), v = QF(u);
                  if (!v.length) throw new U(2, 3, 3023, c ? c.P()[0] : null);
                  for (var w = 0; w < v.length; w++) {
                    var z = v[w];
                    r == null && (r = z.dts);
                    var y = void 0;
                    y = w + 1 < v.length ? (v[w + 1].dts || 0) - (z.dts || 0) : v.length > 1 ? (z.dts || 0) - (v[w - 1].dts || 0) : (c.endTime - c.startTime) * 9e4;
                    q.push({ data: z.data, size: z.data.byteLength, duration: y, sb: Math.round((z.pts || 0) - (z.dts || 0)), flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: z.isKeyframe ? 2 : 1, yb: z.isKeyframe ? 0 : 1 } });
                  }
                  for (var B = [], C = t(u), H = C.next(); !H.done; H = C.next()) B.push.apply(B, x(H.value.nalus));
                  var D = OF(B);
                  if (!D || r == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  b.height = D.height;
                  b.width = D.width;
                  n = { id: b.id, type: "video", codecs: "avc1", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: 9e4, duration: d, Cb: [], Ga: new Uint8Array([]), Sa: D.Sa, Za: D.Za, $a: D.$a, data: { sequenceNumber: this.g, baseMediaDecodeTime: r, zb: q }, stream: b };
                  break;
                case "hvc":
                  var A = [], E = null, J = [], I = k2.ud();
                  if (!I.length) throw new U(2, 3, 3023, c ? c.P()[0] : null);
                  for (var K = 0; K < I.length; K++) {
                    var L = I[K], O = L.nalus;
                    J.push.apply(J, x(O));
                    for (var P = false, N = [], M = false, R = t(O), T = R.next(); !T.done; T = R.next()) {
                      var ma = T.value;
                      switch (ma.type) {
                        case 1:
                        case 0:
                          var W = M = true;
                          break;
                        case 19:
                        case 20:
                        case 21:
                          P = W = M = true;
                          break;
                        case 32:
                          W = true;
                          break;
                        case 33:
                          W = true;
                          break;
                        case 34:
                          W = true;
                          break;
                        case 35:
                          M = W = true;
                          break;
                        case 39:
                        case 40:
                          W = true;
                          break;
                        default:
                          W = false;
                      }
                      if (M && W) {
                        var Ia = ma.fullData.byteLength, ua = new Uint8Array(4);
                        ua[0] = Ia >> 24 & 255;
                        ua[1] = Ia >> 16 & 255;
                        ua[2] = Ia >> 8 & 255;
                        ua[3] = Ia & 255;
                        N.push(ua);
                        N.push(ma.fullData);
                      }
                    }
                    var Ea = N.length ? { data: tc.apply(lc, x(N)), isKeyframe: P } : null;
                    if (Ea) {
                      E == null && L.dts != null && (E = L.dts);
                      var ya = void 0;
                      ya = K + 1 < I.length ? (I[K + 1].dts || 0) - (L.dts || 0) : I.length > 1 ? (L.dts || 0) - (I[K - 1].dts || 0) : (c.endTime - c.startTime) * 9e4;
                      A.push({ data: Ea.data, size: Ea.data.byteLength, duration: ya, sb: Math.round((L.pts || 0) - (L.dts || 0)), flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: Ea.isKeyframe ? 2 : 1, yb: Ea.isKeyframe ? 0 : 1 } });
                    }
                  }
                  var va = RF(J);
                  if (!va || E == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  b.height = va.height;
                  b.width = va.width;
                  n = {
                    id: b.id,
                    type: "video",
                    codecs: "hvc1",
                    encrypted: b.encrypted && b.drmInfos.length > 0,
                    timescale: 9e4,
                    duration: d,
                    Cb: [],
                    Ga: new Uint8Array([]),
                    Sa: va.Sa,
                    Za: va.Za,
                    $a: va.$a,
                    data: { sequenceNumber: this.g, baseMediaDecodeTime: E, zb: A },
                    stream: b
                  };
              }
              n && (l.push(n), n = null);
            }
            if (e == "audio") {
              switch (m.audio) {
                case "aac":
                  for (var xa = [], Ga, Ca = null, wa = null, za = null, ub = t(k2.ub()), pb = ub.next(); !pb.done; pb = ub.next()) {
                    var pc = pb.value, qc = pc.data;
                    if (qc) {
                      var Ub = 0;
                      if (wa == -1 && za) qc = tc(za, pc.data), wa = null;
                      else if (wa != null && za) {
                        Ub = Math.max(0, wa);
                        var Rf = tc(za, qc.subarray(0, Ub));
                        xa.push({ data: Rf, size: Rf.byteLength, duration: 1024, sb: 0, flags: {
                          xb: 0,
                          mb: 0,
                          jb: 0,
                          hb: 0,
                          ib: 2,
                          yb: 0
                        } });
                        wa = za = null;
                      }
                      Ga = FF(qc, Ub);
                      if (!Ga) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                      b.audioSamplingRate = Ga.sampleRate;
                      b.channelsCount = Ga.channelCount;
                      Ca == null && pc.pts !== null && (Ca = pc.pts);
                      for (; Ub < qc.length; ) {
                        var dd = EF(qc, Ub);
                        if (!dd) {
                          za = qc.subarray(Ub, qc.length);
                          wa = -1;
                          break;
                        }
                        var me = dd.$d + dd.ra;
                        wa = Math.max(0, Ub + me - qc.length);
                        wa != 0 ? za = qc.subarray(Ub + dd.$d, Ub + me) : Ub + me <= qc.length && xa.push({ data: qc.subarray(Ub + dd.$d, Ub + me), size: dd.ra, duration: 1024, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } });
                        Ub += me;
                      }
                    }
                  }
                  if (!Ga || Ca == null) {
                    Ca = c.startTime * 9e4;
                    var md = yc("audio", b.codecs.split(","));
                    if (!md || !b.channelsCount || !b.audioSamplingRate) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                    Ga = { sampleRate: b.audioSamplingRate, channelCount: b.channelsCount, codec: md };
                    var Sf = HF(md, b.channelsCount);
                    if (!Sf) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                    for (var Jj = Ca + (c.endTime - c.startTime) * 9e4, oh = Ca; oh < Jj; ) xa.push({ data: Sf, size: Sf.byteLength, duration: 1024, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } }), oh += 1024 / Ga.sampleRate * 9e4;
                  }
                  var Wc = Ga.sampleRate, mG = Ca / 9e4 * Wc;
                  n = { id: b.id, type: "audio", codecs: Ga.codec, encrypted: b.encrypted && b.drmInfos.length > 0, timescale: Wc, duration: d, Cb: [], Ga: new Uint8Array([]), Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: mG, zb: xa }, stream: b };
                  break;
                case "ac3":
                  for (var Mw = [], sk = 0, so = new Uint8Array([]), tk = null, Nw = t(k2.ub()), to = Nw.next(); !to.done; to = Nw.next()) {
                    var uo = to.value, vo = uo.data;
                    tk == null && uo.pts !== null && (tk = uo.pts);
                    for (var Yf = 0; Yf < vo.length; ) {
                      var oe = JF(vo, Yf);
                      oe ? (b.audioSamplingRate = oe.sampleRate, b.channelsCount = oe.channelCount, sk = oe.sampleRate, so = oe.Ga, Mw.push({ data: vo.subarray(Yf, Yf + oe.ra), size: oe.ra, duration: 1536, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } }), Yf += oe.ra) : Yf++;
                    }
                  }
                  if (sk == 0 || so.byteLength == 0 || tk == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  var nG = tk / 9e4 * sk;
                  n = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: sk, duration: d, Cb: [], Ga: so, Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: nG, zb: Mw }, stream: b };
                  break;
                case "ec3":
                  for (var Ow = [], uk = 0, wo = new Uint8Array([]), vk = null, Pw = t(k2.ub()), xo = Pw.next(); !xo.done; xo = Pw.next()) {
                    var yo = xo.value, zo = yo.data;
                    vk == null && yo.pts !== null && (vk = yo.pts);
                    for (var Zf = 0; Zf < zo.length; ) {
                      var pe = MF(zo, Zf);
                      pe ? (b.audioSamplingRate = pe.sampleRate, b.channelsCount = pe.channelCount, uk = pe.sampleRate, wo = pe.Ga, Ow.push({ data: zo.subarray(Zf, Zf + pe.ra), size: pe.ra, duration: 1536, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } }), Zf += pe.ra) : Zf++;
                    }
                  }
                  if (uk == 0 || wo.byteLength == 0 || vk == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  var oG = vk / 9e4 * uk;
                  n = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: uk, duration: d, Cb: [], Ga: wo, Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: oG, zb: Ow }, stream: b };
                  break;
                case "mp3":
                  for (var Qw = [], wk, xk = null, Rw = t(k2.ub()), Ao = Rw.next(); !Ao.done; Ao = Rw.next()) {
                    var Bo = Ao.value, Ah = Bo.data;
                    if (Ah) {
                      xk == null && Bo.pts !== null && (xk = Bo.pts);
                      for (var Se = 0; Se < Ah.length; ) {
                        var $f = WF(Ah, Se);
                        $f ? (wk || (wk = $f), Se + $f.ra <= Ah.length && Qw.push({
                          data: Ah.subarray(Se, Se + $f.ra),
                          size: $f.ra,
                          duration: 1152,
                          sb: 0,
                          flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 }
                        }), Se += $f.ra) : Se++;
                      }
                    }
                  }
                  if (!wk || xk == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  var Sw = wk.sampleRate, pG = xk / 9e4 * Sw;
                  n = { id: b.id, type: "audio", codecs: "mp3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: Sw, duration: d, Cb: [], Ga: new Uint8Array([]), Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: pG, zb: Qw }, stream: b };
                  break;
                case "opus":
                  var Tw = [], yk = null, od = k2.H;
                  if (!od) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  var Wb = [];
                  switch (od.oj) {
                    case 1:
                    case 2:
                      Wb = [0];
                      break;
                    case 0:
                      Wb = [255, 1, 1, 0, 1];
                      break;
                    case 128:
                      Wb = [255, 2, 0, 0, 1];
                      break;
                    case 3:
                      Wb = [1, 2, 1, 0, 2, 1];
                      break;
                    case 4:
                      Wb = [1, 2, 2, 0, 1, 2, 3];
                      break;
                    case 5:
                      Wb = [1, 3, 2, 0, 4, 1, 2, 3];
                      break;
                    case 6:
                      Wb = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                      break;
                    case 7:
                      Wb = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                      break;
                    case 8:
                      Wb = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                      break;
                    case 130:
                      Wb = [1, 1, 2, 0, 1];
                      break;
                    case 131:
                      Wb = [1, 1, 3, 0, 1, 2];
                      break;
                    case 132:
                      Wb = [1, 1, 4, 0, 1, 2, 3];
                      break;
                    case 133:
                      Wb = [1, 1, 5, 0, 1, 2, 3, 4];
                      break;
                    case 134:
                      Wb = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                      break;
                    case 135:
                      Wb = [
                        1,
                        1,
                        7,
                        0,
                        1,
                        2,
                        3,
                        4,
                        5,
                        6
                      ];
                      break;
                    case 136:
                      Wb = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                  }
                  var Uw = new Uint8Array([0, od.channelCount, 0, 0, od.sampleRate >>> 24 & 255, od.sampleRate >>> 17 & 255, od.sampleRate >>> 8 & 255, od.sampleRate >>> 0 & 255, 0, 0].concat(x(Wb)));
                  for (var Vw = od.sampleRate, Ww = t(k2.ub()), Co = Ww.next(); !Co.done; Co = Ww.next()) {
                    var Do = Co.value, ag = Do.data;
                    yk == null && Do.pts !== null && (yk = Do.pts);
                    for (var Bh = 0; Bh < ag.length; ) {
                      for (var qG = (ag[Bh + 1] & 16) !== 0, rG = (ag[Bh + 1] & 8) !== 0, Pd = Bh + 2, zk = 0; ag[Pd] === 255; ) zk += 255, Pd += 1;
                      zk += ag[Pd];
                      Pd += 1;
                      Pd += qG ? 2 : 0;
                      Pd += rG ? 2 : 0;
                      var Xw = ag.slice(Pd, Pd + zk);
                      Tw.push({ data: Xw, size: Xw.byteLength, duration: 960, sb: 0, flags: { xb: 0, mb: 0, jb: 0, hb: 0, ib: 2, yb: 0 } });
                      Bh = Pd + zk;
                    }
                  }
                  if (Uw.byteLength == 0 || yk == null) throw new U(2, 3, 3018, c ? c.P()[0] : null);
                  b.audioSamplingRate = od.sampleRate;
                  b.channelsCount = od.channelCount;
                  var sG = yk / 9e4 * Vw;
                  n = { id: b.id, type: "audio", codecs: "opus", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: Vw, duration: d, Cb: [], Ga: Uw, Sa: new Uint8Array([]), Za: 0, $a: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: sG, zb: Tw }, stream: b };
              }
              n && (l.push(n), n = null);
            }
          } catch (Eo) {
            return Eo && Eo.code == 3023 ? Promise.resolve(new Uint8Array([])) : Promise.reject(Eo);
          }
          if (!l.length) return Promise.reject(new U(2, 3, 3018, c ? c.P()[0] : null));
          var Yw = new Ji(l), Fo = b.id + "_" + c.i;
          if (this.j.has(Fo)) var Ch = this.j.get(Fo);
          else Ch = Ki(Yw), this.j.set(Fo, Ch);
          var tG = this.l !== Ch, uG = ej(Yw);
          this.l = Ch;
          this.g++;
          return Promise.resolve({ data: uG, init: tG ? Ch : null });
        };
        S("shaka.transmuxer.TsTransmuxer", iG);
        iG.prototype.transmux = iG.prototype.transmux;
        iG.prototype.getOriginalMimeType = iG.prototype.getOriginalMimeType;
        iG.prototype.convertCodecs = iG.prototype.convertCodecs;
        iG.prototype.isSupported = iG.prototype.isSupported;
        iG.prototype.destroy = iG.prototype.destroy;
        var jG = ["aac", "ac-3", "ec-3", "mp3", "opus"], kG = ["avc", "hevc"];
        Ae("video/mp2t", function() {
          return new iG("video/mp2t");
        }, Ee);
        function lG() {
        }
        la(lG, tn);
        S("shaka.util.FairPlayUtils", lG);
      }).call(exportTo, innerGlobal, innerGlobal, void 0);
      if (typeof exports != "undefined") for (var k in exportTo.shaka) exports[k] = exportTo.shaka[k];
      else if (typeof define == "function" && define.amd) define(function() {
        return exportTo.shaka;
      });
      else innerGlobal.shaka = exportTo.shaka;
    })();
  }
});
export default require_shaka_player_compiled();
//# sourceMappingURL=shaka-player.js.map
